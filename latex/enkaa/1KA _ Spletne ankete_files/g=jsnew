/*! jQuery v1.7.1 jquery.com | jquery.org/license */
(function(a,b){function cy(a){return f.isWindow(a)?a:a.nodeType===9?a.defaultView||a.parentWindow:!1}function cv(a){if(!ck[a]){var b=c.body,d=f("<"+a+">").appendTo(b),e=d.css("display");d.remove();if(e==="none"||e===""){cl||(cl=c.createElement("iframe"),cl.frameBorder=cl.width=cl.height=0),b.appendChild(cl);if(!cm||!cl.createElement)cm=(cl.contentWindow||cl.contentDocument).document,cm.write((c.compatMode==="CSS1Compat"?"<!doctype html>":"")+"<html><body>"),cm.close();d=cm.createElement(a),cm.body.appendChild(d),e=f.css(d,"display"),b.removeChild(cl)}ck[a]=e}return ck[a]}function cu(a,b){var c={};f.each(cq.concat.apply([],cq.slice(0,b)),function(){c[this]=a});return c}function ct(){cr=b}function cs(){setTimeout(ct,0);return cr=f.now()}function cj(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}function ci(){try{return new a.XMLHttpRequest}catch(b){}}function cc(a,c){a.dataFilter&&(c=a.dataFilter(c,a.dataType));var d=a.dataTypes,e={},g,h,i=d.length,j,k=d[0],l,m,n,o,p;for(g=1;g<i;g++){if(g===1)for(h in a.converters)typeof h=="string"&&(e[h.toLowerCase()]=a.converters[h]);l=k,k=d[g];if(k==="*")k=l;else if(l!=="*"&&l!==k){m=l+" "+k,n=e[m]||e["* "+k];if(!n){p=b;for(o in e){j=o.split(" ");if(j[0]===l||j[0]==="*"){p=e[j[1]+" "+k];if(p){o=e[o],o===!0?n=p:p===!0&&(n=o);break}}}}!n&&!p&&f.error("No conversion from "+m.replace(" "," to ")),n!==!0&&(c=n?n(c):p(o(c)))}}return c}function cb(a,c,d){var e=a.contents,f=a.dataTypes,g=a.responseFields,h,i,j,k;for(i in g)i in d&&(c[g[i]]=d[i]);while(f[0]==="*")f.shift(),h===b&&(h=a.mimeType||c.getResponseHeader("content-type"));if(h)for(i in e)if(e[i]&&e[i].test(h)){f.unshift(i);break}if(f[0]in d)j=f[0];else{for(i in d){if(!f[0]||a.converters[i+" "+f[0]]){j=i;break}k||(k=i)}j=j||k}if(j){j!==f[0]&&f.unshift(j);return d[j]}}function ca(a,b,c,d){if(f.isArray(b))f.each(b,function(b,e){c||bE.test(a)?d(a,e):ca(a+"["+(typeof e=="object"||f.isArray(e)?b:"")+"]",e,c,d)});else if(!c&&b!=null&&typeof b=="object")for(var e in b)ca(a+"["+e+"]",b[e],c,d);else d(a,b)}function b_(a,c){var d,e,g=f.ajaxSettings.flatOptions||{};for(d in c)c[d]!==b&&((g[d]?a:e||(e={}))[d]=c[d]);e&&f.extend(!0,a,e)}function b$(a,c,d,e,f,g){f=f||c.dataTypes[0],g=g||{},g[f]=!0;var h=a[f],i=0,j=h?h.length:0,k=a===bT,l;for(;i<j&&(k||!l);i++)l=h[i](c,d,e),typeof l=="string"&&(!k||g[l]?l=b:(c.dataTypes.unshift(l),l=b$(a,c,d,e,l,g)));(k||!l)&&!g["*"]&&(l=b$(a,c,d,e,"*",g));return l}function bZ(a){return function(b,c){typeof b!="string"&&(c=b,b="*");if(f.isFunction(c)){var d=b.toLowerCase().split(bP),e=0,g=d.length,h,i,j;for(;e<g;e++)h=d[e],j=/^\+/.test(h),j&&(h=h.substr(1)||"*"),i=a[h]=a[h]||[],i[j?"unshift":"push"](c)}}}function bC(a,b,c){var d=b==="width"?a.offsetWidth:a.offsetHeight,e=b==="width"?bx:by,g=0,h=e.length;if(d>0){if(c!=="border")for(;g<h;g++)c||(d-=parseFloat(f.css(a,"padding"+e[g]))||0),c==="margin"?d+=parseFloat(f.css(a,c+e[g]))||0:d-=parseFloat(f.css(a,"border"+e[g]+"Width"))||0;return d+"px"}d=bz(a,b,b);if(d<0||d==null)d=a.style[b]||0;d=parseFloat(d)||0;if(c)for(;g<h;g++)d+=parseFloat(f.css(a,"padding"+e[g]))||0,c!=="padding"&&(d+=parseFloat(f.css(a,"border"+e[g]+"Width"))||0),c==="margin"&&(d+=parseFloat(f.css(a,c+e[g]))||0);return d+"px"}function bp(a,b){b.src?f.ajax({url:b.src,async:!1,dataType:"script"}):f.globalEval((b.text||b.textContent||b.innerHTML||"").replace(bf,"/*$0*/")),b.parentNode&&b.parentNode.removeChild(b)}function bo(a){var b=c.createElement("div");bh.appendChild(b),b.innerHTML=a.outerHTML;return b.firstChild}function bn(a){var b=(a.nodeName||"").toLowerCase();b==="input"?bm(a):b!=="script"&&typeof a.getElementsByTagName!="undefined"&&f.grep(a.getElementsByTagName("input"),bm)}function bm(a){if(a.type==="checkbox"||a.type==="radio")a.defaultChecked=a.checked}function bl(a){return typeof a.getElementsByTagName!="undefined"?a.getElementsByTagName("*"):typeof a.querySelectorAll!="undefined"?a.querySelectorAll("*"):[]}function bk(a,b){var c;if(b.nodeType===1){b.clearAttributes&&b.clearAttributes(),b.mergeAttributes&&b.mergeAttributes(a),c=b.nodeName.toLowerCase();if(c==="object")b.outerHTML=a.outerHTML;else if(c!=="input"||a.type!=="checkbox"&&a.type!=="radio"){if(c==="option")b.selected=a.defaultSelected;else if(c==="input"||c==="textarea")b.defaultValue=a.defaultValue}else a.checked&&(b.defaultChecked=b.checked=a.checked),b.value!==a.value&&(b.value=a.value);b.removeAttribute(f.expando)}}function bj(a,b){if(b.nodeType===1&&!!f.hasData(a)){var c,d,e,g=f._data(a),h=f._data(b,g),i=g.events;if(i){delete h.handle,h.events={};for(c in i)for(d=0,e=i[c].length;d<e;d++)f.event.add(b,c+(i[c][d].namespace?".":"")+i[c][d].namespace,i[c][d],i[c][d].data)}h.data&&(h.data=f.extend({},h.data))}}function bi(a,b){return f.nodeName(a,"table")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function U(a){var b=V.split("|"),c=a.createDocumentFragment();if(c.createElement)while(b.length)c.createElement(b.pop());return c}function T(a,b,c){b=b||0;if(f.isFunction(b))return f.grep(a,function(a,d){var e=!!b.call(a,d,a);return e===c});if(b.nodeType)return f.grep(a,function(a,d){return a===b===c});if(typeof b=="string"){var d=f.grep(a,function(a){return a.nodeType===1});if(O.test(b))return f.filter(b,d,!c);b=f.filter(b,d)}return f.grep(a,function(a,d){return f.inArray(a,b)>=0===c})}function S(a){return!a||!a.parentNode||a.parentNode.nodeType===11}function K(){return!0}function J(){return!1}function n(a,b,c){var d=b+"defer",e=b+"queue",g=b+"mark",h=f._data(a,d);h&&(c==="queue"||!f._data(a,e))&&(c==="mark"||!f._data(a,g))&&setTimeout(function(){!f._data(a,e)&&!f._data(a,g)&&(f.removeData(a,d,!0),h.fire())},0)}function m(a){for(var b in a){if(b==="data"&&f.isEmptyObject(a[b]))continue;if(b!=="toJSON")return!1}return!0}function l(a,c,d){if(d===b&&a.nodeType===1){var e="data-"+c.replace(k,"-$1").toLowerCase();d=a.getAttribute(e);if(typeof d=="string"){try{d=d==="true"?!0:d==="false"?!1:d==="null"?null:f.isNumeric(d)?parseFloat(d):j.test(d)?f.parseJSON(d):d}catch(g){}f.data(a,c,d)}else d=b}return d}function h(a){var b=g[a]={},c,d;a=a.split(/\s+/);for(c=0,d=a.length;c<d;c++)b[a[c]]=!0;return b}var c=a.document,d=a.navigator,e=a.location,f=function(){function J(){if(!e.isReady){try{c.documentElement.doScroll("left")}catch(a){setTimeout(J,1);return}e.ready()}}var e=function(a,b){return new e.fn.init(a,b,h)},f=a.jQuery,g=a.$,h,i=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,j=/\S/,k=/^\s+/,l=/\s+$/,m=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,n=/^[\],:{}\s]*$/,o=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,p=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,q=/(?:^|:|,)(?:\s*\[)+/g,r=/(webkit)[ \/]([\w.]+)/,s=/(opera)(?:.*version)?[ \/]([\w.]+)/,t=/(msie) ([\w.]+)/,u=/(mozilla)(?:.*? rv:([\w.]+))?/,v=/-([a-z]|[0-9])/ig,w=/^-ms-/,x=function(a,b){return(b+"").toUpperCase()},y=d.userAgent,z,A,B,C=Object.prototype.toString,D=Object.prototype.hasOwnProperty,E=Array.prototype.push,F=Array.prototype.slice,G=String.prototype.trim,H=Array.prototype.indexOf,I={};e.fn=e.prototype={constructor:e,init:function(a,d,f){var g,h,j,k;if(!a)return this;if(a.nodeType){this.context=this[0]=a,this.length=1;return this}if(a==="body"&&!d&&c.body){this.context=c,this[0]=c.body,this.selector=a,this.length=1;return this}if(typeof a=="string"){a.charAt(0)!=="<"||a.charAt(a.length-1)!==">"||a.length<3?g=i.exec(a):g=[null,a,null];if(g&&(g[1]||!d)){if(g[1]){d=d instanceof e?d[0]:d,k=d?d.ownerDocument||d:c,j=m.exec(a),j?e.isPlainObject(d)?(a=[c.createElement(j[1])],e.fn.attr.call(a,d,!0)):a=[k.createElement(j[1])]:(j=e.buildFragment([g[1]],[k]),a=(j.cacheable?e.clone(j.fragment):j.fragment).childNodes);return e.merge(this,a)}h=c.getElementById(g[2]);if(h&&h.parentNode){if(h.id!==g[2])return f.find(a);this.length=1,this[0]=h}this.context=c,this.selector=a;return this}return!d||d.jquery?(d||f).find(a):this.constructor(d).find(a)}if(e.isFunction(a))return f.ready(a);a.selector!==b&&(this.selector=a.selector,this.context=a.context);return e.makeArray(a,this)},selector:"",jquery:"1.7.1",length:0,size:function(){return this.length},toArray:function(){return F.call(this,0)},get:function(a){return a==null?this.toArray():a<0?this[this.length+a]:this[a]},pushStack:function(a,b,c){var d=this.constructor();e.isArray(a)?E.apply(d,a):e.merge(d,a),d.prevObject=this,d.context=this.context,b==="find"?d.selector=this.selector+(this.selector?" ":"")+c:b&&(d.selector=this.selector+"."+b+"("+c+")");return d},each:function(a,b){return e.each(this,a,b)},ready:function(a){e.bindReady(),A.add(a);return this},eq:function(a){a=+a;return a===-1?this.slice(a):this.slice(a,a+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(F.apply(this,arguments),"slice",F.call(arguments).join(","))},map:function(a){return this.pushStack(e.map(this,function(b,c){return a.call(b,c,b)}))},end:function(){return this.prevObject||this.constructor(null)},push:E,sort:[].sort,splice:[].splice},e.fn.init.prototype=e.fn,e.extend=e.fn.extend=function(){var a,c,d,f,g,h,i=arguments[0]||{},j=1,k=arguments.length,l=!1;typeof i=="boolean"&&(l=i,i=arguments[1]||{},j=2),typeof i!="object"&&!e.isFunction(i)&&(i={}),k===j&&(i=this,--j);for(;j<k;j++)if((a=arguments[j])!=null)for(c in a){d=i[c],f=a[c];if(i===f)continue;l&&f&&(e.isPlainObject(f)||(g=e.isArray(f)))?(g?(g=!1,h=d&&e.isArray(d)?d:[]):h=d&&e.isPlainObject(d)?d:{},i[c]=e.extend(l,h,f)):f!==b&&(i[c]=f)}return i},e.extend({noConflict:function(b){a.$===e&&(a.$=g),b&&a.jQuery===e&&(a.jQuery=f);return e},isReady:!1,readyWait:1,holdReady:function(a){a?e.readyWait++:e.ready(!0)},ready:function(a){if(a===!0&&!--e.readyWait||a!==!0&&!e.isReady){if(!c.body)return setTimeout(e.ready,1);e.isReady=!0;if(a!==!0&&--e.readyWait>0)return;A.fireWith(c,[e]),e.fn.trigger&&e(c).trigger("ready").off("ready")}},bindReady:function(){if(!A){A=e.Callbacks("once memory");if(c.readyState==="complete")return setTimeout(e.ready,1);if(c.addEventListener)c.addEventListener("DOMContentLoaded",B,!1),a.addEventListener("load",e.ready,!1);else if(c.attachEvent){c.attachEvent("onreadystatechange",B),a.attachEvent("onload",e.ready);var b=!1;try{b=a.frameElement==null}catch(d){}c.documentElement.doScroll&&b&&J()}}},isFunction:function(a){return e.type(a)==="function"},isArray:Array.isArray||function(a){return e.type(a)==="array"},isWindow:function(a){return a&&typeof a=="object"&&"setInterval"in a},isNumeric:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},type:function(a){return a==null?String(a):I[C.call(a)]||"object"},isPlainObject:function(a){if(!a||e.type(a)!=="object"||a.nodeType||e.isWindow(a))return!1;try{if(a.constructor&&!D.call(a,"constructor")&&!D.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(c){return!1}var d;for(d in a);return d===b||D.call(a,d)},isEmptyObject:function(a){for(var b in a)return!1;return!0},error:function(a){throw new Error(a)},parseJSON:function(b){if(typeof b!="string"||!b)return null;b=e.trim(b);if(a.JSON&&a.JSON.parse)return a.JSON.parse(b);if(n.test(b.replace(o,"@").replace(p,"]").replace(q,"")))return(new Function("return "+b))();e.error("Invalid JSON: "+b)},parseXML:function(c){var d,f;try{a.DOMParser?(f=new DOMParser,d=f.parseFromString(c,"text/xml")):(d=new ActiveXObject("Microsoft.XMLDOM"),d.async="false",d.loadXML(c))}catch(g){d=b}(!d||!d.documentElement||d.getElementsByTagName("parsererror").length)&&e.error("Invalid XML: "+c);return d},noop:function(){},globalEval:function(b){b&&j.test(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(w,"ms-").replace(v,x)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toUpperCase()===b.toUpperCase()},each:function(a,c,d){var f,g=0,h=a.length,i=h===b||e.isFunction(a);if(d){if(i){for(f in a)if(c.apply(a[f],d)===!1)break}else for(;g<h;)if(c.apply(a[g++],d)===!1)break}else if(i){for(f in a)if(c.call(a[f],f,a[f])===!1)break}else for(;g<h;)if(c.call(a[g],g,a[g++])===!1)break;return a},trim:G?function(a){return a==null?"":G.call(a)}:function(a){return a==null?"":(a+"").replace(k,"").replace(l,"")},makeArray:function(a,b){var c=b||[];if(a!=null){var d=e.type(a);a.length==null||d==="string"||d==="function"||d==="regexp"||e.isWindow(a)?E.call(c,a):e.merge(c,a)}return c},inArray:function(a,b,c){var d;if(b){if(H)return H.call(b,a,c);d=b.length,c=c?c<0?Math.max(0,d+c):c:0;for(;c<d;c++)if(c in b&&b[c]===a)return c}return-1},merge:function(a,c){var d=a.length,e=0;if(typeof c.length=="number")for(var f=c.length;e<f;e++)a[d++]=c[e];else while(c[e]!==b)a[d++]=c[e++];a.length=d;return a},grep:function(a,b,c){var d=[],e;c=!!c;for(var f=0,g=a.length;f<g;f++)e=!!b(a[f],f),c!==e&&d.push(a[f]);return d},map:function(a,c,d){var f,g,h=[],i=0,j=a.length,k=a instanceof e||j!==b&&typeof j=="number"&&(j>0&&a[0]&&a[j-1]||j===0||e.isArray(a));if(k)for(;i<j;i++)f=c(a[i],i,d),f!=null&&(h[h.length]=f);else for(g in a)f=c(a[g],g,d),f!=null&&(h[h.length]=f);return h.concat.apply([],h)},guid:1,proxy:function(a,c){if(typeof c=="string"){var d=a[c];c=a,a=d}if(!e.isFunction(a))return b;var f=F.call(arguments,2),g=function(){return a.apply(c,f.concat(F.call(arguments)))};g.guid=a.guid=a.guid||g.guid||e.guid++;return g},access:function(a,c,d,f,g,h){var i=a.length;if(typeof c=="object"){for(var j in c)e.access(a,j,c[j],f,g,d);return a}if(d!==b){f=!h&&f&&e.isFunction(d);for(var k=0;k<i;k++)g(a[k],c,f?d.call(a[k],k,g(a[k],c)):d,h);return a}return i?g(a[0],c):b},now:function(){return(new Date).getTime()},uaMatch:function(a){a=a.toLowerCase();var b=r.exec(a)||s.exec(a)||t.exec(a)||a.indexOf("compatible")<0&&u.exec(a)||[];return{browser:b[1]||"",version:b[2]||"0"}},sub:function(){function a(b,c){return new a.fn.init(b,c)}e.extend(!0,a,this),a.superclass=this,a.fn=a.prototype=this(),a.fn.constructor=a,a.sub=this.sub,a.fn.init=function(d,f){f&&f instanceof e&&!(f instanceof a)&&(f=a(f));return e.fn.init.call(this,d,f,b)},a.fn.init.prototype=a.fn;var b=a(c);return a},browser:{}}),e.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(a,b){I["[object "+b+"]"]=b.toLowerCase()}),z=e.uaMatch(y),z.browser&&(e.browser[z.browser]=!0,e.browser.version=z.version),e.browser.webkit&&(e.browser.safari=!0),j.test(" ")&&(k=/^[\s\xA0]+/,l=/[\s\xA0]+$/),h=e(c),c.addEventListener?B=function(){c.removeEventListener("DOMContentLoaded",B,!1),e.ready()}:c.attachEvent&&(B=function(){c.readyState==="complete"&&(c.detachEvent("onreadystatechange",B),e.ready())});return e}(),g={};f.Callbacks=function(a){a=a?g[a]||h(a):{};var c=[],d=[],e,i,j,k,l,m=function(b){var d,e,g,h,i;for(d=0,e=b.length;d<e;d++)g=b[d],h=f.type(g),h==="array"?m(g):h==="function"&&(!a.unique||!o.has(g))&&c.push(g)},n=function(b,f){f=f||[],e=!a.memory||[b,f],i=!0,l=j||0,j=0,k=c.length;for(;c&&l<k;l++)if(c[l].apply(b,f)===!1&&a.stopOnFalse){e=!0;break}i=!1,c&&(a.once?e===!0?o.disable():c=[]:d&&d.length&&(e=d.shift(),o.fireWith(e[0],e[1])))},o={add:function(){if(c){var a=c.length;m(arguments),i?k=c.length:e&&e!==!0&&(j=a,n(e[0],e[1]))}return this},remove:function(){if(c){var b=arguments,d=0,e=b.length;for(;d<e;d++)for(var f=0;f<c.length;f++)if(b[d]===c[f]){i&&f<=k&&(k--,f<=l&&l--),c.splice(f--,1);if(a.unique)break}}return this},has:function(a){if(c){var b=0,d=c.length;for(;b<d;b++)if(a===c[b])return!0}return!1},empty:function(){c=[];return this},disable:function(){c=d=e=b;return this},disabled:function(){return!c},lock:function(){d=b,(!e||e===!0)&&o.disable();return this},locked:function(){return!d},fireWith:function(b,c){d&&(i?a.once||d.push([b,c]):(!a.once||!e)&&n(b,c));return this},fire:function(){o.fireWith(this,arguments);return this},fired:function(){return!!e}};return o};var i=[].slice;f.extend({Deferred:function(a){var b=f.Callbacks("once memory"),c=f.Callbacks("once memory"),d=f.Callbacks("memory"),e="pending",g={resolve:b,reject:c,notify:d},h={done:b.add,fail:c.add,progress:d.add,state:function(){return e},isResolved:b.fired,isRejected:c.fired,then:function(a,b,c){i.done(a).fail(b).progress(c);return this},always:function(){i.done.apply(i,arguments).fail.apply(i,arguments);return this},pipe:function(a,b,c){return f.Deferred(function(d){f.each({done:[a,"resolve"],fail:[b,"reject"],progress:[c,"notify"]},function(a,b){var c=b[0],e=b[1],g;f.isFunction(c)?i[a](function(){g=c.apply(this,arguments),g&&f.isFunction(g.promise)?g.promise().then(d.resolve,d.reject,d.notify):d[e+"With"](this===i?d:this,[g])}):i[a](d[e])})}).promise()},promise:function(a){if(a==null)a=h;else for(var b in h)a[b]=h[b];return a}},i=h.promise({}),j;for(j in g)i[j]=g[j].fire,i[j+"With"]=g[j].fireWith;i.done(function(){e="resolved"},c.disable,d.lock).fail(function(){e="rejected"},b.disable,d.lock),a&&a.call(i,i);return i},when:function(a){function m(a){return function(b){e[a]=arguments.length>1?i.call(arguments,0):b,j.notifyWith(k,e)}}function l(a){return function(c){b[a]=arguments.length>1?i.call(arguments,0):c,--g||j.resolveWith(j,b)}}var b=i.call(arguments,0),c=0,d=b.length,e=Array(d),g=d,h=d,j=d<=1&&a&&f.isFunction(a.promise)?a:f.Deferred(),k=j.promise();if(d>1){for(;c<d;c++)b[c]&&b[c].promise&&f.isFunction(b[c].promise)?b[c].promise().then(l(c),j.reject,m(c)):--g;g||j.resolveWith(j,b)}else j!==a&&j.resolveWith(j,d?[a]:[]);return k}}),f.support=function(){var b,d,e,g,h,i,j,k,l,m,n,o,p,q=c.createElement("div"),r=c.documentElement;q.setAttribute("className","t"),q.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>",d=q.getElementsByTagName("*"),e=q.getElementsByTagName("a")[0];if(!d||!d.length||!e)return{};g=c.createElement("select"),h=g.appendChild(c.createElement("option")),i=q.getElementsByTagName("input")[0],b={leadingWhitespace:q.firstChild.nodeType===3,tbody:!q.getElementsByTagName("tbody").length,htmlSerialize:!!q.getElementsByTagName("link").length,style:/top/.test(e.getAttribute("style")),hrefNormalized:e.getAttribute("href")==="/a",opacity:/^0.55/.test(e.style.opacity),cssFloat:!!e.style.cssFloat,checkOn:i.value==="on",optSelected:h.selected,getSetAttribute:q.className!=="t",enctype:!!c.createElement("form").enctype,html5Clone:c.createElement("nav").cloneNode(!0).outerHTML!=="<:nav></:nav>",submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0},i.checked=!0,b.noCloneChecked=i.cloneNode(!0).checked,g.disabled=!0,b.optDisabled=!h.disabled;try{delete q.test}catch(s){b.deleteExpando=!1}!q.addEventListener&&q.attachEvent&&q.fireEvent&&(q.attachEvent("onclick",function(){b.noCloneEvent=!1}),q.cloneNode(!0).fireEvent("onclick")),i=c.createElement("input"),i.value="t",i.setAttribute("type","radio"),b.radioValue=i.value==="t",i.setAttribute("checked","checked"),q.appendChild(i),k=c.createDocumentFragment(),k.appendChild(q.lastChild),b.checkClone=k.cloneNode(!0).cloneNode(!0).lastChild.checked,b.appendChecked=i.checked,k.removeChild(i),k.appendChild(q),q.innerHTML="",a.getComputedStyle&&(j=c.createElement("div"),j.style.width="0",j.style.marginRight="0",q.style.width="2px",q.appendChild(j),b.reliableMarginRight=(parseInt((a.getComputedStyle(j,null)||{marginRight:0}).marginRight,10)||0)===0);if(q.attachEvent)for(o in{submit:1,change:1,focusin:1})n="on"+o,p=n in q,p||(q.setAttribute(n,"return;"),p=typeof q[n]=="function"),b[o+"Bubbles"]=p;k.removeChild(q),k=g=h=j=q=i=null,f(function(){var a,d,e,g,h,i,j,k,m,n,o,r=c.getElementsByTagName("body")[0];!r||(j=1,k="position:absolute;top:0;left:0;width:1px;height:1px;margin:0;",m="visibility:hidden;border:0;",n="style='"+k+"border:5px solid #000;padding:0;'",o="<div "+n+"><div></div></div>"+"<table "+n+" cellpadding='0' cellspacing='0'>"+"<tr><td></td></tr></table>",a=c.createElement("div"),a.style.cssText=m+"width:0;height:0;position:static;top:0;margin-top:"+j+"px",r.insertBefore(a,r.firstChild),q=c.createElement("div"),a.appendChild(q),q.innerHTML="<table><tr><td style='padding:0;border:0;display:none'></td><td>t</td></tr></table>",l=q.getElementsByTagName("td"),p=l[0].offsetHeight===0,l[0].style.display="",l[1].style.display="none",b.reliableHiddenOffsets=p&&l[0].offsetHeight===0,q.innerHTML="",q.style.width=q.style.paddingLeft="1px",f.boxModel=b.boxModel=q.offsetWidth===2,typeof q.style.zoom!="undefined"&&(q.style.display="inline",q.style.zoom=1,b.inlineBlockNeedsLayout=q.offsetWidth===2,q.style.display="",q.innerHTML="<div style='width:4px;'></div>",b.shrinkWrapBlocks=q.offsetWidth!==2),q.style.cssText=k+m,q.innerHTML=o,d=q.firstChild,e=d.firstChild,h=d.nextSibling.firstChild.firstChild,i={doesNotAddBorder:e.offsetTop!==5,doesAddBorderForTableAndCells:h.offsetTop===5},e.style.position="fixed",e.style.top="20px",i.fixedPosition=e.offsetTop===20||e.offsetTop===15,e.style.position=e.style.top="",d.style.overflow="hidden",d.style.position="relative",i.subtractsBorderForOverflowNotVisible=e.offsetTop===-5,i.doesNotIncludeMarginInBodyOffset=r.offsetTop!==j,r.removeChild(a),q=a=null,f.extend(b,i))});return b}();var j=/^(?:\{.*\}|\[.*\])$/,k=/([A-Z])/g;f.extend({cache:{},uuid:0,expando:"jQuery"+(f.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(a){a=a.nodeType?f.cache[a[f.expando]]:a[f.expando];return!!a&&!m(a)},data:function(a,c,d,e){if(!!f.acceptData(a)){var g,h,i,j=f.expando,k=typeof c=="string",l=a.nodeType,m=l?f.cache:a,n=l?a[j]:a[j]&&j,o=c==="events";if((!n||!m[n]||!o&&!e&&!m[n].data)&&k&&d===b)return;n||(l?a[j]=n=++f.uuid:n=j),m[n]||(m[n]={},l||(m[n].toJSON=f.noop));if(typeof c=="object"||typeof c=="function")e?m[n]=f.extend(m[n],c):m[n].data=f.extend(m[n].data,c);g=h=m[n],e||(h.data||(h.data={}),h=h.data),d!==b&&(h[f.camelCase(c)]=d);if(o&&!h[c])return g.events;k?(i=h[c],i==null&&(i=h[f.camelCase(c)])):i=h;return i}},removeData:function(a,b,c){if(!!f.acceptData(a)){var d,e,g,h=f.expando,i=a.nodeType,j=i?f.cache:a,k=i?a[h]:h;if(!j[k])return;if(b){d=c?j[k]:j[k].data;if(d){f.isArray(b)||(b in d?b=[b]:(b=f.camelCase(b),b in d?b=[b]:b=b.split(" ")));for(e=0,g=b.length;e<g;e++)delete d[b[e]];if(!(c?m:f.isEmptyObject)(d))return}}if(!c){delete j[k].data;if(!m(j[k]))return}f.support.deleteExpando||!j.setInterval?delete j[k]:j[k]=null,i&&(f.support.deleteExpando?delete a[h]:a.removeAttribute?a.removeAttribute(h):a[h]=null)}},_data:function(a,b,c){return f.data(a,b,c,!0)},acceptData:function(a){if(a.nodeName){var b=f.noData[a.nodeName.toLowerCase()];if(b)return b!==!0&&a.getAttribute("classid")===b}return!0}}),f.fn.extend({data:function(a,c){var d,e,g,h=null;if(typeof a=="undefined"){if(this.length){h=f.data(this[0]);if(this[0].nodeType===1&&!f._data(this[0],"parsedAttrs")){e=this[0].attributes;for(var i=0,j=e.length;i<j;i++)g=e[i].name,g.indexOf("data-")===0&&(g=f.camelCase(g.substring(5)),l(this[0],g,h[g]));f._data(this[0],"parsedAttrs",!0)}}return h}if(typeof a=="object")return this.each(function(){f.data(this,a)});d=a.split("."),d[1]=d[1]?"."+d[1]:"";if(c===b){h=this.triggerHandler("getData"+d[1]+"!",[d[0]]),h===b&&this.length&&(h=f.data(this[0],a),h=l(this[0],a,h));return h===b&&d[1]?this.data(d[0]):h}return this.each(function(){var b=f(this),e=[d[0],c];b.triggerHandler("setData"+d[1]+"!",e),f.data(this,a,c),b.triggerHandler("changeData"+d[1]+"!",e)})},removeData:function(a){return this.each(function(){f.removeData(this,a)})}}),f.extend({_mark:function(a,b){a&&(b=(b||"fx")+"mark",f._data(a,b,(f._data(a,b)||0)+1))},_unmark:function(a,b,c){a!==!0&&(c=b,b=a,a=!1);if(b){c=c||"fx";var d=c+"mark",e=a?0:(f._data(b,d)||1)-1;e?f._data(b,d,e):(f.removeData(b,d,!0),n(b,c,"mark"))}},queue:function(a,b,c){var d;if(a){b=(b||"fx")+"queue",d=f._data(a,b),c&&(!d||f.isArray(c)?d=f._data(a,b,f.makeArray(c)):d.push(c));return d||[]}},dequeue:function(a,b){b=b||"fx";var c=f.queue(a,b),d=c.shift(),e={};d==="inprogress"&&(d=c.shift()),d&&(b==="fx"&&c.unshift("inprogress"),f._data(a,b+".run",e),d.call(a,function(){f.dequeue(a,b)},e)),c.length||(f.removeData(a,b+"queue "+b+".run",!0),n(a,b,"queue"))}}),f.fn.extend({queue:function(a,c){typeof a!="string"&&(c=a,a="fx");if(c===b)return f.queue(this[0],a);return this.each(function(){var b=f.queue(this,a,c);a==="fx"&&b[0]!=="inprogress"&&f.dequeue(this,a)})},dequeue:function(a){return this.each(function(){f.dequeue(this,a)})},delay:function(a,b){a=f.fx?f.fx.speeds[a]||a:a,b=b||"fx";return this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,c){function m(){--h||d.resolveWith(e,[e])}typeof a!="string"&&(c=a,a=b),a=a||"fx";var d=f.Deferred(),e=this,g=e.length,h=1,i=a+"defer",j=a+"queue",k=a+"mark",l;while(g--)if(l=f.data(e[g],i,b,!0)||(f.data(e[g],j,b,!0)||f.data(e[g],k,b,!0))&&f.data(e[g],i,f.Callbacks("once memory"),!0))h++,l.add(m);m();return d.promise()}});var o=/[\n\t\r]/g,p=/\s+/,q=/\r/g,r=/^(?:button|input)$/i,s=/^(?:button|input|object|select|textarea)$/i,t=/^a(?:rea)?$/i,u=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,v=f.support.getSetAttribute,w,x,y;f.fn.extend({attr:function(a,b){return f.access(this,a,b,!0,f.attr)},removeAttr:function(a){return this.each(function(){f.removeAttr(this,a)})},prop:function(a,b){return f.access(this,a,b,!0,f.prop)},removeProp:function(a){a=f.propFix[a]||a;return this.each(function(){try{this[a]=b,delete this[a]}catch(c){}})},addClass:function(a){var b,c,d,e,g,h,i;if(f.isFunction(a))return this.each(function(b){f(this).addClass(a.call(this,b,this.className))});if(a&&typeof a=="string"){b=a.split(p);for(c=0,d=this.length;c<d;c++){e=this[c];if(e.nodeType===1)if(!e.className&&b.length===1)e.className=a;else{g=" "+e.className+" ";for(h=0,i=b.length;h<i;h++)~g.indexOf(" "+b[h]+" ")||(g+=b[h]+" ");e.className=f.trim(g)}}}return this},removeClass:function(a){var c,d,e,g,h,i,j;if(f.isFunction(a))return this.each(function(b){f(this).removeClass(a.call(this,b,this.className))});if(a&&typeof a=="string"||a===b){c=(a||"").split(p);for(d=0,e=this.length;d<e;d++){g=this[d];if(g.nodeType===1&&g.className)if(a){h=(" "+g.className+" ").replace(o," ");for(i=0,j=c.length;i<j;i++)h=h.replace(" "+c[i]+" "," ");g.className=f.trim(h)}else g.className=""}}return this},toggleClass:function(a,b){var c=typeof a,d=typeof b=="boolean";if(f.isFunction(a))return this.each(function(c){f(this).toggleClass(a.call(this,c,this.className,b),b)});return this.each(function(){if(c==="string"){var e,g=0,h=f(this),i=b,j=a.split(p);while(e=j[g++])i=d?i:!h.hasClass(e),h[i?"addClass":"removeClass"](e)}else if(c==="undefined"||c==="boolean")this.className&&f._data(this,"__className__",this.className),this.className=this.className||a===!1?"":f._data(this,"__className__")||""})},hasClass:function(a){var b=" "+a+" ",c=0,d=this.length;for(;c<d;c++)if(this[c].nodeType===1&&(" "+this[c].className+" ").replace(o," ").indexOf(b)>-1)return!0;return!1},val:function(a){var c,d,e,g=this[0];{if(!!arguments.length){e=f.isFunction(a);return this.each(function(d){var g=f(this),h;if(this.nodeType===1){e?h=a.call(this,d,g.val()):h=a,h==null?h="":typeof h=="number"?h+="":f.isArray(h)&&(h=f.map(h,function(a){return a==null?"":a+""})),c=f.valHooks[this.nodeName.toLowerCase()]||f.valHooks[this.type];if(!c||!("set"in c)||c.set(this,h,"value")===b)this.value=h}})}if(g){c=f.valHooks[g.nodeName.toLowerCase()]||f.valHooks[g.type];if(c&&"get"in c&&(d=c.get(g,"value"))!==b)return d;d=g.value;return typeof d=="string"?d.replace(q,""):d==null?"":d}}}}),f.extend({valHooks:{option:{get:function(a){var b=a.attributes.value;return!b||b.specified?a.value:a.text}},select:{get:function(a){var b,c,d,e,g=a.selectedIndex,h=[],i=a.options,j=a.type==="select-one";if(g<0)return null;c=j?g:0,d=j?g+1:i.length;for(;c<d;c++){e=i[c];if(e.selected&&(f.support.optDisabled?!e.disabled:e.getAttribute("disabled")===null)&&(!e.parentNode.disabled||!f.nodeName(e.parentNode,"optgroup"))){b=f(e).val();if(j)return b;h.push(b)}}if(j&&!h.length&&i.length)return f(i[g]).val();return h},set:function(a,b){var c=f.makeArray(b);f(a).find("option").each(function(){this.selected=f.inArray(f(this).val(),c)>=0}),c.length||(a.selectedIndex=-1);return c}}},attrFn:{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0},attr:function(a,c,d,e){var g,h,i,j=a.nodeType;if(!!a&&j!==3&&j!==8&&j!==2){if(e&&c in f.attrFn)return f(a)[c](d);if(typeof a.getAttribute=="undefined")return f.prop(a,c,d);i=j!==1||!f.isXMLDoc(a),i&&(c=c.toLowerCase(),h=f.attrHooks[c]||(u.test(c)?x:w));if(d!==b){if(d===null){f.removeAttr(a,c);return}if(h&&"set"in h&&i&&(g=h.set(a,d,c))!==b)return g;a.setAttribute(c,""+d);return d}if(h&&"get"in h&&i&&(g=h.get(a,c))!==null)return g;g=a.getAttribute(c);return g===null?b:g}},removeAttr:function(a,b){var c,d,e,g,h=0;if(b&&a.nodeType===1){d=b.toLowerCase().split(p),g=d.length;for(;h<g;h++)e=d[h],e&&(c=f.propFix[e]||e,f.attr(a,e,""),a.removeAttribute(v?e:c),u.test(e)&&c in a&&(a[c]=!1))}},attrHooks:{type:{set:function(a,b){if(r.test(a.nodeName)&&a.parentNode)f.error("type property can't be changed");else if(!f.support.radioValue&&b==="radio"&&f.nodeName(a,"input")){var c=a.value;a.setAttribute("type",b),c&&(a.value=c);return b}}},value:{get:function(a,b){if(w&&f.nodeName(a,"button"))return w.get(a,b);return b in a?a.value:null},set:function(a,b,c){if(w&&f.nodeName(a,"button"))return w.set(a,b,c);a.value=b}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(a,c,d){var e,g,h,i=a.nodeType;if(!!a&&i!==3&&i!==8&&i!==2){h=i!==1||!f.isXMLDoc(a),h&&(c=f.propFix[c]||c,g=f.propHooks[c]);return d!==b?g&&"set"in g&&(e=g.set(a,d,c))!==b?e:a[c]=d:g&&"get"in g&&(e=g.get(a,c))!==null?e:a[c]}},propHooks:{tabIndex:{get:function(a){var c=a.getAttributeNode("tabindex");return c&&c.specified?parseInt(c.value,10):s.test(a.nodeName)||t.test(a.nodeName)&&a.href?0:b}}}}),f.attrHooks.tabindex=f.propHooks.tabIndex,x={get:function(a,c){var d,e=f.prop(a,c);return e===!0||typeof e!="boolean"&&(d=a.getAttributeNode(c))&&d.nodeValue!==!1?c.toLowerCase():b},set:function(a,b,c){var d;b===!1?f.removeAttr(a,c):(d=f.propFix[c]||c,d in a&&(a[d]=!0),a.setAttribute(c,c.toLowerCase()));return c}},v||(y={name:!0,id:!0},w=f.valHooks.button={get:function(a,c){var d;d=a.getAttributeNode(c);return d&&(y[c]?d.nodeValue!=="":d.specified)?d.nodeValue:b},set:function(a,b,d){var e=a.getAttributeNode(d);e||(e=c.createAttribute(d),a.setAttributeNode(e));return e.nodeValue=b+""}},f.attrHooks.tabindex.set=w.set,f.each(["width","height"],function(a,b){f.attrHooks[b]=f.extend(f.attrHooks[b],{set:function(a,c){if(c===""){a.setAttribute(b,"auto");return c}}})}),f.attrHooks.contenteditable={get:w.get,set:function(a,b,c){b===""&&(b="false"),w.set(a,b,c)}}),f.support.hrefNormalized||f.each(["href","src","width","height"],function(a,c){f.attrHooks[c]=f.extend(f.attrHooks[c],{get:function(a){var d=a.getAttribute(c,2);return d===null?b:d}})}),f.support.style||(f.attrHooks.style={get:function(a){return a.style.cssText.toLowerCase()||b},set:function(a,b){return a.style.cssText=""+b}}),f.support.optSelected||(f.propHooks.selected=f.extend(f.propHooks.selected,{get:function(a){var b=a.parentNode;b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex);return null}})),f.support.enctype||(f.propFix.enctype="encoding"),f.support.checkOn||f.each(["radio","checkbox"],function(){f.valHooks[this]={get:function(a){return a.getAttribute("value")===null?"on":a.value}}}),f.each(["radio","checkbox"],function(){f.valHooks[this]=f.extend(f.valHooks[this],{set:function(a,b){if(f.isArray(b))return a.checked=f.inArray(f(a).val(),b)>=0}})});var z=/^(?:textarea|input|select)$/i,A=/^([^\.]*)?(?:\.(.+))?$/,B=/\bhover(\.\S+)?\b/,C=/^key/,D=/^(?:mouse|contextmenu)|click/,E=/^(?:focusinfocus|focusoutblur)$/,F=/^(\w*)(?:#([\w\-]+))?(?:\.([\w\-]+))?$/,G=function(a){var b=F.exec(a);b&&(b[1]=(b[1]||"").toLowerCase(),b[3]=b[3]&&new RegExp("(?:^|\\s)"+b[3]+"(?:\\s|$)"));return b},H=function(a,b){var c=a.attributes||{};return(!b[1]||a.nodeName.toLowerCase()===b[1])&&(!b[2]||(c.id||{}).value===b[2])&&(!b[3]||b[3].test((c["class"]||{}).value))},I=function(a){return f.event.special.hover?a:a.replace(B,"mouseenter$1 mouseleave$1")};f.event={add:function(a,c,d,e,g){var h,i,j,k,l,m,n,o,p,q,r,s;if(!(a.nodeType===3||a.nodeType===8||!c||!d||!(h=f._data(a)))){d.handler&&(p=d,d=p.handler),d.guid||(d.guid=f.guid++),j=h.events,j||(h.events=j={}),i=h.handle,i||(h.handle=i=function(a){return typeof f!="undefined"&&(!a||f.event.triggered!==a.type)?f.event.dispatch.apply(i.elem,arguments):b},i.elem=a),c=f.trim(I(c)).split(" ");for(k=0;k<c.length;k++){l=A.exec(c[k])||[],m=l[1],n=(l[2]||"").split(".").sort(),s=f.event.special[m]||{},m=(g?s.delegateType:s.bindType)||m,s=f.event.special[m]||{},o=f.extend({type:m,origType:l[1],data:e,handler:d,guid:d.guid,selector:g,quick:G(g),namespace:n.join(".")},p),r=j[m];if(!r){r=j[m]=[],r.delegateCount=0;if(!s.setup||s.setup.call(a,e,n,i)===!1)a.addEventListener?a.addEventListener(m,i,!1):a.attachEvent&&a.attachEvent("on"+m,i)}s.add&&(s.add.call(a,o),o.handler.guid||(o.handler.guid=d.guid)),g?r.splice(r.delegateCount++,0,o):r.push(o),f.event.global[m]=!0}a=null}},global:{},remove:function(a,b,c,d,e){var g=f.hasData(a)&&f._data(a),h,i,j,k,l,m,n,o,p,q,r,s;if(!!g&&!!(o=g.events)){b=f.trim(I(b||"")).split(" ");for(h=0;h<b.length;h++){i=A.exec(b[h])||[],j=k=i[1],l=i[2];if(!j){for(j in o)f.event.remove(a,j+b[h],c,d,!0);continue}p=f.event.special[j]||{},j=(d?p.delegateType:p.bindType)||j,r=o[j]||[],m=r.length,l=l?new RegExp("(^|\\.)"+l.split(".").sort().join("\\.(?:.*\\.)?")+"(\\.|$)"):null;for(n=0;n<r.length;n++)s=r[n],(e||k===s.origType)&&(!c||c.guid===s.guid)&&(!l||l.test(s.namespace))&&(!d||d===s.selector||d==="**"&&s.selector)&&(r.splice(n--,1),s.selector&&r.delegateCount--,p.remove&&p.remove.call(a,s));r.length===0&&m!==r.length&&((!p.teardown||p.teardown.call(a,l)===!1)&&f.removeEvent(a,j,g.handle),delete o[j])}f.isEmptyObject(o)&&(q=g.handle,q&&(q.elem=null),f.removeData(a,["events","handle"],!0))}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(c,d,e,g){if(!e||e.nodeType!==3&&e.nodeType!==8){var h=c.type||c,i=[],j,k,l,m,n,o,p,q,r,s;if(E.test(h+f.event.triggered))return;h.indexOf("!")>=0&&(h=h.slice(0,-1),k=!0),h.indexOf(".")>=0&&(i=h.split("."),h=i.shift(),i.sort());if((!e||f.event.customEvent[h])&&!f.event.global[h])return;c=typeof c=="object"?c[f.expando]?c:new f.Event(h,c):new f.Event(h),c.type=h,c.isTrigger=!0,c.exclusive=k,c.namespace=i.join("."),c.namespace_re=c.namespace?new RegExp("(^|\\.)"+i.join("\\.(?:.*\\.)?")+"(\\.|$)"):null,o=h.indexOf(":")<0?"on"+h:"";if(!e){j=f.cache;for(l in j)j[l].events&&j[l].events[h]&&f.event.trigger(c,d,j[l].handle.elem,!0);return}c.result=b,c.target||(c.target=e),d=d!=null?f.makeArray(d):[],d.unshift(c),p=f.event.special[h]||{};if(p.trigger&&p.trigger.apply(e,d)===!1)return;r=[[e,p.bindType||h]];if(!g&&!p.noBubble&&!f.isWindow(e)){s=p.delegateType||h,m=E.test(s+h)?e:e.parentNode,n=null;for(;m;m=m.parentNode)r.push([m,s]),n=m;n&&n===e.ownerDocument&&r.push([n.defaultView||n.parentWindow||a,s])}for(l=0;l<r.length&&!c.isPropagationStopped();l++)m=r[l][0],c.type=r[l][1],q=(f._data(m,"events")||{})[c.type]&&f._data(m,"handle"),q&&q.apply(m,d),q=o&&m[o],q&&f.acceptData(m)&&q.apply(m,d)===!1&&c.preventDefault();c.type=h,!g&&!c.isDefaultPrevented()&&(!p._default||p._default.apply(e.ownerDocument,d)===!1)&&(h!=="click"||!f.nodeName(e,"a"))&&f.acceptData(e)&&o&&e[h]&&(h!=="focus"&&h!=="blur"||c.target.offsetWidth!==0)&&!f.isWindow(e)&&(n=e[o],n&&(e[o]=null),f.event.triggered=h,e[h](),f.event.triggered=b,n&&(e[o]=n));return c.result}},dispatch:function(c){c=f.event.fix(c||a.event);var d=(f._data(this,"events")||{})[c.type]||[],e=d.delegateCount,g=[].slice.call(arguments,0),h=!c.exclusive&&!c.namespace,i=[],j,k,l,m,n,o,p,q,r,s,t;g[0]=c,c.delegateTarget=this;if(e&&!c.target.disabled&&(!c.button||c.type!=="click")){m=f(this),m.context=this.ownerDocument||this;for(l=c.target;l!=this;l=l.parentNode||this){o={},q=[],m[0]=l;for(j=0;j<e;j++)r=d[j],s=r.selector,o[s]===b&&(o[s]=r.quick?H(l,r.quick):m.is(s)),o[s]&&q.push(r);q.length&&i.push({elem:l,matches:q})}}d.length>e&&i.push({elem:this,matches:d.slice(e)});for(j=0;j<i.length&&!c.isPropagationStopped();j++){p=i[j],c.currentTarget=p.elem;for(k=0;k<p.matches.length&&!c.isImmediatePropagationStopped();k++){r=p.matches[k];if(h||!c.namespace&&!r.namespace||c.namespace_re&&c.namespace_re.test(r.namespace))c.data=r.data,c.handleObj=r,n=((f.event.special[r.origType]||{}).handle||r.handler).apply(p.elem,g),n!==b&&(c.result=n,n===!1&&(c.preventDefault(),c.stopPropagation()))}}return c.result},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){a.which==null&&(a.which=b.charCode!=null?b.charCode:b.keyCode);return a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,d){var e,f,g,h=d.button,i=d.fromElement;a.pageX==null&&d.clientX!=null&&(e=a.target.ownerDocument||c,f=e.documentElement,g=e.body,a.pageX=d.clientX+(f&&f.scrollLeft||g&&g.scrollLeft||0)-(f&&f.clientLeft||g&&g.clientLeft||0),a.pageY=d.clientY+(f&&f.scrollTop||g&&g.scrollTop||0)-(f&&f.clientTop||g&&g.clientTop||0)),!a.relatedTarget&&i&&(a.relatedTarget=i===a.target?d.toElement:i),!a.which&&h!==b&&(a.which=h&1?1:h&2?3:h&4?2:0);return a}},fix:function(a){if(a[f.expando])return a;var d,e,g=a,h=f.event.fixHooks[a.type]||{},i=h.props?this.props.concat(h.props):this.props;a=f.Event(g);for(d=i.length;d;)e=i[--d],a[e]=g[e];a.target||(a.target=g.srcElement||c),a.target.nodeType===3&&(a.target=a.target.parentNode),a.metaKey===b&&(a.metaKey=a.ctrlKey);return h.filter?h.filter(a,g):a},special:{ready:{setup:f.bindReady},load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(a,b,c){f.isWindow(this)&&(this.onbeforeunload=c)},teardown:function(a,b){this.onbeforeunload===b&&(this.onbeforeunload=null)}}},simulate:function(a,b,c,d){var e=f.extend(new f.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?f.event.trigger(e,null,b):f.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},f.event.handle=f.event.dispatch,f.removeEvent=c.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){a.detachEvent&&a.detachEvent("on"+b,c)},f.Event=function(a,b){if(!(this instanceof f.Event))return new f.Event(a,b);a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||a.returnValue===!1||a.getPreventDefault&&a.getPreventDefault()?K:J):this.type=a,b&&f.extend(this,b),this.timeStamp=a&&a.timeStamp||f.now(),this[f.expando]=!0},f.Event.prototype={preventDefault:function(){this.isDefaultPrevented=K;var a=this.originalEvent;!a||(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=K;var a=this.originalEvent;!a||(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=K,this.stopPropagation()},isDefaultPrevented:J,isPropagationStopped:J,isImmediatePropagationStopped:J},f.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){f.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c=this,d=a.relatedTarget,e=a.handleObj,g=e.selector,h;if(!d||d!==c&&!f.contains(c,d))a.type=e.origType,h=e.handler.apply(this,arguments),a.type=b;return h}}}),f.support.submitBubbles||(f.event.special.submit={setup:function(){if(f.nodeName(this,"form"))return!1;f.event.add(this,"click._submit keypress._submit",function(a){var c=a.target,d=f.nodeName(c,"input")||f.nodeName(c,"button")?c.form:b;d&&!d._submit_attached&&(f.event.add(d,"submit._submit",function(a){this.parentNode&&!a.isTrigger&&f.event.simulate("submit",this.parentNode,a,!0)}),d._submit_attached=!0)})},teardown:function(){if(f.nodeName(this,"form"))return!1;f.event.remove(this,"._submit")}}),f.support.changeBubbles||(f.event.special.change={setup:function(){if(z.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio")f.event.add(this,"propertychange._change",function(a){a.originalEvent.propertyName==="checked"&&(this._just_changed=!0)}),f.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1,f.event.simulate("change",this,a,!0))});return!1}f.event.add(this,"beforeactivate._change",function(a){var b=a.target;z.test(b.nodeName)&&!b._change_attached&&(f.event.add(b,"change._change",function(a){this.parentNode&&!a.isSimulated&&!a.isTrigger&&f.event.simulate("change",this.parentNode,a,!0)}),b._change_attached=!0)})},handle:function(a){var b=a.target;if(this!==b||a.isSimulated||a.isTrigger||b.type!=="radio"&&b.type!=="checkbox")return a.handleObj.handler.apply(this,arguments)},teardown:function(){f.event.remove(this,"._change");return z.test(this.nodeName)}}),f.support.focusinBubbles||f.each({focus:"focusin",blur:"focusout"},function(a,b){var d=0,e=function(a){f.event.simulate(b,a.target,f.event.fix(a),!0)};f.event.special[b]={setup:function(){d++===0&&c.addEventListener(a,e,!0)},teardown:function(){--d===0&&c.removeEventListener(a,e,!0)}}}),f.fn.extend({on:function(a,c,d,e,g){var h,i;if(typeof a=="object"){typeof c!="string"&&(d=c,c=b);for(i in a)this.on(i,c,d,a[i],g);return this}d==null&&e==null?(e=c,d=c=b):e==null&&(typeof c=="string"?(e=d,d=b):(e=d,d=c,c=b));if(e===!1)e=J;else if(!e)return this;g===1&&(h=e,e=function(a){f().off(a);return h.apply(this,arguments)},e.guid=h.guid||(h.guid=f.guid++));return this.each(function(){f.event.add(this,a,e,d,c)})},one:function(a,b,c,d){return this.on.call(this,a,b,c,d,1)},off:function(a,c,d){if(a&&a.preventDefault&&a.handleObj){var e=a.handleObj;f(a.delegateTarget).off(e.namespace?e.type+"."+e.namespace:e.type,e.selector,e.handler);return this}if(typeof a=="object"){for(var g in a)this.off(g,c,a[g]);return this}if(c===!1||typeof c=="function")d=c,c=b;d===!1&&(d=J);return this.each(function(){f.event.remove(this,a,d,c)})},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},live:function(a,b,c){f(this.context).on(a,this.selector,b,c);return this},die:function(a,b){f(this.context).off(a,this.selector||"**",b);return this},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return arguments.length==1?this.off(a,"**"):this.off(b,a,c)},trigger:function(a,b){return this.each(function(){f.event.trigger(a,b,this)})},triggerHandler:function(a,b){if(this[0])return f.event.trigger(a,b,this[0],!0)},toggle:function(a){var b=arguments,c=a.guid||f.guid++,d=0,e=function(c){var e=(f._data(this,"lastToggle"+a.guid)||0)%d;f._data(this,"lastToggle"+a.guid,e+1),c.preventDefault();return b[e].apply(this,arguments)||!1};e.guid=c;while(d<b.length)b[d++].guid=c;return this.click(e)},hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}}),f.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){f.fn[b]=function(a,c){c==null&&(c=a,a=null);return arguments.length>0?this.on(b,null,a,c):this.trigger(b)},f.attrFn&&(f.attrFn[b]=!0),C.test(b)&&(f.event.fixHooks[b]=f.event.keyHooks),D.test(b)&&(f.event.fixHooks[b]=f.event.mouseHooks)}),function(){function x(a,b,c,e,f,g){for(var h=0,i=e.length;h<i;h++){var j=e[h];if(j){var k=!1;j=j[a];while(j){if(j[d]===c){k=e[j.sizset];break}if(j.nodeType===1){g||(j[d]=c,j.sizset=h);if(typeof b!="string"){if(j===b){k=!0;break}}else if(m.filter(b,[j]).length>0){k=j;break}}j=j[a]}e[h]=k}}}function w(a,b,c,e,f,g){for(var h=0,i=e.length;h<i;h++){var j=e[h];if(j){var k=!1;j=j[a];while(j){if(j[d]===c){k=e[j.sizset];break}j.nodeType===1&&!g&&(j[d]=c,j.sizset=h);if(j.nodeName.toLowerCase()===b){k=j;break}j=j[a]}e[h]=k}}}var a=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,d="sizcache"+(Math.random()+"").replace(".",""),e=0,g=Object.prototype.toString,h=!1,i=!0,j=/\\/g,k=/\r\n/g,l=/\W/;[0,0].sort(function(){i=!1;return 0});var m=function(b,d,e,f){e=e||[],d=d||c;var h=d;if(d.nodeType!==1&&d.nodeType!==9)return[];if(!b||typeof b!="string")return e;var i,j,k,l,n,q,r,t,u=!0,v=m.isXML(d),w=[],x=b;do{a.exec(""),i=a.exec(x);if(i){x=i[3],w.push(i[1]);if(i[2]){l=i[3];break}}}while(i);if(w.length>1&&p.exec(b))if(w.length===2&&o.relative[w[0]])j=y(w[0]+w[1],d,f);else{j=o.relative[w[0]]?[d]:m(w.shift(),d);while(w.length)b=w.shift(),o.relative[b]&&(b+=w.shift()),j=y(b,j,f)}else{!f&&w.length>1&&d.nodeType===9&&!v&&o.match.ID.test(w[0])&&!o.match.ID.test(w[w.length-1])&&(n=m.find(w.shift(),d,v),d=n.expr?m.filter(n.expr,n.set)[0]:n.set[0]);if(d){n=f?{expr:w.pop(),set:s(f)}:m.find(w.pop(),w.length===1&&(w[0]==="~"||w[0]==="+")&&d.parentNode?d.parentNode:d,v),j=n.expr?m.filter(n.expr,n.set):n.set,w.length>0?k=s(j):u=!1;while(w.length)q=w.pop(),r=q,o.relative[q]?r=w.pop():q="",r==null&&(r=d),o.relative[q](k,r,v)}else k=w=[]}k||(k=j),k||m.error(q||b);if(g.call(k)==="[object Array]")if(!u)e.push.apply(e,k);else if(d&&d.nodeType===1)for(t=0;k[t]!=null;t++)k[t]&&(k[t]===!0||k[t].nodeType===1&&m.contains(d,k[t]))&&e.push(j[t]);else for(t=0;k[t]!=null;t++)k[t]&&k[t].nodeType===1&&e.push(j[t]);else s(k,e);l&&(m(l,h,e,f),m.uniqueSort(e));return e};m.uniqueSort=function(a){if(u){h=i,a.sort(u);if(h)for(var b=1;b<a.length;b++)a[b]===a[b-1]&&a.splice(b--,1)}return a},m.matches=function(a,b){return m(a,null,null,b)},m.matchesSelector=function(a,b){return m(b,null,null,[a]).length>0},m.find=function(a,b,c){var d,e,f,g,h,i;if(!a)return[];for(e=0,f=o.order.length;e<f;e++){h=o.order[e];if(g=o.leftMatch[h].exec(a)){i=g[1],g.splice(1,1);if(i.substr(i.length-1)!=="\\"){g[1]=(g[1]||"").replace(j,""),d=o.find[h](g,b,c);if(d!=null){a=a.replace(o.match[h],"");break}}}}d||(d=typeof b.getElementsByTagName!="undefined"?b.getElementsByTagName("*"):[]);return{set:d,expr:a}},m.filter=function(a,c,d,e){var f,g,h,i,j,k,l,n,p,q=a,r=[],s=c,t=c&&c[0]&&m.isXML(c[0]);while(a&&c.length){for(h in o.filter)if((f=o.leftMatch[h].exec(a))!=null&&f[2]){k=o.filter[h],l=f[1],g=!1,f.splice(1,1);if(l.substr(l.length-1)==="\\")continue;s===r&&(r=[]);if(o.preFilter[h]){f=o.preFilter[h](f,s,d,r,e,t);if(!f)g=i=!0;else if(f===!0)continue}if(f)for(n=0;(j=s[n])!=null;n++)j&&(i=k(j,f,n,s),p=e^i,d&&i!=null?p?g=!0:s[n]=!1:p&&(r.push(j),g=!0));if(i!==b){d||(s=r),a=a.replace(o.match[h],"");if(!g)return[];break}}if(a===q)if(g==null)m.error(a);else break;q=a}return s},m.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)};var n=m.getText=function(a){var b,c,d=a.nodeType,e="";if(d){if(d===1||d===9){if(typeof a.textContent=="string")return a.textContent;if(typeof a.innerText=="string")return a.innerText.replace(k,"");for(a=a.firstChild;a;a=a.nextSibling)e+=n(a)}else if(d===3||d===4)return a.nodeValue}else for(b=0;c=a[b];b++)c.nodeType!==8&&(e+=n(c));return e},o=m.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(a){return a.getAttribute("href")},type:function(a){return a.getAttribute("type")}},relative:{"+":function(a,b){var c=typeof b=="string",d=c&&!l.test(b),e=c&&!d;d&&(b=b.toLowerCase());for(var f=0,g=a.length,h;f<g;f++)if(h=a[f]){while((h=h.previousSibling)&&h.nodeType!==1);a[f]=e||h&&h.nodeName.toLowerCase()===b?h||!1:h===b}e&&m.filter(b,a,!0)},">":function(a,b){var c,d=typeof b=="string",e=0,f=a.length;if(d&&!l.test(b)){b=b.toLowerCase();for(;e<f;e++){c=a[e];if(c){var g=c.parentNode;a[e]=g.nodeName.toLowerCase()===b?g:!1}}}else{for(;e<f;e++)c=a[e],c&&(a[e]=d?c.parentNode:c.parentNode===b);d&&m.filter(b,a,!0)}},"":function(a,b,c){var d,f=e++,g=x;typeof b=="string"&&!l.test(b)&&(b=b.toLowerCase(),d=b,g=w),g("parentNode",b,f,a,d,c)},"~":function(a,b,c){var d,f=e++,g=x;typeof b=="string"&&!l.test(b)&&(b=b.toLowerCase(),d=b,g=w),g("previousSibling",b,f,a,d,c)}},find:{ID:function(a,b,c){if(typeof b.getElementById!="undefined"&&!c){var d=b.getElementById(a[1]);return d&&d.parentNode?[d]:[]}},NAME:function(a,b){if(typeof b.getElementsByName!="undefined"){var c=[],d=b.getElementsByName(a[1]);for(var e=0,f=d.length;e<f;e++)d[e].getAttribute("name")===a[1]&&c.push(d[e]);return c.length===0?null:c}},TAG:function(a,b){if(typeof b.getElementsByTagName!="undefined")return b.getElementsByTagName(a[1])}},preFilter:{CLASS:function(a,b,c,d,e,f){a=" "+a[1].replace(j,"")+" ";if(f)return a;for(var g=0,h;(h=b[g])!=null;g++)h&&(e^(h.className&&(" "+h.className+" ").replace(/[\t\n\r]/g," ").indexOf(a)>=0)?c||d.push(h):c&&(b[g]=!1));return!1},ID:function(a){return a[1].replace(j,"")},TAG:function(a,b){return a[1].replace(j,"").toLowerCase()},CHILD:function(a){if(a[1]==="nth"){a[2]||m.error(a[0]),a[2]=a[2].replace(/^\+|\s*/g,"");var b=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec(a[2]==="even"&&"2n"||a[2]==="odd"&&"2n+1"||!/\D/.test(a[2])&&"0n+"+a[2]||a[2]);a[2]=b[1]+(b[2]||1)-0,a[3]=b[3]-0}else a[2]&&m.error(a[0]);a[0]=e++;return a},ATTR:function(a,b,c,d,e,f){var g=a[1]=a[1].replace(j,"");!f&&o.attrMap[g]&&(a[1]=o.attrMap[g]),a[4]=(a[4]||a[5]||"").replace(j,""),a[2]==="~="&&(a[4]=" "+a[4]+" ");return a},PSEUDO:function(b,c,d,e,f){if(b[1]==="not")if((a.exec(b[3])||"").length>1||/^\w/.test(b[3]))b[3]=m(b[3],null,null,c);else{var g=m.filter(b[3],c,d,!0^f);d||e.push.apply(e,g);return!1}else if(o.match.POS.test(b[0])||o.match.CHILD.test(b[0]))return!0;return b},POS:function(a){a.unshift(!0);return a}},filters:{enabled:function(a){return a.disabled===!1&&a.type!=="hidden"},disabled:function(a){return a.disabled===!0},checked:function(a){return a.checked===!0},selected:function(a){a.parentNode&&a.parentNode.selectedIndex;return a.selected===!0},parent:function(a){return!!a.firstChild},empty:function(a){return!a.firstChild},has:function(a,b,c){return!!m(c[3],a).length},header:function(a){return/h\d/i.test(a.nodeName)},text:function(a){var b=a.getAttribute("type"),c=a.type;return a.nodeName.toLowerCase()==="input"&&"text"===c&&(b===c||b===null)},radio:function(a){return a.nodeName.toLowerCase()==="input"&&"radio"===a.type},checkbox:function(a){return a.nodeName.toLowerCase()==="input"&&"checkbox"===a.type},file:function(a){return a.nodeName.toLowerCase()==="input"&&"file"===a.type},password:function(a){return a.nodeName.toLowerCase()==="input"&&"password"===a.type},submit:function(a){var b=a.nodeName.toLowerCase();return(b==="input"||b==="button")&&"submit"===a.type},image:function(a){return a.nodeName.toLowerCase()==="input"&&"image"===a.type},reset:function(a){var b=a.nodeName.toLowerCase();return(b==="input"||b==="button")&&"reset"===a.type},button:function(a){var b=a.nodeName.toLowerCase();return b==="input"&&"button"===a.type||b==="button"},input:function(a){return/input|select|textarea|button/i.test(a.nodeName)},focus:function(a){return a===a.ownerDocument.activeElement}},setFilters:{first:function(a,b){return b===0},last:function(a,b,c,d){return b===d.length-1},even:function(a,b){return b%2===0},odd:function(a,b){return b%2===1},lt:function(a,b,c){return b<c[3]-0},gt:function(a,b,c){return b>c[3]-0},nth:function(a,b,c){return c[3]-0===b},eq:function(a,b,c){return c[3]-0===b}},filter:{PSEUDO:function(a,b,c,d){var e=b[1],f=o.filters[e];if(f)return f(a,c,b,d);if(e==="contains")return(a.textContent||a.innerText||n([a])||"").indexOf(b[3])>=0;if(e==="not"){var g=b[3];for(var h=0,i=g.length;h<i;h++)if(g[h]===a)return!1;return!0}m.error(e)},CHILD:function(a,b){var c,e,f,g,h,i,j,k=b[1],l=a;switch(k){case"only":case"first":while(l=l.previousSibling)if(l.nodeType===1)return!1;if(k==="first")return!0;l=a;case"last":while(l=l.nextSibling)if(l.nodeType===1)return!1;return!0;case"nth":c=b[2],e=b[3];if(c===1&&e===0)return!0;f=b[0],g=a.parentNode;if(g&&(g[d]!==f||!a.nodeIndex)){i=0;for(l=g.firstChild;l;l=l.nextSibling)l.nodeType===1&&(l.nodeIndex=++i);g[d]=f}j=a.nodeIndex-e;return c===0?j===0:j%c===0&&j/c>=0}},ID:function(a,b){return a.nodeType===1&&a.getAttribute("id")===b},TAG:function(a,b){return b==="*"&&a.nodeType===1||!!a.nodeName&&a.nodeName.toLowerCase()===b},CLASS:function(a,b){return(" "+(a.className||a.getAttribute("class"))+" ").indexOf(b)>-1},ATTR:function(a,b){var c=b[1],d=m.attr?m.attr(a,c):o.attrHandle[c]?o.attrHandle[c](a):a[c]!=null?a[c]:a.getAttribute(c),e=d+"",f=b[2],g=b[4];return d==null?f==="!=":!f&&m.attr?d!=null:f==="="?e===g:f==="*="?e.indexOf(g)>=0:f==="~="?(" "+e+" ").indexOf(g)>=0:g?f==="!="?e!==g:f==="^="?e.indexOf(g)===0:f==="$="?e.substr(e.length-g.length)===g:f==="|="?e===g||e.substr(0,g.length+1)===g+"-":!1:e&&d!==!1},POS:function(a,b,c,d){var e=b[2],f=o.setFilters[e];if(f)return f(a,c,b,d)}}},p=o.match.POS,q=function(a,b){return"\\"+(b-0+1)};for(var r in o.match)o.match[r]=new RegExp(o.match[r].source+/(?![^\[]*\])(?![^\(]*\))/.source),o.leftMatch[r]=new RegExp(/(^(?:.|\r|\n)*?)/.source+o.match[r].source.replace(/\\(\d+)/g,q));var s=function(a,b){a=Array.prototype.slice.call(a,0);if(b){b.push.apply(b,a);return b}return a};try{Array.prototype.slice.call(c.documentElement.childNodes,0)[0].nodeType}catch(t){s=function(a,b){var c=0,d=b||[];if(g.call(a)==="[object Array]")Array.prototype.push.apply(d,a);else if(typeof a.length=="number")for(var e=a.length;c<e;c++)d.push(a[c]);else for(;a[c];c++)d.push(a[c]);return d}}var u,v;c.documentElement.compareDocumentPosition?u=function(a,b){if(a===b){h=!0;return 0}if(!a.compareDocumentPosition||!b.compareDocumentPosition)return a.compareDocumentPosition?-1:1;return a.compareDocumentPosition(b)&4?-1:1}:(u=function(a,b){if(a===b){h=!0;return 0}if(a.sourceIndex&&b.sourceIndex)return a.sourceIndex-b.sourceIndex;var c,d,e=[],f=[],g=a.parentNode,i=b.parentNode,j=g;if(g===i)return v(a,b);if(!g)return-1;if(!i)return 1;while(j)e.unshift(j),j=j.parentNode;j=i;while(j)f.unshift(j),j=j.parentNode;c=e.length,d=f.length;for(var k=0;k<c&&k<d;k++)if(e[k]!==f[k])return v(e[k],f[k]);return k===c?v(a,f[k],-1):v(e[k],b,1)},v=function(a,b,c){if(a===b)return c;var d=a.nextSibling;while(d){if(d===b)return-1;d=d.nextSibling}return 1}),function(){var a=c.createElement("div"),d="script"+(new Date).getTime(),e=c.documentElement;a.innerHTML="<a name='"+d+"'/>",e.insertBefore(a,e.firstChild),c.getElementById(d)&&(o.find.ID=function(a,c,d){if(typeof c.getElementById!="undefined"&&!d){var e=c.getElementById(a[1]);return e?e.id===a[1]||typeof e.getAttributeNode!="undefined"&&e.getAttributeNode("id").nodeValue===a[1]?[e]:b:[]}},o.filter.ID=function(a,b){var c=typeof a.getAttributeNode!="undefined"&&a.getAttributeNode("id");return a.nodeType===1&&c&&c.nodeValue===b}),e.removeChild(a),e=a=null}(),function(){var a=c.createElement("div");a.appendChild(c.createComment("")),a.getElementsByTagName("*").length>0&&(o.find.TAG=function(a,b){var c=b.getElementsByTagName(a[1]);if(a[1]==="*"){var d=[];for(var e=0;c[e];e++)c[e].nodeType===1&&d.push(c[e]);c=d}return c}),a.innerHTML="<a href='#'></a>",a.firstChild&&typeof a.firstChild.getAttribute!="undefined"&&a.firstChild.getAttribute("href")!=="#"&&(o.attrHandle.href=function(a){return a.getAttribute("href",2)}),a=null}(),c.querySelectorAll&&function(){var a=m,b=c.createElement("div"),d="__sizzle__";b.innerHTML="<p class='TEST'></p>";if(!b.querySelectorAll||b.querySelectorAll(".TEST").length!==0){m=function(b,e,f,g){e=e||c;if(!g&&!m.isXML(e)){var h=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(b);if(h&&(e.nodeType===1||e.nodeType===9)){if(h[1])return s(e.getElementsByTagName(b),f);if(h[2]&&o.find.CLASS&&e.getElementsByClassName)return s(e.getElementsByClassName(h[2]),f)}if(e.nodeType===9){if(b==="body"&&e.body)return s([e.body],f);if(h&&h[3]){var i=e.getElementById(h[3]);if(!i||!i.parentNode)return s([],f);if(i.id===h[3])return s([i],f)}try{return s(e.querySelectorAll(b),f)}catch(j){}}else if(e.nodeType===1&&e.nodeName.toLowerCase()!=="object"){var k=e,l=e.getAttribute("id"),n=l||d,p=e.parentNode,q=/^\s*[+~]/.test(b);l?n=n.replace(/'/g,"\\$&"):e.setAttribute("id",n),q&&p&&(e=e.parentNode);try{if(!q||p)return s(e.querySelectorAll("[id='"+n+"'] "+b),f)}catch(r){}finally{l||k.removeAttribute("id")}}}return a(b,e,f,g)};for(var e in a)m[e]=a[e];b=null}}(),function(){var a=c.documentElement,b=a.matchesSelector||a.mozMatchesSelector||a.webkitMatchesSelector||a.msMatchesSelector;if(b){var d=!b.call(c.createElement("div"),"div"),e=!1;try{b.call(c.documentElement,"[test!='']:sizzle")}catch(f){e=!0}m.matchesSelector=function(a,c){c=c.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!m.isXML(a))try{if(e||!o.match.PSEUDO.test(c)&&!/!=/.test(c)){var f=b.call(a,c);if(f||!d||a.document&&a.document.nodeType!==11)return f}}catch(g){}return m(c,null,null,[a]).length>0}}}(),function(){var a=c.createElement("div");a.innerHTML="<div class='test e'></div><div class='test'></div>";if(!!a.getElementsByClassName&&a.getElementsByClassName("e").length!==0){a.lastChild.className="e";if(a.getElementsByClassName("e").length===1)return;o.order.splice(1,0,"CLASS"),o.find.CLASS=function(a,b,c){if(typeof b.getElementsByClassName!="undefined"&&!c)return b.getElementsByClassName(a[1])},a=null}}(),c.documentElement.contains?m.contains=function(a,b){return a!==b&&(a.contains?a.contains(b):!0)}:c.documentElement.compareDocumentPosition?m.contains=function(a,b){return!!(a.compareDocumentPosition(b)&16)}:m.contains=function(){return!1},m.isXML=function(a){var b=(a?a.ownerDocument||a:0).documentElement;return b?b.nodeName!=="HTML":!1};var y=function(a,b,c){var d,e=[],f="",g=b.nodeType?[b]:b;while(d=o.match.PSEUDO.exec(a))f+=d[0],a=a.replace(o.match.PSEUDO,"");a=o.relative[a]?a+"*":a;for(var h=0,i=g.length;h<i;h++)m(a,g[h],e,c);return m.filter(f,e)};m.attr=f.attr,m.selectors.attrMap={},f.find=m,f.expr=m.selectors,f.expr[":"]=f.expr.filters,f.unique=m.uniqueSort,f.text=m.getText,f.isXMLDoc=m.isXML,f.contains=m.contains}();var L=/Until$/,M=/^(?:parents|prevUntil|prevAll)/,N=/,/,O=/^.[^:#\[\.,]*$/,P=Array.prototype.slice,Q=f.expr.match.POS,R={children:!0,contents:!0,next:!0,prev:!0};f.fn.extend({find:function(a){var b=this,c,d;if(typeof a!="string")return f(a).filter(function(){for(c=0,d=b.length;c<d;c++)if(f.contains(b[c],this))return!0});var e=this.pushStack("","find",a),g,h,i;for(c=0,d=this.length;c<d;c++){g=e.length,f.find(a,this[c],e);if(c>0)for(h=g;h<e.length;h++)for(i=0;i<g;i++)if(e[i]===e[h]){e.splice(h--,1);break}}return e},has:function(a){var b=f(a);return this.filter(function(){for(var a=0,c=b.length;a<c;a++)if(f.contains(this,b[a]))return!0})},not:function(a){return this.pushStack(T(this,a,!1),"not",a)},filter:function(a){return this.pushStack(T(this,a,!0),"filter",a)},is:function(a){return!!a&&(typeof a=="string"?Q.test(a)?f(a,this.context).index(this[0])>=0:f.filter(a,this).length>0:this.filter(a).length>0)},closest:function(a,b){var c=[],d,e,g=this[0];if(f.isArray(a)){var h=1;while(g&&g.ownerDocument&&g!==b){for(d=0;d<a.length;d++)f(g).is(a[d])&&c.push({selector:a[d],elem:g,level:h});g=g.parentNode,h++}return c}var i=Q.test(a)||typeof a!="string"?f(a,b||this.context):0;for(d=0,e=this.length;d<e;d++){g=this[d];while(g){if(i?i.index(g)>-1:f.find.matchesSelector(g,a)){c.push(g);break}g=g.parentNode;if(!g||!g.ownerDocument||g===b||g.nodeType===11)break}}c=c.length>1?f.unique(c):c;return this.pushStack(c,"closest",a)},index:function(a){if(!a)return this[0]&&this[0].parentNode?this.prevAll().length:-1;if(typeof a=="string")return f.inArray(this[0],f(a));return f.inArray(a.jquery?a[0]:a,this)},add:function(a,b){var c=typeof a=="string"?f(a,b):f.makeArray(a&&a.nodeType?[a]:a),d=f.merge(this.get(),c);return this.pushStack(S(c[0])||S(d[0])?d:f.unique(d))},andSelf:function(){return this.add(this.prevObject)}}),f.each({parent:function(a){var b=a.parentNode;return b&&b.nodeType!==11?b:null},parents:function(a){return f.dir(a,"parentNode")},parentsUntil:function(a,b,c){return f.dir(a,"parentNode",c)},next:function(a){return f.nth(a,2,"nextSibling")},prev:function(a){return f.nth(a,2,"previousSibling")},nextAll:function(a){return f.dir(a,"nextSibling")},prevAll:function(a){return f.dir(a,"previousSibling")},nextUntil:function(a,b,c){return f.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return f.dir(a,"previousSibling",c)},siblings:function(a){return f.sibling(a.parentNode.firstChild,a)},children:function(a){return f.sibling(a.firstChild)},contents:function(a){return f.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:f.makeArray(a.childNodes)}},function(a,b){f.fn[a]=function(c,d){var e=f.map(this,b,c);L.test(a)||(d=c),d&&typeof d=="string"&&(e=f.filter(d,e)),e=this.length>1&&!R[a]?f.unique(e):e,(this.length>1||N.test(d))&&M.test(a)&&(e=e.reverse());return this.pushStack(e,a,P.call(arguments).join(","))}}),f.extend({filter:function(a,b,c){c&&(a=":not("+a+")");return b.length===1?f.find.matchesSelector(b[0],a)?[b[0]]:[]:f.find.matches(a,b)},dir:function(a,c,d){var e=[],g=a[c];while(g&&g.nodeType!==9&&(d===b||g.nodeType!==1||!f(g).is(d)))g.nodeType===1&&e.push(g),g=g[c];return e},nth:function(a,b,c,d){b=b||1;var e=0;for(;a;a=a[c])if(a.nodeType===1&&++e===b)break;return a},sibling:function(a,b){var c=[];for(;a;a=a.nextSibling)a.nodeType===1&&a!==b&&c.push(a);return c}});var V="abbr|article|aside|audio|canvas|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",W=/ jQuery\d+="(?:\d+|null)"/g,X=/^\s+/,Y=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,Z=/<([\w:]+)/,$=/<tbody/i,_=/<|&#?\w+;/,ba=/<(?:script|style)/i,bb=/<(?:script|object|embed|option|style)/i,bc=new RegExp("<(?:"+V+")","i"),bd=/checked\s*(?:[^=]|=\s*.checked.)/i,be=/\/(java|ecma)script/i,bf=/^\s*<!(?:\[CDATA\[|\-\-)/,bg={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},bh=U(c);bg.optgroup=bg.option,bg.tbody=bg.tfoot=bg.colgroup=bg.caption=bg.thead,bg.th=bg.td,f.support.htmlSerialize||(bg._default=[1,"div<div>","</div>"]),f.fn.extend({text:function(a){if(f.isFunction(a))return this.each(function(b){var c=f(this);c.text(a.call(this,b,c.text()))});if(typeof a!="object"&&a!==b)return this.empty().append((this[0]&&this[0].ownerDocument||c).createTextNode(a));return f.text(this)},wrapAll:function(a){if(f.isFunction(a))return this.each(function(b){f(this).wrapAll(a.call(this,b))});if(this[0]){var b=f(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstChild&&a.firstChild.nodeType===1)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){if(f.isFunction(a))return this.each(function(b){f(this).wrapInner(a.call(this,b))});return this.each(function(){var b=f(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=f.isFunction(a);return this.each(function(c){f(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){f.nodeName(this,"body")||f(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(a){this.nodeType===1&&this.appendChild(a)})},prepend:function(){return this.domManip(arguments,!0,function(a){this.nodeType===1&&this.insertBefore(a,this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this)});if(arguments.length){var a=f.clean(arguments);a.push.apply(a,this.toArray());return this.pushStack(a,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this.nextSibling)});if(arguments.length){var a=this.pushStack(this,"after",arguments);a.push.apply(a,f.clean(arguments));return a}},remove:function(a,b){for(var c=0,d;(d=this[c])!=null;c++)if(!a||f.filter(a,[d]).length)!b&&d.nodeType===1&&(f.cleanData(d.getElementsByTagName("*")),f.cleanData([d])),d.parentNode&&d.parentNode.removeChild(d);return this},empty:function()
{for(var a=0,b;(b=this[a])!=null;a++){b.nodeType===1&&f.cleanData(b.getElementsByTagName("*"));while(b.firstChild)b.removeChild(b.firstChild)}return this},clone:function(a,b){a=a==null?!1:a,b=b==null?a:b;return this.map(function(){return f.clone(this,a,b)})},html:function(a){if(a===b)return this[0]&&this[0].nodeType===1?this[0].innerHTML.replace(W,""):null;if(typeof a=="string"&&!ba.test(a)&&(f.support.leadingWhitespace||!X.test(a))&&!bg[(Z.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(Y,"<$1></$2>");try{for(var c=0,d=this.length;c<d;c++)this[c].nodeType===1&&(f.cleanData(this[c].getElementsByTagName("*")),this[c].innerHTML=a)}catch(e){this.empty().append(a)}}else f.isFunction(a)?this.each(function(b){var c=f(this);c.html(a.call(this,b,c.html()))}):this.empty().append(a);return this},replaceWith:function(a){if(this[0]&&this[0].parentNode){if(f.isFunction(a))return this.each(function(b){var c=f(this),d=c.html();c.replaceWith(a.call(this,b,d))});typeof a!="string"&&(a=f(a).detach());return this.each(function(){var b=this.nextSibling,c=this.parentNode;f(this).remove(),b?f(b).before(a):f(c).append(a)})}return this.length?this.pushStack(f(f.isFunction(a)?a():a),"replaceWith",a):this},detach:function(a){return this.remove(a,!0)},domManip:function(a,c,d){var e,g,h,i,j=a[0],k=[];if(!f.support.checkClone&&arguments.length===3&&typeof j=="string"&&bd.test(j))return this.each(function(){f(this).domManip(a,c,d,!0)});if(f.isFunction(j))return this.each(function(e){var g=f(this);a[0]=j.call(this,e,c?g.html():b),g.domManip(a,c,d)});if(this[0]){i=j&&j.parentNode,f.support.parentNode&&i&&i.nodeType===11&&i.childNodes.length===this.length?e={fragment:i}:e=f.buildFragment(a,this,k),h=e.fragment,h.childNodes.length===1?g=h=h.firstChild:g=h.firstChild;if(g){c=c&&f.nodeName(g,"tr");for(var l=0,m=this.length,n=m-1;l<m;l++)d.call(c?bi(this[l],g):this[l],e.cacheable||m>1&&l<n?f.clone(h,!0,!0):h)}k.length&&f.each(k,bp)}return this}}),f.buildFragment=function(a,b,d){var e,g,h,i,j=a[0];b&&b[0]&&(i=b[0].ownerDocument||b[0]),i.createDocumentFragment||(i=c),a.length===1&&typeof j=="string"&&j.length<512&&i===c&&j.charAt(0)==="<"&&!bb.test(j)&&(f.support.checkClone||!bd.test(j))&&(f.support.html5Clone||!bc.test(j))&&(g=!0,h=f.fragments[j],h&&h!==1&&(e=h)),e||(e=i.createDocumentFragment(),f.clean(a,i,e,d)),g&&(f.fragments[j]=h?e:1);return{fragment:e,cacheable:g}},f.fragments={},f.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){f.fn[a]=function(c){var d=[],e=f(c),g=this.length===1&&this[0].parentNode;if(g&&g.nodeType===11&&g.childNodes.length===1&&e.length===1){e[b](this[0]);return this}for(var h=0,i=e.length;h<i;h++){var j=(h>0?this.clone(!0):this).get();f(e[h])[b](j),d=d.concat(j)}return this.pushStack(d,a,e.selector)}}),f.extend({clone:function(a,b,c){var d,e,g,h=f.support.html5Clone||!bc.test("<"+a.nodeName)?a.cloneNode(!0):bo(a);if((!f.support.noCloneEvent||!f.support.noCloneChecked)&&(a.nodeType===1||a.nodeType===11)&&!f.isXMLDoc(a)){bk(a,h),d=bl(a),e=bl(h);for(g=0;d[g];++g)e[g]&&bk(d[g],e[g])}if(b){bj(a,h);if(c){d=bl(a),e=bl(h);for(g=0;d[g];++g)bj(d[g],e[g])}}d=e=null;return h},clean:function(a,b,d,e){var g;b=b||c,typeof b.createElement=="undefined"&&(b=b.ownerDocument||b[0]&&b[0].ownerDocument||c);var h=[],i;for(var j=0,k;(k=a[j])!=null;j++){typeof k=="number"&&(k+="");if(!k)continue;if(typeof k=="string")if(!_.test(k))k=b.createTextNode(k);else{k=k.replace(Y,"<$1></$2>");var l=(Z.exec(k)||["",""])[1].toLowerCase(),m=bg[l]||bg._default,n=m[0],o=b.createElement("div");b===c?bh.appendChild(o):U(b).appendChild(o),o.innerHTML=m[1]+k+m[2];while(n--)o=o.lastChild;if(!f.support.tbody){var p=$.test(k),q=l==="table"&&!p?o.firstChild&&o.firstChild.childNodes:m[1]==="<table>"&&!p?o.childNodes:[];for(i=q.length-1;i>=0;--i)f.nodeName(q[i],"tbody")&&!q[i].childNodes.length&&q[i].parentNode.removeChild(q[i])}!f.support.leadingWhitespace&&X.test(k)&&o.insertBefore(b.createTextNode(X.exec(k)[0]),o.firstChild),k=o.childNodes}var r;if(!f.support.appendChecked)if(k[0]&&typeof(r=k.length)=="number")for(i=0;i<r;i++)bn(k[i]);else bn(k);k.nodeType?h.push(k):h=f.merge(h,k)}if(d){g=function(a){return!a.type||be.test(a.type)};for(j=0;h[j];j++)if(e&&f.nodeName(h[j],"script")&&(!h[j].type||h[j].type.toLowerCase()==="text/javascript"))e.push(h[j].parentNode?h[j].parentNode.removeChild(h[j]):h[j]);else{if(h[j].nodeType===1){var s=f.grep(h[j].getElementsByTagName("script"),g);h.splice.apply(h,[j+1,0].concat(s))}d.appendChild(h[j])}}return h},cleanData:function(a){var b,c,d=f.cache,e=f.event.special,g=f.support.deleteExpando;for(var h=0,i;(i=a[h])!=null;h++){if(i.nodeName&&f.noData[i.nodeName.toLowerCase()])continue;c=i[f.expando];if(c){b=d[c];if(b&&b.events){for(var j in b.events)e[j]?f.event.remove(i,j):f.removeEvent(i,j,b.handle);b.handle&&(b.handle.elem=null)}g?delete i[f.expando]:i.removeAttribute&&i.removeAttribute(f.expando),delete d[c]}}}});var bq=/alpha\([^)]*\)/i,br=/opacity=([^)]*)/,bs=/([A-Z]|^ms)/g,bt=/^-?\d+(?:px)?$/i,bu=/^-?\d/,bv=/^([\-+])=([\-+.\de]+)/,bw={position:"absolute",visibility:"hidden",display:"block"},bx=["Left","Right"],by=["Top","Bottom"],bz,bA,bB;f.fn.css=function(a,c){if(arguments.length===2&&c===b)return this;return f.access(this,a,c,!0,function(a,c,d){return d!==b?f.style(a,c,d):f.css(a,c)})},f.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=bz(a,"opacity","opacity");return c===""?"1":c}return a.style.opacity}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":f.support.cssFloat?"cssFloat":"styleFloat"},style:function(a,c,d,e){if(!!a&&a.nodeType!==3&&a.nodeType!==8&&!!a.style){var g,h,i=f.camelCase(c),j=a.style,k=f.cssHooks[i];c=f.cssProps[i]||i;if(d===b){if(k&&"get"in k&&(g=k.get(a,!1,e))!==b)return g;return j[c]}h=typeof d,h==="string"&&(g=bv.exec(d))&&(d=+(g[1]+1)*+g[2]+parseFloat(f.css(a,c)),h="number");if(d==null||h==="number"&&isNaN(d))return;h==="number"&&!f.cssNumber[i]&&(d+="px");if(!k||!("set"in k)||(d=k.set(a,d))!==b)try{j[c]=d}catch(l){}}},css:function(a,c,d){var e,g;c=f.camelCase(c),g=f.cssHooks[c],c=f.cssProps[c]||c,c==="cssFloat"&&(c="float");if(g&&"get"in g&&(e=g.get(a,!0,d))!==b)return e;if(bz)return bz(a,c)},swap:function(a,b,c){var d={};for(var e in b)d[e]=a.style[e],a.style[e]=b[e];c.call(a);for(e in b)a.style[e]=d[e]}}),f.curCSS=f.css,f.each(["height","width"],function(a,b){f.cssHooks[b]={get:function(a,c,d){var e;if(c){if(a.offsetWidth!==0)return bC(a,b,d);f.swap(a,bw,function(){e=bC(a,b,d)});return e}},set:function(a,b){if(!bt.test(b))return b;b=parseFloat(b);if(b>=0)return b+"px"}}}),f.support.opacity||(f.cssHooks.opacity={get:function(a,b){return br.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?parseFloat(RegExp.$1)/100+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=f.isNumeric(b)?"alpha(opacity="+b*100+")":"",g=d&&d.filter||c.filter||"";c.zoom=1;if(b>=1&&f.trim(g.replace(bq,""))===""){c.removeAttribute("filter");if(d&&!d.filter)return}c.filter=bq.test(g)?g.replace(bq,e):g+" "+e}}),f(function(){f.support.reliableMarginRight||(f.cssHooks.marginRight={get:function(a,b){var c;f.swap(a,{display:"inline-block"},function(){b?c=bz(a,"margin-right","marginRight"):c=a.style.marginRight});return c}})}),c.defaultView&&c.defaultView.getComputedStyle&&(bA=function(a,b){var c,d,e;b=b.replace(bs,"-$1").toLowerCase(),(d=a.ownerDocument.defaultView)&&(e=d.getComputedStyle(a,null))&&(c=e.getPropertyValue(b),c===""&&!f.contains(a.ownerDocument.documentElement,a)&&(c=f.style(a,b)));return c}),c.documentElement.currentStyle&&(bB=function(a,b){var c,d,e,f=a.currentStyle&&a.currentStyle[b],g=a.style;f===null&&g&&(e=g[b])&&(f=e),!bt.test(f)&&bu.test(f)&&(c=g.left,d=a.runtimeStyle&&a.runtimeStyle.left,d&&(a.runtimeStyle.left=a.currentStyle.left),g.left=b==="fontSize"?"1em":f||0,f=g.pixelLeft+"px",g.left=c,d&&(a.runtimeStyle.left=d));return f===""?"auto":f}),bz=bA||bB,f.expr&&f.expr.filters&&(f.expr.filters.hidden=function(a){var b=a.offsetWidth,c=a.offsetHeight;return b===0&&c===0||!f.support.reliableHiddenOffsets&&(a.style&&a.style.display||f.css(a,"display"))==="none"},f.expr.filters.visible=function(a){return!f.expr.filters.hidden(a)});var bD=/%20/g,bE=/\[\]$/,bF=/\r?\n/g,bG=/#.*$/,bH=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,bI=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,bJ=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,bK=/^(?:GET|HEAD)$/,bL=/^\/\//,bM=/\?/,bN=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,bO=/^(?:select|textarea)/i,bP=/\s+/,bQ=/([?&])_=[^&]*/,bR=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,bS=f.fn.load,bT={},bU={},bV,bW,bX=["*/"]+["*"];try{bV=e.href}catch(bY){bV=c.createElement("a"),bV.href="",bV=bV.href}bW=bR.exec(bV.toLowerCase())||[],f.fn.extend({load:function(a,c,d){if(typeof a!="string"&&bS)return bS.apply(this,arguments);if(!this.length)return this;var e=a.indexOf(" ");if(e>=0){var g=a.slice(e,a.length);a=a.slice(0,e)}var h="GET";c&&(f.isFunction(c)?(d=c,c=b):typeof c=="object"&&(c=f.param(c,f.ajaxSettings.traditional),h="POST"));var i=this;f.ajax({url:a,type:h,dataType:"html",data:c,complete:function(a,b,c){c=a.responseText,a.isResolved()&&(a.done(function(a){c=a}),i.html(g?f("<div>").append(c.replace(bN,"")).find(g):c)),d&&i.each(d,[c,b,a])}});return this},serialize:function(){return f.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?f.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||bO.test(this.nodeName)||bI.test(this.type))}).map(function(a,b){var c=f(this).val();return c==null?null:f.isArray(c)?f.map(c,function(a,c){return{name:b.name,value:a.replace(bF,"\r\n")}}):{name:b.name,value:c.replace(bF,"\r\n")}}).get()}}),f.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,b){f.fn[b]=function(a){return this.on(b,a)}}),f.each(["get","post"],function(a,c){f[c]=function(a,d,e,g){f.isFunction(d)&&(g=g||e,e=d,d=b);return f.ajax({type:c,url:a,data:d,success:e,dataType:g})}}),f.extend({getScript:function(a,c){return f.get(a,b,c,"script")},getJSON:function(a,b,c){return f.get(a,b,c,"json")},ajaxSetup:function(a,b){b?b_(a,f.ajaxSettings):(b=a,a=f.ajaxSettings),b_(a,b);return a},ajaxSettings:{url:bV,isLocal:bJ.test(bW[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":bX},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":a.String,"text html":!0,"text json":f.parseJSON,"text xml":f.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:bZ(bT),ajaxTransport:bZ(bU),ajax:function(a,c){function w(a,c,l,m){if(s!==2){s=2,q&&clearTimeout(q),p=b,n=m||"",v.readyState=a>0?4:0;var o,r,u,w=c,x=l?cb(d,v,l):b,y,z;if(a>=200&&a<300||a===304){if(d.ifModified){if(y=v.getResponseHeader("Last-Modified"))f.lastModified[k]=y;if(z=v.getResponseHeader("Etag"))f.etag[k]=z}if(a===304)w="notmodified",o=!0;else try{r=cc(d,x),w="success",o=!0}catch(A){w="parsererror",u=A}}else{u=w;if(!w||a)w="error",a<0&&(a=0)}v.status=a,v.statusText=""+(c||w),o?h.resolveWith(e,[r,w,v]):h.rejectWith(e,[v,w,u]),v.statusCode(j),j=b,t&&g.trigger("ajax"+(o?"Success":"Error"),[v,d,o?r:u]),i.fireWith(e,[v,w]),t&&(g.trigger("ajaxComplete",[v,d]),--f.active||f.event.trigger("ajaxStop"))}}typeof a=="object"&&(c=a,a=b),c=c||{};var d=f.ajaxSetup({},c),e=d.context||d,g=e!==d&&(e.nodeType||e instanceof f)?f(e):f.event,h=f.Deferred(),i=f.Callbacks("once memory"),j=d.statusCode||{},k,l={},m={},n,o,p,q,r,s=0,t,u,v={readyState:0,setRequestHeader:function(a,b){if(!s){var c=a.toLowerCase();a=m[c]=m[c]||a,l[a]=b}return this},getAllResponseHeaders:function(){return s===2?n:null},getResponseHeader:function(a){var c;if(s===2){if(!o){o={};while(c=bH.exec(n))o[c[1].toLowerCase()]=c[2]}c=o[a.toLowerCase()]}return c===b?null:c},overrideMimeType:function(a){s||(d.mimeType=a);return this},abort:function(a){a=a||"abort",p&&p.abort(a),w(0,a);return this}};h.promise(v),v.success=v.done,v.error=v.fail,v.complete=i.add,v.statusCode=function(a){if(a){var b;if(s<2)for(b in a)j[b]=[j[b],a[b]];else b=a[v.status],v.then(b,b)}return this},d.url=((a||d.url)+"").replace(bG,"").replace(bL,bW[1]+"//"),d.dataTypes=f.trim(d.dataType||"*").toLowerCase().split(bP),d.crossDomain==null&&(r=bR.exec(d.url.toLowerCase()),d.crossDomain=!(!r||r[1]==bW[1]&&r[2]==bW[2]&&(r[3]||(r[1]==="http:"?80:443))==(bW[3]||(bW[1]==="http:"?80:443)))),d.data&&d.processData&&typeof d.data!="string"&&(d.data=f.param(d.data,d.traditional)),b$(bT,d,c,v);if(s===2)return!1;t=d.global,d.type=d.type.toUpperCase(),d.hasContent=!bK.test(d.type),t&&f.active++===0&&f.event.trigger("ajaxStart");if(!d.hasContent){d.data&&(d.url+=(bM.test(d.url)?"&":"?")+d.data,delete d.data),k=d.url;if(d.cache===!1){var x=f.now(),y=d.url.replace(bQ,"$1_="+x);d.url=y+(y===d.url?(bM.test(d.url)?"&":"?")+"_="+x:"")}}(d.data&&d.hasContent&&d.contentType!==!1||c.contentType)&&v.setRequestHeader("Content-Type",d.contentType),d.ifModified&&(k=k||d.url,f.lastModified[k]&&v.setRequestHeader("If-Modified-Since",f.lastModified[k]),f.etag[k]&&v.setRequestHeader("If-None-Match",f.etag[k])),v.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+(d.dataTypes[0]!=="*"?", "+bX+"; q=0.01":""):d.accepts["*"]);for(u in d.headers)v.setRequestHeader(u,d.headers[u]);if(d.beforeSend&&(d.beforeSend.call(e,v,d)===!1||s===2)){v.abort();return!1}for(u in{success:1,error:1,complete:1})v[u](d[u]);p=b$(bU,d,c,v);if(!p)w(-1,"No Transport");else{v.readyState=1,t&&g.trigger("ajaxSend",[v,d]),d.async&&d.timeout>0&&(q=setTimeout(function(){v.abort("timeout")},d.timeout));try{s=1,p.send(l,w)}catch(z){if(s<2)w(-1,z);else throw z}}return v},param:function(a,c){var d=[],e=function(a,b){b=f.isFunction(b)?b():b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};c===b&&(c=f.ajaxSettings.traditional);if(f.isArray(a)||a.jquery&&!f.isPlainObject(a))f.each(a,function(){e(this.name,this.value)});else for(var g in a)ca(g,a[g],c,e);return d.join("&").replace(bD,"+")}}),f.extend({active:0,lastModified:{},etag:{}});var cd=f.now(),ce=/(\=)\?(&|$)|\?\?/i;f.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return f.expando+"_"+cd++}}),f.ajaxPrefilter("json jsonp",function(b,c,d){var e=b.contentType==="application/x-www-form-urlencoded"&&typeof b.data=="string";if(b.dataTypes[0]==="jsonp"||b.jsonp!==!1&&(ce.test(b.url)||e&&ce.test(b.data))){var g,h=b.jsonpCallback=f.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,i=a[h],j=b.url,k=b.data,l="$1"+h+"$2";b.jsonp!==!1&&(j=j.replace(ce,l),b.url===j&&(e&&(k=k.replace(ce,l)),b.data===k&&(j+=(/\?/.test(j)?"&":"?")+b.jsonp+"="+h))),b.url=j,b.data=k,a[h]=function(a){g=[a]},d.always(function(){a[h]=i,g&&f.isFunction(i)&&a[h](g[0])}),b.converters["script json"]=function(){g||f.error(h+" was not called");return g[0]},b.dataTypes[0]="json";return"script"}}),f.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(a){f.globalEval(a);return a}}}),f.ajaxPrefilter("script",function(a){a.cache===b&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)}),f.ajaxTransport("script",function(a){if(a.crossDomain){var d,e=c.head||c.getElementsByTagName("head")[0]||c.documentElement;return{send:function(f,g){d=c.createElement("script"),d.async="async",a.scriptCharset&&(d.charset=a.scriptCharset),d.src=a.url,d.onload=d.onreadystatechange=function(a,c){if(c||!d.readyState||/loaded|complete/.test(d.readyState))d.onload=d.onreadystatechange=null,e&&d.parentNode&&e.removeChild(d),d=b,c||g(200,"success")},e.insertBefore(d,e.firstChild)},abort:function(){d&&d.onload(0,1)}}}});var cf=a.ActiveXObject?function(){for(var a in ch)ch[a](0,1)}:!1,cg=0,ch;f.ajaxSettings.xhr=a.ActiveXObject?function(){return!this.isLocal&&ci()||cj()}:ci,function(a){f.extend(f.support,{ajax:!!a,cors:!!a&&"withCredentials"in a})}(f.ajaxSettings.xhr()),f.support.ajax&&f.ajaxTransport(function(c){if(!c.crossDomain||f.support.cors){var d;return{send:function(e,g){var h=c.xhr(),i,j;c.username?h.open(c.type,c.url,c.async,c.username,c.password):h.open(c.type,c.url,c.async);if(c.xhrFields)for(j in c.xhrFields)h[j]=c.xhrFields[j];c.mimeType&&h.overrideMimeType&&h.overrideMimeType(c.mimeType),!c.crossDomain&&!e["X-Requested-With"]&&(e["X-Requested-With"]="XMLHttpRequest");try{for(j in e)h.setRequestHeader(j,e[j])}catch(k){}h.send(c.hasContent&&c.data||null),d=function(a,e){var j,k,l,m,n;try{if(d&&(e||h.readyState===4)){d=b,i&&(h.onreadystatechange=f.noop,cf&&delete ch[i]);if(e)h.readyState!==4&&h.abort();else{j=h.status,l=h.getAllResponseHeaders(),m={},n=h.responseXML,n&&n.documentElement&&(m.xml=n),m.text=h.responseText;try{k=h.statusText}catch(o){k=""}!j&&c.isLocal&&!c.crossDomain?j=m.text?200:404:j===1223&&(j=204)}}}catch(p){e||g(-1,p)}m&&g(j,k,m,l)},!c.async||h.readyState===4?d():(i=++cg,cf&&(ch||(ch={},f(a).unload(cf)),ch[i]=d),h.onreadystatechange=d)},abort:function(){d&&d(0,1)}}}});var ck={},cl,cm,cn=/^(?:toggle|show|hide)$/,co=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,cp,cq=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]],cr;f.fn.extend({show:function(a,b,c){var d,e;if(a||a===0)return this.animate(cu("show",3),a,b,c);for(var g=0,h=this.length;g<h;g++)d=this[g],d.style&&(e=d.style.display,!f._data(d,"olddisplay")&&e==="none"&&(e=d.style.display=""),e===""&&f.css(d,"display")==="none"&&f._data(d,"olddisplay",cv(d.nodeName)));for(g=0;g<h;g++){d=this[g];if(d.style){e=d.style.display;if(e===""||e==="none")d.style.display=f._data(d,"olddisplay")||""}}return this},hide:function(a,b,c){if(a||a===0)return this.animate(cu("hide",3),a,b,c);var d,e,g=0,h=this.length;for(;g<h;g++)d=this[g],d.style&&(e=f.css(d,"display"),e!=="none"&&!f._data(d,"olddisplay")&&f._data(d,"olddisplay",e));for(g=0;g<h;g++)this[g].style&&(this[g].style.display="none");return this},_toggle:f.fn.toggle,toggle:function(a,b,c){var d=typeof a=="boolean";f.isFunction(a)&&f.isFunction(b)?this._toggle.apply(this,arguments):a==null||d?this.each(function(){var b=d?a:f(this).is(":hidden");f(this)[b?"show":"hide"]()}):this.animate(cu("toggle",3),a,b,c);return this},fadeTo:function(a,b,c,d){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){function g(){e.queue===!1&&f._mark(this);var b=f.extend({},e),c=this.nodeType===1,d=c&&f(this).is(":hidden"),g,h,i,j,k,l,m,n,o;b.animatedProperties={};for(i in a){g=f.camelCase(i),i!==g&&(a[g]=a[i],delete a[i]),h=a[g],f.isArray(h)?(b.animatedProperties[g]=h[1],h=a[g]=h[0]):b.animatedProperties[g]=b.specialEasing&&b.specialEasing[g]||b.easing||"swing";if(h==="hide"&&d||h==="show"&&!d)return b.complete.call(this);c&&(g==="height"||g==="width")&&(b.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY],f.css(this,"display")==="inline"&&f.css(this,"float")==="none"&&(!f.support.inlineBlockNeedsLayout||cv(this.nodeName)==="inline"?this.style.display="inline-block":this.style.zoom=1))}b.overflow!=null&&(this.style.overflow="hidden");for(i in a)j=new f.fx(this,b,i),h=a[i],cn.test(h)?(o=f._data(this,"toggle"+i)||(h==="toggle"?d?"show":"hide":0),o?(f._data(this,"toggle"+i,o==="show"?"hide":"show"),j[o]()):j[h]()):(k=co.exec(h),l=j.cur(),k?(m=parseFloat(k[2]),n=k[3]||(f.cssNumber[i]?"":"px"),n!=="px"&&(f.style(this,i,(m||1)+n),l=(m||1)/j.cur()*l,f.style(this,i,l+n)),k[1]&&(m=(k[1]==="-="?-1:1)*m+l),j.custom(l,m,n)):j.custom(l,h,""));return!0}var e=f.speed(b,c,d);if(f.isEmptyObject(a))return this.each(e.complete,[!1]);a=f.extend({},a);return e.queue===!1?this.each(g):this.queue(e.queue,g)},stop:function(a,c,d){typeof a!="string"&&(d=c,c=a,a=b),c&&a!==!1&&this.queue(a||"fx",[]);return this.each(function(){function h(a,b,c){var e=b[c];f.removeData(a,c,!0),e.stop(d)}var b,c=!1,e=f.timers,g=f._data(this);d||f._unmark(!0,this);if(a==null)for(b in g)g[b]&&g[b].stop&&b.indexOf(".run")===b.length-4&&h(this,g,b);else g[b=a+".run"]&&g[b].stop&&h(this,g,b);for(b=e.length;b--;)e[b].elem===this&&(a==null||e[b].queue===a)&&(d?e[b](!0):e[b].saveState(),c=!0,e.splice(b,1));(!d||!c)&&f.dequeue(this,a)})}}),f.each({slideDown:cu("show",1),slideUp:cu("hide",1),slideToggle:cu("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){f.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),f.extend({speed:function(a,b,c){var d=a&&typeof a=="object"?f.extend({},a):{complete:c||!c&&b||f.isFunction(a)&&a,duration:a,easing:c&&b||b&&!f.isFunction(b)&&b};d.duration=f.fx.off?0:typeof d.duration=="number"?d.duration:d.duration in f.fx.speeds?f.fx.speeds[d.duration]:f.fx.speeds._default;if(d.queue==null||d.queue===!0)d.queue="fx";d.old=d.complete,d.complete=function(a){f.isFunction(d.old)&&d.old.call(this),d.queue?f.dequeue(this,d.queue):a!==!1&&f._unmark(this)};return d},easing:{linear:function(a,b,c,d){return c+d*a},swing:function(a,b,c,d){return(-Math.cos(a*Math.PI)/2+.5)*d+c}},timers:[],fx:function(a,b,c){this.options=b,this.elem=a,this.prop=c,b.orig=b.orig||{}}}),f.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this),(f.fx.step[this.prop]||f.fx.step._default)(this)},cur:function(){if(this.elem[this.prop]!=null&&(!this.elem.style||this.elem.style[this.prop]==null))return this.elem[this.prop];var a,b=f.css(this.elem,this.prop);return isNaN(a=parseFloat(b))?!b||b==="auto"?0:b:a},custom:function(a,c,d){function h(a){return e.step(a)}var e=this,g=f.fx;this.startTime=cr||cs(),this.end=c,this.now=this.start=a,this.pos=this.state=0,this.unit=d||this.unit||(f.cssNumber[this.prop]?"":"px"),h.queue=this.options.queue,h.elem=this.elem,h.saveState=function(){e.options.hide&&f._data(e.elem,"fxshow"+e.prop)===b&&f._data(e.elem,"fxshow"+e.prop,e.start)},h()&&f.timers.push(h)&&!cp&&(cp=setInterval(g.tick,g.interval))},show:function(){var a=f._data(this.elem,"fxshow"+this.prop);this.options.orig[this.prop]=a||f.style(this.elem,this.prop),this.options.show=!0,a!==b?this.custom(this.cur(),a):this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur()),f(this.elem).show()},hide:function(){this.options.orig[this.prop]=f._data(this.elem,"fxshow"+this.prop)||f.style(this.elem,this.prop),this.options.hide=!0,this.custom(this.cur(),0)},step:function(a){var b,c,d,e=cr||cs(),g=!0,h=this.elem,i=this.options;if(a||e>=i.duration+this.startTime){this.now=this.end,this.pos=this.state=1,this.update(),i.animatedProperties[this.prop]=!0;for(b in i.animatedProperties)i.animatedProperties[b]!==!0&&(g=!1);if(g){i.overflow!=null&&!f.support.shrinkWrapBlocks&&f.each(["","X","Y"],function(a,b){h.style["overflow"+b]=i.overflow[a]}),i.hide&&f(h).hide();if(i.hide||i.show)for(b in i.animatedProperties)f.style(h,b,i.orig[b]),f.removeData(h,"fxshow"+b,!0),f.removeData(h,"toggle"+b,!0);d=i.complete,d&&(i.complete=!1,d.call(h))}return!1}i.duration==Infinity?this.now=e:(c=e-this.startTime,this.state=c/i.duration,this.pos=f.easing[i.animatedProperties[this.prop]](this.state,c,0,1,i.duration),this.now=this.start+(this.end-this.start)*this.pos),this.update();return!0}},f.extend(f.fx,{tick:function(){var a,b=f.timers,c=0;for(;c<b.length;c++)a=b[c],!a()&&b[c]===a&&b.splice(c--,1);b.length||f.fx.stop()},interval:13,stop:function(){clearInterval(cp),cp=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(a){f.style(a.elem,"opacity",a.now)},_default:function(a){a.elem.style&&a.elem.style[a.prop]!=null?a.elem.style[a.prop]=a.now+a.unit:a.elem[a.prop]=a.now}}}),f.each(["width","height"],function(a,b){f.fx.step[b]=function(a){f.style(a.elem,b,Math.max(0,a.now)+a.unit)}}),f.expr&&f.expr.filters&&(f.expr.filters.animated=function(a){return f.grep(f.timers,function(b){return a===b.elem}).length});var cw=/^t(?:able|d|h)$/i,cx=/^(?:body|html)$/i;"getBoundingClientRect"in c.documentElement?f.fn.offset=function(a){var b=this[0],c;if(a)return this.each(function(b){f.offset.setOffset(this,a,b)});if(!b||!b.ownerDocument)return null;if(b===b.ownerDocument.body)return f.offset.bodyOffset(b);try{c=b.getBoundingClientRect()}catch(d){}var e=b.ownerDocument,g=e.documentElement;if(!c||!f.contains(g,b))return c?{top:c.top,left:c.left}:{top:0,left:0};var h=e.body,i=cy(e),j=g.clientTop||h.clientTop||0,k=g.clientLeft||h.clientLeft||0,l=i.pageYOffset||f.support.boxModel&&g.scrollTop||h.scrollTop,m=i.pageXOffset||f.support.boxModel&&g.scrollLeft||h.scrollLeft,n=c.top+l-j,o=c.left+m-k;return{top:n,left:o}}:f.fn.offset=function(a){var b=this[0];if(a)return this.each(function(b){f.offset.setOffset(this,a,b)});if(!b||!b.ownerDocument)return null;if(b===b.ownerDocument.body)return f.offset.bodyOffset(b);var c,d=b.offsetParent,e=b,g=b.ownerDocument,h=g.documentElement,i=g.body,j=g.defaultView,k=j?j.getComputedStyle(b,null):b.currentStyle,l=b.offsetTop,m=b.offsetLeft;while((b=b.parentNode)&&b!==i&&b!==h){if(f.support.fixedPosition&&k.position==="fixed")break;c=j?j.getComputedStyle(b,null):b.currentStyle,l-=b.scrollTop,m-=b.scrollLeft,b===d&&(l+=b.offsetTop,m+=b.offsetLeft,f.support.doesNotAddBorder&&(!f.support.doesAddBorderForTableAndCells||!cw.test(b.nodeName))&&(l+=parseFloat(c.borderTopWidth)||0,m+=parseFloat(c.borderLeftWidth)||0),e=d,d=b.offsetParent),f.support.subtractsBorderForOverflowNotVisible&&c.overflow!=="visible"&&(l+=parseFloat(c.borderTopWidth)||0,m+=parseFloat(c.borderLeftWidth)||0),k=c}if(k.position==="relative"||k.position==="static")l+=i.offsetTop,m+=i.offsetLeft;f.support.fixedPosition&&k.position==="fixed"&&(l+=Math.max(h.scrollTop,i.scrollTop),m+=Math.max(h.scrollLeft,i.scrollLeft));return{top:l,left:m}},f.offset={bodyOffset:function(a){var b=a.offsetTop,c=a.offsetLeft;f.support.doesNotIncludeMarginInBodyOffset&&(b+=parseFloat(f.css(a,"marginTop"))||0,c+=parseFloat(f.css(a,"marginLeft"))||0);return{top:b,left:c}},setOffset:function(a,b,c){var d=f.css(a,"position");d==="static"&&(a.style.position="relative");var e=f(a),g=e.offset(),h=f.css(a,"top"),i=f.css(a,"left"),j=(d==="absolute"||d==="fixed")&&f.inArray("auto",[h,i])>-1,k={},l={},m,n;j?(l=e.position(),m=l.top,n=l.left):(m=parseFloat(h)||0,n=parseFloat(i)||0),f.isFunction(b)&&(b=b.call(a,c,g)),b.top!=null&&(k.top=b.top-g.top+m),b.left!=null&&(k.left=b.left-g.left+n),"using"in b?b.using.call(a,k):e.css(k)}},f.fn.extend({position:function(){if(!this[0])return null;var a=this[0],b=this.offsetParent(),c=this.offset(),d=cx.test(b[0].nodeName)?{top:0,left:0}:b.offset();c.top-=parseFloat(f.css(a,"marginTop"))||0,c.left-=parseFloat(f.css(a,"marginLeft"))||0,d.top+=parseFloat(f.css(b[0],"borderTopWidth"))||0,d.left+=parseFloat(f.css(b[0],"borderLeftWidth"))||0;return{top:c.top-d.top,left:c.left-d.left}},offsetParent:function(){return this.map(function(){var a=this.offsetParent||c.body;while(a&&!cx.test(a.nodeName)&&f.css(a,"position")==="static")a=a.offsetParent;return a})}}),f.each(["Left","Top"],function(a,c){var d="scroll"+c;f.fn[d]=function(c){var e,g;if(c===b){e=this[0];if(!e)return null;g=cy(e);return g?"pageXOffset"in g?g[a?"pageYOffset":"pageXOffset"]:f.support.boxModel&&g.document.documentElement[d]||g.document.body[d]:e[d]}return this.each(function(){g=cy(this),g?g.scrollTo(a?f(g).scrollLeft():c,a?c:f(g).scrollTop()):this[d]=c})}}),f.each(["Height","Width"],function(a,c){var d=c.toLowerCase();f.fn["inner"+c]=function(){var a=this[0];return a?a.style?parseFloat(f.css(a,d,"padding")):this[d]():null},f.fn["outer"+c]=function(a){var b=this[0];return b?b.style?parseFloat(f.css(b,d,a?"margin":"border")):this[d]():null},f.fn[d]=function(a){var e=this[0];if(!e)return a==null?null:this;if(f.isFunction(a))return this.each(function(b){var c=f(this);c[d](a.call(this,b,c[d]()))});if(f.isWindow(e)){var g=e.document.documentElement["client"+c],h=e.document.body;return e.document.compatMode==="CSS1Compat"&&g||h&&h["client"+c]||g}if(e.nodeType===9)return Math.max(e.documentElement["client"+c],e.body["scroll"+c],e.documentElement["scroll"+c],e.body["offset"+c],e.documentElement["offset"+c]);if(a===b){var i=f.css(e,d),j=parseFloat(i);return f.isNumeric(j)?j:i}return this.css(d,typeof a=="string"?a:a+"px")}}),a.jQuery=a.$=f,typeof define=="function"&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return f})})(window);;
/*!
 * jQuery UI 1.8.18
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI
 */
(function(a,b){function d(b){return!a(b).parents().andSelf().filter(function(){return a.curCSS(this,"visibility")==="hidden"||a.expr.filters.hidden(this)}).length}function c(b,c){var e=b.nodeName.toLowerCase();if("area"===e){var f=b.parentNode,g=f.name,h;if(!b.href||!g||f.nodeName.toLowerCase()!=="map")return!1;h=a("img[usemap=#"+g+"]")[0];return!!h&&d(h)}return(/input|select|textarea|button|object/.test(e)?!b.disabled:"a"==e?b.href||c:c)&&d(b)}a.ui=a.ui||{};a.ui.version||(a.extend(a.ui,{version:"1.8.18",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}}),a.fn.extend({propAttr:a.fn.prop||a.fn.attr,_focus:a.fn.focus,focus:function(b,c){return typeof b=="number"?this.each(function(){var d=this;setTimeout(function(){a(d).focus(),c&&c.call(d)},b)}):this._focus.apply(this,arguments)},scrollParent:function(){var b;a.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?b=this.parents().filter(function(){return/(relative|absolute|fixed)/.test(a.curCSS(this,"position",1))&&/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0):b=this.parents().filter(function(){return/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0);return/fixed/.test(this.css("position"))||!b.length?a(document):b},zIndex:function(c){if(c!==b)return this.css("zIndex",c);if(this.length){var d=a(this[0]),e,f;while(d.length&&d[0]!==document){e=d.css("position");if(e==="absolute"||e==="relative"||e==="fixed"){f=parseInt(d.css("zIndex"),10);if(!isNaN(f)&&f!==0)return f}d=d.parent()}}return 0},disableSelection:function(){return this.bind((a.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),a.each(["Width","Height"],function(c,d){function h(b,c,d,f){a.each(e,function(){c-=parseFloat(a.curCSS(b,"padding"+this,!0))||0,d&&(c-=parseFloat(a.curCSS(b,"border"+this+"Width",!0))||0),f&&(c-=parseFloat(a.curCSS(b,"margin"+this,!0))||0)});return c}var e=d==="Width"?["Left","Right"]:["Top","Bottom"],f=d.toLowerCase(),g={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};a.fn["inner"+d]=function(c){if(c===b)return g["inner"+d].call(this);return this.each(function(){a(this).css(f,h(this,c)+"px")})},a.fn["outer"+d]=function(b,c){if(typeof b!="number")return g["outer"+d].call(this,b);return this.each(function(){a(this).css(f,h(this,b,!0,c)+"px")})}}),a.extend(a.expr[":"],{data:function(b,c,d){return!!a.data(b,d[3])},focusable:function(b){return c(b,!isNaN(a.attr(b,"tabindex")))},tabbable:function(b){var d=a.attr(b,"tabindex"),e=isNaN(d);return(e||d>=0)&&c(b,!e)}}),a(function(){var b=document.body,c=b.appendChild(c=document.createElement("div"));c.offsetHeight,a.extend(c.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),a.support.minHeight=c.offsetHeight===100,a.support.selectstart="onselectstart"in c,b.removeChild(c).style.display="none"}),a.extend(a.ui,{plugin:{add:function(b,c,d){var e=a.ui[b].prototype;for(var f in d)e.plugins[f]=e.plugins[f]||[],e.plugins[f].push([c,d[f]])},call:function(a,b,c){var d=a.plugins[b];if(!!d&&!!a.element[0].parentNode)for(var e=0;e<d.length;e++)a.options[d[e][0]]&&d[e][1].apply(a.element,c)}},contains:function(a,b){return document.compareDocumentPosition?a.compareDocumentPosition(b)&16:a!==b&&a.contains(b)},hasScroll:function(b,c){if(a(b).css("overflow")==="hidden")return!1;var d=c&&c==="left"?"scrollLeft":"scrollTop",e=!1;if(b[d]>0)return!0;b[d]=1,e=b[d]>0,b[d]=0;return e},isOverAxis:function(a,b,c){return a>b&&a<b+c},isOver:function(b,c,d,e,f,g){return a.ui.isOverAxis(b,d,f)&&a.ui.isOverAxis(c,e,g)}}))})(jQuery);
/*!
 * jQuery UI Widget 1.8.18
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Widget
 */
(function(a,b){if(a.cleanData){var c=a.cleanData;a.cleanData=function(b){for(var d=0,e;(e=b[d])!=null;d++)try{a(e).triggerHandler("remove")}catch(f){}c(b)}}else{var d=a.fn.remove;a.fn.remove=function(b,c){return this.each(function(){c||(!b||a.filter(b,[this]).length)&&a("*",this).add([this]).each(function(){try{a(this).triggerHandler("remove")}catch(b){}});return d.call(a(this),b,c)})}}a.widget=function(b,c,d){var e=b.split(".")[0],f;b=b.split(".")[1],f=e+"-"+b,d||(d=c,c=a.Widget),a.expr[":"][f]=function(c){return!!a.data(c,b)},a[e]=a[e]||{},a[e][b]=function(a,b){arguments.length&&this._createWidget(a,b)};var g=new c;g.options=a.extend(!0,{},g.options),a[e][b].prototype=a.extend(!0,g,{namespace:e,widgetName:b,widgetEventPrefix:a[e][b].prototype.widgetEventPrefix||b,widgetBaseClass:f},d),a.widget.bridge(b,a[e][b])},a.widget.bridge=function(c,d){a.fn[c]=function(e){var f=typeof e=="string",g=Array.prototype.slice.call(arguments,1),h=this;e=!f&&g.length?a.extend.apply(null,[!0,e].concat(g)):e;if(f&&e.charAt(0)==="_")return h;f?this.each(function(){var d=a.data(this,c),f=d&&a.isFunction(d[e])?d[e].apply(d,g):d;if(f!==d&&f!==b){h=f;return!1}}):this.each(function(){var b=a.data(this,c);b?b.option(e||{})._init():a.data(this,c,new d(e,this))});return h}},a.Widget=function(a,b){arguments.length&&this._createWidget(a,b)},a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:!1},_createWidget:function(b,c){a.data(c,this.widgetName,this),this.element=a(c),this.options=a.extend(!0,{},this.options,this._getCreateOptions(),b);var d=this;this.element.bind("remove."+this.widgetName,function(){d.destroy()}),this._create(),this._trigger("create"),this._init()},_getCreateOptions:function(){return a.metadata&&a.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName),this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled "+"ui-state-disabled")},widget:function(){return this.element},option:function(c,d){var e=c;if(arguments.length===0)return a.extend({},this.options);if(typeof c=="string"){if(d===b)return this.options[c];e={},e[c]=d}this._setOptions(e);return this},_setOptions:function(b){var c=this;a.each(b,function(a,b){c._setOption(a,b)});return this},_setOption:function(a,b){this.options[a]=b,a==="disabled"&&this.widget()[b?"addClass":"removeClass"](this.widgetBaseClass+"-disabled"+" "+"ui-state-disabled").attr("aria-disabled",b);return this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_trigger:function(b,c,d){var e,f,g=this.options[b];d=d||{},c=a.Event(c),c.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase(),c.target=this.element[0],f=c.originalEvent;if(f)for(e in f)e in c||(c[e]=f[e]);this.element.trigger(c,d);return!(a.isFunction(g)&&g.call(this.element[0],c,d)===!1||c.isDefaultPrevented())}}})(jQuery);
/*!
 * jQuery UI Mouse 1.8.18
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Mouse
 *
 * Depends:
 * jquery.ui.widget.js
 */
(function(a,b){var c=!1;a(document).mouseup(function(a){c=!1}),a.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var b=this;this.element.bind("mousedown."+this.widgetName,function(a){return b._mouseDown(a)}).bind("click."+this.widgetName,function(c){if(!0===a.data(c.target,b.widgetName+".preventClickEvent")){a.removeData(c.target,b.widgetName+".preventClickEvent"),c.stopImmediatePropagation();return!1}}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName)},_mouseDown:function(b){if(!c){this._mouseStarted&&this._mouseUp(b),this._mouseDownEvent=b;var d=this,e=b.which==1,f=typeof this.options.cancel=="string"&&b.target.nodeName?a(b.target).closest(this.options.cancel).length:!1;if(!e||f||!this._mouseCapture(b))return!0;this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){d.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(b)&&this._mouseDelayMet(b)){this._mouseStarted=this._mouseStart(b)!==!1;if(!this._mouseStarted){b.preventDefault();return!0}}!0===a.data(b.target,this.widgetName+".preventClickEvent")&&a.removeData(b.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(a){return d._mouseMove(a)},this._mouseUpDelegate=function(a){return d._mouseUp(a)},a(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),b.preventDefault(),c=!0;return!0}},_mouseMove:function(b){if(a.browser.msie&&!(document.documentMode>=9)&&!b.button)return this._mouseUp(b);if(this._mouseStarted){this._mouseDrag(b);return b.preventDefault()}this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,b)!==!1,this._mouseStarted?this._mouseDrag(b):this._mouseUp(b));return!this._mouseStarted},_mouseUp:function(b){a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,b.target==this._mouseDownEvent.target&&a.data(b.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(b));return!1},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(a){return this.mouseDelayMet},_mouseStart:function(a){},_mouseDrag:function(a){},_mouseStop:function(a){},_mouseCapture:function(a){return!0}})})(jQuery);(function(a,b){a.ui=a.ui||{};var c=/left|center|right/,d=/top|center|bottom/,e="center",f={},g=a.fn.position,h=a.fn.offset;a.fn.position=function(b){if(!b||!b.of)return g.apply(this,arguments);b=a.extend({},b);var h=a(b.of),i=h[0],j=(b.collision||"flip").split(" "),k=b.offset?b.offset.split(" "):[0,0],l,m,n;i.nodeType===9?(l=h.width(),m=h.height(),n={top:0,left:0}):i.setTimeout?(l=h.width(),m=h.height(),n={top:h.scrollTop(),left:h.scrollLeft()}):i.preventDefault?(b.at="left top",l=m=0,n={top:b.of.pageY,left:b.of.pageX}):(l=h.outerWidth(),m=h.outerHeight(),n=h.offset()),a.each(["my","at"],function(){var a=(b[this]||"").split(" ");a.length===1&&(a=c.test(a[0])?a.concat([e]):d.test(a[0])?[e].concat(a):[e,e]),a[0]=c.test(a[0])?a[0]:e,a[1]=d.test(a[1])?a[1]:e,b[this]=a}),j.length===1&&(j[1]=j[0]),k[0]=parseInt(k[0],10)||0,k.length===1&&(k[1]=k[0]),k[1]=parseInt(k[1],10)||0,b.at[0]==="right"?n.left+=l:b.at[0]===e&&(n.left+=l/2),b.at[1]==="bottom"?n.top+=m:b.at[1]===e&&(n.top+=m/2),n.left+=k[0],n.top+=k[1];return this.each(function(){var c=a(this),d=c.outerWidth(),g=c.outerHeight(),h=parseInt(a.curCSS(this,"marginLeft",!0))||0,i=parseInt(a.curCSS(this,"marginTop",!0))||0,o=d+h+(parseInt(a.curCSS(this,"marginRight",!0))||0),p=g+i+(parseInt(a.curCSS(this,"marginBottom",!0))||0),q=a.extend({},n),r;b.my[0]==="right"?q.left-=d:b.my[0]===e&&(q.left-=d/2),b.my[1]==="bottom"?q.top-=g:b.my[1]===e&&(q.top-=g/2),f.fractions||(q.left=Math.round(q.left),q.top=Math.round(q.top)),r={left:q.left-h,top:q.top-i},a.each(["left","top"],function(c,e){a.ui.position[j[c]]&&a.ui.position[j[c]][e](q,{targetWidth:l,targetHeight:m,elemWidth:d,elemHeight:g,collisionPosition:r,collisionWidth:o,collisionHeight:p,offset:k,my:b.my,at:b.at})}),a.fn.bgiframe&&c.bgiframe(),c.offset(a.extend(q,{using:b.using}))})},a.ui.position={fit:{left:function(b,c){var d=a(window),e=c.collisionPosition.left+c.collisionWidth-d.width()-d.scrollLeft();b.left=e>0?b.left-e:Math.max(b.left-c.collisionPosition.left,b.left)},top:function(b,c){var d=a(window),e=c.collisionPosition.top+c.collisionHeight-d.height()-d.scrollTop();b.top=e>0?b.top-e:Math.max(b.top-c.collisionPosition.top,b.top)}},flip:{left:function(b,c){if(c.at[0]!==e){var d=a(window),f=c.collisionPosition.left+c.collisionWidth-d.width()-d.scrollLeft(),g=c.my[0]==="left"?-c.elemWidth:c.my[0]==="right"?c.elemWidth:0,h=c.at[0]==="left"?c.targetWidth:-c.targetWidth,i=-2*c.offset[0];b.left+=c.collisionPosition.left<0?g+h+i:f>0?g+h+i:0}},top:function(b,c){if(c.at[1]!==e){var d=a(window),f=c.collisionPosition.top+c.collisionHeight-d.height()-d.scrollTop(),g=c.my[1]==="top"?-c.elemHeight:c.my[1]==="bottom"?c.elemHeight:0,h=c.at[1]==="top"?c.targetHeight:-c.targetHeight,i=-2*c.offset[1];b.top+=c.collisionPosition.top<0?g+h+i:f>0?g+h+i:0}}}},a.offset.setOffset||(a.offset.setOffset=function(b,c){/static/.test(a.curCSS(b,"position"))&&(b.style.position="relative");var d=a(b),e=d.offset(),f=parseInt(a.curCSS(b,"top",!0),10)||0,g=parseInt(a.curCSS(b,"left",!0),10)||0,h={top:c.top-e.top+f,left:c.left-e.left+g};"using"in c?c.using.call(b,h):d.css(h)},a.fn.offset=function(b){var c=this[0];if(!c||!c.ownerDocument)return null;if(b)return this.each(function(){a.offset.setOffset(this,b)});return h.call(this)}),function(){var b=document.getElementsByTagName("body")[0],c=document.createElement("div"),d,e,g,h,i;d=document.createElement(b?"div":"body"),g={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},b&&a.extend(g,{position:"absolute",left:"-1000px",top:"-1000px"});for(var j in g)d.style[j]=g[j];d.appendChild(c),e=b||document.documentElement,e.insertBefore(d,e.firstChild),c.style.cssText="position: absolute; left: 10.7432222px; top: 10.432325px; height: 30px; width: 201px;",h=a(c).offset(function(a,b){return b}).offset(),d.innerHTML="",e.removeChild(d),i=h.top+h.left+(b?2e3:0),f.fractions=i>21&&i<22}()})(jQuery);(function(a,b){a.widget("ui.draggable",a.ui.mouse,{widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){this.options.helper=="original"&&!/^(?:r|a|f)/.test(this.element.css("position"))&&(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},destroy:function(){if(!!this.element.data("draggable")){this.element.removeData("draggable").unbind(".draggable").removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy();return this}},_mouseCapture:function(b){var c=this.options;if(this.helper||c.disabled||a(b.target).is(".ui-resizable-handle"))return!1;this.handle=this._getHandle(b);if(!this.handle)return!1;c.iframeFix&&a(c.iframeFix===!0?"iframe":c.iframeFix).each(function(){a('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(a(this).offset()).appendTo("body")});return!0},_mouseStart:function(b){var c=this.options;this.helper=this._createHelper(b),this._cacheHelperProportions(),a.ui.ddmanager&&(a.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},a.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(b),this.originalPageX=b.pageX,this.originalPageY=b.pageY,c.cursorAt&&this._adjustOffsetFromHelper(c.cursorAt),c.containment&&this._setContainment();if(this._trigger("start",b)===!1){this._clear();return!1}this._cacheHelperProportions(),a.ui.ddmanager&&!c.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b),this.helper.addClass("ui-draggable-dragging"),this._mouseDrag(b,!0),a.ui.ddmanager&&a.ui.ddmanager.dragStart(this,b);return!0},_mouseDrag:function(b,c){this.position=this._generatePosition(b),this.positionAbs=this._convertPositionTo("absolute");if(!c){var d=this._uiHash();if(this._trigger("drag",b,d)===!1){this._mouseUp({});return!1}this.position=d.position}if(!this.options.axis||this.options.axis!="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!="x")this.helper[0].style.top=this.position.top+"px";a.ui.ddmanager&&a.ui.ddmanager.drag(this,b);return!1},_mouseStop:function(b){var c=!1;a.ui.ddmanager&&!this.options.dropBehaviour&&(c=a.ui.ddmanager.drop(this,b)),this.dropped&&(c=this.dropped,this.dropped=!1);if((!this.element[0]||!this.element[0].parentNode)&&this.options.helper=="original")return!1;if(this.options.revert=="invalid"&&!c||this.options.revert=="valid"&&c||this.options.revert===!0||a.isFunction(this.options.revert)&&this.options.revert.call(this.element,c)){var d=this;a(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){d._trigger("stop",b)!==!1&&d._clear()})}else this._trigger("stop",b)!==!1&&this._clear();return!1},_mouseUp:function(b){this.options.iframeFix===!0&&a("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),a.ui.ddmanager&&a.ui.ddmanager.dragStop(this,b);return a.ui.mouse.prototype._mouseUp.call(this,b)},cancel:function(){this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear();return this},_getHandle:function(b){var c=!this.options.handle||!a(this.options.handle,this.element).length?!0:!1;a(this.options.handle,this.element).find("*").andSelf().each(function(){this==b.target&&(c=!0)});return c},_createHelper:function(b){var c=this.options,d=a.isFunction(c.helper)?a(c.helper.apply(this.element[0],[b])):c.helper=="clone"?this.element.clone().removeAttr("id"):this.element;d.parents("body").length||d.appendTo(c.appendTo=="parent"?this.element[0].parentNode:c.appendTo),d[0]!=this.element[0]&&!/(fixed|absolute)/.test(d.css("position"))&&d.css("position","absolute");return d},_adjustOffsetFromHelper:function(b){typeof b=="string"&&(b=b.split(" ")),a.isArray(b)&&(b={left:+b[0],top:+b[1]||0}),"left"in b&&(this.offset.click.left=b.left+this.margins.left),"right"in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left),"top"in b&&(this.offset.click.top=b.top+this.margins.top),"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&a.browser.msie)b={top:0,left:0};return{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var a=this.element.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b=this.options;b.containment=="parent"&&(b.containment=this.helper[0].parentNode);if(b.containment=="document"||b.containment=="window")this.containment=[b.containment=="document"?0:a(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,b.containment=="document"?0:a(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,(b.containment=="document"?0:a(window).scrollLeft())+a(b.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(b.containment=="document"?0:a(window).scrollTop())+(a(b.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(b.containment)&&b.containment.constructor!=Array){var c=a(b.containment),d=c[0];if(!d)return;var e=c.offset(),f=a(d).css("overflow")!="hidden";this.containment=[(parseInt(a(d).css("borderLeftWidth"),10)||0)+(parseInt(a(d).css("paddingLeft"),10)||0),(parseInt(a(d).css("borderTopWidth"),10)||0)+(parseInt(a(d).css("paddingTop"),10)||0),(f?Math.max(d.scrollWidth,d.offsetWidth):d.offsetWidth)-(parseInt(a(d).css("borderLeftWidth"),10)||0)-(parseInt(a(d).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(f?Math.max(d.scrollHeight,d.offsetHeight):d.offsetHeight)-(parseInt(a(d).css("borderTopWidth"),10)||0)-(parseInt(a(d).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=c}else b.containment.constructor==Array&&(this.containment=b.containment)},_convertPositionTo:function(b,c){c||(c=this.position);var d=b=="absolute"?1:-1,e=this.options,f=this.cssPosition=="absolute"&&(this.scrollParent[0]==document||!a.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,g=/(html|body)/i.test(f[0].tagName);return{top:c.top+this.offset.relative.top*d+this.offset.parent.top*d-(a.browser.safari&&a.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():g?0:f.scrollTop())*d),left:c.left+this.offset.relative.left*d+this.offset.parent.left*d-(a.browser.safari&&a.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():g?0:f.scrollLeft())*d)}},_generatePosition:function(b){var c=this.options,d=this.cssPosition=="absolute"&&(this.scrollParent[0]==document||!a.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,e=/(html|body)/i.test(d[0].tagName),f=b.pageX,g=b.pageY;if(this.originalPosition){var h;if(this.containment){if(this.relative_container){var i=this.relative_container.offset();h=[this.containment[0]+i.left,this.containment[1]+i.top,this.containment[2]+i.left,this.containment[3]+i.top]}else h=this.containment;b.pageX-this.offset.click.left<h[0]&&(f=h[0]+this.offset.click.left),b.pageY-this.offset.click.top<h[1]&&(g=h[1]+this.offset.click.top),b.pageX-this.offset.click.left>h[2]&&(f=h[2]+this.offset.click.left),b.pageY-this.offset.click.top>h[3]&&(g=h[3]+this.offset.click.top)}if(c.grid){var j=c.grid[1]?this.originalPageY+Math.round((g-this.originalPageY)/c.grid[1])*c.grid[1]:this.originalPageY;g=h?j-this.offset.click.top<h[1]||j-this.offset.click.top>h[3]?j-this.offset.click.top<h[1]?j+c.grid[1]:j-c.grid[1]:j:j;var k=c.grid[0]?this.originalPageX+Math.round((f-this.originalPageX)/c.grid[0])*c.grid[0]:this.originalPageX;f=h?k-this.offset.click.left<h[0]||k-this.offset.click.left>h[2]?k-this.offset.click.left<h[0]?k+c.grid[0]:k-c.grid[0]:k:k}}return{top:g-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(a.browser.safari&&a.browser.version<526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollTop():e?0:d.scrollTop()),left:f-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(a.browser.safari&&a.browser.version<526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():e?0:d.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(b,c,d){d=d||this._uiHash(),a.ui.plugin.call(this,b,[c,d]),b=="drag"&&(this.positionAbs=this._convertPositionTo("absolute"));return a.Widget.prototype._trigger.call(this,b,c,d)},plugins:{},_uiHash:function(a){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),a.extend(a.ui.draggable,{version:"1.8.18"}),a.ui.plugin.add("draggable","connectToSortable",{start:function(b,c){var d=a(this).data("draggable"),e=d.options,f=a.extend({},c,{item:d.element});d.sortables=[],a(e.connectToSortable).each(function(){var c=a.data(this,"sortable");c&&!c.options.disabled&&(d.sortables.push({instance:c,shouldRevert:c.options.revert}),c.refreshPositions(),c._trigger("activate",b,f))})},stop:function(b,c){var d=a(this).data("draggable"),e=a.extend({},c,{item:d.element});a.each(d.sortables,function(){this.instance.isOver?(this.instance.isOver=0,d.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(b),this.instance.options.helper=this.instance.options._helper,d.options.helper=="original"&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",b,e))})},drag:function(b,c){var d=a(this).data("draggable"),e=this,f=function(b){var c=this.offset.click.top,d=this.offset.click.left,e=this.positionAbs.top,f=this.positionAbs.left,g=b.height,h=b.width,i=b.top,j=b.left;return a.ui.isOver(e+c,f+d,i,j,g,h)};a.each(d.sortables,function(f){this.instance.positionAbs=d.positionAbs,this.instance.helperProportions=d.helperProportions,this.instance.offset.click=d.offset.click,this.instance._intersectsWith(this.instance.containerCache)?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=a(e).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return c.helper[0]},b.target=this.instance.currentItem[0],this.instance._mouseCapture(b,!0),this.instance._mouseStart(b,!0,!0),this.instance.offset.click.top=d.offset.click.top,this.instance.offset.click.left=d.offset.click.left,this.instance.offset.parent.left-=d.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=d.offset.parent.top-this.instance.offset.parent.top,d._trigger("toSortable",b),d.dropped=this.instance.element,d.currentItem=d.element,this.instance.fromOutside=d),this.instance.currentItem&&this.instance._mouseDrag(b)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",b,this.instance._uiHash(this.instance)),this.instance._mouseStop(b,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),d._trigger("fromSortable",b),d.dropped=!1)})}}),a.ui.plugin.add("draggable","cursor",{start:function(b,c){var d=a("body"),e=a(this).data("draggable").options;d.css("cursor")&&(e._cursor=d.css("cursor")),d.css("cursor",e.cursor)},stop:function(b,c){var d=a(this).data("draggable").options;d._cursor&&a("body").css("cursor",d._cursor)}}),a.ui.plugin.add("draggable","opacity",{start:function(b,c){var d=a(c.helper),e=a(this).data("draggable").options;d.css("opacity")&&(e._opacity=d.css("opacity")),d.css("opacity",e.opacity)},stop:function(b,c){var d=a(this).data("draggable").options;d._opacity&&a(c.helper).css("opacity",d._opacity)}}),a.ui.plugin.add("draggable","scroll",{start:function(b,c){var d=a(this).data("draggable");d.scrollParent[0]!=document&&d.scrollParent[0].tagName!="HTML"&&(d.overflowOffset=d.scrollParent.offset())},drag:function(b,c){var d=a(this).data("draggable"),e=d.options,f=!1;if(d.scrollParent[0]!=document&&d.scrollParent[0].tagName!="HTML"){if(!e.axis||e.axis!="x")d.overflowOffset.top+d.scrollParent[0].offsetHeight-b.pageY<e.scrollSensitivity?d.scrollParent[0].scrollTop=f=d.scrollParent[0].scrollTop+e.scrollSpeed:b.pageY-d.overflowOffset.top<e.scrollSensitivity&&(d.scrollParent[0].scrollTop=f=d.scrollParent[0].scrollTop-e.scrollSpeed);if(!e.axis||e.axis!="y")d.overflowOffset.left+d.scrollParent[0].offsetWidth-b.pageX<e.scrollSensitivity?d.scrollParent[0].scrollLeft=f=d.scrollParent[0].scrollLeft+e.scrollSpeed:b.pageX-d.overflowOffset.left<e.scrollSensitivity&&(d.scrollParent[0].scrollLeft=f=d.scrollParent[0].scrollLeft-e.scrollSpeed)}else{if(!e.axis||e.axis!="x")b.pageY-a(document).scrollTop()<e.scrollSensitivity?f=a(document).scrollTop(a(document).scrollTop()-e.scrollSpeed):a(window).height()-(b.pageY-a(document).scrollTop())<e.scrollSensitivity&&(f=a(document).scrollTop(a(document).scrollTop()+e.scrollSpeed));if(!e.axis||e.axis!="y")b.pageX-a(document).scrollLeft()<e.scrollSensitivity?f=a(document).scrollLeft(a(document).scrollLeft()-e.scrollSpeed):a(window).width()-(b.pageX-a(document).scrollLeft())<e.scrollSensitivity&&(f=a(document).scrollLeft(a(document).scrollLeft()+e.scrollSpeed))}f!==!1&&a.ui.ddmanager&&!e.dropBehaviour&&a.ui.ddmanager.prepareOffsets(d,b)}}),a.ui.plugin.add("draggable","snap",{start:function(b,c){var d=a(this).data("draggable"),e=d.options;d.snapElements=[],a(e.snap.constructor!=String?e.snap.items||":data(draggable)":e.snap).each(function(){var b=a(this),c=b.offset();this!=d.element[0]&&d.snapElements.push({item:this,width:b.outerWidth(),height:b.outerHeight(),top:c.top,left:c.left})})},drag:function(b,c){var d=a(this).data("draggable"),e=d.options,f=e.snapTolerance,g=c.offset.left,h=g+d.helperProportions.width,i=c.offset.top,j=i+d.helperProportions.height;for(var k=d.snapElements.length-1;k>=0;k--){var l=d.snapElements[k].left,m=l+d.snapElements[k].width,n=d.snapElements[k].top,o=n+d.snapElements[k].height;if(!(l-f<g&&g<m+f&&n-f<i&&i<o+f||l-f<g&&g<m+f&&n-f<j&&j<o+f||l-f<h&&h<m+f&&n-f<i&&i<o+f||l-f<h&&h<m+f&&n-f<j&&j<o+f)){d.snapElements[k].snapping&&d.options.snap.release&&d.options.snap.release.call(d.element,b,a.extend(d._uiHash(),{snapItem:d.snapElements[k].item})),d.snapElements[k].snapping=!1;continue}if(e.snapMode!="inner"){var p=Math.abs(n-j)<=f,q=Math.abs(o-i)<=f,r=Math.abs(l-h)<=f,s=Math.abs(m-g)<=f;p&&(c.position.top=d._convertPositionTo("relative",{top:n-d.helperProportions.height,left:0}).top-d.margins.top),q&&(c.position.top=d._convertPositionTo("relative",{top:o,left:0}).top-d.margins.top),r&&(c.position.left=d._convertPositionTo("relative",{top:0,left:l-d.helperProportions.width}).left-d.margins.left),s&&(c.position.left=d._convertPositionTo("relative",{top:0,left:m}).left-d.margins.left)}var t=p||q||r||s;if(e.snapMode!="outer"){var p=Math.abs(n-i)<=f,q=Math.abs(o-j)<=f,r=Math.abs(l-g)<=f,s=Math.abs(m-h)<=f;p&&(c.position.top=d._convertPositionTo("relative",{top:n,left:0}).top-d.margins.top),q&&(c.position.top=d._convertPositionTo("relative",{top:o-d.helperProportions.height,left:0}).top-d.margins.top),r&&(c.position.left=d._convertPositionTo("relative",{top:0,left:l}).left-d.margins.left),s&&(c.position.left=d._convertPositionTo("relative",{top:0,left:m-d.helperProportions.width}).left-d.margins.left)}!d.snapElements[k].snapping&&(p||q||r||s||t)&&d.options.snap.snap&&d.options.snap.snap.call(d.element,b,a.extend(d._uiHash(),{snapItem:d.snapElements[k].item})),d.snapElements[k].snapping=p||q||r||s||t}}}),a.ui.plugin.add("draggable","stack",{start:function(b,c){var d=a(this).data("draggable").options,e=a.makeArray(a(d.stack)).sort(function(b,c){return(parseInt(a(b).css("zIndex"),10)||0)-(parseInt(a(c).css("zIndex"),10)||0)});if(!!e.length){var f=parseInt(e[0].style.zIndex)||0;a(e).each(function(a){this.style.zIndex=f+a}),this[0].style.zIndex=f+e.length}}}),a.ui.plugin.add("draggable","zIndex",{start:function(b,c){var d=a(c.helper),e=a(this).data("draggable").options;d.css("zIndex")&&(e._zIndex=d.css("zIndex")),d.css("zIndex",e.zIndex)},stop:function(b,c){var d=a(this).data("draggable").options;d._zIndex&&a(c.helper).css("zIndex",d._zIndex)}})})(jQuery);(function(a,b){a.widget("ui.droppable",{widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect"},_create:function(){var b=this.options,c=b.accept;this.isover=0,this.isout=1,this.accept=a.isFunction(c)?c:function(a){return a.is(c)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},a.ui.ddmanager.droppables[b.scope]=a.ui.ddmanager.droppables[b.scope]||[],a.ui.ddmanager.droppables[b.scope].push(this),b.addClasses&&this.element.addClass("ui-droppable")},destroy:function(){var b=a.ui.ddmanager.droppables[this.options.scope];for(var c=0;c<b.length;c++)b[c]==this&&b.splice(c,1);this.element.removeClass("ui-droppable ui-droppable-disabled").removeData("droppable").unbind(".droppable");return this},_setOption:function(b,c){b=="accept"&&(this.accept=a.isFunction(c)?c:function(a){return a.is(c)}),a.Widget.prototype._setOption.apply(this,arguments)},_activate:function(b){var c=a.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),c&&this._trigger("activate",b,this.ui(c))},_deactivate:function(b){var c=a.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),c&&this._trigger("deactivate",b,this.ui(c))},_over:function(b){var c=a.ui.ddmanager.current;!!c&&(c.currentItem||c.element)[0]!=this.element[0]&&this.accept.call(this.element[0],c.currentItem||c.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",b,this.ui(c)))},_out:function(b){var c=a.ui.ddmanager.current;!!c&&(c.currentItem||c.element)[0]!=this.element[0]&&this.accept.call(this.element[0],c.currentItem||c.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",b,this.ui(c)))},_drop:function(b,c){var d=c||a.ui.ddmanager.current;if(!d||(d.currentItem||d.element)[0]==this.element[0])return!1;var e=!1;this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var b=a.data(this,"droppable");if(b.options.greedy&&!b.options.disabled&&b.options.scope==d.options.scope&&b.accept.call(b.element[0],d.currentItem||d.element)&&a.ui.intersect(d,a.extend(b,{offset:b.element.offset()}),b.options.tolerance)){e=!0;return!1}});if(e)return!1;if(this.accept.call(this.element[0],d.currentItem||d.element)){this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",b,this.ui(d));return this.element}return!1},ui:function(a){return{draggable:a.currentItem||a.element,helper:a.helper,position:a.position,offset:a.positionAbs}}}),a.extend(a.ui.droppable,{version:"1.8.18"}),a.ui.intersect=function(b,c,d){if(!c.offset)return!1;var e=(b.positionAbs||b.position.absolute).left,f=e+b.helperProportions.width,g=(b.positionAbs||b.position.absolute).top,h=g+b.helperProportions.height,i=c.offset.left,j=i+c.proportions.width,k=c.offset.top,l=k+c.proportions.height;switch(d){case"fit":return i<=e&&f<=j&&k<=g&&h<=l;case"intersect":return i<e+b.helperProportions.width/2&&f-b.helperProportions.width/2<j&&k<g+b.helperProportions.height/2&&h-b.helperProportions.height/2<l;case"pointer":var m=(b.positionAbs||b.position.absolute).left+(b.clickOffset||b.offset.click).left,n=(b.positionAbs||b.position.absolute).top+(b.clickOffset||b.offset.click).top,o=a.ui.isOver(n,m,k,i,c.proportions.height,c.proportions.width);return o;case"touch":return(g>=k&&g<=l||h>=k&&h<=l||g<k&&h>l)&&(e>=i&&e<=j||f>=i&&f<=j||e<i&&f>j);default:return!1}},a.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(b,c){var d=a.ui.ddmanager.droppables[b.options.scope]||[],e=c?c.type:null,f=(b.currentItem||b.element).find(":data(droppable)").andSelf();droppablesLoop:for(var g=0;g<d.length;g++){if(d[g].options.disabled||b&&!d[g].accept.call(d[g].element[0],b.currentItem||b.element))continue;for(var h=0;h<f.length;h++)if(f[h]==d[g].element[0]){d[g].proportions.height=0;continue droppablesLoop}d[g].visible=d[g].element.css("display")!="none";if(!d[g].visible)continue;e=="mousedown"&&d[g]._activate.call(d[g],c),d[g].offset=d[g].element.offset(),d[g].proportions={width:d[g].element[0].offsetWidth,height:d[g].element[0].offsetHeight}}},drop:function(b,c){var d=!1;a.each(a.ui.ddmanager.droppables[b.options.scope]||[],function(){!this.options||(!this.options.disabled&&this.visible&&a.ui.intersect(b,this,this.options.tolerance)&&(d=this._drop.call(this,c)||d),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],b.currentItem||b.element)&&(this.isout=1,this.isover=0,this._deactivate.call(this,c)))});return d},dragStart:function(b,c){b.element.parents(":not(body,html)").bind("scroll.droppable",function(){b.options.refreshPositions||a.ui.ddmanager.prepareOffsets(b,c)})},drag:function(b,c){b.options.refreshPositions&&a.ui.ddmanager.prepareOffsets(b,c),a.each(a.ui.ddmanager.droppables[b.options.scope]||[],function(){if(!(this.options.disabled||this.greedyChild||!this.visible)){var d=a.ui.intersect(b,this,this.options.tolerance),e=!d&&this.isover==1?"isout":d&&this.isover==0?"isover":null;if(!e)return;var f;if(this.options.greedy){var g=this.element.parents(":data(droppable):eq(0)");g.length&&(f=a.data(g[0],"droppable"),f.greedyChild=e=="isover"?1:0)}f&&e=="isover"&&(f.isover=0,f.isout=1,f._out.call(f,c)),this[e]=1,this[e=="isout"?"isover":"isout"]=0,this[e=="isover"?"_over":"_out"].call(this,c),f&&e=="isout"&&(f.isout=0,f.isover=1,f._over.call(f,c))}})},dragStop:function(b,c){b.element.parents(":not(body,html)").unbind("scroll.droppable"),b.options.refreshPositions||a.ui.ddmanager.prepareOffsets(b,c)}}})(jQuery);(function(a,b){a.widget("ui.resizable",a.ui.mouse,{widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1e3},_create:function(){var b=this,c=this.options;this.element.addClass("ui-resizable"),a.extend(this,{_aspectRatio:!!c.aspectRatio,aspectRatio:c.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:c.helper||c.ghost||c.animate?c.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(a('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("resizable",this.element.data("resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=c.handles||(a(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se");if(this.handles.constructor==String){this.handles=="all"&&(this.handles="n,e,s,w,se,sw,ne,nw");var d=this.handles.split(",");this.handles={};for(var e=0;e<d.length;e++){var f=a.trim(d[e]),g="ui-resizable-"+f,h=a('<div class="ui-resizable-handle '+g+'"></div>');/sw|se|ne|nw/.test(f)&&h.css({zIndex:++c.zIndex}),"se"==f&&h.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[f]=".ui-resizable-"+f,this.element.append(h)}}this._renderAxis=function(b){b=b||this.element;for(var c in this.handles){this.handles[c].constructor==String&&(this.handles[c]=a(this.handles[c],this.element).show());if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var d=a(this.handles[c],this.element),e=0;e=/sw|ne|nw|se|n|s/.test(c)?d.outerHeight():d.outerWidth();var f=["padding",/ne|nw|n/.test(c)?"Top":/se|sw|s/.test(c)?"Bottom":/^e$/.test(c)?"Right":"Left"].join("");b.css(f,e),this._proportionallyResize()}if(!a(this.handles[c]).length)continue}},this._renderAxis(this.element),this._handles=a(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){if(!b.resizing){if(this.className)var a=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);b.axis=a&&a[1]?a[1]:"se"}}),c.autoHide&&(this._handles.hide(),a(this.element).addClass("ui-resizable-autohide").hover(function(){c.disabled||(a(this).removeClass("ui-resizable-autohide"),b._handles.show())},function(){c.disabled||b.resizing||(a(this).addClass("ui-resizable-autohide"),b._handles.hide())})),this._mouseInit()},destroy:function(){this._mouseDestroy();var b=function(b){a(b).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};if(this.elementIsWrapper){b(this.element);var c=this.element;c.after(this.originalElement.css({position:c.css("position"),width:c.outerWidth(),height:c.outerHeight(),top:c.css("top"),left:c.css("left")})).remove()}this.originalElement.css("resize",this.originalResizeStyle),b(this.originalElement);return this},_mouseCapture:function(b){var c=!1;for(var d in this.handles)a(this.handles[d])[0]==b.target&&(c=!0);return!this.options.disabled&&c},_mouseStart:function(b){var d=this.options,e=this.element.position(),f=this.element;this.resizing=!0,this.documentScroll={top:a(document).scrollTop(),left:a(document).scrollLeft()},(f.is(".ui-draggable")||/absolute/.test(f.css("position")))&&f.css({position:"absolute",top:e.top,left:e.left}),this._renderProxy();var g=c(this.helper.css("left")),h=c(this.helper.css("top"));d.containment&&(g+=a(d.containment).scrollLeft()||0,h+=a(d.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:g,top:h},this.size=this._helper?{width:f.outerWidth(),height:f.outerHeight()}:{width:f.width(),height:f.height()},this.originalSize=this._helper?{width:f.outerWidth(),height:f.outerHeight()}:{width:f.width(),height:f.height()},this.originalPosition={left:g,top:h},this.sizeDiff={width:f.outerWidth()-f.width(),height:f.outerHeight()-f.height()},this.originalMousePosition={left:b.pageX,top:b.pageY},this.aspectRatio=typeof d.aspectRatio=="number"?d.aspectRatio:this.originalSize.width/this.originalSize.height||1;var i=a(".ui-resizable-"+this.axis).css("cursor");a("body").css("cursor",i=="auto"?this.axis+"-resize":i),f.addClass("ui-resizable-resizing"),this._propagate("start",b);return!0},_mouseDrag:function(b){var c=this.helper,d=this.options,e={},f=this,g=this.originalMousePosition,h=this.axis,i=b.pageX-g.left||0,j=b.pageY-g.top||0,k=this._change[h];if(!k)return!1;var l=k.apply(this,[b,i,j]),m=a.browser.msie&&a.browser.version<7,n=this.sizeDiff;this._updateVirtualBoundaries(b.shiftKey);if(this._aspectRatio||b.shiftKey)l=this._updateRatio(l,b);l=this._respectSize(l,b),this._propagate("resize",b),c.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+"px",height:this.size.height+"px"}),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),this._updateCache(l),this._trigger("resize",b,this.ui());return!1},_mouseStop:function(b){this.resizing=!1;var c=this.options,d=this;if(this._helper){var e=this._proportionallyResizeElements,f=e.length&&/textarea/i.test(e[0].nodeName),g=f&&a.ui.hasScroll(e[0],"left")?0:d.sizeDiff.height,h=f?0:d.sizeDiff.width,i={width:d.helper.width()-h,height:d.helper.height()-g},j=parseInt(d.element.css("left"),10)+(d.position.left-d.originalPosition.left)||null,k=parseInt(d.element.css("top"),10)+(d.position.top-d.originalPosition.top)||null;c.animate||this.element.css(a.extend(i,{top:k,left:j})),d.helper.height(d.size.height),d.helper.width(d.size.width),this._helper&&!c.animate&&this._proportionallyResize()}a("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",b),this._helper&&this.helper.remove();return!1},_updateVirtualBoundaries:function(a){var b=this.options,c,e,f,g,h;h={minWidth:d(b.minWidth)?b.minWidth:0,maxWidth:d(b.maxWidth)?b.maxWidth:Infinity,minHeight:d(b.minHeight)?b.minHeight:0,maxHeight:d(b.maxHeight)?b.maxHeight:Infinity};if(this._aspectRatio||a)c=h.minHeight*this.aspectRatio,f=h.minWidth/this.aspectRatio,e=h.maxHeight*this.aspectRatio,g=h.maxWidth/this.aspectRatio,c>h.minWidth&&(h.minWidth=c),f>h.minHeight&&(h.minHeight=f),e<h.maxWidth&&(h.maxWidth=e),g<h.maxHeight&&(h.maxHeight=g);this._vBoundaries=h},_updateCache:function(a){var b=this.options;this.offset=this.helper.offset(),d(a.left)&&(this.position.left=a.left),d(a.top)&&(this.position.top=a.top),d(a.height)&&(this.size.height=a.height),d(a.width)&&(this.size.width=a.width)},_updateRatio:function(a,b){var c=this.options,e=this.position,f=this.size,g=this.axis;d(a.height)?a.width=a.height*this.aspectRatio:d(a.width)&&(a.height=a.width/this.aspectRatio),g=="sw"&&(a.left=e.left+(f.width-a.width),a.top=null),g=="nw"&&(a.top=e.top+(f.height-a.height),a.left=e.left+(f.width-a.width));return a},_respectSize:function(a,b){var c=this.helper,e=this._vBoundaries,f=this._aspectRatio||b.shiftKey,g=this.axis,h=d(a.width)&&e.maxWidth&&e.maxWidth<a.width,i=d(a.height)&&e.maxHeight&&e.maxHeight<a.height,j=d(a.width)&&e.minWidth&&e.minWidth>a.width,k=d(a.height)&&e.minHeight&&e.minHeight>a.height;j&&(a.width=e.minWidth),k&&(a.height=e.minHeight),h&&(a.width=e.maxWidth),i&&(a.height=e.maxHeight);var l=this.originalPosition.left+this.originalSize.width,m=this.position.top+this.size.height,n=/sw|nw|w/.test(g),o=/nw|ne|n/.test(g);j&&n&&(a.left=l-e.minWidth),h&&n&&(a.left=l-e.maxWidth),k&&o&&(a.top=m-e.minHeight),i&&o&&(a.top=m-e.maxHeight);var p=!a.width&&!a.height;p&&!a.left&&a.top?a.top=null:p&&!a.top&&a.left&&(a.left=null);return a},_proportionallyResize:function(){var b=this.options;if(!!this._proportionallyResizeElements.length){var c=this.helper||this.element;for(var d=0;d<this._proportionallyResizeElements.length;d++){var e=this._proportionallyResizeElements[d];if(!this.borderDif){var f=[e.css("borderTopWidth"),e.css("borderRightWidth"),e.css("borderBottomWidth"),e.css("borderLeftWidth")],g=[e.css("paddingTop"),e.css("paddingRight"),e.css("paddingBottom"),e.css("paddingLeft")];this.borderDif=a.map(f,function(a,b){var c=parseInt(a,10)||0,d=parseInt(g[b],10)||0;return c+d})}if(a.browser.msie&&(!!a(c).is(":hidden")||!!a(c).parents(":hidden").length))continue;e.css({height:c.height()-this.borderDif[0]-this.borderDif[2]||0,width:c.width()-this.borderDif[1]-this.borderDif[3]||0})}}},_renderProxy:function(){var b=this.element,c=this.options;this.elementOffset=b.offset();if(this._helper){this.helper=this.helper||a('<div style="overflow:hidden;"></div>');var d=a.browser.msie&&a.browser.version<7,e=d?1:0,f=d?2:-1;this.helper.addClass(this._helper).css({width:this.element.outerWidth()+f,height:this.element.outerHeight()+f,position:"absolute",left:this.elementOffset.left-e+"px",top:this.elementOffset.top-e+"px",zIndex:++c.zIndex}),this.helper.appendTo("body").disableSelection()}else this.helper=this.element},_change:{e:function(a,b,c){return{width:this.originalSize.width+b}},w:function(a,b,c){var d=this.options,e=this.originalSize,f=this.originalPosition;return{left:f.left+b,width:e.width-b}},n:function(a,b,c){var d=this.options,e=this.originalSize,f=this.originalPosition;return{top:f.top+c,height:e.height-c}},s:function(a,b,c){return{height:this.originalSize.height+c}},se:function(b,c,d){return a.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[b,c,d]))},sw:function(b,c,d){return a.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[b,c,d]))},ne:function(b,c,d){return a.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[b,c,d]))},nw:function(b,c,d){return a.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[b,c,d]))}},_propagate:function(b,c){a.ui.plugin.call(this,b,[c,this.ui()]),b!="resize"&&this._trigger(b,c,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),a.extend(a.ui.resizable,{version:"1.8.18"}),a.ui.plugin.add("resizable","alsoResize",{start:function(b,c){var d=a(this).data("resizable"),e=d.options,f=function(b){a(b).each(function(){var b=a(this);b.data("resizable-alsoresize",{width:parseInt(b.width(),10),height:parseInt(b.height(),10),left:parseInt(b.css("left"),10),top:parseInt(b.css("top"),10)})})};typeof e.alsoResize=="object"&&!e.alsoResize.parentNode?e.alsoResize.length?(e.alsoResize=e.alsoResize[0],f(e.alsoResize)):a.each(e.alsoResize,function(a){f(a)}):f(e.alsoResize)},resize:function(b,c){var d=a(this).data("resizable"),e=d.options,f=d.originalSize,g=d.originalPosition,h={height:d.size.height-f.height||0,width:d.size.width-f.width||0,top:d.position.top-g.top||0,left:d.position.left-g.left||0},i=function(b,d){a(b).each(function(){var b=a(this),e=a(this).data("resizable-alsoresize"),f={},g=d&&d.length?d:b.parents(c.originalElement[0]).length?["width","height"]:["width","height","top","left"];a.each(g,function(a,b){var c=(e[b]||0)+(h[b]||0);c&&c>=0&&(f[b]=c||null)}),b.css(f)})};typeof e.alsoResize=="object"&&!e.alsoResize.nodeType?a.each(e.alsoResize,function(a,b){i(a,b)}):i(e.alsoResize)},stop:function(b,c){a(this).removeData("resizable-alsoresize")}}),a.ui.plugin.add("resizable","animate",{stop:function(b,c){var d=a(this).data("resizable"),e=d.options,f=d._proportionallyResizeElements,g=f.length&&/textarea/i.test(f[0].nodeName),h=g&&a.ui.hasScroll(f[0],"left")?0:d.sizeDiff.height,i=g?0:d.sizeDiff.width,j={width:d.size.width-i,height:d.size.height-h},k=parseInt(d.element.css("left"),10)+(d.position.left-d.originalPosition.left)||null,l=parseInt(d.element.css("top"),10)+(d.position.top-d.originalPosition.top)||null;d.element.animate(a.extend(j,l&&k?{top:l,left:k}:{}),{duration:e.animateDuration,easing:e.animateEasing,step:function(){var c={width:parseInt(d.element.css("width"),10),height:parseInt(d.element.css("height"),10),top:parseInt(d.element.css("top"),10),left:parseInt(d.element.css("left"),10)};f&&f.length&&a(f[0]).css({width:c.width,height:c.height}),d._updateCache(c),d._propagate("resize",b)}})}}),a.ui.plugin.add("resizable","containment",{start:function(b,d){var e=a(this).data("resizable"),f=e.options,g=e.element,h=f.containment,i=h instanceof a?h.get(0):/parent/.test(h)?g.parent().get(0):h;if(!!i){e.containerElement=a(i);if(/document/.test(h)||h==document)e.containerOffset={left:0,top:0},e.containerPosition={left:0,top:0},e.parentData={element:a(document),left:0,top:0,width:a(document).width(),height:a(document).height()||document.body.parentNode.scrollHeight};else{var j=a(i),k=[];a(["Top","Right","Left","Bottom"]).each(function(a,b){k[a]=c(j.css("padding"+b))}),e.containerOffset=j.offset(),e.containerPosition=j.position(),e.containerSize={height:j.innerHeight()-k[3],width:j.innerWidth()-k[1]};var l=e.containerOffset,m=e.containerSize.height,n=e.containerSize.width,o=a.ui.hasScroll(i,"left")?i.scrollWidth:n,p=a.ui.hasScroll(i)?i.scrollHeight:m;e.parentData={element:i,left:l.left,top:l.top,width:o,height:p}}}},resize:function(b,c){var d=a(this).data("resizable"),e=d.options,f=d.containerSize,g=d.containerOffset,h=d.size,i=d.position,j=d._aspectRatio||b.shiftKey,k={top:0,left:0},l=d.containerElement;l[0]!=document&&/static/.test(l.css("position"))&&(k=g),i.left<(d._helper?g.left:0)&&(d.size.width=d.size.width+(d._helper?d.position.left-g.left:d.position.left-k.left),j&&(d.size.height=d.size.width/e.aspectRatio),d.position.left=e.helper?g.left:0),i.top<(d._helper?g.top:0)&&(d.size.height=d.size.height+(d._helper?d.position.top-g.top:d.position.top),j&&(d.size.width=d.size.height*e.aspectRatio),d.position.top=d._helper?g.top:0),d.offset.left=d.parentData.left+d.position.left,d.offset.top=d.parentData.top+d.position.top;var m=Math.abs((d._helper?d.offset.left-k.left:d.offset.left-k.left)+d.sizeDiff.width),n=Math.abs((d._helper?d.offset.top-k.top:d.offset.top-g.top)+d.sizeDiff.height),o=d.containerElement.get(0)==d.element.parent().get(0),p=/relative|absolute/.test(d.containerElement.css("position"));o&&p&&(m-=d.parentData.left),m+d.size.width>=d.parentData.width&&(d.size.width=d.parentData.width-m,j&&(d.size.height=d.size.width/d.aspectRatio)),n+d.size.height>=d.parentData.height&&(d.size.height=d.parentData.height-n,j&&(d.size.width=d.size.height*d.aspectRatio))},stop:function(b,c){var d=a(this).data("resizable"),e=d.options,f=d.position,g=d.containerOffset,h=d.containerPosition,i=d.containerElement,j=a(d.helper),k=j.offset(),l=j.outerWidth()-d.sizeDiff.width,m=j.outerHeight()-d.sizeDiff.height;d._helper&&!e.animate&&/relative/.test(i.css("position"))&&a(this).css({left:k.left-h.left-g.left,width:l,height:m}),d._helper&&!e.animate&&/static/.test(i.css("position"))&&a(this).css({left:k.left-h.left-g.left,width:l,height:m})}}),a.ui.plugin.add("resizable","ghost",{start:function(b,c){var d=a(this).data("resizable"),e=d.options,f=d.size;d.ghost=d.originalElement.clone(),d.ghost.css({opacity:.25,display:"block",position:"relative",height:f.height,width:f.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass(typeof e.ghost=="string"?e.ghost:""),d.ghost.appendTo(d.helper)},resize:function(b,c){var d=a(this).data("resizable"),e=d.options;d.ghost&&d.ghost.css({position:"relative",height:d.size.height,width:d.size.width})},stop:function(b,c){var d=a(this).data("resizable"),e=d.options;d.ghost&&d.helper&&d.helper.get(0).removeChild(d.ghost.get(0))}}),a.ui.plugin.add("resizable","grid",{resize:function(b,c){var d=a(this).data("resizable"),e=d.options,f=d.size,g=d.originalSize,h=d.originalPosition,i=d.axis,j=e._aspectRatio||b.shiftKey;e.grid=typeof e.grid=="number"?[e.grid,e.grid]:e.grid;var k=Math.round((f.width-g.width)/(e.grid[0]||1))*(e.grid[0]||1),l=Math.round((f.height-g.height)/(e.grid[1]||1))*(e.grid[1]||1);/^(se|s|e)$/.test(i)?(d.size.width=g.width+k,d.size.height=g.height+l):/^(ne)$/.test(i)?(d.size.width=g.width+k,d.size.height=g.height+l,d.position.top=h.top-l):/^(sw)$/.test(i)?(d.size.width=g.width+k,d.size.height=g.height+l,d.position.left=h.left-k):(d.size.width=g.width+k,d.size.height=g.height+l,d.position.top=h.top-l,d.position.left=h.left-k)}});var c=function(a){return parseInt(a,10)||0},d=function(a){return!isNaN(parseInt(a,10))}})(jQuery);(function(a,b){a.widget("ui.selectable",a.ui.mouse,{options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch"},_create:function(){var b=this;this.element.addClass("ui-selectable"),this.dragged=!1;var c;this.refresh=function(){c=a(b.options.filter,b.element[0]),c.addClass("ui-selectee"),c.each(function(){var b=a(this),c=b.offset();a.data(this,"selectable-item",{element:this,$element:b,left:c.left,top:c.top,right:c.left+b.outerWidth(),bottom:c.top+b.outerHeight(),startselected:!1,selected:b.hasClass("ui-selected"),selecting:b.hasClass("ui-selecting"),unselecting:b.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=c.addClass("ui-selectee"),this._mouseInit(),this.helper=a("<div class='ui-selectable-helper'></div>")},destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled").removeData("selectable").unbind(".selectable"),this._mouseDestroy();return this},_mouseStart:function(b){var c=this;this.opos=[b.pageX,b.pageY];if(!this.options.disabled){var d=this.options;this.selectees=a(d.filter,this.element[0]),this._trigger("start",b),a(d.appendTo).append(this.helper),this.helper.css({left:b.clientX,top:b.clientY,width:0,height:0}),d.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var d=a.data(this,"selectable-item");d.startselected=!0,!b.metaKey&&!b.ctrlKey&&(d.$element.removeClass("ui-selected"),d.selected=!1,d.$element.addClass("ui-unselecting"),d.unselecting=!0,c._trigger("unselecting",b,{unselecting:d.element}))}),a(b.target).parents().andSelf().each(function(){var d=a.data(this,"selectable-item");if(d){var e=!b.metaKey&&!b.ctrlKey||!d.$element.hasClass("ui-selected");d.$element.removeClass(e?"ui-unselecting":"ui-selected").addClass(e?"ui-selecting":"ui-unselecting"),d.unselecting=!e,d.selecting=e,d.selected=e,e?c._trigger("selecting",b,{selecting:d.element}):c._trigger("unselecting",b,{unselecting:d.element});return!1}})}},_mouseDrag:function(b){var c=this;this.dragged=!0;if(!this.options.disabled){var d=this.options,e=this.opos[0],f=this.opos[1],g=b.pageX,h=b.pageY;if(e>g){var i=g;g=e,e=i}if(f>h){var i=h;h=f,f=i}this.helper.css({left:e,top:f,width:g-e,height:h-f}),this.selectees.each(function(){var i=a.data(this,"selectable-item");if(!!i&&i.element!=c.element[0]){var j=!1;d.tolerance=="touch"?j=!(i.left>g||i.right<e||i.top>h||i.bottom<f):d.tolerance=="fit"&&(j=i.left>e&&i.right<g&&i.top>f&&i.bottom<h),j?(i.selected&&(i.$element.removeClass("ui-selected"),i.selected=!1),i.unselecting&&(i.$element.removeClass("ui-unselecting"),i.unselecting=!1),i.selecting||(i.$element.addClass("ui-selecting"),i.selecting=!0,c._trigger("selecting",b,{selecting:i.element}))):(i.selecting&&((b.metaKey||b.ctrlKey)&&i.startselected?(i.$element.removeClass("ui-selecting"),i.selecting=!1,i.$element.addClass("ui-selected"),i.selected=!0):(i.$element.removeClass("ui-selecting"),i.selecting=!1,i.startselected&&(i.$element.addClass("ui-unselecting"),i.unselecting=!0),c._trigger("unselecting",b,{unselecting:i.element}))),i.selected&&!b.metaKey&&!b.ctrlKey&&!i.startselected&&(i.$element.removeClass("ui-selected"),i.selected=!1,i.$element.addClass("ui-unselecting"),i.unselecting=!0,c._trigger("unselecting",b,{unselecting:i.element})))}});return!1}},_mouseStop:function(b){var c=this;this.dragged=!1;var d=this.options;a(".ui-unselecting",this.element[0]).each(function(){var d=a.data(this,"selectable-item");d.$element.removeClass("ui-unselecting"),d.unselecting=!1,d.startselected=!1,c._trigger("unselected",b,{unselected:d.element})}),a(".ui-selecting",this.element[0]).each(function(){var d=a.data(this,"selectable-item");d.$element.removeClass("ui-selecting").addClass("ui-selected"),d.selecting=!1,d.selected=!0,d.startselected=!0,c._trigger("selected",b,{selected:d.element})}),this._trigger("stop",b),this.helper.remove();return!1}}),a.extend(a.ui.selectable,{version:"1.8.18"})})(jQuery);(function(a,b){a.widget("ui.sortable",a.ui.mouse,{widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3},_create:function(){var a=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?a.axis==="x"||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display")):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},destroy:function(){a.Widget.prototype.destroy.call(this),this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var b=this.items.length-1;b>=0;b--)this.items[b].item.removeData(this.widgetName+"-item");return this},_setOption:function(b,c){b==="disabled"?(this.options[b]=c,this.widget()[c?"addClass":"removeClass"]("ui-sortable-disabled")):a.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(b,c){var d=this;if(this.reverting)return!1;if(this.options.disabled||this.options.type=="static")return!1;this._refreshItems(b);var e=null,f=this,g=a(b.target).parents().each(function(){if(a.data(this,d.widgetName+"-item")==f){e=a(this);return!1}});a.data(b.target,d.widgetName+"-item")==f&&(e=a(b.target));if(!e)return!1;if(this.options.handle&&!c){var h=!1;a(this.options.handle,e).find("*").andSelf().each(function(){this==b.target&&(h=!0)});if(!h)return!1}this.currentItem=e,this._removeCurrentsFromItems();return!0},_mouseStart:function(b,c,d){var e=this.options,f=this;this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(b),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),a.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this._generatePosition(b),this.originalPageX=b.pageX,this.originalPageY=b.pageY,e.cursorAt&&this._adjustOffsetFromHelper(e.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!=this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),e.containment&&this._setContainment(),e.cursor&&(a("body").css("cursor")&&(this._storedCursor=a("body").css("cursor")),a("body").css("cursor",e.cursor)),e.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",e.opacity)),e.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",e.zIndex)),this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",b,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions();if(!d)for(var g=this.containers.length-1;g>=0;g--)this.containers[g]._trigger("activate",b,f._uiHash(this));a.ui.ddmanager&&(a.ui.ddmanager.current=this),a.ui.ddmanager&&!e.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(b);return!0},_mouseDrag:function(b){this.position=this._generatePosition(b),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs);if(this.options.scroll){var c=this.options,d=!1;this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-b.pageY<c.scrollSensitivity?this.scrollParent[0].scrollTop=d=this.scrollParent[0].scrollTop+c.scrollSpeed:b.pageY-this.overflowOffset.top<c.scrollSensitivity&&(this.scrollParent[0].scrollTop=d=this.scrollParent[0].scrollTop-c.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-b.pageX<c.scrollSensitivity?this.scrollParent[0].scrollLeft=d=this.scrollParent[0].scrollLeft+c.scrollSpeed:b.pageX-this.overflowOffset.left<c.scrollSensitivity&&(this.scrollParent[0].scrollLeft=d=this.scrollParent[0].scrollLeft-c.scrollSpeed)):(b.pageY-a(document).scrollTop()<c.scrollSensitivity?d=a(document).scrollTop(a(document).scrollTop()-c.scrollSpeed):a(window).height()-(b.pageY-a(document).scrollTop())<c.scrollSensitivity&&(d=a(document).scrollTop(a(document).scrollTop()+c.scrollSpeed)),b.pageX-a(document).scrollLeft()<c.scrollSensitivity?d=a(document).scrollLeft(a(document).scrollLeft()-c.scrollSpeed):a(window).width()-(b.pageX-a(document).scrollLeft())<c.scrollSensitivity&&(d=a(document).scrollLeft(a(document).scrollLeft()+c.scrollSpeed))),d!==!1&&a.ui.ddmanager&&!c.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b)}this.positionAbs=this._convertPositionTo("absolute");if(!this.options.axis||this.options.axis!="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!="x")this.helper[0].style.top=this.position.top+"px";for(var e=this.items.length-1;e>=0;e--){var f=this.items[e],g=f.item[0],h=this._intersectsWithPointer(f);if(!h)continue;if(g!=this.currentItem[0]&&this.placeholder[h==1?"next":"prev"]()[0]!=g&&!a.ui.contains(this.placeholder[0],g)&&(this.options.type=="semi-dynamic"?!a.ui.contains(this.element[0],g):!0)){this.direction=h==1?"down":"up";if(this.options.tolerance=="pointer"||this._intersectsWithSides(f))this._rearrange(b,f);else break;this._trigger("change",b,this._uiHash());break}}this._contactContainers(b),a.ui.ddmanager&&a.ui.ddmanager.drag(this,b),this._trigger("sort",b,this._uiHash()),this.lastPositionAbs=this.positionAbs;return!1},_mouseStop:function(b,c){if(!!b){a.ui.ddmanager&&!this.options.dropBehaviour&&a.ui.ddmanager.drop(this,b);if(this.options.revert){var d=this,e=d.placeholder.offset();d.reverting=!0,a(this.helper).animate({left:e.left-this.offset.parent.left-d.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:e.top-this.offset.parent.top-d.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){d._clear(b)})}else this._clear(b,c);return!1}},cancel:function(){var b=this;if(this.dragging){this._mouseUp({target:null}),this.options.helper=="original"?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var c=this.containers.length-1;c>=0;c--)this.containers[c]._trigger("deactivate",null,b._uiHash(this)),this.containers[c].containerCache.over&&(this.containers[c]._trigger("out",null,b._uiHash(this)),this.containers[c].containerCache.over=0)}this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.options.helper!="original"&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),a.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?a(this.domPosition.prev).after(this.currentItem):a(this.domPosition.parent).prepend(this.currentItem));return this},serialize:function(b){var c=this._getItemsAsjQuery(b&&b.connected),d=[];b=b||{},a(c).each(function(){var c=(a(b.item||this).attr(b.attribute||"id")||"").match(b.expression||/(.+)[-=_](.+)/);c&&d.push((b.key||c[1]+"[]")+"="+(b.key&&b.expression?c[1]:c[2]))}),!d.length&&b.key&&d.push(b.key+"=");return d.join("&")},toArray:function(b){var c=this._getItemsAsjQuery(b&&b.connected),d=[];b=b||{},c.each(function(){d.push(a(b.item||this).attr(b.attribute||"id")||"")});return d},_intersectsWith:function(a){var b=this.positionAbs.left,c=b+this.helperProportions.width,d=this.positionAbs.top,e=d+this.helperProportions.height,f=a.left,g=f+a.width,h=a.top,i=h+a.height,j=this.offset.click.top,k=this.offset.click.left,l=d+j>h&&d+j<i&&b+k>f&&b+k<g;return this.options.tolerance=="pointer"||this.options.forcePointerForContainers||this.options.tolerance!="pointer"&&this.helperProportions[this.floating?"width":"height"]>a[this.floating?"width":"height"]?l:f<b+this.helperProportions.width/2&&c-this.helperProportions.width/2<g&&h<d+this.helperProportions.height/2&&e-this.helperProportions.height/2<i},_intersectsWithPointer:function(b){var c=a.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,b.top,b.height),d=a.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,b.left,b.width),e=c&&d,f=this._getDragVerticalDirection(),g=this._getDragHorizontalDirection();if(!e)return!1;return this.floating?g&&g=="right"||f=="down"?2:1:f&&(f=="down"?2:1)},_intersectsWithSides:function(b){var c=a.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,b.top+b.height/2,b.height),d=a.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,b.left+b.width/2,b.width),e=this._getDragVerticalDirection(),f=this._getDragHorizontalDirection();return this.floating&&f?f=="right"&&d||f=="left"&&!d:e&&(e=="down"&&c||e=="up"&&!c)},_getDragVerticalDirection:function(){var a=this.positionAbs.top-this.lastPositionAbs.top;return a!=0&&(a>0?"down":"up")},_getDragHorizontalDirection:function(){var a=this.positionAbs.left-this.lastPositionAbs.left;return a!=0&&(a>0?"right":"left")},refresh:function(a){this._refreshItems(a),this.refreshPositions();return this},_connectWith:function(){var a=this.options;return a.connectWith.constructor==String?[a.connectWith]:a.connectWith},_getItemsAsjQuery:function(b){var c=this,d=[],e=[],f=this._connectWith();if(f&&b)for(var g=f.length-1;g>=0;g--){var h=a(f[g]);for(var i=h.length-1;i>=0;i--){var j=a.data(h[i],this.widgetName);j&&j!=this&&!j.options.disabled&&e.push([a.isFunction(j.options.items)?j.options.items.call(j.element):a(j.options.items,j.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),j])}}e.push([a.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):a(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(var g=e.length-1;g>=0;g--)e[g][0].each(function(){d.push(this)});return a(d)},_removeCurrentsFromItems:function(){var a=this.currentItem.find(":data("+this.widgetName+"-item)");for(var b=0;b<this.items.length;b++)for(var c=0;c<a.length;c++)a[c]==this.items[b].item[0]&&this.items.splice(b,1)},_refreshItems:function(b){this.items=[],this.containers=[this];var c=this.items,d=this,e=[[a.isFunction(this.options.items)?this.options.items.call(this.element[0],b,{item:this.currentItem}):a(this.options.items,this.element),this]],f=this._connectWith();if(f&&this.ready)for(var g=f.length-1;g>=0;g--){var h=a(f[g]);for(var i=h.length-1;i>=0;i--){var j=a.data(h[i],this.widgetName);j&&j!=this&&!j.options.disabled&&(e.push([a.isFunction(j.options.items)?j.options.items.call(j.element[0],b,{item:this.currentItem}):a(j.options.items,j.element),j]),this.containers.push(j))}}for(var g=e.length-1;g>=0;g--){var k=e[g][1],l=e[g][0];for(var i=0,m=l.length;i<m;i++){var n=a(l[i]);n.data(this.widgetName+"-item",k),c.push({item:n,instance:k,width:0,height:0,left:0,top:0})}}},refreshPositions:function(b){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());for(var c=this.items.length-1;c>=0;c--){var d=this.items[c];if(d.instance!=this.currentContainer&&this.currentContainer&&d.item[0]!=this.currentItem[0])continue;var e=this.options.toleranceElement?a(this.options.toleranceElement,d.item):d.item;b||(d.width=e.outerWidth(),d.height=e.outerHeight());var f=e.offset();d.left=f.left,d.top=f.top}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(var c=this.containers.length-1;c>=0;c--){var f=this.containers[c].element.offset();this.containers[c].containerCache.left=f.left,this.containers[c].containerCache.top=f.top,this.containers[c].containerCache.width=this.containers[c].element.outerWidth(),this.containers[c].containerCache.height=this.containers[c].element.outerHeight()}return this},_createPlaceholder:function(b){var c=b||this,d=c.options;if(!d.placeholder||d.placeholder.constructor==String){var e=d.placeholder;d.placeholder={element:function(){var b=a(document.createElement(c.currentItem[0].nodeName)).addClass(e||c.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];e||(b.style.visibility="hidden");return b},update:function(a,b){if(!e||!!d.forcePlaceholderSize)b.height()||b.height(c.currentItem.innerHeight()-parseInt(c.currentItem.css("paddingTop")||0,10)-parseInt(c.currentItem.css("paddingBottom")||0,10)),b.width()||b.width(c.currentItem.innerWidth()-parseInt(c.currentItem.css("paddingLeft")||0,10)-parseInt(c.currentItem.css("paddingRight")||0,10))}}}c.placeholder=a(d.placeholder.element.call(c.element,c.currentItem)),c.currentItem.after(c.placeholder),d.placeholder.update(c,c.placeholder)},_contactContainers:function(b){var c=null,d=null;for(var e=this.containers.length-1;e>=0;e--){if(a.ui.contains(this.currentItem[0],this.containers[e].element[0]))continue;if(this._intersectsWith(this.containers[e].containerCache)){if(c&&a.ui.contains(this.containers[e].element[0],c.element[0]))continue;c=this.containers[e],d=e}else this.containers[e].containerCache.over&&(this.containers[e]._trigger("out",b,this._uiHash(this)),this.containers[e].containerCache.over=0)}if(!!c)if(this.containers.length===1)this.containers[d]._trigger("over",b,this._uiHash(this)),this.containers[d].containerCache.over=1;else if(this.currentContainer!=this.containers[d]){var f=1e4,g=null,h=this.positionAbs[this.containers[d].floating?"left":"top"];for(var i=this.items.length-1;i>=0;i--){if(!a.ui.contains(this.containers[d].element[0],this.items[i].item[0]))continue;var j=this.items[i][this.containers[d].floating?"left":"top"];Math.abs(j-h)<f&&(f=Math.abs(j-h),g=this.items[i])}if(!g&&!this.options.dropOnEmpty)return;this.currentContainer=this.containers[d],g?this._rearrange(b,g,null,!0):this._rearrange(b,null,this.containers[d].element,!0),this._trigger("change",b,this._uiHash()),this.containers[d]._trigger("change",b,this._uiHash(this)),this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[d]._trigger("over",b,this._uiHash(this)),this.containers[d].containerCache.over=1}},_createHelper:function(b){var c=this.options,d=a.isFunction(c.helper)?a(c.helper.apply(this.element[0],[b,this.currentItem])):c.helper=="clone"?this.currentItem.clone():this.currentItem;d.parents("body").length||a(c.appendTo!="parent"?c.appendTo:this.currentItem[0].parentNode)[0].appendChild(d[0]),d[0]==this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(d[0].style.width==""||c.forceHelperSize)&&d.width(this.currentItem.width()),(d[0].style.height==""||c.forceHelperSize)&&d.height(this.currentItem.height());return d},_adjustOffsetFromHelper:function(b){typeof b=="string"&&(b=b.split(" ")),a.isArray(b)&&(b={left:+b[0],top:+b[1]||0}),"left"in b&&(this.offset.click.left=b.left+this.margins.left),"right"in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left),"top"in b&&(this.offset.click.top=b.top+this.margins.top),"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&a.browser.msie)b={top:0,left:0};return{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var a=this.currentItem.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b=this.options;b.containment=="parent"&&(b.containment=this.helper[0].parentNode);if(b.containment=="document"||b.containment=="window")this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,a(b.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(a(b.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(b.containment)){var c=a(b.containment)[0],d=a(b.containment).offset(),e=a(c).css("overflow")!="hidden";this.containment=[d.left+(parseInt(a(c).css("borderLeftWidth"),10)||0)+(parseInt(a(c).css("paddingLeft"),10)||0)-this.margins.left,d.top+(parseInt(a(c).css("borderTopWidth"),10)||0)+(parseInt(a(c).css("paddingTop"),10)||0)-this.margins.top,d.left+(e?Math.max(c.scrollWidth,c.offsetWidth):c.offsetWidth)-(parseInt(a(c).css("borderLeftWidth"),10)||0)-(parseInt(a(c).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,d.top+(e?Math.max(c.scrollHeight,c.offsetHeight):c.offsetHeight)-(parseInt(a(c).css("borderTopWidth"),10)||0)-(parseInt(a(c).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(b,c){c||(c=this.position);var d=b=="absolute"?1:-1,e=this.options,f=this.cssPosition=="absolute"&&(this.scrollParent[0]==document||!a.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,g=/(html|body)/i.test(f[0].tagName);return{top:c.top+this.offset.relative.top*d+this.offset.parent.top*d-(a.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():g?0:f.scrollTop())*d),left:c.left+this.offset.relative.left*d+this.offset.parent.left*d-(a.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():g?0:f.scrollLeft())*d)}},_generatePosition:function(b){var c=this.options,d=this.cssPosition=="absolute"&&(this.scrollParent[0]==document||!a.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,e=/(html|body)/i.test(d[0].tagName);this.cssPosition=="relative"&&(this.scrollParent[0]==document||this.scrollParent[0]==this.offsetParent[0])&&(this.offset.relative=this._getRelativeOffset());var f=b.pageX,g=b.pageY;if(this.originalPosition){this.containment&&(b.pageX-this.offset.click.left<this.containment[0]&&(f=this.containment[0]+this.offset.click.left),b.pageY-this.offset.click.top<this.containment[1]&&(g=this.containment[1]+this.offset.click.top),b.pageX-this.offset.click.left>this.containment[2]&&(f=this.containment[2]+this.offset.click.left),b.pageY-this.offset.click.top>this.containment[3]&&(g=this.containment[3]+this.offset.click.top));if(c.grid){var h=this.originalPageY+Math.round((g-this.originalPageY)/c.grid[1])*c.grid[1];g=this.containment?h-this.offset.click.top<this.containment[1]||h-this.offset.click.top>this.containment[3]?h-this.offset.click.top<this.containment[1]?h+c.grid[1]:h-c.grid[1]:h:h;var i=this.originalPageX+Math.round((f-this.originalPageX)/c.grid[0])*c.grid[0];f=this.containment?i-this.offset.click.left<this.containment[0]||i-this.offset.click.left>this.containment[2]?i-this.offset.click.left<this.containment[0]?i+c.grid[0]:i-c.grid[0]:i:i}}return{top:g-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(a.browser.safari&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollTop():e?0:d.scrollTop()),left:f-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(a.browser.safari&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():e?0:d.scrollLeft())}},_rearrange:function(a,b,c,d){c?c[0].appendChild(this.placeholder[0]):b.item[0].parentNode.insertBefore(this.placeholder[0],this.direction=="down"?b.item[0]:b.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var e=this,f=this.counter;window.setTimeout(function(){f==e.counter&&e.refreshPositions(!d)},0)},_clear:function(b,c){this.reverting=!1;var d=[],e=this;!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null;if(this.helper[0]==this.currentItem[0]){for(var f in this._storedCSS)if(this._storedCSS[f]=="auto"||this._storedCSS[f]=="static")this._storedCSS[f]="";this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();this.fromOutside&&!c&&d.push(function(a){this._trigger("receive",a,this._uiHash(this.fromOutside))}),(this.fromOutside||this.domPosition.prev!=this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!=this.currentItem.parent()[0])&&!c&&d.push(function(a){this._trigger("update",a,this._uiHash())});if(!a.ui.contains(this.element[0],this.currentItem[0])){c||d.push(function(a){this._trigger("remove",a,this._uiHash())});for(var f=this.containers.length-1;f>=0;f--)a.ui.contains(this.containers[f].element[0],this.currentItem[0])&&!c&&(d.push(function(a){return function(b){a._trigger("receive",b,this._uiHash(this))}}.call(this,this.containers[f])),d.push(function(a){return function(b){a._trigger("update",b,this._uiHash(this))}}.call(this,this.containers[f])))}for(var f=this.containers.length-1;f>=0;f--)c||d.push(function(a){return function(b){a._trigger("deactivate",b,this._uiHash(this))}}.call(this,this.containers[f])),this.containers[f].containerCache.over&&(d.push(function(a){return function(b){a._trigger("out",b,this._uiHash(this))}}.call(this,this.containers[f])),this.containers[f].containerCache.over=0);this._storedCursor&&a("body").css("cursor",this._storedCursor),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex",this._storedZIndex=="auto"?"":this._storedZIndex),this.dragging=!1;if(this.cancelHelperRemoval){if(!c){this._trigger("beforeStop",b,this._uiHash());for(var f=0;f<d.length;f++)d[f].call(this,b);this._trigger("stop",b,this._uiHash())}return!1}c||this._trigger("beforeStop",b,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!=this.currentItem[0]&&this.helper.remove(),this.helper=null;if(!c){for(var f=0;f<d.length;f++)d[f].call(this,b);this._trigger("stop",b,this._uiHash())}this.fromOutside=!1;return!0},_trigger:function(){a.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(b){var c=b||this;return{helper:c.helper,placeholder:c.placeholder||a([]),position:c.position,originalPosition:c.originalPosition,offset:c.positionAbs,item:c.currentItem,sender:b?b.element:null}}}),a.extend(a.ui.sortable,{version:"1.8.18"})})(jQuery);(function(a,b){a.widget("ui.accordion",{options:{active:0,animated:"slide",autoHeight:!0,clearStyle:!1,collapsible:!1,event:"click",fillSpace:!1,header:"> li > :first-child,> :not(li):even",icons:{header:"ui-icon-triangle-1-e",headerSelected:"ui-icon-triangle-1-s"},navigation:!1,navigationFilter:function(){return this.href.toLowerCase()===location.href.toLowerCase()}},_create:function(){var b=this,c=b.options;b.running=0,b.element.addClass("ui-accordion ui-widget ui-helper-reset").children("li").addClass("ui-accordion-li-fix"),b.headers=b.element.find(c.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all").bind("mouseenter.accordion",function(){c.disabled||a(this).addClass("ui-state-hover")}).bind("mouseleave.accordion",function(){c.disabled||a(this).removeClass("ui-state-hover")}).bind("focus.accordion",function(){c.disabled||a(this).addClass("ui-state-focus")}).bind("blur.accordion",function(){c.disabled||a(this).removeClass("ui-state-focus")}),b.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom");if(c.navigation){var d=b.element.find("a").filter(c.navigationFilter).eq(0);if(d.length){var e=d.closest(".ui-accordion-header");e.length?b.active=e:b.active=d.closest(".ui-accordion-content").prev()}}b.active=b._findActive(b.active||c.active).addClass("ui-state-default ui-state-active").toggleClass("ui-corner-all").toggleClass("ui-corner-top"),b.active.next().addClass("ui-accordion-content-active"),b._createIcons(),b.resize(),b.element.attr("role","tablist"),b.headers.attr("role","tab").bind("keydown.accordion",function(a){return b._keydown(a)}).next().attr("role","tabpanel"),b.headers.not(b.active||"").attr({"aria-expanded":"false","aria-selected":"false",tabIndex:-1}).next().hide(),b.active.length?b.active.attr({"aria-expanded":"true","aria-selected":"true",tabIndex:0}):b.headers.eq(0).attr("tabIndex",0),a.browser.safari||b.headers.find("a").attr("tabIndex",-1),c.event&&b.headers.bind(c.event.split(" ").join(".accordion ")+".accordion",function(a){b._clickHandler.call(b,a,this),a.preventDefault()})},_createIcons:function(){var b=this.options;b.icons&&(a("<span></span>").addClass("ui-icon "+b.icons.header).prependTo(this.headers),this.active.children(".ui-icon").toggleClass(b.icons.header).toggleClass(b.icons.headerSelected),this.element.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.children(".ui-icon").remove(),this.element.removeClass("ui-accordion-icons")},destroy:function(){var b=this.options;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.unbind(".accordion").removeClass("ui-accordion-header ui-accordion-disabled ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("tabIndex"),this.headers.find("a").removeAttr("tabIndex"),this._destroyIcons();var c=this.headers.next().css("display","").removeAttr("role").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-accordion-disabled ui-state-disabled");(b.autoHeight||b.fillHeight)&&c.css("height","");return a.Widget.prototype.destroy.call(this)},_setOption:function(b,c){a.Widget.prototype._setOption.apply(this,arguments),b=="active"&&this.activate(c),b=="icons"&&(this._destroyIcons(),c&&this._createIcons()),b=="disabled"&&this.headers.add(this.headers.next())[c?"addClass":"removeClass"]("ui-accordion-disabled ui-state-disabled")},_keydown:function(b){if(!(this.options.disabled||b.altKey||b.ctrlKey)){var c=a.ui.keyCode,d=this.headers.length,e=this.headers.index(b.target),f=!1;switch(b.keyCode){case c.RIGHT:case c.DOWN:f=this.headers[(e+1)%d];break;case c.LEFT:case c.UP:f=this.headers[(e-1+d)%d];break;case c.SPACE:case c.ENTER:this._clickHandler({target:b.target},b.target),b.preventDefault()}if(f){a(b.target).attr("tabIndex",-1),a(f).attr("tabIndex",0),f.focus();return!1}return!0}},resize:function(){var b=this.options,c;if(b.fillSpace){if(a.browser.msie){var d=this.element.parent().css("overflow");this.element.parent().css("overflow","hidden")}c=this.element.parent().height(),a.browser.msie&&this.element.parent().css("overflow",d),this.headers.each(function(){c-=a(this).outerHeight(!0)}),this.headers.next().each(function(){a(this).height(Math.max(0,c-a(this).innerHeight()+a(this).height()))}).css("overflow","auto")}else b.autoHeight&&(c=0,this.headers.next().each(function(){c=Math.max(c,a(this).height("").height())}).height(c));return this},activate:function(a){this.options.active=a;var b=this._findActive(a)[0];this._clickHandler({target:b},b);return this},_findActive:function(b){return b?typeof b=="number"?this.headers.filter(":eq("+b+")"):this.headers.not(this.headers.not(b)):b===!1?a([]):this.headers.filter(":eq(0)")},_clickHandler:function(b,c){var d=this.options;if(!d.disabled){if(!b.target){if(!d.collapsible)return;this.active.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").children(".ui-icon").removeClass(d.icons.headerSelected).addClass(d.icons.header),this.active.next().addClass("ui-accordion-content-active");var e=this.active.next(),f={options:d,newHeader:a([]),oldHeader:d.active,newContent:a([]),oldContent:e},g=this.active=a([]);this._toggle(g,e,f);return}var h=a(b.currentTarget||c),i=h[0]===this.active[0];d.active=d.collapsible&&i?!1:this.headers.index(h);if(this.running||!d.collapsible&&i)return;var j=this.active,g=h.next(),e=this.active.next(),f={options:d,newHeader:i&&d.collapsible?a([]):h,oldHeader:this.active,newContent:i&&d.collapsible?a([]):g,oldContent:e},k=this.headers.index(this.active[0])>this.headers.index(h[0]);this.active=i?a([]):h,this._toggle(g,e,f,i,k),j.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").children(".ui-icon").removeClass(d.icons.headerSelected).addClass(d.icons.header),i||(h.removeClass("ui-state-default ui-corner-all").addClass("ui-state-active ui-corner-top").children(".ui-icon").removeClass(d.icons.header).addClass(d.icons.headerSelected),h.next().addClass("ui-accordion-content-active"));return}},_toggle:function(b,c,d,e,f){var g=this,h=g.options;g.toShow=b,g.toHide=c,g.data=d;var i=function(){if(!!g)return g._completed.apply(g,arguments)};g._trigger("changestart",null,g.data),g.running=c.size()===0?b.size():c.size();if(h.animated){var j={};h.collapsible&&e?j={toShow:a([]),toHide:c,complete:i,down:f,autoHeight:h.autoHeight||h.fillSpace}:j={toShow:b,toHide:c,complete:i,down:f,autoHeight:h.autoHeight||h.fillSpace},h.proxied||(h.proxied=h.animated),h.proxiedDuration||(h.proxiedDuration=h.duration),h.animated=a.isFunction(h.proxied)?h.proxied(j):h.proxied,h.duration=a.isFunction(h.proxiedDuration)?h.proxiedDuration(j):h.proxiedDuration;var k=a.ui.accordion.animations,l=h.duration,m=h.animated;m&&!k[m]&&!a.easing[m]&&(m="slide"),k[m]||(k[m]=function(a){this.slide(a,{easing:m,duration:l||700})}),k[m](j)}else h.collapsible&&e?b.toggle():(c.hide(),b.show()),i(!0);c.prev().attr({"aria-expanded":"false","aria-selected":"false",tabIndex:-1}).blur(),b.prev().attr({"aria-expanded":"true","aria-selected":"true",tabIndex:0}).focus()},_completed:function(a){this.running=a?0:--this.running;this.running||(this.options.clearStyle&&this.toShow.add(this.toHide).css({height:"",overflow:""}),this.toHide.removeClass("ui-accordion-content-active"),this.toHide.length&&(this.toHide.parent()[0].className=this.toHide.parent()[0].className),this._trigger("change",null,this.data))}}),a.extend(a.ui.accordion,{version:"1.8.18",animations:{slide:function(b,c){b=a.extend({easing:"swing",duration:300},b,c);if(!b.toHide.size())b.toShow.animate({height:"show",paddingTop:"show",paddingBottom:"show"},b);else{if(!b.toShow.size()){b.toHide.animate({height:"hide",paddingTop:"hide",paddingBottom:"hide"},b);return}var d=b.toShow.css("overflow"),e=0,f={},g={},h=["height","paddingTop","paddingBottom"],i,j=b.toShow;i=j[0].style.width,j.width(j.parent().width()-parseFloat(j.css("paddingLeft"))-parseFloat(j.css("paddingRight"))-(parseFloat(j.css("borderLeftWidth"))||0)-(parseFloat(j.css("borderRightWidth"))||0)),a.each(h,function(c,d){g[d]="hide";var e=(""+a.css(b.toShow[0],d)).match(/^([\d+-.]+)(.*)$/);f[d]={value:e[1],unit:e[2]||"px"}}),b.toShow.css({height:0,overflow:"hidden"}).show(),b.toHide.filter(":hidden").each(b.complete).end().filter(":visible").animate(g,{step:function(a,c){c.prop=="height"&&(e=c.end-c.start===0?0:(c.now-c.start)/(c.end-c.start)),b.toShow[0].style[c.prop]=e*f[c.prop].value+f[c.prop].unit},duration:b.duration,easing:b.easing,complete:function(){b.autoHeight||b.toShow.css("height",""),b.toShow.css({width:i,overflow:d}),b.complete()}})}},bounceslide:function(a){this.slide(a,{easing:a.down?"easeOutBounce":"swing",duration:a.down?1e3:200})}}})})(jQuery);(function(a,b){var c=0;a.widget("ui.autocomplete",{options:{appendTo:"body",autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null},pending:0,_create:function(){var b=this,c=this.element[0].ownerDocument,d;this.element.addClass("ui-autocomplete-input").attr("autocomplete","off").attr({role:"textbox","aria-autocomplete":"list","aria-haspopup":"true"}).bind("keydown.autocomplete",function(c){if(!b.options.disabled&&!b.element.propAttr("readOnly")){d=!1;var e=a.ui.keyCode;switch(c.keyCode){case e.PAGE_UP:b._move("previousPage",c);break;case e.PAGE_DOWN:b._move("nextPage",c);break;case e.UP:b._move("previous",c),c.preventDefault();break;case e.DOWN:b._move("next",c),c.preventDefault();break;case e.ENTER:case e.NUMPAD_ENTER:b.menu.active&&(d=!0,c.preventDefault());case e.TAB:if(!b.menu.active)return;b.menu.select(c);break;case e.ESCAPE:b.element.val(b.term),b.close(c);break;default:clearTimeout(b.searching),b.searching=setTimeout(function(){b.term!=b.element.val()&&(b.selectedItem=null,b.search(null,c))},b.options.delay)}}}).bind("keypress.autocomplete",function(a){d&&(d=!1,a.preventDefault())}).bind("focus.autocomplete",function(){b.options.disabled||(b.selectedItem=null,b.previous=b.element.val())}).bind("blur.autocomplete",function(a){b.options.disabled||(clearTimeout(b.searching),b.closing=setTimeout(function(){b.close(a),b._change(a)},150))}),this._initSource(),this.response=function(){return b._response.apply(b,arguments)},this.menu=a("<ul></ul>").addClass("ui-autocomplete").appendTo(a(this.options.appendTo||"body",c)[0]).mousedown(function(c){var d=b.menu.element[0];a(c.target).closest(".ui-menu-item").length||setTimeout(function(){a(document).one("mousedown",function(c){c.target!==b.element[0]&&c.target!==d&&!a.ui.contains(d,c.target)&&b.close()})},1),setTimeout(function(){clearTimeout(b.closing)},13)}).menu({focus:function(a,c){var d=c.item.data("item.autocomplete");!1!==b._trigger("focus",a,{item:d})&&/^key/.test(a.originalEvent.type)&&b.element.val(d.value)},selected:function(a,d){var e=d.item.data("item.autocomplete"),f=b.previous;b.element[0]!==c.activeElement&&(b.element.focus(),b.previous=f,setTimeout(function(){b.previous=f,b.selectedItem=e},1)),!1!==b._trigger("select",a,{item:e})&&b.element.val(e.value),b.term=b.element.val(),b.close(a),b.selectedItem=e},blur:function(a,c){b.menu.element.is(":visible")&&b.element.val()!==b.term&&b.element.val(b.term)}}).zIndex(this.element.zIndex()+1).css({top:0,left:0}).hide().data("menu"),a.fn.bgiframe&&this.menu.element.bgiframe(),b.beforeunloadHandler=function(){b.element.removeAttr("autocomplete")},a(window).bind("beforeunload",b.beforeunloadHandler)},destroy:function(){this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete").removeAttr("role").removeAttr("aria-autocomplete").removeAttr("aria-haspopup"),this.menu.element.remove(),a(window).unbind("beforeunload",this.beforeunloadHandler),a.Widget.prototype.destroy.call(this)},_setOption:function(b,c){a.Widget.prototype._setOption.apply(this,arguments),b==="source"&&this._initSource(),b==="appendTo"&&this.menu.element.appendTo(a(c||"body",this.element[0].ownerDocument)[0]),b==="disabled"&&c&&this.xhr&&this.xhr.abort()},_initSource:function(){var b=this,d,e;a.isArray(this.options.source)?(d=this.options.source,this.source=function(b,c){c(a.ui.autocomplete.filter(d,b.term))}):typeof this.options.source=="string"?(e=this.options.source,this.source=function(d,f){b.xhr&&b.xhr.abort(),b.xhr=a.ajax({url:e,data:d,dataType:"json",context:{autocompleteRequest:++c},success:function(a,b){this.autocompleteRequest===c&&f(a)},error:function(){this.autocompleteRequest===c&&f([])}})}):this.source=this.options.source},search:function(a,b){a=a!=null?a:this.element.val(),this.term=this.element.val();if(a.length<this.options.minLength)return this.close(b);clearTimeout(this.closing);if(this._trigger("search",b)!==!1)return this._search(a)},_search:function(a){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.source({term:a},this.response)},_response:function(a){!this.options.disabled&&a&&a.length?(a=this._normalize(a),this._suggest(a),this._trigger("open")):this.close(),this.pending--,this.pending||this.element.removeClass("ui-autocomplete-loading")},close:function(a){clearTimeout(this.closing),this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.deactivate(),this._trigger("close",a))},_change:function(a){this.previous!==this.element.val()&&this._trigger("change",a,{item:this.selectedItem})},_normalize:function(b){if(b.length&&b[0].label&&b[0].value)return b;return a.map(b,function(b){if(typeof b=="string")return{label:b,value:b};return a.extend({label:b.label||b.value,value:b.value||b.label},b)})},_suggest:function(b){var c=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(c,b),this.menu.deactivate(),this.menu.refresh(),c.show(),this._resizeMenu(),c.position(a.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next(new a.Event("mouseover"))},_resizeMenu:function(){var a=this.menu.element;a.outerWidth(Math.max(a.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(b,c){var d=this;a.each(c,function(a,c){d._renderItem(b,c)})},_renderItem:function(b,c){return a("<li></li>").data("item.autocomplete",c).append(a("<a></a>").text(c.label)).appendTo(b)},_move:function(a,b){if(!this.menu.element.is(":visible"))this.search(null,b);else{if(this.menu.first()&&/^previous/.test(a)||this.menu.last()&&/^next/.test(a)){this.element.val(this.term),this.menu.deactivate();return}this.menu[a](b)}},widget:function(){return this.menu.element}}),a.extend(a.ui.autocomplete,{escapeRegex:function(a){return a.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},filter:function(b,c){var d=new RegExp(a.ui.autocomplete.escapeRegex(c),"i");return a.grep(b,function(a){return d.test(a.label||a.value||a)})}})})(jQuery),function(a){a.widget("ui.menu",{_create:function(){var b=this;this.element.addClass("ui-menu ui-widget ui-widget-content ui-corner-all").attr({role:"listbox","aria-activedescendant":"ui-active-menuitem"}).click(function(c){!a(c.target).closest(".ui-menu-item a").length||(c.preventDefault(),b.select(c))}),this.refresh()},refresh:function(){var b=this,c=this.element.children("li:not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","menuitem");c.children("a").addClass("ui-corner-all").attr("tabindex",-1).mouseenter(function(c){b.activate(c,a(this).parent())}).mouseleave(function(){b.deactivate()})},activate:function(a,b){this.deactivate();if(this.hasScroll()){var c=b.offset().top-this.element.offset().top,d=this.element.scrollTop(),e=this.element.height();c<0?this.element.scrollTop(d+c):c>=e&&this.element.scrollTop(d+c-e+b.height())}this.active=b.eq(0).children("a").addClass("ui-state-hover").attr("id","ui-active-menuitem").end(),this._trigger("focus",a,{item:b})},deactivate:function(){!this.active||(this.active.children("a").removeClass("ui-state-hover").removeAttr("id"),this._trigger("blur"),this.active=null)},next:function(a){this.move("next",".ui-menu-item:first",a)},previous:function(a){this.move("prev",".ui-menu-item:last",a)},first:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},last:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},move:function(a,b,c){if(!this.active)this.activate(c,this.element.children(b));else{var d=this.active[a+"All"](".ui-menu-item").eq(0);d.length?this.activate(c,d):this.activate(c,this.element.children(b))}},nextPage:function(b){if(this.hasScroll()){if(!this.active||this.last()){this.activate(b,this.element.children(".ui-menu-item:first"));return}var c=this.active.offset().top,d=this.element.height(),e=this.element.children(".ui-menu-item").filter(function(){var b=a(this).offset().top-c-d+a(this).height();return b<10&&b>-10});e.length||(e=this.element.children(".ui-menu-item:last")),this.activate(b,e)}else this.activate(b,this.element.children(".ui-menu-item").filter(!this.active||this.last()?":first":":last"))},previousPage:function(b){if(this.hasScroll()){if(!this.active||this.first()){this.activate(b,this.element.children(".ui-menu-item:last"));return}var c=this.active.offset().top,d=this.element.height();result=this.element.children(".ui-menu-item").filter(function(){var b=a(this).offset().top-c+d-a(this).height();return b<10&&b>-10}),result.length||(result=this.element.children(".ui-menu-item:first")),this.activate(b,result)}else this.activate(b,this.element.children(".ui-menu-item").filter(!this.active||this.first()?":last":":first"))},hasScroll:function(){return this.element.height()<this.element[a.fn.prop?"prop":"attr"]("scrollHeight")},select:function(a){this._trigger("selected",a,{item:this.active})}})}(jQuery);(function(a,b){var c,d,e,f,g="ui-button ui-widget ui-state-default ui-corner-all",h="ui-state-hover ui-state-active ",i="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",j=function(){var b=a(this).find(":ui-button");setTimeout(function(){b.button("refresh")},1)},k=function(b){var c=b.name,d=b.form,e=a([]);c&&(d?e=a(d).find("[name='"+c+"']"):e=a("[name='"+c+"']",b.ownerDocument).filter(function(){return!this.form}));return e};a.widget("ui.button",{options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset.button").bind("reset.button",j),typeof this.options.disabled!="boolean"?this.options.disabled=!!this.element.propAttr("disabled"):this.element.propAttr("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var b=this,h=this.options,i=this.type==="checkbox"||this.type==="radio",l="ui-state-hover"+(i?"":" ui-state-active"),m="ui-state-focus";h.label===null&&(h.label=this.buttonElement.html()),this.buttonElement.addClass(g).attr("role","button").bind("mouseenter.button",function(){h.disabled||(a(this).addClass("ui-state-hover"),this===c&&a(this).addClass("ui-state-active"))}).bind("mouseleave.button",function(){h.disabled||a(this).removeClass(l)}).bind("click.button",function(a){h.disabled&&(a.preventDefault(),a.stopImmediatePropagation())}),this.element.bind("focus.button",function(){b.buttonElement.addClass(m)}).bind("blur.button",function(){b.buttonElement.removeClass(m)}),i&&(this.element.bind("change.button",function(){f||b.refresh()}),this.buttonElement.bind("mousedown.button",function(a){h.disabled||(f=!1,d=a.pageX,e=a.pageY)}).bind("mouseup.button",function(a){!h.disabled&&(d!==a.pageX||e!==a.pageY)&&(f=!0)})),this.type==="checkbox"?this.buttonElement.bind("click.button",function(){if(h.disabled||f)return!1;a(this).toggleClass("ui-state-active"),b.buttonElement.attr("aria-pressed",b.element[0].checked)}):this.type==="radio"?this.buttonElement.bind("click.button",function(){if(h.disabled||f)return!1;a(this).addClass("ui-state-active"),b.buttonElement.attr("aria-pressed","true");var c=b.element[0];k(c).not(c).map(function(){return a(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown.button",function(){if(h.disabled)return!1;a(this).addClass("ui-state-active"),c=this,a(document).one("mouseup",function(){c=null})}).bind("mouseup.button",function(){if(h.disabled)return!1;a(this).removeClass("ui-state-active")}).bind("keydown.button",function(b){if(h.disabled)return!1;(b.keyCode==a.ui.keyCode.SPACE||b.keyCode==a.ui.keyCode.ENTER)&&a(this).addClass("ui-state-active")}).bind("keyup.button",function(){a(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(b){b.keyCode===a.ui.keyCode.SPACE&&a(this).click()})),this._setOption("disabled",h.disabled),this._resetButton()},_determineButtonType:function(){this.element.is(":checkbox")?this.type="checkbox":this.element.is(":radio")?this.type="radio":this.element.is("input")?this.type="input":this.type="button";if(this.type==="checkbox"||this.type==="radio"){var a=this.element.parents().filter(":last"),b="label[for='"+this.element.attr("id")+"']";this.buttonElement=a.find(b),this.buttonElement.length||(a=a.length?a.siblings():this.element.siblings(),this.buttonElement=a.filter(b),this.buttonElement.length||(this.buttonElement=a.find(b))),this.element.addClass("ui-helper-hidden-accessible");var c=this.element.is(":checked");c&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.attr("aria-pressed",c)}else this.buttonElement=this.element},widget:function(){return this.buttonElement},destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(g+" "+h+" "+i).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title"),a.Widget.prototype.destroy.call(this)},_setOption:function(b,c){a.Widget.prototype._setOption.apply(this,arguments);b==="disabled"?c?this.element.propAttr("disabled",!0):this.element.propAttr("disabled",!1):this._resetButton()},refresh:function(){var b=this.element.is(":disabled");b!==this.options.disabled&&this._setOption("disabled",b),this.type==="radio"?k(this.element[0]).each(function(){a(this).is(":checked")?a(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):a(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):this.type==="checkbox"&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if(this.type==="input")this.options.label&&this.element.val(this.options.label);else{var b=this.buttonElement.removeClass(i),c=a("<span></span>",this.element[0].ownerDocument).addClass("ui-button-text").html(this.options.label).appendTo(b.empty()).text(),d=this.options.icons,e=d.primary&&d.secondary,f=[];d.primary||d.secondary?(this.options.text&&f.push("ui-button-text-icon"+(e?"s":d.primary?"-primary":"-secondary")),d.primary&&b.prepend("<span class='ui-button-icon-primary ui-icon "+d.primary+"'></span>"),d.secondary&&b.append("<span class='ui-button-icon-secondary ui-icon "+d.secondary+"'></span>"),this.options.text||(f.push(e?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||b.attr("title",c))):f.push("ui-button-text-only"),b.addClass(f.join(" "))}}}),a.widget("ui.buttonset",{options:{items:":button, :submit, :reset, :checkbox, :radio, a, :data(button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(b,c){b==="disabled"&&this.buttons.button("option",b,c),a.Widget.prototype._setOption.apply(this,arguments)},refresh:function(){var b=this.element.css("direction")==="rtl";this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return a(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(b?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(b?"ui-corner-left":"ui-corner-right").end().end()},destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return a(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy"),a.Widget.prototype.destroy.call(this)}})})(jQuery);(function(a,b){var c="ui-dialog ui-widget ui-widget-content ui-corner-all ",d={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},e={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},f=a.attrFn||{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0,click:!0};a.widget("ui.dialog",{options:{autoOpen:!0,buttons:{},closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:!1,maxWidth:!1,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",collision:"fit",using:function(b){var c=a(this).css(b).offset().top;c<0&&a(this).css("top",b.top-c)}},resizable:!0,show:null,stack:!0,title:"",width:300,zIndex:1e3},_create:function(){this.originalTitle=this.element.attr("title"),typeof this.originalTitle!="string"&&(this.originalTitle=""),this.options.title=this.options.title||this.originalTitle;var b=this,d=b.options,e=d.title||"&#160;",f=a.ui.dialog.getTitleId(b.element),g=(b.uiDialog=a("<div></div>")).appendTo(document.body).hide().addClass(c+d.dialogClass).css({zIndex:d.zIndex}).attr("tabIndex",-1).css("outline",0).keydown(function(c){d.closeOnEscape&&!c.isDefaultPrevented()&&c.keyCode&&c.keyCode===a.ui.keyCode.ESCAPE&&(b.close(c),c.preventDefault())}).attr({role:"dialog","aria-labelledby":f}).mousedown(function(a){b.moveToTop(!1,a)}),h=b.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(g),i=(b.uiDialogTitlebar=a("<div></div>")).addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(g),j=a('<a href="#"></a>').addClass("ui-dialog-titlebar-close ui-corner-all").attr("role","button").hover(function(){j.addClass("ui-state-hover")},function(){j.removeClass("ui-state-hover")}).focus(function(){j.addClass("ui-state-focus")}).blur(function(){j.removeClass("ui-state-focus")}).click(function(a){b.close(a);return!1}).appendTo(i),k=(b.uiDialogTitlebarCloseText=a("<span></span>")).addClass("ui-icon ui-icon-closethick").text(d.closeText).appendTo(j),l=a("<span></span>").addClass("ui-dialog-title").attr("id",f).html(e).prependTo(i);a.isFunction(d.beforeclose)&&!a.isFunction(d.beforeClose)&&(d.beforeClose=d.beforeclose),i.find("*").add(i).disableSelection(),d.draggable&&a.fn.draggable&&b._makeDraggable(),d.resizable&&a.fn.resizable&&b._makeResizable(),b._createButtons(d.buttons),b._isOpen=!1,a.fn.bgiframe&&g.bgiframe()},_init:function(){this.options.autoOpen&&this.open()},destroy:function(){var a=this;a.overlay&&a.overlay.destroy(),a.uiDialog.hide(),a.element.unbind(".dialog").removeData("dialog").removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body"),a.uiDialog.remove(),a.originalTitle&&a.element.attr("title",a.originalTitle);return a},widget:function(){return this.uiDialog},close:function(b){var c=this,d,e;if(!1!==c._trigger("beforeClose",b)){c.overlay&&c.overlay.destroy(),c.uiDialog.unbind("keypress.ui-dialog"),c._isOpen=!1,c.options.hide?c.uiDialog.hide(c.options.hide,function(){c._trigger("close",b)}):(c.uiDialog.hide(),c._trigger("close",b)),a.ui.dialog.overlay.resize(),c.options.modal&&(d=0,a(".ui-dialog").each(function(){this!==c.uiDialog[0]&&(e=a(this).css("z-index"),isNaN(e)||(d=Math.max(d,e)))}),a.ui.dialog.maxZ=d);return c}},isOpen:function(){return this._isOpen},moveToTop:function(b,c){var d=this,e=d.options,f;if(e.modal&&!b||!e.stack&&!e.modal)return d._trigger("focus",c);e.zIndex>a.ui.dialog.maxZ&&(a.ui.dialog.maxZ=e.zIndex),d.overlay&&(a.ui.dialog.maxZ+=1,d.overlay.$el.css("z-index",a.ui.dialog.overlay.maxZ=a.ui.dialog.maxZ)),f={scrollTop:d.element.scrollTop(),scrollLeft:d.element.scrollLeft()},a.ui.dialog.maxZ+=1,d.uiDialog.css("z-index",a.ui.dialog.maxZ),d.element.attr(f),d._trigger("focus",c);return d},open:function(){if(!this._isOpen){var b=this,c=b.options,d=b.uiDialog;b.overlay=c.modal?new a.ui.dialog.overlay(b):null,b._size(),b._position(c.position),d.show(c.show),b.moveToTop(!0),c.modal&&d.bind("keydown.ui-dialog",function(b){if(b.keyCode===a.ui.keyCode.TAB){var c=a(":tabbable",this),d=c.filter(":first"),e=c.filter(":last");if(b.target===e[0]&&!b.shiftKey){d.focus(1);return!1}if(b.target===d[0]&&b.shiftKey){e.focus(1);return!1}}}),a(b.element.find(":tabbable").get().concat(d.find(".ui-dialog-buttonpane :tabbable").get().concat(d.get()))).eq(0).focus(),b._isOpen=!0,b._trigger("open");return b}},_createButtons:function(b){var c=this,d=!1,e=a("<div></div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),g=a("<div></div>").addClass("ui-dialog-buttonset").appendTo(e);c.uiDialog.find(".ui-dialog-buttonpane").remove(),typeof b=="object"&&b!==null&&a.each(b,function(){return!(d=!0)}),d&&(a.each(b,function(b,d){d=a.isFunction(d)?{click:d,text:b}:d;var e=a('<button type="button"></button>').click(function(){d.click.apply(c.element[0],arguments)}).appendTo(g);a.each(d,function(a,b){a!=="click"&&(a in f?e[a](b):e.attr(a,b))}),a.fn.button&&e.button()}),e.appendTo(c.uiDialog))},_makeDraggable:function(){function f(a){return{position:a.position,offset:a.offset}}var b=this,c=b.options,d=a(document),e;b.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(d,g){e=c.height==="auto"?"auto":a(this).height(),a(this).height(a(this).height()).addClass("ui-dialog-dragging"),b._trigger("dragStart",d,f(g))},drag:function(a,c){b._trigger("drag",a,f(c))},stop:function(g,h){c.position=[h.position.left-d.scrollLeft(),h.position.top-d.scrollTop()],a(this).removeClass("ui-dialog-dragging").height(e),b._trigger("dragStop",g,f(h)),a.ui.dialog.overlay.resize()}})},_makeResizable:function(c){function h(a){return{originalPosition:a.originalPosition,originalSize:a.originalSize,position:a.position,size:a.size}}c=c===b?this.options.resizable:c;var d=this,e=d.options,f=d.uiDialog.css("position"),g=typeof c=="string"?c:"n,e,s,w,se,sw,ne,nw";d.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:d.element,maxWidth:e.maxWidth,maxHeight:e.maxHeight,minWidth:e.minWidth,minHeight:d._minHeight(),handles:g,start:function(b,c){a(this).addClass("ui-dialog-resizing"),d._trigger("resizeStart",b,h(c))},resize:function(a,b){d._trigger("resize",a,h(b))},stop:function(b,c){a(this).removeClass("ui-dialog-resizing"),e.height=a(this).height(),e.width=a(this).width(),d._trigger("resizeStop",b,h(c)),a.ui.dialog.overlay.resize()}}).css("position",f).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},_minHeight:function(){var a=this.options;return a.height==="auto"?a.minHeight:Math.min(a.minHeight,a.height)},_position:function(b){var c=[],d=[0,0],e;if(b){if(typeof b=="string"||typeof b=="object"&&"0"in b)c=b.split?b.split(" "):[b[0],b[1]],c.length===1&&(c[1]=c[0]),a.each(["left","top"],function(a,b){+c[a]===c[a]&&(d[a]=c[a],c[a]=b)}),b={my:c.join(" "),at:c.join(" "),offset:d.join(" ")};b=a.extend({},a.ui.dialog.prototype.options.position,b)}else b=a.ui.dialog.prototype.options.position;e=this.uiDialog.is(":visible"),e||this.uiDialog.show(),this.uiDialog.css({top:0,left:0}).position(a.extend({of:window},b)),e||this.uiDialog.hide()},_setOptions:function(b){var c=this,f={},g=!1;a.each(b,function(a,b){c._setOption(a,b),a in d&&(g=!0),a in e&&(f[a]=b)}),g&&this._size(),this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option",f)},_setOption:function(b,d){var e=this,f=e.uiDialog;switch(b){case"beforeclose":b="beforeClose";break;case"buttons":e._createButtons(d);break;case"closeText":e.uiDialogTitlebarCloseText.text(""+d);break;case"dialogClass":f.removeClass(e.options.dialogClass).addClass(c+d);break;case"disabled":d?f.addClass("ui-dialog-disabled"):f.removeClass("ui-dialog-disabled");break;case"draggable":var g=f.is(":data(draggable)");g&&!d&&f.draggable("destroy"),!g&&d&&e._makeDraggable();break;case"position":e._position(d);break;case"resizable":var h=f.is(":data(resizable)");h&&!d&&f.resizable("destroy"),h&&typeof d=="string"&&f.resizable("option","handles",d),!h&&d!==!1&&e._makeResizable(d);break;case"title":a(".ui-dialog-title",e.uiDialogTitlebar).html(""+(d||"&#160;"))}a.Widget.prototype._setOption.apply(e,arguments)},_size:function(){var b=this.options,c,d,e=this.uiDialog.is(":visible");this.element.show().css({width:"auto",minHeight:0,height:0}),b.minWidth>b.width&&(b.width=b.minWidth),c=this.uiDialog.css({height:"auto",width:b.width}).height(),d=Math.max(0,b.minHeight-c);if(b.height==="auto")if(a.support.minHeight)this.element.css({minHeight:d,height:"auto"});else{this.uiDialog.show();var f=this.element.css("height","auto").height();e||this.uiDialog.hide(),this.element.height(Math.max(f,d))}else this.element.height(Math.max(b.height-c,0));this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())}}),a.extend(a.ui.dialog,{version:"1.8.18",uuid:0,maxZ:0,getTitleId:function(a){var b=a.attr("id");b||(this.uuid+=1,b=this.uuid);return"ui-dialog-title-"+b},overlay:function(b){this.$el=a.ui.dialog.overlay.create(b)}}),a.extend(a.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:a.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),function(a){return a+".dialog-overlay"}).join(" "),create:function(b){this.instances.length===0&&(setTimeout(function(){a.ui.dialog.overlay.instances.length&&a(document).bind(a.ui.dialog.overlay.events,function(b){if(a(b.target).zIndex()<a.ui.dialog.overlay.maxZ)return!1})},1),a(document).bind("keydown.dialog-overlay",function(c){b.options.closeOnEscape&&!c.isDefaultPrevented()&&c.keyCode&&c.keyCode===a.ui.keyCode.ESCAPE&&(b.close(c),c.preventDefault())}),a(window).bind("resize.dialog-overlay",a.ui.dialog.overlay.resize));var c=(this.oldInstances.pop()||a("<div></div>").addClass("ui-widget-overlay")).appendTo(document.body).css({width:this.width(),height:this.height()});a.fn.bgiframe&&c.bgiframe(),this.instances.push(c);return c},destroy:function(b){var c=a.inArray(b,this.instances);c!=-1&&this.oldInstances.push(this.instances.splice(c,1)[0]),this.instances.length===0&&a([document,window]).unbind(".dialog-overlay"),b.remove();var d=0;a.each(this.instances,function(){d=Math.max(d,this.css("z-index"))}),this.maxZ=d},height:function(){var b,c;if(a.browser.msie&&a.browser.version<7){b=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),c=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight);return b<c?a(window).height()+"px":b+"px"}return a(document).height()+"px"},width:function(){var b,c;if(a.browser.msie){b=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),c=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth);return b<c?a(window).width()+"px":b+"px"}return a(document).width()+"px"},resize:function(){var b=a([]);a.each(a.ui.dialog.overlay.instances,function(){b=b.add(this)}),b.css({width:0,height:0}).css({width:a.ui.dialog.overlay.width(),height:a.ui.dialog.overlay.height()})}}),a.extend(a.ui.dialog.overlay.prototype,{destroy:function(){a.ui.dialog.overlay.destroy(this.$el)}})})(jQuery);(function(a,b){var c=5;a.widget("ui.slider",a.ui.mouse,{widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null},_create:function(){var b=this,d=this.options,e=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),f="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",g=d.values&&d.values.length||1,h=[];this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget"+" ui-widget-content"+" ui-corner-all"+(d.disabled?" ui-slider-disabled ui-disabled":"")),this.range=a([]),d.range&&(d.range===!0&&(d.values||(d.values=[this._valueMin(),this._valueMin()]),d.values.length&&d.values.length!==2&&(d.values=[d.values[0],d.values[0]])),this.range=a("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+(d.range==="min"||d.range==="max"?" ui-slider-range-"+d.range:"")));for(var i=e.length;i<g;i+=1)h.push(f);this.handles=e.add(a(h.join("")).appendTo(b.element)),this.handle=this.handles.eq(0),this.handles.add(this.range).filter("a").click(function(a){a.preventDefault()}).hover(function(){d.disabled||a(this).addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover")}).focus(function(){d.disabled?a(this).blur():(a(".ui-slider .ui-state-focus").removeClass("ui-state-focus"),a(this).addClass("ui-state-focus"))}).blur(function(){a(this).removeClass("ui-state-focus")}),this.handles.each(function(b){a(this).data("index.ui-slider-handle",b)}),this.handles.keydown(function(d){var e=a(this).data("index.ui-slider-handle"),f,g,h,i;if(!b.options.disabled){switch(d.keyCode){case a.ui.keyCode.HOME:case a.ui.keyCode.END:case a.ui.keyCode.PAGE_UP:case a.ui.keyCode.PAGE_DOWN:case a.ui.keyCode.UP:case a.ui.keyCode.RIGHT:case a.ui.keyCode.DOWN:case a.ui.keyCode.LEFT:d.preventDefault();if(!b._keySliding){b._keySliding=!0,a(this).addClass("ui-state-active"),f=b._start(d,e);if(f===!1)return}}i=b.options.step,b.options.values&&b.options.values.length?g=h=b.values(e):g=h=b.value();switch(d.keyCode){case a.ui.keyCode.HOME:h=b._valueMin();break;case a.ui.keyCode.END:h=b._valueMax();break;case a.ui.keyCode.PAGE_UP:h=b._trimAlignValue(g+(b._valueMax()-b._valueMin())/c);break;case a.ui.keyCode.PAGE_DOWN:h=b._trimAlignValue(g-(b._valueMax()-b._valueMin())/c);break;case a.ui.keyCode.UP:case a.ui.keyCode.RIGHT:if(g===b._valueMax())return;h=b._trimAlignValue(g+i);break;case a.ui.keyCode.DOWN:case a.ui.keyCode.LEFT:if(g===b._valueMin())return;h=b._trimAlignValue(g-i)}b._slide(d,e,h)}}).keyup(function(c){var d=a(this).data("index.ui-slider-handle");b._keySliding&&(b._keySliding=!1,b._stop(c,d),b._change(c,d),a(this).removeClass("ui-state-active"))}),this._refreshValue(),this._animateOff=!1},destroy:function(){this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all").removeData("slider").unbind(".slider"),this._mouseDestroy();return this},_mouseCapture:function(b){var c=this.options,d,e,f,g,h,i,j,k,l;if(c.disabled)return!1;this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),d={x:b.pageX,y:b.pageY},e=this._normValueFromMouse(d),f=this._valueMax()-this._valueMin()+1,h=this,this.handles.each(function(b){var c=Math.abs(e-h.values(b));f>c&&(f=c,g=a(this),i=b)}),c.range===!0&&this.values(1)===c.min&&(i+=1,g=a(this.handles[i])),j=this._start(b,i);if(j===!1)return!1;this._mouseSliding=!0,h._handleIndex=i,g.addClass("ui-state-active").focus(),k=g.offset(),l=!a(b.target).parents().andSelf().is(".ui-slider-handle"),this._clickOffset=l?{left:0,top:0}:{left:b.pageX-k.left-g.width()/2,top:b.pageY-k.top-g.height()/2-(parseInt(g.css("borderTopWidth"),10)||0)-(parseInt(g.css("borderBottomWidth"),10)||0)+(parseInt(g.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(b,i,e),this._animateOff=!0;return!0},_mouseStart:function(a){return!0},_mouseDrag:function(a){var b={x:a.pageX,y:a.pageY},c=this._normValueFromMouse(b);this._slide(a,this._handleIndex,c);return!1},_mouseStop:function(a){this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(a,this._handleIndex),this._change(a,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1;return!1},_detectOrientation:function(){this.orientation=this.options.orientation==="vertical"?"vertical":"horizontal"},_normValueFromMouse:function(a){var b,c,d,e,f;this.orientation==="horizontal"?(b=this.elementSize.width,c=a.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(b=this.elementSize.height,c=a.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),d=c/b,d>1&&(d=1),d<0&&(d=0),this.orientation==="vertical"&&(d=1-d),e=this._valueMax()-this._valueMin(),f=this._valueMin()+d*e;return this._trimAlignValue(f)},_start:function(a,b){var c={handle:this.handles[b],value:this.value()};this.options.values&&this.options.values.length&&(c.value=this.values(b),c.values=this.values());return this._trigger("start",a,c)},_slide:function(a,b,c){var d,e,f;this.options.values&&this.options.values.length?(d=this.values(b?0:1),this.options.values.length===2&&this.options.range===!0&&(b===0&&c>d||b===1&&c<d)&&(c=d),c!==this.values(b)&&(e=this.values(),e[b]=c,f=this._trigger("slide",a,{handle:this.handles[b],value:c,values:e}),d=this.values(b?0:1),f!==!1&&this.values(b,c,!0))):c!==this.value()&&(f=this._trigger("slide",a,{handle:this.handles[b],value:c}),f!==!1&&this.value(c))},_stop:function(a,b){var c={handle:this.handles[b],value:this.value()};this.options.values&&this.options.values.length&&(c.value=this.values(b),c.values=this.values()),this._trigger("stop",a,c)},_change:function(a,b){if(!this._keySliding&&!this._mouseSliding){var c={handle:this.handles[b],value:this.value()};this.options.values&&this.options.values.length&&(c.value=this.values(b),c.values=this.values()),this._trigger("change",a,c)}},value:function(a){if(arguments.length)this.options.value=this._trimAlignValue(a),this._refreshValue(),this._change(null,0);else return this._value()},values:function(b,c){var d,e,f;if(arguments.length>1)this.options.values[b]=this._trimAlignValue(c),this._refreshValue(),this._change(null,b);else{if(!arguments.length)return this._values();if(!a.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(b):this.value();d=this.options.values,e=arguments[0];for(f=0;f<d.length;f+=1)d[f]=this._trimAlignValue(e[f]),this._change(null,f);this._refreshValue()}},_setOption:function(b,c){var d,e=0;a.isArray(this.options.values)&&(e=this.options.values.length),a.Widget.prototype._setOption.apply(this,arguments);switch(b){case"disabled":c?(this.handles.filter(".ui-state-focus").blur(),this.handles.removeClass("ui-state-hover"),this.handles.propAttr("disabled",!0),this.element.addClass("ui-disabled")):(this.handles.propAttr("disabled",!1),this.element.removeClass("ui-disabled"));break;case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":this._animateOff=!0,this._refreshValue();for(d=0;d<e;d+=1)this._change(null,d);this._animateOff=!1}},_value:function(){var a=this.options.value;a=this._trimAlignValue(a);return a},_values:function(a){var b,c,d;if(arguments.length){b=this.options.values[a],b=this._trimAlignValue(b);return b}c=this.options.values.slice();for(d=0;d<c.length;d+=1)c[d]=this._trimAlignValue(c[d]);return c},_trimAlignValue:function(a){if(a<=this._valueMin())return this._valueMin();if(a>=this._valueMax())return this._valueMax();var b=this.options.step>0?this.options.step:1,c=(a-this._valueMin())%b,d=a-c;Math.abs(c)*2>=b&&(d+=c>0?b:-b);return parseFloat(d.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var b=this.options.range,c=this.options,d=this,e=this._animateOff?!1:c.animate,f,g={},h,i,j,k;this.options.values&&this.options.values.length?this.handles.each(function(b,i){f=(d.values(b)-d._valueMin())/(d._valueMax()-d._valueMin())*100,g[d.orientation==="horizontal"?"left":"bottom"]=f+"%",a(this).stop(1,1)[e?"animate":"css"](g,c.animate),d.options.range===!0&&(d.orientation==="horizontal"?(b===0&&d.range.stop(1,1)[e?"animate":"css"]({left:f+"%"},c.animate),b===1&&d.range[e?"animate":"css"]({width:f-h+"%"},{queue:!1,duration:c.animate})):(b===0&&d.range.stop(1,1)[e?"animate":"css"]({bottom:f+"%"},c.animate),b===1&&d.range[e?"animate":"css"]({height:f-h+"%"},{queue:!1,duration:c.animate}))),h=f}):(i=this.value(),j=this._valueMin(),k=this._valueMax(),f=k!==j?(i-j)/(k-j)*100:0,g[d.orientation==="horizontal"?"left":"bottom"]=f+"%",this.handle.stop(1,1)[e?"animate":"css"](g,c.animate),b==="min"&&this.orientation==="horizontal"&&this.range.stop(1,1)[e?"animate":"css"]({width:f+"%"},c.animate),b==="max"&&this.orientation==="horizontal"&&this.range[e?"animate":"css"]({width:100-f+"%"},{queue:!1,duration:c.animate}),b==="min"&&this.orientation==="vertical"&&this.range.stop(1,1)[e?"animate":"css"]({height:f+"%"},c.animate),b==="max"&&this.orientation==="vertical"&&this.range[e?"animate":"css"]({height:100-f+"%"},{queue:!1,duration:c.animate}))}}),a.extend(a.ui.slider,{version:"1.8.18"})})(jQuery);(function(a,b){function f(){return++d}function e(){return++c}var c=0,d=0;a.widget("ui.tabs",{options:{add:null,ajaxOptions:null,cache:!1,cookie:null,collapsible:!1,disable:null,disabled:[],enable:null,event:"click",fx:null,idPrefix:"ui-tabs-",load:null,panelTemplate:"<div></div>",remove:null,select:null,show:null,spinner:"<em>Loading&#8230;</em>",tabTemplate:"<li><a href='#{href}'><span>#{label}</span></a></li>"},_create:function(){this._tabify(!0)},_setOption:function(a,b){if(a=="selected"){if(this.options.collapsible&&b==this.options.selected)return;this.select(b)}else this.options[a]=b,this._tabify()},_tabId:function(a){return a.title&&a.title.replace(/\s/g,"_").replace(/[^\w\u00c0-\uFFFF-]/g,"")||this.options.idPrefix+e()},_sanitizeSelector:function(a){return a.replace(/:/g,"\\:")},_cookie:function(){var b=this.cookie||(this.cookie=this.options.cookie.name||"ui-tabs-"+f());return a.cookie.apply(null,[b].concat(a.makeArray(arguments)))},_ui:function(a,b){return{tab:a,panel:b,index:this.anchors.index(a)}},_cleanup:function(){this.lis.filter(".ui-state-processing").removeClass("ui-state-processing").find("span:data(label.tabs)").each(function(){var b=a(this);b.html(b.data("label.tabs")).removeData("label.tabs")})},_tabify:function(c){function m(b,c){b.css("display",""),!a.support.opacity&&c.opacity&&b[0].style.removeAttribute("filter")}var d=this,e=this.options,f=/^#.+/;this.list=this.element.find("ol,ul").eq(0),this.lis=a(" > li:has(a[href])",this.list),this.anchors=this.lis.map(function(){return a("a",this)[0]}),this.panels=a([]),this.anchors.each(function(b,c){var g=a(c).attr("href"),h=g.split("#")[0],i;h&&(h===location.toString().split("#")[0]||(i=a("base")[0])&&h===i.href)&&(g=c.hash,c.href=g);if(f.test(g))d.panels=d.panels.add(d.element.find(d._sanitizeSelector(g)));else if(g&&g!=="#"){a.data(c,"href.tabs",g),a.data(c,"load.tabs",g.replace(/#.*$/,""));var j=d._tabId(c);c.href="#"+j;var k=d.element.find("#"+j);k.length||(k=a(e.panelTemplate).attr("id",j).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").insertAfter(d.panels[b-1]||d.list),k.data("destroy.tabs",!0)),d.panels=d.panels.add(k)}else e.disabled.push(b)}),c?(this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all"),this.list.addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all"),this.lis.addClass("ui-state-default ui-corner-top"),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom"),e.selected===b?(location.hash&&this.anchors.each(function(a,b){if(b.hash==location.hash){e.selected=a;return!1}}),typeof e.selected!="number"&&e.cookie&&(e.selected=parseInt(d._cookie(),10)),typeof e.selected!="number"&&this.lis.filter(".ui-tabs-selected").length&&(e.selected=this.lis.index(this.lis.filter(".ui-tabs-selected"))),e.selected=e.selected||(this.lis.length?0:-1)):e.selected===null&&(e.selected=-1),e.selected=e.selected>=0&&this.anchors[e.selected]||e.selected<0?e.selected:0,e.disabled=a.unique(e.disabled.concat(a.map(this.lis.filter(".ui-state-disabled"),function(a,b){return d.lis.index(a)}))).sort(),a.inArray(e.selected,e.disabled)!=-1&&e.disabled.splice(a.inArray(e.selected,e.disabled),1),this.panels.addClass("ui-tabs-hide"),this.lis.removeClass("ui-tabs-selected ui-state-active"),e.selected>=0&&this.anchors.length&&(d.element.find(d._sanitizeSelector(d.anchors[e.selected].hash)).removeClass("ui-tabs-hide"),this.lis.eq(e.selected).addClass("ui-tabs-selected ui-state-active"),d.element.queue("tabs",function(){d._trigger("show",null,d._ui(d.anchors[e.selected],d.element.find(d._sanitizeSelector(d.anchors[e.selected].hash))[0]))}),this.load(e.selected)),a(window).bind("unload",function(){d.lis.add(d.anchors).unbind(".tabs"),d.lis=d.anchors=d.panels=null})):e.selected=this.lis.index(this.lis.filter(".ui-tabs-selected")),this.element[e.collapsible?"addClass":"removeClass"]("ui-tabs-collapsible"),e.cookie&&this._cookie(e.selected,e.cookie);for(var g=0,h;h=this.lis[g];g++)a(h)[a.inArray(g,e.disabled)!=-1&&!a(h).hasClass("ui-tabs-selected")?"addClass":"removeClass"]("ui-state-disabled");e.cache===!1&&this.anchors.removeData("cache.tabs"),this.lis.add(this.anchors).unbind(".tabs");if(e.event!=="mouseover"){var i=function(a,b){b.is(":not(.ui-state-disabled)")&&b.addClass("ui-state-"+a)},j=function(a,b){b.removeClass("ui-state-"+a)};this.lis.bind("mouseover.tabs",function(){i("hover",a(this))}),this.lis.bind("mouseout.tabs",function(){j("hover",a(this))}),this.anchors.bind("focus.tabs",function(){i("focus",a(this).closest("li"))}),this.anchors.bind("blur.tabs",function(){j("focus",a(this).closest("li"))})}var k,l;e.fx&&(a.isArray(e.fx)?(k=e.fx[0],l=e.fx[1]):k=l=e.fx);var n=l?function(b,c){a(b).closest("li").addClass("ui-tabs-selected ui-state-active"),c.hide().removeClass("ui-tabs-hide").animate(l,l.duration||"normal",function(){m(c,l),d._trigger("show",null,d._ui(b,c[0]))})}:function(b,c){a(b).closest("li").addClass("ui-tabs-selected ui-state-active"),c.removeClass("ui-tabs-hide"),d._trigger("show",null,d._ui(b,c[0]))},o=k?function(a,b){b.animate(k,k.duration||"normal",function(){d.lis.removeClass("ui-tabs-selected ui-state-active"),b.addClass("ui-tabs-hide"),m(b,k),d.element.dequeue("tabs")})}:function(a,b,c){d.lis.removeClass("ui-tabs-selected ui-state-active"),b.addClass("ui-tabs-hide"),d.element.dequeue("tabs")};this.anchors.bind(e.event+".tabs",function(){var b=this,c=a(b).closest("li"),f=d.panels.filter(":not(.ui-tabs-hide)"),g=d.element.find(d._sanitizeSelector(b.hash));if(c.hasClass("ui-tabs-selected")&&!e.collapsible||c.hasClass("ui-state-disabled")||c.hasClass("ui-state-processing")||d.panels.filter(":animated").length||d._trigger("select",null,d._ui(this,g[0]))===!1){this.blur();return!1}e.selected=d.anchors.index(this),d.abort();if(e.collapsible){if(c.hasClass("ui-tabs-selected")){e.selected=-1,e.cookie&&d._cookie(e.selected,e.cookie),d.element.queue("tabs",function(){o(b,f)}).dequeue("tabs"),this.blur();return!1}if(!f.length){e.cookie&&d._cookie(e.selected,e.cookie),d.element.queue("tabs",function(){n(b,g)}),d.load(d.anchors.index(this)),this.blur();return!1}}e.cookie&&d._cookie(e.selected,e.cookie);if(g.length)f.length&&d.element.queue("tabs",function(){o(b,f)}),d.element.queue("tabs",function(){n(b,g)}),d.load(d.anchors.index(this));else throw"jQuery UI Tabs: Mismatching fragment identifier.";a.browser.msie&&this.blur()}),this.anchors.bind("click.tabs",function(){return!1})},_getIndex:function(a){typeof a=="string"&&(a=this.anchors.index(this.anchors.filter("[href$="+a+"]")));return a},destroy:function(){var b=this.options;this.abort(),this.element.unbind(".tabs").removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible").removeData("tabs"),this.list.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all"),this.anchors.each(function(){var b=a.data(this,"href.tabs");b&&(this.href=b);var c=a(this).unbind(".tabs");a.each(["href","load","cache"],function(a,b){c.removeData(b+".tabs")})}),this.lis.unbind(".tabs").add(this.panels).each(function(){a.data(this,"destroy.tabs")?a(this).remove():a(this).removeClass(["ui-state-default","ui-corner-top","ui-tabs-selected","ui-state-active","ui-state-hover","ui-state-focus","ui-state-disabled","ui-tabs-panel","ui-widget-content","ui-corner-bottom","ui-tabs-hide"].join(" "))}),b.cookie&&this._cookie(null,b.cookie);return this},add:function(c,d,e){e===b&&(e=this.anchors.length);var f=this,g=this.options,h=a(g.tabTemplate.replace(/#\{href\}/g,c).replace(/#\{label\}/g,d)),i=c.indexOf("#")?this._tabId(a("a",h)[0]):c.replace("#","");h.addClass("ui-state-default ui-corner-top").data("destroy.tabs",!0);var j=f.element.find("#"+i);j.length||(j=a(g.panelTemplate).attr("id",i).data("destroy.tabs",!0)),j.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide"),e>=this.lis.length?(h.appendTo(this.list),j.appendTo(this.list[0].parentNode)):(h.insertBefore(this.lis[e]),j.insertBefore(this.panels[e])),g.disabled=a.map(g.disabled,function(a,b){return a>=e?++a:a}),this._tabify(),this.anchors.length==1&&(g.selected=0,h.addClass("ui-tabs-selected ui-state-active"),j.removeClass("ui-tabs-hide"),this.element.queue("tabs",function(){f._trigger("show",null,f._ui(f.anchors[0],f.panels[0]))}),this.load(0)),this._trigger("add",null,this._ui(this.anchors[e],this.panels[e]));return this},remove:function(b){b=this._getIndex(b);var c=this.options,d=this.lis.eq(b).remove(),e=this.panels.eq(b).remove();d.hasClass("ui-tabs-selected")&&this.anchors.length>1&&this.select(b+(b+1<this.anchors.length?1:-1)),c.disabled=a.map(a.grep(c.disabled,function(a,c){return a!=b}),function(a,c){return a>=b?--a:a}),this._tabify(),this._trigger("remove",null,this._ui(d.find("a")[0],e[0]));return this},enable:function(b){b=this._getIndex(b);var c=this.options;if(a.inArray(b,c.disabled)!=-1){this.lis.eq(b).removeClass("ui-state-disabled"),c.disabled=a.grep(c.disabled,function(a,c){return a!=b}),this._trigger("enable",null,this._ui(this.anchors[b],this.panels[b]));return this}},disable:function(a){a=this._getIndex(a);var b=this,c=this.options;a!=c.selected&&(this.lis.eq(a).addClass("ui-state-disabled"),c.disabled.push(a),c.disabled.sort(),this._trigger("disable",null,this._ui(this.anchors[a],this.panels[a])));return this},select:function(a){a=this._getIndex(a);if(a==-1)if(this.options.collapsible&&this.options.selected!=-1)a=this.options.selected;else return this;this.anchors.eq(a).trigger(this.options.event+".tabs");return this},load:function(b){b=this._getIndex(b);var c=this,d=this.options,e=this.anchors.eq(b)[0],f=a.data(e,"load.tabs");this.abort();if(!f||this.element.queue("tabs").length!==0&&a.data(e,"cache.tabs"))this.element.dequeue("tabs");else{this.lis.eq(b).addClass("ui-state-processing");if(d.spinner){var g=a("span",e);g.data("label.tabs",g.html()).html(d.spinner)}this.xhr=a.ajax(a.extend({},d.ajaxOptions,{url:f,success:function(f,g){c.element.find(c._sanitizeSelector(e.hash)).html(f),c._cleanup(),d.cache&&a.data(e,"cache.tabs",!0),c._trigger("load",null,c._ui(c.anchors[b],c.panels[b]));try{d.ajaxOptions.success(f,g)}catch(h){}},error:function(a,f,g){c._cleanup(),c._trigger("load",null,c._ui(c.anchors[b],c.panels[b]));try{d.ajaxOptions.error(a,f,b,e)}catch(g){}}})),c.element.dequeue("tabs");return this}},abort:function(){this.element.queue([]),this.panels.stop(!1,!0),this.element.queue("tabs",this.element.queue("tabs").splice(-2,2)),this.xhr&&(this.xhr.abort(),delete this.xhr),this._cleanup();return this},url:function(a,b){this.anchors.eq(a).removeData("cache.tabs").data("load.tabs",b);return this},length:function(){return this.anchors.length}}),a.extend(a.ui.tabs,{version:"1.8.18"}),a.extend(a.ui.tabs.prototype,{rotation:null,rotate:function(a,b){var c=this,d=this.options,e=c._rotate||(c._rotate=function(b){clearTimeout(c.rotation),c.rotation=setTimeout(function(){var a=d.selected;c.select(++a<c.anchors.length?a:0)},a),b&&b.stopPropagation()}),f=c._unrotate||(c._unrotate=b?function(a){t=d.selected,e()}:function(a){a.clientX&&c.rotate(null)});a?(this.element.bind("tabsshow",e),this.anchors.bind(d.event+".tabs",f),e()):(clearTimeout(c.rotation),this.element.unbind("tabsshow",e),this.anchors.unbind(d.event+".tabs",f),delete this._rotate,delete this._unrotate);return this}})})(jQuery);(function($,undefined){function isArray(a){return a&&($.browser.safari&&typeof a=="object"&&a.length||a.constructor&&a.constructor.toString().match(/\Array\(\)/))}function extendRemove(a,b){$.extend(a,b);for(var c in b)if(b[c]==null||b[c]==undefined)a[c]=b[c];return a}function bindHover(a){var b="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return a.bind("mouseout",function(a){var c=$(a.target).closest(b);!c.length||c.removeClass("ui-state-hover ui-datepicker-prev-hover ui-datepicker-next-hover")}).bind("mouseover",function(c){var d=$(c.target).closest(b);!$.datepicker._isDisabledDatepicker(instActive.inline?a.parent()[0]:instActive.input[0])&&!!d.length&&(d.parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),d.addClass("ui-state-hover"),d.hasClass("ui-datepicker-prev")&&d.addClass("ui-datepicker-prev-hover"),d.hasClass("ui-datepicker-next")&&d.addClass("ui-datepicker-next-hover"))})}function Datepicker(){this.debug=!1,this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},$.extend(this._defaults,this.regional[""]),this.dpDiv=bindHover($('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))}$.extend($.ui,{datepicker:{version:"1.8.18"}});var PROP_NAME="datepicker",dpuuid=(new Date).getTime(),instActive;$.extend(Datepicker.prototype,{markerClassName:"hasDatepicker",maxRows:4,log:function(){this.debug&&console.log.apply("",arguments)},_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(a){extendRemove(this._defaults,a||{});return this},_attachDatepicker:function(target,settings){var inlineSettings=null;for(var attrName in this._defaults){var attrValue=target.getAttribute("date:"+attrName);if(attrValue){inlineSettings=inlineSettings||{};try{inlineSettings[attrName]=eval(attrValue)}catch(err){inlineSettings[attrName]=attrValue}}}var nodeName=target.nodeName.toLowerCase(),inline=nodeName=="div"||nodeName=="span";target.id||(this.uuid+=1,target.id="dp"+this.uuid);var inst=this._newInst($(target),inline);inst.settings=$.extend({},settings||{},inlineSettings||{}),nodeName=="input"?this._connectDatepicker(target,inst):inline&&this._inlineDatepicker(target,inst)},_newInst:function(a,b){var c=a[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1");return{id:c,input:a,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:b,dpDiv:b?bindHover($('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>')):this.dpDiv}},_connectDatepicker:function(a,b){var c=$(a);b.append=$([]),b.trigger=$([]);c.hasClass(this.markerClassName)||(this._attachments(c,b),c.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",function(a,c,d){b.settings[c]=d}).bind("getData.datepicker",function(a,c){return this._get(b,c)}),this._autoSize(b),$.data(a,PROP_NAME,b),b.settings.disabled&&this._disableDatepicker(a))},_attachments:function(a,b){var c=this._get(b,"appendText"),d=this._get(b,"isRTL");b.append&&b.append.remove(),c&&(b.append=$('<span class="'+this._appendClass+'">'+c+"</span>"),a[d?"before":"after"](b.append)),a.unbind("focus",this._showDatepicker),b.trigger&&b.trigger.remove();var e=this._get(b,"showOn");(e=="focus"||e=="both")&&a.focus(this._showDatepicker);if(e=="button"||e=="both"){var f=this._get(b,"buttonText"),g=this._get(b,"buttonImage");b.trigger=$(this._get(b,"buttonImageOnly")?$("<img/>").addClass(this._triggerClass).attr({src:g,alt:f,title:f}):$('<button type="button"></button>').addClass(this._triggerClass).html(g==""?f:$("<img/>").attr({src:g,alt:f,title:f}))),a[d?"before":"after"](b.trigger),b.trigger.click(function(){$.datepicker._datepickerShowing&&$.datepicker._lastInput==a[0]?$.datepicker._hideDatepicker():$.datepicker._datepickerShowing&&$.datepicker._lastInput!=a[0]?($.datepicker._hideDatepicker(),$.datepicker._showDatepicker(a[0])):$.datepicker._showDatepicker(a[0]);return!1})}},_autoSize:function(a){if(this._get(a,"autoSize")&&!a.inline){var b=new Date(2009,11,20),c=this._get(a,"dateFormat");if(c.match(/[DM]/)){var d=function(a){var b=0,c=0;for(var d=0;d<a.length;d++)a[d].length>b&&(b=a[d].length,c=d);return c};b.setMonth(d(this._get(a,c.match(/MM/)?"monthNames":"monthNamesShort"))),b.setDate(d(this._get(a,c.match(/DD/)?"dayNames":"dayNamesShort"))+20-b.getDay())}a.input.attr("size",this._formatDate(a,b).length)}},_inlineDatepicker:function(a,b){var c=$(a);c.hasClass(this.markerClassName)||(c.addClass(this.markerClassName).append(b.dpDiv).bind("setData.datepicker",function(a,c,d){b.settings[c]=d}).bind("getData.datepicker",function(a,c){return this._get(b,c)}),$.data(a,PROP_NAME,b),this._setDate(b,this._getDefaultDate(b),!0),this._updateDatepicker(b),this._updateAlternate(b),b.settings.disabled&&this._disableDatepicker(a),b.dpDiv.css("display","block"))},_dialogDatepicker:function(a,b,c,d,e){var f=this._dialogInst;if(!f){this.uuid+=1;var g="dp"+this.uuid;this._dialogInput=$('<input type="text" id="'+g+'" style="position: absolute; top: -100px; width: 0px; z-index: -10;"/>'),this._dialogInput.keydown(this._doKeyDown),$("body").append(this._dialogInput),f=this._dialogInst=this._newInst(this._dialogInput,!1),f.settings={},$.data(this._dialogInput[0],PROP_NAME,f)}extendRemove(f.settings,d||{}),b=b&&b.constructor==Date?this._formatDate(f,b):b,this._dialogInput.val(b),this._pos=e?e.length?e:[e.pageX,e.pageY]:null;if(!this._pos){var h=document.documentElement.clientWidth,i=document.documentElement.clientHeight,j=document.documentElement.scrollLeft||document.body.scrollLeft,k=document.documentElement.scrollTop||document.body.scrollTop;this._pos=[h/2-100+j,i/2-150+k]}this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),f.settings.onSelect=c,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),$.blockUI&&$.blockUI(this.dpDiv),$.data(this._dialogInput[0],PROP_NAME,f);return this},_destroyDatepicker:function(a){var b=$(a),c=$.data(a,PROP_NAME);if(!!b.hasClass(this.markerClassName)){var d=a.nodeName.toLowerCase();$.removeData(a,PROP_NAME),d=="input"?(c.append.remove(),c.trigger.remove(),b.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):(d=="div"||d=="span")&&b.removeClass(this.markerClassName).empty()}},_enableDatepicker:function(a){var b=$(a),c=$.data(a,PROP_NAME);if(!!b.hasClass(this.markerClassName)){var d=a.nodeName.toLowerCase();if(d=="input")a.disabled=!1,c.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""});else if(d=="div"||d=="span"){var e=b.children("."+this._inlineClass);e.children().removeClass("ui-state-disabled"),e.find("select.ui-datepicker-month, select.ui-datepicker-year").removeAttr("disabled")}this._disabledInputs=$.map(this._disabledInputs,function(b){return b==a?null:b})}},_disableDatepicker:function(a){var b=$(a),c=$.data(a,PROP_NAME);if(!!b.hasClass(this.markerClassName)){var d=a.nodeName.toLowerCase();if(d=="input")a.disabled=!0,c.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"});else if(d=="div"||d=="span"){var e=b.children("."+this._inlineClass);e.children().addClass("ui-state-disabled"),e.find("select.ui-datepicker-month, select.ui-datepicker-year").attr("disabled","disabled")}this._disabledInputs=$.map(this._disabledInputs,function(b){return b==a?null:b}),this._disabledInputs[this._disabledInputs.length]=a}},_isDisabledDatepicker:function(a){if(!a)return!1;for(var b=0;b<this._disabledInputs.length;b++)if(this._disabledInputs[b]==a)return!0;return!1},_getInst:function(a){try{return $.data(a,PROP_NAME)}catch(b){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(a,b,c){var d=this._getInst(a);if(arguments.length==2&&typeof b=="string")return b=="defaults"?$.extend({},$.datepicker._defaults):d?b=="all"?$.extend({},d.settings):this._get(d,b):null;var e=b||{};typeof b=="string"&&(e={},e[b]=c);if(d){this._curInst==d&&this._hideDatepicker();var f=this._getDateDatepicker(a,!0),g=this._getMinMaxDate(d,"min"),h=this._getMinMaxDate(d,"max");extendRemove(d.settings,e),g!==null&&e.dateFormat!==undefined&&e.minDate===undefined&&(d.settings.minDate=this._formatDate(d,g)),h!==null&&e.dateFormat!==undefined&&e.maxDate===undefined&&(d.settings.maxDate=this._formatDate(d,h)),this._attachments($(a),d),this._autoSize(d),this._setDate(d,f),this._updateAlternate(d),this._updateDatepicker(d)}},_changeDatepicker:function(a,b,c){this._optionDatepicker(a,b,c)},_refreshDatepicker:function(a){var b=this._getInst(a);b&&this._updateDatepicker(b)},_setDateDatepicker:function(a,b){var c=this._getInst(a);c&&(this._setDate(c,b),this._updateDatepicker(c),this._updateAlternate(c))},_getDateDatepicker:function(a,b){var c=this._getInst(a);c&&!c.inline&&this._setDateFromField(c,b);return c?this._getDate(c):null},_doKeyDown:function(a){var b=$.datepicker._getInst(a.target),c=!0,d=b.dpDiv.is(".ui-datepicker-rtl");b._keyEvent=!0;if($.datepicker._datepickerShowing)switch(a.keyCode){case 9:$.datepicker._hideDatepicker(),c=!1;break;case 13:var e=$("td."+$.datepicker._dayOverClass+":not(."+$.datepicker._currentClass+")",b.dpDiv);e[0]&&$.datepicker._selectDay(a.target,b.selectedMonth,b.selectedYear,e[0]);var f=$.datepicker._get(b,"onSelect");if(f){var g=$.datepicker._formatDate(b);f.apply(b.input?b.input[0]:null,[g,b])}else $.datepicker._hideDatepicker();return!1;case 27:$.datepicker._hideDatepicker();break;case 33:$.datepicker._adjustDate(a.target,a.ctrlKey?-$.datepicker._get(b,"stepBigMonths"):-$.datepicker._get(b,"stepMonths"),"M");break;case 34:$.datepicker._adjustDate(a.target,a.ctrlKey?+$.datepicker._get(b,"stepBigMonths"):+$.datepicker._get(b,"stepMonths"),"M");break;case 35:(a.ctrlKey||a.metaKey)&&$.datepicker._clearDate(a.target),c=a.ctrlKey||a.metaKey;break;case 36:(a.ctrlKey||a.metaKey)&&$.datepicker._gotoToday(a.target),c=a.ctrlKey||a.metaKey;break;case 37:(a.ctrlKey||a.metaKey)&&$.datepicker._adjustDate(a.target,d?1:-1,"D"),c=a.ctrlKey||a.metaKey,a.originalEvent.altKey&&$.datepicker._adjustDate(a.target,a.ctrlKey?-$.datepicker._get(b,"stepBigMonths"):-$.datepicker._get(b,"stepMonths"),"M");break;case 38:(a.ctrlKey||a.metaKey)&&$.datepicker._adjustDate(a.target,-7,"D"),c=a.ctrlKey||a.metaKey;break;case 39:(a.ctrlKey||a.metaKey)&&$.datepicker._adjustDate(a.target,d?-1:1,"D"),c=a.ctrlKey||a.metaKey,a.originalEvent.altKey&&$.datepicker._adjustDate(a.target,a.ctrlKey?+$.datepicker._get(b,"stepBigMonths"):+$.datepicker._get(b,"stepMonths"),"M");break;case 40:(a.ctrlKey||a.metaKey)&&$.datepicker._adjustDate(a.target,7,"D"),c=a.ctrlKey||a.metaKey;break;default:c=!1}else a.keyCode==36&&a.ctrlKey?$.datepicker._showDatepicker(this):c=!1;c&&(a.preventDefault(),a.stopPropagation())},_doKeyPress:function(a){var b=$.datepicker._getInst(a.target);if($.datepicker._get(b,"constrainInput")){var c=$.datepicker._possibleChars($.datepicker._get(b,"dateFormat")),d=String.fromCharCode(a.charCode==undefined?a.keyCode:a.charCode);return a.ctrlKey||a.metaKey||d<" "||!c||c.indexOf(d)>-1}},_doKeyUp:function(a){var b=$.datepicker._getInst(a.target);if(b.input.val()!=b.lastVal)try{var c=$.datepicker.parseDate($.datepicker._get(b,"dateFormat"),b.input?b.input.val():null,$.datepicker._getFormatConfig(b));c&&($.datepicker._setDateFromField(b),$.datepicker._updateAlternate(b),$.datepicker._updateDatepicker(b))}catch(a){$.datepicker.log(a)}return!0},_showDatepicker:function(a){a=a.target||a,a.nodeName.toLowerCase()!="input"&&(a=$("input",a.parentNode)[0]);if(!$.datepicker._isDisabledDatepicker(a)&&$.datepicker._lastInput!=a){var b=$.datepicker._getInst(a);$.datepicker._curInst&&$.datepicker._curInst!=b&&($.datepicker._curInst.dpDiv.stop(!0,!0),b&&$.datepicker._datepickerShowing&&$.datepicker._hideDatepicker($.datepicker._curInst.input[0]));var c=$.datepicker._get(b,"beforeShow"),d=c?c.apply(a,[a,b]):{};if(d===!1)return;extendRemove(b.settings,d),b.lastVal=null,$.datepicker._lastInput=a,$.datepicker._setDateFromField(b),$.datepicker._inDialog&&(a.value=""),$.datepicker._pos||($.datepicker._pos=$.datepicker._findPos(a),$.datepicker._pos[1]+=a.offsetHeight);var e=!1;$(a).parents().each(function(){e|=$(this).css("position")=="fixed";return!e}),e&&$.browser.opera&&($.datepicker._pos[0]-=document.documentElement.scrollLeft,$.datepicker._pos[1]-=document.documentElement.scrollTop);var f={left:$.datepicker._pos[0],top:$.datepicker._pos[1]};$.datepicker._pos=null,b.dpDiv.empty(),b.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),$.datepicker._updateDatepicker(b),f=$.datepicker._checkOffset(b,f,e),b.dpDiv.css({position:$.datepicker._inDialog&&$.blockUI?"static":e?"fixed":"absolute",display:"none",left:f.left+"px",top:f.top+"px"});if(!b.inline){var g=$.datepicker._get(b,"showAnim"),h=$.datepicker._get(b,"duration"),i=function(){var a=b.dpDiv.find("iframe.ui-datepicker-cover");if(!!a.length){var c=$.datepicker._getBorders(b.dpDiv);a.css({left:-c[0],top:-c[1],width:b.dpDiv.outerWidth(),height:b.dpDiv.outerHeight()})}};b.dpDiv.zIndex($(a).zIndex()+1),$.datepicker._datepickerShowing=!0,$.effects&&$.effects[g]?b.dpDiv.show(g,$.datepicker._get(b,"showOptions"),h,i):b.dpDiv[g||"show"](g?h:null,i),(!g||!h)&&i(),b.input.is(":visible")&&!b.input.is(":disabled")&&b.input.focus(),$.datepicker._curInst=b}}},_updateDatepicker:function(a){var b=this;b.maxRows=4;var c=$.datepicker._getBorders(a.dpDiv);instActive=a,a.dpDiv.empty().append(this._generateHTML(a));var d=a.dpDiv.find("iframe.ui-datepicker-cover");!d.length||d.css({left:-c[0],top:-c[1],width:a.dpDiv.outerWidth(),height:a.dpDiv.outerHeight()}),a.dpDiv.find("."+this._dayOverClass+" a").mouseover();var e=this._getNumberOfMonths(a),f=e[1],g=17;a.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),f>1&&a.dpDiv.addClass("ui-datepicker-multi-"+f).css("width",g*f+"em"),a.dpDiv[(e[0]!=1||e[1]!=1?"add":"remove")+"Class"]("ui-datepicker-multi"),a.dpDiv[(this._get(a,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),a==$.datepicker._curInst&&$.datepicker._datepickerShowing&&a.input&&a.input.is(":visible")&&!a.input.is(":disabled")&&a.input[0]!=document.activeElement&&a.input.focus();if(a.yearshtml){var h=a.yearshtml;setTimeout(function(){h===a.yearshtml&&a.yearshtml&&a.dpDiv.find("select.ui-datepicker-year:first").replaceWith(a.yearshtml),h=a.yearshtml=null},0)}},_getBorders:function(a){var b=function(a){return{thin:1,medium:2,thick:3}[a]||a};return[parseFloat(b(a.css("border-left-width"))),parseFloat(b(a.css("border-top-width")))]},_checkOffset:function(a,b,c){var d=a.dpDiv.outerWidth(),e=a.dpDiv.outerHeight(),f=a.input?a.input.outerWidth():0,g=a.input?a.input.outerHeight():0,h=document.documentElement.clientWidth+$(document).scrollLeft(),i=document.documentElement.clientHeight+$(document).scrollTop();b.left-=this._get(a,"isRTL")?d-f:0,b.left-=c&&b.left==a.input.offset().left?$(document).scrollLeft():0,b.top-=c&&b.top==a.input.offset().top+g?$(document).scrollTop():0,b.left-=Math.min(b.left,b.left+d>h&&h>d?Math.abs(b.left+d-h):0),b.top-=Math.min(b.top,b.top+e>i&&i>e?Math.abs(e+g):0);return b},_findPos:function(a){var b=this._getInst(a),c=this._get(b,"isRTL");while(a&&(a.type=="hidden"||a.nodeType!=1||$.expr.filters.hidden(a)))a=a[c?"previousSibling":"nextSibling"];var d=$(a).offset();return[d.left,d.top]},_hideDatepicker:function(a){var b=this._curInst;if(!(!b||a&&b!=$.data(a,PROP_NAME))&&this._datepickerShowing){var c=this._get(b,"showAnim"),d=this._get(b,"duration"),e=this,f=function(){$.datepicker._tidyDialog(b),e._curInst=null};$.effects&&$.effects[c]?b.dpDiv.hide(c,$.datepicker._get(b,"showOptions"),d,f):b.dpDiv[c=="slideDown"?"slideUp":c=="fadeIn"?"fadeOut":"hide"](c?d:null,f),c||f(),this._datepickerShowing=!1;var g=this._get(b,"onClose");g&&g.apply(b.input?b.input[0]:null,[b.input?b.input.val():"",b]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),$.blockUI&&($.unblockUI(),$("body").append(this.dpDiv))),this._inDialog=!1}},_tidyDialog:function(a){a.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(a){if(!!$.datepicker._curInst){var b=$(a.target),c=$.datepicker._getInst(b[0]);(b[0].id!=$.datepicker._mainDivId&&b.parents("#"+$.datepicker._mainDivId).length==0&&!b.hasClass($.datepicker.markerClassName)&&!b.closest("."+$.datepicker._triggerClass).length&&$.datepicker._datepickerShowing&&(!$.datepicker._inDialog||!$.blockUI)||b.hasClass($.datepicker.markerClassName)&&$.datepicker._curInst!=c)&&$.datepicker._hideDatepicker()}},_adjustDate:function(a,b,c){var d=$(a),e=this._getInst(d[0]);this._isDisabledDatepicker(d[0])||(this._adjustInstDate(e,b+(c=="M"?this._get(e,"showCurrentAtPos"):0),c),this._updateDatepicker(e))},_gotoToday:function(a){var b=$(a),c=this._getInst(b[0]);if(this._get(c,"gotoCurrent")&&c.currentDay)c.selectedDay=c.currentDay,c.drawMonth=c.selectedMonth=c.currentMonth,c.drawYear=c.selectedYear=c.currentYear;else{var d=new Date;c.selectedDay=d.getDate(),c.drawMonth=c.selectedMonth=d.getMonth(),c.drawYear=c.selectedYear=d.getFullYear()}this._notifyChange(c),this._adjustDate(b)},_selectMonthYear:function(a,b,c){var d=$(a),e=this._getInst(d[0]);e["selected"+(c=="M"?"Month":"Year")]=e["draw"+(c=="M"?"Month":"Year")]=parseInt(b.options[b.selectedIndex].value,10),this._notifyChange(e),this._adjustDate(d)},_selectDay:function(a,b,c,d){var e=$(a);if(!$(d).hasClass(this._unselectableClass)&&!this._isDisabledDatepicker(e[0])){var f=this._getInst(e[0]);f.selectedDay=f.currentDay=$("a",d).html(),f.selectedMonth=f.currentMonth=b,f.selectedYear=f.currentYear=c,this._selectDate(a,this._formatDate(f,f.currentDay,f.currentMonth,f.currentYear))}},_clearDate:function(a){var b=$(a),c=this._getInst(b[0]);this._selectDate(b,"")},_selectDate:function(a,b){var c=$(a),d=this._getInst(c[0]);b=b!=null?b:this._formatDate(d),d.input&&d.input.val(b),this._updateAlternate(d);var e=this._get(d,"onSelect");e?e.apply(d.input?d.input[0]:null,[b,d]):d.input&&d.input.trigger("change"),d.inline?this._updateDatepicker(d):(this._hideDatepicker(),this._lastInput=d.input[0],typeof d.input[0]!="object"&&d.input.focus(),this._lastInput=null)},_updateAlternate:function(a){var b=this._get(a,"altField");if(b){var c=this._get(a,"altFormat")||this._get(a,"dateFormat"),d=this._getDate(a),e=this.formatDate(c,d,this._getFormatConfig(a));$(b).each(function(){$(this).val(e)})}},noWeekends:function(a){var b=a.getDay();return[b>0&&b<6,""]},iso8601Week:function(a){var b=new Date(a.getTime());b.setDate(b.getDate()+4-(b.getDay()||7));var c=b.getTime();b.setMonth(0),b.setDate(1);return Math.floor(Math.round((c-b)/864e5)/7)+1},parseDate:function(a,b,c){if(a==null||b==null)throw"Invalid arguments";b=typeof b=="object"?b.toString():b+"";if(b=="")return null;var d=(c?c.shortYearCutoff:null)||this._defaults.shortYearCutoff;d=typeof d!="string"?d:(new Date).getFullYear()%100+parseInt(d,10);var e=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort,f=(c?c.dayNames:null)||this._defaults.dayNames,g=(c?c.monthNamesShort:null)||this._defaults.monthNamesShort,h=(c?c.monthNames:null)||this._defaults.monthNames,i=-1,j=-1,k=-1,l=-1,m=!1,n=function(b){var c=s+1<a.length&&a.charAt(s+1)==b;c&&s++;return c},o=function(a){var c=n(a),d=a=="@"?14:a=="!"?20:a=="y"&&c?4:a=="o"?3:2,e=new RegExp("^\\d{1,"+d+"}"),f=b.substring(r).match(e);if(!f)throw"Missing number at position "+r;r+=f[0].length;return parseInt(f[0],10)},p=function(a,c,d){var e=$.map(n(a)?d:c,function(a,b){return[[b,a]]}).sort(function(a,b){return-(a[1].length-b[1].length)}),f=-1;$.each(e,function(a,c){var d=c[1];if(b.substr(r,d.length).toLowerCase()==d.toLowerCase()){f=c[0],r+=d.length;return!1}});if(f!=-1)return f+1;throw"Unknown name at position "+r},q=function(){if(b.charAt(r)!=a.charAt(s))throw"Unexpected literal at position "+r;r++},r=0;for(var s=0;s<a.length;s++)if(m)a.charAt(s)=="'"&&!n("'")?m=!1:q();else switch(a.charAt(s)){case"d":k=o("d");break;case"D":p("D",e,f);break;case"o":l=o("o");break;case"m":j=o("m");break;case"M":j=p("M",g,h);break;case"y":i=o("y");break;case"@":var t=new Date(o("@"));i=t.getFullYear(),j=t.getMonth()+1,k=t.getDate();break;case"!":var t=new Date((o("!")-this._ticksTo1970)/1e4);i=t.getFullYear(),j=t.getMonth()+1,k=t.getDate();break;case"'":n("'")?q():m=!0;break;default:q()}if(r<b.length)throw"Extra/unparsed characters found in date: "+b.substring(r);i==-1?i=(new Date).getFullYear():i<100&&(i+=(new Date).getFullYear()-(new Date).getFullYear()%100+(i<=d?0:-100));if(l>-1){j=1,k=l;for(;;){var u=this._getDaysInMonth(i,j-1);if(k<=u)break;j++,k-=u}}var t=this._daylightSavingAdjust(new Date(i,j-1,k));if(t.getFullYear()!=i||t.getMonth()+1!=j||t.getDate()!=k)throw"Invalid date";return t},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*24*60*60*1e7,formatDate:function(a,b,c){if(!b)return"";var d=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort,e=(c?c.dayNames:null)||this._defaults.dayNames,f=(c?c.monthNamesShort:null)||this._defaults.monthNamesShort,g=(c?c.monthNames:null)||this._defaults.monthNames,h=function(b){var c=m+1<a.length&&a.charAt(m+1)==b;c&&m++;return c},i=function(a,b,c){var d=""+b;if(h(a))while(d.length<c)d="0"+d;return d},j=function(a,b,c,d){return h(a)?d[b]:c[b]},k="",l=!1;if(b)for(var m=0;m<a.length;m++)if(l)a.charAt(m)=="'"&&!h("'")?l=!1:k+=a.charAt(m);else switch(a.charAt(m)){case"d":k+=i("d",b.getDate(),2);break;case"D":k+=j("D",b.getDay(),d,e);break;case"o":k+=i("o",Math.round(((new Date(b.getFullYear(),b.getMonth(),b.getDate())).getTime()-(new Date(b.getFullYear(),0,0)).getTime())/864e5),3);break;case"m":k+=i("m",b.getMonth()+1,2);break;case"M":k+=j("M",b.getMonth(),f,g);break;case"y":k+=h("y")?b.getFullYear():(b.getYear()%100<10?"0":"")+b.getYear()%100;break;case"@":k+=b.getTime();break;case"!":k+=b.getTime()*1e4+this._ticksTo1970;break;case"'":h("'")?k+="'":l=!0;break;default:k+=a.charAt(m)}return k},_possibleChars:function(a){var b="",c=!1,d=function(b){var c=e+1<a.length&&a.charAt(e+1)==b;c&&e++;return c};for(var e=0;e<a.length;e++)if(c)a.charAt(e)=="'"&&!d("'")?c=!1:b+=a.charAt(e);else switch(a.charAt(e)){case"d":case"m":case"y":case"@":b+="0123456789";break;case"D":case"M":return null;case"'":d("'")?b+="'":c=!0;break;default:b+=a.charAt(e)}return b},_get:function(a,b){return a.settings[b]!==undefined?a.settings[b]:this._defaults[b]},_setDateFromField:function(a,b){if(a.input.val()!=a.lastVal){var c=this._get(a,"dateFormat"),d=a.lastVal=a.input?a.input.val():null,e,f;e=f=this._getDefaultDate(a);var g=this._getFormatConfig(a);try{e=this.parseDate(c,d,g)||f}catch(h){this.log(h),d=b?"":d}a.selectedDay=e.getDate(),a.drawMonth=a.selectedMonth=e.getMonth(),a.drawYear=a.selectedYear=e.getFullYear(),a.currentDay=d?e.getDate():0,a.currentMonth=d?e.getMonth():0,a.currentYear=d?e.getFullYear():0,this._adjustInstDate(a)}},_getDefaultDate:function(a){return this._restrictMinMax(a,this._determineDate(a,this._get(a,"defaultDate"),new Date))},_determineDate:function(a,b,c){var d=function(a){var b=new Date;b.setDate(b.getDate()+a);return b},e=function(b){try{return $.datepicker.parseDate($.datepicker._get(a,"dateFormat"),b,$.datepicker._getFormatConfig(a))}catch(c){}var d=(b.toLowerCase().match(/^c/)?$.datepicker._getDate(a):null)||new Date,e=d.getFullYear(),f=d.getMonth(),g=d.getDate(),h=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,i=h.exec(b);while(i){switch(i[2]||"d"){case"d":case"D":g+=parseInt(i[1],10);break;case"w":case"W":g+=parseInt(i[1],10)*7;break;case"m":case"M":f+=parseInt(i[1],10),g=Math.min(g,$.datepicker._getDaysInMonth(e,f));break;case"y":case"Y":e+=parseInt(i[1],10),g=Math.min(g,$.datepicker._getDaysInMonth(e,f))}i=h.exec(b)}return new Date(e,f,g)},f=b==null||b===""?c:typeof b=="string"?e(b):typeof b=="number"?isNaN(b)?c:d(b):new Date(b.getTime());f=f&&f.toString()=="Invalid Date"?c:f,f&&(f.setHours(0),f.setMinutes(0),f.setSeconds(0),f.setMilliseconds(0));return this._daylightSavingAdjust(f)},_daylightSavingAdjust:function(a){if(!a)return null;a.setHours(a.getHours()>12?a.getHours()+2:0);return a},_setDate:function(a,b,c){var d=!b,e=a.selectedMonth,f=a.selectedYear,g=this._restrictMinMax(a,this._determineDate(a,b,new Date));a.selectedDay=a.currentDay=g.getDate(),a.drawMonth=a.selectedMonth=a.currentMonth=g.getMonth(),a.drawYear=a.selectedYear=a.currentYear=g.getFullYear(),(e!=a.selectedMonth||f!=a.selectedYear)&&!c&&this._notifyChange(a),this._adjustInstDate(a),a.input&&a.input.val(d?"":this._formatDate(a))},_getDate:function(a){var b=!a.currentYear||a.input&&a.input.val()==""?null:this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay));return b},_generateHTML:function(a){var b=new Date;b=this._daylightSavingAdjust(new Date(b.getFullYear(),b.getMonth(),b.getDate()));var c=this._get(a,"isRTL"),d=this._get(a,"showButtonPanel"),e=this._get(a,"hideIfNoPrevNext"),f=this._get(a,"navigationAsDateFormat"),g=this._getNumberOfMonths(a),h=this._get(a,"showCurrentAtPos"),i=this._get(a,"stepMonths"),j=g[0]!=1||g[1]!=1,k=this._daylightSavingAdjust(a.currentDay?new Date(a.currentYear,a.currentMonth,a.currentDay):new Date(9999,9,9)),l=this._getMinMaxDate(a,"min"),m=this._getMinMaxDate(a,"max"),n=a.drawMonth-h,o=a.drawYear;n<0&&(n+=12,o--);if(m){var p=this._daylightSavingAdjust(new Date(m.getFullYear(),m.getMonth()-g[0]*g[1]+1,m.getDate()));p=l&&p<l?l:p;while(this._daylightSavingAdjust(new Date(o,n,1))>p)n--,n<0&&(n=11,o--)}a.drawMonth=n,a.drawYear=o;var q=this._get(a,"prevText");q=f?this.formatDate(q,this._daylightSavingAdjust(new Date(o,n-i,1)),this._getFormatConfig(a)):q;var r=this._canAdjustMonth(a,-1,o,n)?'<a class="ui-datepicker-prev ui-corner-all" onclick="DP_jQuery_'+dpuuid+".datepicker._adjustDate('#"+a.id+"', -"+i+", 'M');\""+' title="'+q+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"e":"w")+'">'+q+"</span></a>":e?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+q+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"e":"w")+'">'+q+"</span></a>",s=this._get(a,"nextText");s=f?this.formatDate(s,this._daylightSavingAdjust(new Date(o,n+i,1)),this._getFormatConfig(a)):s;var t=this._canAdjustMonth(a,1,o,n)?'<a class="ui-datepicker-next ui-corner-all" onclick="DP_jQuery_'+dpuuid+".datepicker._adjustDate('#"+a.id+"', +"+i+", 'M');\""+' title="'+s+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"w":"e")+'">'+s+"</span></a>":e?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+s+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"w":"e")+'">'+s+"</span></a>",u=this._get(a,"currentText"),v=this._get(a,"gotoCurrent")&&a.currentDay?k:b;u=f?this.formatDate(u,v,this._getFormatConfig(a)):u;var w=a.inline?"":'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" onclick="DP_jQuery_'+dpuuid+'.datepicker._hideDatepicker();">'+this._get(a,"closeText")+"</button>",x=d?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(c?w:"")+(this._isInRange(a,v)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" onclick="DP_jQuery_'+dpuuid+".datepicker._gotoToday('#"+a.id+"');\""+">"+u+"</button>":"")+(c?"":w)+"</div>":"",y=parseInt(this._get(a,"firstDay"),10);y=isNaN(y)?0:y;var z=this._get(a,"showWeek"),A=this._get(a,"dayNames"),B=this._get(a,"dayNamesShort"),C=this._get(a,"dayNamesMin"),D=this._get(a,"monthNames"),E=this._get(a,"monthNamesShort"),F=this._get(a,"beforeShowDay"),G=this._get(a,"showOtherMonths"),H=this._get(a,"selectOtherMonths"),I=this._get(a,"calculateWeek")||this.iso8601Week,J=this._getDefaultDate(a),K="";for(var L=0;L<g[0];L++){var M="";this.maxRows=4;for(var N=0;N<g[1];N++){var O=this._daylightSavingAdjust(new Date(o,n,a.selectedDay)),P=" ui-corner-all",Q="";if(j){Q+='<div class="ui-datepicker-group';if(g[1]>1)switch(N){case 0:Q+=" ui-datepicker-group-first",P=" ui-corner-"+(c?"right":"left");break;case g[1]-1:Q+=" ui-datepicker-group-last",P=" ui-corner-"+(c?"left":"right");break;default:Q+=" ui-datepicker-group-middle",P=""}Q+='">'}Q+='<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+P+'">'+(/all|left/.test(P)&&L==0?c?t:r:"")+(/all|right/.test(P)&&L==0?c?r:t:"")+this._generateMonthYearHeader(a,n,o,l,m,L>0||N>0,D,E)+'</div><table class="ui-datepicker-calendar"><thead>'+"<tr>";var R=z?'<th class="ui-datepicker-week-col">'+this._get(a,"weekHeader")+"</th>":"";for(var S=0;S<7;S++){var T=(S+y)%7;R+="<th"+((S+y+6)%7>=5?' class="ui-datepicker-week-end"':"")+">"+'<span title="'+A[T]+'">'+C[T]+"</span></th>"}Q+=R+"</tr></thead><tbody>";var U=this._getDaysInMonth(o,n);o==a.selectedYear&&n==a.selectedMonth&&(a.selectedDay=Math.min(a.selectedDay,U));var V=(this._getFirstDayOfMonth(o,n)-y+7)%7,W=Math.ceil((V+U)/7),X=j?this.maxRows>W?this.maxRows:W:W;this.maxRows=X;var Y=this._daylightSavingAdjust(new Date(o,n,1-V));for(var Z=0;Z<X;Z++){Q+="<tr>";var _=z?'<td class="ui-datepicker-week-col">'+this._get(a,"calculateWeek")(Y)+"</td>":"";for(var S=0;S<7;S++){var ba=F?F.apply(a.input?a.input[0]:null,[Y]):[!0,""],bb=Y.getMonth()!=n,bc=bb&&!H||!ba[0]||l&&Y<l||m&&Y>m;_+='<td class="'+((S+y+6)%7>=5?" ui-datepicker-week-end":"")+(bb?" ui-datepicker-other-month":"")+(Y.getTime()==O.getTime()&&n==a.selectedMonth&&a._keyEvent||J.getTime()==Y.getTime()&&J.getTime()==O.getTime()?" "+this._dayOverClass:"")+(bc?" "+this._unselectableClass+" ui-state-disabled":"")+(bb&&!G?"":" "+ba[1]+(Y.getTime()==k.getTime()?" "+this._currentClass:"")+(Y.getTime()==b.getTime()?" ui-datepicker-today":""))+'"'+((!bb||G)&&ba[2]?' title="'+ba[2]+'"':"")+(bc?"":' onclick="DP_jQuery_'+dpuuid+".datepicker._selectDay('#"+a.id+"',"+Y.getMonth()+","+Y.getFullYear()+', this);return false;"')+">"+(bb&&!G?"&#xa0;":bc?'<span class="ui-state-default">'+Y.getDate()+"</span>":'<a class="ui-state-default'+(Y.getTime()==b.getTime()?" ui-state-highlight":"")+(Y.getTime()==k.getTime()?" ui-state-active":"")+(bb?" ui-priority-secondary":"")+'" href="#">'+Y.getDate()+"</a>")+"</td>",Y.setDate(Y.getDate()+1),Y=this._daylightSavingAdjust(Y)}Q+=_+"</tr>"}n++,n>11&&(n=0,o++),Q+="</tbody></table>"+(j?"</div>"+(g[0]>0&&N==g[1]-1?'<div class="ui-datepicker-row-break"></div>':""):""),M+=Q}K+=M}K+=x+($.browser.msie&&parseInt($.browser.version,10)<7&&!a.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':""),a._keyEvent=!1;return K},_generateMonthYearHeader:function(a,b,c,d,e,f,g,h){var i=this._get(a,"changeMonth"),j=this._get(a,"changeYear"),k=this._get(a,"showMonthAfterYear"),l='<div class="ui-datepicker-title">',m="";if(f||!i)m+='<span class="ui-datepicker-month">'+g[b]+"</span>";else{var n=d&&d.getFullYear()==c,o=e&&e.getFullYear()==c;m+='<select class="ui-datepicker-month" onchange="DP_jQuery_'+dpuuid+".datepicker._selectMonthYear('#"+a.id+"', this, 'M');\" "+">";for(var p=0;p<12;p++)(!n||p>=d.getMonth())&&(!o||p<=e.getMonth())&&(m+='<option value="'+p+'"'+(p==b?' selected="selected"':"")+">"+h[p]+"</option>");m+="</select>"}k||(l+=m+(f||!i||!j?"&#xa0;":""));if(!a.yearshtml){a.yearshtml="";if(f||!j)l+='<span class="ui-datepicker-year">'+c+"</span>";else{var q=this._get(a,"yearRange").split(":"),r=(new Date).getFullYear(),s=function(a){var b=a.match(/c[+-].*/)?c+parseInt(a.substring(1),10):a.match(/[+-].*/)?r+parseInt(a,10):parseInt(a,10);return isNaN(b)?r:b},t=s(q[0]),u=Math.max(t,s(q[1]||""));t=d?Math.max(t,d.getFullYear()):t,u=e?Math.min(u,e.getFullYear()):u,a.yearshtml+='<select class="ui-datepicker-year" onchange="DP_jQuery_'+dpuuid+".datepicker._selectMonthYear('#"+a.id+"', this, 'Y');\" "+">";for(;t<=u;t++)a.yearshtml+='<option value="'+t+'"'+(t==c?' selected="selected"':"")+">"+t+"</option>";a.yearshtml+="</select>",l+=a.yearshtml,a.yearshtml=null}}l+=this._get(a,"yearSuffix"),k&&(l+=(f||!i||!j?"&#xa0;":"")+m),l+="</div>";return l},_adjustInstDate:function(a,b,c){var d=a.drawYear+(c=="Y"?b:0),e=a.drawMonth+(c=="M"?b:0),f=Math.min(a.selectedDay,this._getDaysInMonth(d,e))+(c=="D"?b:0),g=this._restrictMinMax(a,this._daylightSavingAdjust(new Date(d,e,f)));a.selectedDay=g.getDate(),a.drawMonth=a.selectedMonth=g.getMonth(),a.drawYear=a.selectedYear=g.getFullYear(),(c=="M"||c=="Y")&&this._notifyChange(a)},_restrictMinMax:function(a,b){var c=this._getMinMaxDate(a,"min"),d=this._getMinMaxDate(a,"max"),e=c&&b<c?c:b;e=d&&e>d?d:e;return e},_notifyChange:function(a){var b=this._get(a,"onChangeMonthYear");b&&b.apply(a.input?a.input[0]:null,[a.selectedYear,a.selectedMonth+1,a])},_getNumberOfMonths:function(a){var b=this._get(a,"numberOfMonths");return b==null?[1,1]:typeof b=="number"?[1,b]:b},_getMinMaxDate:function(a,b){return this._determineDate(a,this._get(a,b+"Date"),null)},_getDaysInMonth:function(a,b){return 32-this._daylightSavingAdjust(new Date(a,b,32)).getDate()},_getFirstDayOfMonth:function(a,b){return(new Date(a,b,1)).getDay()},_canAdjustMonth:function(a,b,c,d){var e=this._getNumberOfMonths(a),f=this._daylightSavingAdjust(new Date(c,d+(b<0?b:e[0]*e[1]),1));b<0&&f.setDate(this._getDaysInMonth(f.getFullYear(),f.getMonth()));return this._isInRange(a,f)},_isInRange:function(a,b){var c=this._getMinMaxDate(a,"min"),d=this._getMinMaxDate(a,"max");return(!c||b.getTime()>=c.getTime())&&(!d||b.getTime()<=d.getTime())},_getFormatConfig:function(a){var b=this._get(a,"shortYearCutoff");b=typeof b!="string"?b:(new Date).getFullYear()%100+parseInt(b,10);return{shortYearCutoff:b,dayNamesShort:this._get(a,"dayNamesShort"),dayNames:this._get(a,"dayNames"),monthNamesShort:this._get(a,"monthNamesShort"),monthNames:this._get(a,"monthNames")}},_formatDate:function(a,b,c,d){b||(a.currentDay=a.selectedDay,a.currentMonth=a.selectedMonth,a.currentYear=a.selectedYear);var e=b?typeof b=="object"?b:this._daylightSavingAdjust(new Date(d,c,b)):this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay));return this.formatDate(this._get(a,"dateFormat"),e,this._getFormatConfig(a))}}),$.fn.datepicker=function(a){if(!this.length)return this;$.datepicker.initialized||($(document).mousedown($.datepicker._checkExternalClick).find("body").append($.datepicker.dpDiv),$.datepicker.initialized=!0);var b=Array.prototype.slice.call(arguments,1);if(typeof a=="string"&&(a=="isDisabled"||a=="getDate"||a=="widget"))return $.datepicker["_"+a+"Datepicker"].apply($.datepicker,[this[0]].concat(b));if(a=="option"&&arguments.length==2&&typeof arguments[1]=="string")return $.datepicker["_"+a+"Datepicker"].apply($.datepicker,[this[0]].concat(b));return this.each(function(){typeof a=="string"?$.datepicker["_"+a+"Datepicker"].apply($.datepicker,[this].concat(b)):$.datepicker._attachDatepicker(this,a)})},$.datepicker=new Datepicker,$.datepicker.initialized=!1,$.datepicker.uuid=(new Date).getTime(),$.datepicker.version="1.8.18",window["DP_jQuery_"+dpuuid]=$})(jQuery);(function(a,b){a.widget("ui.progressbar",{options:{value:0,max:100},min:0,_create:function(){this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min,"aria-valuemax":this.options.max,"aria-valuenow":this._value()}),this.valueDiv=a("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this.oldValue=this._value(),this._refreshValue()},destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove(),a.Widget.prototype.destroy.apply(this,arguments)},value:function(a){if(a===b)return this._value();this._setOption("value",a);return this},_setOption:function(b,c){b==="value"&&(this.options.value=c,this._refreshValue(),this._value()===this.options.max&&this._trigger("complete")),a.Widget.prototype._setOption.apply(this,arguments)},_value:function(){var a=this.options.value;typeof a!="number"&&(a=0);return Math.min(this.options.max,Math.max(this.min,a))},_percentage:function(){return 100*this._value()/this.options.max},_refreshValue:function(){var a=this.value(),b=this._percentage();this.oldValue!==a&&(this.oldValue=a,this._trigger("change")),this.valueDiv.toggle(a>this.min).toggleClass("ui-corner-right",a===this.options.max).width(b.toFixed(0)+"%"),this.element.attr("aria-valuenow",a)}}),a.extend(a.ui.progressbar,{version:"1.8.18"})})(jQuery);jQuery.effects||function(a,b){function l(b){if(!b||typeof b=="number"||a.fx.speeds[b])return!0;if(typeof b=="string"&&!a.effects[b])return!0;return!1}function k(b,c,d,e){typeof b=="object"&&(e=c,d=null,c=b,b=c.effect),a.isFunction(c)&&(e=c,d=null,c={});if(typeof c=="number"||a.fx.speeds[c])e=d,d=c,c={};a.isFunction(d)&&(e=d,d=null),c=c||{},d=d||c.duration,d=a.fx.off?0:typeof d=="number"?d:d in a.fx.speeds?a.fx.speeds[d]:a.fx.speeds._default,e=e||c.complete;return[b,c,d,e]}function j(a,b){var c={_:0},d;for(d in b)a[d]!=b[d]&&(c[d]=b[d]);return c}function i(b){var c,d;for(c in b)d=b[c],(d==null||a.isFunction(d)||c in g||/scrollbar/.test(c)||!/color/i.test(c)&&isNaN(parseFloat(d)))&&delete b[c];return b}function h(){var a=document.defaultView?document.defaultView.getComputedStyle(this,null):this.currentStyle,b={},c,d;if(a&&a.length&&a[0]&&a[a[0]]){var e=a.length;while(e--)c=a[e],typeof a[c]=="string"&&(d=c.replace(/\-(\w)/g,function(a,b){return b.toUpperCase()}),b[d]=a[c])}else for(c in a)typeof a[c]=="string"&&(b[c]=a[c]);return b}function d(b,d){var e;do{e=a.curCSS(b,d);if(e!=""&&e!="transparent"||a.nodeName(b,"body"))break;d="backgroundColor"}while(b=b.parentNode);return c(e)}function c(b){var c;if(b&&b.constructor==Array&&b.length==3)return b;if(c=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(b))return[parseInt(c[1],10),parseInt(c[2],10),parseInt(c[3],10)];if(c=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(b))return[parseFloat(c[1])*2.55,parseFloat(c[2])*2.55,parseFloat(c[3])*2.55];if(c=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(b))return[parseInt(c[1],16),parseInt(c[2],16),parseInt(c[3],16)];if(c=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(b))return[parseInt(c[1]+c[1],16),parseInt(c[2]+c[2],16),parseInt(c[3]+c[3],16)];if(c=/rgba\(0, 0, 0, 0\)/.exec(b))return e.transparent;return e[a.trim(b).toLowerCase()]}a.effects={},a.each(["backgroundColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","borderColor","color","outlineColor"],function(b,e){a.fx.step[e]=function(a){a.colorInit||(a.start=d(a.elem,e),a.end=c(a.end),a.colorInit=!0),a.elem.style[e]="rgb("+Math.max(Math.min(parseInt(a.pos*(a.end[0]-a.start[0])+a.start[0],10),255),0)+","+Math.max(Math.min(parseInt(a.pos*(a.end[1]-a.start[1])+a.start[1],10),255),0)+","+Math.max(Math.min(parseInt(a.pos*(a.end[2]-a.start[2])+a.start[2],10),255),0)+")"}});var e={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0],transparent:[255,255,255]},f=["add","remove","toggle"],g={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};a.effects.animateClass=function(b,c,d,e){a.isFunction(d)&&(e=d,d=null);return this.queue(function(){var g=a(this),k=g.attr("style")||" ",l=i(h.call(this)),m,n=g.attr("class");a.each(f,function(a,c){b[c]&&g[c+"Class"](b[c])}),m=i(h.call(this)),g.attr("class",n),g.animate(j(l,m),{queue:!1,duration:c,easing:d,complete:function(){a.each(f,function(a,c){b[c]&&g[c+"Class"](b[c])}),typeof g.attr("style")=="object"?(g.attr("style").cssText="",g.attr("style").cssText=k):g.attr("style",k),e&&e.apply(this,arguments),a.dequeue(this)}})})},a.fn.extend({_addClass:a.fn.addClass,addClass:function(b,c,d,e){return c?a.effects.animateClass.apply(this,[{add:b},c,d,e]):this._addClass(b)},_removeClass:a.fn.removeClass,removeClass:function(b,c,d,e){return c?a.effects.animateClass.apply(this,[{remove:b},c,d,e]):this._removeClass(b)},_toggleClass:a.fn.toggleClass,toggleClass:function(c,d,e,f,g){return typeof d=="boolean"||d===b?e?a.effects.animateClass.apply(this,[d?{add:c}:{remove:c},e,f,g]):this._toggleClass(c,d):a.effects.animateClass.apply(this,[{toggle:c},d,e,f])},switchClass:function(b,c,d,e,f){return a.effects.animateClass.apply(this,[{add:c,remove:b},d,e,f])}}),a.extend(a.effects,{version:"1.8.18",save:function(a,b){for(var c=0;c<b.length;c++)b[c]!==null&&a.data("ec.storage."+b[c],a[0].style[b[c]])},restore:function(a,b){for(var c=0;c<b.length;c++)b[c]!==null&&a.css(b[c],a.data("ec.storage."+b[c]))},setMode:function(a,b){b=="toggle"&&(b=a.is(":hidden")?"show":"hide");return b},getBaseline:function(a,b){var c,d;switch(a[0]){case"top":c=0;break;case"middle":c=.5;break;case"bottom":c=1;break;default:c=a[0]/b.height}switch(a[1]){case"left":d=0;break;case"center":d=.5;break;case"right":d=1;break;default:d=a[1]/b.width}return{x:d,y:c}},createWrapper:function(b){if(b.parent().is(".ui-effects-wrapper"))return b.parent();var c={width:b.outerWidth(!0),height:b.outerHeight(!0),"float":b.css("float")},d=a("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),e=document.activeElement;b.wrap(d),(b[0]===e||a.contains(b[0],e))&&a(e).focus(),d=b.parent(),b.css("position")=="static"?(d.css({position:"relative"}),b.css({position:"relative"})):(a.extend(c,{position:b.css("position"),zIndex:b.css("z-index")}),a.each(["top","left","bottom","right"],function(a,d){c[d]=b.css(d),isNaN(parseInt(c[d],10))&&(c[d]="auto")}),b.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"}));return d.css(c).show()},removeWrapper:function(b){var c,d=document.activeElement;if(b.parent().is(".ui-effects-wrapper")){c=b.parent().replaceWith(b),(b[0]===d||a.contains(b[0],d))&&a(d).focus();return c}return b},setTransition:function(b,c,d,e){e=e||{},a.each(c,function(a,c){unit=b.cssUnit(c),unit[0]>0&&(e[c]=unit[0]*d+unit[1])});return e}}),a.fn.extend({effect:function(b,c,d,e){var f=k.apply(this,arguments),g={options:f[1],duration:f[2],callback:f[3]},h=g.options.mode,i=a.effects[b];if(a.fx.off||!i)return h?this[h](g.duration,g.callback):this.each(function(){g.callback&&g.callback.call(this)});return i.call(this,g)},_show:a.fn.show,show:function(a){if(l(a))return this._show.apply(this,arguments);var b=k.apply(this,arguments);b[1].mode="show";return this.effect.apply(this,b)},_hide:a.fn.hide,hide:function(a){if(l(a))return this._hide.apply(this,arguments);var b=k.apply(this,arguments);b[1].mode="hide";return this.effect.apply(this,b)},__toggle:a.fn.toggle,toggle:function(b){if(l(b)||typeof b=="boolean"||a.isFunction(b))return this.__toggle.apply(this,arguments);var c=k.apply(this,arguments);c[1].mode="toggle";return this.effect.apply(this,c)},cssUnit:function(b){var c=this.css(b),d=[];a.each(["em","px","%","pt"],function(a,b){c.indexOf(b)>0&&(d=[parseFloat(c),b])});return d}}),a.easing.jswing=a.easing.swing,a.extend(a.easing,{def:"easeOutQuad",swing:function(b,c,d,e,f){return a.easing[a.easing.def](b,c,d,e,f)},easeInQuad:function(a,b,c,d,e){return d*(b/=e)*b+c},easeOutQuad:function(a,b,c,d,e){return-d*(b/=e)*(b-2)+c},easeInOutQuad:function(a,b,c,d,e){if((b/=e/2)<1)return d/2*b*b+c;return-d/2*(--b*(b-2)-1)+c},easeInCubic:function(a,b,c,d,e){return d*(b/=e)*b*b+c},easeOutCubic:function(a,b,c,d,e){return d*((b=b/e-1)*b*b+1)+c},easeInOutCubic:function(a,b,c,d,e){if((b/=e/2)<1)return d/2*b*b*b+c;return d/2*((b-=2)*b*b+2)+c},easeInQuart:function(a,b,c,d,e){return d*(b/=e)*b*b*b+c},easeOutQuart:function(a,b,c,d,e){return-d*((b=b/e-1)*b*b*b-1)+c},easeInOutQuart:function(a,b,c,d,e){if((b/=e/2)<1)return d/2*b*b*b*b+c;return-d/2*((b-=2)*b*b*b-2)+c},easeInQuint:function(a,b,c,d,e){return d*(b/=e)*b*b*b*b+c},easeOutQuint:function(a,b,c,d,e){return d*((b=b/e-1)*b*b*b*b+1)+c},easeInOutQuint:function(a,b,c,d,e){if((b/=e/2)<1)return d/2*b*b*b*b*b+c;return d/2*((b-=2)*b*b*b*b+2)+c},easeInSine:function(a,b,c,d,e){return-d*Math.cos(b/e*(Math.PI/2))+d+c},easeOutSine:function(a,b,c,d,e){return d*Math.sin(b/e*(Math.PI/2))+c},easeInOutSine:function(a,b,c,d,e){return-d/2*(Math.cos(Math.PI*b/e)-1)+c},easeInExpo:function(a,b,c,d,e){return b==0?c:d*Math.pow(2,10*(b/e-1))+c},easeOutExpo:function(a,b,c,d,e){return b==e?c+d:d*(-Math.pow(2,-10*b/e)+1)+c},easeInOutExpo:function(a,b,c,d,e){if(b==0)return c;if(b==e)return c+d;if((b/=e/2)<1)return d/2*Math.pow(2,10*(b-1))+c;return d/2*(-Math.pow(2,-10*--b)+2)+c},easeInCirc:function(a,b,c,d,e){return-d*(Math.sqrt(1-(b/=e)*b)-1)+c},easeOutCirc:function(a,b,c,d,e){return d*Math.sqrt(1-(b=b/e-1)*b)+c},easeInOutCirc:function(a,b,c,d,e){if((b/=e/2)<1)return-d/2*(Math.sqrt(1-b*b)-1)+c;return d/2*(Math.sqrt(1-(b-=2)*b)+1)+c},easeInElastic:function(a,b,c,d,e){var f=1.70158,g=0,h=d;if(b==0)return c;if((b/=e)==1)return c+d;g||(g=e*.3);if(h<Math.abs(d)){h=d;var f=g/4}else var f=g/(2*Math.PI)*Math.asin(d/h);return-(h*Math.pow(2,10*(b-=1))*Math.sin((b*e-f)*2*Math.PI/g))+c},easeOutElastic:function(a,b,c,d,e){var f=1.70158,g=0,h=d;if(b==0)return c;if((b/=e)==1)return c+d;g||(g=e*.3);if(h<Math.abs(d)){h=d;var f=g/4}else var f=g/(2*Math.PI)*Math.asin(d/h);return h*Math.pow(2,-10*b)*Math.sin((b*e-f)*2*Math.PI/g)+d+c},easeInOutElastic:function(a,b,c,d,e){var f=1.70158,g=0,h=d;if(b==0)return c;if((b/=e/2)==2)return c+d;g||(g=e*.3*1.5);if(h<Math.abs(d)){h=d;var f=g/4}else var f=g/(2*Math.PI)*Math.asin(d/h);if(b<1)return-0.5*h*Math.pow(2,10*(b-=1))*Math.sin((b*e-f)*2*Math.PI/g)+c;return h*Math.pow(2,-10*(b-=1))*Math.sin((b*e-f)*2*Math.PI/g)*.5+d+c},easeInBack:function(a,c,d,e,f,g){g==b&&(g=1.70158);return e*(c/=f)*c*((g+1)*c-g)+d},easeOutBack:function(a,c,d,e,f,g){g==b&&(g=1.70158);return e*((c=c/f-1)*c*((g+1)*c+g)+1)+d},easeInOutBack:function(a,c,d,e,f,g){g==b&&(g=1.70158);if((c/=f/2)<1)return e/2*c*c*(((g*=1.525)+1)*c-g)+d;return e/2*((c-=2)*c*(((g*=1.525)+1)*c+g)+2)+d},easeInBounce:function(b,c,d,e,f){return e-a.easing.easeOutBounce(b,f-c,0,e,f)+d},easeOutBounce:function(a,b,c,d,e){return(b/=e)<1/2.75?d*7.5625*b*b+c:b<2/2.75?d*(7.5625*(b-=1.5/2.75)*b+.75)+c:b<2.5/2.75?d*(7.5625*(b-=2.25/2.75)*b+.9375)+c:d*(7.5625*(b-=2.625/2.75)*b+.984375)+c},easeInOutBounce:function(b,c,d,e,f){if(c<f/2)return a.easing.easeInBounce(b,c*2,0,e,f)*.5+d;return a.easing.easeOutBounce(b,c*2-f,0,e,f)*.5+e*.5+d}})}(jQuery);(function(a,b){a.effects.blind=function(b){return this.queue(function(){var c=a(this),d=["position","top","bottom","left","right"],e=a.effects.setMode(c,b.options.mode||"hide"),f=b.options.direction||"vertical";a.effects.save(c,d),c.show();var g=a.effects.createWrapper(c).css({overflow:"hidden"}),h=f=="vertical"?"height":"width",i=f=="vertical"?g.height():g.width();e=="show"&&g.css(h,0);var j={};j[h]=e=="show"?i:0,g.animate(j,b.duration,b.options.easing,function(){e=="hide"&&c.hide(),a.effects.restore(c,d),a.effects.removeWrapper(c),b.callback&&b.callback.apply(c[0],arguments),c.dequeue()})})}})(jQuery);(function(a,b){a.effects.bounce=function(b){return this.queue(function(){var c=a(this),d=["position","top","bottom","left","right"],e=a.effects.setMode(c,b.options.mode||"effect"),f=b.options.direction||"up",g=b.options.distance||20,h=b.options.times||5,i=b.duration||250;/show|hide/.test(e)&&d.push("opacity"),a.effects.save(c,d),c.show(),a.effects.createWrapper(c);var j=f=="up"||f=="down"?"top":"left",k=f=="up"||f=="left"?"pos":"neg",g=b.options.distance||(j=="top"?c.outerHeight({margin:!0})/3:c.outerWidth({margin:!0})/3);e=="show"&&c.css("opacity",0).css(j,k=="pos"?-g:g),e=="hide"&&(g=g/(h*2)),e!="hide"&&h--;if(e=="show"){var l={opacity:1};l[j]=(k=="pos"?"+=":"-=")+g,c.animate(l,i/2,b.options.easing),g=g/2,h--}for(var m=0;m<h;m++){var n={},p={};n[j]=(k=="pos"?"-=":"+=")+g,p[j]=(k=="pos"?"+=":"-=")+g,c.animate(n,i/2,b.options.easing).animate(p,i/2,b.options.easing),g=e=="hide"?g*2:g/2}if(e=="hide"){var l={opacity:0};l[j]=(k=="pos"?"-=":"+=")+g,c.animate(l,i/2,b.options.easing,function(){c.hide(),a.effects.restore(c,d),a.effects.removeWrapper(c),b.callback&&b.callback.apply(this,arguments)})}else{var n={},p={};n[j]=(k=="pos"?"-=":"+=")+g,p[j]=(k=="pos"?"+=":"-=")+g,c.animate(n,i/2,b.options.easing).animate(p,i/2,b.options.easing,function(){a.effects.restore(c,d),a.effects.removeWrapper(c),b.callback&&b.callback.apply(this,arguments)})}c.queue("fx",function(){c.dequeue()}),c.dequeue()})}})(jQuery);(function(a,b){a.effects.clip=function(b){return this.queue(function(){var c=a(this),d=["position","top","bottom","left","right","height","width"],e=a.effects.setMode(c,b.options.mode||"hide"),f=b.options.direction||"vertical";a.effects.save(c,d),c.show();var g=a.effects.createWrapper(c).css({overflow:"hidden"}),h=c[0].tagName=="IMG"?g:c,i={size:f=="vertical"?"height":"width",position:f=="vertical"?"top":"left"},j=f=="vertical"?h.height():h.width();e=="show"&&(h.css(i.size,0),h.css(i.position,j/2));var k={};k[i.size]=e=="show"?j:0,k[i.position]=e=="show"?0:j/2,h.animate(k,{queue:!1,duration:b.duration,easing:b.options.easing,complete:function(){e=="hide"&&c.hide(),a.effects.restore(c,d),a.effects.removeWrapper(c),b.callback&&b.callback.apply(c[0],arguments),c.dequeue()}})})}})(jQuery);(function(a,b){a.effects.drop=function(b){return this.queue(function(){var c=a(this),d=["position","top","bottom","left","right","opacity"],e=a.effects.setMode(c,b.options.mode||"hide"),f=b.options.direction||"left";a.effects.save(c,d),c.show(),a.effects.createWrapper(c);var g=f=="up"||f=="down"?"top":"left",h=f=="up"||f=="left"?"pos":"neg",i=b.options.distance||(g=="top"?c.outerHeight({margin:!0})/2:c.outerWidth({margin:!0})/2);e=="show"&&c.css("opacity",0).css(g,h=="pos"?-i:i);var j={opacity:e=="show"?1:0};j[g]=(e=="show"?h=="pos"?"+=":"-=":h=="pos"?"-=":"+=")+i,c.animate(j,{queue:!1,duration:b.duration,easing:b.options.easing,complete:function(){e=="hide"&&c.hide(),a.effects.restore(c,d),a.effects.removeWrapper(c),b.callback&&b.callback.apply(this,arguments),c.dequeue()}})})}})(jQuery);(function(a,b){a.effects.explode=function(b){return this.queue(function(){var c=b.options.pieces?Math.round(Math.sqrt(b.options.pieces)):3,d=b.options.pieces?Math.round(Math.sqrt(b.options.pieces)):3;b.options.mode=b.options.mode=="toggle"?a(this).is(":visible")?"hide":"show":b.options.mode;var e=a(this).show().css("visibility","hidden"),f=e.offset();f.top-=parseInt(e.css("marginTop"),10)||0,f.left-=parseInt(e.css("marginLeft"),10)||0;var g=e.outerWidth(!0),h=e.outerHeight(!0);for(var i=0;i<c;i++)for(var j=0;j<d;j++)e.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-j*(g/d),top:-i*(h/c)}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:g/d,height:h/c,left:f.left+j*(g/d)+(b.options.mode=="show"?(j-Math.floor(d/2))*(g/d):0),top:f.top+i*(h/c)+(b.options.mode=="show"?(i-Math.floor(c/2))*(h/c):0),opacity:b.options.mode=="show"?0:1}).animate({left:f.left+j*(g/d)+(b.options.mode=="show"?0:(j-Math.floor(d/2))*(g/d)),top:f.top+i*(h/c)+(b.options.mode=="show"?0:(i-Math.floor(c/2))*(h/c)),opacity:b.options.mode=="show"?1:0},b.duration||500);setTimeout(function(){b.options.mode=="show"?e.css({visibility:"visible"}):e.css({visibility:"visible"}).hide(),b.callback&&b.callback.apply(e[0]),e.dequeue(),a("div.ui-effects-explode").remove()},b.duration||500)})}})(jQuery);(function(a,b){a.effects.fade=function(b){return this.queue(function(){var c=a(this),d=a.effects.setMode(c,b.options.mode||"hide");c.animate({opacity:d},{queue:!1,duration:b.duration,easing:b.options.easing,complete:function(){b.callback&&b.callback.apply(this,arguments),c.dequeue()}})})}})(jQuery);(function(a,b){a.effects.fold=function(b){return this.queue(function(){var c=a(this),d=["position","top","bottom","left","right"],e=a.effects.setMode(c,b.options.mode||"hide"),f=b.options.size||15,g=!!b.options.horizFirst,h=b.duration?b.duration/2:a.fx.speeds._default/2;a.effects.save(c,d),c.show();var i=a.effects.createWrapper(c).css({overflow:"hidden"}),j=e=="show"!=g,k=j?["width","height"]:["height","width"],l=j?[i.width(),i.height()]:[i.height(),i.width()],m=/([0-9]+)%/.exec(f);m&&(f=parseInt(m[1],10)/100*l[e=="hide"?0:1]),e=="show"&&i.css(g?{height:0,width:f}:{height:f,width:0});var n={},p={};n[k[0]]=e=="show"?l[0]:f,p[k[1]]=e=="show"?l[1]:0,i.animate(n,h,b.options.easing).animate(p,h,b.options.easing,function(){e=="hide"&&c.hide(),a.effects.restore(c,d),a.effects.removeWrapper(c),b.callback&&b.callback.apply(c[0],arguments),c.dequeue()})})}})(jQuery);(function(a,b){a.effects.highlight=function(b){return this.queue(function(){var c=a(this),d=["backgroundImage","backgroundColor","opacity"],e=a.effects.setMode(c,b.options.mode||"show"),f={backgroundColor:c.css("backgroundColor")};e=="hide"&&(f.opacity=0),a.effects.save(c,d),c.show().css({backgroundImage:"none",backgroundColor:b.options.color||"#ffff99"}).animate(f,{queue:!1,duration:b.duration,easing:b.options.easing,complete:function(){e=="hide"&&c.hide(),a.effects.restore(c,d),e=="show"&&!a.support.opacity&&this.style.removeAttribute("filter"),b.callback&&b.callback.apply(this,arguments),c.dequeue()}})})}})(jQuery);(function(a,b){a.effects.pulsate=function(b){return this.queue(function(){var c=a(this),d=a.effects.setMode(c,b.options.mode||"show");times=(b.options.times||5)*2-1,duration=b.duration?b.duration/2:a.fx.speeds._default/2,isVisible=c.is(":visible"),animateTo=0,isVisible||(c.css("opacity",0).show(),animateTo=1),(d=="hide"&&isVisible||d=="show"&&!isVisible)&&times--;for(var e=0;e<times;e++)c.animate({opacity:animateTo},duration,b.options.easing),animateTo=(animateTo+1)%2;c.animate({opacity:animateTo},duration,b.options.easing,function(){animateTo==0&&c.hide(),b.callback&&b.callback.apply(this,arguments)}),c.queue("fx",function(){c.dequeue()}).dequeue()})}})(jQuery);(function(a,b){a.effects.puff=function(b){return this.queue(function(){var c=a(this),d=a.effects.setMode(c,b.options.mode||"hide"),e=parseInt(b.options.percent,10)||150,f=e/100,g={height:c.height(),width:c.width()};a.extend(b.options,{fade:!0,mode:d,percent:d=="hide"?e:100,from:d=="hide"?g:{height:g.height*f,width:g.width*f}}),c.effect("scale",b.options,b.duration,b.callback),c.dequeue()})},a.effects.scale=function(b){return this.queue(function(){var c=a(this),d=a.extend(!0,{},b.options),e=a.effects.setMode(c,b.options.mode||"effect"),f=parseInt(b.options.percent,10)||(parseInt(b.options.percent,10)==0?0:e=="hide"?0:100),g=b.options.direction||"both",h=b.options.origin;e!="effect"&&(d.origin=h||["middle","center"],d.restore=!0);var i={height:c.height(),width:c.width()};c.from=b.options.from||(e=="show"?{height:0,width:0}:i);var j={y:g!="horizontal"?f/100:1,x:g!="vertical"?f/100:1};c.to={height:i.height*j.y,width:i.width*j.x},b.options.fade&&(e=="show"&&(c.from.opacity=0,c.to.opacity=1),e=="hide"&&(c.from.opacity=1,c.to.opacity=0)),d.from=c.from,d.to=c.to,d.mode=e,c.effect("size",d,b.duration,b.callback),c.dequeue()})},a.effects.size=function(b){return this.queue(function(){var c=a(this),d=["position","top","bottom","left","right","width","height","overflow","opacity"],e=["position","top","bottom","left","right","overflow","opacity"],f=["width","height","overflow"],g=["fontSize"],h=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],i=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],j=a.effects.setMode(c,b.options.mode||"effect"),k=b.options.restore||!1,l=b.options.scale||"both",m=b.options.origin,n={height:c.height(),width:c.width()};c.from=b.options.from||n,c.to=b.options.to||n;if(m){var p=a.effects.getBaseline(m,n);c.from.top=(n.height-c.from.height)*p.y,c.from.left=(n.width-c.from.width)*p.x,c.to.top=(n.height-c.to.height)*p.y,c.to.left=(n.width-c.to.width)*p.x}var q={from:{y:c.from.height/n.height,x:c.from.width/n.width},to:{y:c.to.height/n.height,x:c.to.width/n.width}};if(l=="box"||l=="both")q.from.y!=q.to.y&&(d=d.concat(h),c.from=a.effects.setTransition(c,h,q.from.y,c.from),c.to=a.effects.setTransition(c,h,q.to.y,c.to)),q.from.x!=q.to.x&&(d=d.concat(i),c.from=a.effects.setTransition(c,i,q.from.x,c.from),c.to=a.effects.setTransition(c,i,q.to.x,c.to));(l=="content"||l=="both")&&q.from.y!=q.to.y&&(d=d.concat(g),c.from=a.effects.setTransition(c,g,q.from.y,c.from),c.to=a.effects.setTransition(c,g,q.to.y,c.to)),a.effects.save(c,k?d:e),c.show(),a.effects.createWrapper(c),c.css("overflow","hidden").css(c.from);if(l=="content"||l=="both")h=h.concat(["marginTop","marginBottom"]).concat(g),i=i.concat(["marginLeft","marginRight"]),f=d.concat(h).concat(i),c.find("*[width]").each(function(){child=a(this),k&&a.effects.save(child,f);var c={height:child.height(),width:child.width()};child.from={height:c.height*q.from.y,width:c.width*q.from.x},child.to={height:c.height*q.to.y,width:c.width*q.to.x},q.from.y!=q.to.y&&(child.from=a.effects.setTransition(child,h,q.from.y,child.from),child.to=a.effects.setTransition(child,h,q.to.y,child.to)),q.from.x!=q.to.x&&(child.from=a.effects.setTransition(child,i,q.from.x,child.from),child.to=a.effects.setTransition(child,i,q.to.x,child.to)),child.css(child.from),child.animate(child.to,b.duration,b.options.easing,function(){k&&a.effects.restore(child,f)})});c.animate(c.to,{queue:!1,duration:b.duration,easing:b.options.easing,complete:function(){c.to.opacity===0&&c.css("opacity",c.from.opacity),j=="hide"&&c.hide(),a.effects.restore(c,k?d:e),a.effects.removeWrapper(c),b.callback&&b.callback.apply(this,arguments),c.dequeue()}})})}})(jQuery);(function(a,b){a.effects.shake=function(b){return this.queue(function(){var c=a(this),d=["position","top","bottom","left","right"],e=a.effects.setMode(c,b.options.mode||"effect"),f=b.options.direction||"left",g=b.options.distance||20,h=b.options.times||3,i=b.duration||b.options.duration||140;a.effects.save(c,d),c.show(),a.effects.createWrapper(c);var j=f=="up"||f=="down"?"top":"left",k=f=="up"||f=="left"?"pos":"neg",l={},m={},n={};l[j]=(k=="pos"?"-=":"+=")+g,m[j]=(k=="pos"?"+=":"-=")+g*2,n[j]=(k=="pos"?"-=":"+=")+g*2,c.animate(l,i,b.options.easing);for(var p=1;p<h;p++)c.animate(m,i,b.options.easing).animate(n,i,b.options.easing);c.animate(m,i,b.options.easing).animate(l,i/2,b.options.easing,function(){a.effects.restore(c,d),a.effects.removeWrapper(c),b.callback&&b.callback.apply(this,arguments)}),c.queue("fx",function(){c.dequeue()}),c.dequeue()})}})(jQuery);(function(a,b){a.effects.slide=function(b){return this.queue(function(){var c=a(this),d=["position","top","bottom","left","right"],e=a.effects.setMode(c,b.options.mode||"show"),f=b.options.direction||"left";a.effects.save(c,d),c.show(),a.effects.createWrapper(c).css({overflow:"hidden"});var g=f=="up"||f=="down"?"top":"left",h=f=="up"||f=="left"?"pos":"neg",i=b.options.distance||(g=="top"?c.outerHeight({margin:!0}):c.outerWidth({margin:!0}));e=="show"&&c.css(g,h=="pos"?isNaN(i)?"-"+i:-i:i);var j={};j[g]=(e=="show"?h=="pos"?"+=":"-=":h=="pos"?"-=":"+=")+i,c.animate(j,{queue:!1,duration:b.duration,easing:b.options.easing,complete:function(){e=="hide"&&c.hide(),a.effects.restore(c,d),a.effects.removeWrapper(c),b.callback&&b.callback.apply(this,arguments),c.dequeue()}})})}})(jQuery);(function(a,b){a.effects.transfer=function(b){return this.queue(function(){var c=a(this),d=a(b.options.to),e=d.offset(),f={top:e.top,left:e.left,height:d.innerHeight(),width:d.innerWidth()},g=c.offset(),h=a('<div class="ui-effects-transfer"></div>').appendTo(document.body).addClass(b.options.className).css({top:g.top,left:g.left,height:c.innerHeight(),width:c.innerWidth(),position:"absolute"}).animate(f,b.duration,b.options.easing,function(){h.remove(),b.callback&&b.callback.apply(c[0],arguments),c.dequeue()})})}})(jQuery);;(function($){$.fn.drag_drop_selectable=function(options){$.fn.captureKeys();var $_this=this;var settings=$.extend({},$.fn.drag_drop_selectable.defaults,options||{});return $(this).each(function(i){var $list=$(this);var list_id=$.fn.drag_drop_selectable.unique++;$.fn.drag_drop_selectable.stack[list_id]={"selected":[],"all":[]};$list.attr('dds',list_id);$.fn.drag_drop_selectable.settings[list_id]=settings;$list.find('li').each(function(){var $item=$(this);var item_id=$.fn.drag_drop_selectable.unique++;$item.attr('dds',item_id);$.fn.drag_drop_selectable.stack[list_id].all.push(item_id);$(this).bind('click.dds_select',function(e){if($.fn.isPressed(CTRL_KEY)||($.fn.drag_drop_selectable.stack[$.fn.drag_drop_selectable.getListId($(this).attr('dds'))].selected.length==1&&$(this).hasClass('dds_selected'))){$.fn.drag_drop_selectable.toggle(item_id);}else{$.fn.drag_drop_selectable.replace(item_id);}}).bind('dds.select',function(){$(this).addClass('dds_selected').addClass($.fn.drag_drop_selectable.settings[$.fn.drag_drop_selectable.getListId($(this).attr('dds'))].selectClass);}).bind('dds.deselect',function(){$(this).removeClass('dds_selected').removeClass($.fn.drag_drop_selectable.settings[$.fn.drag_drop_selectable.getListId($(this).attr('dds'))].selectClass);;}).css({cursor:'pointer'});}).draggable({helper:function(){$clicked=$(this);if(!$clicked.hasClass('dds_selected')){$clicked.trigger('click.dds_select');}
var list=$.fn.drag_drop_selectable.getListId($clicked.attr('dds'));var $helper=$('<div dds_list="'+list+'"><div style="margin-top:-'+$.fn.drag_drop_selectable.getMarginForDragging($clicked)+'px;" /></div>').append($.fn.drag_drop_selectable.getSelectedForDragging($clicked.attr('dds')));$.fn.drag_drop_selectable.getListItems(list).filter('.dds_selected').addClass($.fn.drag_drop_selectable.settings[list].ghostClass);return $helper;},distance:5,revert:'invalid',cursor:'move',stop:function(e,ui){var list=$.fn.drag_drop_selectable.getListId($clicked.attr('dds'));$.fn.drag_drop_selectable.getListItems(list).filter('.dds_selected').removeClass($.fn.drag_drop_selectable.settings[list].ghostClass);}});$list.droppable({drop:function(e,ui){var oldlist=parseInt(ui.helper.attr('dds_list'));ui.helper.find('li.dds_selected').each(function(){var iid=parseInt($(this).attr('dds_drag'));$.fn.drag_drop_selectable.moveBetweenLists(iid,oldlist,list_id);});if($.fn.drag_drop_selectable.settings[oldlist]&&typeof($.fn.drag_drop_selectable.settings[oldlist].onListChange)=='function'){setTimeout(function(){$.fn.drag_drop_selectable.settings[oldlist].onListChange($('ul[dds='+oldlist+']'));},50);}
if($.fn.drag_drop_selectable.settings[list_id]&&typeof($.fn.drag_drop_selectable.settings[list_id].onListChange)=='function'){setTimeout(function(){$.fn.drag_drop_selectable.settings[list_id].onListChange($('ul[dds='+list_id+']'));},50);}},accept:function(d){if($.fn.drag_drop_selectable.getListId(d.attr('dds'))==$(this).attr('dds')){return false;}
return true;},hoverClass:$.fn.drag_drop_selectable.settings[list_id].hoverClass,tolerance:'pointer'});});};$.fn.drag_drop_selectable.moveBetweenLists=function(item_id,old_list_id,new_list_id){$.fn.drag_drop_selectable.deselect(parseInt(item_id));$.fn.drag_drop_selectable.stack[old_list_id].all.splice($.inArray(parseInt(item_id),$.fn.drag_drop_selectable.stack[old_list_id].all),1);$.fn.drag_drop_selectable.stack[new_list_id].all.push(parseInt(item_id));$('ul[dds='+old_list_id+']').find('li[dds='+item_id+']').removeClass($.fn.drag_drop_selectable.settings[old_list_id].ghostClass).appendTo($('ul[dds='+new_list_id+']'));};$.fn.drag_drop_selectable.getSelectedForDragging=function(item_id){var list=$.fn.drag_drop_selectable.getListId(item_id);var $others=$.fn.drag_drop_selectable.getListItems(list).clone().each(function(){$(this).not('.dds_selected').css({visibility:'hidden'});$(this).filter('.dds_selected').addClass($.fn.drag_drop_selectable.settings[list].moveClass).css({opacity:$.fn.drag_drop_selectable.settings[list].moveOpacity});;$(this).attr('dds_drag',$(this).attr('dds'))
$(this).attr('dds','');});return $others;};$.fn.drag_drop_selectable.getMarginForDragging=function($item){var this_offset=$item.position().top;var first_offset=$.fn.drag_drop_selectable.getListItems($.fn.drag_drop_selectable.getListId($item.attr('dds'))).eq(0).position().top;return this_offset-first_offset;}
$.fn.drag_drop_selectable.toggle=function(id){if(!$.fn.drag_drop_selectable.isSelected(id)){$.fn.drag_drop_selectable.select(id);}else{$.fn.drag_drop_selectable.deselect(id);}};$.fn.drag_drop_selectable.select=function(id){if(!$.fn.drag_drop_selectable.isSelected(id)){var list=$.fn.drag_drop_selectable.getListId(id);$.fn.drag_drop_selectable.stack[list].selected.push(id);$('[dds='+id+']').trigger('dds.select');}};$.fn.drag_drop_selectable.deselect=function(id){if($.fn.drag_drop_selectable.isSelected(id)){var list=$.fn.drag_drop_selectable.getListId(id);$.fn.drag_drop_selectable.stack[list].selected.splice($.inArray(id,$.fn.drag_drop_selectable.stack[list].selected),1);$('[dds='+id+']').trigger('dds.deselect');}};$.fn.drag_drop_selectable.isSelected=function(id){return $('li[dds='+id+']').hasClass('dds_selected');};$.fn.drag_drop_selectable.replace=function(id){var list=$.fn.drag_drop_selectable.getListId(id);$.fn.drag_drop_selectable.selectNone(list);$.fn.drag_drop_selectable.stack[list].selected.push(id);$('[dds='+id+']').trigger('dds.select');};$.fn.drag_drop_selectable.selectNone=function(list_id){$.fn.drag_drop_selectable.getListItems(list_id).each(function(){$.fn.drag_drop_selectable.deselect($(this).attr('dds'));});return false;};$.fn.drag_drop_selectable.selectAll=function(list_id){$.fn.drag_drop_selectable.getListItems(list_id).each(function(){$.fn.drag_drop_selectable.select($(this).attr('dds'));});return false;};$.fn.drag_drop_selectable.selectInvert=function(list_id){$.fn.drag_drop_selectable.getListItems(list_id).each(function(){$.fn.drag_drop_selectable.toggle($(this).attr('dds'));});return false;};$.fn.drag_drop_selectable.getListItems=function(list_id){return $('ul[dds='+list_id+'] li');};$.fn.drag_drop_selectable.getListId=function(item_id){return parseInt($('li[dds='+item_id+']').parent('ul').eq(0).attr('dds'));};$.fn.drag_drop_selectable.serializeArray=function(list_id){var out=[];$.fn.drag_drop_selectable.getListItems(list_id).each(function(){out.push($(this).attr('id'));});return out;};$.fn.drag_drop_selectable.serialize=function(list_id){return $.fn.drag_drop_selectable.serializeArray(list_id).join(", ");};$.fn.drag_drop_selectable.moveAll=function(listOld,listNew){$.fn.drag_drop_selectable.getListItems(listOld).each(function(){var iid=parseInt($(this).attr('dds'));$.fn.drag_drop_selectable.moveBetweenLists(iid,listOld,listNew);});};$.fn.drag_drop_selectable.unique=0;$.fn.drag_drop_selectable.stack=[];$.fn.drag_drop_selectable.defaults={moveOpacity:0.8,ghostClass:'dds_ghost',hoverClass:'dds_hover',moveClass:'dds_move',selectedClass:'dds_selected',onListChange:function(list){console.log(list.attr('id'));}}
$.fn.drag_drop_selectable.settings=[];$.extend({dds:{selectAll:function(id){return $.fn.drag_drop_selectable.selectAll($('#'+id).attr('dds'));},selectNone:function(id){return $.fn.drag_drop_selectable.selectNone($('#'+id).attr('dds'));},selectInvert:function(id){return $.fn.drag_drop_selectable.selectInvert($('#'+id).attr('dds'));},serialize:function(id){return $.fn.drag_drop_selectable.serialize($('#'+id).attr('dds'));},moveAll:function(idOld,idNew){return $.fn.drag_drop_selectable.moveAll($('#'+idOld).attr('dds'),$('#'+idNew).attr('dds'));}}});var CTRL_KEY=17;var ALT_KEY=18;var SHIFT_KEY=16;var META_KEY=92;$.fn.captureKeys=function(){if($.fn.captureKeys.capturing){return;}
$(document).keydown(function(e){if(e.keyCode==CTRL_KEY){$.fn.captureKeys.stack.CTRL_KEY=true}
if(e.keyCode==SHIFT_KEY){$.fn.captureKeys.stack.SHIFT_KEY=true}
if(e.keyCode==ALT_KEY){$.fn.captureKeys.stack.ALT_KEY=true}
if(e.keyCode==META_KEY){$.fn.captureKeys.stack.META_KEY=true}}).keyup(function(e){if(e.keyCode==CTRL_KEY){$.fn.captureKeys.stack.CTRL_KEY=false}
if(e.keyCode==SHIFT_KEY){$.fn.captureKeys.stack.SHIFT_KEY=false}
if(e.keyCode==ALT_KEY){$.fn.captureKeys.stack.ALT_KEY=false}
if(e.keyCode==META_KEY){$.fn.captureKeys.stack.META_KEY=false}});};$.fn.captureKeys.stack={CTRL_KEY:false,SHIFT_KEY:false,ALT_KEY:false,META_KEY:false}
$.fn.captureKeys.capturing=false;$.fn.isPressed=function(key){switch(key){case CTRL_KEY:return $.fn.captureKeys.stack.CTRL_KEY;case ALT_KEY:return $.fn.captureKeys.stack.ALT_KEY;case SHIFT_KEY:return $.fn.captureKeys.stack.SHIFT_KEY;case META_KEY:return $.fn.captureKeys.stack.META_KEY;default:return false;}}})(jQuery);;
/*!
 * jQuery UI Touch Punch 0.2.3
 *
 * Copyright 2011–2014, Dave Furfero
 * Dual licensed under the MIT or GPL Version 2 licenses.
 *
 * Depends:
 *  jquery.ui.widget.js
 *  jquery.ui.mouse.js
 */
!function(a){function f(a,b){if(!(a.originalEvent.touches.length>1)){a.preventDefault();var c=a.originalEvent.changedTouches[0],d=document.createEvent("MouseEvents");d.initMouseEvent(b,!0,!0,window,1,c.screenX,c.screenY,c.clientX,c.clientY,!1,!1,!1,!1,0,null),a.target.dispatchEvent(d)}}if(a.support.touch="ontouchend"in document,a.support.touch){var e,b=a.ui.mouse.prototype,c=b._mouseInit,d=b._mouseDestroy;b._touchStart=function(a){var b=this;!e&&b._mouseCapture(a.originalEvent.changedTouches[0])&&(e=!0,b._touchMoved=!1,f(a,"mouseover"),f(a,"mousemove"),f(a,"mousedown"))},b._touchMove=function(a){e&&(this._touchMoved=!0,f(a,"mousemove"))},b._touchEnd=function(a){e&&(f(a,"mouseup"),f(a,"mouseout"),this._touchMoved||f(a,"click"),e=!1)},b._mouseInit=function(){var b=this;b.element.bind({touchstart:a.proxy(b,"_touchStart"),touchmove:a.proxy(b,"_touchMove"),touchend:a.proxy(b,"_touchEnd")}),c.call(b)},b._mouseDestroy=function(){var b=this;b.element.unbind({touchstart:a.proxy(b,"_touchStart"),touchmove:a.proxy(b,"_touchMove"),touchend:a.proxy(b,"_touchEnd")}),d.call(b)}}}(jQuery);
;/*!
* zeynepjs v2.1.2
* A light-weight multi-level jQuery side menu plugin.
* It's fully customizable and is compatible with modern browsers such as Google Chrome, Mozilla Firefox, Safari, Edge and Internet Explorer
* MIT License
* by Huseyin ELMAS
*/
!function(l,s){var n={htmlClass:!0};function i(e,t){this.element=e,this.eventController=o,this.options=l.extend({},n,t),this.options.initialized=!1,this.init()}i.prototype.init=function(){var s=this.element,e=this.options,i=this.eventController.bind(this);!0!==e.initialized&&(i("loading"),s.find("[data-submenu]").on("click",function(e){e.preventDefault();var t,n=l(this).attr("data-submenu"),o=l("#"+n);o.length&&(i("opening",t={subMenu:!0,menuId:n}),s.find(".submenu.current").removeClass("current"),o.addClass("opened current"),s.hasClass("submenu-opened")||s.addClass("submenu-opened"),s.scrollTop(0),i("opened",t))}),s.find("[data-submenu-close]").on("click",function(e){e.preventDefault();var t,n=l(this).attr("data-submenu-close"),o=l("#"+n);o.length&&(i("closing",t={subMenu:!0,menuId:n}),o.removeClass("opened current"),s.find(".submenu.opened:last").addClass("current"),s.find(".submenu.opened").length||s.removeClass("submenu-opened"),o.scrollTop(0),i("closed",t))}),i("load"),this.options.htmlClass&&!l("html").hasClass("zeynep-initialized")&&l("html").addClass("zeynep-initialized"),e.initialized=!0)},i.prototype.open=function(){this.eventController("opening",{subMenu:!1}),this.element.addClass("opened"),this.options.htmlClass&&l("html").addClass("zeynep-opened"),this.eventController("opened",{subMenu:!1})},i.prototype.close=function(e){e||this.eventController("closing",{subMenu:!1}),this.element.removeClass("opened"),this.options.htmlClass&&l("html").removeClass("zeynep-opened"),e||this.eventController("closed",{subMenu:!1})},i.prototype.destroy=function(){this.eventController("destroying"),this.close(!0),this.element.find(".submenu.opened").removeClass("opened"),this.element.removeData(s),this.eventController("destroyed"),this.options=n,this.options.htmlClass&&l("html").removeClass("zeynep-initialized"),delete this.element,delete this.options,delete this.eventController},i.prototype.on=function(e,t){r.call(this,e,t)};var o=function(e,t){if(this.options[e]){if("function"!=typeof this.options[e])throw Error("event handler must be a function: "+e);this.options[e].call(this,this.element,this.options,t)}},r=function(e,t){if("string"!=typeof e)throw Error("event name is expected to be a string but got: "+typeof e);if("function"!=typeof t)throw Error("event handler is not a function for: "+e);this.options[e]=t};l.fn[s]=function(e){var t,n,o;return t=l(this[0]),n=e,o=null,t.data(s)?o=t.data(s):(o=new i(t,n||{}),t.data(s,o)),o}}(window.jQuery,"zeynep");
//# sourceMappingURL=zeynep.min.js.map
;jQuery.timer=function(interval,callback)
{var interval=interval||100;if(!callback)
return false;_timer=function(interval,callback){this.stop=function(){clearInterval(self.id);};this.internalCallback=function(){callback(self);};this.reset=function(val){if(self.id)
clearInterval(self.id);var val=val||100;this.id=setInterval(this.internalCallback,val);};this.interval=interval;this.id=setInterval(this.internalCallback,this.interval);var self=this;};return new _timer(interval,callback);};;jQuery.fn.farbtastic=function(callback){$.farbtastic(this,callback);return this;};jQuery.farbtastic=function(container,callback){var container=$(container).get(0);return container.farbtastic||(container.farbtastic=new jQuery._farbtastic(container,callback));}
jQuery._farbtastic=function(container,callback){var fb=this;$(container).html('<div class="farbtastic"><div class="color"></div><div class="wheel"></div><div class="overlay"></div><div class="h-marker marker"></div><div class="sl-marker marker"></div></div>');var e=$('.farbtastic',container);fb.wheel=$('.wheel',container).get(0);fb.radius=84;fb.square=100;fb.width=194;if(navigator.appVersion.match(/MSIE [0-6]\./)){$('*',e).each(function(){if(this.currentStyle.backgroundImage!='none'){var image=this.currentStyle.backgroundImage;image=this.currentStyle.backgroundImage.substring(5,image.length-2);$(this).css({'backgroundImage':'none','filter':"progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true, sizingMethod=crop, src='"+image+"')"});}});}
fb.linkTo=function(callback){if(typeof fb.callback=='object'){$(fb.callback).unbind('keyup',fb.updateValue);}
fb.color=null;if(typeof callback=='function'){fb.callback=callback;}
else if(typeof callback=='object'||typeof callback=='string'){fb.callback=$(callback);fb.callback.bind('keyup',fb.updateValue);if(fb.callback.get(0).value){fb.setColor(fb.callback.get(0).value);}}
return this;}
fb.updateValue=function(event){if(this.value&&this.value!=fb.color){fb.setColor(this.value);}}
fb.setColor=function(color){var unpack=fb.unpack(color);if(fb.color!=color&&unpack){fb.color=color;fb.rgb=unpack;fb.hsl=fb.RGBToHSL(fb.rgb);fb.updateDisplay();}
return this;}
fb.setHSL=function(hsl){fb.hsl=hsl;fb.rgb=fb.HSLToRGB(hsl);fb.color=fb.pack(fb.rgb);fb.updateDisplay();return this;}
fb.widgetCoords=function(event){var x,y;var el=event.target||event.srcElement;var reference=fb.wheel;if(typeof event.offsetX!='undefined'){var pos={x:event.offsetX,y:event.offsetY};var e=el;while(e){e.mouseX=pos.x;e.mouseY=pos.y;pos.x+=e.offsetLeft;pos.y+=e.offsetTop;e=e.offsetParent;}
var e=reference;var offset={x:0,y:0}
while(e){if(typeof e.mouseX!='undefined'){x=e.mouseX-offset.x;y=e.mouseY-offset.y;break;}
offset.x+=e.offsetLeft;offset.y+=e.offsetTop;e=e.offsetParent;}
e=el;while(e){e.mouseX=undefined;e.mouseY=undefined;e=e.offsetParent;}}
else{var pos=fb.absolutePosition(reference);x=(event.pageX||0*(event.clientX+$('html').get(0).scrollLeft))-pos.x;y=(event.pageY||0*(event.clientY+$('html').get(0).scrollTop))-pos.y;}
return{x:x-fb.width/2,y:y-fb.width/2};}
fb.mousedown=function(event){if(!document.dragging){$(document).bind('mousemove',fb.mousemove).bind('mouseup',fb.mouseup);document.dragging=true;}
var pos=fb.widgetCoords(event);fb.circleDrag=Math.max(Math.abs(pos.x),Math.abs(pos.y))*2>fb.square;fb.mousemove(event);return false;}
fb.mousemove=function(event){var pos=fb.widgetCoords(event);if(fb.circleDrag){var hue=Math.atan2(pos.x,-pos.y)/6.28;if(hue<0)hue+=1;fb.setHSL([hue,fb.hsl[1],fb.hsl[2]]);}
else{var sat=Math.max(0,Math.min(1,-(pos.x/fb.square)+.5));var lum=Math.max(0,Math.min(1,-(pos.y/fb.square)+.5));fb.setHSL([fb.hsl[0],sat,lum]);}
return false;}
fb.mouseup=function(){$(document).unbind('mousemove',fb.mousemove);$(document).unbind('mouseup',fb.mouseup);document.dragging=false;}
fb.updateDisplay=function(){var angle=fb.hsl[0]*6.28;$('.h-marker',e).css({left:Math.round(Math.sin(angle)*fb.radius+fb.width/2)+'px',top:Math.round(-Math.cos(angle)*fb.radius+fb.width/2)+'px'});$('.sl-marker',e).css({left:Math.round(fb.square*(.5-fb.hsl[1])+fb.width/2)+'px',top:Math.round(fb.square*(.5-fb.hsl[2])+fb.width/2)+'px'});$('.color',e).css('backgroundColor',fb.pack(fb.HSLToRGB([fb.hsl[0],1,0.5])));if(typeof fb.callback=='object'){$(fb.callback).css("cssText","background-color: "+fb.color+"; color: "+(fb.hsl[2]>0.5?'#000':'#fff')+" !important;");$(fb.callback).each(function(){if(this.value&&this.value!=fb.color){this.value=fb.color;}});}
else if(typeof fb.callback=='function'){fb.callback.call(fb,fb.color);}}
fb.absolutePosition=function(el){var r={x:el.offsetLeft,y:el.offsetTop};if(el.offsetParent){var tmp=fb.absolutePosition(el.offsetParent);r.x+=tmp.x;r.y+=tmp.y;}
return r;};fb.pack=function(rgb){var r=Math.round(rgb[0]*255);var g=Math.round(rgb[1]*255);var b=Math.round(rgb[2]*255);return'#'+(r<16?'0':'')+r.toString(16)+
(g<16?'0':'')+g.toString(16)+
(b<16?'0':'')+b.toString(16);}
fb.unpack=function(color){if(color.length==7){return[parseInt('0x'+color.substring(1,3))/255,parseInt('0x'+color.substring(3,5))/255,parseInt('0x'+color.substring(5,7))/255];}
else if(color.length==4){return[parseInt('0x'+color.substring(1,2))/15,parseInt('0x'+color.substring(2,3))/15,parseInt('0x'+color.substring(3,4))/15];}}
fb.HSLToRGB=function(hsl){var m1,m2,r,g,b;var h=hsl[0],s=hsl[1],l=hsl[2];m2=(l<=0.5)?l*(s+1):l+s-l*s;m1=l*2-m2;return[this.hueToRGB(m1,m2,h+0.33333),this.hueToRGB(m1,m2,h),this.hueToRGB(m1,m2,h-0.33333)];}
fb.hueToRGB=function(m1,m2,h){h=(h<0)?h+1:((h>1)?h-1:h);if(h*6<1)return m1+(m2-m1)*h*6;if(h*2<1)return m2;if(h*3<2)return m1+(m2-m1)*(0.66666-h)*6;return m1;}
fb.RGBToHSL=function(rgb){var min,max,delta,h,s,l;var r=rgb[0],g=rgb[1],b=rgb[2];min=Math.min(r,Math.min(g,b));max=Math.max(r,Math.max(g,b));delta=max-min;l=(min+max)/2;s=0;if(l>0&&l<1){s=delta/(l<0.5?(2*l):(2-2*l));}
h=0;if(delta>0){if(max==r&&max!=g)h+=(g-b)/delta;if(max==g&&max!=b)h+=(2+(b-r)/delta);if(max==b&&max!=r)h+=(4+(r-g)/delta);h/=6;}
return[h,s,l];}
$('*',e).mousedown(fb.mousedown);fb.setColor('#000000');if(callback){fb.linkTo(callback);}};
/*!
* jquery.qtip. The jQuery tooltip plugin
*
* Copyright (c) 2009 Craig Thompson
* http://craigsworks.com
*
* Licensed under MIT
* http://www.opensource.org/licenses/mit-license.php
*
* Launch  : February 2009
* Version : 1.0.0-rc3
* Released: Tuesday 12th May, 2009 - 00:00
* Debug: jquery.qtip.debug.js
*/
"use strict";(function($){$(document).ready(function(){var i;$(window).bind('resize scroll',function(event){for(i=0;i<$.fn.qtip.interfaces.length;i++){var api=$.fn.qtip.interfaces[i];if(api&&api.status&&api.status.rendered&&api.options.position.type!=='static'&&(api.options.position.adjust.scroll&&event.type==='scroll'||api.options.position.adjust.resize&&event.type==='resize')){api.updatePosition(event,true);}}});$(document).bind('mousedown.qtip',function(event){if($(event.target).parents('div.qtip').length===0){$('.qtip[unfocus]').each(function(){var api=$(this).qtip('api');if($(this).is(':visible')&&api&&api.status&&!api.status.disabled&&$(event.target).add(api.elements.target).length>1){api.hide(event);}});}});});function Corner(corner){if(!corner){return false;}
this.x=String(corner).replace(/middle/i,'center').match(/left|right|center/i)[0].toLowerCase();this.y=String(corner).replace(/middle/i,'center').match(/top|bottom|center/i)[0].toLowerCase();this.offset={left:0,top:0};this.precedance=(corner.charAt(0).search(/^(t|b)/)>-1)?'y':'x';this.string=function(){return(this.precedance==='y')?this.y+this.x:this.x+this.y;};}
function calculateTip(corner,width,height){var tips={bottomright:[[0,0],[width,height],[width,0]],bottomleft:[[0,0],[width,0],[0,height]],topright:[[0,height],[width,0],[width,height]],topleft:[[0,0],[0,height],[width,height]],topcenter:[[0,height],[width/2,0],[width,height]],bottomcenter:[[0,0],[width,0],[width/2,height]],rightcenter:[[0,0],[width,height/2],[0,height]],leftcenter:[[width,0],[width,height],[0,height/2]]};tips.lefttop=tips.bottomright;tips.righttop=tips.bottomleft;tips.leftbottom=tips.topright;tips.rightbottom=tips.topleft;return tips[corner];}
function calculateBorders(radius){var borders;if($('<canvas />').get(0).getContext){borders={topLeft:[radius,radius],topRight:[0,radius],bottomLeft:[radius,0],bottomRight:[0,0]};}
else if($.browser.msie){borders={topLeft:[-90,90,0],topRight:[-90,90,-radius],bottomLeft:[90,270,0],bottomRight:[90,270,-radius]};}
return borders;}
function jQueryStyle(style,sub){var styleObj,i;styleObj=$.extend(true,{},style);for(i in styleObj){if(sub===true&&(/(tip|classes)/i).test(i)){delete styleObj[i];}
else if(!sub&&(/(width|border|tip|title|classes|user)/i).test(i)){delete styleObj[i];}}
return styleObj;}
function sanitizeStyle(style){if(typeof style.tip!=='object'){style.tip={corner:style.tip};}
if(typeof style.tip.size!=='object'){style.tip.size={width:style.tip.size,height:style.tip.size};}
if(typeof style.border!=='object'){style.border={width:style.border};}
if(typeof style.width!=='object'){style.width={value:style.width};}
if(typeof style.width.max==='string'){style.width.max=parseInt(style.width.max.replace(/([0-9]+)/i,"$1"),10);}
if(typeof style.width.min==='string'){style.width.min=parseInt(style.width.min.replace(/([0-9]+)/i,"$1"),10);}
if(typeof style.tip.size.x==='number'){style.tip.size.width=style.tip.size.x;delete style.tip.size.x;}
if(typeof style.tip.size.y==='number'){style.tip.size.height=style.tip.size.y;delete style.tip.size.y;}
return style;}
function buildStyle(){var self,i,styleArray,styleExtend,finalStyle,ieAdjust;self=this;styleArray=[true,{}];for(i=0;i<arguments.length;i++){styleArray.push(arguments[i]);}
styleExtend=[$.extend.apply($,styleArray)];while(typeof styleExtend[0].name==='string'){styleExtend.unshift(sanitizeStyle($.fn.qtip.styles[styleExtend[0].name]));}
styleExtend.unshift(true,{classes:{tooltip:'qtip-'+(arguments[0].name||'defaults')}},$.fn.qtip.styles.defaults);finalStyle=$.extend.apply($,styleExtend);ieAdjust=($.browser.msie)?1:0;finalStyle.tip.size.width+=ieAdjust;finalStyle.tip.size.height+=ieAdjust;if(finalStyle.tip.size.width%2>0){finalStyle.tip.size.width+=1;}
if(finalStyle.tip.size.height%2>0){finalStyle.tip.size.height+=1;}
if(finalStyle.tip.corner===true){if(self.options.position.corner.tooltip==='center'&&self.options.position.corner.target==='center'){finalStyle.tip.corner=false;}
else{finalStyle.tip.corner=self.options.position.corner.tooltip;}}
return finalStyle;}
function drawBorder(canvas,coordinates,radius,color){var context=canvas.get(0).getContext('2d');context.fillStyle=color;context.beginPath();context.arc(coordinates[0],coordinates[1],radius,0,Math.PI*2,false);context.fill();}
function createBorder(){var self,i,width,radius,color,coordinates,containers,size,betweenWidth,betweenCorners,borderTop,borderBottom,borderCoord,sideWidth,vertWidth;self=this;self.elements.wrapper.find('.qtip-borderBottom, .qtip-borderTop').remove();width=self.options.style.border.width;radius=self.options.style.border.radius;color=self.options.style.border.color||self.options.style.tip.color;coordinates=calculateBorders(radius);containers={};for(i in coordinates){containers[i]='<div rel="'+i+'" style="'+((/Left/).test(i)?'left':'right')+':0; '+'position:absolute; height:'+radius+'px; width:'+radius+'px; overflow:hidden; line-height:0.1px; font-size:1px">';if($('<canvas />').get(0).getContext){containers[i]+='<canvas height="'+radius+'" width="'+radius+'" style="vertical-align: top"></canvas>';}
else if($.browser.msie){size=radius*2+3;containers[i]+='<v:arc stroked="false" fillcolor="'+color+'" startangle="'+coordinates[i][0]+'" endangle="'+coordinates[i][1]+'" '+'style="width:'+size+'px; height:'+size+'px; margin-top:'+((/bottom/).test(i)?-2:-1)+'px; '+'margin-left:'+((/Right/).test(i)?coordinates[i][2]-3.5:-1)+'px; '+'vertical-align:top; display:inline-block; behavior:url(#default#VML)"></v:arc>';}
containers[i]+='</div>';}
betweenWidth=self.getDimensions().width-(Math.max(width,radius)*2);betweenCorners='<div class="qtip-betweenCorners" style="height:'+radius+'px; width:'+betweenWidth+'px; '+'overflow:hidden; background-color:'+color+'; line-height:0.1px; font-size:1px;">';borderTop='<div class="qtip-borderTop" dir="ltr" style="height:'+radius+'px; '+'margin-left:'+radius+'px; line-height:0.1px; font-size:1px; padding:0;">'+containers.topLeft+containers.topRight+betweenCorners;self.elements.wrapper.prepend(borderTop);borderBottom='<div class="qtip-borderBottom" dir="ltr" style="height:'+radius+'px; '+'margin-left:'+radius+'px; line-height:0.1px; font-size:1px; padding:0;">'+containers.bottomLeft+containers.bottomRight+betweenCorners;self.elements.wrapper.append(borderBottom);if($('<canvas />').get(0).getContext){self.elements.wrapper.find('canvas').each(function(){borderCoord=coordinates[$(this).parent('[rel]:first').attr('rel')];drawBorder.call(self,$(this),borderCoord,radius,color);});}
else if($.browser.msie){self.elements.tooltip.append('<v:image style="behavior:url(#default#VML);"></v:image>');}
sideWidth=Math.max(radius,(radius+(width-radius)));vertWidth=Math.max(width-radius,0);self.elements.contentWrapper.css({border:'0px solid '+color,borderWidth:vertWidth+'px '+sideWidth+'px'});}
function drawTip(canvas,coordinates,color){var context=canvas.get(0).getContext('2d');context.fillStyle='#c8e3f8';context.beginPath();context.moveTo(coordinates[0][0],coordinates[0][1]);context.lineTo(coordinates[1][0],coordinates[1][1]);context.lineTo(coordinates[2][0],coordinates[2][1]);context.fill();}
function positionTip(corner){var self,ieAdjust,positionAdjust,paddingCorner,paddingSize,newMargin;self=this;if(self.options.style.tip.corner===false||!self.elements.tip){return;}
if(!corner){corner=new Corner(self.elements.tip.attr('rel'));}
ieAdjust=positionAdjust=($.browser.msie)?1:0;self.elements.tip.css(corner[corner.precedance],0);if(corner.precedance==='y'){if($.browser.msie){if(parseInt($.browser.version.charAt(0),10)===6){positionAdjust=corner.y==='top'?-3:1;}
else{positionAdjust=corner.y==='top'?1:2;}}
if(corner.x==='center'){self.elements.tip.css({left:'50%',marginLeft:-(self.options.style.tip.size.width/2)});}
else if(corner.x==='left'){self.elements.tip.css({left:self.options.style.border.radius-ieAdjust});}
else{self.elements.tip.css({right:self.options.style.border.radius+ieAdjust});}
if(corner.y==='top'){self.elements.tip.css({top:-positionAdjust});}
else{self.elements.tip.css({bottom:positionAdjust});}}
else{if($.browser.msie){positionAdjust=(parseInt($.browser.version.charAt(0),10)===6)?1:(corner.x==='left'?1:2);}
if(corner.y==='center'){self.elements.tip.css({top:'50%',marginTop:-(self.options.style.tip.size.height/2)});}
else if(corner.y==='top'){self.elements.tip.css({top:self.options.style.border.radius-ieAdjust});}
else{self.elements.tip.css({bottom:self.options.style.border.radius+ieAdjust});}
if(corner.x==='left'){self.elements.tip.css({left:-positionAdjust});}
else{self.elements.tip.css({right:positionAdjust});}}
paddingCorner='padding-'+corner[corner.precedance];paddingSize=self.options.style.tip.size[corner.precedance==='x'?'width':'height'];self.elements.tooltip.css('padding',0).css(paddingCorner,paddingSize);if($.browser.msie&&parseInt($.browser.version.charAt(0),6)===6){newMargin=parseInt(self.elements.tip.css('margin-top'),10)||0;newMargin+=parseInt(self.elements.content.css('margin-top'),10)||0;self.elements.tip.css({marginTop:newMargin});}}
function createTip(corner){var self,color,coordinates,coordsize,path,tip;self=this;if(self.elements.tip!==null){self.elements.tip.remove();}
color=self.options.style.tip.color||self.options.style.border.color;if(self.options.style.tip.corner===false){return;}
else if(!corner){corner=new Corner(self.options.style.tip.corner);}
coordinates=calculateTip(corner.string(),self.options.style.tip.size.width,self.options.style.tip.size.height);self.elements.tip='<div class="'+self.options.style.classes.tip+'" dir="ltr" rel="'+corner.string()+'" style="position:absolute; '+'height:'+self.options.style.tip.size.height+'px; width:'+self.options.style.tip.size.width+'px; '+'margin:0 auto; line-height:0.1px; font-size:1px;"></div>';self.elements.tooltip.prepend(self.elements.tip);if($('<canvas />').get(0).getContext){tip='<canvas height="'+self.options.style.tip.size.height+'" width="'+self.options.style.tip.size.width+'"></canvas>';}
else if($.browser.msie){coordsize=self.options.style.tip.size.width+','+self.options.style.tip.size.height;path='m'+coordinates[0][0]+','+coordinates[0][1];path+=' l'+coordinates[1][0]+','+coordinates[1][1];path+=' '+coordinates[2][0]+','+coordinates[2][1];path+=' xe';tip='<v:shape fillcolor="'+color+'" stroked="false" filled="true" path="'+path+'" coordsize="'+coordsize+'" '+'style="width:'+self.options.style.tip.size.width+'px; height:'+self.options.style.tip.size.height+'px; '+'line-height:0.1px; display:inline-block; behavior:url(#default#VML); '+'vertical-align:'+(corner.y==='top'?'bottom':'top')+'"></v:shape>';tip+='<v:image style="behavior:url(#default#VML);"></v:image>';self.elements.contentWrapper.css('position','relative');}
self.elements.tip=self.elements.tooltip.find('.'+self.options.style.classes.tip).eq(0);self.elements.tip.html(tip);if($('<canvas  />').get(0).getContext){drawTip.call(self,self.elements.tip.find('canvas:first'),coordinates,color);}
if(corner.y==='top'&&$.browser.msie&&parseInt($.browser.version.charAt(0),10)===6){self.elements.tip.css({marginTop:-4});}
positionTip.call(self,corner);}
function createTitle(){var self=this;if(self.elements.title!==null){self.elements.title.remove();}
self.elements.tooltip.attr('aria-labelledby','qtip-'+self.id+'-title');self.elements.title=$('<div id="qtip-'+self.id+'-title" class="'+self.options.style.classes.title+'"></div>').css(jQueryStyle(self.options.style.title,true)).css({zoom:($.browser.msie)?1:0}).prependTo(self.elements.contentWrapper);if(self.options.content.title.text){self.updateTitle.call(self,self.options.content.title.text);}
if(self.options.content.title.button!==false&&typeof self.options.content.title.button==='string'){self.elements.button=$('<a class="'+self.options.style.classes.button+'" role="button" style="float:right; position: relative; font-size:13px;"></a>').css(jQueryStyle(self.options.style.button,true)).html(self.options.content.title.button).prependTo(self.elements.title).click(function(event){if(!self.status.disabled){self.hide(event);}});}}
function assignEvents(){var self,showTarget,hideTarget,inactiveEvents;self=this;showTarget=self.options.show.when.target;hideTarget=self.options.hide.when.target;if(self.options.hide.fixed){hideTarget=hideTarget.add(self.elements.tooltip);}
inactiveEvents=['click','dblclick','mousedown','mouseup','mousemove','mouseout','mouseenter','mouseleave','mouseover'];function inactiveMethod(event){if(self.status.disabled===true){return;}
clearTimeout(self.timers.inactive);self.timers.inactive=setTimeout(function(){$(inactiveEvents).each(function(){hideTarget.unbind(this+'.qtip-inactive');self.elements.content.unbind(this+'.qtip-inactive');});self.hide(event);},self.options.hide.delay);}
if(self.options.hide.fixed===true){self.elements.tooltip.bind('mouseover.qtip',function(){if(self.status.disabled===true){return;}
clearTimeout(self.timers.hide);});}
function showMethod(event){if(self.status.disabled===true){return;}
if(self.options.hide.when.event==='inactive'){$(inactiveEvents).each(function(){hideTarget.bind(this+'.qtip-inactive',inactiveMethod);self.elements.content.bind(this+'.qtip-inactive',inactiveMethod);});inactiveMethod();}
clearTimeout(self.timers.show);clearTimeout(self.timers.hide);if(self.options.show.delay>0){self.timers.show=setTimeout(function(){self.show(event);},self.options.show.delay);}
else{self.show(event);}}
function hideMethod(event){if(self.status.disabled===true){return;}
if(self.options.hide.fixed===true&&(/mouse(out|leave)/i).test(self.options.hide.when.event)&&$(event.relatedTarget).parents('div.qtip[id^="qtip"]').length>0){event.stopPropagation();event.preventDefault();clearTimeout(self.timers.hide);return false;}
clearTimeout(self.timers.show);clearTimeout(self.timers.hide);self.elements.tooltip.stop(true,true);self.timers.hide=setTimeout(function(){self.hide(event);},self.options.hide.delay);}
if((self.options.show.when.target.add(self.options.hide.when.target).length===1&&self.options.show.when.event===self.options.hide.when.event&&self.options.hide.when.event!=='inactive')||self.options.hide.when.event==='unfocus'){self.cache.toggle=0;showTarget.bind(self.options.show.when.event+'.qtip',function(event){if(self.cache.toggle===0){showMethod(event);}
else{hideMethod(event);}});}
else{showTarget.bind(self.options.show.when.event+'.qtip',showMethod);if(self.options.hide.when.event!=='inactive'){hideTarget.bind(self.options.hide.when.event+'.qtip',hideMethod);}}
if((/(fixed|absolute)/).test(self.options.position.type)){self.elements.tooltip.bind('mouseover.qtip',self.focus);}
if(self.options.position.target==='mouse'&&self.options.position.type!=='static'){showTarget.bind('mousemove.qtip',function(event){self.cache.mouse={x:event.pageX,y:event.pageY};if(self.status.disabled===false&&self.options.position.adjust.mouse===true&&self.options.position.type!=='static'&&self.elements.tooltip.css('display')!=='none'){self.updatePosition(event);}});}}
function bgiframe(){var self,html,dimensions;self=this;dimensions=self.getDimensions();html='<iframe class="qtip-bgiframe" frameborder="0" tabindex="-1" src="javascript:false" '+'style="display:block; position:absolute; z-index:-1; filter:alpha(opacity=\'0\'); border: 1px solid red; '+'height:'+dimensions.height+'px; width:'+dimensions.width+'px" />';self.elements.bgiframe=self.elements.wrapper.prepend(html).children('.qtip-bgiframe:first');}
function construct(){var self,content,url,data,method;self=this;self.beforeRender.call(self);self.status.rendered=2;self.elements.tooltip='<div qtip="'+self.id+'" id="qtip-'+self.id+'" role="tooltip" '+'aria-describedby="qtip-'+self.id+'-content" class="qtip '+(self.options.style.classes.tooltip||self.options.style)+'" '+'style="display:none; -moz-border-radius:0; -webkit-border-radius:0; border-radius:0; position:'+self.options.position.type+';"> '+'  <div class="qtip-wrapper" style="position:relative; overflow:hidden; text-align:left;"> '+'    <div class="qtip-contentWrapper" style="overflow:hidden;"> '+'       <div id="qtip-'+self.id+'-content" class="qtip-content '+self.options.style.classes.content+'"></div> '+'</div></div></div>';self.elements.tooltip=$(self.elements.tooltip);self.elements.tooltip.appendTo(self.options.position.container);self.elements.tooltip.data('qtip',{current:0,interfaces:[self]});self.elements.wrapper=self.elements.tooltip.children('div:first');self.elements.contentWrapper=self.elements.wrapper.children('div:first');self.elements.content=self.elements.contentWrapper.children('div:first').css(jQueryStyle(self.options.style));if($.browser.msie){self.elements.wrapper.add(self.elements.content).css({zoom:1});}
if(self.options.hide.when.event==='unfocus'){self.elements.tooltip.attr('unfocus',true);}
if(typeof self.options.style.width.value==='number'){self.updateWidth();}
if($('<canvas />').get(0).getContext||$.browser.msie){if(self.options.style.border.radius>0){createBorder.call(self);}
else{self.elements.contentWrapper.css({border:self.options.style.border.width+'px solid '+self.options.style.border.color});}
if(self.options.style.tip.corner!==false){createTip.call(self);}}
else{self.elements.contentWrapper.css({border:self.options.style.border.width+'px solid '+self.options.style.border.color});self.options.style.border.radius=0;self.options.style.tip.corner=false;}
if((typeof self.options.content.text==='string'&&self.options.content.text.length>0)||(self.options.content.text.jquery&&self.options.content.text.length>0)){content=self.options.content.text;}
else{content=' ';}
if(self.options.content.title.text!==false){createTitle.call(self);}
self.updateContent(content,false);assignEvents.call(self);if(self.options.show.ready===true){self.show();}
if(self.options.content.url!==false){url=self.options.content.url;data=self.options.content.data;method=self.options.content.method||'get';self.loadContent(url,data,method);}
self.status.rendered=true;self.onRender.call(self);}
function QTip(target,options,id){var self=this;self.id=id;self.options=options;self.status={animated:false,rendered:false,disabled:false,focused:false};self.elements={target:target.addClass(self.options.style.classes.target),tooltip:null,wrapper:null,content:null,contentWrapper:null,title:null,button:null,tip:null,bgiframe:null};self.cache={attr:null,mouse:{},toggle:0,overflow:{left:false,top:false}};self.timers={};$.extend(self,self.options.api,{show:function(event){var returned,solo;if(!self.status.rendered){return false;}
if(self.elements.tooltip.css('display')!=='none'){return self;}
if(self.cache.attr){self.elements.target.removeAttr(self.cache.attr[0]);}
self.elements.tooltip.stop(true,false);returned=self.beforeShow.call(self,event);if(returned===false){return self;}
function afterShow(){self.elements.tooltip.attr('aria-hidden',true);if(self.options.position.type!=='static'){self.focus();}
self.onShow.call(self,event);if($.browser.msie){self.elements.tooltip.get(0).style.removeAttribute('filter');}
self.elements.tooltip.css({opacity:''});}
self.cache.toggle=1;if(self.options.position.type!=='static'){self.updatePosition(event,(self.options.show.effect.length>0&&self.rendered!==2));}
if(typeof self.options.show.solo==='object'){solo=$(self.options.show.solo);}
else if(self.options.show.solo===true){solo=$('div.qtip').not(self.elements.tooltip);}
if(solo){solo.each(function(){if($(this).qtip('api').status.rendered===true){$(this).qtip('api').hide();}});}
if(typeof self.options.show.effect.type==='function'){self.options.show.effect.type.call(self.elements.tooltip,self.options.show.effect.length);self.elements.tooltip.queue(function(){afterShow();$(this).dequeue();});}
else{switch(self.options.show.effect.type.toLowerCase()){case'fade':self.elements.tooltip.fadeIn(self.options.show.effect.length,afterShow);break;case'slide':self.elements.tooltip.slideDown(self.options.show.effect.length,function(){afterShow();if(self.options.position.type!=='static'){self.updatePosition(event,true);}});break;case'grow':self.elements.tooltip.show(self.options.show.effect.length,afterShow);break;default:self.elements.tooltip.show(null,afterShow);break;}
self.elements.tooltip.addClass(self.options.style.classes.active);}
return self;},hide:function(event){var returned;if(!self.status.rendered){return false;}
else if(self.elements.tooltip.css('display')==='none'){return self;}
if(self.cache.attr){self.elements.target.attr(self.cache.attr[0],self.cache.attr[1]);}
clearTimeout(self.timers.show);self.elements.tooltip.stop(true,false);returned=self.beforeHide.call(self,event);if(returned===false){return self;}
function afterHide(){self.elements.tooltip.attr('aria-hidden',true);self.elements.tooltip.css({opacity:''});self.onHide.call(self,event);}
self.cache.toggle=0;if(typeof self.options.hide.effect.type==='function'){self.options.hide.effect.type.call(self.elements.tooltip,self.options.hide.effect.length);self.elements.tooltip.queue(function(){afterHide();$(this).dequeue();});}
else{switch(self.options.hide.effect.type.toLowerCase()){case'fade':self.elements.tooltip.fadeOut(self.options.hide.effect.length,afterHide);break;case'slide':self.elements.tooltip.slideUp(self.options.hide.effect.length,afterHide);break;case'grow':self.elements.tooltip.hide(self.options.hide.effect.length,afterHide);break;default:self.elements.tooltip.hide(null,afterHide);break;}
self.elements.tooltip.removeClass(self.options.style.classes.active);}
return self;},toggle:function(event,state){var condition=/boolean|number/.test(typeof state)?state:!self.elements.tooltip.is(':visible');self[condition?'show':'hide'](event);return self;},updatePosition:function(event,animate){if(!self.status.rendered){return false;}
var posOptions=options.position,target=$(posOptions.target),elemWidth=self.elements.tooltip.outerWidth(),elemHeight=self.elements.tooltip.outerHeight(),targetWidth,targetHeight,position,my=posOptions.corner.tooltip,at=posOptions.corner.target,returned,coords,i,mapName,imagePos,adapt={left:function(){var leftEdge=$(window).scrollLeft(),rightEdge=$(window).width()+$(window).scrollLeft(),myOffset=my.x==='center'?elemWidth/2:elemWidth,atOffset=my.x==='center'?targetWidth/2:targetWidth,borderAdjust=(my.x==='center'?1:2)*self.options.style.border.radius,offset=-2*posOptions.adjust.x,pRight=position.left+elemWidth,adj;if(pRight>rightEdge){adj=offset-myOffset-atOffset+borderAdjust;if(position.left+adj>leftEdge||leftEdge-(position.left+adj)<pRight-rightEdge){return{adjust:adj,tip:'right'};}}
if(position.left<leftEdge){adj=offset+myOffset+atOffset-borderAdjust;if(pRight+adj<rightEdge||pRight+adj-rightEdge<leftEdge-position.left){return{adjust:adj,tip:'left'};}}
return{adjust:0,tip:my.x};},top:function(){var topEdge=$(window).scrollTop(),bottomEdge=$(window).height()+$(window).scrollTop(),myOffset=my.y==='center'?elemHeight/2:elemHeight,atOffset=my.y==='center'?targetHeight/2:targetHeight,borderAdjust=(my.y==='center'?1:2)*self.options.style.border.radius,offset=-2*posOptions.adjust.y,pBottom=position.top+elemHeight,adj;if(pBottom>bottomEdge){adj=offset-myOffset-atOffset+borderAdjust;if(position.top+adj>topEdge||topEdge-(position.top+adj)<pBottom-bottomEdge){return{adjust:adj,tip:'bottom'};}}
if(position.top<topEdge){adj=offset+myOffset+atOffset-borderAdjust;if(pBottom+adj<bottomEdge||pBottom+adj-bottomEdge<topEdge-position.top){return{adjust:adj,tip:'top'};}}
return{adjust:0,tip:my.y};}};if(event&&options.position.target==='mouse'){at={x:'left',y:'top'};targetWidth=targetHeight=0;position={top:event.pageY,left:event.pageX};}
else{if(target[0]===document){targetWidth=target.width();targetHeight=target.height();position={top:0,left:0};}
else if(target[0]===window){targetWidth=target.width();targetHeight=target.height();position={top:target.scrollTop(),left:target.scrollLeft()};}
else if(target.is('area')){coords=self.options.position.target.attr('coords').split(',');for(i=0;i<coords.length;i++){coords[i]=parseInt(coords[i],10);}
mapName=self.options.position.target.parent('map').attr('name');imagePos=$('img[usemap="#'+mapName+'"]:first').offset();target.position={left:Math.floor(imagePos.left+coords[0]),top:Math.floor(imagePos.top+coords[1])};switch(self.options.position.target.attr('shape').toLowerCase()){case'rect':targetWidth=Math.ceil(Math.abs(coords[2]-coords[0]));targetHeight=Math.ceil(Math.abs(coords[3]-coords[1]));break;case'circle':targetWidth=coords[2]+1;targetHeight=coords[2]+1;break;case'poly':targetWidth=coords[0];targetHeight=coords[1];for(i=0;i<coords.length;i++){if(i%2===0){if(coords[i]>targetWidth){targetWidth=coords[i];}
if(coords[i]<coords[0]){position.left=Math.floor(imagePos.left+coords[i]);}}
else{if(coords[i]>targetHeight){targetHeight=coords[i];}
if(coords[i]<coords[1]){position.top=Math.floor(imagePos.top+coords[i]);}}}
targetWidth=targetWidth-(position.left-imagePos.left);targetHeight=targetHeight-(position.top-imagePos.top);break;}
targetWidth-=2;targetHeight-=2;}
else{targetWidth=target.outerWidth();targetHeight=target.outerHeight();position=target.offset();}
position.left+=at.x==='right'?targetWidth:at.x==='center'?targetWidth/2:0;position.top+=at.y==='bottom'?targetHeight:at.y==='center'?targetHeight/2:0;}
position.left+=posOptions.adjust.x+(my.x==='right'?-elemWidth:my.x==='center'?-elemWidth/2:0);position.top+=posOptions.adjust.y+(my.y==='bottom'?-elemHeight:my.y==='center'?-elemHeight/2:0);if(self.options.style.border.radius>0){if(my.x==='left'){position.left-=self.options.style.border.radius;}
else if(my.x==='right'){position.left+=self.options.style.border.radius;}
if(my.y==='top'){position.top-=self.options.style.border.radius;}
else if(my.y==='bottom'){position.top+=self.options.style.border.radius;}}
if(posOptions.adjust.screen){(function(){var adjusted={x:0,y:0},adapted={x:adapt.left(),y:adapt.top()},tip=new Corner(options.style.tip.corner);if(self.elements.tip&&tip){if(adapted.y.adjust!==0){position.top+=adapted.y.adjust;tip.y=adjusted.y=adapted.y.tip;}
if(adapted.x.adjust!==0){position.left+=adapted.x.adjust;tip.x=adjusted.x=adapted.x.tip;}
self.cache.overflow={left:adjusted.x===false,top:adjusted.y===false};if(self.elements.tip.attr('rel')!==tip.string()){createTip.call(self,tip);}}}());}
if(!self.elements.bgiframe&&$.browser.msie&&parseInt($.browser.version.charAt(0),10)===6){bgiframe.call(self);}
returned=self.beforePositionUpdate.call(self,event);if(returned===false){return self;}
if(options.position.target!=='mouse'&&animate===true){self.status.animated=true;self.elements.tooltip.stop().animate(position,200,'swing',function(){self.status.animated=false;});}
else{self.elements.tooltip.css(position);}
self.onPositionUpdate.call(self,event);return self;},updateWidth:function(newWidth){if(!self.status.rendered||(newWidth&&typeof newWidth!=='number')){return false;}
var hidden=self.elements.contentWrapper.siblings().add(self.elements.tip).add(self.elements.button),zoom=self.elements.wrapper.add(self.elements.contentWrapper.children()),tooltip=self.elements.tooltip,max=self.options.style.width.max,min=self.options.style.width.min;if(!newWidth){if(typeof self.options.style.width.value==='number'){newWidth=self.options.style.width.value;}
else{self.elements.tooltip.css({width:'auto'});hidden.hide();tooltip.width(newWidth);if($.browser.msie){zoom.css({zoom:''});}
newWidth=self.getDimensions().width;if(!self.options.style.width.value){newWidth=Math.min(Math.max(newWidth,min),max);}}}
if(newWidth%2){newWidth+=1;}
self.elements.tooltip.width(newWidth);hidden.show();if(self.options.style.border.radius){self.elements.tooltip.find('.qtip-betweenCorners').each(function(i){$(this).width(newWidth-(self.options.style.border.radius*2));});}
if($.browser.msie){zoom.css({zoom:1});self.elements.wrapper.width(newWidth);if(self.elements.bgiframe){self.elements.bgiframe.width(newWidth).height(self.getDimensions.height);}}
return self;},updateStyle:function(name){var tip,borders,context,corner,coordinates;if(!self.status.rendered||typeof name!=='string'||!$.fn.qtip.styles[name]){return false;}
self.options.style=buildStyle.call(self,$.fn.qtip.styles[name],self.options.user.style);self.elements.content.css(jQueryStyle(self.options.style));if(self.options.content.title.text!==false){self.elements.title.css(jQueryStyle(self.options.style.title,true));}
self.elements.contentWrapper.css({borderColor:self.options.style.border.color});if(self.options.style.tip.corner!==false){if($('<canvas />').get(0).getContext){tip=self.elements.tooltip.find('.qtip-tip canvas:first');context=tip.get(0).getContext('2d');context.clearRect(0,0,300,300);corner=tip.parent('div[rel]:first').attr('rel');coordinates=calculateTip(corner,self.options.style.tip.size.width,self.options.style.tip.size.height);drawTip.call(self,tip,coordinates,self.options.style.tip.color||self.options.style.border.color);}
else if($.browser.msie){tip=self.elements.tooltip.find('.qtip-tip [nodeName="shape"]');tip.attr('fillcolor',self.options.style.tip.color||self.options.style.border.color);}}
if(self.options.style.border.radius>0){self.elements.tooltip.find('.qtip-betweenCorners').css({backgroundColor:self.options.style.border.color});if($('<canvas />').get(0).getContext){borders=calculateBorders(self.options.style.border.radius);self.elements.tooltip.find('.qtip-wrapper canvas').each(function(){context=$(this).get(0).getContext('2d');context.clearRect(0,0,300,300);corner=$(this).parent('div[rel]:first').attr('rel');drawBorder.call(self,$(this),borders[corner],self.options.style.border.radius,self.options.style.border.color);});}
else if($.browser.msie){self.elements.tooltip.find('.qtip-wrapper [nodeName="arc"]').each(function(){$(this).attr('fillcolor',self.options.style.border.color);});}}
return self;},updateContent:function(content,reposition){var parsedContent,images,loadedImages;function afterLoad(){self.updateWidth();if(reposition!==false){if(self.options.position.type!=='static'){self.updatePosition(self.elements.tooltip.is(':visible'),true);}
if(self.options.style.tip.corner!==false){positionTip.call(self);}}}
if(!self.status.rendered||!content){return false;}
parsedContent=self.beforeContentUpdate.call(self,content);if(typeof parsedContent==='string'){content=parsedContent;}
else if(parsedContent===false){return;}
if($.browser.msie){self.elements.contentWrapper.children().css({zoom:'normal'});}
if(content.jquery&&content.length>0){content.clone(true).appendTo(self.elements.content).show();}
else{self.elements.content.html(content);}
images=self.elements.content.find('img[complete=false]');if(images.length>0){loadedImages=0;images.each(function(i){$('<img src="'+$(this).attr('src')+'" />').load(function(){if(++loadedImages===images.length){afterLoad();}});});}
else{afterLoad();}
self.onContentUpdate.call(self);return self;},loadContent:function(url,data,method){var returned;function setupContent(content){self.onContentLoad.call(self);self.updateContent(content);}
if(!self.status.rendered){return false;}
returned=self.beforeContentLoad.call(self);if(returned===false){return self;}
if(method==='post'){$.post(url,data,setupContent);}
else{$.get(url,data,setupContent);}
return self;},updateTitle:function(content){var returned;if(!self.status.rendered||!content){return false;}
returned=self.beforeTitleUpdate.call(self);if(returned===false){return self;}
if(self.elements.button){self.elements.button=self.elements.button.clone(true);}
self.elements.title.html(content);if(self.elements.button){self.elements.title.prepend(self.elements.button);}
self.onTitleUpdate.call(self);return self;},focus:function(event){var curIndex,newIndex,elemIndex,returned;if(!self.status.rendered||self.options.position.type==='static'){return false;}
curIndex=parseInt(self.elements.tooltip.css('z-index'),10);newIndex=15000+$('div.qtip[id^="qtip"]').length-1;if(!self.status.focused&&curIndex!==newIndex){returned=self.beforeFocus.call(self,event);if(returned===false){return self;}
$('div.qtip[id^="qtip"]').not(self.elements.tooltip).each(function(){if($(this).qtip('api').status.rendered===true){elemIndex=parseInt($(this).css('z-index'),10);if(typeof elemIndex==='number'&&elemIndex>-1){$(this).css({zIndex:parseInt($(this).css('z-index'),10)-1});}
$(this).qtip('api').status.focused=false;}});self.elements.tooltip.css({zIndex:newIndex});self.status.focused=true;self.onFocus.call(self,event);}
return self;},disable:function(state){if(!self.status.rendered){return false;}
self.status.disabled=state?true:false;return self;},destroy:function(){var i,returned,interfaces;returned=self.beforeDestroy.call(self);if(returned===false){return self;}
if(self.status.rendered){self.options.show.when.target.unbind('mousemove.qtip',self.updatePosition);self.options.show.when.target.unbind('mouseout.qtip',self.hide);self.options.show.when.target.unbind(self.options.show.when.event+'.qtip');self.options.hide.when.target.unbind(self.options.hide.when.event+'.qtip');self.elements.tooltip.unbind(self.options.hide.when.event+'.qtip');self.elements.tooltip.unbind('mouseover.qtip',self.focus);self.elements.tooltip.remove();}
else{self.options.show.when.target.unbind(self.options.show.when.event+'.qtip-'+self.id+'-create');}
if(typeof self.elements.target.data('qtip')==='object'){interfaces=self.elements.target.data('qtip').interfaces;if(typeof interfaces==='object'&&interfaces.length>0){for(i=0;i<interfaces.length-1;i++){if(interfaces[i].id===self.id){interfaces.splice(i,1);}}}}
$.fn.qtip.interfaces.splice(self.id,1);if(typeof interfaces==='object'&&interfaces.length>0){self.elements.target.data('qtip').current=interfaces.length-1;}
else{self.elements.target.removeData('qtip');}
self.onDestroy.call(self);return self.elements.target;},getPosition:function(){var show,offset;if(!self.status.rendered){return false;}
show=(self.elements.tooltip.css('display')!=='none')?false:true;if(show){self.elements.tooltip.css({visiblity:'hidden'}).show();}
offset=self.elements.tooltip.offset();if(show){self.elements.tooltip.css({visiblity:'visible'}).hide();}
return offset;},getDimensions:function(){var show,dimensions;if(!self.status.rendered){return false;}
show=(!self.elements.tooltip.is(':visible'))?true:false;if(show){self.elements.tooltip.css({visiblity:'hidden'}).show();}
dimensions={height:self.elements.tooltip.outerHeight(),width:self.elements.tooltip.outerWidth()};if(show){self.elements.tooltip.css({visiblity:'visible'}).hide();}
return dimensions;}});}
$.fn.qtip=function(options,blanket){var i,id,interfaces,opts,obj,command,config,api;if(typeof options==='string'){if($(this).data('qtip')){if(options==='api'){return $(this).data('qtip').interfaces[$(this).data('qtip').current];}
else if(options==='interfaces'){return $(this).data('qtip').interfaces;}}
else{return $(this);}}
else{if(!options){options={};}
if(typeof options.content!=='object'||(options.content.jquery&&options.content.length>0)){options.content={text:options.content};}
if(typeof options.content.title!=='object'){options.content.title={text:options.content.title};}
if(typeof options.position!=='object'){options.position={corner:options.position};}
if(typeof options.position.corner!=='object'){options.position.corner={target:options.position.corner,tooltip:options.position.corner};}
if(typeof options.show!=='object'){options.show={when:options.show};}
if(typeof options.show.when!=='object'){options.show.when={event:options.show.when};}
if(typeof options.show.effect!=='object'){options.show.effect={type:options.show.effect};}
if(typeof options.hide!=='object'){options.hide={when:options.hide};}
if(typeof options.hide.when!=='object'){options.hide.when={event:options.hide.when};}
if(typeof options.hide.effect!=='object'){options.hide.effect={type:options.hide.effect};}
if(typeof options.style!=='object'){options.style={name:options.style};}
options.style=sanitizeStyle(options.style);opts=$.extend(true,{},$.fn.qtip.defaults,options);opts.style=buildStyle.call({options:opts},opts.style);opts.user=$.extend(true,{},options);}
return $(this).each(function()
{if(typeof options==='string'){command=options.toLowerCase();interfaces=$(this).qtip('interfaces');if(typeof interfaces==='object'){if(blanket===true&&command==='destroy'){for(i=interfaces.length-1;i>-1;i--){if('object'===typeof interfaces[i]){interfaces[i].destroy();}}}
else{if(blanket!==true){interfaces=[$(this).qtip('api')];}
for(i=0;i<interfaces.length;i++){if(command==='destroy'){interfaces[i].destroy();}
else if(interfaces[i].status.rendered===true){if(command==='show'){interfaces[i].show();}
else if(command==='hide'){interfaces[i].hide();}
else if(command==='focus'){interfaces[i].focus();}
else if(command==='disable'){interfaces[i].disable(true);}
else if(command==='enable'){interfaces[i].disable(false);}
else if(command==='update'){interfaces[i].updatePosition();}}}}}}
else{config=$.extend(true,{},opts);config.hide.effect.length=opts.hide.effect.length;config.show.effect.length=opts.show.effect.length;if(config.position.container===false){config.position.container=$(document.body);}
if(config.position.target===false){config.position.target=$(this);}
if(config.show.when.target===false){config.show.when.target=$(this);}
if(config.hide.when.target===false){config.hide.when.target=$(this);}
config.position.corner.tooltip=new Corner(config.position.corner.tooltip);config.position.corner.target=new Corner(config.position.corner.target);id=$.fn.qtip.interfaces.length;for(i=0;i<id;i++){if(typeof $.fn.qtip.interfaces[i]==='undefined'){id=i;break;}}
obj=new QTip($(this),config,id);$.fn.qtip.interfaces[id]=obj;if(typeof $(this).data('qtip')==='object'&&$(this).data('qtip')){if(typeof $(this).attr('qtip')==='undefined'){$(this).data('qtip').current=$(this).data('qtip').interfaces.length;}
$(this).data('qtip').interfaces.push(obj);}
else{$(this).data('qtip',{current:0,interfaces:[obj]});}
if(config.content.prerender===false&&config.show.when.event!==false&&config.show.ready!==true){config.show.when.target.bind(config.show.when.event+'.qtip-'+id+'-create',{qtip:id},function(event){api=$.fn.qtip.interfaces[event.data.qtip];api.options.show.when.target.unbind(api.options.show.when.event+'.qtip-'+event.data.qtip+'-create');api.cache.mouse={x:event.pageX,y:event.pageY};construct.call(api);api.options.show.when.target.trigger(api.options.show.when.event);});}
else{obj.cache.mouse={x:config.show.when.target.offset().left,y:config.show.when.target.offset().top};construct.call(obj);}}});};$.fn.qtip.interfaces=[];$.fn.qtip.log={error:function(){return this;}};$.fn.qtip.constants={};$.fn.qtip.defaults={content:{prerender:false,text:false,url:false,data:null,title:{text:false,button:false}},position:{target:false,corner:{target:'bottomRight',tooltip:'topLeft'},adjust:{x:0,y:0,mouse:true,screen:false,scroll:true,resize:true},type:'absolute',container:false},show:{when:{target:false,event:'mouseover'},effect:{type:'fade',length:100},delay:140,solo:false,ready:false},hide:{when:{target:false,event:'mouseout'},effect:{type:'fade',length:100},delay:0,fixed:false},api:{beforeRender:function(){},onRender:function(){},beforePositionUpdate:function(){},onPositionUpdate:function(){},beforeShow:function(){},onShow:function(){},beforeHide:function(){},onHide:function(){},beforeContentUpdate:function(){},onContentUpdate:function(){},beforeContentLoad:function(){},onContentLoad:function(){},beforeTitleUpdate:function(){},onTitleUpdate:function(){},beforeDestroy:function(){},onDestroy:function(){},beforeFocus:function(){},onFocus:function(){}}};$.fn.qtip.styles={defaults:{background:'white',color:'#111',overflow:'hidden',textAlign:'left',width:{min:0,max:250},padding:'5px 9px',border:{width:1,radius:0,color:'#d3d3d3'},tip:{corner:false,color:false,size:{width:13,height:13},opacity:1},title:{background:'#e1e1e1',fontWeight:'bold',padding:'7px 12px'},button:{cursor:'pointer'},classes:{target:'',tip:'qtip-tip',title:'qtip-title',button:'qtip-button',content:'qtip-content',active:'qtip-active'}},cream:{border:{width:3,radius:0,color:'#F9E98E'},title:{background:'#F0DE7D',color:'#A27D35'},background:'#FBF7AA',color:'#A27D35',classes:{tooltip:'qtip-cream'}},light:{border:{width:3,radius:0,color:'#E2E2E2'},title:{background:'#f1f1f1',color:'#454545'},background:'white',color:'#454545',classes:{tooltip:'qtip-light'}},dark:{border:{width:3,radius:0,color:'#303030'},title:{background:'#404040',color:'#f3f3f3'},background:'#505050',color:'#f3f3f3',classes:{tooltip:'qtip-dark'}},red:{border:{width:3,radius:0,color:'#CE6F6F'},title:{background:'#f28279',color:'#9C2F2F'},background:'#F79992',color:'#9C2F2F',classes:{tooltip:'qtip-red'}},green:{border:{width:3,radius:0,color:'#A9DB66'},title:{background:'#b9db8c',color:'#58792E'},background:'#CDE6AC',color:'#58792E',classes:{tooltip:'qtip-green'}},blue:{border:{width:3,radius:0,color:'#ADD9ED'},title:{background:'#D0E9F5',color:'#5E99BD'},background:'#E5F6FE',color:'#4D9FBF',classes:{tooltip:'qtip-blue'}}};}(jQuery));;jQuery.fn.selectbox=function(options){if($('.mobile_header:visible').length!=0)
return;var settings={className:'jquery-selectbox',animationSpeed:"fast",listboxMaxSize:16,replaceInvisible:false,sprid:0,spremenljivka_preview:true,parent_id:'jquery-selectbox'};var commonClass='jquery-custom-selectboxes-replaced';var listOpen=false;var showList=function(listObj){var selectbox=listObj.parents('.'+settings.className+'');listObj.slideDown(settings.animationSpeed,function(){listOpen=true;});selectbox.addClass('selecthover');jQuery(document).bind('click',onBlurList);return listObj;}
var hideList=function(listObj){var selectbox=listObj.parents('.'+settings.className+'');listObj.slideUp(settings.animationSpeed,function(){listOpen=false;jQuery(this).parents('.'+settings.className+'').removeClass('selecthover');});jQuery(document).unbind('click',onBlurList);return listObj;}
var onBlurList=function(e){var trgt=e.target;var currentListElements=jQuery('.'+settings.className+'-list:visible').parent().find('*').andSelf();if(jQuery.inArray(trgt,currentListElements)<0&&listOpen){hideList(jQuery('.'+commonClass+'-list'));}
return false;}
settings=jQuery.extend(settings,options||{});return this.each(function(){var _this=jQuery(this);if(_this.filter(':visible').length==0&&!settings.replaceInvisible)
return;if(jQuery(this).attr('spr_id')){settings.spremenljivka_preview=true;var replacement=jQuery('<div id="'+jQuery(this).attr('id')+'" class="'+settings.className+' '+commonClass+'">'+'<div class="'+settings.className+'-moreButton" />'+'<div class="'+settings.className+'-list '+commonClass+'-list" />'+'<span class="'+settings.className+'-currentItem" />'+'</div>');settings.parent_id=jQuery(this).attr('id');}else{settings.spremenljivka_preview=false;var replacement=jQuery('<div id="'+jQuery(this).attr('id')+'" class="'+settings.className+' '+commonClass+'">'+'<div class="'+settings.className+'-moreButton" />'+'<div class="'+settings.className+'-list '+commonClass+'-list" />'+'<span class="'+settings.className+'-currentItem" />'+'</div>');settings.parent_id=jQuery(this).attr('id');}
jQuery('option',_this).each(function(k,v){var v=jQuery(v);var spr_id=jQuery(this).parents().attr('spr_id');var name=jQuery(this).parents().attr('name');if(jQuery(this).attr('disabled'))
var disabled_string=" option_disabled";else
var disabled_string="";if(settings.spremenljivka_preview)
var listElement=jQuery('<span id="'+jQuery(this).parents().attr('spr_id')+'_'+v.val()+'" class="'+settings.className+'-item value-'+v.val()+' item-'+k+'" val="'+v.val()+'">'+v.text()+'</span>');else{var listElement=jQuery('<span id="'+jQuery(this).parents().attr('id')+'_'+v.val()+'" class="'+settings.className+'-item value-'+v.val()+' item-'+k+disabled_string+'" val="'+v.val()+'" value="'+v.val()+'">'+v.text()+'</span>');}
if(!jQuery(this).attr('disabled'))
listElement.click(function(){var thisListElement=jQuery(this);var thisReplacment=thisListElement.parents('.'+settings.className);var thisIndex=thisListElement[0].className.split(' ');for(k1 in thisIndex){if(/^item-[0-9]+$/.test(thisIndex[k1])){thisIndex=parseInt(thisIndex[k1].replace('item-',''),10);break;}};var thisValue=thisListElement[0].className.split(' ');for(k1 in thisValue){if(/^value-.+$/.test(thisValue[k1])){thisValue=thisValue[k1].replace('value-','');break;}};thisReplacment.find('.'+settings.className+'-currentItem').text(thisListElement.text());thisReplacment.find('select').val(thisValue).triggerHandler('change');var thisSublist=thisReplacment.find('.'+settings.className+'-list');if(thisSublist.filter(":visible").length>0){hideList(thisSublist);}else{showList(thisSublist);};jQuery("#"+settings.parent_id).val(thisValue);$("#tip_preview").hide();}).bind('mouseenter',function(){jQuery(this).addClass('listelementhover');}).bind('mouseleave',function(){jQuery(this).removeClass('listelementhover');}).bind('mouseover',function(){if((settings.spremenljivka_preview)&&(name=='design'))
show_tip_preview_subtype(spr_id,v.val(),17);else if((settings.spremenljivka_preview)&&(name=='sn_design'))
show_tip_preview_subtype(spr_id,v.val(),9);else if((settings.spremenljivka_preview)&&(name=='orientation'))
show_tip_preview_subtype(spr_id,v.val(),1);else if((settings.spremenljivka_preview)&&(name=='orientation_checkbox'))
show_tip_preview_subtype(spr_id,v.val(),2);else if((settings.spremenljivka_preview)&&(name=='enota'))
show_tip_preview_subtype(spr_id,v.val(),6);else if((settings.spremenljivka_preview)&&(name=='podtip_lokacija'))
show_tip_preview_subtype(spr_id,v.val(),26);else if(settings.spremenljivka_preview)
show_tip_preview(spr_id,v.val());}).bind('mouseout',function(){$("#tip_preview").hide();});jQuery('.'+settings.className+'-list',replacement).append(listElement);if(v.filter(':selected').length>0){jQuery('.'+settings.className+'-currentItem',replacement).text(v.text());}});replacement.find('.'+settings.className+'-moreButton, .'+settings.className+'-currentItem').click(function(){var thisMoreButton=jQuery(this);var otherLists=jQuery('.'+settings.className+'-list').not(thisMoreButton.siblings('.'+settings.className+'-list'));hideList(otherLists);var thisList=thisMoreButton.siblings('.'+settings.className+'-list');if(thisList.filter(":visible").length>0){hideList(thisList);}else{showList(thisList);}}).bind('mouseenter',function(){jQuery(this).addClass('morebuttonhover');}).bind('mouseleave',function(){jQuery(this).removeClass('morebuttonhover');});_this.hide().replaceWith(replacement).appendTo(replacement);var thisListBox=replacement.find('.'+settings.className+'-list');var thisListBoxSize=thisListBox.find('.'+settings.className+'-item').length;if(thisListBoxSize>settings.listboxMaxSize)
thisListBoxSize=settings.listboxMaxSize;if(thisListBoxSize==0)
thisListBoxSize=1;var thisListBoxWidth=Math.round(_this.width()+5);if(jQuery.browser.safari)
thisListBoxWidth=thisListBoxWidth*0.94+10;replacement.css('width',thisListBoxWidth+'px');thisListBox.css({width:Math.round(thisListBoxWidth-5)+'px',height:Math.round(thisListBoxSize*15.5)+'px'});});}
jQuery.fn.unselectbox=function(){var commonClass='jquery-custom-selectboxes-replaced';return this.each(function(){var selectToRemove=jQuery(this).filter('.'+commonClass);selectToRemove.replaceWith(selectToRemove.find('select').show());});}
;/*! jQuery-ui-Slider-Pips - v1.9.2 - 2015-05-07
* Copyright (c) 2015 Simon Goellner <simey.me@gmail.com>; Licensed MIT */
!function(a){"use strict";var b={pips:function(b){function c(b){if(!h.option("disabled")){var c,d,e,f,g,i=a(b).data("value"),j=h.element;if(h.options.values&&h.options.values.length){for(f=d=j.slider("values"),e=d.map(function(a){return Math.abs(a-i)}),g=Math.min.apply(Math,e),c=0;c<e.length;c++)e[c]===g&&(f[c]=i,k.eq(c).trigger("focus.selectPip"));j.slider("values",f),m.range(f)}else k.trigger("focus.selectPip"),j.slider("value",i),m.single(i)}}function d(b){var c,d,f=b,g="ui-slider-pip",i="";"first"===b?f=0:"last"===b&&(f=j);var k=h.options.min+h.options.step*f,m=k.toString().replace(".","-");if(c="array"===a.type(l.labels)?l.labels[f]||"":"object"===a.type(l.labels)?"first"===b?l.labels.first||"":"last"===b?l.labels.last||"":"array"===a.type(l.labels.rest)?l.labels.rest[f-1]||"":k:k,"first"===b?(d="0%",g+=" ui-slider-pip-first",g+="label"===l.first?" ui-slider-pip-label":"",g+=!1===l.first?" ui-slider-pip-hide":""):"last"===b?(d="100%",g+=" ui-slider-pip-last",g+="label"===l.last?" ui-slider-pip-label":"",g+=!1===l.last?" ui-slider-pip-hide":""):(d=(100/j*b).toFixed(4)+"%",g+="label"===l.rest?" ui-slider-pip-label":"",g+=!1===l.rest?" ui-slider-pip-hide":""),g+=" ui-slider-pip-"+m,h.options.values&&h.options.values.length)for(e=0;e<h.options.values.length;e++)k===h.options.values[e]&&(g+=" ui-slider-pip-initial-"+(e+1),g+=" ui-slider-pip-selected-"+(e+1));else k===h.options.value&&(g+=" ui-slider-pip-initial",g+=" ui-slider-pip-selected");return i="horizontal"===h.options.orientation?"left: "+d:"bottom: "+d,'<span class="'+g+'" style="'+i+'"><span class="ui-slider-line"></span><span class="ui-slider-label" data-value="'+k+'">'+l.formatLabel(c)+"</span></span>"}var e,f,g,h=this,i="",j=(h.options.max-h.options.min)/h.options.step,k=h.element.find(".ui-slider-handle"),l={first:"label",last:"label",rest:"pip",labels:!1,prefix:"",suffix:"",step:j>100?Math.floor(.05*j):1,formatLabel:function(a){return this.prefix+a+this.suffix}};a.extend(l,b),h.options.pipStep=l.step,h.element.addClass("ui-slider-pips").find(".ui-slider-pip").remove();var m={single:function(a){this.resetClasses(),g.filter(".ui-slider-pip-"+this.classLabel(a)).addClass("ui-slider-pip-selected")},range:function(a){for(this.resetClasses(),e=0;e<a.length;e++)g.filter(".ui-slider-pip-"+this.classLabel(a[e])).addClass("ui-slider-pip-selected-"+(e+1))},classLabel:function(a){return a.toString().replace(".","-")},resetClasses:function(){g.removeClass(function(a,b){return(b.match(/(^|\s)ui-slider-pip-selected(\S+|\s|$)/g)||[]).join(" ")})}};for(h.options.pipStep=Math.round(h.options.pipStep),i+=d("first"),f=1;j>f;f++)f%h.options.pipStep===0&&(i+=d(f));i+=d("last"),h.element.append(i),g=h.element.find(".ui-slider-pip"),h.element.on("mousedown.selectPip",function(){h.element.off("mouseup.selectPip").one("mouseup.selectPip",".ui-slider-label",function(){c(this)})}),h.element.on("slide.selectPip slidechange.selectPip",function(b,c){var d,e,f=a(this);c?c.values?m.range(c.values):m.single(c.value):(d=f.slider("value"),e=f.slider("values"),e.length?m.range(e):m.single(d))})}};a.extend(!0,a.ui.slider.prototype,b)}(jQuery),function(a){"use strict";var b={"float":function(b){function c(b){var c=[],f=b.map(function(a){return Math.ceil((a-e.options.min)/e.options.step)});if("array"===a.type(h.labels))for(d=0;d<b.length;d++)c[d]=h.labels[f[d]]||b[d];else if("object"===a.type(h.labels))for(d=0;d<b.length;d++)c[d]=b[d]===e.options.min?h.labels.first||e.options.min:b[d]===e.options.max?h.labels.last||e.options.max:"array"===a.type(h.labels.rest)?h.labels.rest[f[d]-1]||b[d]:b[d];else for(d=0;d<b.length;d++)c[d]=b[d];return c}var d,e=this,f=[],g=e.element.find(".ui-slider-handle"),h={handle:!0,pips:!1,labels:!1,prefix:"",suffix:"",event:"slidechange slide",formatLabel:function(a){return this.prefix+a+this.suffix}};if(a.extend(h,b),e.options.value<e.options.min&&(e.options.value=e.options.min),e.options.value>e.options.max&&(e.options.value=e.options.max),e.options.values&&e.options.values.length)for(d=0;d<e.options.values.length;d++)e.options.values[d]<e.options.min&&(e.options.values[d]=e.options.min),e.options.values[d]>e.options.max&&(e.options.values[d]=e.options.max);if(e.element.addClass("ui-slider-float").find(".ui-slider-tip, .ui-slider-tip-label").remove(),h.handle)for(f=c(e.options.values&&e.options.values.length?e.options.values:[e.options.value]),d=0;d<f.length;d++)g.eq(d).append(a('<span class="ui-slider-tip">'+h.formatLabel(f[d])+"</span>"));h.pips&&e.element.find(".ui-slider-label").each(function(b,d){var e,f,g=a(d),i=[g.data("value")];e=h.formatLabel(c(i)[0]),f=a('<span class="ui-slider-tip-label">'+e+"</span>").insertAfter(g)}),"slide"!==h.event&&"slidechange"!==h.event&&"slide slidechange"!==h.event&&"slidechange slide"!==h.event&&(h.event="slidechange slide"),e.element.on(h.event,function(b,d){var e="array"===a.type(d.value)?d.value:[d.value],f=h.formatLabel(c(e)[0]);a(d.handle).find(".ui-slider-tip").html(f)})}};a.extend(!0,a.ui.slider.prototype,b)}(jQuery);
;/*! jQuery Timepicker Addon - v1.6.3 - 2016-04-20
* http://trentrichardson.com/examples/timepicker
* Copyright (c) 2016 Trent Richardson; Licensed MIT */
(function(factory){if(typeof define==='function'&&define.amd){define(['jquery','jquery-ui'],factory);}else{factory(jQuery);}}(function($){$.ui.timepicker=$.ui.timepicker||{};if($.ui.timepicker.version){return;}
$.extend($.ui,{timepicker:{version:"1.6.3"}});var Timepicker=function(){this.regional=[];this.regional['']={currentText:'Now',closeText:'Done',amNames:['AM','A'],pmNames:['PM','P'],timeFormat:'HH:mm',timeSuffix:'',timeOnlyTitle:'Choose Time',timeText:'Time',hourText:'Hour',minuteText:'Minute',secondText:'Second',millisecText:'Millisecond',microsecText:'Microsecond',timezoneText:'Time Zone',isRTL:false};this._defaults={showButtonPanel:true,timeOnly:false,timeOnlyShowDate:false,showHour:null,showMinute:null,showSecond:null,showMillisec:null,showMicrosec:null,showTimezone:null,showTime:true,stepHour:1,stepMinute:1,stepSecond:1,stepMillisec:1,stepMicrosec:1,hour:0,minute:0,second:0,millisec:0,microsec:0,timezone:null,hourMin:0,minuteMin:0,secondMin:0,millisecMin:0,microsecMin:0,hourMax:23,minuteMax:59,secondMax:59,millisecMax:999,microsecMax:999,minDateTime:null,maxDateTime:null,maxTime:null,minTime:null,onSelect:null,hourGrid:0,minuteGrid:0,secondGrid:0,millisecGrid:0,microsecGrid:0,alwaysSetTime:true,separator:' ',altFieldTimeOnly:true,altTimeFormat:null,altSeparator:null,altTimeSuffix:null,altRedirectFocus:true,pickerTimeFormat:null,pickerTimeSuffix:null,showTimepicker:true,timezoneList:null,addSliderAccess:false,sliderAccessArgs:null,controlType:'slider',oneLine:false,defaultValue:null,parse:'strict',afterInject:null};$.extend(this._defaults,this.regional['']);};$.extend(Timepicker.prototype,{$input:null,$altInput:null,$timeObj:null,inst:null,hour_slider:null,minute_slider:null,second_slider:null,millisec_slider:null,microsec_slider:null,timezone_select:null,maxTime:null,minTime:null,hour:0,minute:0,second:0,millisec:0,microsec:0,timezone:null,hourMinOriginal:null,minuteMinOriginal:null,secondMinOriginal:null,millisecMinOriginal:null,microsecMinOriginal:null,hourMaxOriginal:null,minuteMaxOriginal:null,secondMaxOriginal:null,millisecMaxOriginal:null,microsecMaxOriginal:null,ampm:'',formattedDate:'',formattedTime:'',formattedDateTime:'',timezoneList:null,units:['hour','minute','second','millisec','microsec'],support:{},control:null,setDefaults:function(settings){extendRemove(this._defaults,settings||{});return this;},_newInst:function($input,opts){var tp_inst=new Timepicker(),inlineSettings={},fns={},overrides,i;for(var attrName in this._defaults){if(this._defaults.hasOwnProperty(attrName)){var attrValue=$input.attr('time:'+attrName);if(attrValue){try{inlineSettings[attrName]=eval(attrValue);}catch(err){inlineSettings[attrName]=attrValue;}}}}
overrides={beforeShow:function(input,dp_inst){if($.isFunction(tp_inst._defaults.evnts.beforeShow)){return tp_inst._defaults.evnts.beforeShow.call($input[0],input,dp_inst,tp_inst);}},onChangeMonthYear:function(year,month,dp_inst){if($.isFunction(tp_inst._defaults.evnts.onChangeMonthYear)){tp_inst._defaults.evnts.onChangeMonthYear.call($input[0],year,month,dp_inst,tp_inst);}},onClose:function(dateText,dp_inst){if(tp_inst.timeDefined===true&&$input.val()!==''){tp_inst._updateDateTime(dp_inst);}
if($.isFunction(tp_inst._defaults.evnts.onClose)){tp_inst._defaults.evnts.onClose.call($input[0],dateText,dp_inst,tp_inst);}}};for(i in overrides){if(overrides.hasOwnProperty(i)){fns[i]=opts[i]||this._defaults[i]||null;}}
tp_inst._defaults=$.extend({},this._defaults,inlineSettings,opts,overrides,{evnts:fns,timepicker:tp_inst});tp_inst.amNames=$.map(tp_inst._defaults.amNames,function(val){return val.toUpperCase();});tp_inst.pmNames=$.map(tp_inst._defaults.pmNames,function(val){return val.toUpperCase();});tp_inst.support=detectSupport(tp_inst._defaults.timeFormat+
(tp_inst._defaults.pickerTimeFormat?tp_inst._defaults.pickerTimeFormat:'')+
(tp_inst._defaults.altTimeFormat?tp_inst._defaults.altTimeFormat:''));if(typeof(tp_inst._defaults.controlType)==='string'){if(tp_inst._defaults.controlType==='slider'&&typeof($.ui.slider)==='undefined'){tp_inst._defaults.controlType='select';}
tp_inst.control=tp_inst._controls[tp_inst._defaults.controlType];}
else{tp_inst.control=tp_inst._defaults.controlType;}
var timezoneList=[-720,-660,-600,-570,-540,-480,-420,-360,-300,-270,-240,-210,-180,-120,-60,0,60,120,180,210,240,270,300,330,345,360,390,420,480,525,540,570,600,630,660,690,720,765,780,840];if(tp_inst._defaults.timezoneList!==null){timezoneList=tp_inst._defaults.timezoneList;}
var tzl=timezoneList.length,tzi=0,tzv=null;if(tzl>0&&typeof timezoneList[0]!=='object'){for(;tzi<tzl;tzi++){tzv=timezoneList[tzi];timezoneList[tzi]={value:tzv,label:$.timepicker.timezoneOffsetString(tzv,tp_inst.support.iso8601)};}}
tp_inst._defaults.timezoneList=timezoneList;tp_inst.timezone=tp_inst._defaults.timezone!==null?$.timepicker.timezoneOffsetNumber(tp_inst._defaults.timezone):((new Date()).getTimezoneOffset()*-1);tp_inst.hour=tp_inst._defaults.hour<tp_inst._defaults.hourMin?tp_inst._defaults.hourMin:tp_inst._defaults.hour>tp_inst._defaults.hourMax?tp_inst._defaults.hourMax:tp_inst._defaults.hour;tp_inst.minute=tp_inst._defaults.minute<tp_inst._defaults.minuteMin?tp_inst._defaults.minuteMin:tp_inst._defaults.minute>tp_inst._defaults.minuteMax?tp_inst._defaults.minuteMax:tp_inst._defaults.minute;tp_inst.second=tp_inst._defaults.second<tp_inst._defaults.secondMin?tp_inst._defaults.secondMin:tp_inst._defaults.second>tp_inst._defaults.secondMax?tp_inst._defaults.secondMax:tp_inst._defaults.second;tp_inst.millisec=tp_inst._defaults.millisec<tp_inst._defaults.millisecMin?tp_inst._defaults.millisecMin:tp_inst._defaults.millisec>tp_inst._defaults.millisecMax?tp_inst._defaults.millisecMax:tp_inst._defaults.millisec;tp_inst.microsec=tp_inst._defaults.microsec<tp_inst._defaults.microsecMin?tp_inst._defaults.microsecMin:tp_inst._defaults.microsec>tp_inst._defaults.microsecMax?tp_inst._defaults.microsecMax:tp_inst._defaults.microsec;tp_inst.ampm='';tp_inst.$input=$input;if(tp_inst._defaults.altField){tp_inst.$altInput=$(tp_inst._defaults.altField);if(tp_inst._defaults.altRedirectFocus===true){tp_inst.$altInput.css({cursor:'pointer'}).focus(function(){$input.trigger("focus");});}}
if(tp_inst._defaults.minDate===0||tp_inst._defaults.minDateTime===0){tp_inst._defaults.minDate=new Date();}
if(tp_inst._defaults.maxDate===0||tp_inst._defaults.maxDateTime===0){tp_inst._defaults.maxDate=new Date();}
if(tp_inst._defaults.minDate!==undefined&&tp_inst._defaults.minDate instanceof Date){tp_inst._defaults.minDateTime=new Date(tp_inst._defaults.minDate.getTime());}
if(tp_inst._defaults.minDateTime!==undefined&&tp_inst._defaults.minDateTime instanceof Date){tp_inst._defaults.minDate=new Date(tp_inst._defaults.minDateTime.getTime());}
if(tp_inst._defaults.maxDate!==undefined&&tp_inst._defaults.maxDate instanceof Date){tp_inst._defaults.maxDateTime=new Date(tp_inst._defaults.maxDate.getTime());}
if(tp_inst._defaults.maxDateTime!==undefined&&tp_inst._defaults.maxDateTime instanceof Date){tp_inst._defaults.maxDate=new Date(tp_inst._defaults.maxDateTime.getTime());}
tp_inst.$input.bind('focus',function(){tp_inst._onFocus();});return tp_inst;},_addTimePicker:function(dp_inst){var currDT=$.trim((this.$altInput&&this._defaults.altFieldTimeOnly)?this.$input.val()+' '+this.$altInput.val():this.$input.val());this.timeDefined=this._parseTime(currDT);this._limitMinMaxDateTime(dp_inst,false);this._injectTimePicker();this._afterInject();},_parseTime:function(timeString,withDate){if(!this.inst){this.inst=$.datepicker._getInst(this.$input[0]);}
if(withDate||!this._defaults.timeOnly){var dp_dateFormat=$.datepicker._get(this.inst,'dateFormat');try{var parseRes=parseDateTimeInternal(dp_dateFormat,this._defaults.timeFormat,timeString,$.datepicker._getFormatConfig(this.inst),this._defaults);if(!parseRes.timeObj){return false;}
$.extend(this,parseRes.timeObj);}catch(err){$.timepicker.log("Error parsing the date/time string: "+err+"\ndate/time string = "+timeString+"\ntimeFormat = "+this._defaults.timeFormat+"\ndateFormat = "+dp_dateFormat);return false;}
return true;}else{var timeObj=$.datepicker.parseTime(this._defaults.timeFormat,timeString,this._defaults);if(!timeObj){return false;}
$.extend(this,timeObj);return true;}},_afterInject:function(){var o=this.inst.settings;if($.isFunction(o.afterInject)){o.afterInject.call(this);}},_injectTimePicker:function(){var $dp=this.inst.dpDiv,o=this.inst.settings,tp_inst=this,litem='',uitem='',show=null,max={},gridSize={},size=null,i=0,l=0;if($dp.find("div.ui-timepicker-div").length===0&&o.showTimepicker){var noDisplay=' ui_tpicker_unit_hide',html='<div class="ui-timepicker-div'+(o.isRTL?' ui-timepicker-rtl':'')+(o.oneLine&&o.controlType==='select'?' ui-timepicker-oneLine':'')+'"><dl>'+'<dt class="ui_tpicker_time_label'+((o.showTime)?'':noDisplay)+'">'+o.timeText+'</dt>'+'<dd class="ui_tpicker_time '+((o.showTime)?'':noDisplay)+'"><input class="ui_tpicker_time_input" '+(o.timeInput?'':'disabled')+'/></dd>';for(i=0,l=this.units.length;i<l;i++){litem=this.units[i];uitem=litem.substr(0,1).toUpperCase()+litem.substr(1);show=o['show'+uitem]!==null?o['show'+uitem]:this.support[litem];max[litem]=parseInt((o[litem+'Max']-((o[litem+'Max']-o[litem+'Min'])%o['step'+uitem])),10);gridSize[litem]=0;html+='<dt class="ui_tpicker_'+litem+'_label'+(show?'':noDisplay)+'">'+o[litem+'Text']+'</dt>'+'<dd class="ui_tpicker_'+litem+(show?'':noDisplay)+'"><div class="ui_tpicker_'+litem+'_slider'+(show?'':noDisplay)+'"></div>';if(show&&o[litem+'Grid']>0){html+='<div style="padding-left: 1px"><table class="ui-tpicker-grid-label"><tr>';if(litem==='hour'){for(var h=o[litem+'Min'];h<=max[litem];h+=parseInt(o[litem+'Grid'],10)){gridSize[litem]++;var tmph=$.datepicker.formatTime(this.support.ampm?'hht':'HH',{hour:h},o);html+='<td data-for="'+litem+'">'+tmph+'</td>';}}
else{for(var m=o[litem+'Min'];m<=max[litem];m+=parseInt(o[litem+'Grid'],10)){gridSize[litem]++;html+='<td data-for="'+litem+'">'+((m<10)?'0':'')+m+'</td>';}}
html+='</tr></table></div>';}
html+='</dd>';}
var showTz=o.showTimezone!==null?o.showTimezone:this.support.timezone;html+='<dt class="ui_tpicker_timezone_label'+(showTz?'':noDisplay)+'">'+o.timezoneText+'</dt>';html+='<dd class="ui_tpicker_timezone'+(showTz?'':noDisplay)+'"></dd>';html+='</dl></div>';var $tp=$(html);if(o.timeOnly===true){$tp.prepend('<div class="ui-widget-header ui-helper-clearfix ui-corner-all">'+'<div class="ui-datepicker-title">'+o.timeOnlyTitle+'</div>'+'</div>');$dp.find('.ui-datepicker-header, .ui-datepicker-calendar').hide();}
for(i=0,l=tp_inst.units.length;i<l;i++){litem=tp_inst.units[i];uitem=litem.substr(0,1).toUpperCase()+litem.substr(1);show=o['show'+uitem]!==null?o['show'+uitem]:this.support[litem];tp_inst[litem+'_slider']=tp_inst.control.create(tp_inst,$tp.find('.ui_tpicker_'+litem+'_slider'),litem,tp_inst[litem],o[litem+'Min'],max[litem],o['step'+uitem]);if(show&&o[litem+'Grid']>0){size=100*gridSize[litem]*o[litem+'Grid']/(max[litem]-o[litem+'Min']);$tp.find('.ui_tpicker_'+litem+' table').css({width:size+"%",marginLeft:o.isRTL?'0':((size/(-2*gridSize[litem]))+"%"),marginRight:o.isRTL?((size/(-2*gridSize[litem]))+"%"):'0',borderCollapse:'collapse'}).find("td").click(function(e){var $t=$(this),h=$t.html(),n=parseInt(h.replace(/[^0-9]/g),10),ap=h.replace(/[^apm]/ig),f=$t.data('for');if(f==='hour'){if(ap.indexOf('p')!==-1&&n<12){n+=12;}
else{if(ap.indexOf('a')!==-1&&n===12){n=0;}}}
tp_inst.control.value(tp_inst,tp_inst[f+'_slider'],litem,n);tp_inst._onTimeChange();tp_inst._onSelectHandler();}).css({cursor:'pointer',width:(100/gridSize[litem])+'%',textAlign:'center',overflow:'hidden'});}}
this.timezone_select=$tp.find('.ui_tpicker_timezone').append('<select></select>').find("select");$.fn.append.apply(this.timezone_select,$.map(o.timezoneList,function(val,idx){return $("<option />").val(typeof val==="object"?val.value:val).text(typeof val==="object"?val.label:val);}));if(typeof(this.timezone)!=="undefined"&&this.timezone!==null&&this.timezone!==""){var local_timezone=(new Date(this.inst.selectedYear,this.inst.selectedMonth,this.inst.selectedDay,12)).getTimezoneOffset()*-1;if(local_timezone===this.timezone){selectLocalTimezone(tp_inst);}else{this.timezone_select.val(this.timezone);}}else{if(typeof(this.hour)!=="undefined"&&this.hour!==null&&this.hour!==""){this.timezone_select.val(o.timezone);}else{selectLocalTimezone(tp_inst);}}
this.timezone_select.change(function(){tp_inst._onTimeChange();tp_inst._onSelectHandler();tp_inst._afterInject();});var $buttonPanel=$dp.find('.ui-datepicker-buttonpane');if($buttonPanel.length){$buttonPanel.before($tp);}else{$dp.append($tp);}
this.$timeObj=$tp.find('.ui_tpicker_time_input');this.$timeObj.change(function(){var timeFormat=tp_inst.inst.settings.timeFormat;var parsedTime=$.datepicker.parseTime(timeFormat,this.value);var update=new Date();if(parsedTime){update.setHours(parsedTime.hour);update.setMinutes(parsedTime.minute);update.setSeconds(parsedTime.second);$.datepicker._setTime(tp_inst.inst,update);}else{this.value=tp_inst.formattedTime;this.blur();}});if(this.inst!==null){var timeDefined=this.timeDefined;this._onTimeChange();this.timeDefined=timeDefined;}
if(this._defaults.addSliderAccess){var sliderAccessArgs=this._defaults.sliderAccessArgs,rtl=this._defaults.isRTL;sliderAccessArgs.isRTL=rtl;setTimeout(function(){if($tp.find('.ui-slider-access').length===0){$tp.find('.ui-slider:visible').sliderAccess(sliderAccessArgs);var sliderAccessWidth=$tp.find('.ui-slider-access:eq(0)').outerWidth(true);if(sliderAccessWidth){$tp.find('table:visible').each(function(){var $g=$(this),oldWidth=$g.outerWidth(),oldMarginLeft=$g.css(rtl?'marginRight':'marginLeft').toString().replace('%',''),newWidth=oldWidth-sliderAccessWidth,newMarginLeft=((oldMarginLeft*newWidth)/oldWidth)+'%',css={width:newWidth,marginRight:0,marginLeft:0};css[rtl?'marginRight':'marginLeft']=newMarginLeft;$g.css(css);});}}},10);}
tp_inst._limitMinMaxDateTime(this.inst,true);}},_limitMinMaxDateTime:function(dp_inst,adjustSliders){var o=this._defaults,dp_date=new Date(dp_inst.selectedYear,dp_inst.selectedMonth,dp_inst.selectedDay);if(!this._defaults.showTimepicker){return;}
if($.datepicker._get(dp_inst,'minDateTime')!==null&&$.datepicker._get(dp_inst,'minDateTime')!==undefined&&dp_date){var minDateTime=$.datepicker._get(dp_inst,'minDateTime'),minDateTimeDate=new Date(minDateTime.getFullYear(),minDateTime.getMonth(),minDateTime.getDate(),0,0,0,0);if(this.hourMinOriginal===null||this.minuteMinOriginal===null||this.secondMinOriginal===null||this.millisecMinOriginal===null||this.microsecMinOriginal===null){this.hourMinOriginal=o.hourMin;this.minuteMinOriginal=o.minuteMin;this.secondMinOriginal=o.secondMin;this.millisecMinOriginal=o.millisecMin;this.microsecMinOriginal=o.microsecMin;}
if(dp_inst.settings.timeOnly||minDateTimeDate.getTime()===dp_date.getTime()){this._defaults.hourMin=minDateTime.getHours();if(this.hour<=this._defaults.hourMin){this.hour=this._defaults.hourMin;this._defaults.minuteMin=minDateTime.getMinutes();if(this.minute<=this._defaults.minuteMin){this.minute=this._defaults.minuteMin;this._defaults.secondMin=minDateTime.getSeconds();if(this.second<=this._defaults.secondMin){this.second=this._defaults.secondMin;this._defaults.millisecMin=minDateTime.getMilliseconds();if(this.millisec<=this._defaults.millisecMin){this.millisec=this._defaults.millisecMin;this._defaults.microsecMin=minDateTime.getMicroseconds();}else{if(this.microsec<this._defaults.microsecMin){this.microsec=this._defaults.microsecMin;}
this._defaults.microsecMin=this.microsecMinOriginal;}}else{this._defaults.millisecMin=this.millisecMinOriginal;this._defaults.microsecMin=this.microsecMinOriginal;}}else{this._defaults.secondMin=this.secondMinOriginal;this._defaults.millisecMin=this.millisecMinOriginal;this._defaults.microsecMin=this.microsecMinOriginal;}}else{this._defaults.minuteMin=this.minuteMinOriginal;this._defaults.secondMin=this.secondMinOriginal;this._defaults.millisecMin=this.millisecMinOriginal;this._defaults.microsecMin=this.microsecMinOriginal;}}else{this._defaults.hourMin=this.hourMinOriginal;this._defaults.minuteMin=this.minuteMinOriginal;this._defaults.secondMin=this.secondMinOriginal;this._defaults.millisecMin=this.millisecMinOriginal;this._defaults.microsecMin=this.microsecMinOriginal;}}
if($.datepicker._get(dp_inst,'maxDateTime')!==null&&$.datepicker._get(dp_inst,'maxDateTime')!==undefined&&dp_date){var maxDateTime=$.datepicker._get(dp_inst,'maxDateTime'),maxDateTimeDate=new Date(maxDateTime.getFullYear(),maxDateTime.getMonth(),maxDateTime.getDate(),0,0,0,0);if(this.hourMaxOriginal===null||this.minuteMaxOriginal===null||this.secondMaxOriginal===null||this.millisecMaxOriginal===null){this.hourMaxOriginal=o.hourMax;this.minuteMaxOriginal=o.minuteMax;this.secondMaxOriginal=o.secondMax;this.millisecMaxOriginal=o.millisecMax;this.microsecMaxOriginal=o.microsecMax;}
if(dp_inst.settings.timeOnly||maxDateTimeDate.getTime()===dp_date.getTime()){this._defaults.hourMax=maxDateTime.getHours();if(this.hour>=this._defaults.hourMax){this.hour=this._defaults.hourMax;this._defaults.minuteMax=maxDateTime.getMinutes();if(this.minute>=this._defaults.minuteMax){this.minute=this._defaults.minuteMax;this._defaults.secondMax=maxDateTime.getSeconds();if(this.second>=this._defaults.secondMax){this.second=this._defaults.secondMax;this._defaults.millisecMax=maxDateTime.getMilliseconds();if(this.millisec>=this._defaults.millisecMax){this.millisec=this._defaults.millisecMax;this._defaults.microsecMax=maxDateTime.getMicroseconds();}else{if(this.microsec>this._defaults.microsecMax){this.microsec=this._defaults.microsecMax;}
this._defaults.microsecMax=this.microsecMaxOriginal;}}else{this._defaults.millisecMax=this.millisecMaxOriginal;this._defaults.microsecMax=this.microsecMaxOriginal;}}else{this._defaults.secondMax=this.secondMaxOriginal;this._defaults.millisecMax=this.millisecMaxOriginal;this._defaults.microsecMax=this.microsecMaxOriginal;}}else{this._defaults.minuteMax=this.minuteMaxOriginal;this._defaults.secondMax=this.secondMaxOriginal;this._defaults.millisecMax=this.millisecMaxOriginal;this._defaults.microsecMax=this.microsecMaxOriginal;}}else{this._defaults.hourMax=this.hourMaxOriginal;this._defaults.minuteMax=this.minuteMaxOriginal;this._defaults.secondMax=this.secondMaxOriginal;this._defaults.millisecMax=this.millisecMaxOriginal;this._defaults.microsecMax=this.microsecMaxOriginal;}}
if(dp_inst.settings.minTime!==null){var tempMinTime=new Date("01/01/1970 "+dp_inst.settings.minTime);if(this.hour<tempMinTime.getHours()){this.hour=this._defaults.hourMin=tempMinTime.getHours();this.minute=this._defaults.minuteMin=tempMinTime.getMinutes();}else if(this.hour===tempMinTime.getHours()&&this.minute<tempMinTime.getMinutes()){this.minute=this._defaults.minuteMin=tempMinTime.getMinutes();}else{if(this._defaults.hourMin<tempMinTime.getHours()){this._defaults.hourMin=tempMinTime.getHours();this._defaults.minuteMin=tempMinTime.getMinutes();}else if(this._defaults.hourMin===tempMinTime.getHours()===this.hour&&this._defaults.minuteMin<tempMinTime.getMinutes()){this._defaults.minuteMin=tempMinTime.getMinutes();}else{this._defaults.minuteMin=0;}}}
if(dp_inst.settings.maxTime!==null){var tempMaxTime=new Date("01/01/1970 "+dp_inst.settings.maxTime);if(this.hour>tempMaxTime.getHours()){this.hour=this._defaults.hourMax=tempMaxTime.getHours();this.minute=this._defaults.minuteMax=tempMaxTime.getMinutes();}else if(this.hour===tempMaxTime.getHours()&&this.minute>tempMaxTime.getMinutes()){this.minute=this._defaults.minuteMax=tempMaxTime.getMinutes();}else{if(this._defaults.hourMax>tempMaxTime.getHours()){this._defaults.hourMax=tempMaxTime.getHours();this._defaults.minuteMax=tempMaxTime.getMinutes();}else if(this._defaults.hourMax===tempMaxTime.getHours()===this.hour&&this._defaults.minuteMax>tempMaxTime.getMinutes()){this._defaults.minuteMax=tempMaxTime.getMinutes();}else{this._defaults.minuteMax=59;}}}
if(adjustSliders!==undefined&&adjustSliders===true){var hourMax=parseInt((this._defaults.hourMax-((this._defaults.hourMax-this._defaults.hourMin)%this._defaults.stepHour)),10),minMax=parseInt((this._defaults.minuteMax-((this._defaults.minuteMax-this._defaults.minuteMin)%this._defaults.stepMinute)),10),secMax=parseInt((this._defaults.secondMax-((this._defaults.secondMax-this._defaults.secondMin)%this._defaults.stepSecond)),10),millisecMax=parseInt((this._defaults.millisecMax-((this._defaults.millisecMax-this._defaults.millisecMin)%this._defaults.stepMillisec)),10),microsecMax=parseInt((this._defaults.microsecMax-((this._defaults.microsecMax-this._defaults.microsecMin)%this._defaults.stepMicrosec)),10);if(this.hour_slider){this.control.options(this,this.hour_slider,'hour',{min:this._defaults.hourMin,max:hourMax,step:this._defaults.stepHour});this.control.value(this,this.hour_slider,'hour',this.hour-(this.hour%this._defaults.stepHour));}
if(this.minute_slider){this.control.options(this,this.minute_slider,'minute',{min:this._defaults.minuteMin,max:minMax,step:this._defaults.stepMinute});this.control.value(this,this.minute_slider,'minute',this.minute-(this.minute%this._defaults.stepMinute));}
if(this.second_slider){this.control.options(this,this.second_slider,'second',{min:this._defaults.secondMin,max:secMax,step:this._defaults.stepSecond});this.control.value(this,this.second_slider,'second',this.second-(this.second%this._defaults.stepSecond));}
if(this.millisec_slider){this.control.options(this,this.millisec_slider,'millisec',{min:this._defaults.millisecMin,max:millisecMax,step:this._defaults.stepMillisec});this.control.value(this,this.millisec_slider,'millisec',this.millisec-(this.millisec%this._defaults.stepMillisec));}
if(this.microsec_slider){this.control.options(this,this.microsec_slider,'microsec',{min:this._defaults.microsecMin,max:microsecMax,step:this._defaults.stepMicrosec});this.control.value(this,this.microsec_slider,'microsec',this.microsec-(this.microsec%this._defaults.stepMicrosec));}}},_onTimeChange:function(){if(!this._defaults.showTimepicker){return;}
var hour=(this.hour_slider)?this.control.value(this,this.hour_slider,'hour'):false,minute=(this.minute_slider)?this.control.value(this,this.minute_slider,'minute'):false,second=(this.second_slider)?this.control.value(this,this.second_slider,'second'):false,millisec=(this.millisec_slider)?this.control.value(this,this.millisec_slider,'millisec'):false,microsec=(this.microsec_slider)?this.control.value(this,this.microsec_slider,'microsec'):false,timezone=(this.timezone_select)?this.timezone_select.val():false,o=this._defaults,pickerTimeFormat=o.pickerTimeFormat||o.timeFormat,pickerTimeSuffix=o.pickerTimeSuffix||o.timeSuffix;if(typeof(hour)==='object'){hour=false;}
if(typeof(minute)==='object'){minute=false;}
if(typeof(second)==='object'){second=false;}
if(typeof(millisec)==='object'){millisec=false;}
if(typeof(microsec)==='object'){microsec=false;}
if(typeof(timezone)==='object'){timezone=false;}
if(hour!==false){hour=parseInt(hour,10);}
if(minute!==false){minute=parseInt(minute,10);}
if(second!==false){second=parseInt(second,10);}
if(millisec!==false){millisec=parseInt(millisec,10);}
if(microsec!==false){microsec=parseInt(microsec,10);}
if(timezone!==false){timezone=timezone.toString();}
var ampm=o[hour<12?'amNames':'pmNames'][0];var hasChanged=(hour!==parseInt(this.hour,10)||minute!==parseInt(this.minute,10)||second!==parseInt(this.second,10)||millisec!==parseInt(this.millisec,10)||microsec!==parseInt(this.microsec,10)||(this.ampm.length>0&&(hour<12)!==($.inArray(this.ampm.toUpperCase(),this.amNames)!==-1))||(this.timezone!==null&&timezone!==this.timezone.toString()));if(hasChanged){if(hour!==false){this.hour=hour;}
if(minute!==false){this.minute=minute;}
if(second!==false){this.second=second;}
if(millisec!==false){this.millisec=millisec;}
if(microsec!==false){this.microsec=microsec;}
if(timezone!==false){this.timezone=timezone;}
if(!this.inst){this.inst=$.datepicker._getInst(this.$input[0]);}
this._limitMinMaxDateTime(this.inst,true);}
if(this.support.ampm){this.ampm=ampm;}
this.formattedTime=$.datepicker.formatTime(o.timeFormat,this,o);if(this.$timeObj){if(pickerTimeFormat===o.timeFormat){this.$timeObj.val(this.formattedTime+pickerTimeSuffix);}
else{this.$timeObj.val($.datepicker.formatTime(pickerTimeFormat,this,o)+pickerTimeSuffix);}
if(this.$timeObj[0].setSelectionRange){var sPos=this.$timeObj[0].selectionStart;var ePos=this.$timeObj[0].selectionEnd;this.$timeObj[0].setSelectionRange(sPos,ePos);}}
this.timeDefined=true;if(hasChanged){this._updateDateTime();}},_onSelectHandler:function(){var onSelect=this._defaults.onSelect||this.inst.settings.onSelect;var inputEl=this.$input?this.$input[0]:null;if(onSelect&&inputEl){onSelect.apply(inputEl,[this.formattedDateTime,this]);}},_updateDateTime:function(dp_inst){dp_inst=this.inst||dp_inst;var dtTmp=(dp_inst.currentYear>0?new Date(dp_inst.currentYear,dp_inst.currentMonth,dp_inst.currentDay):new Date(dp_inst.selectedYear,dp_inst.selectedMonth,dp_inst.selectedDay)),dt=$.datepicker._daylightSavingAdjust(dtTmp),dateFmt=$.datepicker._get(dp_inst,'dateFormat'),formatCfg=$.datepicker._getFormatConfig(dp_inst),timeAvailable=dt!==null&&this.timeDefined;this.formattedDate=$.datepicker.formatDate(dateFmt,(dt===null?new Date():dt),formatCfg);var formattedDateTime=this.formattedDate;if(dp_inst.lastVal===""){dp_inst.currentYear=dp_inst.selectedYear;dp_inst.currentMonth=dp_inst.selectedMonth;dp_inst.currentDay=dp_inst.selectedDay;}
if(this._defaults.timeOnly===true&&this._defaults.timeOnlyShowDate===false){formattedDateTime=this.formattedTime;}else if((this._defaults.timeOnly!==true&&(this._defaults.alwaysSetTime||timeAvailable))||(this._defaults.timeOnly===true&&this._defaults.timeOnlyShowDate===true)){formattedDateTime+=this._defaults.separator+this.formattedTime+this._defaults.timeSuffix;}
this.formattedDateTime=formattedDateTime;if(!this._defaults.showTimepicker){this.$input.val(this.formattedDate);}else if(this.$altInput&&this._defaults.timeOnly===false&&this._defaults.altFieldTimeOnly===true){this.$altInput.val(this.formattedTime);this.$input.val(this.formattedDate);}else if(this.$altInput){this.$input.val(formattedDateTime);var altFormattedDateTime='',altSeparator=this._defaults.altSeparator!==null?this._defaults.altSeparator:this._defaults.separator,altTimeSuffix=this._defaults.altTimeSuffix!==null?this._defaults.altTimeSuffix:this._defaults.timeSuffix;if(!this._defaults.timeOnly){if(this._defaults.altFormat){altFormattedDateTime=$.datepicker.formatDate(this._defaults.altFormat,(dt===null?new Date():dt),formatCfg);}
else{altFormattedDateTime=this.formattedDate;}
if(altFormattedDateTime){altFormattedDateTime+=altSeparator;}}
if(this._defaults.altTimeFormat!==null){altFormattedDateTime+=$.datepicker.formatTime(this._defaults.altTimeFormat,this,this._defaults)+altTimeSuffix;}
else{altFormattedDateTime+=this.formattedTime+altTimeSuffix;}
this.$altInput.val(altFormattedDateTime);}else{this.$input.val(formattedDateTime);}
this.$input.trigger("change");},_onFocus:function(){if(!this.$input.val()&&this._defaults.defaultValue){this.$input.val(this._defaults.defaultValue);var inst=$.datepicker._getInst(this.$input.get(0)),tp_inst=$.datepicker._get(inst,'timepicker');if(tp_inst){if(tp_inst._defaults.timeOnly&&(inst.input.val()!==inst.lastVal)){try{$.datepicker._updateDatepicker(inst);}catch(err){$.timepicker.log(err);}}}}},_controls:{slider:{create:function(tp_inst,obj,unit,val,min,max,step){var rtl=tp_inst._defaults.isRTL;return obj.prop('slide',null).slider({orientation:"horizontal",value:rtl?val*-1:val,min:rtl?max*-1:min,max:rtl?min*-1:max,step:step,slide:function(event,ui){tp_inst.control.value(tp_inst,$(this),unit,rtl?ui.value*-1:ui.value);tp_inst._onTimeChange();},stop:function(event,ui){tp_inst._onSelectHandler();}});},options:function(tp_inst,obj,unit,opts,val){if(tp_inst._defaults.isRTL){if(typeof(opts)==='string'){if(opts==='min'||opts==='max'){if(val!==undefined){return obj.slider(opts,val*-1);}
return Math.abs(obj.slider(opts));}
return obj.slider(opts);}
var min=opts.min,max=opts.max;opts.min=opts.max=null;if(min!==undefined){opts.max=min*-1;}
if(max!==undefined){opts.min=max*-1;}
return obj.slider(opts);}
if(typeof(opts)==='string'&&val!==undefined){return obj.slider(opts,val);}
return obj.slider(opts);},value:function(tp_inst,obj,unit,val){if(tp_inst._defaults.isRTL){if(val!==undefined){return obj.slider('value',val*-1);}
return Math.abs(obj.slider('value'));}
if(val!==undefined){return obj.slider('value',val);}
return obj.slider('value');}},select:{create:function(tp_inst,obj,unit,val,min,max,step){var sel='<select class="ui-timepicker-select ui-state-default ui-corner-all" data-unit="'+unit+'" data-min="'+min+'" data-max="'+max+'" data-step="'+step+'">',format=tp_inst._defaults.pickerTimeFormat||tp_inst._defaults.timeFormat;for(var i=min;i<=max;i+=step){sel+='<option value="'+i+'"'+(i===val?' selected':'')+'>';if(unit==='hour'){sel+=$.datepicker.formatTime($.trim(format.replace(/[^ht ]/ig,'')),{hour:i},tp_inst._defaults);}
else if(unit==='millisec'||unit==='microsec'||i>=10){sel+=i;}
else{sel+='0'+i.toString();}
sel+='</option>';}
sel+='</select>';obj.children('select').remove();$(sel).appendTo(obj).change(function(e){tp_inst._onTimeChange();tp_inst._onSelectHandler();tp_inst._afterInject();});return obj;},options:function(tp_inst,obj,unit,opts,val){var o={},$t=obj.children('select');if(typeof(opts)==='string'){if(val===undefined){return $t.data(opts);}
o[opts]=val;}
else{o=opts;}
return tp_inst.control.create(tp_inst,obj,$t.data('unit'),$t.val(),o.min>=0?o.min:$t.data('min'),o.max||$t.data('max'),o.step||$t.data('step'));},value:function(tp_inst,obj,unit,val){var $t=obj.children('select');if(val!==undefined){return $t.val(val);}
return $t.val();}}}});$.fn.extend({timepicker:function(o){o=o||{};var tmp_args=Array.prototype.slice.call(arguments);if(typeof o==='object'){tmp_args[0]=$.extend(o,{timeOnly:true});}
return $(this).each(function(){$.fn.datetimepicker.apply($(this),tmp_args);});},datetimepicker:function(o){o=o||{};var tmp_args=arguments;if(typeof(o)==='string'){if(o==='getDate'||(o==='option'&&tmp_args.length===2&&typeof(tmp_args[1])==='string')){return $.fn.datepicker.apply($(this[0]),tmp_args);}else{return this.each(function(){var $t=$(this);$t.datepicker.apply($t,tmp_args);});}}else{return this.each(function(){var $t=$(this);$t.datepicker($.timepicker._newInst($t,o)._defaults);});}}});$.datepicker.parseDateTime=function(dateFormat,timeFormat,dateTimeString,dateSettings,timeSettings){var parseRes=parseDateTimeInternal(dateFormat,timeFormat,dateTimeString,dateSettings,timeSettings);if(parseRes.timeObj){var t=parseRes.timeObj;parseRes.date.setHours(t.hour,t.minute,t.second,t.millisec);parseRes.date.setMicroseconds(t.microsec);}
return parseRes.date;};$.datepicker.parseTime=function(timeFormat,timeString,options){var o=extendRemove(extendRemove({},$.timepicker._defaults),options||{}),iso8601=(timeFormat.replace(/\'.*?\'/g,'').indexOf('Z')!==-1);var strictParse=function(f,s,o){var getPatternAmpm=function(amNames,pmNames){var markers=[];if(amNames){$.merge(markers,amNames);}
if(pmNames){$.merge(markers,pmNames);}
markers=$.map(markers,function(val){return val.replace(/[.*+?|()\[\]{}\\]/g,'\\$&');});return'('+markers.join('|')+')?';};var getFormatPositions=function(timeFormat){var finds=timeFormat.toLowerCase().match(/(h{1,2}|m{1,2}|s{1,2}|l{1}|c{1}|t{1,2}|z|'.*?')/g),orders={h:-1,m:-1,s:-1,l:-1,c:-1,t:-1,z:-1};if(finds){for(var i=0;i<finds.length;i++){if(orders[finds[i].toString().charAt(0)]===-1){orders[finds[i].toString().charAt(0)]=i+1;}}}
return orders;};var regstr='^'+f.toString().replace(/([hH]{1,2}|mm?|ss?|[tT]{1,2}|[zZ]|[lc]|'.*?')/g,function(match){var ml=match.length;switch(match.charAt(0).toLowerCase()){case'h':return ml===1?'(\\d?\\d)':'(\\d{'+ml+'})';case'm':return ml===1?'(\\d?\\d)':'(\\d{'+ml+'})';case's':return ml===1?'(\\d?\\d)':'(\\d{'+ml+'})';case'l':return'(\\d?\\d?\\d)';case'c':return'(\\d?\\d?\\d)';case'z':return'(z|[-+]\\d\\d:?\\d\\d|\\S+)?';case't':return getPatternAmpm(o.amNames,o.pmNames);default:return'('+match.replace(/\'/g,"").replace(/(\.|\$|\^|\\|\/|\(|\)|\[|\]|\?|\+|\*)/g,function(m){return"\\"+m;})+')?';}}).replace(/\s/g,'\\s?')+
o.timeSuffix+'$',order=getFormatPositions(f),ampm='',treg;treg=s.match(new RegExp(regstr,'i'));var resTime={hour:0,minute:0,second:0,millisec:0,microsec:0};if(treg){if(order.t!==-1){if(treg[order.t]===undefined||treg[order.t].length===0){ampm='';resTime.ampm='';}else{ampm=$.inArray(treg[order.t].toUpperCase(),$.map(o.amNames,function(x,i){return x.toUpperCase();}))!==-1?'AM':'PM';resTime.ampm=o[ampm==='AM'?'amNames':'pmNames'][0];}}
if(order.h!==-1){if(ampm==='AM'&&treg[order.h]==='12'){resTime.hour=0;}else{if(ampm==='PM'&&treg[order.h]!=='12'){resTime.hour=parseInt(treg[order.h],10)+12;}else{resTime.hour=Number(treg[order.h]);}}}
if(order.m!==-1){resTime.minute=Number(treg[order.m]);}
if(order.s!==-1){resTime.second=Number(treg[order.s]);}
if(order.l!==-1){resTime.millisec=Number(treg[order.l]);}
if(order.c!==-1){resTime.microsec=Number(treg[order.c]);}
if(order.z!==-1&&treg[order.z]!==undefined){resTime.timezone=$.timepicker.timezoneOffsetNumber(treg[order.z]);}
return resTime;}
return false;};var looseParse=function(f,s,o){try{var d=new Date('2012-01-01 '+s);if(isNaN(d.getTime())){d=new Date('2012-01-01T'+s);if(isNaN(d.getTime())){d=new Date('01/01/2012 '+s);if(isNaN(d.getTime())){throw"Unable to parse time with native Date: "+s;}}}
return{hour:d.getHours(),minute:d.getMinutes(),second:d.getSeconds(),millisec:d.getMilliseconds(),microsec:d.getMicroseconds(),timezone:d.getTimezoneOffset()*-1};}
catch(err){try{return strictParse(f,s,o);}
catch(err2){$.timepicker.log("Unable to parse \ntimeString: "+s+"\ntimeFormat: "+f);}}
return false;};if(typeof o.parse==="function"){return o.parse(timeFormat,timeString,o);}
if(o.parse==='loose'){return looseParse(timeFormat,timeString,o);}
return strictParse(timeFormat,timeString,o);};$.datepicker.formatTime=function(format,time,options){options=options||{};options=$.extend({},$.timepicker._defaults,options);time=$.extend({hour:0,minute:0,second:0,millisec:0,microsec:0,timezone:null},time);var tmptime=format,ampmName=options.amNames[0],hour=parseInt(time.hour,10);if(hour>11){ampmName=options.pmNames[0];}
tmptime=tmptime.replace(/(?:HH?|hh?|mm?|ss?|[tT]{1,2}|[zZ]|[lc]|'.*?')/g,function(match){switch(match){case'HH':return('0'+hour).slice(-2);case'H':return hour;case'hh':return('0'+convert24to12(hour)).slice(-2);case'h':return convert24to12(hour);case'mm':return('0'+time.minute).slice(-2);case'm':return time.minute;case'ss':return('0'+time.second).slice(-2);case's':return time.second;case'l':return('00'+time.millisec).slice(-3);case'c':return('00'+time.microsec).slice(-3);case'z':return $.timepicker.timezoneOffsetString(time.timezone===null?options.timezone:time.timezone,false);case'Z':return $.timepicker.timezoneOffsetString(time.timezone===null?options.timezone:time.timezone,true);case'T':return ampmName.charAt(0).toUpperCase();case'TT':return ampmName.toUpperCase();case't':return ampmName.charAt(0).toLowerCase();case'tt':return ampmName.toLowerCase();default:return match.replace(/'/g,"");}});return tmptime;};$.datepicker._base_selectDate=$.datepicker._selectDate;$.datepicker._selectDate=function(id,dateStr){var inst=this._getInst($(id)[0]),tp_inst=this._get(inst,'timepicker'),was_inline;if(tp_inst&&inst.settings.showTimepicker){tp_inst._limitMinMaxDateTime(inst,true);was_inline=inst.inline;inst.inline=inst.stay_open=true;this._base_selectDate(id,dateStr);inst.inline=was_inline;inst.stay_open=false;this._notifyChange(inst);this._updateDatepicker(inst);}else{this._base_selectDate(id,dateStr);}};$.datepicker._base_updateDatepicker=$.datepicker._updateDatepicker;$.datepicker._updateDatepicker=function(inst){var input=inst.input[0];if($.datepicker._curInst&&$.datepicker._curInst!==inst&&$.datepicker._datepickerShowing&&$.datepicker._lastInput!==input){return;}
if(typeof(inst.stay_open)!=='boolean'||inst.stay_open===false){this._base_updateDatepicker(inst);var tp_inst=this._get(inst,'timepicker');if(tp_inst){tp_inst._addTimePicker(inst);}}};$.datepicker._base_doKeyPress=$.datepicker._doKeyPress;$.datepicker._doKeyPress=function(event){var inst=$.datepicker._getInst(event.target),tp_inst=$.datepicker._get(inst,'timepicker');if(tp_inst){if($.datepicker._get(inst,'constrainInput')){var ampm=tp_inst.support.ampm,tz=tp_inst._defaults.showTimezone!==null?tp_inst._defaults.showTimezone:tp_inst.support.timezone,dateChars=$.datepicker._possibleChars($.datepicker._get(inst,'dateFormat')),datetimeChars=tp_inst._defaults.timeFormat.toString().replace(/[hms]/g,'').replace(/TT/g,ampm?'APM':'').replace(/Tt/g,ampm?'AaPpMm':'').replace(/tT/g,ampm?'AaPpMm':'').replace(/T/g,ampm?'AP':'').replace(/tt/g,ampm?'apm':'').replace(/t/g,ampm?'ap':'')+" "+tp_inst._defaults.separator+
tp_inst._defaults.timeSuffix+
(tz?tp_inst._defaults.timezoneList.join(''):'')+
(tp_inst._defaults.amNames.join(''))+(tp_inst._defaults.pmNames.join(''))+
dateChars,chr=String.fromCharCode(event.charCode===undefined?event.keyCode:event.charCode);return event.ctrlKey||(chr<' '||!dateChars||datetimeChars.indexOf(chr)>-1);}}
return $.datepicker._base_doKeyPress(event);};$.datepicker._base_updateAlternate=$.datepicker._updateAlternate;$.datepicker._updateAlternate=function(inst){var tp_inst=this._get(inst,'timepicker');if(tp_inst){var altField=tp_inst._defaults.altField;if(altField){var altFormat=tp_inst._defaults.altFormat||tp_inst._defaults.dateFormat,date=this._getDate(inst),formatCfg=$.datepicker._getFormatConfig(inst),altFormattedDateTime='',altSeparator=tp_inst._defaults.altSeparator?tp_inst._defaults.altSeparator:tp_inst._defaults.separator,altTimeSuffix=tp_inst._defaults.altTimeSuffix?tp_inst._defaults.altTimeSuffix:tp_inst._defaults.timeSuffix,altTimeFormat=tp_inst._defaults.altTimeFormat!==null?tp_inst._defaults.altTimeFormat:tp_inst._defaults.timeFormat;altFormattedDateTime+=$.datepicker.formatTime(altTimeFormat,tp_inst,tp_inst._defaults)+altTimeSuffix;if(!tp_inst._defaults.timeOnly&&!tp_inst._defaults.altFieldTimeOnly&&date!==null){if(tp_inst._defaults.altFormat){altFormattedDateTime=$.datepicker.formatDate(tp_inst._defaults.altFormat,date,formatCfg)+altSeparator+altFormattedDateTime;}
else{altFormattedDateTime=tp_inst.formattedDate+altSeparator+altFormattedDateTime;}}
$(altField).val(inst.input.val()?altFormattedDateTime:"");}}
else{$.datepicker._base_updateAlternate(inst);}};$.datepicker._base_doKeyUp=$.datepicker._doKeyUp;$.datepicker._doKeyUp=function(event){var inst=$.datepicker._getInst(event.target),tp_inst=$.datepicker._get(inst,'timepicker');if(tp_inst){if(tp_inst._defaults.timeOnly&&(inst.input.val()!==inst.lastVal)){try{$.datepicker._updateDatepicker(inst);}catch(err){$.timepicker.log(err);}}}
return $.datepicker._base_doKeyUp(event);};$.datepicker._base_gotoToday=$.datepicker._gotoToday;$.datepicker._gotoToday=function(id){var inst=this._getInst($(id)[0]);this._base_gotoToday(id);var tp_inst=this._get(inst,'timepicker');if(!tp_inst){return;}
var tzoffset=$.timepicker.timezoneOffsetNumber(tp_inst.timezone);var now=new Date();now.setMinutes(now.getMinutes()+now.getTimezoneOffset()+parseInt(tzoffset,10));this._setTime(inst,now);this._setDate(inst,now);tp_inst._onSelectHandler();};$.datepicker._disableTimepickerDatepicker=function(target){var inst=this._getInst(target);if(!inst){return;}
var tp_inst=this._get(inst,'timepicker');$(target).datepicker('getDate');if(tp_inst){inst.settings.showTimepicker=false;tp_inst._defaults.showTimepicker=false;tp_inst._updateDateTime(inst);}};$.datepicker._enableTimepickerDatepicker=function(target){var inst=this._getInst(target);if(!inst){return;}
var tp_inst=this._get(inst,'timepicker');$(target).datepicker('getDate');if(tp_inst){inst.settings.showTimepicker=true;tp_inst._defaults.showTimepicker=true;tp_inst._addTimePicker(inst);tp_inst._updateDateTime(inst);}};$.datepicker._setTime=function(inst,date){var tp_inst=this._get(inst,'timepicker');if(tp_inst){var defaults=tp_inst._defaults;tp_inst.hour=date?date.getHours():defaults.hour;tp_inst.minute=date?date.getMinutes():defaults.minute;tp_inst.second=date?date.getSeconds():defaults.second;tp_inst.millisec=date?date.getMilliseconds():defaults.millisec;tp_inst.microsec=date?date.getMicroseconds():defaults.microsec;tp_inst._limitMinMaxDateTime(inst,true);tp_inst._onTimeChange();tp_inst._updateDateTime(inst);}};$.datepicker._setTimeDatepicker=function(target,date,withDate){var inst=this._getInst(target);if(!inst){return;}
var tp_inst=this._get(inst,'timepicker');if(tp_inst){this._setDateFromField(inst);var tp_date;if(date){if(typeof date==="string"){tp_inst._parseTime(date,withDate);tp_date=new Date();tp_date.setHours(tp_inst.hour,tp_inst.minute,tp_inst.second,tp_inst.millisec);tp_date.setMicroseconds(tp_inst.microsec);}else{tp_date=new Date(date.getTime());tp_date.setMicroseconds(date.getMicroseconds());}
if(tp_date.toString()==='Invalid Date'){tp_date=undefined;}
this._setTime(inst,tp_date);}}};$.datepicker._base_setDateDatepicker=$.datepicker._setDateDatepicker;$.datepicker._setDateDatepicker=function(target,_date){var inst=this._getInst(target);var date=_date;if(!inst){return;}
if(typeof(_date)==='string'){date=new Date(_date);if(!date.getTime()){this._base_setDateDatepicker.apply(this,arguments);date=$(target).datepicker('getDate');}}
var tp_inst=this._get(inst,'timepicker');var tp_date;if(date instanceof Date){tp_date=new Date(date.getTime());tp_date.setMicroseconds(date.getMicroseconds());}else{tp_date=date;}
if(tp_inst&&tp_date){if(!tp_inst.support.timezone&&tp_inst._defaults.timezone===null){tp_inst.timezone=tp_date.getTimezoneOffset()*-1;}
date=$.timepicker.timezoneAdjust(date,$.timepicker.timezoneOffsetString(-date.getTimezoneOffset()),tp_inst.timezone);tp_date=$.timepicker.timezoneAdjust(tp_date,$.timepicker.timezoneOffsetString(-tp_date.getTimezoneOffset()),tp_inst.timezone);}
this._updateDatepicker(inst);this._base_setDateDatepicker.apply(this,arguments);this._setTimeDatepicker(target,tp_date,true);};$.datepicker._base_getDateDatepicker=$.datepicker._getDateDatepicker;$.datepicker._getDateDatepicker=function(target,noDefault){var inst=this._getInst(target);if(!inst){return;}
var tp_inst=this._get(inst,'timepicker');if(tp_inst){if(inst.lastVal===undefined){this._setDateFromField(inst,noDefault);}
var date=this._getDate(inst);var currDT=null;if(tp_inst.$altInput&&tp_inst._defaults.altFieldTimeOnly){currDT=tp_inst.$input.val()+' '+tp_inst.$altInput.val();}
else if(tp_inst.$input.get(0).tagName!=='INPUT'&&tp_inst.$altInput){currDT=tp_inst.$altInput.val();}
else{currDT=tp_inst.$input.val();}
if(date&&tp_inst._parseTime(currDT,!inst.settings.timeOnly)){date.setHours(tp_inst.hour,tp_inst.minute,tp_inst.second,tp_inst.millisec);date.setMicroseconds(tp_inst.microsec);if(tp_inst.timezone!=null){if(!tp_inst.support.timezone&&tp_inst._defaults.timezone===null){tp_inst.timezone=date.getTimezoneOffset()*-1;}
date=$.timepicker.timezoneAdjust(date,tp_inst.timezone,$.timepicker.timezoneOffsetString(-date.getTimezoneOffset()));}}
return date;}
return this._base_getDateDatepicker(target,noDefault);};$.datepicker._base_parseDate=$.datepicker.parseDate;$.datepicker.parseDate=function(format,value,settings){var date;try{date=this._base_parseDate(format,value,settings);}catch(err){if(err.indexOf(":")>=0){date=this._base_parseDate(format,value.substring(0,value.length-(err.length-err.indexOf(':')-2)),settings);$.timepicker.log("Error parsing the date string: "+err+"\ndate string = "+value+"\ndate format = "+format);}else{throw err;}}
return date;};$.datepicker._base_formatDate=$.datepicker._formatDate;$.datepicker._formatDate=function(inst,day,month,year){var tp_inst=this._get(inst,'timepicker');if(tp_inst){tp_inst._updateDateTime(inst);return tp_inst.$input.val();}
return this._base_formatDate(inst);};$.datepicker._base_optionDatepicker=$.datepicker._optionDatepicker;$.datepicker._optionDatepicker=function(target,name,value){var inst=this._getInst(target),name_clone;if(!inst){return null;}
var tp_inst=this._get(inst,'timepicker');if(tp_inst){var min=null,max=null,onselect=null,overrides=tp_inst._defaults.evnts,fns={},prop,ret,oldVal,$target;if(typeof name==='string'){if(name==='minDate'||name==='minDateTime'){min=value;}else if(name==='maxDate'||name==='maxDateTime'){max=value;}else if(name==='onSelect'){onselect=value;}else if(overrides.hasOwnProperty(name)){if(typeof(value)==='undefined'){return overrides[name];}
fns[name]=value;name_clone={};}}else if(typeof name==='object'){if(name.minDate){min=name.minDate;}else if(name.minDateTime){min=name.minDateTime;}else if(name.maxDate){max=name.maxDate;}else if(name.maxDateTime){max=name.maxDateTime;}
for(prop in overrides){if(overrides.hasOwnProperty(prop)&&name[prop]){fns[prop]=name[prop];}}}
for(prop in fns){if(fns.hasOwnProperty(prop)){overrides[prop]=fns[prop];if(!name_clone){name_clone=$.extend({},name);}
delete name_clone[prop];}}
if(name_clone&&isEmptyObject(name_clone)){return;}
if(min){if(min===0){min=new Date();}else{min=new Date(min);}
tp_inst._defaults.minDate=min;tp_inst._defaults.minDateTime=min;}else if(max){if(max===0){max=new Date();}else{max=new Date(max);}
tp_inst._defaults.maxDate=max;tp_inst._defaults.maxDateTime=max;}else if(onselect){tp_inst._defaults.onSelect=onselect;}
if(min||max){$target=$(target);oldVal=$target.datetimepicker('getDate');ret=this._base_optionDatepicker.call($.datepicker,target,name_clone||name,value);$target.datetimepicker('setDate',oldVal);return ret;}}
if(value===undefined){return this._base_optionDatepicker.call($.datepicker,target,name);}
return this._base_optionDatepicker.call($.datepicker,target,name_clone||name,value);};var isEmptyObject=function(obj){var prop;for(prop in obj){if(obj.hasOwnProperty(prop)){return false;}}
return true;};var extendRemove=function(target,props){$.extend(target,props);for(var name in props){if(props[name]===null||props[name]===undefined){target[name]=props[name];}}
return target;};var detectSupport=function(timeFormat){var tf=timeFormat.replace(/'.*?'/g,'').toLowerCase(),isIn=function(f,t){return f.indexOf(t)!==-1?true:false;};return{hour:isIn(tf,'h'),minute:isIn(tf,'m'),second:isIn(tf,'s'),millisec:isIn(tf,'l'),microsec:isIn(tf,'c'),timezone:isIn(tf,'z'),ampm:isIn(tf,'t')&&isIn(timeFormat,'h'),iso8601:isIn(timeFormat,'Z')};};var convert24to12=function(hour){hour%=12;if(hour===0){hour=12;}
return String(hour);};var computeEffectiveSetting=function(settings,property){return settings&&settings[property]?settings[property]:$.timepicker._defaults[property];};var splitDateTime=function(dateTimeString,timeSettings){var separator=computeEffectiveSetting(timeSettings,'separator'),format=computeEffectiveSetting(timeSettings,'timeFormat'),timeParts=format.split(separator),timePartsLen=timeParts.length,allParts=dateTimeString.split(separator),allPartsLen=allParts.length;if(allPartsLen>1){return{dateString:allParts.splice(0,allPartsLen-timePartsLen).join(separator),timeString:allParts.splice(0,timePartsLen).join(separator)};}
return{dateString:dateTimeString,timeString:''};};var parseDateTimeInternal=function(dateFormat,timeFormat,dateTimeString,dateSettings,timeSettings){var date,parts,parsedTime;parts=splitDateTime(dateTimeString,timeSettings);date=$.datepicker._base_parseDate(dateFormat,parts.dateString,dateSettings);if(parts.timeString===''){return{date:date};}
parsedTime=$.datepicker.parseTime(timeFormat,parts.timeString,timeSettings);if(!parsedTime){throw'Wrong time format';}
return{date:date,timeObj:parsedTime};};var selectLocalTimezone=function(tp_inst,date){if(tp_inst&&tp_inst.timezone_select){var now=date||new Date();tp_inst.timezone_select.val(-now.getTimezoneOffset());}};$.timepicker=new Timepicker();$.timepicker.timezoneOffsetString=function(tzMinutes,iso8601){if(isNaN(tzMinutes)||tzMinutes>840||tzMinutes<-720){return tzMinutes;}
var off=tzMinutes,minutes=off%60,hours=(off-minutes)/60,iso=iso8601?':':'',tz=(off>=0?'+':'-')+('0'+Math.abs(hours)).slice(-2)+iso+('0'+Math.abs(minutes)).slice(-2);if(tz==='+00:00'){return'Z';}
return tz;};$.timepicker.timezoneOffsetNumber=function(tzString){var normalized=tzString.toString().replace(':','');if(normalized.toUpperCase()==='Z'){return 0;}
if(!/^(\-|\+)\d{4}$/.test(normalized)){return parseInt(tzString,10);}
return((normalized.substr(0,1)==='-'?-1:1)*((parseInt(normalized.substr(1,2),10)*60)+
parseInt(normalized.substr(3,2),10)));};$.timepicker.timezoneAdjust=function(date,fromTimezone,toTimezone){var fromTz=$.timepicker.timezoneOffsetNumber(fromTimezone);var toTz=$.timepicker.timezoneOffsetNumber(toTimezone);if(!isNaN(toTz)){date.setMinutes(date.getMinutes()+(-fromTz)-(-toTz));}
return date;};$.timepicker.timeRange=function(startTime,endTime,options){return $.timepicker.handleRange('timepicker',startTime,endTime,options);};$.timepicker.datetimeRange=function(startTime,endTime,options){$.timepicker.handleRange('datetimepicker',startTime,endTime,options);};$.timepicker.dateRange=function(startTime,endTime,options){$.timepicker.handleRange('datepicker',startTime,endTime,options);};$.timepicker.handleRange=function(method,startTime,endTime,options){options=$.extend({},{minInterval:0,maxInterval:0,start:{},end:{}},options);var timeOnly=false;if(method==='timepicker'){timeOnly=true;method='datetimepicker';}
function checkDates(changed,other){var startdt=startTime[method]('getDate'),enddt=endTime[method]('getDate'),changeddt=changed[method]('getDate');if(startdt!==null){var minDate=new Date(startdt.getTime()),maxDate=new Date(startdt.getTime());minDate.setMilliseconds(minDate.getMilliseconds()+options.minInterval);maxDate.setMilliseconds(maxDate.getMilliseconds()+options.maxInterval);if(options.minInterval>0&&minDate>enddt){endTime[method]('setDate',minDate);}
else if(options.maxInterval>0&&maxDate<enddt){endTime[method]('setDate',maxDate);}
else if(startdt>enddt){other[method]('setDate',changeddt);}}}
function selected(changed,other,option){if(!changed.val()){return;}
var date=changed[method].call(changed,'getDate');if(date!==null&&options.minInterval>0){if(option==='minDate'){date.setMilliseconds(date.getMilliseconds()+options.minInterval);}
if(option==='maxDate'){date.setMilliseconds(date.getMilliseconds()-options.minInterval);}}
if(date.getTime){other[method].call(other,'option',option,date);}}
$.fn[method].call(startTime,$.extend({timeOnly:timeOnly,onClose:function(dateText,inst){checkDates($(this),endTime);},onSelect:function(selectedDateTime){selected($(this),endTime,'minDate');}},options,options.start));$.fn[method].call(endTime,$.extend({timeOnly:timeOnly,onClose:function(dateText,inst){checkDates($(this),startTime);},onSelect:function(selectedDateTime){selected($(this),startTime,'maxDate');}},options,options.end));checkDates(startTime,endTime);selected(startTime,endTime,'minDate');selected(endTime,startTime,'maxDate');return $([startTime.get(0),endTime.get(0)]);};$.timepicker.log=function(){if(window.console&&window.console.log&&window.console.log.apply){window.console.log.apply(window.console,Array.prototype.slice.call(arguments));}};$.timepicker._util={_extendRemove:extendRemove,_isEmptyObject:isEmptyObject,_convert24to12:convert24to12,_detectSupport:detectSupport,_selectLocalTimezone:selectLocalTimezone,_computeEffectiveSetting:computeEffectiveSetting,_splitDateTime:splitDateTime,_parseDateTimeInternal:parseDateTimeInternal};if(!Date.prototype.getMicroseconds){Date.prototype.microseconds=0;Date.prototype.getMicroseconds=function(){return this.microseconds;};Date.prototype.setMicroseconds=function(m){this.setMilliseconds(this.getMilliseconds()+Math.floor(m/1000));this.microseconds=m%1000;return this;};}
$.timepicker.version="1.6.3";}));;$(function(){load_meta_variables();ajax_start_stop();onload_init();IE7_select_disabled_fix();inline_jezik_hover();onload_init_branching();onload_init_inline();onload_init_vprasanje();analiza_init();statistika_init();missingProfiles_init();missingValues_init();variableProfiles_init();conditionProfiles_init();zankaProfiles_init();timeProfiles_init();crosstab_init();multiCrosstabs_init();slideshow_init();dataSetingProfile_init();invitations_init();inspect_init();means_init();ttest_init();simpleMailInvitation_init();charts_init();creport_init();onload_init_recode();});;var loaded=false;var editor_init=false;var srv_meta_anketa_id;var srv_meta_podstran;var srv_meta_akcija;var srv_meta_grupa;var srv_meta_branching;var srv_meta_full_screen_edit;var activationTimer;var _moved=0;var _fullscreen=0;var forma_preview=0;var __vnosi=0;var __analiza=0;var __tabele=0;function load_meta_variables(){srv_meta_anketa_id=$("#srv_meta_anketa_id").val();srv_meta_anketa_hash=$("#srv_meta_anketa_hash").val();srv_meta_podstran=$("#srv_meta_podstran").val();srv_meta_akcija=$("#srv_meta_akcija").val();srv_meta_grupa=$("#srv_meta_grupa").val();srv_meta_branching=$("#srv_meta_branching").val();srv_meta_full_screen_edit=($("#srv_meta_full_screen_edit").val()==1?true:false);loaded=true;};function ajax_start_stop(){var t;$('body').ajaxStart(function(){t=setTimeout(function(){$('body').addClass('waitlong');},1000);$('body').addClass('wait');}).ajaxComplete(function(){clearTimeout(t);$('body').removeClass('wait').removeClass('waitlong');});};function onload_init(){$("#surveyInfo").hover(function(){isInfoOver=true;},function(){isInfoOver=false;setTimeout(function(){hideBottomInfoBox()},350);});$('#surveyTrajanje_close').click(function(){$('#surveyTrajanje').fadeOut('slow');$('#fade').fadeOut('slow');return false;});hover_show_export();hover_show_settings()
hover_show_qtypes()
hover_show_filter()
hover_show_filter2();$('input[maxlength]').keyup(function(){var max=parseInt($(this).attr('maxlength'));if($(this).val().length>max){$(this).val($(this).val().substr(0,$(this).attr('maxlength')));}
$("#"+$(this).attr('id')+'_chars').html($(this).val().length+" / "+max);});$('textarea[maxlength]').keyup(function(){var max=parseInt($(this).attr('maxlength'));if($(this).val().length>max){$(this).val($(this).val().substr(0,$(this).attr('maxlength')));}
$("#"+$(this).attr('id')+'_chars').html($(this).val().length+" / "+max);});$("[srv_misc=true]").bind("blur",{},function(e){if($(this).attr('srv_misc')=="true")
$.post('ajax.php?a=saveSrvMisc',{what:$(this).attr("name"),value:$(this).val(),podstran:srv_meta_podstran});});$("[srv_survey_misc=true]").bind("blur",{},function(e){if($(this).attr('srv_survey_misc')=="true")
$.post('ajax.php?a=saveSrvSurveyMisc',{anketa:srv_meta_anketa_id,what:$(this).attr("name"),value:$(this).val(),podstran:srv_meta_podstran});});$("#startsManual").on("click",function(event){updateManual();return false;});$("#expireManual").on("click",function(event){updateManual();return false;});$("#startsManual1").on("click",function(event){updateManual1();return false;});$("#expireManual1").on("click",function(event){updateManual1();return false;});$('#anketa_activate_more').on("click",function(event){$('#div_anketa_activate_more').hide();$('#anketa_activate_settings').show();});$('#anketa_activate_note').on("click",function(event){stopActivationTimer();});$('#xtradiv strong').on("click",function(event){$('#xtradivSettings').toggle();});$('#test_user_alert span').blink({fadeIn:100,fadeOut:200,pauseShow:500});$('#searchSurvey').keypress(function(e){if(e.which==13){executeDrupalSearch();return false;}});}
function hash_comment_change(input){$.post('ajax.php?t=SurveyUrlLinks&a=saveComment',{anketa:$(input).data('anketa'),hash:$(input).attr('data-hash'),comment:$(input).text()});}
function hash_refresh_change(input){var refresh=$(input).is(':checked')?'1':'0';$.post('ajax.php?t=SurveyUrlLinks&a=saveRefresh',{anketa:$(input).data('anketa'),hash:$(input).attr('data-hash'),refresh:refresh});}
function hash_access_password_change(input){$.post('ajax.php?t=SurveyUrlLinks&a=saveAccessPassword',{anketa:$(input).data('anketa'),hash:$(input).attr('data-hash'),access_password:$(input).text()});}
jQuery.redirect=function(url,options){$.post(url,options,function(url_redirect){window.location=url_redirect;});}
function getContainer(spremenljivka){if(_fullscreen==1)
return'#fullscreen';if(collapsed_content==1)
return'#spremenljivka_'+spremenljivka;else
return'#branching_vprasanja';}
function browser_alert(){if($.browser.msie&&gup('anketa')==""){if(parseInt($.browser.version)<8)
if(confirm(lang['srv_upgrade_ie'])){window.location='http://www.microsoft.com/windows/internet-explorer/worldwide-sites.aspx';}}}
function hover_show_export(){var timer;$("#hover_export_icon").hover(function(){clearTimeout(timer);$("#hover_export").show();},function(){timer=setTimeout(function(){$("#hover_export").hide();},500);});$("#hover_export").hover(function(){clearTimeout(timer);$("#hover_export").show();},function(){timer=setTimeout(function(){$("#hover_export").hide();},500);});}
function hover_show_settings(){var timer;$("#toolbox_advanced_settings").hover(function(){clearTimeout(timer);$("#toolbox_advanced_settings_holder").show();},function(){timer=setTimeout(function(){$("#toolbox_advanced_settings_holder").hide();},500);});$("#toolbox_advanced_settings_holder").hover(function(){clearTimeout(timer);$("#toolbox_advanced_settings_holder").show();},function(){timer=setTimeout(function(){$("#toolbox_advanced_settings_holder").hide();},500);});}
function hover_show_qtypes(){var timer;$(".new_adv").hover(function(){clearTimeout(timer);$("#toolbox_add_advanced").show();},function(){timer=setTimeout(function(){$("#toolbox_add_advanced").hide();},500);});$("#toolbox_add_advanced").hover(function(){clearTimeout(timer);$("#toolbox_add_advanced").show();},function(){timer=setTimeout(function(){$("#toolbox_add_advanced").hide();},500);});}
function hover_show_filter(){var timer;$("#filters_span").hover(function(){clearTimeout(timer);$("#div_analiza_filtri_right").show();},function(){timer=setTimeout(function(){$("#div_analiza_filtri_right").hide();},500);});$("#div_analiza_filtri_right").hover(function(){clearTimeout(timer);$("#div_analiza_filtri_right").show();},function(){timer=setTimeout(function(){$("#div_analiza_filtri_right").hide();},500);});}
function hover_show_filter2(){var timer;$("#filters_span2").hover(function(){clearTimeout(timer);$("#div_analiza_filtri_right2").show();},function(){timer=setTimeout(function(){$("#div_analiza_filtri_right2").hide();},500);});$("#div_analiza_filtri_right2").hover(function(){clearTimeout(timer);$("#div_analiza_filtri_right2").show();},function(){timer=setTimeout(function(){$("#div_analiza_filtri_right2").hide();},500);});}
function anketa(){var akronim=jQuery.trim($("#novaanketa_akronim").val());var naslov=jQuery.trim($("#novaanketa_naslov").val());var intro_opomba=jQuery.trim($("#novaanketa_opis").val());var survey_type=jQuery.trim($("#survey_type").val());$.redirect('ajax.php?a=anketa',{naslov:naslov,intro_opomba:intro_opomba,akronim:akronim,survey_type:survey_type});}
function new_anketa(){var naslov=$("#novaanketa_naslov").val();$("#fullscreen").load('ajax.php?a=new_anketa',{naslov:naslov}).fadeIn('fast');$('#fade').fadeTo('slow',1);}
var isInfoOver=false;var isInfoLoaded=false;function showInfoBox(action,e){if(action=='show'){if(!isInfoLoaded){$('#surveyInfo_msg').load('ajax.php?a=displayInfoBox',{anketa:srv_meta_anketa_id});isInfoLoaded=true;}}}
function hideBottomInfoBox(){if(isInfoOver==false)
$('#surveyInfo').fadeOut(400);}
function edit_anketa_naslov(anketa){$('#anketa_naslov').load('ajax.php?a=edit_anketa',{anketa:anketa,naslov:$('#anketa_polnoIme').val()});}
function edit_anketa_note(anketa){$.post('ajax.php?a=edit_anketa_note',{anketa:anketa,note:$('#anketa_note').val()});}
function edit_anketa_akronim(anketa){$.post('ajax.php?a=edit_anketa_akronim',{anketa:anketa,akronim:$('#anketa_akronim').val()});}
function anketa_active(anketa,state,folders,hierarhija){var hierarhija=hierarhija||0;if(state==0){$('#fade').fadeTo('slow',1);$('#fullscreen').html('').fadeIn('slow');$("#fullscreen").load('ajax.php?a=anketa_show_activation',{anketa:anketa,folders:folders},function(){if(hierarhija==1){$('#divAvtoClose').hide();hierarhija_active(anketa);}else{}});}
else
{var canDisableSurvey='false';$.post('ajax.php?&a=check_survey_permanent',{anketa:anketa},function(response){if(response=='true'){if(confirm(lang["srv_permanent_diable"])){canDisableSurvey='true';}else{canDisableSurvey='false';}}else{canDisableSurvey='true';}
if(canDisableSurvey=='true'){if(confirm(lang["srv_disable"])){if(folders=='true')
{if($("ul#surveyList").length){$("ul#surveyList").find("li#anketa_list_"+anketa).find(".sl_active").load('ajax.php?a=anketa_active&ajaxa='+gup("a"),{anketa:anketa,folders:folders});}
else{$.post('ajax.php?a=anketa_active&ajaxa='+gup("a"),{anketa:anketa,folders:folders},function(){window.location.reload();});}}
else
{$.post('ajax.php?a=anketa_active&ajaxa='+gup("a"),{anketa:anketa,folders:folders},function(){window.location.reload();return;});}}}});}}
function startTimerActivation(anketa,folders){var sec=$('#divAvtoClose span').text()||0;var active=1;activationTimer=setInterval(function(){active=$('#divAvtoClose').attr('active');if(active==1||active=='1'){$('#divAvtoClose span').text(--sec);if(sec==0){stopActivationTimer();anketa_activate_save(anketa,folders);}}else{stopActivationTimer();}},1000);}
function hierarhija_active(anketa_id){$.post("ajax.php?anketa="+anketa_id+"&t=hierarhija-ajax&a=aktivacija_ankete");}
function preveriAnketoZaHierarhijo(anketa_id){if($('#advanced_module_hierarhija').prop('checked')){$.post("ajax.php?anketa="+anketa_id+"&t=hierarhija-ajax&a=preveri-ustreznost-ankete").success(function(response){if(response=='dostop')
return false;$('#hierarhija-opcije-vklopa').show();$('#error').html('').hide();$('#hierarhija-knjiznica').html('').hide('');$('#hierarhija-prevzeta').html('').hide();$('.buttonwrapper a').removeClass('button_gray').addClass('ovalbutton_orange');$('#hierarhija-opcije-vklopa label').each(function(){$(this).find('input').removeAttr('checked').removeAttr('disabled');$(this).css('color','');});if(response=='privzeta'){$('#obstojeca-anketa').attr('disabled','disabled');$('#obstojeca-anketa').parent().css('color','#bbb');$('#prevzeta-anketa').attr('checked','checked');pridobiKnjiznicoZaHierarhijo('privzeta');}
if(response=='napacen-tip'||response=='samo-besedilni-tip'){$('#obstojeca-anketa').attr('disabled','disabled');$('#obstojeca-anketa').parent().css('color','#bbb');if(response=='napacen-tip')
$('#error').show().html(lang['srv_hierarchy_create_error_2']);if(response=='samo-besedilni-tip')
$('#error').show().html(lang['srv_hierarchy_create_error_3']);}
if(response=='ponovna-aktivacija')
return toggleAdvancedModule('hierarhija',1);if(response=='ok')
$('#obstojeca-anketa').attr('checked','checked');});}else{$('#hierarhija-opcije-vklopa').hide();}}
function pridobiKnjiznicoZaHierarhijo(vrsta){$('.ime-ankete').hide();if(vrsta=='vse')
$.post('ajax.php?anketa='+srv_meta_anketa_id+'&t=hierarhija-ajax&a=get-all-hierarchy-library',{vrsta:'vse'}).success(function(response){$('#hierarhija-knjiznica').html(response).show();});if(vrsta=='privzeta'){setTimeout(function(){var vsebina='<span><a href="/main/survey/index.php?anketa=122986&amp;preview=on" target="_blank" title="Predogled ankete">'+'<span class="sprites preview"></span>'+'</a></span>';$('#hierarhija-prevzeta').html(vsebina).show();},100);}
if(vrsta=='nova'){$('.ime-ankete').show();}}
function potrdiIzbiroAnkete(){var izbira=$('[name="izberi-anketo"]:checked').val()||0;if(izbira==0)
return false;if(izbira=='obstojeca')
return toggleAdvancedModule('hierarhija',1);if(izbira=='nova')
ustvariPraznoAnketoInVkljuciModulSA();if(izbira=='prevzeta')
kopirajPrevzetoAnketoAliIzKnjizniceZaHierarhijo('privzeta');if(izbira=='knjiznica'){var knjiznica_id=$('[name="knjiznica_izbira"]:checked').val();kopirajPrevzetoAnketoAliIzKnjizniceZaHierarhijo(knjiznica_id);}}
function ustvariPraznoAnketoInVkljuciModulSA(){var survey_type=2;var naslov=jQuery.trim($("#novaanketa_naslov").val());if($("#novaanketa_naslov_1").length>0){naslov=jQuery.trim($("#novaanketa_naslov_1").val());}
var akronim=naslov;if($("#novaanketa_akronim_1").length>0){var akronim=jQuery.trim($("#novaanketa_akronim_1").val());}
var folder='-1';var intro_opomba=jQuery.trim($("#novaanketa_opis").val());if($("#lang_resp").length>0&&$("#lang_resp").val()>0){var lang_resp=jQuery.trim($("#lang_resp").val());}else{var lang_resp=1;}
var skin='1kaBlue';$.redirect('ajax.php?a=nova-anketa-in-hierarhija',{naslov:naslov,intro_opomba:intro_opomba,akronim:akronim,survey_type:survey_type,lang_resp:lang_resp,skin:skin,folder:folder,vkljuciHierarhijo:1});}
function kopirajPrevzetoAnketoAliIzKnjizniceZaHierarhijo(id){$.post('ajax.php?t=library&a=anketa_copy_new',{ank_id:id,hierarhija:1,novaHierarhjia:1}).success(function(response){srv_meta_anketa_id=response;toggleAdvancedModule('hierarhija',0);var url=window.location.origin+window.location.pathname;window.location=url+'?anketa='+srv_meta_anketa_id+'&a=hierarhija_superadmin&m=uredi-sifrante';});}
function stopActivationTimer(){clearInterval(activationTimer);$('#divAvtoClose').attr('active',0);$('#divAvtoClose').fadeOut('fast');}
function anketa_activate_save(anketa,folders){var doSave=($("#anketa_activate_settings").css("display")=="none")?false:true;if(doSave==true){var durationType=$("input[name=radioTrajanje]:checked").val();var durationStarts=$("#startsManual").val();var durationExpire=$("#expireManual").val();var voteCountLimitType=$("input[name=vote_count_limit]:checked").val();var voteCountValue=$("#vote_count_val").val();$.post('ajax.php?a=anketa_activate',{anketa:anketa,folders:folders},function(response){$.post('ajax.php?a=anketa_save_activation',{anketa:anketa,durationType:durationType,durationStarts:durationStarts,durationExpire:durationExpire,voteCountLimitType:voteCountLimitType,voteCountValue:voteCountValue},function(response){refresh_anketa_activation(anketa,folders);});});}else{$.post('ajax.php?a=anketa_activate',{anketa:anketa,folders:folders},function(response){refresh_anketa_activation(anketa,folders);});}}
function refresh_anketa_activation(anketa,folders){window.location.reload();return;}
function autoCloseActivationDiv(anketa,folders)
{timeout=$('#spanAvtoClose').html();timeout--;if($('#divAvtoClose').is(':visible'))
{if(timeout>0)
{$('#spanAvtoClose').html(timeout);closeTimeout=setTimeout(function(){autoCloseActivationDiv(anketa,folders);},1000);}
else
{anketa_setActive(anketa,folders);}}}
function anketa_setActive(anketa,folders)
{var manual=$("input[name=radioTrajanje]:checked").val();if(manual==0)
{var starts=$("#startsAuto").html();var expire=$("#expireAuto").html();}
else
{var starts=$("#startsManual").val();var expire=$("#expireManual").val();}
$('#surveyTrajanje').fadeOut('slow');$('#fade').fadeOut('slow');if(folders=='true')
{$("ul#surveyList").find("li#anketa_list_"+anketa).find(".sl_active").load('ajax.php?a=anketa_active&ajaxa='+gup("a"),{anketa:anketa,starts:starts,expire:expire,manual:manual,folders:folders});}
else
{$('#anketa_active').load('ajax.php?a=anketa_active&ajaxa='+gup("a"),{anketa:anketa,starts:starts,expire:expire,manual:manual,folders:folders},function(){if($("#anketa_aktivacija_note").length>0){$("#anketa_aktivacija_note").load('ajax.php?a=anketa_aktivacija_note',{anketa:anketa});}
if($("#btn_mailto_preview_holder").length>0){$("#btn_mailto_preview_holder").load('ajax.php?a=anketa_aktivacija_mailto_preview',{anketa:anketa});}
if($("#trajna_anketa").length>0){$("#anketa_edit").load('ajax.php?a=refresh_nastavitve_trajanje',{anketa:anketa});}});}}
function anketa_lock(anketa,locked,mobile_created){if(locked==0){var text=lang['srv_unlock_alert'];if(mobile_created==1)
text+='\n\n'+lang['srv_unlock_mobile'];if(confirm(text)){$.redirect('ajax.php?t=branching&a=anketa_lock',{anketa:anketa,locked:locked});}}else{$.redirect('ajax.php?t=branching&a=anketa_lock',{anketa:anketa,locked:locked});}}
function anketa_title_edit(anketa,status,naslov){if(status==null||status==undefined){status=1;}
if((naslov==null||naslov==undefined)&&$("#naslov_edit_box")&&$("#naslov_edit_box").val()!=='undefined'){naslov=$("#naslov_edit_box").val();}
if(naslov!=''){$('#anketa_polnoIme').val(naslov);}
$('#fullscreen').html('').fadeIn('slow').draggable({delay:100,cancel:'input, textarea, select, .buttonwrapper'});$('#fade').fadeTo('slow',1);$('#fullscreen').load('ajax.php?a=quick_title_edit&ajaxa='+gup("a"),{anketa:anketa,status:status,naslov:naslov},function(){$('#novaanketa_naslov_1').focus();});}
function quick_title_edit_save(quick_settings){var naslov=jQuery.trim($("#novaanketa_naslov_1").val());var akronim=jQuery.trim($("#novaanketa_akronim_1").val());var intro_opomba=jQuery.trim($("#novaanketa_opis_1").val());$.redirect('ajax.php?a=quick_title_edit_save&ajaxa='+gup("a"),{anketa:srv_meta_anketa_id,naslov:naslov,akronim:akronim,intro_opomba:intro_opomba,quick_settings:quick_settings});}
function quick_title_edit_cancel(){$('#fade').fadeOut('slow');$('#fullscreen').fadeOut('slow').html('');}
function anketa_delete(anketa,confirmtext){if(confirm(confirmtext)){$.redirect('ajax.php?a=anketa_delete',{anketa:anketa});}}
function anketa_tip(tip){$.post('ajax.php?a=anketa_tip',{anketa:srv_meta_anketa_id,tip:tip});}
function nova_grupa(){$.redirect('ajax.php?a=nova_grupa',{anketa:srv_meta_anketa_id,grupa:srv_meta_grupa});}
function edit_grupa(grupa,naslov){$.post('ajax.php?a=edit_grupa',{grupa:grupa,naslov:naslov});$("#fieldset_page_"+grupa).find("legend").find("#grupaName").html(naslov);$("#fieldset_page_"+grupa).find("legend").find("#naslov_"+grupa).val(naslov);$('#pb_line_page_preview_'+grupa).html(naslov);}
function save_edit_grupa(grupa,naslov){$("#fieldset_page_"+grupa+" legend").load('ajax.php?a=save_edit_grupa',{grupa:grupa,naslov:naslov,anketa:srv_meta_anketa_id});$("#grupa_"+grupa+" h3 a").html(""+naslov);}
function save_edit_uporabnost_link(grupa,link){$("#fieldset_page_"+grupa+" legend").load('ajax.php?a=save_edit_uporabnost_link',{grupa:grupa,link:link,anketa:srv_meta_anketa_id});}
function brisi_grupo(grupa,text){if(confirm(text)){$.redirect('ajax.php?a=brisi_grupo',{grupa:grupa,anketa:srv_meta_anketa_id,thisgrupa:srv_meta_grupa});}}
function insert_grupa_before(grupa){$.redirect('ajax.php?a=insert_grupa_before',{grupa:grupa,anketa:srv_meta_anketa_id});}
function grupa_recount(prevent_recount){if(prevent_recount){$.post('ajax.php?a=outputLanguageNote',{anketa:srv_meta_anketa_id,note:'srv_grupa_recount_alert_have_branching'},function(response){genericAlertPopup('alert_parameter_response',response);return false;});}else{$.redirect('ajax.php?a=grupa_recount',{anketa:srv_meta_anketa_id,grupa:srv_meta_grupa});}}
function nova_spremenljivka(grupa,spremenljivka){$('#vprasanja').load('ajax.php?a=nova_spremenljivka',{anketa:srv_meta_anketa_id,grupa:srv_meta_grupa,spremenljivka:spremenljivka},function(){$("#grupe").load('ajax.php?a=refresh_grupe',{anketa:srv_meta_anketa_id,grupa:srv_meta_grupa});$("#grupe").load('ajax.php?a=refresh_grupe',{anketa:srv_meta_anketa_id,grupa:grupa});refreshBottomIcons('gray');});}
function nova_spremenljivka_in_grupa(grupa,spremenljivka){if(srv_meta_full_screen_edit){$.post('ajax.php?a=nova_spremenljivka_in_grupa',{anketa:srv_meta_anketa_id,grupa:grupa,spremenljivka:spremenljivka,full_screen:srv_meta_full_screen_edit},function(nova_spremenljivka_id){var movable=(srv_meta_branching==0)?' movable':'';if(spremenljivka){$('<div id="spremenljivka_'+nova_spremenljivka_id+'" class="spremenljivka'+movable+'"></div>').insertBefore("#spremenljivka_"+spremenljivka);}else{$('<div id="spremenljivka_'+nova_spremenljivka_id+'" class="spremenljivka'+movable+'"></div>').insertBefore($("#fieldset_page_"+grupa).find("#nova_spremenljivka"));}
$("#grupe").load('ajax.php?a=refresh_grupe',{anketa:srv_meta_anketa_id,grupa:grupa});$('#spremenljivka_'+nova_spremenljivka_id).load('ajax.php?a=normalmode_spremenljivka',{spremenljivka:nova_spremenljivka_id,branching:srv_meta_branching,anketa:srv_meta_anketa_id});fullscreenmode_spremenljivka(nova_spremenljivka_id);});}else{if(spremenljivka){$.post('ajax.php?a=nova_spremenljivka_in_grupa',{anketa:srv_meta_anketa_id,grupa:grupa,spremenljivka:spremenljivka},function(nova_spremenljivka_response){$(nova_spremenljivka_response).insertBefore($("#spremenljivka_"+spremenljivka));$("#grupe").load('ajax.php?a=refresh_grupe',{anketa:srv_meta_anketa_id,grupa:grupa});});}else{$.post('ajax.php?a=nova_spremenljivka_in_grupa',{anketa:srv_meta_anketa_id,grupa:grupa,spremenljivka:spremenljivka},function(nova_spremenljivka_response){$(nova_spremenljivka_response).insertBefore($("#fieldset_page_"+grupa).find("#nova_spremenljivka"));$("#grupe").load('ajax.php?a=refresh_grupe',{anketa:srv_meta_anketa_id,grupa:grupa});});}}}
function brisi_spremenljivko(spremenljivka,text,confirmed){if(text==undefined)text=lang['srv_brisispremenljivkoconfirm'];if(confirmed==1||confirm(text)){if(confirmed==undefined)
confirmed=1;$.post('ajax.php?a=brisi_spremenljivko',{spremenljivka:spremenljivka,confirmed:confirmed,grupa:srv_meta_grupa,anketa:srv_meta_anketa_id,branching:srv_meta_branching},function(data){if(__vnosi==1){window.location.reload();}
else{$('#vprasanje_float_editing').hide();$('#calculation').hide();$('#quota').hide();$('#fade').hide();$('#dropped_alert').hide();if(data.error==0){$('#branching').html(data.output);refreshRight();$('#vprasanje_deleted_border, #vprasanje_deleted_toolbox').removeClass('displayNone');var vprasanje_deleted_count=parseInt($('#vprasanje_deleted_count').html())+1;$('#vprasanje_deleted_count').html(vprasanje_deleted_count);}
else if(data.error==1){$('#fade').fadeIn('slow');$('#dropped_alert').html(data.output).fadeIn('slow').css('width','600px');}
else if(data.error==2){$('#fade').fadeIn('slow');$('#dropped_alert').html(data.output).fadeIn('slow').css('width','600px');}}},'json');}}
function nova_vrednost(spremenljivka,other){editor_save(spremenljivka,2);$(getContainer(spremenljivka)).load('ajax.php?a=nova_vrednost',{spremenljivka:spremenljivka,other:other,anketa:srv_meta_anketa_id,branching:srv_meta_branching});}
function edit_vrednost(vrednost,naslov,naslov2,variable,refresh_spremenljivka){$.post('ajax.php?a=edit_vrednost',{vrednost:vrednost,naslov:naslov,naslov2:naslov2,variable:variable},function(){if(refresh_spremenljivka>0)
editmode_spremenljivka(refresh_spremenljivka);});}
function edit_vrednost_size(spremenljivka,vrednost,size){$("#spremenljivka_"+spremenljivka).load('ajax.php?a=edit_vrednost_size',{spremenljivka:spremenljivka,vrednost:vrednost,size:size,anketa:srv_meta_anketa_id,branching:srv_meta_branching});}
function edit_vsota(vrednost,spremenljivka){$.post('ajax.php?a=edit_vsota',{vrednost:vrednost,spremenljivka:spremenljivka});}
function edit_limit(min,vrednost,spremenljivka){$.post('ajax.php?a=edit_limit',{min:min,vrednost:vrednost,spremenljivka:spremenljivka});}
function edit_vsota_omejitve(spremenljivka,checkbox){var tip;if(checkbox.checked)
tip=1;else
tip=0;$('#vsota_'+spremenljivka).load('ajax.php?a=edit_vsota_omejitve',{tip:tip,spremenljivka:spremenljivka});}
function editor_vrednost(vrednost){$('#div_float_editing').html('');$('#div_float_editing').fadeIn("slow");$('#div_float_editing').load('ajax.php?a=editor_vrednost',{'vrednost':vrednost,anketa:srv_meta_anketa_id},function(){create_editor('naslovvrednost_'+vrednost);}).draggable({delay:100,ghosting:true,cancel:'input, textarea, select, .buttonwrapper'});}
function editor_vrednost_close(vrednost,spremenljivka){var content=CKEDITOR.get('naslovvrednost_'+vrednost).getContent();content=content.replace('<p>','');content=content.replace('</p>','');edit_vrednost(vrednost,content,$('#naslov2_'+vrednost).val(),$('#variable_'+vrednost).val(),spremenljivka);remove_editor('naslovvrednost_'+vrednost);$('#div_float_editing').fadeOut("slow");}
function editor_note(spremenljivka){$('#div_float_editing').html('');$('#div_float_editing').fadeIn("slow");$('#div_float_editing').load('ajax.php?a=editor_note',{anketa:srv_meta_anketa_id,spremenljivka:spremenljivka},function(){create_editor('naslovvnote_'+spremenljivka);}).draggable({delay:100,ghosting:true,cancel:'input, textarea, select, .buttonwrapper'});}
function editor_note_close(spremenljivka){var content=CKEDITOR.get('naslovvnote_'+spremenljivka).getContent();$.post('ajax.php?a=editor_note_save',{anketa:srv_meta_anketa_id,spremenljivka:spremenljivka,content:content},function(){$(getContainer(spremenljivka)).load('ajax.php?a=editmode_spremenljivka',{spremenljivka:spremenljivka,branching:srv_meta_branching,anketa:srv_meta_anketa_id,grupa:srv_meta_grupa});remove_editor('naslovvnote_'+spremenljivka);$('#div_float_editing').fadeOut("slow");});}
function brisi_vrednost(spremenljivka,vrednost){editor_save(spremenljivka,2);$(getContainer(spremenljivka)).load('ajax.php?a=brisi_vrednost',{vrednost:vrednost,anketa:srv_meta_anketa_id,branching:srv_meta_branching});}
function edit_gridvrednost(spremenljivka,grid,naslov){$.post('ajax.php?a=edit_gridvrednost',{spremenljivka:spremenljivka,grid:grid,naslov:naslov});}
function edit_grids(spremenljivka){editor_save(spremenljivka,2);$(getContainer(spremenljivka)).load('ajax.php?a=edit_grids',{spremenljivka:spremenljivka});}
function edit_gridID(spremenljivka,grid,grd_id){$.post('ajax.php?a=edit_gridID',{spremenljivka:spremenljivka,grid:grid,grd_id:grd_id});}
function edit_grid_number(spremenljivka,grids){editor_save(spremenljivka,2);$(getContainer(spremenljivka)).load('ajax.php?a=edit_grid_number',{spremenljivka:spremenljivka,grids:grids,anketa:srv_meta_anketa_id});}
function spremenljivka_random(spremenljivka){editor_save(spremenljivka,2);$(getContainer(spremenljivka)).load('ajax.php?a=spremenljivka_random',{spremenljivka:spremenljivka,anketa:srv_meta_anketa_id});}
function random_vrednost(vrednost){$('#random_vrednost_'+vrednost).load('ajax.php?a=random_vrednost',{vrednost:vrednost});}
function spremenljivka_stat(spremenljivka){$('#stat_'+spremenljivka).load('ajax.php?a=spremenljivka_stat',{spremenljivka:spremenljivka});}
function spremenljivka_orientacija(spremenljivka){$('#orientation_'+spremenljivka).load('ajax.php?a=spremenljivka_orientation',{spremenljivka:spremenljivka});}
function spremenljivka_checkoxhide(spremenljivka){$('#checkbox_hide_'+spremenljivka).load('ajax.php?a=spremenljivka_checkbox_hide',{spremenljivka:spremenljivka});}
function spremenljivka_reminder(spremenljivka){$('#reminder_'+spremenljivka).load('ajax.php?a=spremenljivka_reminder',{spremenljivka:spremenljivka});}
function spremenljivka_sistem(spremenljivka){$('#sistem_'+spremenljivka).load('ajax.php?a=spremenljivka_sistem',{spremenljivka:spremenljivka});}
function spremenljivka_visible(spremenljivka){$('#visible_'+spremenljivka).load('ajax.php?a=spremenljivka_visible',{spremenljivka:spremenljivka});}
function spremenljivka_textfield(spremenljivka){editor_save(spremenljivka,2);$(getContainer(spremenljivka)).load('ajax.php?a=spremenljivka_textfield',{spremenljivka:spremenljivka});}
function spremenljivka_timer(spremenljivka,timer){$('#timer_'+spremenljivka).load('ajax.php?a=spremenljivka_timer',{spremenljivka:spremenljivka,timer:timer});}
function edit_textfield(vrednost,label){$.post('ajax.php?a=edit_textfield',{vrednost:vrednost,label:label});}
function edit_spremenljivka(spremenljivka,naslov,normalmode){info=$('#info_'+spremenljivka).val();$.post('ajax.php?a=edit_spremenljivka',{spremenljivka:spremenljivka,naslov:naslov,info:info,anketa:srv_meta_anketa_id,branching:srv_meta_branching,normalmode:normalmode},function(response_data){if(normalmode==1||_fullscreen||_edit_fullscreen){_edit_fullscreen=false;_fullscreen=0;$('#fullscreen').hide();$('#fade').fadeOut('slow');$(getContainer(spremenljivka)).html(response_data);}
if(normalmode==2){editor_remove(spremenljivka);}
if(srv_meta_branching==1){$('#branching_'+spremenljivka).load('ajax.php?t=branching&a=refresh_spremenljivka_name',{spremenljivka:spremenljivka,branching:srv_meta_branching});}});return true;}
function edit_spremenljivka_label(spremenljivka,naslov){$.post('ajax.php?a=edit_spremenljivka_label',{spremenljivka:spremenljivka,naslov:naslov,branching:srv_meta_branching});}
function edit_spremenljivka_variable(spremenljivka){var variable=$("#variable_"+spremenljivka).val();variable=check_valid_variable(variable);$("#variable_"+spremenljivka).val(variable);$('#variable_error_'+spremenljivka).load('ajax.php?a=edit_spremenljivka_variable',{spremenljivka:spremenljivka,variable:variable,anketa:srv_meta_anketa_id,branching:srv_meta_branching});}
function edit_spremenljivka_tip(spremenljivka,tip,size,undecided){$("#tip_preview").hide();editor_save(spremenljivka,2);$(getContainer(spremenljivka)).load('ajax.php?a=edit_spremenljivka_tip',{spremenljivka:spremenljivka,tip:tip,size:size,undecided:undecided,anketa:srv_meta_anketa_id,branching:srv_meta_branching});}
function edit_spremenljivka_skala(spremenljivka){var skala=($("#spremenljivka_skala_"+spremenljivka).val())?$("#spremenljivka_skala_"+spremenljivka).val():0;$.post('ajax.php?a=edit_spremenljivka_skala',{spremenljivka:spremenljivka,anketa:srv_meta_anketa_id,branching:srv_meta_branching,skala:skala});}
function edit_spremenljivka_number(spremenljivka,cela,decimalna,enota){editor_save(spremenljivka,2);$(getContainer(spremenljivka)).load('ajax.php?a=edit_spremenljivka_number',{spremenljivka:spremenljivka,cela:cela,decimalna:decimalna,enota:enota,branching:srv_meta_branching,anketa:srv_meta_anketa_id});}
function edit_spremenljivka_textboxes(spremenljivka,size){$("#tip_preview").hide();editor_save(spremenljivka,2);$(getContainer(spremenljivka)).load('ajax.php?a=edit_spremenljivka_textboxes',{spremenljivka:spremenljivka,size:size,anketa:srv_meta_anketa_id,branching:srv_meta_branching});}
function edit_spremenljivka_text_orientation(spremenljivka,orientation){$("#tip_preview").hide();editor_save(spremenljivka,2);$(getContainer(spremenljivka)).load('ajax.php?a=edit_spremenljivka_text_orientation',{spremenljivka:spremenljivka,orientation:orientation,anketa:srv_meta_anketa_id,branching:srv_meta_branching});}
function edit_spremenljivka_vsota_reminder(spremenljivka,reminder){editor_save(spremenljivka,2);$.post('ajax.php?a=edit_spremenljivka_vsota_reminder',{spremenljivka:spremenljivka,reminder:reminder});}
function edit_spremenljivka_antonucci(spremenljivka,antonucci){$.post('ajax.php?a=edit_spremenljivka_antonucci',{spremenljivka:spremenljivka,antonucci:antonucci,branching:srv_meta_branching});}
function edit_spremenljivka_design(spremenljivka,design){editor_save(spremenljivka,2);$(getContainer(spremenljivka)).load('ajax.php?a=edit_spremenljivka_design',{spremenljivka:spremenljivka,design:design,branching:srv_meta_branching,anketa:srv_meta_anketa_id});}
function edit_spremenljivka_ranking_k(spremenljivka,size){$.post('ajax.php?a=edit_spremenljivka_ranking_k',{spremenljivka:spremenljivka,size:size,branching:srv_meta_branching});}
function check_length(id,text){var length=text.length;if(length>50)
document.getElementById('ranking_warning_'+id).style.display="inline";else
document.getElementById('ranking_warning_'+id).style.display="none";}
function edit_spremenljivka_podpora(spremenljivka,podpora){$.post('ajax.php?a=edit_spremenljivka_podpora',{spremenljivka:spremenljivka,podpora:podpora,branching:srv_meta_branching});}
function edit_spremenljivka_param(spremenljivka,paramName,paramValue){editor_save(spremenljivka,2);$(getContainer(spremenljivka)).load('ajax.php?a=edit_spremenljivka_param',{spremenljivka:spremenljivka,paramName:paramName,paramValue:paramValue,branching:srv_meta_branching,anketa:srv_meta_anketa_id});}
function editmode_grupa(grupa,pages){if(pages==1){$('#fieldset_page_'+grupa+" legend").load('ajax.php?a=editmode_grupa',{anketa:srv_meta_anketa_id,grupa:grupa,pages:pages});}else
$('#grupa_'+grupa).load('ajax.php?a=editmode_grupa',{anketa:srv_meta_anketa_id,grupa:grupa});}
function normalmode_grupa(grupa){$('#grupa_'+grupa).load('ajax.php?a=normalmode_grupa',{anketa:srv_meta_anketa_id,grupa:grupa});}
function editmode_spremenljivka(spremenljivka,fullscreen){$(".spr_editmode").each(function(){if(spremenljivka!=$(this).attr("id").substr(22))
normalmode_spremenljivka($(this).attr("id").substr(22))})
editor_remove(spremenljivka);if(_moved==1){_moved=0;return;}
if(fullscreen>=1){if(fullscreen==2)
{$(getContainer(spremenljivka)).find(".spremenljivka_tekst_form").remove();$(getContainer(spremenljivka)).find(".spremenljivka_tip_content").remove();$(getContainer(spremenljivka)).find(".save_button").remove();$(getContainer(spremenljivka)).find(".spr_settings").remove();}
_fullscreen=1;$('#fullscreen').html('').fadeIn('slow').draggable({delay:100,cancel:'input, textarea, select, .buttonwrapper'});$('#fade').fadeTo('slow',1);}
$(getContainer(spremenljivka)).load('ajax.php?a=editmode_spremenljivka',{spremenljivka:spremenljivka,branching:srv_meta_branching,anketa:srv_meta_anketa_id,grupa:srv_meta_grupa,fullscreen:fullscreen},function(){refreshBottomIcons('gray');});}
function fullscreenmode_spremenljivka(spremenljivka){if(_moved==1){_moved=0;return;}
_fullscreen=1;$('#fullscreen').html('').fadeIn('slow').draggable({delay:100,cancel:'input, textarea, select, .buttonwrapper'});$('#fade').fadeTo('slow',1);var edit_mode=$(".spremenljivka").find(".spr_editmode").length;if(edit_mode==1){$('#spremenljivka_'+spremenljivka).load('ajax.php?a=normalmode_spremenljivka',{spremenljivka:spremenljivka,branching:srv_meta_branching,anketa:srv_meta_anketa_id},function(){$("#fullscreen").load('ajax.php?a=editmode_spremenljivka',{spremenljivka:spremenljivka,branching:srv_meta_branching,anketa:srv_meta_anketa_id,grupa:srv_meta_grupa,fullscreen:_fullscreen},function(){refreshBottomIcons('gray');});});}else{$("#fullscreen").load('ajax.php?a=editmode_spremenljivka',{spremenljivka:spremenljivka,branching:srv_meta_branching,anketa:srv_meta_anketa_id,grupa:srv_meta_grupa,fullscreen:_fullscreen},function(){refreshBottomIcons('gray');});}}
function normalmode_spremenljivka(spremenljivka){refreshBottomIcons('orange');editor_save(spremenljivka,1);if(collapsed_content==1){editor_remove(spremenljivka);}}
function create_editor(id,focus){editor=CKEDITOR.replace(id);editor.addCommand("advanced_editor_show",{exec:function(edt){$('#'+edt.id+'_toolbox').addClass('advanced');}});editor.ui.addButton('More',{label:lang['more2'],command:'advanced_editor_show',name:"More",});editor.addCommand("advanced_editor_hide",{exec:function(edt){$('#'+edt.id+'_toolbox').removeClass('advanced');}});editor.ui.addButton('Less',{label:lang['less2'],command:'advanced_editor_hide',name:"Less",});if(gup('a')=='alert'&&focus==false){CKEDITOR.config.width=560;}else if(gup('a')=='jezik'){CKEDITOR.config.width=600;CKEDITOR.config.height=140;CKEDITOR.config.enterMode=CKEDITOR.ENTER_BR;}else{var def=$('#'+id).attr("default");if(def==1){CKEDITOR.instances[id].on('focus',function(){this.execCommand('selectAll');});}
editor_init=true;}}
function create_editor_hitro_nalaganje_slike(id){var vrednost=$('[name="vrednost"]').val();CKEDITOR.on('dialogDefinition',function(ev){var dialogName=ev.data.name;var dialogDefinition=ev.data.definition;if(dialogName=='image'&&typeof CKEDITOR.instances[id]!='undefined'){dialogDefinition.onHide=function(){setTimeout(function(){vrednost_insert_image_save(vrednost)},50);};var poljeBesedila=CKEDITOR.instances[id].getData();if(poljeBesedila.length>2){var src=$(poljeBesedila).attr('src');var urlField=dialogDefinition.getContents('info').get('txtUrl');urlField['default']=src;}
var widthField=dialogDefinition.getContents('info').get('txtWidth');widthField['default']='150';}});CKEDITOR.replace(id,{toolbar:'HotSpot'});CKEDITOR.config.removePlugins='elementspath';CKEDITOR.config.width=600;CKEDITOR.config.height=200;clear_editor_text(id,'<img ');CKEDITOR.instances[id].on('focus',function(){this.execCommand('selectAll');this.execCommand('image');});editor_init=true;}
function clear_editor_text(id,search){search=search||0;if(search===0)
return CKEDITOR.instances[id].setData('');var text=CKEDITOR.instances[id].getData();var re=new RegExp(search,"g");var matches=text.match(re);if(matches===null)
return CKEDITOR.instances[id].setData('');}
function create_editor_hotspot(id,focus){CKEDITOR.replace(id,{toolbar:'HotSpot'});CKEDITOR.config.removePlugins='elementspath';CKEDITOR.config.width=700;CKEDITOR.config.height=500;CKEDITOR.instances[id].on('focus',function(){this.execCommand('selectAll');});editor_init=true;}
function create_editor_notification(id){CKEDITOR.replace(id,{toolbar:'Notification'});CKEDITOR.config.removePlugins='elementspath';CKEDITOR.instances[id].on('focus',function(){this.execCommand('selectAll');});if(id=='notification')
CKEDITOR.config.resize_enabled=false;CKEDITOR.config.height=238;editor_init=true;}
function remove_editor(id){if(CKEDITOR.instances[id]){var u=CKEDITOR.instances[id];u.destroy();}
editor_init=false;}
function editor_display(spremenljivka){editor=CKEDITOR.replace('naslov_'+spremenljivka);editor.addCommand("advanced_editor_show",{exec:function(edt){$('#'+edt.id+'_toolbox').addClass('advanced');}});editor.ui.addButton('More',{label:lang['more2'],command:'advanced_editor_show',name:"More",});editor.addCommand("advanced_editor_hide",{exec:function(edt){$('#'+edt.id+'_toolbox').removeClass('advanced');}});editor.ui.addButton('Less',{label:lang['less2'],command:'advanced_editor_hide',name:"Less",});var def=$('#naslov_'+spremenljivka).attr("default");if(def==1){CKEDITOR.instances['naslov_'+spremenljivka].on('focus',function(){this.execCommand('selectAll');});}}
function editor_display_hotspot(vre_id){CKEDITOR.replace('hotspot_image_'+vre_id,{toolbar:'HotSpot',width:300,removePlugins:'elementspath'});var def=$('#hotspot_image_'+vre_id).attr("default");CKEDITOR.instances['hotspot_image_'+vre_id].on('focus',function(){this.execCommand('selectAll');});}
function editor_remove(spremenljivka){CKEDITOR.instances[id].destroy();editor_init=false;}
function alleditors_remove(){if(editor_init==true){CKEDITOR.instances.editor1.destroy();editor_init=false;}}
function editor_save(spremenljivka,normalmode){$("input").prev().focus();var editor=CKEDITOR.get('naslov_'+spremenljivka);try{content=editor.getContent();editor.isNotDirty=true;}catch(e){content=$('#naslov_'+spremenljivka).val();}
if(spremenljivka>0)
var r=edit_spremenljivka(spremenljivka,content,normalmode);else
var r=edit_introconcl(spremenljivka,content,$('#opomba_'+spremenljivka).val());return r;}
function get_full_editor(id){CKEDITOR.instances[id].destroy();CKEDITOR.replace(id,{toolbar:'Full'});}
function copy_spremenljivka(spremenljivka,cut){$('#clipboard').load('ajax.php?a=copy_spremenljivka',{spremenljivka:spremenljivka,cut:cut,anketa:srv_meta_anketa_id},function(){$('.hidden_plus').show();$('.nova_spr, .hidden_plus').effect('pulsate',{times:3},800);});}
function copy_remove(){$('.hidden_plus').hide();$.post('ajax.php?a=copy_remove',{anketa:srv_meta_anketa_id},function(data){$('#clipboard').append(data);});}
function delete_all(text){if(confirm(text)){$.redirect('ajax.php?a=delete_all',{anketa:srv_meta_anketa_id});}}
function telefon_settings_save(id,elm){$.post('ajax.php?t=telefon&a=settings_save',{id:id,variable:elm.name,value:elm.value},function(data){if(data){elm.value=data}});}
function filter_editing(){$('#div_float_editing').html('');$('#div_float_editing').fadeIn("slow");$('#div_float_editing').load('ajax.php?a=filter_editing',{anketa:srv_meta_anketa_id}).draggable({delay:100,ghosting:true,cancel:'input, textarea, select, .buttonwrapper'});}
function filter_remove(){$.redirect('ajax.php?a=filter_remove',{anketa:srv_meta_anketa_id});}
function filter_close(){$.redirect('ajax.php?a=filter_close',{anketa:srv_meta_anketa_id});}
function grupa_sortable(preventMove){$('#grupe').sortable({items:'div.sortable',axis:'y',opacity:'0.7',scroll:false,stop:function(){if(preventMove==true){$(this).sortable('cancel');$.post('ajax.php?a=outputLanguageNote',{anketa:srv_meta_anketa_id,note:'srv_grupa_move_alert_have_branching'},function(response){genericAlertPopup('alert_parameter_response',response);return false;});}else
$.post('ajax.php?a=vrstnired_grupa',{serialize:$('#grupe').sortable('serialize')});}});}
function grupa_droppable(classname){}
function spremenljivka_sortable(preventMove){$('#vprasanja').sortable({items:'div.spremenljivka',opacity:'0.7',scroll:false,handle:'.spremenljivka_settings',forcePlaceholderSize:'ture',revert:'true',dropOnEmpty:'true',stop:function(e,ui){_moved=1;if(preventMove==true){$(this).sortable('cancel');$.post('ajax.php?a=outputLanguageNote',{anketa:srv_meta_anketa_id,note:'srv_spremenljivka_move_alert_have_branching'},function(response){genericAlertPopup('alert_parameter_response',response);return false;});}else{var moved=ui.item.attr('id');var topage=$("#"+moved).parent().attr('id');$.post('ajax.php?a=vrstnired_vprasanje',{serialize:$('#vprasanja').sortable('serialize'),anketa:srv_meta_anketa_id,moved:moved,grupa:srv_meta_grupa,topage:topage});}}});}
function spremenljivka_sortable_forma(){$('#vprasanja').sortable({items:'div.spremenljivka',opacity:'0.7',scroll:false,stop:function(e,ui){_moved=1;$('#vprasanja').load('ajax.php?a=vrstnired_vprasanje_forma',{serialize:$('#vprasanja').sortable('serialize'),anketa:srv_meta_anketa_id});}});}
function vrednost_sortable(classname){$('div.'+classname).sortable({items:'div.sortable',opacity:'0.7',scroll:false,handler:'img.move',axis:'y',start:function(){$('#vprasanja').sortable('disable');},stop:function(){$.post('ajax.php?a=vrstnired_vrednost',{serialize:$('div.'+classname).sortable('serialize')});$('#vprasanja').sortable('enable');}});}
function vnos_redirect(url){window.location=url;}
function edit_data_vrednost_ch(spr_id,vre_id,usr_id,value){$.post('ajax.php?a=edit_data_vrednost_ch',{spr_id:spr_id,vre_id:vre_id,usr_id:usr_id,value:value,anketa:srv_meta_anketa_id});}
function edit_data_vrednost(spr_id,vre_id,usr_id){$.post('ajax.php?a=edit_data_vrednost',{spr_id:spr_id,vre_id:vre_id,usr_id:usr_id,anketa:srv_meta_anketa_id});}
function edit_data_grid(spr_id,vre_id,usr_id,grd_id){$.post('ajax.php?a=edit_data_grid',{spr_id:spr_id,vre_id:vre_id,usr_id:usr_id,grd_id:grd_id,anketa:srv_meta_anketa_id});}
function edit_data_text(spr_id,vre_id,usr_id,value,textfield){$.post('ajax.php?a=edit_data_text',{spr_id:spr_id,vre_id:vre_id,usr_id:usr_id,value:value,textfield:textfield,anketa:srv_meta_anketa_id});}
function edit_data_delete(usr_id,confirmtext){if(confirm(confirmtext)){$.post('ajax.php?a=edit_data_delete',{usr_id:usr_id,anketa:srv_meta_anketa_id});$("#usr_row_"+usr_id).hide();}}
function respondent_data_delete(usr_id,confirmtext){if(confirm(confirmtext)){$("#respondent_id_"+usr_id).hide();$.post('ajax.php?a=edit_data_delete',{usr_id:usr_id,anketa:srv_meta_anketa_id});}}
function highlight_spremenljivka(spr_id){$('th[spr_id='+spr_id+']').each(function(idx,elm){th=$(elm);var td_pos=th.parent().children().index(th);$('#dataTable tbody td:nth-child('+(td_pos+1)+')').addClass('cellBlue');});}
function highlight_user(usr_id){for(i in usr_id){$('td.data_uid:contains(\''+usr_id[i]+'\')').parent().find('td').not('.enkaIcon').not('.cellGreen').addClass('cellBlue');}}
function data_show_labels(){srv_meta_anketa_id=srv_meta_anketa_id||$("#srv_meta_anketa_id").val();var tableIconColspan=parseInt($("#tableIconColspan").val())||0;var tableHeadChildren=$('#dataTable tr:nth-child(2)').children();var sprList=[];tableHeadChildren.filter("th").each(function(ii,column){if(!isNaN($(column).attr('spr_id')))
if($.inArray($(column).attr('spr_id'),sprList)==-1)
sprList.push($(column).attr('spr_id'));});$.post('ajax.php?a=get_variable_labels',{anketa:srv_meta_anketa_id,spr:sprList},function(response){for(var i=0,len=response.length;i<len;i++){var columns=$('th[spr_id='+response[i].spr+']');columns.each(function(iii,column){var spr_id=$(column).attr('spr_id');var tableIndex=tableHeadChildren.index(column);tableIndex=tableIndex+(tableIconColspan>0?tableIconColspan:1);$('#dataTable tr').each(function(ii,tr){var element=$(tr).find(':nth-child('+(tableIndex)+')');if($(element).is('td')){var usr_id=$(tr).find('td.data_uid').html();var val=element.html();if($.trim(element.html())in response[i]['values']){element.append(' <span class="gray">('+response[i]['values'][$.trim(element.html())]+')</span>');}}});});}},'json');}
function survey_upload(){val=document.upload.fajl.value;if(val.length>0)document.upload.submit();}
function survey_remove_logo(profile){$.post('ajax.php?a=remove_logo',{profile:profile,anketa:srv_meta_anketa_id},function(){window.location.reload();});return false;}
function gup(name)
{name=name.replace(/[\[]/,"\\\[").replace(/[\]]/,"\\\]");var regexS="[\\?&]"+name+"=([^&#]*)";var regex=new RegExp(regexS);var results=regex.exec(window.location.href);if(results==null)
return"";else
return results[1];}
function expandAll(mode){$('div[id^=spremenljivka_content_]').each(function(index)
{var id=$(this).attr('id').split('spremenljivka_content_');var activeString=$(this).attr('class').toString();var active=(activeString!=='spremenljivka_content')
if(mode==1)
{if(!active)
{if(id[1]>=0)
editmode_spremenljivka(id[1]);else{editmode_introconcl(id[1])}}}
else
{if(active)
{if(id[1]>=0)
normalmode_spremenljivka(id[1]);else{if($(this).attr('class')=='spremenljivka_content active')
normalmode_introconcl(id[1])}}}});}
function toggleStatusAlertMore(element){if($('#alert_more').is(':checked'))
{$('#'+element).removeAttr('disabled');$('#'+element).removeClass("alert_textarea");}else{$('#'+element).addClass("alert_textarea");$('#'+element).attr('disabled',true);}}
function toggleStatusAlertOtherCheckbox(element){if($('#alert_'+element).is(':checked'))
{$('#alert_holder_'+element+'_emails').removeClass('displayNone');}else{$('#alert_holder_'+element+'_emails').addClass('displayNone');}}
function clear_analizaFilters(){$('input[id^=analiza_mv_checkbox_]').each(function(){if($(this).is(':checked'))
$(this).trigger('click');});}
function load_help(){var corners=['topLeft','topRight'];var opposites=['bottomRight','bottomLeft'];var width=$(document).width();$('a.help').each(function(){if($(this).attr('qtip')!='init'){var help_text=$(this).attr('title_txt');var position=$(this).offset();var left=width-position.left;var i=(left>=350)?0:1;$(this).qtip({content:{url:'ajax.php?t=help&a=display_help&what='+$(this).attr('id')+'&lang='+$(this).attr('lang'),title:{text:help_text,button:'&#x2715;'}},fixed:true,show:{when:'click',solo:true},hide:{when:'click'},style:{name:'light',border:{},width:300},position:{corner:{tooltip:corners[i],target:opposites[i]},adjust:{screen:true}}}).attr('qtip','init');}});var help_text="";$('a.edithelp').click(function(){if($(this).attr('qtip')!='init'){help_text=$(this).attr('title_txt');var position=$(this).offset();var left=width-position.left-250;var i=(left>=0)?0:1;var el_id=$(this).attr('id');var id=el_id.split('help_');var help_element_id=id[1];if($(this).data("qtip"))
$(this).qtip("destroy");$(this).qtip({content:{url:'ajax.php?t=help&a=display_edit_help&what='+el_id+'&lang='+$(this).attr('lang'),title:{text:help_text,button:'&#x2715;'}},fixed:true,show:{when:false,ready:true},hide:{when:'click'},style:{name:'light',border:{width:3,radius:8},width:300,tip:{corner:corners[i]}},position:{corner:{tooltip:corners[i],target:opposites[i]},adjust:{screen:true}}}).attr('qtip','init');}});}
function save_help(what,lang){var help=$('#edithelp_'+what).val();$.post('ajax.php?t=help&a=save_help&lang='+lang,{what:what,help:help},function(){$('#help_'+what).qtip("hide");try{$('#help_'+what).attr('qtip','').qtip('destroy');}catch(e){};});}
function save_help_mass(what,lang){var help=$('#edithelp_mass_'+what).val();$.post('ajax.php?t=help&a=save_help&lang='+lang,{what:what,help:help},function(){try{$('#help_'+what).attr('qtip','').qtip('destroy');}
catch(e){};});}
function saveGlobalSetting(what)
{var state=$("input[name="+what+"]:checked").val();$.post('ajax.php?a=save_global',{anketa:srv_meta_anketa_id,what:what,state:state});}
function saveReportSetting(uid,what)
{var state=$("input[name="+what+"]:checked").val();$.post('ajax.php?a=save_reportSetting',{anketa:srv_meta_anketa_id,uid:uid,what:what,state:state});}
function saveUserSetting(uid,what)
{var state=$("input[name="+what+"]:checked").val();$.post('ajax.php?a=save_userSetting',{uid:uid,what:what,state:state});}
function statisticChangeDate(what){statisticRefreshAllBoxes(what);}
function statisticRefreshAllBoxes(what){var isInterval=false;var stat_interval='';if(what=='interval'){isInterval=true;stat_interval=$("#stat_interval").val();}
var type=$("#type").val();var period=$("#period").val();var hideNullValues_dates=$("#hideNullValues_dates").is(':checked');var hideNullValues_status=$("#hideNullValues_status").is(':checked');var userStatusBase=$("#userStatusBase").val();var filter_email_status=$("#filter_email_status").val();var inviation_dropdown=false;if(what=='invitation'&&filter_email_status==1){inviation_dropdown=true;}
$("#dashboardEmailInvitationFilter").load('ajax.php?a=statisticReloadInvitationFilter',{anketa:srv_meta_anketa_id,filter_email_status:filter_email_status});$("#div_statistic_info").load('ajax.php?a=statisticInfoRefresh',{anketa:srv_meta_anketa_id,type:type,period:period,hideNullValues_dates:hideNullValues_dates,hideNullValues_status:hideNullValues_status,isInterval:isInterval,stat_interval:stat_interval,filter_email_status:filter_email_status});$("#div_statistic_answer_state").load('ajax.php?a=statisticAnswerStateRefresh',{anketa:srv_meta_anketa_id,type:type,period:period,hideNullValues_dates:hideNullValues_dates,hideNullValues_status:hideNullValues_status,isInterval:isInterval,stat_interval:stat_interval,userStatusBase:userStatusBase,filter_email_status:filter_email_status,inviation_dropdown:inviation_dropdown});$("#div_statistic_status").load('ajax.php?a=statisticStatusRefresh',{anketa:srv_meta_anketa_id,type:type,period:period,hideNullValues_dates:hideNullValues_dates,hideNullValues_status:hideNullValues_status,isInterval:isInterval,stat_interval:stat_interval,filter_email_status:filter_email_status});$("#div_statistic_pages_state").load('ajax.php?a=statisticPageStateRefresh',{anketa:srv_meta_anketa_id,type:type,period:period,hideNullValues_dates:hideNullValues_dates,hideNullValues_status:hideNullValues_status,isInterval:isInterval,stat_interval:stat_interval,filter_email_status:filter_email_status});$("#div_statistic_visit_data").load('ajax.php?a=statisticDateRefresh',{anketa:srv_meta_anketa_id,type:type,period:period,hideNullValues_dates:hideNullValues_dates,hideNullValues_status:hideNullValues_status,isInterval:isInterval,stat_interval:stat_interval,filter_email_status:filter_email_status});$("#div_statistic_referals").load('ajax.php?a=statisticReferalRefresh',{anketa:srv_meta_anketa_id,type:type,period:period,hideNullValues_dates:hideNullValues_dates,hideNullValues_status:hideNullValues_status,isInterval:isInterval,stat_interval:stat_interval,filter_email_status:filter_email_status});}
function statisticFilterDateRefresh(){var type=$("#type").val();var period=$("#period").val();var hideNullValues_dates=$("#hideNullValues_dates").is(':checked');var hideNullValues_status=$("#hideNullValues_status").is(':checked');var filter_email_status=$("#filter_email_status").val();var timelineDropDownType=$("#timelineDropDownType").is(':checked');$("#div_statistic_visit_data").load('ajax.php?a=statisticDateRefresh',{anketa:srv_meta_anketa_id,type:type,period:period,hideNullValues_dates:hideNullValues_dates,hideNullValues_status:hideNullValues_status,timelineDropDownType:timelineDropDownType,filter_email_status:filter_email_status});}
function statisticDropdownChange(){var type=$("#type").val();var period=$("#period").val();var hideNullValues_dates=$("#hideNullValues_dates").is(':checked');var hideNullValues_status=$("#hideNullValues_status").is(':checked');var timelineDropDownType=$("#timelineDropDownType").is(':checked');var filter_email_status=$("#filter_email_status").val();$("#span_timelineDropDownType").load('ajax.php?a=statisticTimelineDropdownRefresh',{anketa:srv_meta_anketa_id,type:type,period:period,hideNullValues_dates:hideNullValues_dates,hideNullValues_status:hideNullValues_status,timelineDropDownType:timelineDropDownType},function(){var type=$("#type").val();var period=$("#period").val();var hideNullValues_dates=$("#hideNullValues_dates").is(':checked');var hideNullValues_status=$("#hideNullValues_status").is(':checked');var timelineDropDownType=$("#timelineDropDownType").is(':checked');$("#div_statistic_visit_data").load('ajax.php?a=statisticDateRefresh',{anketa:srv_meta_anketa_id,type:type,period:period,hideNullValues_dates:hideNullValues_dates,hideNullValues_status:hideNullValues_status,timelineDropDownType:timelineDropDownType,filter_email_status:filter_email_status});});}
function statisticStatusRefresh(){var type=$("#type").val();var period=$("#period").val();var hideNullValues_dates=$("#hideNullValues_dates").is(':checked');var hideNullValues_status=$("#hideNullValues_status").is(':checked');var filter_email_status=$("#filter_email_status").val();$("#div_statistic_status").load('ajax.php?a=statisticStatusRefresh',{anketa:srv_meta_anketa_id,type:type,period:period,hideNullValues_dates:hideNullValues_dates,hideNullValues_status:hideNullValues_status,filter_email_status:filter_email_status});}
function changeUserStatusBase(){var type=$("#type").val();var period=$("#period").val();var hideNullValues_dates=$("#hideNullValues_dates").is(':checked');var hideNullValues_status=$("#hideNullValues_status").is(':checked');var userStatusBase=$("#userStatusBase").val();var filter_email_status=$("#filter_email_status").val();$("#div_statistic_answer_state").load('ajax.php?a=statisticAnswerStateRefresh',{anketa:srv_meta_anketa_id,type:type,period:period,hideNullValues_dates:hideNullValues_dates,hideNullValues_status:hideNullValues_status,userStatusBase:userStatusBase,filter_email_status:filter_email_status});}
function changePageUserStatusBase(){var type=$("#type").val();var period=$("#period").val();var hideNullValues_dates=$("#hideNullValues_dates").is(':checked');var hideNullValues_status=$("#hideNullValues_status").is(':checked');var pageUserStatusBase=$("#pageUserStatusBase").val();var filter_email_status=$("#filter_email_status").val();$("#div_statistic_pages_state").load('ajax.php?a=statisticPageStateRefresh',{anketa:srv_meta_anketa_id,type:type,period:period,hideNullValues_dates:hideNullValues_dates,hideNullValues_status:hideNullValues_status,pageUserStatusBase:pageUserStatusBase,filter_email_status:filter_email_status});}
function printStatusPDF(){var type='';var userStatusBase='';var period='';if($("#userStatusBase").length){userStatusBase='&userStatusBase='+$("#userStatusBase").val();}
if($("#type").length){type='&type='+$("#type").val();}
if($("#period").length){period='&period='+$("#period").val();}
$.post('ajax.php?a=makeEncodedIzvozUrlString',{anketa:srv_meta_anketa_id,string:"izvoz.php?a=status&anketa="+srv_meta_anketa_id+"&data="+userStatusBase+type+period},function(url){window.open(url,'_blank');});}
function printEditsAnalysisPDF(){var user='&user='+$("#edits_analysis_continu_user").val();var period='&period='+$("#edits_analysis_continu_period").val();var status='&status='+$("#edits_analysis_status").val();var time='&time='+$("#diagnostics_date_selected").val();var from='&from='+$("#from").val();var to='&to='+$("#to").val();$.post('ajax.php?a=makeEncodedIzvozUrlString',{anketa:srv_meta_anketa_id,string:"izvoz.php?a=editsAnalysis&anketa="+srv_meta_anketa_id+user+period+status+time+from+to},function(url){window.open(url,'_blank');});}
function editsAnalysisContinuousEditing(){var user=$("#edits_analysis_continu_user").val();var period=$("#edits_analysis_continu_period").val();var status=$("#edits_analysis_status").val();var time=$("#diagnostics_date_selected").val();var from=$("#from").val();var to=$("#to").val();$("#edits_analysis_continu_table").load('ajax.php?a=editsAnalysisContinuousEditing',{anketa:srv_meta_anketa_id,user:user,period:period,status:status,time:time,from:from,to:to});}
function saveSpremenljivkaSpecial_sysvar(spremenljivka,tip)
{var sysvar=jQuery.trim($("#special_sysvar_hid_"+spremenljivka).val());edit_spremenljivka_tip(spremenljivka,tip,1,sysvar)}
function togleSpecialOffer(id)
{$("#specialOptions_div_"+id).slideToggle(600);}
function add_multigrid_drugo(spremenljivka)
{}
function enableEmailInvitation(what){$.redirect('ajax.php?a=enableEmailInvitation',{anketa:srv_meta_anketa_id,what:what});}
function handleUserCodeSetting()
{var phone=$("input[name=phone]:checked").val();var email=$("input[name=email]:checked").val();$("#userCodeSettings1").load('ajax.php?a=handleUserCodeSetting',{anketa:srv_meta_anketa_id,phone:phone,email:email,all:'1'});}
function handleUserCodeSkipSetting()
{var usercode_skip=$("input[name=usercode_skip]:checked").val();$("#userCodeSettings").load('ajax.php?a=handleUserCodeSetting',{anketa:srv_meta_anketa_id,usercode_skip:usercode_skip});}
function handleUserCodeRequiredSetting()
{var usercode_required=$("input[name=usercode_required]:checked").val();$("#userCodeSettings").load('ajax.php?a=handleUserCodeSetting',{anketa:srv_meta_anketa_id,usercode_required:usercode_required});}
function anketa_active_email(status){var anketa=srv_meta_anketa_id;$.post('ajax.php?a=anketaActiveEmail',{anketa:anketa},function(){window.location='index.php?anketa='+anketa+'&a=resp'});}
function editRespondentVrednost(obj){var id=$(obj).attr('id');var spr_id=$(obj).attr('spr_id');var usr_id=$(obj).attr('usr_id');var val=$(obj).val();$.post('ajax.php?a=editRespondentVrednost',{anketa:srv_meta_anketa_id,spr_id:spr_id,usr_id:usr_id,val:val});}
function show_tip_preview_toolbox(tip,copy,advanced,podtip){if(tip>0){if(advanced==1){if($("#tip_preview_sub_"+tip).length>0){$("#tip_preview").css({"left":"520px"});$("#tip_preview").show();$("[name=tip_preview_sub]:visible","#tip_preview").hide();$("#tip_preview_sub_"+tip).show();}}else{if($("#tip_preview_sub_"+tip).length>0){$("#tip_preview").css({"left":"245px"});$("#tip_preview").show();$("[name=tip_preview_sub]:visible","#tip_preview").hide();if(podtip!==undefined)tip=tip+'_'+podtip;$("#tip_preview_sub_"+tip).show();}}}else{if(advanced==1)
var container='';else
var container='#toolbox_library';var pos=$("div[copy="+copy+"]",container).offset()||$("span.new_spr[copy="+copy+"]",container).offset()||$('#vprasanje_float_editing').offset();var width=$("div[copy="+copy+"]",container).width()||$("span.new_spr[copy="+copy+"]",container).width()||$('#vprasanje_float_editing').offset();var cnt=$('#toolbox_library').offset()||$('#vprasanje_float_editing').offset();if(advanced==1)
$("#tip_preview").css({"right":($(window).width()-cnt.left)+"px","left":"auto","top":(10+pos.top)+"px"});else
$("#tip_preview").css({"right":($(window).width()-cnt.left)+"px","left":"auto","top":(10+pos.top)+"px"});$("#tip_preview").show();$("[name=tip_preview_sub]:visible","#tip_preview").hide();$("#tip_preview_sub_0_"+copy).show();if($("#tip_preview_sub_0_"+copy).length==0){$.post('ajax.php?t=branching&a=preview_spremenljivka',{anketa:srv_meta_anketa_id,spremenljivka:copy},function(data){$('#tip_preview div.inside').append('<div id="tip_preview_sub_0_'+copy+'" class="tip_preview_sub" name="tip_preview_sub"><span>'+lang['srv_new_question']+'</span><div class="tip_sample">'+data+'</div></div>');$("[name=tip_preview_sub]:visible","#tip_preview").hide();$("#tip_preview_sub_0_"+copy).show();});}}}
function show_tip_preview(spr,value){if($('select#spremenljivka_tip_'+spr).attr('data-ajax')=='true'){show_tip_preview_toolbox(0,value);return;}}
function show_tip_preview_subtype(spr,design,tip){if(tip=='17'){if(design=='0')
val='17';else if(design=='1')
val='17_1';else
val='17_2';}
else if(tip=='9'){if(design=='0')
val='9';else if(design=='1')
val='9_1';else if(design=='2')
val='9_2';else if(design=='3')
val='9_3';}
else if(tip=='6'){if(design=='0')
val='6';else if(design=='1')
val='6_1';else if(design=='2')
val='6_2';else if(design=='3')
val='6_3';else if(design=='4')
val='6_4';else if(design=='5')
val='6_5';else if(design=='6')
val='6_6';else if(design=='8')
val='6_8';else if(design=='9')
val='6_9';else if(design=='10')
val='6_10';}
else if(tip=='1'){if(design=='0')
val='1_1';else if(design=='1')
val='1';else if(design=='2')
val='1_2';else if(design=='4')
val='3';else if(design=='5')
val='1_5';else if(design=='6')
val='1_6';else if(design=='8')
val='1_8';else if(design=='9')
val='1_9';else if(design=='10')
val='1_10';else if(design=='11')
val='1_11';}
else if(tip=='2'){if(design=='1')
val='2';else if(design=='0')
val='2_1';else if(design=='2')
val='2_2';else if(design=='6')
val='1_6';else if(design=='8')
val='2_8';else if(design=='10')
val='2_10';else
val='2';}
else if(tip=='21'){if(design=='1')
val='21_1';else if(design=='2')
val='21_2';else if(design=='3')
val='21_3';else if(design=='4')
val='21_4';else if(design=='5')
val='21_5';else if(design=='6')
val='21_6';else if(design=='7')
val='21_7';}
else if(tip=='23'){val=design;}
else if(tip=='5'){if(design=='2')
val='5_2';}
else if(tip=='26'){if(design=='2')
val='26_2';else if(design=='1')
val='26_1';}
else if(tip=='7'){val='7_2';}
if(spr>=0){var pos=$("#spremenljivka_podtip_"+spr).offset();var width=$("#spremenljivka_podtip_"+spr).width();var body=$('body').width();$("#tip_preview").css({"left":"auto","right":(body-pos.left+10)+"px","top":(pos.top)+"px"});$("#tip_preview").show();$("[name=tip_preview_sub]:visible").hide();$("#tip_preview_sub_"+val).show();var height=$("#tip_preview").height();$("#tip_preview").css({"top":(30+pos.top-height)+"px"});}
else{$("#tip_preview").css({"left":"520px"});$("#tip_preview").show();$("[name=tip_preview_sub]:visible").hide();$("#tip_preview_sub_"+val).show();}}
function hide_tip_preview(){$("#tip_preview").hide();}
function edit_email_invitations(id){$('#div_float_editing').html('');$('#div_float_editing').fadeIn("slow");if(id==0){var email_subject=$("#email_subject").val();var email_text=$("#email_text").val();$('#div_float_editing').load('ajax.php?a=edit_email_invitations',{anketa:srv_meta_anketa_id,id:id,email_subject:email_subject,email_text:email_text},function(){create_editor('template_text_'+id);}).draggable({delay:100,ghosting:true,cancel:'input, textarea, select, .buttonwrapper'});}
else{$('#div_float_editing').load('ajax.php?a=edit_email_invitations',{anketa:srv_meta_anketa_id,id:id},function(){CKEDITOR.replace('template_text_'+id);}).draggable({delay:100,ghosting:true,cancel:'input, textarea, select, .buttonwrapper'});}}
function email_invitations_close(what){var id=$("#template_id").val();var template_name=$("#template_name_"+id).val();var template_subject=$("#template_subject_"+id).val();var editor=CKEDITOR.get('template_text_'+id);try{template_text=editor.getContent();editor.isNotDirty=true;}catch(e){template_text=$('#template_text_'+id).val();}
if(what!='close'){$("#email_invitations_templates").load('ajax.php?a=edit_email_invitations_save',{anketa:srv_meta_anketa_id,what:what,id:id,template_name:template_name,template_subject:template_subject,template_text:template_text})}
try{remove_editor('template_text_'+id);}catch(e){}
$('#div_float_editing').fadeOut("slow");}
function change_email_invitations_template(id){$("#email_invitations_values").load('ajax.php?a=change_email_invitations_template',{anketa:srv_meta_anketa_id,id:id})}
function email_invitation_use_template(id){$("#email_subject").val($("#email_invitation_value_subject").val());CKEDITOR.get('email_text').setContent($("#email_invitation_value_text").html());}
function email_invitation_delete_template(id,confirmtext){if(confirm(confirmtext)){$("#email_invitations_templates").load('ajax.php?a=email_invitation_delete_template',{anketa:srv_meta_anketa_id,id:id})}}
function show_insert_email_respondents(id){$('#fullscreen').html('').fadeIn('slow').draggable({delay:100,cancel:'input, textarea, select, .buttonwrapper'});$('#fade').fadeTo('slow',1);$('#fullscreen').load('ajax.php?a=show_insert_email_respondents',{anketa:srv_meta_anketa_id,id:id}).draggable({delay:100,cancel:'input, textarea, select, .buttonwrapper'});}
function close_insert_email_respondents(){$('#fade').fadeOut('slow');$('#fullscreen').fadeOut('slow').html('');}
function show_edit_email_respondents(id){$('#fullscreen').html('').fadeIn('slow').draggable({delay:100,cancel:'input, textarea, select, .buttonwrapper'});$('#fade').fadeTo('slow',1);$('#fullscreen').load('ajax.php?a=show_edit_email_respondents',{anketa:srv_meta_anketa_id,id:id}).draggable({delay:100,cancel:'input, textarea, select, .buttonwrapper'});}
function close_edit_email_respondents(what){var list_id=$("#list_id").val();var list_variables=$("#list_variables_"+list_id).val();var list_name=$("#list_name_"+list_id).val();var list_text=$("#list_text_"+list_id).val();if(what!='close'){$("#userInsertRight").load('ajax.php?a=edit_respondents_list_save',{anketa:srv_meta_anketa_id,what:what,list_id:list_id,list_variables:list_variables,list_name:list_name,list_text:list_text})}
$('#fade').fadeOut('slow');$('#fullscreen').fadeOut('slow').html('');}
function respondents_list_add(id){show_insert_email_respondents(id);}
function delete_respondents_list(id,confirmtext){if(confirm(confirmtext)){$("#userInsertRight").load('ajax.php?a=delete_respondent_list',{anketa:srv_meta_anketa_id,id:id})}}
function change_mailto_radio(){var mailto_radio=$('[name="mailto"]:checked').val();var prefix="";var checkboxes="";$('[name="mailto_status[]"]:checked').each(function(el){checkboxes=checkboxes+prefix+$(this).val();prefix=",";});$("#mailto_right").load('ajax.php?a=change_mailto_radio',{anketa:srv_meta_anketa_id,mailto_radio:mailto_radio,mailto_status:checkboxes})}
function change_mailto_status(){$("#radio_mailto_status").attr("checked","checked");change_mailto_radio();}
function preview_mailto_email(){var mailto_radio=$("[name=mailto]:checked").val();var prefix="";var checkboxes="";$('[name="mailto_status[]"]:checked').each(function(el){checkboxes=checkboxes+prefix+$(this).val();prefix=",";});$('#fullscreen').html('').fadeIn('slow').draggable({delay:100,cancel:'input, textarea, select, .buttonwrapper'});$('#fade').fadeTo('slow',1);$('#fullscreen').load('ajax.php?a=preview_mailto_email',{anketa:srv_meta_anketa_id,mailto_radio:mailto_radio,mailto_status:checkboxes}).draggable({delay:100,cancel:'input, textarea, select, .buttonwrapper'});}
function preview_mailto_email_cancle(){$('#fullscreen').hide();$('#fade').fadeOut('slow');}
function preview_mailto_email_submit(){$('#frm_mailto_preview').submit();$('#fullscreen').hide();$('#fade').fadeOut('slow');}
function show_surveyListSettings(){var sortby=$('input#sortby').val();var sorttype=$('input#sorttype').val();$('#fullscreen').html('').fadeIn('slow');$('#fade').fadeTo('slow',1);$('#fullscreen').load('ajax.php?a=show_surveyListSettings',{sortby:sortby,sorttype:sorttype}).draggable({handle:'#survey_list_inner',cancel:'input, #sortable, .buttonwrapper, #rows_per_page'});}
function show_surveyListQickInfo(){$('#fade').fadeTo('slow',1);$('#survey_ListQickInfo').load('ajax.php?a=show_surveyListQickInfo').show();}
function show_surveyFind(){if($("#sl_find").is(":visible")){$("#sl_find").hide();$("#sl_find_survey").val('');}else{$("#sl_find").show();}}
function sl_filter(){if($("#sl_find").is(":visible")){var sl_filter=$("#sl_find_survey").val();$('#survey_list').load('ajax.php?a=surveyListFilter',{sl_filter:sl_filter});}}
function cancle_surveyListSettings(){$('#fullscreen').hide();$('#fade').fadeOut('slow');}
function default_surveyListSettings(){$('#fullscreen').html('').fadeIn('slow');$('#fullscreen').load('ajax.php?a=default_surveyListSettings').draggable({handle:'#survey_list_inner',cancel:'input, #sortable, .buttonwrapper'});}
function save_surveyListSettings(){var data="";var prefix="";var vrstniRed="";var vrstniRedPrefix="";$("input[name=sl_fields]").each(function(){if($(this).is(':checked')){data=data+prefix+$(this).attr('value');prefix=",";}
vrstniRed=vrstniRed+vrstniRedPrefix+$(this).attr('value');vrstniRedPrefix=",";});var sortby=$('input#sortby').val();var sorttype=$('input#sorttype').val();var rows_per_page=$('input#rows_per_page').val();$('#survey_list').load('ajax.php?a=save_surveyListSettings',{data:data,vrstniRed:vrstniRed,sortby:sortby,sorttype:sorttype,rows_per_page:rows_per_page});$('#fullscreen').hide();$('#fade').fadeOut('slow');}
function save_surveyListCssSettings(event,ui){var data=ui.helper.attr('baseCss')+","+ui.size['width'];var sortby=$('input#sortby').val();var sorttype=$('input#sorttype').val();$('#survey_list').load('ajax.php?a=save_surveyListCssSettings',{data:data,sortby:sortby,sorttype:sorttype});}
function surveyList_goTo(sortbyid,sorttype){var onlyPhone=($("#onlyPhone").val()==1)?true:false;var searchParams='';if($("#searchParams").val()!=''){searchParams='&'+$("#searchParams").val();}
$('#survey_list').load('ajax.php?a=surveyList_goTo'+searchParams,{sortby:sortbyid,sorttype:sorttype,onlyPhone:onlyPhone});}
function surveyList_user(what,el){if(what=='i'){var uid=$(el).attr('iuid');}else if(what=='e'){var uid=$(el).attr('euid');}else if(what=='uid'){what='i';uid=el;}else{var uid=0;}
$('#survey_list').load('ajax.php?a=surveyList_user',{list_user_type:what,uid:uid});}
function surveyList_user_reload(what,el){if(what=='i'){var uid=$(el).attr('iuid');}else if(what=='e'){var uid=$(el).attr('euid');}else if(what=='uid'){what='i';uid=el;}else{var uid=0;}
$.post('ajax.php?a=surveyList_user',{list_user_type:what,uid:uid},function(){location.reload();});}
function surveyList_language(lang_id){$('#survey_list').load('ajax.php?a=surveyList_language',{lang_id:lang_id});}
function surveyList_language_reload(lang_id){$.post('ajax.php?a=surveyList_language',{lang_id:lang_id},function(){location.reload();});}
function surveyList_gdpr(gdpr){$('#survey_list').load('ajax.php?a=surveyList_gdpr',{gdpr:gdpr});}
function surveyList_gdpr_reload(gdpr){$.post('ajax.php?a=surveyList_gdpr',{gdpr:gdpr},function(){location.reload();});}
function surveyList_library(){var currentLibrary=$("#library_filter :selected").val();$('#survey_list').load('ajax.php?a=surveyList_library',{currentLibrary:currentLibrary});}
function surveyList_info(anketa){if($('#survey_list_info').is(":visible")){if($('.info.icon-orange').attr('anketa')!=anketa){$('.info').removeClass('icon-orange');var position=$('#info_icon_'+anketa).position();$('#survey_list_info').load('ajax.php?t=surveyList&a=surveyList_display_info',{anketa:anketa},function(){$('#info_icon_'+anketa).toggleClass('icon-orange');$('#survey_list_info').css('top',position.top+34);$("#survey_list_info").show();});}
else{$("#survey_list_info").hide();$('.info').removeClass('icon-orange');}}
else{var position=$('#info_icon_'+anketa).position();$('#survey_list_info').load('ajax.php?t=surveyList&a=surveyList_display_info',{anketa:anketa},function(){$('#info_icon_'+anketa).toggleClass('icon-orange');$('#survey_list_info').css('top',position.top+34);$("#survey_list_info").show();});}}
function survey_chaneg_type(new_type,change_type_submit){$('#fullscreen').html('').fadeIn('slow').draggable({delay:100,cancel:'input, textarea, select, .buttonwrapper'});$('#fade').fadeTo('slow',1);$('#fullscreen').load('ajax.php?a=survey_chaneg_type',{anketa:srv_meta_anketa_id,new_type:new_type,change_type_submit:change_type_submit}).draggable({delay:100,cancel:'input, textarea, select, .buttonwrapper'});}
function survey_chaneg_type_cancle(){$('#fullscreen').hide();$('#fade').fadeOut('slow');}
function preview_spremenljivka(spremenljivka,lang_id){$('#fullscreen').html('').fadeIn('slow');$('#fade').fadeTo('slow',1);$('#fullscreen').load('ajax.php?a=preview_spremenljivka',{anketa:srv_meta_anketa_id,spremenljivka:spremenljivka,lang_id:lang_id,podstran:srv_meta_podstran});}
function preview_spremenljivka_analiza(spremenljivka,lang_id){$('#fullscreen').html('').fadeIn('slow');$('#fade').fadeTo('slow',1);$('#fullscreen').load('ajax.php?t=analysis&a=preview_spremenljivka',{anketa:srv_meta_anketa_id,spremenljivka:spremenljivka,lang_id:lang_id,podstran:srv_meta_podstran});}
function preview_spremenljivka_cancel(){$('#fullscreen').hide();if($('#vprasanje').css('display')!='block'){$('#fade').fadeOut('slow');}}
function preview_page(){$('#fullscreen').html('').fadeIn('slow').draggable({delay:100,cancel:'input, textarea, select, .buttonwrapper'});$('#fade').fadeTo('slow',1);$('#fullscreen').load('ajax.php?a=preview_page',{anketa:srv_meta_anketa_id,grupa:srv_meta_grupa}).draggable({delay:100,cancel:'input, textarea, select, .buttonwrapper'});}
function preview_page_cancle(){$('#fullscreen').hide();$('#fade').fadeOut('slow');}
function IE7_select_disabled_fix(){if(jQuery.browser.msie&&parseInt(jQuery.browser.version)<8){$('option[disabled]').css({'color':'#cccccc'});$('select').change(function(){if(this.options[this.selectedIndex].disabled){if(this.options.length==0){this.selectedIndex=-1;}else{this.selectedIndex--;}
$(this).trigger('change');}});$('select').each(function(it){if(this.options[this.selectedIndex].disabled){this.onchange();}});}};function change_alert_respondent(what,el){var id=el.attr("id");var checked=$("#alert_"+what).is(':checked');$("#label_alert_"+what).load('ajax.php?a=change_alert_respondent',{anketa:srv_meta_anketa_id,checked:checked,what:what});}
function change_alert_instruction(el){var checked=el.is(':checked');if(checked){$("#alert_respondent_cms_instruction").show();}else{$("#alert_respondent_cms_instruction").hide();}}
function alert_add_necessary_sysvar(what,el){var id=el.attr("id");var checked=$("#alert_"+what).is(':checked');$("div#label_alert_"+what).load('ajax.php?a=alert_add_necessary_sysvar',{anketa:srv_meta_anketa_id,checked:checked,what:what});}
function alert_change_user_from_cms(what,el){$("div#label_alert_"+what).load('ajax.php?a=alert_change_user_from_cms',{anketa:srv_meta_anketa_id});}
function alert_edit_if(type,uid){$('#fade').fadeTo('slow',1);$('#div_condition_editing').load('ajax.php?a=alert_edit_if',{anketa:srv_meta_anketa_id,uid:uid,type:type}).show();}
function alert_if_remove(_if){if(confirm(lang['srv_brisiifconfirm'])){$.post('ajax.php?t=branching&a=if_remove',{'if':_if,anketa:srv_meta_anketa_id},function(){window.location.reload();});$('#div_condition_editing').hide();}}
function alert_if_close(_if){$('#div_condition_editing').hide();window.location.reload();}
function edit_glasovanje(spremenljivka,results,what){if(what=='finish_author'||what=='finish_respondent_cms'||what=='finish_other'||what=='show_results'||what=='show_percent'||what=='show_graph'){if(results.checked==true)
results=1;else
results=0;}
if($("#glas_extra_settings").is(":visible")==true)
var displayExtra=1;else
var displayExtra=0;$("#glas_settings").load('ajax.php?a=glasovanje_settings&t=glasovanje',{anketa:srv_meta_anketa_id,spremenljivka:spremenljivka,results:results,what:what,displayExtra:displayExtra},function(){if(what=='show_intro'||what=='show_concl'||what=='stat'||what=='embed')
$("#branching").load('ajax.php?a=glasovanje_vprasanja&t=glasovanje',{anketa:srv_meta_anketa_id,spremenljivka:spremenljivka,what:what});});}
function glas_extra_settings(){$('.more').toggle();$('.less').toggle();$('#glas_extra_settings').slideToggle();}
function edit_form_settings(spremenljivka,results,what){if(what=='finish_author'||what=='finish_respondent_cms'||what=='finish_other'){if(results.checked==true)
results=1;else
results=0;}
$("#simple").load('ajax.php?a=form_settings',{anketa:srv_meta_anketa_id,spremenljivka:spremenljivka,results:results,what:what});if(what=='show_intro'||what=='show_concl')
$("#vprasanja").load('ajax.php?a=glasovanje_vprasanja',{anketa:srv_meta_anketa_id,spremenljivka:spremenljivka,what:what});}
function newAnketaBlank(type){var survey_type=type||$("input[name=newAnketaBlank]:checked").val();var naslov=jQuery.trim($("#novaanketa_naslov").val());if($("#novaanketa_naslov_1").length>0){naslov=jQuery.trim($("#novaanketa_naslov_1").val());}
var akronim=naslov;if($("#novaanketa_akronim_1").length>0){var akronim=jQuery.trim($("#novaanketa_akronim_1").val());}
var folder='-1';if($("#novaanketa_folder").length){folder=$("#novaanketa_folder").val();}
var intro_opomba=jQuery.trim($("#novaanketa_opis").val());if($("#lang_resp").length>0&&$("#lang_resp").val()>0){var lang_resp=jQuery.trim($("#lang_resp").val());}else{var lang_resp=1;}
var skin=jQuery.trim($("#noSurvey_skin_id").val());if(skin=='')
skin='1kaBlue';$.redirect('ajax.php?a=anketa',{naslov:naslov,intro_opomba:intro_opomba,akronim:akronim,survey_type:survey_type,lang_resp:lang_resp,skin:skin,folder:folder});}
function newAnketaCancle(){$('#fade').fadeOut('slow');$('#fullscreen').html('').fadeOut('slow');}
function change_noSurvey_skin(skin){$('.selected').removeClass('selected');$("#skin_"+skin).addClass('selected');$('input[name=skin]').val(skin);}
function scroll_noSurvey_skin(direction){var leftPos=$('#skins_holder').scrollLeft();if(direction=='left'){$("#skins_holder").animate({scrollLeft:leftPos-800},1000,'easeOutQuart');}
else{$("#skins_holder").animate({scrollLeft:leftPos+800},1000,'easeOutQuart');}}
function newAnketaCopy(){var ank_id=$("#my_surveys").val();$.redirect('ajax.php?t=library&a=anketa_copy_new',{ank_id:ank_id});}
function newAnketaTemplate_change(id){$('.selected').removeClass('selected');$("#template_"+id).addClass('selected');var title=$("#template_title_"+id).val();$('input[name=novaanketa_naslov_1]').val(title);$('input[name=novaanketa_akronim_1]').val(title);$('input[name=noSurvey_template_id]').val(id);}
function newAnketaTemplate(){var ank_id=$("#noSurvey_template_id").val();var naslov=jQuery.trim($("#novaanketa_naslov_1").val());var akronim=jQuery.trim($("#novaanketa_akronim_1").val());var folder='-1';if($("#novaanketa_folder").length){folder=$("#novaanketa_folder").val();}
if(ank_id==''||ank_id<1){genericAlertPopup('srv_newSurvey_survey_template_error');}
else{$.redirect('ajax.php?t=library&a=anketa_copy_new',{ank_id:ank_id,naslov:naslov,akronim:akronim,folder:folder});}}
function checkFileExtension1ka(){var fileName=document.getElementById("restore").value;var fileExtension=fileName.split(".").pop().toLowerCase();if(fileName){document.getElementById("file-input-label-populated").textContent=fileName.split("\\").pop();document.getElementById("info_text_populated").style.display="block";document.getElementById("info_text_empty").style.display="none";document.getElementById("file-input-label-clear").style.display="inline-block";document.getElementById("file-input-label-empty").style.display="none";document.getElementById("file-input-label-populated").style.display="inline-block";if(fileExtension==="1ka"){document.getElementById("1ka_file_approved_text").style.display="block";document.getElementById("1ka_file_not_approved_text").style.display="none";document.getElementById("noSurvey_create").disabled=false;}else{document.getElementById("1ka_file_approved_text").style.display="none";document.getElementById("1ka_file_not_approved_text").style.display="block";document.getElementById("noSurvey_create").disabled=true;}}
else{document.getElementById("info_text_populated").style.display="none";document.getElementById("info_text_empty").style.display="block";document.getElementById("file-input-label-clear").style.display="none";document.getElementById("file-input-label-empty").style.display="block";document.getElementById("file-input-label-populated").style.display="none";document.getElementById("1ka_file_approved_text").style.display="none";document.getElementById("1ka_file_not_approved_text").style.display="none";document.getElementById("noSurvey_create").disabled=true;}}
function clearFileInput(){document.getElementById("restore").value="";checkFileExtension1ka();}
function anketaFromText_preview(text){var text=$("textarea#anketa_from_text_textarea").val().trim();$("#preview_field").load('ajax.php?t=newSurvey&a=from_text_preview',{text:text});}
function newAnketaFromText(){var survey_type='2';var skin='1kaBlue';var naslov=jQuery.trim($("#novaanketa_naslov").val());if($("#novaanketa_naslov_1").length>0){naslov=jQuery.trim($("#novaanketa_naslov_1").val());}
var akronim=naslov;if($("#novaanketa_akronim_1").length>0){var akronim=jQuery.trim($("#novaanketa_akronim_1").val());}
if($("#lang_resp").length>0&&$("#lang_resp").val()>0){var lang_resp=jQuery.trim($("#lang_resp").val());}else{var lang_resp=1;}
var from_text=$("textarea#anketa_from_text_textarea").val().trim();$.redirect('ajax.php?a=anketa_from_text',{naslov:naslov,akronim:akronim,survey_type:survey_type,lang_resp:lang_resp,skin:skin,from_text:from_text});}
function newQuizFromExcel(){var survey_type='2';var skin='1kaBlue';var naslov=jQuery.trim($("#novaanketa_naslov").val());if($("#novaanketa_naslov_1").length>0){naslov=jQuery.trim($("#novaanketa_naslov_1").val());}
var akronim=naslov;if($("#novaanketa_akronim_1").length>0){var akronim=jQuery.trim($("#novaanketa_akronim_1").val());}
if($("#lang_resp").length>0&&$("#lang_resp").val()>0){var lang_resp=jQuery.trim($("#lang_resp").val());}else{var lang_resp=1;}
var formData=new FormData();formData.append('naslov',naslov);formData.append('akronim',akronim);formData.append('survey_type',survey_type);formData.append('lang_resp',lang_resp);formData.append('skin',skin);var file=$("input#quiz_from_excel").prop('files')[0];formData.append('file',file);$.ajax({url:'ajax.php?t=quiz&a=quiz_from_excel',type:'POST',data:formData,processData:false,contentType:false,success:function(response){window.location.href=response;}});}
function popupImportAnketaFromText(){$('#fade').fadeTo('slow',1);$("#popup_import_from_text").load('ajax.php?a=show_import_from_text');$("#popup_import_from_text").show();}
function popupImportAnketaFromText_close(){$("#popup_import_from_text").hide();$('#fade').fadeOut('slow');}
function importAnketaFromText(){var from_text=$("textarea#anketa_from_text_textarea").val().trim();$.redirect('ajax.php?a=import_from_text',{anketa:srv_meta_anketa_id,from_text:from_text},function(){popupImportAnketaFromText_close();});}
function respondent_run(pid){init_progressBar(true);var variables=$("#respondent_profile_values").find("#respondent_profile_variables").val();var data=$("#respondent_profile_values").find("#respondent_profile_value_text").val();var profile_from=$("#profile_from").val();$.redirect('ajax.php?a=survey_respondents&b=run_respondent_profile',{anketa:srv_meta_anketa_id,pid:pid,variables:variables,data:data,profile_from:profile_from});}
function respondent_save(pid){var variables=$("#respondent_profile_values").find("#respondent_profile_variables").val();var data=$("#respondent_profile_values").find("#respondent_profile_value_text").val();$("#survey_respondents").load('ajax.php?a=survey_respondents&b=save_respondent_profile',{anketa:srv_meta_anketa_id,pid:pid,variables:variables,data:data});}
function respondent_save_new(pid){$('#fade').fadeTo('slow',1);$("#respondent_new_dialog").find("#newProfileId").val(pid);$("#respondent_new_dialog").show();}
function change_respondent_profile(pid){var profile_from=$("#profile_from").val();$("#survey_respondents").load('ajax.php?a=survey_respondents&b=change_respondent_profile',{anketa:srv_meta_anketa_id,pid:pid,profile_from:profile_from})}
function respondent_saveNewProfile(){var pid=$("#respondent_new_dialog").find("#newProfileId").val();var name=$("#respondent_new_dialog").find("#newProfileName").val();var variables=$("#respondent_profile_values").find("#respondent_profile_variables").val();var data=$("#respondent_profile_values").find("#respondent_profile_value_text").val();$("#survey_respondents").load('ajax.php?a=survey_respondents&b=save_new_respondent_profile',{anketa:srv_meta_anketa_id,name:name,pid:pid,variables:variables,data:data},function(){$("#respondent_new_dialog").hide();$('#fade').fadeOut('slow');});}
function respondent_renameProfile(){var pid=$("#respondent_rename_dialog").find("#renameProfileId").val();var name=$("#respondent_rename_dialog").find("#renameProfileName").val();$("#survey_respondents").load('ajax.php?a=survey_respondents&b=rename_respondent_profile',{anketa:srv_meta_anketa_id,name:name,pid:pid},function(){$("#respondent_rename_dialog").hide();$('#fade').fadeOut('slow');});}
function respondent_deleteProfile(){var pid=$("#respondent_delete_dialog").find("#deleteProfileId").val();$("#survey_respondents").load('ajax.php?a=survey_respondents&b=delete_respondent_profile',{anketa:srv_meta_anketa_id,pid:pid},function(){$("#respondent_delete_dialog").hide();$('#fade').fadeOut('slow');});}
function showRenameRespondentProfile(){var pid=$("#respondent_profiles").find(".option.active").attr('value');$('#fade').fadeTo('slow',1);$("#respondent_rename_dialog").find("#renameProfileId").val(pid);$("#respondent_rename_dialog").show();}
function showDeleteRespondentProfile(){var pid=$("#respondent_profiles").find(".option.active").attr('value');$('#fade').fadeTo('slow',1);$("#respondent_delete_dialog").find("#deleteProfileId").val(pid);$("#respondent_delete_dialog").show();}
function respondent_change_variable(el){var pid=$("#respondent_profiles").find(".option.active").attr('value');var checked="";var prefix="";var manual=$("input[name=resp_check]:checked").each(function(){checked=checked+prefix+$(this).val();prefix=",";});$("#respondent_profile_variables").val(checked);}
function invitation_run(pid){var title=$("#invitation_profile_values").find("#invitation_profile_title").val();var replyto=$("#invitation_profile_values").find("#invitation_profile_replyto").val();var content=CKEDITOR.get('invitation_profile_content').getContent();remove_editor("invitation_profile_content");$.redirect('ajax.php?a=survey_invitation&b=run_invitation_profile',{anketa:srv_meta_anketa_id,pid:pid,title:title,content:content,replyto:replyto});}
function invitation_save(pid){var title=$("#invitation_profile_values").find("#invitation_profile_title").val();var replyto=$("#invitation_profile_values").find("#invitation_profile_replyto").val();var content=CKEDITOR.get('invitation_profile_content').getContent();remove_editor("invitation_profile_content");$("#survey_invitation").load('ajax.php?a=survey_invitation&b=save_invitation_profile',{anketa:srv_meta_anketa_id,pid:pid,title:title,content:content,replyto:replyto},function(){create_editor("invitation_profile_content");});}
function invitation_save_new(pid){$('#fade').fadeTo('slow',1);$("#invitation_new_dialog").find("#newProfileId").val(pid);$("#invitation_new_dialog").show();}
function change_invitation_profile(pid){remove_editor("invitation_profile_content");$("#survey_invitation").load('ajax.php?a=survey_invitation&b=change_invitation_profile',{anketa:srv_meta_anketa_id,pid:pid},function(){create_editor("invitation_profile_content");});}
function invitation_saveNewProfile(){var pid=$("#invitation_new_dialog").find("#newProfileId").val();var name=$("#invitation_new_dialog").find("#newProfileName").val();var title=$("#invitation_profile_values").find("#invitation_profile_title").val();var replyto=$("#invitation_profile_values").find("#invitation_profile_replyto").val();var content=CKEDITOR.get('invitation_profile_content').getContent();remove_editor("invitation_profile_content");$("#survey_invitation").load('ajax.php?a=survey_invitation&b=save_new_invitation_profile',{anketa:srv_meta_anketa_id,name:name,pid:pid,title:title,content:content,replyto:replyto},function(){create_editor("invitation_profile_content");$("#invitation_new_dialog").hide();$('#fade').fadeOut('slow');});}
function invitation_renameProfile(){var pid=$("#invitation_rename_dialog").find("#renameProfileId").val();var name=$("#invitation_rename_dialog").find("#renameProfileName").val();remove_editor("invitation_profile_content");$("#survey_invitation").load('ajax.php?a=survey_invitation&b=rename_invitation_profile',{anketa:srv_meta_anketa_id,name:name,pid:pid},function(){create_editor("invitation_profile_content");$("#invitation_rename_dialog").hide();$('#fade').fadeOut('slow');});}
function invitation_deleteProfile(){var pid=$("#invitation_delete_dialog").find("#deleteProfileId").val();remove_editor("invitation_profile_content");$("#survey_invitation").load('ajax.php?a=survey_invitation&b=delete_invitation_profile',{anketa:srv_meta_anketa_id,pid:pid},function(){create_editor("invitation_profile_content");$("#invitation_delete_dialog").hide();$('#fade').fadeOut('slow');});}
function showRenameInvitationProfile(){var pid=$("#invitation_profiles").find(".option.active").attr('value');$('#fade').fadeTo('slow',1);$("#invitation_rename_dialog").find("#renameProfileId").val(pid);$("#invitation_rename_dialog").show();}
function showDeleteInvitationProfile(){var pid=$("#invitation_profiles").find(".option.active").attr('value');$('#fade').fadeTo('slow',1);$("#invitation_delete_dialog").find("#deleteProfileId").val(pid);$("#invitation_delete_dialog").show();}
function recalc_alert_expire(days){$("#calc_alert_expire").load('ajax.php?a=recalc_alert_expire',{anketa:srv_meta_anketa_id,days:days});}
function voteCountStatus(status){if(status==1||status==2){$('#vote_limit_warning').removeClass('displayNone');$('#vote_limit').removeClass('bottom0');}else{$('#vote_limit_warning').addClass('displayNone');$('#vote_limit').addClass('bottom0');}
if(status==1){$('#vote_limit_all_warning').removeClass('displayNone');}else{$('#vote_limit_all_warning').addClass('displayNone');}}
function voteCountToggle(status){if(status==1||status==2){$('#voteCountToggle1').show();}else{$('#voteCountToggle1').hide();}}
function survey_statistic_referal(what){if($(what).attr('value')=='0'){var type=$("#type").val();var period=$("#period").val();var hideNullValues_dates=$("#hideNullValues_dates").is(':checked');var hideNullValues_status=$("#hideNullValues_status").is(':checked');$("#survey_referals").load('ajax.php?a=survey_statistic_referal',{anketa:srv_meta_anketa_id,type:type,period:period,hideNullValues_dates:hideNullValues_dates,hideNullValues_status:hideNullValues_status},function(){$("#survey_referals").slideDown();$(what).attr('value','1');});}
else if($(what).attr('value')=='1'){$("#survey_referals").slideUp();$(what).attr('value','2');}
else{$("#survey_referals").slideDown();$(what).attr('value','1');}}
function ip_list_podrobno(what){if($(what).attr('value')=='0'){var type=$("#type").val();var period=$("#period").val();var hideNullValues_dates=$("#hideNullValues_dates").is(':checked');var hideNullValues_status=$("#hideNullValues_status").is(':checked');$("#ip_list_podrobno").load('ajax.php?a=survey_statistic_ip_list',{anketa:srv_meta_anketa_id,type:type,period:period,hideNullValues_dates:hideNullValues_dates,hideNullValues_status:hideNullValues_status},function(){$("#ip_list_podrobno").slideDown();$(what).attr('value','1');});}
else if($(what).attr('value')=='1'){$("#ip_list_podrobno").slideUp();$(what).attr('value','2');}
else{$("#ip_list_podrobno").slideDown();$(what).attr('value','1');}}
function survey_statistic_status(status){$('#fullscreen').html('').fadeIn('slow').draggable({delay:100,cancel:'input, textarea, select, .buttonwrapper'});$('#fade').fadeTo('slow',1);$('#fullscreen').load('ajax.php?a=survey_statistic_status',{anketa:srv_meta_anketa_id,status:status}).draggable({delay:100,cancel:'input, textarea, select, .buttonwrapper'});}
function close_statistic_float_div(){$('#fullscreen').fadeOut('slow');$('#fade').fadeOut('slow');}
function refreshBottomIcons(color){if(color==undefined&&$(".spr_editmode").length!=0)
{color='gray';}
if(color=='gray'){$("#bottom_invitaton_button").removeClass('ovalbutton_orange').addClass('ovalbutton_gray');}else{$("#bottom_invitaton_button").removeClass('ovalbutton_gray').addClass('ovalbutton_orange');}}
function save_user_settings(){var icons_always_on=$("input[name=icons_always_on]:checked").val();var full_screen_edit=$("input[name=full_screen_edit]:checked").val();$.post('ajax.php?a=save_user_settings',{icons_always_on:icons_always_on,full_screen_edit:full_screen_edit},function(){actionNotePopup('success_save','success');});}
function updateManual(){$("#radioManual").attr("checked","checked");}
function updateManual1(){$("#radioManual1").attr("checked","checked");}
function chnage_full_screen_edit(){srv_meta_full_screen_edit=$("input[name=full_screen_edit]").is(':checked')?1:0;$.post('ajax.php?a=save_user_settings',{anketa:srv_meta_anketa_id,full_screen_edit:srv_meta_full_screen_edit},function(){actionNotePopup('success_save','success');});}
function doTxtExport(){$('#export_txt_form').submit();return false;}
function doExcelXlsExport(){$('#export_excel_xls_form').submit();}
function doExcelExport(){$('#export_excel_form').submit();}
function excelExportChangeDelimit($param){if($param==1){$('#replace_export_delimit_semicolon').removeClass('displayNone');$('#replace_export_delimit_comma').addClass('displayNone');}
else if($param==2){$('#replace_export_delimit_semicolon').addClass('displayNone');$('#replace_export_delimit_comma').removeClass('displayNone');}
return false;}
function doSpssExport(data){if(data=='yes'){var input=$("<input>").attr("type","hidden").attr("name","exportData").val("1");$('#export_spss_form').append($(input));}else{var input=$("<input>").attr("type","hidden").attr("name","exportData").val("0");$('#export_spss_form').append($(input));}
$('#export_spss_form').submit();}
function doSAVExport(){$('#export_sav_form').submit();}
function getUrlVars()
{var vars=[],hash;var hashes=window.location.href.slice(window.location.href.indexOf('?')+1).split('&');for(var i=0;i<hashes.length;i++)
{hash=hashes[i].split('=');vars.push(hash[0]);vars[hash[0]]=hash[1];}
return vars;}
function check_valid_variable(variable){var ValidPattern=/^[A-Za-z0-9]*$/;var ValidFirstChar=/^[A-Za-z]*$/;var result='';for(var i=0;i<variable.length;i++){var chr=variable.charAt(i);if(i==0){if(ValidFirstChar.test(chr)){result=result+chr;}}else if(ValidPattern.test(chr)){result=result+chr;}}
result=result.substring(0,15);if(!ValidFirstChar.test(result.charAt(0))){result=check_valid_variable(result);}
return result;}
function check_valid_radio_variable(variable){var ValidPattern=/^[0-9\-]*$/;var result='';for(var i=0;i<variable.length;i++){var chr=variable.charAt(i);if(ValidPattern.test(chr)){result=result+chr;}}
result=result.substring(0,15);return result;}
function clearDefaultValue(el){if(el.defaultValue==el.value)el.value=""}
function showSearch(){$('#searchSurvey').animate({width:'toggle'});}
function showDataTableSearch(){if($('#data_search_value').is(":visible"))
$('#data_search_filter').css('background-color','#f8f8f8');else
$('#data_search_filter').css('background-color','white');$('#data_search_value').animate({width:'toggle'});}
function clearDataTableSearch(){$('#data_search_value').val('');data_search_filter();}
function showSearchb(){$('#searchSurveyb').animate({width:'toggle'});}
function executeDrupalSearch(){var url=$('#drupal_search_url').val();var searchString=$('#searchSurvey').val();window.open(url+encodeURIComponent(searchString),'_blank');}
function showAdvancedSearch(){if($('#advancedSearch').is(":visible")){$('#advancedSearch').slideUp('slow');$('#advanced_settings_button').removeClass('active');}
else{$('#advancedSearch').slideDown('slow');$('#advanced_settings_button').addClass('active');}}
function max_stevilo_vnosov(){var input=$("input[name=stevilo_vnosov]");if(value=parseInt(input.val())){if(value>1000)
value=1000;}else{value=0;}
input.val(value);}
function link_enable_addvance(what){$.redirect('ajax.php?a=enable_addvance',{anketa:srv_meta_anketa_id,what:what});}
function toggle_standardne_besede(){if($('.standardne_besede').css('display')=='none'){$('input[name=std_besede]').attr('checked',true);$('.standardne_besede').show();}else{$('input[name=std_besede]').attr('checked',false);$('.standardne_besede').hide();}}
function dostopActiveShowAll(show_hide){if(show_hide=='true'){$("#dostop_active_show_1").hide();$("#dostop_active_show_2").show();$('#dostop_users_list').load('ajax.php?a=dostop_active_show_all',{show_all:1,anketa:srv_meta_anketa_id});}
else{$("#dostop_active_show_1").show();$("#dostop_active_show_2").hide();$('#dostop_users_list').load('ajax.php?a=dostop_active_show_all',{show_all:0,anketa:srv_meta_anketa_id});}}
function dostopPassiveShowAll(show_hide){if(show_hide=='true'){$("#dostop_passive_show_1").hide();$("#dostop_passive_show_2").show();$("div[name=dostop_passive_uid]").each(function(){$(this).css('display','block');});}else{$("#dostop_passive_show_1").show();$("#dostop_passive_show_2").hide();$("div[name=dostop_passive_uid] input:not(:checked)").each(function(){$(this).parent().css('display','none');});}}
function dostopNoteToggle(){if($('#addusers_note_checkbox').is(':checked')){$('#addusers_note').removeClass('displayNone');}
else{$('#addusers_note').addClass('displayNone');}}
function dostopAddAccess(){var addusers=$('#addusers').val();var addusers_note='';if($('#addusers_note_checkbox').is(':checked')){addusers_note=$('#addusers_note').val();}
$('#fade').fadeTo('slow',1);$('#general_popup').html('').fadeIn('slow');$("#general_popup").load('ajax.php?a=add_survey_dostop_popup',{addusers:addusers,addusers_note:addusers_note,anketa:srv_meta_anketa_id},function(){$("#globalSetingsList").load('ajax.php?a=refresh_dostop_settings',{anketa:srv_meta_anketa_id});});}
function comments_admin_toggle(type){if($('#comments_admin'+type).attr('admin_on')=='true'){comments_admin_off(type);}else{comments_admin_on(type);}}
function comments_admin_on(type){$('#comments_admin'+type).attr('admin_on','true');$('#comments_admin'+type).attr('checked',true);if(type==1){$('select[name=survey_comment]').val('3');$('select[name=survey_comment_viewadminonly]').val('3');}else{$('select[name=question_note_view]').val('3');$('select[name=question_note_write]').val('0');$('select[name=question_comment]').val('3');$('select[name=question_comment_viewadminonly]').val('3');}}
function comments_admin_off(type){$('#comments_admin'+type).attr('admin_on','false');$('#comments_admin'+type).attr('checked',false);if(type==1){$('select[name=survey_comment]').val('');$('select[name=survey_comment_viewadminonly]').val('3');}else{$('select[name=question_note_view]').val('');$('select[name=question_note_write]').val('');$('select[name=question_comment]').val('');$('select[name=question_comment_viewadminonly]').val('4');}}
function check_comments_admin(type){if(type==1){if($('select[name=survey_comment]').val()!='')
return true;else
return false;}else{if($('select[name=question_comment]').val()!='')
return true;else
return false;}}
function check_comments_admin_off(type){if(type==1){if($('select[name=survey_comment]').val()=='')
return true;else
return false;}else{if($('select[name=question_comment]').val()=='')
return true;else
return false;}}
function comments_resp_toggle(type){if(type==1){if($('#comments_resp').attr('resp_on')=='true'){comments_resp_off();}else{comments_resp_on();}}
else{if($('#comments_resp2').attr('resp_on')=='true'){$('#comments_resp2').attr('resp_on','false');$('#comments_resp2').attr('checked',false);$('select[name=survey_comment_resp]').val('');$('select[name=survey_comment_viewadminonly_resp]').val('4');}else{$('#comments_resp2').attr('resp_on','true');$('#comments_resp2').attr('checked',true);$('select[name=survey_comment_resp]').val('4');$('select[name=survey_comment_viewadminonly_resp]').val('4');}}}
function comments_resp_on(){$('#comments_resp').attr('resp_on','true');$('#comments_resp').attr('checked',true);$('input#question_resp_comment_1').attr('checked',true);$('select[name=question_resp_comment_viewadminonly]').val('3');$('input#question_resp_comment_show_open_0').attr('checked',true);}
function comments_resp_off(){$('#comments_resp').attr('resp_on','false');$('#comments_resp').attr('checked',false);$('input#question_resp_comment_0').attr('checked',true);$('select[name=question_resp_comment_viewadminonly]').val('');$('input#question_resp_comment_show_open_0').attr('checked',true);}
function check_comments_resp(type){if(type==1){if($('input#question_resp_comment_1').attr('checked')=='checked'&&$('select[name=question_resp_comment_viewadminonly]').val()!='')
return true;else
return false;}
else{if($('select[name=survey_comment_resp]').val()=='')
return false;else
return true;}}
function check_comments_resp_off(){if($('input#question_resp_comment_0').attr('checked')=='checked'&&$('select[name=question_resp_comment_viewadminonly]').val()=='')
return true;else
return false;}
function testiranje_settings(){if($('#question_resp_comment_0').attr('checked')=='checked'){$('.question_resp_comment').hide();}else{$('.question_resp_comment').show();if($('#question_resp_comment_inicialke_0').attr('checked')=='checked'){$('.question_resp_comment_inicialke').hide();}else{$('.question_resp_comment_inicialke').show();}}}
function delete_test_data(){if(confirm(lang['srv_delete_testdata_warning'])){window.location.href='index.php?anketa='+srv_meta_anketa_id+'&a=testiranje&m=testnipodatki&delete_testdata=1';}}
function archivePopup(){$('#fade').fadeTo('slow',1);$('#fullscreen').html('').fadeIn('slow').draggable({delay:100,cancel:'input, textarea, select, .buttonwrapper'});$('#fullscreen').load('ajax.php?a=archivePopup',{anketa:srv_meta_anketa_id});}
function archivePopupView(){$('#fullscreen').fadeOut('slow').html('');window.location='index.php?anketa='+srv_meta_anketa_id+'&a=arhivi';}
function archivePopupClose(){$('#fullscreen').fadeOut('slow').html('');$('#fade').fadeOut('slow');}
function add_to_library(anketa,where){$.post('ajax.php?a=add_to_library',{anketa:anketa,where:where});}
function create_archive_survey(anketa){$('#fade').fadeTo('slow',1);$.post('index.php?anketa='+anketa+'&a=backup_create',{intro_opomba:$('#intro_opomba').val()},function(){window.location.reload();});return false;}
function create_archive_survey_data(anketa){$('#fade').fadeTo('slow',1);$.post('ajax.php?anketa='+anketa+'&a=backup_data&data=true',{intro_opomba:$('#intro_opomba').val()},function(){window.location.reload();});return false;}
function submitSurveyDuration(){var durationType=1;var durationStarts=$("#startsManual1").val();var durationExpire=$("#expireManual1").val();var voteCountLimitType=$("input[name=vote_limit]:checked").val();var voteCountValue=$("#vote_count").val();$.post('ajax.php?a=anketa_save_activation',{anketa:srv_meta_anketa_id,durationType:durationType,durationStarts:durationStarts,durationExpire:durationExpire,voteCountLimitType:voteCountLimitType,voteCountValue:voteCountValue},function(){window.location.reload();});}
function diag_display_if(){$.post('ajax.php?t=branching&a=check_pogoji&izpis=long',{anketa:srv_meta_anketa_id},function(data){$('#fade').fadeIn("slow");$('#check_pogoji').html(data).fadeIn("slow");});}
function changeDataIcons(){var dataIcons_quick_view=$('#dataIcons_quick_view').is(':checked')?'1':'0';var dataIcons_write=$('#dataIcons_write').is(':checked')?'1':'0';var dataIcons_edit=$('#dataIcons_edit').is(':checked')?'1':'0';var dataIcons_labels=$('#dataIcons_labels').is(':checked')?'1':'0';var dataIcons_multiple=$('#dataIcons_multiple').is(':checked')?'1':'0';$.post('ajax.php?t=dataSettingProfile&a=changeDataIcons',{anketa:srv_meta_anketa_id,dataIcons_write:dataIcons_write,dataIcons_edit:dataIcons_edit,dataIcons_quick_view:dataIcons_quick_view,dataIcons_labels:dataIcons_labels,dataIcons_multiple:dataIcons_multiple},function(data){window.location.reload();});}
function surveyBaseSettingRadio(what,foreceReload){if(what=='usercode_skip'){if($('#usercode_skip_0').is(":checked")){var value=$("input[name="+what+"]:checked").val();if(value==null)
value='1';}
else{var value='0';}}
else{var value=$("input[name="+what+"]:checked").val();}
if(foreceReload==true){var foreceReload=true;}else{var foreceReload=false;}
$.post('ajax.php?t=surveyBaseSetting&a=radio',{anketa:srv_meta_anketa_id,what:what,value:value},function(data){data=jQuery.parseJSON(data);if(data.error==0){if(foreceReload==true){window.location.reload();}}else{genericAlertPopup('alert_parameter_datamsg',data.msg);}});}
function surveyBaseSettingText(what,refresh){var value='';if($('#'+what).length){value=$('#'+what).val();}else if($('[name='+what+']').length){value=$('[name='+what+']').val();}else{genericAlertPopup('alert_save_error');return false;}
$.post('ajax.php?t=surveyBaseSetting&a=text',{anketa:srv_meta_anketa_id,what:what,value:value,refresh:refresh},function(data){data=jQuery.parseJSON(data);if(data.error==0){if(data.action==0&&refresh==true){window.location.reload();}else if(data.action==1){}}else{genericAlertPopup('alert_parameter_datamsg',data.msg);}});}
function alert_custom(type,uid){$('#fade').fadeTo('slow',1);$('#vrednost_edit').show().load('ajax.php?a=alert_custom',{anketa:srv_meta_anketa_id,type:type,uid:uid},function(){if($("#text"))create_editor('text',false);});}
function exportChangeCheckbox(){var value=$("input[name=exportSetting]:checked").val();$.post('ajax.php?a=exportChangeCheckbox',{anketa:srv_meta_anketa_id,value:value});}
function exportChangeRadio(id,name){var value=$("input[name="+name+"]:checked").val();$.post('ajax.php?a=exportChangeRadio',{anketa:srv_meta_anketa_id,id:id,name:name,value:value});}
function setExpirePermanent(){$.post('ajax.php?t=branching&a=check_pogoji&izpis=short',{anketa:srv_meta_anketa_id},function(data){if(data!=='1'){$("#expirePermanent").prop('checked',!$("#expirePermanent").is(':checked'));$('#fade').fadeTo('slow',1);$('#fullscreen').html('').fadeIn('slow');$("#fullscreen").load('ajax.php?a=anketa_show_activation',{anketa:srv_meta_anketa_id,folders:folders,izpis:'only_warnings'},function(){});}
else{setExpirePermanentSetting();}});}
function setExpirePermanentSetting(){makePermanent=$("#expirePermanent").is(':checked');$.post('ajax.php?a=setExpirePermanent',{anketa:srv_meta_anketa_id,makePermanent:makePermanent},function(data){data=jQuery.parseJSON(data);if(data.permanent=='0'){$("#expireManual1").removeClass("disabled");$("#expire").find(".ui-datepicker-trigger").removeClass("disabled");}else{$("#expireManual1").addClass("disabled");$("#expire").find(".ui-datepicker-trigger").addClass("disabled");}
$("#expireManual1").val(data.expire);window.location.reload();return;});}
function changeDoCMSUserFilterCheckbox(){var checked=$("#doCMSUserFilterCheckbox").is(":checked");$.post('ajax.php?a=doCMSUserFilterCheckbox',{anketa:srv_meta_anketa_id,meta_akcija:srv_meta_akcija,podstran:srv_meta_podstran,checked:checked},function(response){return reloadData('status');});}
function anketa_restore(anketa){if(confirm(lang['srv_anketa_deleted_restore_confirm'])){$.post('ajax.php?a=anketa_restore',{id:anketa},function(){window.location.href='index.php?anketa='+anketa;})}}
function data_restore(anketa){if(confirm(lang['srv_data_deleted_restore_confirm'])){$.post('ajax.php?a=data_restore',{id:anketa},function(){window.location.href='index.php?anketa='+anketa;})}}
function deleteSurveyDataFile(note){if(confirm(note)){$.post('ajax.php?a=deleteSurveyDataFile',{anketa:srv_meta_anketa_id},function(result){genericAlertPopup('alert_parameter_response',response)});}}
function userGlobalSettingChange(what){var type=$(what).attr('type');if(type=='checkbox'){var name=$(what).attr('name');var value=($(what).attr('value')!==undefined&&$(what).attr('value')!=='on')?$(what).attr('value'):'1';var state=$(what).is(':checked')?value:'0';$.post('ajax.php?t=globalUserSettings',{name:name,value:state},function(data){});}else{genericAlertPopup('alert_userGlobalSettingChange',type);}}
function changeSurveyLock(what){var value=($(what).attr('value')!==undefined&&$(what).attr('value')!=='on')?$(what).attr('value'):'1';var state=$(what).is(':checked')?value:'0';$("#div_lock_survey").load('ajax.php?t=changeSurveyLock',{anketa:srv_meta_anketa_id,name:'lockSurvey',value:state});}
$.fn.blink=function(opts){if(opts=='stop'){return this.data('blinkStop',true).stop(true,true).show();}
this.data('blinkStop',false);opts=$.extend({},{fadeIn:100,fadeOut:300,pauseShow:5000},opts||{});function doFadeOut($elem){$elem=$elem||$(this);if($elem.data('blinkStop'))return;$elem.delay(opts.pauseShow).fadeOut(opts.fadeOut,doFadeIn);}
function doFadeIn($elem){$elem=$elem||$(this);if($elem.data('blinkStop'))return;$elem.fadeIn(opts.fadeIn,doFadeOut);}
doFadeOut(this);return this;};function dostop_admin(remove){$('#request_help_content').load('ajax.php?a=dostop_admin',{anketa:srv_meta_anketa_id,remove:remove},function(data){$('#request_help_content').addClass('displayBlock').mouseover(function(){$(this).removeClass('displayBlock')});});return false;}
function setDataView(what,value){$.post('ajax.php?t=setDataView',{anketa:srv_meta_anketa_id,what:what,value:value},function(){window.location.reload();return;});}
function testiranje_preview_settings(){$('#fade').fadeTo('slow',1);$('#vrednost_edit').load('ajax.php?a=testiranje_preview_settings',{anketa:srv_meta_anketa_id}).show();}
function testiranje_preview_settings_save(){$('#vrednost_edit').hide();$('#fade').fadeOut('slow');$.post('ajax.php?a=testiranje_preview_settings_save',$('form[name="testiranje_preview_settings"]').serialize(),function(){location.reload();});}
function showTestSurveySMTP()
{$('#fade').fadeTo('slow',1);$('#general_popup').html('').addClass('PopUpNarrow').fadeIn('slow');$("#general_popup").load('ajax.php?t=showTestSurveySMTP',$('form[name="settingsanketa_'+srv_meta_anketa_id+'"]').serialize(),function(){});return false;}
function showSurveyUrlLinks(podstran,m)
{$('#fade').fadeTo('slow',1);$('#fullscreen').html('').addClass('divPopUp').fadeIn('slow');$("#fullscreen").load('ajax.php?t=SurveyUrlLinks&a=showLinks',{anketa:srv_meta_anketa_id,podstran:podstran,m:m});return false;}
function addSurveyUrlLink(podstran,m)
{$("#fullscreen").load('ajax.php?t=SurveyUrlLinks&a=addLink',{anketa:srv_meta_anketa_id,podstran:podstran,m:m});return false;}
function deleteSurveyUrlLinks(anketa,hash,podstran,m)
{if(confirm(lang['srv_urlLinks_delete'])){$("#fullscreen").load('ajax.php?t=SurveyUrlLinks&a=deleteLink',{anketa:anketa,hash:hash,podstran:podstran,m:m});}
return false;}
function changeParaAnalysisCbx(what,reverse){var value=$(what).is(':checked');if(reverse){value=!value;}
var what_id=$(what).attr('id');$.post('ajax.php?t=ParaAnalysis&a=setCbx',{anketa:srv_meta_anketa_id,value:value,what:what_id},function(){window.location.reload();});return false;}
function check_para_wrap(){var value=$("#show_with_zero").is(":checked");if(value){$("#scroll1").removeClass("table-horizontal-scroll-wrapper1");$("#scroll2").removeClass("table-horizontal-scroll-wrapper2");}
else{$("#scroll1").addClass("table-horizontal-scroll-wrapper1");$("#scroll2").addClass("table-horizontal-scroll-wrapper2");}}
function changeParaAnalysisSelect(what){var value=$(what).val();var what_id=$(what).attr('id');$.post('ajax.php?t=ParaAnalysis&a=setValue',{anketa:srv_meta_anketa_id,value:value,what:what_id},function(){window.location.reload();});return false;}
function changeParaGraphFilter(){var status=$('input[name=paraGraph_filter_status]:checked').val();if($('#paraGraph_filter_pc').is(':checked'))
var pc=1;else
var pc=0;if($('#paraGraph_filter_tablet').is(':checked'))
var tablet=1;else
var tablet=0;if($('#paraGraph_filter_mobi').is(':checked'))
var mobi=1;else
var mobi=0;if($('#paraGraph_filter_robot').is(':checked'))
var robot=1;else
var robot=0;window.location='index.php?anketa='+srv_meta_anketa_id+'&a=para_graph&status='+status+'&pc='+pc+'&tablet='+tablet+'&mobi='+mobi+'&robot='+robot;}
function changeUsableRespSetting(what){var what_id=$(what).attr('id');if(what_id=='show_with_zero'||what_id=='show_with_text'||what_id=='show_with_other'||what_id=='show_details'||what_id=='show_calculations'){if($(what).is(':checked'))
var value=true;else
var value=false;}
else{var value=$(what).val();}
$.post('ajax.php?t=surveyUsableResp&a=changeSetting',{anketa:srv_meta_anketa_id,value:value,what:what_id},function(){window.location.reload();});return false;}
function cookie_alert(){function cookie_alert_do(){if($('input[name=cookie]:checked').val()!='-1'){$('#cookie_alert').show();}else{$('#cookie_alert').hide();}};$('input[name=cookie]').on('change',cookie_alert_do);cookie_alert_do();}
function toggleAdvancedModule(what,reload){if(typeof reload=='undefined')
reload=1;if($('#advanced_module_'+what).is(':checked')){if(what=='user_from_cms')
var value=2;else
var value=1;}
else{var value=0;}
$('#globalSettingsInner').load('ajax.php?a=toggle_advanced_module',{what:what,value:value,anketa:srv_meta_anketa_id},function(){if(reload==1)
window.location.reload();});}
function toggleDataCheckboxes(podstran){if(podstran=='paraAnalysisGraph'){$("#anketa").addClass("drop_setting_transition");$("#anketa").toggleClass("drop_setting_margin");}
if($('#dataSettingsCheckboxes').css('display')=='none'){$("#dataSettingsCheckboxes").fadeIn("medium");$("#toggleDataCheckboxes").addClass("active");var showSettings=1;$(".fa-angle-down").switchClass("fa-angle-down","fa-angle-up");}
else{$("#dataSettingsCheckboxes").fadeOut("medium");$("#toggleDataCheckboxes").removeClass("active");var showSettings=0;$(".fa-angle-up").switchClass("fa-angle-up","fa-angle-down");}
if(podstran=='data'){$.post('ajax.php?t=dataSettingProfile&a=changeDataIconsSettings',{anketa:srv_meta_anketa_id,dataIcons_settings:showSettings});}else if(podstran=='paraAnalysisGraph'){$.post('ajax.php?t=dataSettingProfile&a=changeParaAnalysisGraphSettings',{anketa:srv_meta_anketa_id,paraAnalysisGraph_settings:showSettings});}
else{$.post('ajax.php?t=dataSettingProfile&a=changeUsabilityIconsSettings',{anketa:srv_meta_anketa_id,usabilityIcons_settings:showSettings});}}
function toggle_drop_settings_margin(){$("#anketa").addClass("drop_setting_margin");}
function data_fullscreen(data_fullscreen){if(data_fullscreen==1){$('body').addClass('data_fullscreen');$('#data_fullscreen_1').addClass('active');$('#data_fullscreen_0').removeClass('active');}
else{$('body').removeClass('data_fullscreen');$('#data_fullscreen_0').addClass('active');$('#data_fullscreen_1').removeClass('active');}
$.post('ajax.php?t=dataSettingProfile&a=changeDataFullscreen',{anketa:srv_meta_anketa_id,data_fullscreen:data_fullscreen});}
function data_search_filter(){var value=$("#data_search_value").val();$.post('ajax.php?t=displayData&a=set_data_search_filter',{anketa:srv_meta_anketa_id,value:value},function(){window.location.reload();});}
function UpdateTableHeaders(){$(".persist-area").each(function(){var el=$(this),offset=el.offset(),scrollTop=$(window).scrollTop(),floatingHeader=$(".floatingHeader",this)
if((scrollTop>offset.top)&&(scrollTop<offset.top+el.height())){floatingHeader.css({"visibility":"visible"});}else{floatingHeader.css({"visibility":"hidden"});};});}
$(function(){var $floatingHeader=$(".persist-header",this).clone();$floatingHeader.children().width(function(i,val){return $(".persist-header").children().eq(i).width();});$floatingHeader.css("width",$(".persist-header",this).width()).addClass("floatingHeader");$(".persist-header",this).before($floatingHeader);$(window).scroll(UpdateTableHeaders).trigger("scroll");if($('[name="izberi-anketo"]')){$('[name="izberi-anketo"]').on('change',function(){$('#hierarhija-knjiznica').html('').hide();$('#hierarhija-prevzeta').hide();});}});function diagnosticsChooseDate(){var selected=$("#diagnostics_date_selected").find(":selected");var data=$("#diagnostics_date_selected").find(":selected").val();if(data=='99date'){$("#from").prop('disabled',false);$("#to").prop('disabled',false);Calendar.setup({inputField:"from",ifFormat:"%Y-%m-%d %H-%M",button:"from_img",singleClick:true});Calendar.setup({inputField:"to",ifFormat:"%Y-%m-%d %H-%M",button:"to_img",singleClick:true});}else{$("#from").prop('disabled',true);$("#from").val('');$("#to").prop('disabled',true);$("#to").val('');$("#diagnostics_form").submit();}}
function diagnosticsParadataChooseDate(){Calendar.setup({inputField:"from",ifFormat:"%d.%m.%Y",button:"from_img",singleClick:true});Calendar.setup({inputField:"to",ifFormat:"%d.%m.%Y",button:"to_img",singleClick:true});}
function changeSelectOption(){$("#diagnostics_date_selected").find(":selected").prop('selected',false);$("#option_99date").prop('selected',true);diagnosticsChooseDate();}
function inline_jezik_edit(id_value){$('#fade').fadeTo('slow',1);var id=$("#"+id_value);id.siblings('.sb-edit').hide();id.replaceWith('<div class="fixed-position"><div id="vrednost_edit">'+'<h2><span class="faicon edit-vprasanje st-besede-popup blue"></span><span>'+lang['srv_editor_title']+'</span></h2>'+'<div class="popup_close"><a href="#" onclick="inline_jezik_reset(\''+id_value+'\');">✕</a></div>'+'<textarea name="'+id_value+'" id="'+id_value+'">'+id.html()+'</textarea>'+'<textarea name="old_val_'+id_value+'" style="visibility:hidden; display:none;">'+id.html()+'</textarea>'+'<div class="button_holder popup">'+'<button class="white-blue medium" onclick="inline_jezik_reset(\''+id_value+'\');">'+lang['srv_zapri']+'</button>'+'<button class="blue medium" onclick="inline_jezik_save(\''+id_value+'\');">'+lang['save']+'</button>'+'</div>'+'</div></div>');create_editor(id_value);}
function inline_jezik_reset(id_value){$('#fade').fadeOut('slow');var id=$('#'+id_value);var old_val=$("textarea[name=old_val_"+id_value+"]").val();var par=id.closest('.fixed-position');CKEDITOR.instances[id_value].destroy();par.replaceWith('<div contentEditable="true" class="standardna-beseda-urejanje" name="'+id_value+'" id="'+id_value+'">'+old_val+'</div>');$('textarea#polje_'+id_value).html(old_val);id.siblings('.sb-edit').hide();inline_jezik_hover();var t=$('#polje_'+id_value).offset().top;$('html, body').animate({scrollTop:t},100);}
function inline_jezik_save(id_value){var id=$('#'+id_value);var par=id.closest('.fixed-position');CKEDITOR.instances[id_value].destroy();par.replaceWith('<div contentEditable="true" class="standardna-beseda-urejanje" name="'+id_value+'" id="'+id_value+'">'+id.val()+'</div>');$('textarea#polje_'+id_value).html(id.val());id.siblings('.sb-edit').hide();inline_jezik_hover();var t=$('#polje_'+id_value).offset().top;$('html, body').animate({scrollTop:t},100);$("form[name=settingsanketa_"+$("input[name=anketa]").val()+"]").submit();}
function inline_jezik_close(id_value){var id=$('#'+id_value);var par=id.closest('.fixed-position');CKEDITOR.instances[id_value].destroy();par.replaceWith('<div contentEditable="true" class="standardna-beseda-urejanje" name="'+id_value+'" id="'+id_value+'">'+id.val()+'</div>');$('textarea#polje_'+id_value).html(id.val());id.siblings('.sb-edit').hide();inline_jezik_hover();var t=$('#polje_'+id_value).offset().top;$('html, body').animate({scrollTop:t},100);}
function inline_jezik_hover(){$("div.standardna-beseda-urejanje").on({focus:function(){var id=$(this).attr('id');$(this).siblings('.sb-edit').show();$(this).parent().addClass('sb-editing');},blur:function(){var id=$(this).attr('id');var value=$(this).html();$('#polje_'+id).html(value);if(!$(this).siblings().hasClass('.sb-edit')){window.setTimeout(function(){$('#'+id).siblings('.sb-edit').hide();},210);}
$(this).parent().removeClass('sb-editing');}});}
function ponastavi_prevod(id){$.post('ajax.php?a=editanketasettings',{anketa:$('[name="anketa"]').val(),extra_translations:true,lang:id,remove_lang:1,data:$('form').serialize()}).success(function(){window.location.reload();});}
function generate_API_key(){$('#fade').fadeTo('slow',1);$("#unread_notifications").load('ajax.php?a=generate_API_key',{anketa:srv_meta_anketa_id},function(){$('#unread_notifications').show();});}
function close_API_window(){$('#fade').fadeOut('slow');$('#unread_notifications').fadeOut('slow');}
function archive_surveys_display_export(){$('#fade').fadeTo('slow',1);$('#general_popup').html('').addClass('PopUpNarrow').fadeIn('slow');$("#general_popup").load('ajax.php?t=archiveSurveys&a=display_export');}
function archive_surveys_export_toggle(val){if(val==1){$(".survey_archive_checkbox").attr("checked","true");$("#switch_on").addClass("displayNone");$("#switch_off").removeClass("displayNone");}
else{$('.survey_archive_checkbox').removeAttr('checked');$("#switch_off").addClass("displayNone");$("#switch_on").removeClass("displayNone");}
archive_surveys_export_counter();}
function archive_surveys_export_counter(){var selectedCheckboxes=$('.survey_archive_checkbox:checked');var selectedCount=selectedCheckboxes.length;$('#mass_select_counter_number').text(selectedCount);}
function archive_surveys_export(){var form_serialize=$("#survey_archive_form").serializeArray();$("#general_popup").load('ajax.php?t=archiveSurveys&a=export',form_serialize);}
function archive_surveys_download_export(url){var link=$('<a>',{href:url,target:'_blank',download:url.substring(url.lastIndexOf('/')+1)});link.on('click',function(){$(this).remove();});$('body').append(link);link[0].click();popupClose();}
function archive_surveys_display_import(){$('#fade').fadeTo('slow',1);$('#general_popup').html('').addClass('PopUpNarrow').fadeIn('slow');$("#general_popup").load('ajax.php?t=archiveSurveys&a=display_import');}
function archive_surveys_select_import(){var fileInput=$('#archive_surveys_input')[0];var fileName=fileInput.value;var fileExtension=fileName.substring(fileName.lastIndexOf('.')+1).toLowerCase();var fileSize=fileInput.files[0].size;var warningFileSize=5*1024*1024;var maxFileSize=20*1024*1024;if(fileExtension!=='zip'){$('#archive_surveys_error').removeClass('displayNone');$('#archive_surveys_import_button, #archive_surveys_error2, #archive_surveys_error3').addClass('displayNone');}
else if(fileSize>maxFileSize){$('#archive_surveys_error3').removeClass('displayNone');$('#archive_surveys_import_button, #archive_surveys_error, #archive_surveys_error2').addClass('displayNone');}
else if(fileSize>warningFileSize){$('#archive_surveys_error2, #archive_surveys_import_button').removeClass('displayNone');$('#archive_surveys_error, #archive_surveys_error3').addClass('displayNone');}
else{$('#archive_surveys_import_button').removeClass('displayNone');$('#archive_surveys_error, #archive_surveys_error2, #archive_surveys_error2').addClass('displayNone');}}
function archive_surveys_import(){var formData=new FormData($('#restore')[0]);$.ajax({url:'ajax.php?t=archiveSurveys&a=import',type:'POST',data:formData,processData:false,contentType:false,success:function(response){$("#general_popup").html(response);}});}
function chat_save_settings(){var code=$("#chat_code").val();var chat_type=$('input[name=chat_type]:checked').val();$.post('ajax.php?t=chat&a=save_settings',{anketa:srv_meta_anketa_id,code:code,chat_type:chat_type},function(){actionNotePopup('success_save','success');});}
function quiz_save_settings(){var results=$("input[name=quiz_results]:checked").val();var results_chart=$("input[name=quiz_results_chart]:checked").val();$.post('ajax.php?t=quiz&a=save_settings',{anketa:srv_meta_anketa_id,results:results,results_chart:results_chart},function(){actionNotePopup('success_save','success');});}
function advanced_paradata_save_settings(){var collect_post_time=$("input[name=collect_post_time]:checked").val();$.post('ajax.php?t=advanced_paradata&a=save_settings',{anketa:srv_meta_anketa_id,collect_post_time:collect_post_time},function(){actionNotePopup('success_save','success');});}
function advanced_paradata_data_delete(){if(confirm("Are you sure?")){$.post('ajax.php?t=advanced_paradata&=advanced_paradata&a=logDataDelete',{anketa:srv_meta_anketa_id},function(){location.reload();});}}
function panel_save_settings(){var user_id_name=$('input[name=user_id_name]').val();var status_name=$('input[name=status_name]').val();var status_default=$('input[name=status_default]').val();var url=$('input[name=url]').val();var cookie_return=$('input[name=cookie_return]:checked').val();var continue_later=0;continue_later=$('input[name=continue_later]:checked').val();$("#globalSettingsInner").load('ajax.php?t=panel&a=save_settings',{anketa:srv_meta_anketa_id,user_id_name:user_id_name,status_name:status_name,status_default:status_default,url:url,cookie_return:cookie_return,continue_later:continue_later},function(){actionNotePopup('success_save','success');});}
function email_access_save_settings(){var captcha=0;captcha=$('input[name=captcha]:checked').val();var terms_text=$('textarea[name=terms_text]').val();$("#globalSettingsInner").load('ajax.php?t=email_access&a=save_settings',{anketa:srv_meta_anketa_id,captcha:captcha,terms_text:terms_text},function(){actionNotePopup('success_save','success');});}
var radio_list=new Array();var radio_vals=new Array();function checkChecked(radio){for(var i=0;i<radio_list.length;i++){if(radio_list[i]==radio.name&&radio_vals[i]==radio.value){radio_list.splice(i,1);radio_vals.splice(i,1);radio.checked=false;return;}}
for(var i=0;i<radio_list.length;i++){if(radio_list[i]==radio.name){radio_vals[i]=radio.value;return;}}
radio_list[radio_list.length]=radio.name;radio_vals[radio_vals.length]=radio.value;}
function setCheckedClass(element,type,ifId){var id=element.value;if(ifId&&type!='mm'){id=ifId;if(element.checked){if(type!=16&&type!='6-3-1'&&type!='6-3-2')
$('#vrednost_if_'+id).find('td').removeClass('checked');if(type=='6-3-1')
$('#vrednost_if_'+id).find('input:not([name$="_part_2"])').closest('td').removeClass('checked');if(type=='6-3-2')
$('#vrednost_if_'+id).find('input[name$="_part_2"]').closest('td').removeClass('checked');$(element).closest('td').addClass('checked');}
else{$(element).closest('td').removeClass('checked');}}
if(type=='mm'){if(element.checked){$('[for="vrednost_'+ifId+'_grid_'+id+'"]').parent().siblings().removeClass('checked');$('[for="vrednost_'+ifId+'_grid_'+id+'"]').parent().addClass('checked');}else{$('[for="vrednost_'+ifId+'_grid_'+id+'"]').parent().removeClass('checked');}}
else{if(element.checked){$("#vrednost_if_"+id).addClass('checked');}
else{$("#vrednost_if_"+id).removeClass('checked');}}
if(type==1){var name=$(element).attr('name');var idVprasanja=name.substring(9);var image1=$('#hotspot_'+idVprasanja+'_image');$("input[name="+name+"]").each(function(){var loop_id=this.value;id=element.value;if(loop_id!=id){$("#vrednost_if_"+loop_id).removeClass('checked');$('#spremenljivka_'+idVprasanja+'_vrednost_'+loop_id).closest('td').removeClass('checked');image1.mapster('set',false,loop_id);}});}}
function evoli_tm_edit(tm_id,what,value){$.post('ajax.php?t=evoliTM&a=teammeter_edit',{tm_id:tm_id,what:what,value:value,anketa:srv_meta_anketa_id});}
function evoli_tm_change_oddelek(department_id,usr_id){$.post('ajax.php?t=evoliTM&a=teammeter_change_oddelek',{department_id:department_id,usr_id:usr_id,anketa:srv_meta_anketa_id});}
function evoli_tm_add_oddelek(tm_id,oddelek){$.post('ajax.php?t=evoliTM&a=teammeter_add_oddelek',{tm_id:tm_id,oddelek:oddelek,anketa:srv_meta_anketa_id});}
function evoli_tm_settings_add_oddelek(tm_id){var oddelek=$("#tm_add_oddelek").val();$.post('ajax.php?t=evoliTM&a=teammeter_add_oddelek',{tm_id:tm_id,oddelek:oddelek,anketa:srv_meta_anketa_id},function(){window.location.reload();});}
function blockHorizontalLine(spr_id){$('.spremenljivka.horizontal_block').each(function(){if(!$(this).prev().hasClass('horizontal_block')&&!$(this).prev().hasClass('lineOnly')&&!$(this).prev().hasClass('tip_5')){$(this).before('<div class="spremenljivka lineOnly"></div>');}
if(!$(this).next().hasClass('horizontal_block')&&!$(this).next().hasClass('clr')&&!$(this).next().hasClass('tip_5')){$(this).after('<div class="clr"></div>');}});}
var podpisposlan=[];var optionsPodpis=[];function izbrisi1kaRacun(){if(confirm(lang['delete_account_conformation'])){$.post('ajax.php?a=editanketasettings&m=global_user_myProfile',{izbrisiRacun:1}).success(function(response){window.location.href="/";});}}
function save1kaRacunSettings(){var geslo1=$("#p1").val();var geslo2=$("#p2").val();if(geslo1=='PRIMERZELODOLGEGAGESLA'&&geslo2=='PRIMERZELODOLGEGAGESLA'){document.settingsanketa.submit();}
else if(geslo1!=geslo2){genericAlertPopup('cms_error_password_incorrect');}
else if(!complexPassword(geslo1)){genericAlertPopup('password_err_complex');}
else{if(confirm(lang['change_account_pass_conformation'])){document.settingsanketa.submit();}}}
function complexPassword(password){if(password.length<8){return false;}
var digits="0123456789";if(!stringContains(password,digits)){return false;}
var letters="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";if(!stringContains(password,letters)){return false;}
return true;}
function stringContains(password,allowedChars){for(i=0;i<password.length;i++){var char=password.charAt(i);if(allowedChars.indexOf(char)>=0)
return true;}
return false;}
function izbrisiAlternativniEmail(id,email){if(confirm(lang['alternative_email_delete']+' '+email+'?')){$.post('ajax.php?a=editanketasettings&m=global_user_myProfile',{izbrisiAlternativniEmail:1,alternativniEmailId:id}).success(function(response){window.location.reload();});}}
function dodajAlternativniEmail(){var email=$('#alternativni-email').val();$('#alternativni-obvestilo').hide().removeClass('error').removeClass('success');$.post('ajax.php?a=editanketasettings&m=global_user_myProfile',{'alternative_email':email}).success(function(response){if(response=='success'){$('.dodaj-alternativni-email .vnos').hide();var besedilo=lang['login_alternative_emails_success'].replace(/#email#/g,email);$('#alternativno-obvestilo').addClass('success').fadeIn('slow').text(besedilo);setTimeout(function(){window.location.reload();},8000);}else{$('#alternativno-obvestilo').fadeIn('slow').addClass('error').text(lang['login_alternative_emails_error']).delay(5000).fadeOut('slow');}});}
function check_akronim(){if($('#novaanketa_akronim_1').attr('changed')=='0'){$('#novaanketa_akronim_1').val($('#novaanketa_naslov_1').val());}
var max=$('#novaanketa_akronim_1').attr('maxlength');var leng=$('#novaanketa_akronim_1').val().length;$('#novaanketa_akronim_1_chars').html(leng+' / '+max);}
function vprasanje_jezik_edit_zakljucek(id_value){$('#fade').fadeTo('slow',1);var id=$("#"+id_value);$('#vrednost_edit').show().html('<h2><span class="faicon edit-vprasanje st-besede-popup blue"></span><span>'+lang['srv_concl_deactivation_text_edit']+'</span></h2>'+'<div class="popup_close"><a href="#" onclick="inline_jezik_reset(\''+id_value+'\');">✕</a></div>'+'<textarea name="popup_'+id_value+'" id="popup_'+id_value+'">'+id.val()+'</textarea>'+'<textarea name="old_val_'+id_value+'" style="visibility:hidden; display:none;">'+id.html()+'</textarea>'+'<div class="button_holder popup">'+'<button class="white-blue medium" onclick="vprasanje_jezik_reset_zakljucek(\''+id_value+'\');">'+lang['srv_zapri']+'</button>'+'<button class="blue medium" onclick="vprasanje_jezik_save_zakljucek(\''+id_value+'\');">'+lang['save']+'</button>'+'</div>');create_editor('popup_'+id_value);}
function vprasanje_jezik_reset_zakljucek(){$('#fade').fadeOut('slow');$('#vrednost_edit').hide().html();}
function vprasanje_jezik_save_zakljucek(id_value){$('#fade').fadeOut('slow');CKEDITOR.instances['popup_'+id_value].destroy();var value=$('#popup_'+id_value).val();$('#'+id_value).val(value);$('html, body').animate({scrollTop:$(document).height()},100,function(){vprasanje_save(true);});$('#vrednost_edit').hide().html();}
function prikaziGoogle2faKodo(){$('#2fa-display').toggle();}
function aktivirajGoogle2fa(){var koda=$('[name="google-2fa-validate"]').val();$.post('ajax.php?a=editanketasettings&m=global_user_myProfile',{'google_2fa_koda_validate':koda,}).success(function(response){if(response=='success'){window.location.reload();}else{$('#google-2fa-bvestilo').fadeIn('slow').show().delay(5000).fadeOut('slow');}});}
function ponastaviGoogle2fa(){$.post('ajax.php?a=editanketasettings&m=global_user_myProfile',{'google_2fa_akcija':'reset'}).success(function(response){if(response=='success'){window.location.reload();}else{$('#google-2fa-bvestilo').fadeIn('slow').show().delay(5000).fadeOut('slow');}});}
function prikaziGoogle2faDeaktivacija(){$('#2fa-display').toggle();}
function deaktivirajGoogle2fa(){var koda=$('[name="google-2fa-deactivate"]').val();$.post('ajax.php?a=editanketasettings&m=global_user_myProfile',{'google_2fa_deaktiviraj':koda,'google_2fa_akcija':'deactivate'}).success(function(response){if(response=='success'){window.location.reload();}else{$('#google-2fa-bvestilo').fadeIn('slow').show().delay(5000).fadeOut('slow');}});}
$(document).ready(function(){$('#klik-dodaj-email').on('click',function(){$('.dodaj-alternativni-email').toggle();});$('#novaanketa_naslov_1').keyup(function(){var max=parseInt($(this).attr('maxlength'));if($(this).val().length>max){$(this).val($(this).val().substr(0,$(this).attr('maxlength')));}
$('#'+$(this).attr('id')+'_chars').html($(this).val().length+' / '+max);check_akronim();});$('#novaanketa_akronim_1').keyup(function(){var max=parseInt($(this).attr('maxlength'));if($(this).val().length>max){$(this).val($(this).val().substr(0,$(this).attr('maxlength')));}
$('#'+$(this).attr('id')+'_chars').html($(this).val().length+' / '+max);});$("#novaanketa_naslov_1").focus();$("#novaanketa_opis").keypress(function(e){if(e.keyCode==13){return false;}});$('#novaanketa_akronim_1, #novaanketa_naslov_1').keypress(function(e){if(e.keyCode==13){newAnketaBlank();}
if(e.keyCode==27){window.onkeypress=function(){};newAnketaCancle();}});});function consultingPopupOpen(){$('#fade').fadeTo('slow',1);$('#general_popup').html('').fadeIn('slow');$("#general_popup").load('ajax.php?a=consulting_popup_open',{anketa:srv_meta_anketa_id});}
function removeUploadFromData(usr_id,spr_id,code){$("#fullscreen").load('ajax.php?t=postprocess&a=edit_data_question_upload_delete',{anketa:srv_meta_anketa_id,usr_id:usr_id,spr_id:spr_id,code:code});}
function CopyToClipboard(copyText){var temp_copy=$('<input>').val(copyText).appendTo('body').select()
document.execCommand('copy')
temp_copy.remove()}
function popupAlertAll(alert_type){$('#fade').fadeTo('slow',1);$('#general_popup').html('').addClass('PopUpNarrow').fadeIn('slow');$("#general_popup").load('ajax.php?a=alert_all_popup',{alert_type:alert_type,anketa:srv_meta_anketa_id});}
function genericAlertPopup(name,optional_parameter,class_string){if(optional_parameter===undefined){optional_parameter="";}
if(class_string!==undefined){$('#general_popup').addClass(class_string);}
$('#fade').fadeTo('slow',1);$('#general_popup').html('').fadeIn('slow');$("#general_popup").load('ajax.php?a=genericAlertPopup',{name:name,optional_parameter:optional_parameter});}
function toggleParapodatki(){var survey_ip=$('input[name=survey_ip]:checked').val();var survey_show_ip=$('input[name=survey_show_ip ]:checked').val();var show_email=$('input[name=show_email ]:checked').val();if(survey_ip=='0'){$("#save_IP_warning").removeClass('displayNone');$("#save_IP").removeClass('bottom0');$("#connect_IP").removeClass('displayNone');}
else{$("#save_IP_warning").addClass('displayNone');$("#save_IP").addClass('bottom0');$("#connect_IP").addClass('displayNone');}
if(survey_show_ip=='1')
$("#connect_IP_warning").removeClass('displayNone');else
$("#connect_IP_warning").addClass('displayNone');if(show_email=='1')
$("#connect_identifier_warning").removeClass('displayNone');else
$("#connect_identifier_warning").addClass('displayNone');}
function popupClose(){$('#general_popup').fadeOut('slow').html('').attr('class','divPopUp');$('#fade').fadeOut('slow');}
function actionNotePopup(name,type){let anketa=(typeof srv_meta_anketa_id!=='undefined')?srv_meta_anketa_id:'';$('#action_note_holder').html('').load('ajax.php?a=actionNotePopup',{anketa:anketa,name:name,type:type},function(){setTimeout(function(){actionNotePopupClose();},10000);});}
function actionNotePopupClose(){$('#action_note_holder .action_note_box').fadeOut(function(){$('#action_note_holder').html('');});}
function top_note_hide(id){$('#'+id).addClass('displayNone');}
function publishPopupOpen(name){$('#fade').fadeTo('slow',1);$('#general_popup').html('').fadeIn('slow');$("#general_popup").load('ajax.php?a=publish_popup_open',{anketa:srv_meta_anketa_id,name:name});}
function addPrettyURL(){$.post('ajax.php?a=nice_url_check',{anketa:srv_meta_anketa_id,nice_url:$('#nice_url').val()},function(response){console.log(response);if(response==""){$.redirect('ajax.php?a=nice_url',{anketa:srv_meta_anketa_id,nice_url:$('#nice_url').val()});}
else{$('#add_url_error').html(response).fadeIn('slow');}});return false;}
function toggleNiceURL(type){if(type=='show'){$("#nice_url_button").addClass('displayNone');$("#nice_url_holder").removeClass('displayNone');}
else if(type=='hide'){$("#nice_url_button").removeClass('displayNone');$("#nice_url_holder").addClass('displayNone');}}
function togglePublishSettings(){$("#srv_objava_info_more1, #srv_objava_info_more2").toggleClass("displayNone");$("#publish_settings_more").slideToggle('medium');}
function toggleAktivnostCheckboxes(type){if(type=='units'){$("#dataSettingsCheckboxes").fadeIn("medium");$("#dataSettingsCheckboxes").toggleClass("displayNone");$("#toggleDataCheckboxes").toggleClass("border_blue");}
else if(type=='date'){$("#dataSettingsCheckboxes_Date").fadeIn("medium");$("#dataSettingsCheckboxes_Date").toggleClass("displayNone");$("#toggleDataCheckboxes_Date").toggleClass("border_blue");}}
function toggleAddComment(box_id){var toggle='#comment_toggle_'+box_id;var wrapper='#comment_wrapper_'+box_id;$(toggle).toggle();$(wrapper).toggle();}
function closeCommentQtip(box_id){var content='#survey_comment_'+box_id;$(content).closest('.qtip ').qtip("hide");}
function toggleGrafiColorWheel(){$("#chart_custom_skin_cover").css("pointer-events","auto");}
function toggleSurveyTopSettings(){$("#top_napredne_gumb").toggleClass("border_blue");$("#top_napredne_dropdown").toggleClass("displayNone");}
function oneClickArchive(){$('#fade').fadeTo('slow',1);$('#general_popup').addClass('PopUpNarrow');$('#general_popup').html('').fadeIn('slow');$("#general_popup").load('ajax.php?a=oneClickArchive',{anketa:srv_meta_anketa_id});}
function show_gdpr_messeage(id_sporocila,anketa){$('#fade').fadeTo('slow',1);$('#general_popup').addClass('PopUpNarrow');$('#general_popup').html('hello').fadeIn('slow');$("#general_popup").load('ajax.php?a=show_gdpr_messeage',{id_sporocila:id_sporocila,anketa:anketa});}
function toggleAddUser(value){$('.add_user_option').addClass('displayNone');$("#add_user_option_"+value).removeClass('displayNone');}
function toggleAnketaOpomba(){$("#dodaj-opombo").toggleClass('displayNone');}
function toggleAnketaMapa(){$("#dodaj-v-mapo").toggleClass('displayNone');$("#anketa-toggle").toggleClass('bottom0');}
function download_file(url){const a=document.createElement('a')
a.href=url
a.download=url.split('/').pop()
document.body.appendChild(a)
a.click()
document.body.removeChild(a)}
$(function(){$(window).on("scroll",{passive:true},function(){var header=$(".desktop_header");var top_center_settings=$("#branching .top_center_settings");var scroll=$(window).scrollTop();if(scroll>190){top_center_settings.addClass("top_sticky");header.addClass("shrink_header");}
else if(0<scroll&&scroll<=190){header.addClass("shrink_header");top_center_settings.removeClass("top_sticky");}
else if(scroll>0){header.addClass("shrink_header");}
else{header.removeClass("shrink_header");top_center_settings.removeClass("top_sticky");}});});;function mobile_init(){var zeynep=$('.mobile_menu').zeynep({opened:function(){},closed:function(){}})
zeynep.on('closing',function(){})
$('.mobile_menu_close').on('click',function(){$('#fade').fadeOut();mobile_menu_close(zeynep);})
$('.mobile_menu_open').on('click',function(){if($('#fade').is(':hidden')){$('#fade').fadeIn();}
else{mobile_settings_close(zeynep);}
mobile_menu_open(zeynep);})
$('.mobile_settings_close').on('click',function(){$('#fade').fadeOut();mobile_settings_close(zeynep);})
$('.mobile_settings_open').on('click',function(){if($('#fade').is(':hidden')){$('#fade').fadeIn();}
else{mobile_menu_close(zeynep);}
mobile_settings_open(zeynep);})}
function mobile_menu_open(zeynep){zeynep.open();$('.mobile_menu_open').fadeOut('fast',function(){$('.mobile_menu_close').fadeIn('fast');});}
function mobile_menu_close(zeynep){zeynep.close();$('.mobile_menu_close').fadeOut('fast',function(){$('.mobile_menu_open').fadeIn('fast');});}
function mobile_settings_open(){$('.mobile_settings').animate({"margin-right":'+=85vw'},200,'linear');$('.mobile_settings_open').fadeOut('fast',function(){$('.mobile_settings_close').fadeIn('fast');});}
function mobile_settings_close(callback){$('.mobile_settings').animate({"margin-right":'-85vw'},200,'linear');$('.mobile_settings_close').fadeOut('fast',function(){$('.mobile_settings_open').fadeIn('fast');});if(typeof callback=="function")
callback();}
function mobile_add_question_popup(){$('.mobile_add_question_popup').fadeIn();}
function mobile_add_question_popup_close(){$('.mobile_add_question_popup').fadeOut();}
function mobile_add_question(tip){mobile_add_question_popup_close();$.post('ajax.php?t=branching&a=spremenljivka_new',{spremenljivka:0,'if':0,endif:1,copy:0,tip:tip,podtip:0,anketa:srv_meta_anketa_id},function(data){if(!data)return;refreshLeft(data.nova_spremenljivka_id,function(){$("html, body").animate({scrollTop:$('#spremenljivka_content_'+data.nova_spremenljivka_id).offset().top-100},1000);});},'json');};var sidebar=1;var collapsed_content=1;var srv_meta_anketa_id=$("#srv_meta_anketa").val();var srv_meta_podstran=$("#srv_meta_podstran").val();var srv_meta_grupa=$("#srv_meta_grupa").val();var srv_meta_branching=$("#srv_meta_branching").val();var srv_meta_full_screen_edit=($("#srv_meta_full_screen_edit").val()==1?true:false);var _edit_fullscreen=true;var cond_focus_field;var currentFocus=null;var popup=true;var locked=false;var slider_prevod_min=0;var slider_prevod_max=0;var slider_prevod_def=0;var slider_prevod_slider_handle=0;var slider_prevod_slider_handle_step=0;var slider_prevod_vmesne_labels=0;var slider_prevod_vmesne_Crtice=0;var slider_prevod_slider_MinMaxNumLabelNew=0;var slider_prevod_slider_window_number=0;var slider_prevod_vmesne_descr_labele=0;var slider_prevod_tip_vmesne_descr_labele=0;var slider_prevod_nakazi_odgovore=0;var slider_prevod_minTemp=0;var slider_prevod_maxTemp=0;var slider_prevod_slider_VmesneDescrLabel=0;function onload_init_branching(){if(locked){$('#branching ul.first.locked').bind('click',function(event){if($("#prevent_unlock").val()==1){genericAlertPopup('srv_unlock_popup3');}
else{genericAlertPopup('srv_unlock_popup2');}});return;}
branching_struktura();$("body").ajaxStop(function(){branching_struktura();});$('#branching').bind('click',function(event){branching_click(event);});$('#branching').bind('mouseover',function(event){branching_mouseover(event);});$('li.if, li.endif, li.block, li.endblock, li.loop, li.endloop').bind({mouseover:function(event){branching_if_mouseover(event);},mouseleave:function(event){branching_if_mouseleave(event);}});$('div[contenteditable=true]').on('paste',function(e){e.preventDefault();var text=e.originalEvent.clipboardData.getData('text/plain');if(document.queryCommandSupported('insertText')){console.log('xxx'+text);document.execCommand('insertText',false,text);}
else{console.log('aaaa'+text);const range=document.getSelection().getRangeAt(0);range.deleteContents();const textNode=document.createTextNode(text);range.insertNode(textNode);range.selectNodeContents(textNode);range.collapse(false);const selection=window.getSelection();selection.removeAllRanges();selection.addRange(range);}});}
function branching_click(event){var ta=$(event.target);var td;if(ta.is('a.surveycomment')){return false;}
if(ta.is('div.spr_edit a.hide')){var id=ta.parent().attr('id');id=id.replace('edit_','');introconcl_visible(id);return false;}
if(ta.is('div.spr_edit .scale_ordnom button:not(.active)')){var id=ta.parent().parent().attr('id');id=id.replace('edit_','');value=ta.parent().parent().parent().find('.spremenljivka_content').attr('skala');if(value==0||value==-1)value=1;else value=0;scale_ordnom(id,value);return false;}
if(ta.is('div.spr_edit a.copy')){if(ta.hasClass("user_access_locked")){if($('#branching').hasClass('collapsed'))
var tip=ta.closest('li.spr, li.if, li.block, li.loop').attr('tip');else
var tip=ta.closest('li.spr, li.if, li.block, li.loop').find('div.spremenljivka_content').attr('tip');if(tip=='22'||tip=='25')
popupUserAccess('question_type_calculation');else if(tip=='21')
popupUserAccess('question_type_signature');else
popupUserAccess('if');}
else{var id=ta.parent().attr('id');id=id.replace('edit_','');spremenljivka_new(id,0,0,id);}
return false;}
if(ta.is('div.spr_edit a.monitor')){var id=ta.parent().attr('id');id=id.replace('edit_','');preview_spremenljivka(id);return false;}
if(ta.is('div.spr_edit a.addif')){if(ta.hasClass("user_access_locked")){popupUserAccess('if');}
else{var id=ta.parent().attr('id');id=id.replace('edit_','');if_new(id,'0',1,'0');}
return false;}
if(ta.is('div.spr_edit a.arhiv')){var id=ta.parent().attr('id');id=id.replace('edit_','');vprasanje_track(id);return false;}
if(ta.is('div.spr_edit a.delete')){var id=ta.parent().attr('id');id=id.replace('edit_','');brisi_spremenljivko(id,lang['srv_brisispremenljivkoconfirm'],'0');return false;}
if(ta.is('div.if_remove a.copy')){if(ta.hasClass("user_access_locked")){popupUserAccess('if');}
else{var id=ta.parent().attr('id');id=id.replace('edit_if_','');if_new(0,id,1,0,id);}
return false;}
if(ta.is('div.if_remove a.copycond')){if(ta.hasClass("user_access_locked")){popupUserAccess('if');}
else{var id=ta.parent().attr('id');id=id.replace('edit_if_','');if_new(0,id,1,0,id,1);}
return false;}
if(ta.is('div.if_remove a.delete')){var id=ta.parent().attr('id');id=id.replace('edit_if_','');if_remove(id);return false;}
if(ta.is('div.if_remove a.delete_all')){var id=ta.parent().attr('id');id=id.replace('edit_if_','');if_remove(id,1);return false;}
if(ta.is('span.pm')){var id=ta.parent().attr('id');id=id.replace('branching_if','');plusminus(id);return false;}
td=$(event.target).closest('li.if span.conditions_display, a.edit');td=td.closest('.if');if(td.hasClass('if')){td.removeClass('if_hovering');td.next().removeClass('if_hovering');var id=td.attr('id');id=id.replace('branching_if','');if($('#branching_if'+id).hasClass('if_editing')){condition_editing_close(id);return false;}
condition_editing(id,1);return false;}
td=$(event.target).closest('li.block span.conditions_display, a.edit');td=td.closest('.block');if(td.hasClass('block')){td.removeClass('if_hovering');td.next().removeClass('if_hovering');var id=td.attr('id');id=id.replace('branching_if','');if($('#branching_if'+id).hasClass('if_editing')){condition_editing_close(id);return false;}
condition_editing(id);return false;}
td=$(event.target).closest('li.loop span.conditions_display, a.edit');td=td.closest('.loop');if(td.hasClass('loop')){td.removeClass('if_hovering');td.next().removeClass('if_hovering');var id=td.attr('id');id=id.replace('branching_if','');if($('#branching_if'+id).hasClass('if_editing')){condition_editing_close(id);return false;}
condition_editing(id);return false;}
if($('#branching').hasClass('collapsed')){td=$(event.target).closest('li.spr');if(td.hasClass('spr')&&!td.hasClass('spr_editing')){var id=td.attr('id');id=id.replace('branching_','');if(td.hasClass('calculation'))
calculation_editing(-id);else if(td.hasClass('quota'))
quota_editing(-id);else
vprasanje_fullscreen(id);return false;}}else{td=$(event.target).closest('div.movable');if(td.hasClass('movable')){td=td.parent().parent();var id=td.attr('id');id=id.replace('branching_','');if(td.hasClass('calculation'))
calculation_editing(-id);else if(td.hasClass('quota'))
quota_editing(-id);else
vprasanje_fullscreen(id);return false;}
if(ta.is('div.spr_edit .edit')){var id=ta.closest('li.spr').attr('id');id=id.replace('branching_','');if(td.hasClass('calculation'))
calculation_editing(-id);else if(td.hasClass('quota'))
quota_editing(-id);else
vprasanje_fullscreen(id);return false;}}
td=$(event.target).closest('li.drop > div, li.nodrop > div');if(td.hasClass('pb_new')||td.hasClass('pb_on')){if(!td.hasClass('permanent')){var spr;if(td.parent().attr('spr_pb'))
spr=td.parent().attr('spr_pb');else
spr=td.parent().attr('spr');pagebreak(spr);}
return false;}
inline_bind_click(event);return false;}
function branching_mouseover(event){var ta=$(event.target);var movable=ta.closest('li.spr, li.if, li.block, li.endif, li.endblock, li.loop, li.endloop');if(movable.attr('id')){spr_id=movable.attr('id').replace('branching_','');if($('#spremenljivka_content_'+spr_id).hasClass('question_locked'))
return;}
if(movable.length>0){if(!movable.hasClass('ui-draggable')&&movable.attr('id')!='-1'&&movable.attr('id')!='-2'){movable.draggable({revert:'invalid',distance:5,opacity:0.5,handle:'.movable',start:function(e,ui){_moved=1;if(movable.hasClass('if')||movable.hasClass('block')||movable.hasClass('loop')){var id=movable.attr('id').replace('branching_if','');$('#if_'+id).css('visibility','hidden');}},stop:function(e,ui){if(movable.hasClass('if')||movable.hasClass('block')||movable.hasClass('loop')){var id=movable.attr('id').replace('branching_if','');$('#if_'+id).css('visibility','visible');}}});}
var branchborder=ta.closest('li.spr, li.if, li.block, li.loop');if(branchborder.length>0){var edit=branchborder.attr('id');if(edit!=undefined){edit=edit.replace('branching_','');if(edit>0){if(branchborder.find('div.spr_edit').length==0){var html_snippet;var tip=branchborder.find('div.spremenljivka_content').attr('tip');var scale_string='';if(tip==1||tip==3||tip==6){var scale=0;if(branchborder.find('div.spremenljivka_content').attr('skala')==1)
scale=1;if(scale==1){scale_string='<div class="scale_ordnom"><button class="small">'+lang['srv_skala_0']+'</button>'+'<button class="small active">'+lang['srv_skala_1']+'</button></div>';}
else{scale_string='<div class="scale_ordnom"><button class="small active">'+lang['srv_skala_0']+'</button>'+'<button class="small">'+lang['srv_skala_1']+'</button></div>';}}
html_snippet='<div class="spr_edit" id="edit_'+edit+'">'+
scale_string+'<a title="'+lang['srv_editirajspremenljivko']+'" class="edit faicon"></a>';if($('#branching').hasClass('branching_glasovanje')){}
else if($('#commercial_package').attr('value')=='1'){html_snippet=html_snippet+'<a title="'+lang['srv_if_new_question']+'" class="addif faicon user_access_locked"></a>';}
else{html_snippet=html_snippet+'<a title="'+lang['srv_if_new_question']+'" class="addif faicon"></a>';}
if($('#editing_mode').attr('value')=='1'){var signature=0;if(branchborder.find('div.spremenljivka_content').attr('signature')==1)
signature=1;if($('#branching').hasClass('collapsed')){tip=branchborder.attr('tip');if(branchborder.attr('signature')==1)
signature=1;}
if($('#branching').hasClass('branching_glasovanje')){}
else if(($('#commercial_package').attr('value')=='1'&&['17','18','24','26','27'].includes(tip))||(($('#commercial_package').attr('value')=='1'||$('#commercial_package').attr('value')=='2')&&['22','25'].includes(tip))||(($('#commercial_package').attr('value')=='1'||$('#commercial_package').attr('value')=='2')&&['21'].includes(tip)&&signature==1)){html_snippet=html_snippet+'<a title="'+lang['srv_copy_spr']+'" class="copy faicon user_access_locked"></a>';}
else{html_snippet=html_snippet+'<a title="'+lang['srv_copy_spr']+'" class="copy faicon"></a>';}
if(!['22','25'].includes(tip)){html_snippet=html_snippet+'<a title="'+lang['srv_predogled_spremenljivka']+'" class="monitor faicon"></a>';}}
if(vprasanje_tracking==2)
html_snippet+='<a title="'+lang['srv_analiza_arhiviraj']+'" class="arhiv faicon"></a>';if(!$('#branching').hasClass('branching_glasovanje')){html_snippet+='<a title="'+lang['srv_brisispremenljivko']+'" class="delete faicon"></a>'+'</div>';}
branchborder.prepend(html_snippet);}}else if(edit<0){if(branchborder.find('div.spr_edit').length==0){var html_snippet;var hidden=0;if(branchborder.find('div.spremenljivka_content').hasClass('spremenljivka_hidden'))
hidden=1;html_snippet='<div class="spr_edit" id="edit_'+edit+'">'+'<a title="'+(hidden==1?lang['edit_show']:lang['edit_hide'])+'" class="hide faicon '+(hidden==1?'unhide_icon':'hide_icon')+'"></a>'+'<a title="'+(edit==-1?lang['srv_editirajuvod']:lang['srv_editirajzakljucek'])+'" class="faicon edit"></a>'+'<a title="'+lang['srv_predogled_spremenljivka']+'" class="monitor faicon"></a>'+'</div>';branchborder.prepend(html_snippet);}}else if(edit.replace('if','')>0){edit=edit.replace('if','');if(branchborder.find('div.if_remove').length==0){var html_snippet;html_snippet='<div class="if_remove" id=edit_if_'+edit+'>'+'<a title="'+(branchborder.hasClass('if')?lang['srv_if_edit']:(branchborder.hasClass('block')?lang['srv_block_edit']:lang['srv_loop_edit']))+'" class="edit faicon"></a>';if(branchborder.hasClass('if')){if($('#commercial_package').attr('value')=='1'){html_snippet=html_snippet+'<a title="'+(branchborder.hasClass('if')?lang['srv_copy_ifcond']:lang['srv_copy_block'])+'" class="copycond faicon user_access_locked"></a>';}
else{html_snippet=html_snippet+'<a title="'+(branchborder.hasClass('if')?lang['srv_copy_ifcond']:lang['srv_copy_block'])+'" class="copycond faicon"></a>';}}
if($('#commercial_package').attr('value')=='1'){html_snippet=html_snippet+'<a title="'+(branchborder.hasClass('if')?lang['srv_copy_if']:(branchborder.hasClass('block')?lang['srv_copy_block']:lang['srv_copy_loop']))+'" class="copy faicon user_access_locked"></a>';}
else{html_snippet=html_snippet+'<a title="'+(branchborder.hasClass('if')?lang['srv_copy_if']:(branchborder.hasClass('block')?lang['srv_copy_block']:lang['srv_copy_loop']))+'" class="copy faicon"></a>';}
html_snippet=html_snippet+'<a title="'+(branchborder.hasClass('if')?lang['srv_if_rem']:(branchborder.hasClass('block')?lang['srv_block_rem']:lang['srv_loop_rem']))+'" class="delete faicon"></a>'+'</div>';branchborder.prepend(html_snippet);}}}}}}
function branching_if_mouseover(event){var ta=$(event.target);var movable=ta.closest('li.if, li.block, li.endif, li.endblock, li.loop, li.endloop');if(movable.hasClass('if_editing')){return;}
if(movable.hasClass('endif')||movable.hasClass('endblock')||movable.hasClass('endloop')){movable.parent().addClass('if_hovering');movable.parent().prev().addClass('if_hovering');}
else{movable.addClass('if_hovering');movable.next().addClass('if_hovering');}}
function branching_if_mouseleave(event){var ta=$(event.target);var movable=ta.closest('li.if, li.block, li.endif, li.endblock, li.loop, li.endloop');if(movable.hasClass('endif')||movable.hasClass('endblock')||movable.hasClass('endloop')){movable.parent().removeClass('if_hovering');movable.parent().prev().removeClass('if_hovering');}
else{movable.removeClass('if_hovering');movable.next().removeClass('if_hovering');}}
function branching_struktura(){$('li.drop',$('#branching')).droppable({accept:'.spr, .if, .block, .endif, .endblock, .new_spr, .new_if, .new_block, .new_loop, .new_pb, .loop, .endloop',hoverClass:'branchinghover',tolerance:'pointer',drop:function(e,ui){if($(ui.draggable).hasClass('new_spr')){var spr=$(this).attr('spr');var _if=$(this).attr('if');var endif=$(this).attr('endif');var tip=$(ui.draggable).attr('tip');var podtip=0;if($(ui.draggable).hasClass('podtip'))podtip=$(ui.draggable).attr('podtip');var drop=$(this).attr('drop');var copy=($(ui.draggable).attr('copy')!=''?$(ui.draggable).attr('copy'):0);if(tip==9){SN_generator_new(spr,0);}
else{spremenljivka_new(spr,_if,endif,copy,tip,podtip,drop);}}else if($(ui.draggable).hasClass('new_if')){var spr=$(this).attr('spr');var _if=$(this).attr('if');var endif=$(this).attr('endif');var copy=($(ui.draggable).attr('copy')!=''?$(ui.draggable).attr('copy'):0);if_new(spr,_if,endif,'0',copy);}else if($(ui.draggable).hasClass('new_block')){var spr=$(this).attr('spr');var _if=$(this).attr('if');var endif=$(this).attr('endif');var copy=($(ui.draggable).attr('copy')!=''?$(ui.draggable).attr('copy'):0);if_new(spr,_if,endif,'1',copy);}else if($(ui.draggable).hasClass('new_loop')){var spr=$(this).attr('spr');var _if=$(this).attr('if');var endif=$(this).attr('endif');var copy=($(ui.draggable).attr('copy')!=''?$(ui.draggable).attr('copy'):0);if_new(spr,_if,endif,'2',copy);}else if($(ui.draggable).hasClass('new_pb')){var spr=$(this).attr('spr');pagebreak(spr);}else{accept_droppable($(ui.draggable).attr('id'),$(this).attr('id'));}}});load_help();}
var is_new_spr_dragable=false;function init_toolbox(){$('.new_spr:not(.user_access_locked), .new_if:not(.user_access_locked), .new_block:not(.user_access_locked), .new_loop:not(.user_access_locked), .new_pb','#toolbox_basic').draggable({start:function(e,ui){is_new_spr_dragable=true;$('#toolbox_add_advanced').addClass('dragging');$(ui.helper).addClass("clone-dragging");},stop:function(e,ui){is_new_spr_dragable=false;$('#toolbox_add_advanced').removeClass('dragging');$(ui.helper).removeClass("clone-dragging");},revert:false,helper:'clone',opacity:0.9,appendTo:'body',distance:5,cursor:'pointer'}).bind('click',function(event){var ta=$(event.target);ta=$(ta).closest('.new_spr, .new_if, .new_block, .new_loop');if(ta.hasClass('new_spr')){var tip=ta.attr('tip');var podtip=0;if(ta.hasClass('podtip'))
podtip=ta.attr('podtip');if(tip=='9_sn'){SN_generator_new(0,1);}
else{spremenljivka_new(0,0,1,0,tip,podtip);}}
else if(ta.hasClass('new_if')){$('html, body').animate({scrollTop:$('body').height()+$('#branching').height()});if_new(0,0,1,0);}
else if(ta.hasClass('new_block')){$('html, body').animate({scrollTop:$('body').height()+$('#branching').height()});if_new(0,0,1,1);}
else if(ta.hasClass('new_loop')){$('html, body').animate({scrollTop:$('body').height()+$('#branching').height()});if_new(0,0,1,2);}
$('#toolbox_add_advanced').addClass('dragging');setTimeout(function(){$('#toolbox_add_advanced').removeClass('dragging');},500);event.stopPropagation();});$('#toolbox_basic').bind('mouseover',function(event){var tip=$(event.target).closest('.new_spr, .new_adv, .new_if, .new_block, .new_loop, .new_sn');if(tip.hasClass('adv')){if(tip.hasClass('podtip')){show_tip_preview_subtype(-1,tip.attr('podtip'),tip.attr('tip'));}
else if(tip.hasClass('new_sn')){show_tip_preview_toolbox(tip.attr('tip'),0,1);}
else if(tip.hasClass('new_spr')){show_tip_preview_toolbox(tip.attr('tip'),0,1);}}
else if(tip.hasClass('new_spr')&&!is_new_spr_dragable){var podtip=tip.attr('podtip');show_tip_preview_toolbox(tip.attr('tip'),undefined,undefined,podtip);}
else if(tip.hasClass('new_if')||tip.hasClass('new_block')||tip.hasClass('new_loop')){show_tip_preview_toolbox(tip.attr('tip'));}
else if(tip.hasClass('new_adv')){}}).bind('mouseout',function(event){$("#tip_preview").hide();});}
function toolbox_add_advanced_popup(){$('#fade').fadeTo('slow',1);$('#fullscreen').show().load('ajax.php?t=branching&a=toolbox_add_advanced',{anketa:srv_meta_anketa_id},function(){$('#toolbox_add_advanced_popup .new_spr:not(.user_access_locked), #toolbox_add_advanced_popup  .new_if:not(.user_access_locked), #toolbox_add_advanced_popup  .new_block:not(.user_access_locked), #toolbox_add_advanced_popup  .new_loop:not(.user_access_locked)').click(function(){var ta=$(event.target);if(ta.hasClass('new_spr')){var tip=ta.attr('tip');var podtip=0;if(ta.hasClass('podtip'))
podtip=ta.attr('podtip');if(tip=='9_sn'){SN_generator_new(0,1);}
else{spremenljivka_new(0,0,1,0,tip,podtip);}}
else if(ta.hasClass('new_if')){$('html, body').animate({scrollTop:$('body').height()+$('#branching').height()});if_new(0,0,1,0);}
else if(ta.hasClass('new_block')){$('html, body').animate({scrollTop:$('body').height()+$('#branching').height()});if_new(0,0,1,1);}
else if(ta.hasClass('new_loop')){$('html, body').animate({scrollTop:$('body').height()+$('#branching').height()});if_new(0,0,1,2);}});});}
function change_mode(what,value){$.post('ajax.php?t=branching&a=change_mode',{anketa:srv_meta_anketa_id,what:what,value:value},function(){window.location.reload();});}
function change_form_quicksettings(){$('#form_settings_obvescanje').slideToggle();$('#obvescanje_switch').toggleClass("arrow2_d").toggleClass("arrow2_u");vprasanje_save();}
function toolbox_advanced(checked){if(checked)
var mode=2;else
var mode=1;change_mode('toolbox',mode);}
function if_new(spremenljivka,_if,endif,tip,copy=0,no_content=0,follow_up=0){close_all_editing();$('#branching').load('ajax.php?t=branching&a=if_new',{spremenljivka:spremenljivka,'if':_if,endif:endif,tip:tip,copy:copy,no_content:no_content,anketa:srv_meta_anketa_id},function(){$('#clipboard').fadeOut();if((popup||$('#vprasanje').css('display')=='block')&&!(copy>0)){var new_if_id=$('#temp_new_if_id').val();if(follow_up>0&&follow_up!=null){spremenljivka_new(spremenljivka,new_if_id,0,0,1,0,0);$.post('ajax.php?t=branching&a=follow_up_condition',{ank_id:srv_meta_anketa_id,if_id:new_if_id,odg_id:follow_up,spr_id:spremenljivka});condition_editing_close(new_if_id);}
if(true||tip==0||tip==2){condition_editing(new_if_id);}}
else{actionNotePopup('condition_copy','success');}});}
function spremenljivka_new(spremenljivka,_if,endif,copy,tip,podtip,drop){$("#tip_preview").hide();$('#fade').fadeOut('slow');$.post('ajax.php?t=branching&a=spremenljivka_new',{spremenljivka:spremenljivka,'if':_if,endif:endif,copy:copy,drop:drop,tip:tip,podtip:podtip,anketa:srv_meta_anketa_id},function(data){if(!data)return;if(popup&&!(copy>0)){if(tip==22)
calculation_editing(-data.nova_spremenljivka_id,1);else if(tip==25)
quota_editing(-data.nova_spremenljivka_id,1);else{$('#branching').html(data.branching_struktura);vprasanje_fullscreen(data.nova_spremenljivka_id,data.vprasanje_fullscreen);$('.naslov_inline[spr_id="'+data.nova_spremenljivka_id+'"]').focus();}}
else{refreshLeft(data.nova_spremenljivka_id);actionNotePopup('question_copy','success');}
if((tip==6||tip==16)&&podtip==3){vprasanje_save(true);}
alert_block();},'json');}
function close_all_editing(spremenljivka){if(spremenljivka==undefined){$('div[contenteditable=true]:focus').blur();if($('li.spr_editing').length>0){vprasanje_save();}}else{if($('li.spr_editing').not('#branching_'+spremenljivka).not('#'+spremenljivka).length>0){vprasanje_save();}}
if($('li.if_editing').length>0){var if_id=$('li.if_editing').attr('id');if_id=if_id.replace('branching_if','');condition_editing_close(if_id);}}
function if_remove(_if,all,confirmed){var besedilo=null;if($("#branching_if"+_if).hasClass('if'))
(all==1)?besedilo=lang['srv_brisiifconfirm_all']:besedilo=lang['srv_brisiifconfirm'];if($("#branching_if"+_if).hasClass('block'))
(all==1)?besedilo=lang['srv_brisiblockconfirm_all']:besedilo=lang['srv_brisiblockconfirm'];if($("#branching_if"+_if).hasClass('loop'))
(all==1)?besedilo=lang['srv_brisiloopconfirm_all']:besedilo=lang['srv_brisiloopconfirm'];if(confirmed==undefined)confirmed=1;if(confirmed==1&&all==1){close_all_editing();$.post('ajax.php?t=branching&a=if_remove',{'if':_if,all:all,anketa:srv_meta_anketa_id,confirmed:confirmed},function(data){$('#branching').html(data);});$('#div_condition_editing').hide();}
else if(confirm(besedilo)){$.post('ajax.php?t=branching&a=if_remove',{'if':_if,all:all,anketa:srv_meta_anketa_id,confirmed:confirmed},function(data){if(data.substring(0,3)==='<p>'||data.substring(0,4)==='<h2>'){$('#fade').fadeIn("fast");$('#dropped_alert').html(data).fadeIn("fast").css('width','600px');}
else{$('#branching').html(data);}});$('#div_condition_editing').hide();}}
function vrednost_if_remove(_if,vrednost){if(confirm(lang['srv_brisiifconfirm'])){$.post('ajax.php?t=branching&a=vrednost_if_remove',{'if':_if,vrednost:vrednost,anketa:srv_meta_anketa_id});$('#div_condition_editing').hide();$('#fade').fadeOut('slow');var p=$('#variabla_'+vrednost);p.find('#if_notranji_'+vrednost).hide();p.find('span.error').remove();p.find('span.red').hide();}}
function if_tip(_if,tip){$('#div_condition_editing').load('ajax.php?t=branching&a=if_tip',{'if':_if,anketa:srv_meta_anketa_id,tip:tip});}
function hidden_answer(odg,odg_id){$.ajax({type:'POST',url:'ajax.php?t=branching&a=hidden_answer',data:{odgovor:odg,id:odg_id},success:function(data){var i=$('[odg_id="'+odg_id+'"]');i.attr('odg_vre',data);if(data==0)
i.removeClass('show-hidden show-disable');if(data==1)
i.addClass('show-hidden');if(data==2){i.removeClass('show-hidden');i.addClass('show-disable');}
i.attr('title',lang['srv_hide-disable_answer-'+data]);return false;}});}
function correct_answer(spr_id,vre_id){if($('#variabla_'+vre_id+' .correct').hasClass('show-correct')){var action='delete';}
else{var action='add';}
$.post('ajax.php?t=branching&a=correct_answer',{spr_id:spr_id,vre_id:vre_id,action:action,anketa:srv_meta_anketa_id},function(){if(action=='delete'){$('#variabla_'+vre_id+' .correct').removeClass('show-correct');if($('#branching_'+spr_id).hasClass('spr_editing')){if($('#variabla_'+vre_id+' .correct').hasClass('kviz-editing-correct')){$('#variabla_'+vre_id+' .correct').removeClass('kviz-editing-correct');}}}
else{$('#variabla_'+vre_id+' .correct').addClass('show-correct');if($('#branching_'+spr_id).hasClass('spr_editing')){if($('#variabla_'+vre_id+' .correct').hasClass('kviz-editing-correct')){}else{$('#variabla_'+vre_id+' .correct').addClass('kviz-editing-correct');}}}});}
function vrednost_condition_editing(vrednost){close_all_editing();if($('#commercial_package').attr('value')=='1'){popupUserAccess('if');return false;}
$('#fade').fadeTo('slow',1);$('#div_condition_editing').html('');$('#div_condition_editing').fadeIn("slow");$('#div_condition_editing').load('ajax.php?t=branching&a=vrednost_condition_editing',{'vrednost':vrednost,'anketa':srv_meta_anketa_id});}
function condition_editing(_if,odpreminus){close_all_editing();$('li#branching_if'+_if).addClass('if_editing');$('ul#if_'+_if).addClass('if_editing');$('#branching_if'+_if+' .if_content').load('ajax.php?t=branching&a=condition_editing',{'if':_if,anketa:srv_meta_anketa_id},function(){$('.condition_editing_body').hide().slideDown();$('#branching_endif'+_if).addClass('endif_editing');var z=parseInt($('#branching_endif'+_if).css('padding-left'));var zamik=z+8;var sirina=zamik;if(z==0){sirina=15;}
$('#zacetni_oklepaj_'+_if).css({'margin-left':'-'+zamik+'px','width':sirina+'px'}).show();if(odpreminus==1)
plusminus(_if,1);return false;});}
function data_condition_editing(_if){$('#div_cp_preview').load('ajax.php?t=branching&a=data_condition_editing',{'if':_if,anketa:srv_meta_anketa_id},function(){return false;});}
function condition_editing_close(_if,if_nova){$('.condition_editing_body').slideUp();$('#branching_endif'+_if).removeClass('endif_editing');$('#branching_if'+_if).removeClass('if_editing');$('ul#if_'+_if).removeClass('if_editing');var plus=0;if($('#branching_if'+_if+' span.pm').hasClass('plus'))
plus=1;$.post('ajax.php?t=branching&a=condition_editing_close',{anketa:srv_meta_anketa_id,'if':_if,if_nova:if_nova},function(data){if(plus==1)
$('#branching_if'+_if).html('<span class="pm faicon plus"></span>'+data);else
$('#branching_if'+_if).html('<span class="pm faicon minus"></span>'+data);if($('#vprasanje').css('display')=='block'){$('#if_preview').html(data);$('#if_preview_link').html('<a href="" onclick="condition_editing(\''+_if+'\'); return false;">'+lang['srv_if_edit']+'</a>');}else if($('#div_condition_profiles').css('display')=='block'){var pid=$("#condition_profile .active").attr('value');$("#div_condition_profiles").load('ajax.php?t=conditionProfile&a=show_condition_profile',{anketa:srv_meta_anketa_id,pid:pid,meta_akcija:srv_meta_akcija,podstran:srv_meta_podstran});}else{$('#fade').fadeOut('slow');}});}
function load_if_notranji_data(vrednost,srv_meta_anketa_id,_if,tab){if(tab!=0){var s=tab;var g=1;}
else{var s=$('#if_notranji_'+vrednost);var g=0;}
s.load('ajax.php?t=branching&a=vrednost_condition_editing_close',{anketa:srv_meta_anketa_id,'if':_if,'vrednost':vrednost,'grid':g});}
function vrednost_condition_editing_close_save(vrednost,_if){$('#fade').fadeOut('slow');document.getElementById('div_condition_editing').style.display="none";var ifNotranji=$('#if_notranji_'+vrednost);var v=$('#variabla_'+vrednost);var tab=0;v.find('span.error').remove();if(ifNotranji.length){v.find('#if_notranji_'+vrednost).show();v.find('span.red').show();load_if_notranji_data(vrednost,srv_meta_anketa_id,_if,tab);}
if(v.is('tr')&&v.find('td.grid_question span.red').length>0){var tab=$('#variabla_'+vrednost).find('td.grid_question span.red');v.find('span.red').show();load_if_notranji_data(vrednost,srv_meta_anketa_id,_if,tab);}
else{if(v.is('div')){v.append('<span style="cursor:pointer" id="if_notranji_'+vrednost+'" onclick="vrednost_condition_editing(\''+vrednost+'\'); return false;" title="'+lang['srv_podif_edit']+'">');}
if(v.is('tr')){v.find('td.grid_question').closest('td').append('<span class="red" style="cursor:pointer" onclick="vrednost_condition_editing(\''+vrednost+'\'); return false;" title="'+lang['srv_podif_edit']+'">*</span>');var tab=$('#variabla_'+vrednost).find('td.grid_question span.red');}
load_if_notranji_data(vrednost,srv_meta_anketa_id,_if,tab);}}
function vrednost_condition_editing_close(){$('#fade').fadeOut('slow');document.getElementById('div_condition_editing').style.display="none";}
function condition_add(_if,conjunction,negation,vrednost){$('#div_condition_editing_inner').load('ajax.php?t=branching&a=condition_add',{'if':_if,'conjunction':conjunction,'negation':negation,'vrednost':vrednost,'noupdate':__vnosi+__analiza,'anketa':srv_meta_anketa_id},function(){$(".condition_editing_body").animate({scrollTop:$('.condition_editing_body').prop("scrollHeight")},1000);});}
function condition_sort(_if){$('#div_condition_editing_inner').load('ajax.php?t=branching&a=condition_sort',{'if':_if,sortable:$('#div_condition_editing_inner').sortable('serialize'),anketa:srv_meta_anketa_id},function(){$('#div_condition_editing_inner').resize();});}
function condition_edit(condition){var vrednost=new Array();var sel=document.getElementById('vrednost_'+condition);var i;var count=0;var text='';var ostanek=0;var tip=document.getElementById('tip_'+condition).value;if(tip==4||tip==21||tip==7||tip==8||tip==22||tip==25||tip==19||tip==20||tip==18){text=document.getElementById('text_'+condition).value;}else if(tip==-1){var ost_id=document.getElementById('ostanek_'+condition);ostanek=ost_id.options[ost_id.selectedIndex].value;}else if(tip==-2){text=document.getElementById('text_'+condition).value;}else if(tip==-3){text=document.getElementById('text_'+condition).value;}else if(tip==-4){text=document.getElementById('text_'+condition).value;}else{sel=document.getElementsByName('vrednost_'+condition);for(i=0;i<sel.length;i++){if(sel[i].checked){vrednost[count]=sel[i].value;count++;}}}
var spr_id=document.getElementById('spremenljivka_'+condition);var spremenljivka=spr_id.options[spr_id.selectedIndex].value;var conj=document.getElementById('conjunction_'+condition).value.split('_');var conjunction=conj[0];var negation=conj[1];var opr_id=document.getElementById('operator_'+condition);var operator=0;if(tip>=0||tip==-2||tip==-3)
operator=opr_id.options[opr_id.selectedIndex].value;$('#div_condition_editing_conditions').load('ajax.php?t=branching&a=condition_edit',{text:text,operator:operator,negation:negation,conjunction:conjunction,'vrednost[]':vrednost,condition:condition,spremenljivka:spremenljivka,anketa:srv_meta_anketa_id,ostanek:ostanek,noupdate:__vnosi+__analiza},function(){$('#div_condition_editing_inner').resize();});}
function if_edit_enabled(_if,enabled){$.post('ajax.php?t=branching&a=if_edit_enabled',{anketa:srv_meta_anketa_id,'if':_if,enabled:enabled});}
function if_blok_tab(_if,tab){$.post('ajax.php?t=branching&a=if_blok_tab',{anketa:srv_meta_anketa_id,'if':_if,tab:tab},function(){if(tab>0){$('#blok_pb_warning').show();}
else if($('input[name="if_random"]:checked').val()==-1&&$('select[name="if_blok_horizontal"]').val()==0&&$('select[name="if_blok_tab"]').val()==0){$('#blok_pb_warning').hide();}});}
function if_blok_horizontal(_if,horizontal){$.post('ajax.php?t=branching&a=if_blok_horizontal',{anketa:srv_meta_anketa_id,'if':_if,horizontal:horizontal},function(){if(horizontal>0){$('#blok_pb_warning').show();}
else if($('input[name="if_random"]:checked').val()==-1&&$('select[name="if_blok_horizontal"]').val()==0&&$('select[name="if_blok_tab"]').val()==0){$('#blok_pb_warning').hide();}});}
function if_blok_random(_if,random){$.post('ajax.php?t=branching&a=if_blok_random',{anketa:srv_meta_anketa_id,'if':_if,random:random},function(){if(random>=0){$('#if_blok_random_cnt').show();$('#blok_pb_warning').show();}
else if(random==-2){$('#if_blok_random_cnt').hide();$('#blok_pb_warning').show();}
else{$('#if_blok_random_cnt').hide();if($('input[name="if_random"]:checked').val()==-1&&$('select[name="if_blok_horizontal"]').val()==0&&$('select[name="if_blok_tab"]').val()==0){$('#blok_pb_warning').hide();}}});}
function if_blok_random_cnt(_if,random){$.post('ajax.php?t=branching&a=if_blok_random',{anketa:srv_meta_anketa_id,'if':_if,random:random});}
function follow_up_condition(id){if($('#commercial_package').attr('value')=='1'){popupUserAccess('if');return false;}
var parents_id=$("#variabla_"+id).closest("#variable_holder").siblings(".naslov_inline").attr('spr_id');if_new(parents_id,0,0,0,0,0,id);}
function bracket_edit_new(condition,vrednost,who,what){$('#div_condition_editing_inner').load('ajax.php?t=branching&a=bracket_edit_new',{who:who,what:what,condition:condition,vrednost:vrednost,noupdate:__vnosi+__analiza,anketa:srv_meta_anketa_id},function(){$('#div_condition_editing_inner').resize();});}
function conjunction_edit(condition,conjunction,negation){$('#div_condition_editing_inner').load('ajax.php?t=branching&a=conjunction_edit',{condition:condition,conjunction:conjunction,negation:negation,noupdate:__vnosi+__analiza,anketa:srv_meta_anketa_id},function(){var scroll_position=$(".condition_editing_body").scrollTop()+$('#condition_'+condition).position().top-$(".condition_editing_body").height()/2+$('#condition_'+condition).height()/2;$(".condition_editing_body").animate({scrollTop:scroll_position},1000);});}
function conjunction_dropdown_edit(condition){var conj=$('#conjunction_dropdown_'+condition).val().split('_');var conjunction=conj[0];var negation=conj[1];$('#div_condition_editing_inner').load('ajax.php?t=branching&a=conjunction_edit',{condition:condition,conjunction:conjunction,negation:negation,noupdate:__vnosi+__analiza,anketa:srv_meta_anketa_id},function(){var scroll_position=$(".condition_editing_body").scrollTop()+$('#condition_'+condition).position().top-$(".condition_editing_body").height()/2+$('#condition_'+condition).height()/2;$(".condition_editing_body").animate({scrollTop:scroll_position},1000);});}
function fill_value(condition,vrednost){var spr_id=document.getElementById('spremenljivka_'+condition);var spremenljivka=spr_id.options[spr_id.selectedIndex].value;$('#div_condition_editing_inner').load('ajax.php?t=branching&a=fill_value',{condition:condition,spremenljivka:spremenljivka,vrednost:vrednost,noupdate:__vnosi+__analiza,anketa:srv_meta_anketa_id},function(){var scroll_position=$(".condition_editing_body").scrollTop()+$('#condition_'+condition).position().top-$(".condition_editing_body").height()/2+$('#condition_'+condition).height()/2;$(".condition_editing_body").animate({scrollTop:scroll_position},1000);});}
function edit_fill_value(condition){$('#edit_fill_value_'+condition).show();$('#preview_fill_value_'+condition).hide();$('#preview_fill_link_'+condition).hide();$('#div_condition_editing_inner').resize();}
function fill_ostanek(condition){var mod_id=document.getElementById('modul_'+condition);var modul=mod_id.options[mod_id.selectedIndex].value;$('#'+condition+'_ostanek').load('ajax.php?t=branching&a=fill_ostanek',{condition:condition,anketa:srv_meta_anketa_id,noupdate:__vnosi+__analiza,modul:modul});}
function edit_label(_if){var label=document.getElementById('label_'+_if).value;$.post('ajax.php?t=branching&a=edit_label',{'if':_if,label:label,noupdate:__vnosi+__analiza,anketa:srv_meta_anketa_id});}
function edit_panel_status(_if){var panel_status=document.getElementById('panel_status_'+_if).value;$.post('ajax.php?t=branching&a=edit_panel_status',{'if':_if,panel_status:panel_status,noupdate:__vnosi+__analiza,anketa:srv_meta_anketa_id});}
function condition_remove(_if,condition,vrednost){$('#div_condition_editing_inner').load('ajax.php?t=branching&a=condition_remove',{'if':_if,condition:condition,vrednost:vrednost,noupdate:__vnosi+__analiza,anketa:srv_meta_anketa_id},function(){$('#div_condition_editing_inner').resize();});}
function calculation_editing(condition,new_spremenljivka,vrednost){$('#fade').fadeTo('slow',1);$('#calculation').html('').fadeIn("slow");if(condition<0)$('#branching_'+(-condition)).addClass('spr_editing');$('#calculation').load('ajax.php?t=branching&a=calculation_editing',{condition:condition,vrednost:vrednost,noupdate:__vnosi+__analiza,anketa:srv_meta_anketa_id});if(new_spremenljivka==1&&condition<0){refreshLeft(-condition);}}
function calculation_editing_close(condition,vrednost){document.getElementById('calculation').style.display="none";if(condition<0)$('#branching_'+(-condition)).delay('3000').removeClass('spr_editing',500);if(condition>=0){$('#fade').fadeOut('slow');$('#div_condition_editing').load('ajax.php?t=branching&a=calculation_editing_close',{anketa:srv_meta_anketa_id,condition:condition,vrednost:vrednost});}else{if(__vnosi==1){window.location.reload();}else{$('#fade').fadeOut('slow');$('#branching_'+(-condition)).load('ajax.php?t=branching&a=calculation_editing_close',{anketa:srv_meta_anketa_id,condition:condition});}}}
function calculation_save(calculation){$.post('ajax.php?t=branching&a=calculation_save',{calculation:calculation,expression:$('#expression_'+calculation).val(),noupdate:__vnosi+__analiza,anketa:srv_meta_anketa_id});}
function calculation_add(condition,operator,vrednost){$('#calculation_editing_inner').load('ajax.php?t=branching&a=calculation_add',{condition:condition,operator:operator,vrednost:vrednost,noupdate:__vnosi+__analiza,anketa:srv_meta_anketa_id},function(){$(".calculation_editing_body").animate({scrollTop:$('.calculation_editing_body').prop("scrollHeight")},1000);});}
function calculation_operator_edit(calculation,operator){$('#calculation_editing_inner').load('ajax.php?t=branching&a=calculation_operator_edit',{calculation:calculation,operator:operator,noupdate:__vnosi+__analiza,anketa:srv_meta_anketa_id},function(){$('#calculation_editing_inner').scroll();});}
function calculation_sort(condition){$('#calculation_editing_inner').load('ajax.php?t=branching&a=calculation_sort',{'condition':condition,sortable:$('#calculation_editing_inner').sortable('serialize'),anketa:srv_meta_anketa_id},function(){$('#calculation_editing_inner').scroll();});}
function quota_sort(condition){$('#quota_editing_inner').load('ajax.php?t=branching&a=quota_sort',{'condition':condition,sortable:$('#quota_editing_inner').sortable('serialize'),anketa:srv_meta_anketa_id},function(){$('#quota_editing_inner').scroll();});}
function calculation_edit(calculation,vrednost){var spr_id=document.getElementById('calculation_spremenljivka_'+calculation);var spremenljivka=spr_id.options[spr_id.selectedIndex].value;var number=$('#calculation_number_'+calculation).val();$('#calculation_editing_inner').load('ajax.php?t=branching&a=calculation_edit',{number:number,calculation:calculation,vrednost:vrednost,spremenljivka:spremenljivka,noupdate:__vnosi+__analiza,anketa:srv_meta_anketa_id},function(){$('#calculation_editing_inner').scroll();});}
function calculation_remove(condition,calculation,vrednost){$('#calculation_editing_inner').load('ajax.php?t=branching&a=calculation_remove',{condition:condition,calculation:calculation,vrednost:vrednost,noupdate:__vnosi+__analiza,anketa:srv_meta_anketa_id},function(){$('#calculation_editing_inner').scroll();});}
function calculation_bracket_edit_new(calculation,vrednost,who,what){$('#calculation_editing_inner').load('ajax.php?t=branching&a=calculation_bracket_edit_new',{who:who,what:what,calculation:calculation,vrednost:vrednost,noupdate:__vnosi+__analiza,anketa:srv_meta_anketa_id},function(){$('#calculation_editing_inner').scroll();});}
function pagebreak(spremenljivka){close_all_editing();$('#branching').load('ajax.php?t=branching&a=pagebreak',{spremenljivka:spremenljivka,anketa:srv_meta_anketa_id},function(){refreshRight();});}
function pagebreak_all(){close_all_editing();$('#branching').load('ajax.php?t=branching&a=pagebreak_all',{anketa:srv_meta_anketa_id},function(){refreshRight();});}
function vprasanje_edit(spremenljivka,buffer){alleditors_remove();if(_moved==1){_moved=0;return;}
if(sidebar!=1)
toggle_vprasanja();_fullscreen=1;$('#fullscreen').html('').fadeIn('slow').draggable({delay:100,cancel:'input, textarea, select, .buttonwrapper'});$('#fade').fadeTo('slow',1);refreshRight();if(buffer!=undefined){$('#fullscreen').html(buffer);$('#fullscreen').append('<div id="bottom_icons_holder" ></div><!-- /bottom_icons_holder -->');$("#bottom_icons_holder").load('ajax.php?a=show_bottom_icons',{branching:srv_meta_branching,anketa:srv_meta_anketa_id});refreshBottomIcons('gray');}else{$('#fullscreen').load('ajax.php?a=editmode_spremenljivka',{spremenljivka:spremenljivka,branching:srv_meta_branching,anketa:srv_meta_anketa_id},function(){$('#fullscreen').append('<div id="bottom_icons_holder" ></div><!-- /bottom_icons_holder -->');$("#bottom_icons_holder").load('ajax.php?a=show_bottom_icons',{branching:srv_meta_branching,anketa:srv_meta_anketa_id});refreshBottomIcons('gray');});}}
function plusminus(id,odpremo){var a=$('#branching_if'+id+' span.pm');if(a.hasClass('minus')&&odpremo!=1){$('#if_'+id).slideUp();a.removeClass('minus').addClass('plus');$.post('ajax.php?t=branching&a=if_collapsed',{collapsed:1,'if':id,anketa:srv_meta_anketa_id});}else{$('#if_'+id).slideDown();a.removeClass('plus').addClass('minus');$.post('ajax.php?t=branching&a=if_collapsed',{collapsed:0,'if':id,anketa:srv_meta_anketa_id});}}
function check_pogoji(){$.post('ajax.php?t=branching&a=check_pogoji&izpis=long',{anketa:srv_meta_anketa_id},function(data){$('#fade').fadeIn("slow");$('#check_pogoji').html(data).fadeIn("slow");});}
function editmode_introconcl(id){$('#spremenljivka_'+id).load('ajax.php?t=branching&a=editmode_introconcl',{id:id,anketa:srv_meta_anketa_id});}
function normalmode_introconcl(id,editmode,fulscreen){var text_intro_concl="";var note_intro_concl=$("#opomba_"+id).val();try{text_intro_concl=CKEDITOR.get('naslov_'+id).getContent();}catch(e){text_intro_concl=$("#naslov_"+id).val();text_intro_concl=text_intro_concl.replace("\n",'<br/>');}
$.post('ajax.php?t=branching&a=edit_introconcl',{id:id,anketa:srv_meta_anketa_id,branching:srv_meta_branching,text:text_intro_concl,opomba:note_intro_concl},function(){$('#spremenljivka_'+id).load('ajax.php?t=branching&a=normalmode_introconcl',{id:id,anketa:srv_meta_anketa_id});});}
function edit_introconcl(id,text,opomba){$.post('ajax.php?t=branching&a=edit_introconcl',{id:id,text:text,opomba:opomba,anketa:srv_meta_anketa_id});}
function introconcl_visible(id){$('#'+id).load('ajax.php?t=branching&a=introconcl_visible',{id:id,anketa:srv_meta_anketa_id},function(){if(id==-1)
$('input[type="radio"][name="show_intro"]').not(':checked').prop("checked",true,function(){vprasanje_save();});else
$('input[type="radio"][name="show_concl"]').not(':checked').prop("checked",true,function(){vprasanje_save();});});}
function concl_settings(){var text=$("[name=text]").val();var url=$("[name=url]").val();var concl_link=$("[name=concl_link]").is(':checked');var concl_back_button=$("[name=concl_back_button]").is(':checked');$.post('ajax.php?t=branching&a=concl_settings',{text:text,url:url,concl_link:concl_link,anketa:srv_meta_anketa_id,concl_back_button:concl_back_button});}
function intro_concl_preview(spremenljivka){$('#fullscreen').html('').fadeIn('slow').draggable({delay:100});$('#fade').fadeTo('slow',1);$('#fullscreen').load('ajax.php?a=preview_spremenljivka',{anketa:srv_meta_anketa_id,spremenljivka:spremenljivka}).draggable({delay:100});}
function toggle_missing_dropdown_table(spr){if($('[id="table_missings_menu_'+spr+'"]').last().css('display')=='none')
$('[id="table_missings_menu_'+spr+'"]').last().css('display','inline');else
$('[id="table_missings_menu_'+spr+'"]').last().css('display','none');}
function close_missing_menu(spr){$('[id="table_missings_menu_'+spr+'"]').last().css('display','none');}
function scale_ordnom(spremenljivka,value){$('#branching_'+spremenljivka).load('ajax.php?t=branching&a=scale_ordnom',{spremenljivka:spremenljivka,value:value,anketa:srv_meta_anketa_id},function(){if(value==1){$('input[type="checkbox"][name="skala"]').prop("checked",false,function(){vprasanje_save();});}
else{$('input[type="checkbox"][name="skala"]').prop("checked",true,function(){vprasanje_save();});}
show_scale_text(value);});}
function show_sidebar(bar){if(sidebar!=bar){sidebar=bar;if(bar==1){$('#branching_vprasanja_tabs #vpr').addClass('active');$('#branching_vprasanja_tabs #knj').removeClass('active');}}}
function toggle_vprasanja(spremenljivka){if(sidebar!=1){sidebar=1;$('#branching_vprasanja_tabs #vpr').addClass('active');$('#branching_vprasanja_tabs #knj').removeClass('active');refreshRight(spremenljivka);}else{sidebar=0;$('#branching_vprasanja_tabs #vpr').removeClass('active');}}
function show_vprasanja(){refreshRight();}
function show_library(tab){if(sidebar!=2){sidebar=2}
display_knjiznica(tab);}
function expand(mode){$('#question_holder').load('ajax.php?t=branching&a=expand',{mode:mode,anketa:srv_meta_anketa_id});}
function dodaj_blok_interpretacije(){$.post('ajax.php?t=branching&a=dodaj_blok_interpretacije',{anketa:srv_meta_anketa_id},function(){vnos_redirect('index.php?anketa='+srv_meta_anketa_id);});}
function refreshLeft(spremenljivka,callback){$.post('ajax.php?t=branching&a=refresh_left',{spremenljivka:spremenljivka,anketa:srv_meta_anketa_id},function(data){$('#branching').html(data);if(typeof callback=="function")
callback();});}
function refreshRight(spremenljivka){return;}
function accept_droppable(child,parent){close_all_editing();$('#branching').load('ajax.php?t=branching&a=accept_droppable',{child:child,parent:parent,anketa:srv_meta_anketa_id});}
function accept_droppable_vrivanje(grupa,child,spremenljivka){$('#vprasanja').load('ajax.php?a=nova_spremenljivka_vrivanje',{anketa:srv_meta_anketa_id,grupa:srv_meta_grupa,spremenljivka:spremenljivka,child:child},function(){$('#clipboard').fadeOut();$.post('ajax.php?t=branching&a=get_new_spr',{anketa:srv_meta_anketa_id},function(new_spr){});});}
function readCookie(name){var nameEQ=name+"=";var ca=document.cookie.split(';');for(var i=0;i<ca.length;i++){var c=ca[i];while(c.charAt(0)==' ')
c=c.substring(1,c.length);if(c.indexOf(nameEQ)==0)
return c.substring(nameEQ.length,c.length);}
return null;}
function intro_concl_fullscreeen(grupa,fullscreen){if(_moved==1){_moved=0;return;}
if(fullscreen>=1){if(fullscreen==2)
{$("#spremenljivka_"+grupa).find(".editmenu").remove();$("#spremenljivka_"+grupa).find(".spremenljivka_tekst_form").remove();$("#spremenljivka_"+grupa).find("#spr_settings_intro_concl").remove();$("#spremenljivka_"+grupa).find(".save_button").remove();$("#spremenljivka_"+grupa).find(".spr_settings").remove();}
_fullscreen=1;$('#fullscreen').html('').fadeIn('slow').draggable({delay:100});$('#fade').fadeTo('slow',1);}
$(getContainer(grupa)).load('ajax.php?a=intro_concl_fullscreeen',{grupa:grupa,branching:srv_meta_branching,anketa:srv_meta_anketa_id,grupa:srv_meta_grupa,fullscreen:fullscreen,introconcl:grupa});}
function expandCollapseAllPlusMinus(what){$('li.if, li.block','#branching').each(function(index){var id=$(this).attr('id').replace('branching_if','');var a=$('#branching_if'+id+' span.pm');if(what=='expand'){if(a.hasClass('plus')){plusminus(id);}}else if(what=='collapse'){if(a.hasClass('minus')){plusminus(id);}}});}
function branch_editmode_grupa(id,spremenljivka){$('#branch_edit_grupa_'+id).load('ajax.php?a=branch_editmode_grupa',{anketa:srv_meta_anketa_id,grupa:id,spremenljivka:spremenljivka});}
function branch_normalmode_grupa(id,spremenljivka){$('#branch_edit_grupa_'+id).load('ajax.php?a=branch_normalmode_grupa',{anketa:srv_meta_anketa_id,grupa:id,spremenljivka:spremenljivka});}
function branch_brisi_grupo(id,text){if(confirm(text)){}}
function prestevilci(){$.redirect('ajax.php?t=branching&a=prestevilci',{anketa:srv_meta_anketa_id});}
function alert_block(){var count_spr=0;count_spr=$('#branching').find('.spr').length-2;if(count_spr>30){$('#alert_close_block').load('ajax.php?t=branching&a=alert_close_block',{anketa:srv_meta_anketa_id},function(data){if(data!=false){$('#alert_close_block').show('fast');$('#fade').fadeTo('slow',1);}});}}
function alert_close_block(){$('#alert_close_block').hide('fast');$('#fade').hide('slow');}
function quick_settings(results,what){var status1=$('#form_settings_obvescanje').css('display');if(what=='finish_author'||what=='finish_respondent_cms'||what=='finish_respondent'||what=='finish_other'){if(results.checked==true)
results=1;else
results=0;}
$("#quick_settings").load('ajax.php?t=branching&a=edit_quick_settings',{anketa:srv_meta_anketa_id,results:results,what:what,status1:status1});}
function calculation_edit_variable(spremenljivka){var input=$("#variable_"+spremenljivka);var variable=input.val();variable=check_valid_variable(variable);input.val(variable);$.post('ajax.php?t=branching&a=calculation_edit_variable',{anketa:srv_meta_anketa_id,spremenljivka:spremenljivka,variable:variable});}
function calculation_edit_decimalna(spremenljivka){var input=$("#decimalna_"+spremenljivka);var decimalna=input.val();$.post('ajax.php?t=branching&a=calculation_edit_decimalna',{anketa:srv_meta_anketa_id,spremenljivka:spremenljivka,decimalna:decimalna});}
function calculation_edit_missing(spremenljivka){if($("#calcMissing_"+spremenljivka).is(':checked')){var missing=1;}
else{var missing=0;}
$.post('ajax.php?t=branching&a=calculation_edit_missing',{anketa:srv_meta_anketa_id,spremenljivka:spremenljivka,missing:missing});}
function form_send_email(){var text=document.getElementById('respondent_profile_value_text').value;$('#fullscreen').html('').fadeIn('slow').draggable({delay:100,cancel:'input, textarea, select, .buttonwrapper'});$('#fade').fadeTo('slow',1);$('#fullscreen').load('ajax.php?t=branching&a=form_send_email',{anketa:srv_meta_anketa_id,text:text}).draggable({delay:100,cancel:'input, textarea, select, .buttonwrapper'});}
function fill_value_loop(_if){var spr_id=document.getElementById('spremenljivka_'+_if);var spremenljivka=spr_id.options[spr_id.selectedIndex].value;$('#branching_if'+_if).load('ajax.php?t=branching&a=fill_value_loop',{'if':_if,spremenljivka:spremenljivka,anketa:srv_meta_anketa_id});}
function loop_edit(_if){var vrednost=new Array();var count=0;sel=document.getElementsByName('vrednost_'+_if);for(i=0;i<sel.length;i++){if(sel[i].checked){vrednost[count]=sel[i].value;count++;}}
$('#branching_if'+_if).load('ajax.php?t=branching&a=loop_edit',{'vrednost[]':vrednost,'if':_if,anketa:srv_meta_anketa_id});}
function loop_edit_advanced(_if){var vrednost=new Array();$('tr#vrednost_'+_if+' input:checked').each(function(index){vrednost[parseInt($(this).attr('id'))]=parseInt($(this).val());});$('#branching_if'+_if).load('ajax.php?t=branching&a=loop_edit_advanced',{'vrednost[]':vrednost,'if':_if,anketa:srv_meta_anketa_id});}
function loop_edit_max(_if,max){$.post('ajax.php?t=branching&a=loop_edit_max',{'if':_if,max:max,anketa:srv_meta_anketa_id});}
function isScrolledIntoView(elem,container){if(container!='window'){var containerTop=$(container).offset().top;var containerBottom=containerTop+$(container).height();}else{var containerTop=$(window).scrollTop();var containerBottom=containerTop+$(window).height();}
var elemTop=$(elem).offset().top;var elemBottom=elemTop+$(elem).height();return((elemBottom>=containerTop)&&(elemTop<=containerBottom)&&(elemBottom<=containerBottom)&&(elemTop>=containerTop));}
function toggle_toolbox(){$('#toolbox_nastavitve').load('ajax.php?t=branching&a=toggle_toolbox',{anketa:srv_meta_anketa_id});}
function find_replace(){$('#fade').fadeTo('slow',1);$('#vrednost_edit').show().load('ajax.php?t=branching&a=find_replace',{anketa:srv_meta_anketa_id},function(){$('input[name=find]').focus().bind('keyup',function(){find_replace_count(this)});});}
function find_replace_count(t){$.post('ajax.php?t=branching&a=find_replace_count',{find:$(t).val(),anketa:srv_meta_anketa_id},function(data){$('#find_count').html(data);});}
function find_replace_do(){var find=$('input[name=find]').val();var replace=$('input[name=replace]').val();if(find==''||replace==''){if(find=='')$('input[name=find]').css('outline','2px solid red');if(replace=='')$('input[name=replace]').css('outline','2px solid red');return;}
$.post('ajax.php?t=branching&a=find_replace_do',{anketa:srv_meta_anketa_id,find:find,replace:replace},function(data){if(data=='')
window.location.reload();});}
function SN_generator_new(spremenljivka,endif){$("#tip_preview").hide();$('#fade').fadeOut('slow');$.post('ajax.php?t=branching&a=SN_generator_new',{spremenljivka:spremenljivka,endif:endif,anketa:srv_meta_anketa_id},function(data){if(!data)return;$('#branching').html(data.branching_struktura);vprasanje_fullscreen(data.nova_spremenljivka_id,data.vprasanje_fullscreen);},'json');}
function demografija_new(variable){var type='remove';if($('#'+variable).is(':checked')){type='add';}else{close_all_editing();}
$.post('ajax.php?t=branching&a=demografija_new',{variable:variable,type:type,anketa:srv_meta_anketa_id},function(data){if(!data)return;if(data.branching!='')$('#branching').html(data.branching);if(type=='add'){vprasanje_fullscreen(data.spremenljivka);}},'json');}
function slider_edit_init(spremenljivka,min,max,def,slider_handle,slider_handle_step,vmesne_labels,vmesne_Crtice,slider_MinMaxNumLabelNew,slider_window_number,vmesne_descr_labele,tip_vmesne_descr_labele,nakazi_odgovore,minTemp,maxTemp,slider_VmesneDescrLabel,slider_CustomDescriptiveLabels){if(!slider_VmesneDescrLabel){min=minTemp;max=maxTemp;$('#slider_MinNumLabel_'+spremenljivka).val(min);$('#slider_MaxNumLabel_'+spremenljivka).val(max);}
$("#variabla_limit_"+spremenljivka).css('display','none');var minmaxlabela="label";var rest=false;var vmesne_opisne_labele=false;if(slider_handle==1){$('#sliderbranching_'+spremenljivka).slider().removeClass("classic_slider");$('#sliderbranching_'+spremenljivka).slider().addClass("special_slider");$('#sliderbranching_'+spremenljivka+' .ui-slider-handle').css('visibility','hidden');}
else if(slider_handle==0){$('#sliderbranching_'+spremenljivka).slider().addClass("classic_slider");$('#sliderbranching_'+spremenljivka).slider().removeClass("special_slider");}
if(nakazi_odgovore==1&&slider_handle==1){$('#sliderbranching_'+spremenljivka).slider().removeClass("classic_slider");$('#sliderbranching_'+spremenljivka).slider().addClass("circle_slider");}
else if(nakazi_odgovore==0&&slider_handle==0){$('#sliderbranching_'+spremenljivka).slider().addClass("classic_slider");$('#sliderbranching_'+spremenljivka).slider().removeClass("circle_slider");}
else if(nakazi_odgovore==1&&slider_handle==0){$('#sliderbranching_'+spremenljivka).slider().addClass("elipse_slider");}
if(nakazi_odgovore==1){vmesne_Crtice=1;}
if(slider_MinMaxNumLabelNew==1){minmaxlabela="pip";}
else{minmaxlabela="label";}
if(vmesne_Crtice==1){rest="pip";}
else if(vmesne_Crtice==0){rest=false;}
if(vmesne_labels==1||tip_vmesne_descr_labele!=0){rest="label";}
if(slider_VmesneDescrLabel){if(tip_vmesne_descr_labele!=0){vmesne_opisne_labele=vmesne_descr_labele.split(";");max=vmesne_opisne_labele.length-1;}else if(tip_vmesne_descr_labele==0){vmesne_opisne_labele=slider_CustomDescriptiveLabels.split(";");max=vmesne_opisne_labele.length;}}
$('#sliderbranching_'+spremenljivka).slider({step:slider_handle_step,value:def,min:min,max:max,slide:function(event,ui){if(slider_window_number==0){$("#sliderTextbranching_"+spremenljivka).html(ui.value);var delay=function(){$("#sliderTextbranching_"+spremenljivka).position({of:ui.handle,offset:"0, -37"});};setTimeout(delay,5);}},start:function(event,ui){if(slider_window_number==0){$("#sliderTextbranching_"+spremenljivka).position({of:ui.handle,offset:"0, -37"});$("#sliderTextbranching_"+spremenljivka).css('visibility','visible');}
$('#sliderbranching_'+spremenljivka+' .ui-slider-handle').css('visibility','');},stop:function(event,ui){if(slider_handle==0){if(slider_window_number==0){}}},create:function(event,ui){var percent_def=(def-min)/(max-min)*100;if(percent_def<0||percent_def>100){percent_def=50;}
$('#sliderbranching_'+spremenljivka+' .ui-slider-handle').css('left',percent_def+'%');if(slider_window_number==0){$("#sliderTextbranching_"+spremenljivka).position({of:$('#sliderbranching_'+spremenljivka+' .ui-slider-handle'),offset:"0, -37"});}}}).slider("pips",{rest:rest,first:minmaxlabela,last:minmaxlabela,labels:vmesne_opisne_labele,});$('#sliderbranching_'+spremenljivka).slider("option","value",def);}
function slider_edit_init_prevajanje(spremenljivka,min,max,def,slider_handle,slider_handle_step,vmesne_labels,vmesne_Crtice,slider_MinMaxNumLabelNew,slider_window_number,vmesne_descr_labele,tip_vmesne_descr_labele,nakazi_odgovore,minTemp,maxTemp,slider_VmesneDescrLabel,slider_CustomDescriptiveLabels){slider_prevod_min=min;slider_prevod_max=max;slider_prevod_def=def;slider_prevod_slider_handle=slider_handle;slider_prevod_slider_handle_step=slider_handle_step;slider_prevod_vmesne_labels=vmesne_labels;slider_prevod_vmesne_Crtice=vmesne_Crtice;slider_prevod_slider_MinMaxNumLabelNew=slider_MinMaxNumLabelNew;slider_prevod_slider_window_number=slider_window_number;slider_prevod_vmesne_descr_labele=vmesne_descr_labele;slider_prevod_tip_vmesne_descr_labele=tip_vmesne_descr_labele;slider_prevod_nakazi_odgovore=nakazi_odgovore;slider_prevod_minTemp=minTemp;slider_prevod_maxTemp=maxTemp;slider_prevod_slider_VmesneDescrLabel=slider_VmesneDescrLabel;$("#variabla_limit_"+spremenljivka).css('display','none');var minmaxlabela="label";var rest=false;var vmesne_opisne_labele=false;if(slider_handle==1){$('#sliderbranching_prevajanje'+spremenljivka).slider().removeClass("classic_slider");$('#sliderbranching_prevajanje'+spremenljivka).slider().addClass("special_slider");$('#sliderbranching_prevajanje'+spremenljivka+' .ui-slider-handle').css('visibility','hidden');}
else if(slider_handle==0){$('#sliderbranching_prevajanje'+spremenljivka).slider().addClass("classic_slider");$('#sliderbranching_prevajanje'+spremenljivka).slider().removeClass("special_slider");}
if(nakazi_odgovore==1&&slider_handle==1){$('#sliderbranching_prevajanje'+spremenljivka).slider().removeClass("classic_slider");$('#sliderbranching_prevajanje'+spremenljivka).slider().addClass("circle_slider");}
else if(nakazi_odgovore==0&&slider_handle==0){$('#sliderbranching_prevajanje'+spremenljivka).slider().addClass("classic_slider");$('#sliderbranching_prevajanje'+spremenljivka).slider().removeClass("circle_slider");}
else if(nakazi_odgovore==1&&slider_handle==0){$('#sliderbranching_prevajanje'+spremenljivka).slider().addClass("elipse_slider");}
if(nakazi_odgovore==1){vmesne_Crtice=1;}
if(slider_MinMaxNumLabelNew==1){minmaxlabela="pip";}
else{minmaxlabela="label";}
if(vmesne_Crtice==1){rest="pip";}
else if(vmesne_Crtice==0){rest=false;}
if(vmesne_labels==1||tip_vmesne_descr_labele!=0){rest="label";}
if((slider_VmesneDescrLabel)||(tip_vmesne_descr_labele!=0)){vmesne_opisne_labele=slider_CustomDescriptiveLabels.split(";");max=vmesne_opisne_labele.length;}
$('#sliderbranching_prevajanje'+spremenljivka).slider({step:slider_handle_step,value:def,min:min,max:max,slide:function(event,ui){if(slider_window_number==0){$("#sliderTextbranching_"+spremenljivka).html(ui.value);var delay=function(){$("#sliderTextbranching_"+spremenljivka).position({of:ui.handle,offset:"0, -37"});};setTimeout(delay,5);}},start:function(event,ui){if(slider_window_number==0){$("#sliderTextbranching_"+spremenljivka).position({of:ui.handle,offset:"0, -37"});$("#sliderTextbranching_"+spremenljivka).css('visibility','visible');}
$('#sliderbranching_prevajanje'+spremenljivka+' .ui-slider-handle').css('visibility','');},stop:function(event,ui){if(slider_handle==0){if(slider_window_number==0){}}},create:function(event,ui){var percent_def=(def-min)/(max-min)*100;if(percent_def<0||percent_def>100){percent_def=50;}
$('#sliderbranching_'+spremenljivka+' .ui-slider-handle').css('left',percent_def+'%');if(slider_window_number==0){$("#sliderTextbranching_"+spremenljivka).position({of:$('#sliderbranching_'+spremenljivka+' .ui-slider-handle'),offset:"0, -37"});}}}).slider("pips",{rest:rest,first:minmaxlabela,last:minmaxlabela,labels:vmesne_opisne_labele,});$('#sliderbranching_prevajanje'+spremenljivka).slider("option","value",def);}
function slider_edit_grid_init(spremenljivka,vrednost,min,max,def,vmesne_labels,vmesne_Crtice,slider_MinMaxNumLabelNew,slider_handle,slider_handle_step,slider_window_number,vmesne_descr_labele,tip_vmesne_descr_labele,nakazi_odgovore,minTemp,maxTemp,slider_VmesneDescrLabel,slider_CustomDescriptiveLabels){if(!slider_VmesneDescrLabel){min=minTemp;max=maxTemp;$('#slider_MinNumLabel_'+spremenljivka).val(min);$('#slider_MaxNumLabel_'+spremenljivka).val(max);}
$("input[name^=foo_"+vrednost+"]").css('display','none');var minmaxlabela="label";var rest=false;var vmesne_opisne_labele=false;if(slider_handle==1){$('#sliderbranching_'+spremenljivka+'_'+vrednost).slider().removeClass("classic_slider");$('#sliderbranching_'+spremenljivka+'_'+vrednost).slider().addClass("special_slider");$('#sliderbranching_'+spremenljivka+'_'+vrednost+' .ui-slider-handle').css('visibility','hidden');}
else if(slider_handle==0){$('#sliderbranching_'+spremenljivka+'_'+vrednost).slider().removeClass("special_slider");$('#sliderbranching_'+spremenljivka+'_'+vrednost).slider().addClass("classic_slider");}
if(nakazi_odgovore==1&&slider_handle==1){$('#sliderbranching_'+spremenljivka+'_'+vrednost).slider().removeClass("classic_slider");$('#sliderbranching_'+spremenljivka+'_'+vrednost).slider().addClass("circle_slider");}
else if(nakazi_odgovore==0&&slider_handle==0){$('#sliderbranching_'+spremenljivka+'_'+vrednost).slider().addClass("classic_slider");$('#sliderbranching_'+spremenljivka+'_'+vrednost).slider().removeClass("circle_slider");}
else if(nakazi_odgovore==1&&slider_handle==0){$('#sliderbranching_'+spremenljivka+'_'+vrednost).slider().addClass("elipse_slider");}
if(nakazi_odgovore==1){vmesne_Crtice=1;}
if(slider_MinMaxNumLabelNew==1){minmaxlabela="pip";}
else{minmaxlabela="label";}
if(vmesne_Crtice==1){rest="pip";}
else if(vmesne_Crtice==0){rest=false;}
if(vmesne_labels==1||tip_vmesne_descr_labele!=0){rest="label";}
if(tip_vmesne_descr_labele!=0){vmesne_opisne_labele=vmesne_descr_labele.split(";");max=vmesne_opisne_labele.length-1;}else if(slider_VmesneDescrLabel){vmesne_opisne_labele=slider_CustomDescriptiveLabels.split(";");max=vmesne_opisne_labele.length;}
$('#sliderbranching_'+spremenljivka+'_'+vrednost).slider({step:slider_handle_step,value:def,min:min,max:max,slide:function(event,ui){if(slider_window_number==0){$("#sliderTextbranching_"+spremenljivka+"_"+vrednost).html(ui.value);var delay=function(){$("#sliderTextbranching_"+spremenljivka+"_"+vrednost).position({of:ui.handle,offset:"0, -37"});};setTimeout(delay,5);}},start:function(event,ui){if(slider_window_number==0){$("#sliderTextbranching_"+spremenljivka+"_"+vrednost).position({of:ui.handle,offset:"0, -37"});$("#sliderTextbranching_"+spremenljivka+"_"+vrednost).css('visibility','visible');}
$('#sliderbranching_'+spremenljivka+'_'+vrednost+' .ui-slider-handle').css('visibility','');},stop:function(event,ui){if(slider_handle==1){if(slider_window_number==0){}}},create:function(event,ui){var width=$("input[name^=vrednost_"+vrednost+"_grid_]").parent().width();width=width-80;$("#sliderbranching_"+spremenljivka+"_"+vrednost).width(width);var percent_def=(def-min)/(max-min)*100;if(percent_def<0||percent_def>100){percent_def=50;}
$('#sliderbranching_'+spremenljivka+'_'+vrednost+' .ui-slider-handle').css('left',percent_def+'%');if(slider_window_number==0){$("#sliderTextbranching_"+spremenljivka+"_"+vrednost).position({of:$('#sliderbranching_'+spremenljivka+'_'+vrednost+' .ui-slider-handle'),offset:"0, -37"});}}}).slider("pips",{rest:rest,first:minmaxlabela,last:minmaxlabela,labels:vmesne_opisne_labele,});$('#sliderbranching_'+spremenljivka+'_'+vrednost).slider("option","value",def);}
function slider_edit_grid_init_prevajanje(spremenljivka,vrednost,min,max,def,vmesne_labels,vmesne_Crtice,slider_MinMaxNumLabelNew,slider_handle,slider_handle_step,slider_window_number,vmesne_descr_labele,tip_vmesne_descr_labele,nakazi_odgovore,minTemp,maxTemp,slider_VmesneDescrLabel,slider_CustomDescriptiveLabels){slider_prevod_min=min;slider_prevod_max=max;slider_prevod_def=def;slider_prevod_slider_handle=slider_handle;slider_prevod_slider_handle_step=slider_handle_step;slider_prevod_vmesne_labels=vmesne_labels;slider_prevod_vmesne_Crtice=vmesne_Crtice;slider_prevod_slider_MinMaxNumLabelNew=slider_MinMaxNumLabelNew;slider_prevod_slider_window_number=slider_window_number;slider_prevod_vmesne_descr_labele=vmesne_descr_labele;slider_prevod_tip_vmesne_descr_labele=tip_vmesne_descr_labele;slider_prevod_nakazi_odgovore=nakazi_odgovore;slider_prevod_minTemp=minTemp;slider_prevod_maxTemp=maxTemp;slider_prevod_slider_VmesneDescrLabel=slider_VmesneDescrLabel;$("input[name^=foo_"+vrednost+"]").css('display','none');var minmaxlabela="label";var rest=false;var vmesne_opisne_labele=false;if(slider_handle==1){$('#sliderbranching_prevajanje'+spremenljivka+'_'+vrednost).slider().removeClass("classic_slider");$('#sliderbranching_prevajanje'+spremenljivka+'_'+vrednost).slider().addClass("special_slider");$('#sliderbranching_prevajanje'+spremenljivka+'_'+vrednost+' .ui-slider-handle').css('visibility','hidden');}
else if(slider_handle==0){$('#sliderbranching_prevajanje'+spremenljivka+'_'+vrednost).slider().removeClass("special_slider");$('#sliderbranching_prevajanje'+spremenljivka+'_'+vrednost).slider().addClass("classic_slider");}
if(nakazi_odgovore==1&&slider_handle==1){$('#sliderbranching_prevajanje'+spremenljivka+'_'+vrednost).slider().removeClass("classic_slider");$('#sliderbranching_prevajanje'+spremenljivka+'_'+vrednost).slider().addClass("circle_slider");}
else if(nakazi_odgovore==0&&slider_handle==0){$('#sliderbranching_prevajanje'+spremenljivka+'_'+vrednost).slider().addClass("classic_slider");$('#sliderbranching_prevajanje'+spremenljivka+'_'+vrednost).slider().removeClass("circle_slider");}
else if(nakazi_odgovore==1&&slider_handle==0){$('#sliderbranching_prevajanje'+spremenljivka+'_'+vrednost).slider().addClass("elipse_slider");}
if(nakazi_odgovore==1){vmesne_Crtice=1;}
if(slider_MinMaxNumLabelNew==1){minmaxlabela="pip";}
else{minmaxlabela="label";}
if(vmesne_Crtice==1){rest="pip";}
else if(vmesne_Crtice==0){rest=false;}
if(vmesne_labels==1||tip_vmesne_descr_labele!=0){rest="label";}
if((slider_VmesneDescrLabel)||(tip_vmesne_descr_labele!=0)){vmesne_opisne_labele=slider_CustomDescriptiveLabels.split(";");max=vmesne_opisne_labele.length;}
$('#sliderbranching_prevajanje'+spremenljivka+'_'+vrednost).slider({step:slider_handle_step,value:def,min:min,max:max,slide:function(event,ui){if(slider_window_number==0){$("#sliderTextbranching_"+spremenljivka+"_"+vrednost).html(ui.value);var delay=function(){$("#sliderTextbranching_"+spremenljivka+"_"+vrednost).position({of:ui.handle,offset:"0, -37"});};setTimeout(delay,5);}},start:function(event,ui){if(slider_window_number==0){$("#sliderTextbranching_"+spremenljivka+"_"+vrednost).position({of:ui.handle,offset:"0, -37"});$("#sliderTextbranching_"+spremenljivka+"_"+vrednost).css('visibility','visible');}
$('#sliderbranching_prevajanje'+spremenljivka+'_'+vrednost+' .ui-slider-handle').css('visibility','');},stop:function(event,ui){if(slider_handle==1){if(slider_window_number==0){}}},create:function(event,ui){var width=$("input[name^=vrednost_"+vrednost+"_grid_]").parent().width();width=width-80;$("#sliderbranching_prevajanje"+spremenljivka+"_"+vrednost).width(width);var percent_def=(def-min)/(max-min)*100;if(percent_def<0||percent_def>100){percent_def=50;}
$('#sliderbranching_prevajanje'+spremenljivka+'_'+vrednost+' .ui-slider-handle').css('left',percent_def+'%');if(slider_window_number==0){$("#sliderTextbranching_"+spremenljivka+"_"+vrednost).position({of:$('#sliderbranching_prevajanje'+spremenljivka+'_'+vrednost+' .ui-slider-handle'),offset:"0, -37"});}}}).slider("pips",{rest:rest,first:minmaxlabela,last:minmaxlabela,labels:vmesne_opisne_labele,});$('#sliderbranching_prevajanje'+spremenljivka+'_'+vrednost).slider("option","value",def);}
function updateSliderOpisneLabele(spr_id,slider_NumofDescrLabels,prevod,grid){if(prevod){var besediloOpisneLabele='';for(var i=1;i<=slider_NumofDescrLabels;i++){besediloOpisneLabele=besediloOpisneLabele+$('#slider_Labela_opisna_'+i+'_'+spr_id+prevod).html()+'; ';var tiplabele=$('#slider_Labela_opisna_'+i+prevod+'_'+spr_id).attr('name');}
postUpdatedSliderOpisneLabelePrevajanje(spr_id,tiplabele,besediloOpisneLabele,grid);}else{postUpdatedSliderOpisneLabele(spr_id,tiplabele,besediloOpisneLabele);}}
function postUpdatedSliderOpisneLabele(spr_id,tiplabele,besediloOpisneLabele){var post_data={anketa:srv_meta_anketa_id,spremenljivka:spr_id,tiplabele:tiplabele,besediloOpisneLabele:besediloOpisneLabele}
$.post('ajax.php?t=vprasanje&a=vprasanje_save&silentsave=true',post_data,function(){vprasanje_save(true);});}
function postUpdatedSliderOpisneLabelePrevajanje(spr_id,tiplabele,besediloOpisneLabele,grid){$.post('ajax.php?t=vprasanjeinline&a=inline_label_save',{spremenljivka:spr_id,anketa:srv_meta_anketa_id,lang_id:srv_meta_lang_id,tiplabele:tiplabele,label:besediloOpisneLabele});var stripedbesediloOpisneLabele=besediloOpisneLabele.replace(/<[^>]+>/g,'');var newStripedbesediloOpisneLabele=stripedbesediloOpisneLabele.substring(0,stripedbesediloOpisneLabele.length-2);if(grid=='grid'){$('#slider_grid_'+spr_id).find('tr').find('td').each(function(){var vrednost=$(this).attr('id');if(vrednost!=null){slider_edit_grid_init_prevajanje(spr_id,vrednost,slider_prevod_min,slider_prevod_max,slider_prevod_def,slider_prevod_vmesne_labels,slider_prevod_vmesne_Crtice,slider_prevod_slider_MinMaxNumLabelNew,slider_prevod_slider_handle,slider_prevod_slider_handle_step,slider_prevod_slider_window_number,slider_prevod_vmesne_descr_labele,slider_prevod_tip_vmesne_descr_labele,slider_prevod_nakazi_odgovore,slider_prevod_minTemp,slider_prevod_maxTemp,slider_prevod_slider_VmesneDescrLabel,newStripedbesediloOpisneLabele);}});}else{slider_edit_init_prevajanje(spr_id,slider_prevod_min,slider_prevod_max,slider_prevod_def,slider_prevod_slider_handle,slider_prevod_slider_handle_step,slider_prevod_vmesne_labels,slider_prevod_vmesne_Crtice,slider_prevod_slider_MinMaxNumLabelNew,slider_prevod_slider_window_number,slider_prevod_vmesne_descr_labele,slider_prevod_tip_vmesne_descr_labele,slider_prevod_nakazi_odgovore,slider_prevod_minTemp,slider_prevod_maxTemp,slider_prevod_slider_VmesneDescrLabel,newStripedbesediloOpisneLabele);}}
function switchSliderOpisneLabeleEditMode(spr_id,prevod){var spr_id_nastavitev=$("#vprasanje_edit form input[name='spremenljivka'] ").val()
if(spr_id_nastavitev==spr_id){$('#preview_opisne_labele_'+spr_id+prevod).css('display','block');$('#edit_opisne_labele_'+spr_id+prevod).css('display','none');}else{$('#preview_opisne_labele_'+spr_id+prevod).css('display','none');$('#edit_opisne_labele_'+spr_id+prevod).css('display','block');}}
function selectbox_dynamic_size(spremenljivka,text){var vnosi=$('#spremenljivka_contentdiv'+spremenljivka+' span.faicon.move_updown.inline.inline_move').length;var vnosi_prej=$('#selectboxSize'+spremenljivka+' option').length;vnosi_prej=vnosi_prej+1;var dodaj=vnosi-vnosi_prej;var isEditing=$('#spremenljivka_contentdiv'+spremenljivka+' div.edit_mode.allow_new').is(':visible');var noVariabla_new=$('#spremenljivka_contentdiv'+spremenljivka+' #variabla_new').is(':visible');if(isEditing){vnosi=vnosi-1;if(!noVariabla_new){vnosi=vnosi+1;}}
if($('#selectboxSize'+spremenljivka+' option:selected').text()==text){var trenutnoStevilo=$('#selectboxSize'+spremenljivka+' option:selected').val();$('#selectboxSize'+spremenljivka+' option:selected').text(trenutnoStevilo);$('#selectboxSize'+spremenljivka).empty();for(i=2;i<=vnosi;i++){if(i==vnosi){$('#selectboxSize'+spremenljivka).append('<option value='+i+'>'+text+'</option>');$('#selectboxSize'+spremenljivka).val(i);$('#selectboxSize'+spremenljivka+' option:selected').text(text);}
else{$('#selectboxSize'+spremenljivka).append('<option value='+i+'>'+i+'</option>');}}}
else if($('#selectboxSize'+spremenljivka+' option:selected').text()!=text){var trenutnoStevilo=$('#selectboxSize'+spremenljivka+' option:selected').val();if(vnosi!=vnosi_prej){$('#selectboxSize'+spremenljivka).empty();for(i=2;i<=vnosi;i++){$('#selectboxSize'+spremenljivka).append('<option value='+i+'>'+i+'</option>');}}
for(i=1;i<=vnosi+1;i++){var vse=$('#selectboxSize'+spremenljivka+' option[value'+i+']').text();if(vse==text){$('#selectboxSize'+spremenljivka+' option[value='+i+']').text(i);}}
$('#selectboxSize'+spremenljivka+' option[value='+vnosi+']').text(text);$('#selectboxSize'+spremenljivka).val(trenutnoStevilo);}}
function selectbox_dynamic_size_other(spremenljivka,text){var vnosi=$('#spremenljivka_contentdiv'+spremenljivka+' span.faicon.move_updown.inline.inline_move').length;var vnosi_prej=$('#selectboxSize'+spremenljivka+' option').length;vnosi_prej=vnosi_prej+1;var dodaj=vnosi-vnosi_prej;var isEditing=$('#spremenljivka_contentdiv'+spremenljivka+' div.edit_mode.allow_new').is(':visible');var noVariabla_new=$("#spremenljivka_contentdiv'.$spremenljivka.' #variabla_new").is(":visible");if(noVariabla_new){vnosi=vnosi-1;}
if($('#selectboxSize'+spremenljivka+' option:selected').text()==text){var trenutnoStevilo=$('#selectboxSize'+spremenljivka+' option:selected').val();$('#selectboxSize'+spremenljivka+' option:selected').text(trenutnoStevilo);$('#selectboxSize'+spremenljivka).empty();for(i=2;i<=vnosi;i++){if(i==vnosi){$('#selectboxSize'+spremenljivka).append('<option value='+i+'>'+text+'</option>');$('#selectboxSize'+spremenljivka).val(i);$('#selectboxSize'+spremenljivka+' option:selected').text(text);}
else{$('#selectboxSize'+spremenljivka).append('<option value='+i+'>'+i+'</option>');}}}
else if($('#selectboxSize'+spremenljivka+' option:selected').text()!=text){var trenutnoStevilo=$('#selectboxSize'+spremenljivka+' option:selected').val();if(vnosi!=vnosi_prej){$('#selectboxSize'+spremenljivka).empty();for(i=2;i<=vnosi;i++){$('#selectboxSize'+spremenljivka).append('<option value='+i+'>'+i+'</option>');}}
for(i=1;i<=vnosi+1;i++){var vse=$('#selectboxSize'+spremenljivka+' option[value='+i+']').text();if(vse==text){$('#selectboxSize'+spremenljivka+' option[value='+i+']').text(i);}}
$('#selectboxSize'+spremenljivka+' option[value='+vnosi+']').text(text);$('#selectboxSize'+spremenljivka).val(trenutnoStevilo);}}
function checkbox_limit_dropdown_size(spremenljivka,textNo){var vnosi=$('#spremenljivka_contentdiv'+spremenljivka+' span.faicon.move_updown.inline.inline_move').length;var noVariabla_new=$("#spremenljivka_contentdiv"+spremenljivka+" #vre_id_new").is(':visible');if(noVariabla_new){vnosi=vnosi-1;}
var trenutnoSteviloMax=$('#checkbox_limit_'+spremenljivka+' option:selected').val();var trenutnoSteviloMin=$('#checkbox_min_limit_'+spremenljivka+' option:selected').val();$('#checkbox_limit_'+spremenljivka).empty();$('#checkbox_min_limit_'+spremenljivka).empty();for(i=0;i<=vnosi;i++){if(i==0){$('#checkbox_limit_'+spremenljivka).append('<option value='+i+'>'+textNo+'</option>');$('#checkbox_min_limit_'+spremenljivka).append('<option value='+i+'>'+textNo+'</option>');}else{$('#checkbox_limit_'+spremenljivka).append('<option value='+i+'>'+i+'</option>');$('#checkbox_min_limit_'+spremenljivka).append('<option value='+i+'>'+i+'</option>');}}
$('#checkbox_limit_'+spremenljivka).val(trenutnoSteviloMax);$('#checkbox_min_limit_'+spremenljivka).val(trenutnoSteviloMin);}
function hotspot_image_resize(spr_id){var max_width=260;var width=$('#hotspot_image_'+spr_id).children('img').css('width');var height=$('#hotspot_image_'+spr_id).children('img').css('height');if(width!=undefined||height!=undefined){width=parseInt(width.replace('px',''));height=parseInt(height.replace('px',''));if(width>max_width){height=(height/width)*max_width;$('#hotspot_image_'+spr_id).children('img').css({width:max_width});$('#hotspot_image_'+spr_id).children('img').css({height:height});}}}
function hotspot_image_button_update(spr_id,srv_hot_spot_load_image,srv_hot_spot_edit_image){var hotspot_image=$('#hotspot_image').val();if((hotspot_image=='')||(hotspot_image.substring(0,4)!='<img')){$('#hot_spot_regions_add_image_'+spr_id).text(srv_hot_spot_load_image);}
else if(hotspot_image.substring(0,4)=='<img'){$('#hot_spot_regions_add_image_'+spr_id).text(srv_hot_spot_edit_image);}};function folders(){$(function(){$('.folder_container').draggable({revert:'invalid',opacity:'0.7',zIndex:'1',handle:'.folder_left img',delay:100});$('li .folder').draggable({revert:'invalid',opacitiy:'0.7',zIndex:'1',handle:'.movable',delay:100});$('.folderdrop').droppable({accept:'.folder_container, ul .folder',hoverClass:'grupahover',tolerance:'pointer',drop:function(e,ui){if($(ui.draggable).attr('name')=='folder'){$('#folders').load('ajax.php?t=folders&a=folder_dropped',{drop:$(ui.draggable).attr('id'),folder:$(this).attr('id')});}else{$('#folders').load('ajax.php?t=folders&a=anketa_dropped',{anketa:$(ui.draggable).attr('id'),folder:$(this).attr('id')});}}});$('.folderdrop strong').click(function(){$(this).parent().load('ajax.php?t=folders&a=folder_rename',{folder:$(this).parent().attr('id')},function(){$('#naslov_'+$(this).parent().attr('id')).focus();});}).hover(function(){$('#new_folder_'+$(this).parent().attr('id')).css({visibility:'visible'});$('#delete_folder_'+$(this).parent().attr('id')).css({visibility:'visible'});},function(){$('#new_folder_'+$(this).parent().attr('id')).css({visibility:'hidden'});$('#delete_folder_'+$(this).parent().attr('id')).css({visibility:'hidden'});});});}
function folder_newname(folder){$('#folders').load('ajax.php?t=folders&a=folder_newname',{folder:folder,naslov:$('#naslov_'+folder).attr('value')});}
function new_folder(folder){$('#folders').load('ajax.php?t=folders&a=new_folder',{folder:folder});}
function delete_folder(folder){$('#folders').load('ajax.php?t=folders&a=delete_folder',{folder:folder});}
function folders_plusminus(folder){var sortable_if=document.getElementById('folder_'+folder).style;if(sortable_if.display!="none"){if($.browser.msie)
$('#folder_'+folder).hide();else
$('#folder_'+folder).slideUp();$('#f_pm_'+folder).load('ajax.php?t=folders&a=folder_collapsed',{collapsed:1,folder:folder});}else{if($.browser.msie)
$('#folder_'+folder).show();else
$('#folder_'+folder).slideDown();$('#f_pm_'+folder).load('ajax.php?t=folders&a=folder_collapsed',{collapsed:0,folder:folder});}}
function folders_knjiznica(anketa){$('#folders').load('ajax.php?t=folders&a=folders_knjiznica',{anketa:anketa});}
function folders_myknjiznica(anketa){$('#folders').load('ajax.php?t=folders&a=folders_myknjiznica',{anketa:anketa});}
function language_change(lang){$.post('ajax.php?t=surveyList&a=language_change',{lang:lang},function(){window.location.reload();});};function anketa_delete_list(anketa,confirmtext){if(confirm(confirmtext)){$("#anketa_list_"+anketa).slideUp();$.post('ajax.php?a=anketa_delete',{anketa:anketa,'inList':'true'},function(response){if(response=='0'){window.location='index.php';}});}}
function surveyList_knjiznica(anketa){$("ul#surveyList").find("li#anketa_list_"+anketa).find(".sl_lib_glb").load('ajax.php?t=surveyList&a=surveyList_knjiznica',{anketa:anketa});}
function surveyList_knjiznica_noaccess(msg){genericAlertPopup('alert_parameter_msg');}
function surveyList_myknjiznica(anketa){$("ul#surveyList").find("li#anketa_list_"+anketa).find(".sl_lib_usr").load('ajax.php?t=surveyList&a=surveyList_myknjiznica',{anketa:anketa});}
function surveyList_myknjiznica_new(anketa){$.post('ajax.php?t=surveyList&a=surveyList_myknjiznica_new',{anketa:anketa},function(){window.location.reload(true);});}
function surveyList_knjiznica_new(anketa){$.post('ajax.php?t=surveyList&a=surveyList_knjiznica_new',{anketa:anketa},function(){window.location.reload(true);});}
function surveyList_show_more(ank_id){if($('#survey_other_box_'+ank_id).hasClass('displayNone')){$('.survey_other_box').addClass('displayNone');$('#survey_other_box_'+ank_id).removeClass('displayNone');}
else{$('.survey_other_box').addClass('displayNone');}}
function switchFolder(show){if(show==1)
var show_folders=0;else
var show_folders=1;$('#survey_list').load('ajax.php?a=surveyList_folders',{show_folders:show_folders},function(){$('body').toggleClass('body_mySurveys_folders');$('body').toggleClass('body_mySurveys');});}
function mySurvey_folder_init(){$('#survey_list .mySurvey_droppable').droppable({accept:'#survey_list .mySurvey_draggable',hoverClass:'folderhover',tolerance:'pointer',drop:function(e,ui){if($(ui.draggable).hasClass('folder_item')){var drag_folder_id=$(ui.draggable).attr('folder_id');var parent_folder_id=$(this).attr('folder_id');$('#survey_list').load('ajax.php?t=surveyListFolders&a=mysurvey_folder_drop',{parent_folder_id:parent_folder_id,drag_folder_id:drag_folder_id});}
if($(ui.draggable).hasClass('anketa_list')){var drag_survey_id=$(ui.draggable).attr('anketa_id');var parent_folder_id=$(this).attr('folder_id');$('#survey_list').load('ajax.php?t=surveyListFolders&a=mysurvey_survey_drop',{parent_folder_id:parent_folder_id,drag_survey_id:drag_survey_id});}}});$('#survey_list .mySurvey_draggable').draggable({revert:'invalid',opacitiy:'0.9',helper:'clone',cursor:'move',cursorAt:{left:20},start:function(e,ui){$(ui.helper).addClass('mySurvey_draggable_helper');}});}
function mySurvey_folder_toggle(folder_id){if($('#folder_item_'+folder_id).hasClass('open'))
var open=0;else
var open=1;$.post('ajax.php?t=surveyListFolders&a=mysurvey_folder_toggle',{folder_id:folder_id,open:open},function(){if($('#folder_item_'+folder_id).hasClass('open')){$('#folder_item_'+folder_id).removeClass('open');$('#folder_list_'+folder_id).slideUp();}
else{$('#folder_item_'+folder_id).addClass('open');$('#folder_list_'+folder_id).slideDown();}});event.stopPropagation();}
function mySurvey_folder_activate(folder_id){$('#right_content').load('ajax.php?t=surveyListFolders&a=mysurvey_folder_activate',{folder_id:folder_id},function(){$('.folder_item').removeClass('active');$('#folder_item_'+folder_id).addClass('active');});}
function mySurvey_folder_show_edit(element){if($(element).parent().find('.folder_item_settings').hasClass('displayNone')){$('.folder_item_settings').addClass('displayNone');$('.dots_ver_folder').removeClass('active');$(element).parent().find('.folder_item_settings').removeClass('displayNone');$(element).addClass('active');}
else{$('.folder_item_settings').addClass('displayNone');$('.dots_ver_folder').removeClass('active');$(element).parent().find('.folder_item_settings').addClass('displayNone');$(element).removeClass('active');}
event.stopPropagation();}
function mySurvey_folder_close_popup(){$('#fade').fadeOut('slow');$("#mySurvey_additional_popup").fadeOut().html();}
function mySurvey_folder_add_popup(parent_folder_id){$('#fade').fadeTo('slow',1);$("#mySurvey_additional_popup").fadeIn();$("#mySurvey_additional_popup").load('ajax.php?t=surveyListFolders&a=mysurvey_folder_add_popup',{folder_id:parent_folder_id});}
function mySurvey_folder_add(parent_folder_id){var folder_name=$("#mySurvey_folder_name").val();$("#left_content").load('ajax.php?t=surveyListFolders&a=mysurvey_folder_add',{folder_id:parent_folder_id,folder_name:folder_name},function(){mySurvey_folder_close_popup();});}
function mySurvey_folder_rename_popup(folder_id,folder_name){$('#fade').fadeTo('slow',1);$("#mySurvey_additional_popup").fadeIn();$("#mySurvey_additional_popup").load('ajax.php?t=surveyListFolders&a=mysurvey_folder_rename_popup',{folder_id:folder_id,folder_name:folder_name});}
function mySurvey_folder_rename(folder_id){var folder_name=$("#mySurvey_folder_name").val();$("#left_content").load('ajax.php?t=surveyListFolders&a=mysurvey_folder_rename',{folder_id:folder_id,folder_name:folder_name},function(){mySurvey_folder_close_popup();});}
function mySurvey_folder_delete(folder_id){$("#survey_list").load('ajax.php?t=surveyListFolders&a=mysurvey_folder_delete',{folder_id:folder_id});};var srv_meta_anketa_id=$("#srv_meta_anketa").val();var srv_meta_podstran=$("#srv_meta_podstran").val();var srv_meta_grupa=$("#srv_meta_grupa").val();var srv_meta_branching=$("#srv_meta_branching").val();function library(){var lib_tab=$("input#lib_tab").val();$('div#libraryInner ul.can_edit li.folder.can_drag, div#libraryInner li.anketa.can_drag').draggable({revert:'invalid',opacitiy:'0.5',zIndex:'1',handle:'.movable',distance:5,handle:'.folder_box, folder_container'});$('div#libraryInner ul.can_edit .folderdrop').droppable({hoverClass:'folderhover',tolerance:'pointer',drop:function(e,ui){if($(ui.draggable).attr('name')=='folder'){$('#libraryInner').load('ajax.php?t=library&a=folder_dropped',{drop:$(ui.draggable).attr('eid'),folder:$(this).attr('eid'),tab:lib_tab});}
else if($(ui.draggable).attr('name')=='library'){$('#libraryInner').load('ajax.php?t=library&a=spr_dropped',{spremenljivka:$(ui.draggable).attr('eid'),folder:$(this).attr('eid'),tab:lib_tab});}}});$('div#libraryInner div.folder_container.new_spr, div.anketa_vprasanja span.new_spr').bind('mouseover',function(event){var copy=$(event.target).closest('[copy]').attr('copy');if(copy>0&&!is_new_spr_dragable){show_tip_preview_toolbox(0,copy);}}).bind('mouseout',function(event){$("#tip_preview").hide();});}
function library_if_new(copy){$('html, body').animate({scrollTop:$('body').height()+$('#branching').height()});if_new(0,0,1,'0',copy);}
function display_knjiznica(tab){var lib_prva=$("input#lib_prva").val();$('#library_holder').load('ajax.php?t=library&a=display_knjiznica',{tab:tab,prva:lib_prva,anketa:srv_meta_anketa_id});}
function change_knjiznica(tab){var lib_prva=$("input#lib_prva").val();$('#library').load('ajax.php?t=library&a=display_knjiznica',{tab:tab,prva:lib_prva});}
function folder_rename(folder){$('#sp'+folder).load('ajax.php?t=library&a=folder_rename',{folder:folder},function(){$('#naslov_'+folder).focus();});}
function library_folder_newname(folder){var lib_tab=$("input#lib_tab").val();$('#libraryInner').load('ajax.php?t=library&a=folder_newname',{folder:folder,naslov:$('#naslov_'+folder).attr('value'),tab:lib_tab});}
function library_new_folder(folder,uid){var lib_tab=$("input#lib_tab").val();$('#libraryInner').load('ajax.php?t=library&a=new_folder',{folder:folder,uid:uid,tab:lib_tab});}
function library_delete_folder(folder){var lib_tab=$("input#lib_tab").val();$('#libraryInner').load('ajax.php?t=library&a=delete_folder',{folder:folder,tab:lib_tab});}
function library_show_more(ank_id){if($('#library_more_box_'+ank_id).hasClass('displayNone')){$('.library_more_box').addClass('displayNone');$('#library_more_box_'+ank_id).removeClass('displayNone');}
else{$('.library_more_box').addClass('displayNone');}}
function library_del_anketa(anketa,text){if(confirm(text)){var lib_tab=$("input#lib_tab").val();$('#libraryInner').load('ajax.php?t=library&a=library_del_anketa',{anketa:anketa,tab:lib_tab});}}
function library_del_myanketa(anketa,text){if(confirm(text)){var lib_tab=$("input#lib_tab").val();$('#libraryInner').load('ajax.php?t=library&a=library_del_myanketa',{anketa:anketa,tab:lib_tab});}}
function add_to_my_library(){$.post('ajax.php?t=library&a=library_add_myanketa',{anketa:srv_meta_anketa_id},function(){window.location.href='index.php?anketa='+srv_meta_anketa_id+'&tab=2';});}
function anketa_copy(ank_id){var naslov=$("#novaanketa_naslov").val();$.redirect('ajax.php?t=library&a=anketa_copy_new',{ank_id:ank_id,naslov:naslov});}
function anketa_copy_top(ank_id,hierarhija){var hierarhija=hierarhija||0;$.redirect('ajax.php?t=library&a=anketa_copy_new',{ank_id:ank_id,hierarhija:hierarhija});}
function library_folders_plusminus(folder){var lib_tab=$("input#lib_tab").val();var sortable_if=document.getElementById('folder_'+folder).style;if(sortable_if.display!="none"){$('#folder_'+folder).slideUp();$('#li'+folder).find('> .folder_box_holder > .folder_box').removeClass('open');$.post('ajax.php?t=library&a=folder_collapsed',{collapsed:1,folder:folder,tab:lib_tab});}
else{$('#folder_'+folder).slideDown();$('#li'+folder).find('> .folder_box_holder > .folder_box').addClass('open');$.post('ajax.php?t=library&a=folder_collapsed',{collapsed:0,folder:folder,tab:lib_tab});}}
function library_anketa_plusminus(anketa,_this){var disp=document.getElementById('anketa_vprasanja_'+anketa).style;if(disp.display=="block"){$('#anketa_vprasanja_'+anketa).slideUp();$(_this).find('span').removeClass('minus').addClass('plus');}else{$('#anketa_vprasanja_'+anketa).slideDown();$(_this).find('span').removeClass('plus').addClass('minus');}}
function library_if_remove(_if){var lib_tab=$("input#lib_tab").val();var lib_prva=$("input#lib_prva").val();if(confirm(lang['srv_brisiifconfirm'])){$('#libraryInner').load('ajax.php?t=library&a=if_remove',{'if':_if,anketa:srv_meta_anketa_id,tab:lib_tab,prva:lib_prva});}}
function library_brisi_spremenljivko(spremenljivka,text){var lib_tab=$("input#lib_tab").val();if(confirm(text)){$('#libraryInner').load('ajax.php?t=library&a=brisi_spremenljivko',{spremenljivka:spremenljivka,grupa:srv_meta_grupa,anketa:srv_meta_anketa_id,branching:srv_meta_branching,tab:lib_tab});}}
function alert_copy_anketa(ank_id){$('#fade').fadeTo('slow',1);$('#fullscreen').html('').fadeIn('slow').draggable({delay:100,cancel:'input, .buttonwrapper'});$('#fullscreen').load('ajax.php?t=library&a=alert_copy_anketa',{anketa:srv_meta_anketa_id,ank_id:ank_id});}
function alert_copy_anketa_cancle(){$('#fullscreen').fadeOut('slow').html('');$('#fade').fadeOut('slow');}
function anketa_archive_and_copy(anketa,ank_id){$.redirect('ajax.php?t=library&a=anketa_archive_and_copy',{anketa:anketa,ank_id:ank_id});}
function anketa_copy_no_archive(anketa,ank_id){$.redirect('ajax.php?t=library&a=anketa_copy',{anketa:srv_meta_anketa_id,ank_id:ank_id});}
function lib_show_vprasanja(){window.location='index.php?anketa='+srv_meta_anketa_id;}
function check_library(){if($('input[name=javne_ankete]:checked').val()=='1'){$('input[name=moje_ankete][value=0]').attr('checked','true');$('#moje_ankete').addClass('displayNone');}else{$('#moje_ankete').removeClass('displayNone');}}
function displayLibraryPopup(){$('#fade').fadeTo('slow',1);$('#general_popup').html('').addClass('library_popup').fadeIn('slow');$("#general_popup").load('ajax.php?t=libraryBranching&a=displayLibraryPopup',{anketa:srv_meta_anketa_id});}
function displayLibraryTab(tab){if(tab==1){$('#tab_0').removeClass('active');$('#tab_1').addClass('active');}
else{$('#tab_1').removeClass('active');$('#tab_0').addClass('active');}
$('#active_tab').val(tab);$("#tab_content").load('ajax.php?t=libraryBranching&a=displayLibraryTabContent',{anketa:srv_meta_anketa_id,tab:tab});}
function openLibraryFolder(folder_id){$('.folder_item').removeClass('active');$('#folder_item_'+folder_id).addClass('active').addClass('open');if(!$('#folder_list_'+folder_id).is(':visible')){$('#folder_list_'+folder_id).slideDown();}
var tab=$('#active_tab').val();$("#lib_question_list").load('ajax.php?t=libraryBranching&a=displayLibraryQuestionList',{anketa:srv_meta_anketa_id,tab:tab,folder_id:folder_id});$(".question_item_check").removeClass('active').attr("checked",false);$('#selected_item_counter').html('0');$("#insert_library_button").prop('disabled',true);}
function openLibrarySurvey(folder_id,type){$('.folder_item').removeClass('active');$('#'+type+'_survey_item_'+folder_id).addClass('active');var tab=$('#active_tab').val();$("#lib_question_list").load('ajax.php?t=libraryBranching&a=displayLibrarySurveyQuestionList',{anketa:srv_meta_anketa_id,tab:tab,folder_id:folder_id});$(".question_item_check").removeClass('active').attr("checked",false);$('#selected_item_counter').html('0');$("#insert_library_button").prop('disabled',true);}
function expandLibraryFolder(folder_id){if($('#folder_list_'+folder_id).is(':visible')){$('#folder_list_'+folder_id).slideUp();$('#folder_item_'+folder_id).removeClass('open');}
else{$('#folder_list_'+folder_id).slideDown();$('#folder_item_'+folder_id).addClass('open');}
event.stopPropagation();}
function showLibraryFolderEdit(element){if($(element).parent().find('.folder_item_settings').hasClass('displayNone')){$('.folder_item_settings').addClass('displayNone');$('.dots_ver_folder').removeClass('active');$(element).parent().find('.folder_item_settings').removeClass('displayNone');$(element).addClass('active');}
else{$('.folder_item_settings').addClass('displayNone');$('.dots_ver_folder').removeClass('active');$(element).parent().find('.folder_item_settings').addClass('displayNone');$(element).removeClass('active');}
event.stopPropagation();}
function closeAdditionalPopup(){$("#lib_additional_popup").fadeOut().html();}
function displayAddFolderPopup(parent_folder_id,uid){var tab=$('#active_tab').val();$("#lib_additional_popup").fadeIn();$("#lib_additional_popup").load('ajax.php?t=libraryBranching&a=addFolderPopup',{anketa:srv_meta_anketa_id,tab:tab,folder_id:parent_folder_id,uid:uid});}
function displayRenameFolderPopup(folder_id,folder_name){var tab=$('#active_tab').val();$("#lib_additional_popup").fadeIn();$("#lib_additional_popup").load('ajax.php?t=libraryBranching&a=renameFolderPopup',{anketa:srv_meta_anketa_id,tab:tab,folder_id:folder_id,folder_name:folder_name});}
function addLibraryFolder(parent_folder_id,uid){var tab=$('#active_tab').val();var folder_name=$("#lib_folder_name").val();$("#lib_folder_list").load('ajax.php?t=libraryBranching&a=addFolder',{anketa:srv_meta_anketa_id,tab:tab,folder_id:parent_folder_id,uid:uid,folder_name:folder_name});}
function deleteLibraryFolder(folder_id){var tab=$('#active_tab').val();$("#lib_folder_list").load('ajax.php?t=libraryBranching&a=deleteFolder',{anketa:srv_meta_anketa_id,tab:tab,folder_id:folder_id});}
function renameLibraryFolder(folder_id){var tab=$('#active_tab').val();var folder_name=$("#lib_folder_name").val();$("#lib_folder_list").load('ajax.php?t=libraryBranching&a=renameFolder',{anketa:srv_meta_anketa_id,tab:tab,folder_id:folder_id,folder_name:folder_name});}
function toggleLibrarySurveyQuestions(folder_id){if($('#survey_title_'+folder_id).hasClass('active')){$('#survey_title_'+folder_id).removeClass('active');$('#survey_questions_'+folder_id).hide();}
else{$('#survey_title_'+folder_id).addClass('active');$('#survey_questions_'+folder_id).show();}}
function selectLibraryItem(item_id){if($('#question_item_holder_'+item_id).hasClass('active')){$('#question_item_holder_'+item_id).removeClass('active');$('#question_item_check_'+item_id).attr("checked",false);}
else{$('#question_item_holder_'+item_id).addClass('active');$('#question_item_check_'+item_id).attr("checked",true);}
var count=$('.question_item_check:checkbox:checked').length;$('#selected_item_counter').html(count);if(count>0){$("#insert_library_button").prop('disabled',false);}
else{$("#insert_library_button").prop('disabled',true);}}
function showLibraryItemEdit(element){if($(element).parent().find('.item_settings').hasClass('displayNone')){$('.item_settings').addClass('displayNone');$('.dots_ver_item').removeClass('active');$(element).parent().find('.item_settings').removeClass('displayNone');$(element).addClass('active');}
else{$('.item_settings').addClass('displayNone');$('.dots_ver_item').removeClass('active');$(element).parent().find('.item_settings').addClass('displayNone');}
event.stopPropagation();}
function deleteLibraryItem(item_id,item_type){$.post('ajax.php?t=libraryBranching&a=deleteItem',{anketa:srv_meta_anketa_id,item_id:item_id,item_type:item_type},function(){$('#question_item_holder_'+item_id).remove();});event.stopPropagation();}
function displayRenameLibraryItemPopup(item_id,type){var tab=$('#active_tab').val();$("#lib_additional_popup").fadeIn();$("#lib_additional_popup").load('ajax.php?t=libraryBranching&a=displayRenameLibraryItemPopup',{anketa:srv_meta_anketa_id,tab:tab,item_id:item_id,type:type});event.stopPropagation();}
function renameLibraryItem(item_id,type){var tab=$('#active_tab').val();var title=$('#lib_element_name').val();var folder_id=$('.folder_item.active').attr("folder-id");closeAdditionalPopup();$("#lib_question_list").load('ajax.php?t=libraryBranching&a=renameItem',{anketa:srv_meta_anketa_id,tab:tab,item_id:item_id,type:type,title:title,folder_id:folder_id});}
function dropLibraryItem(item_id,item_type,folder_id){$.post('ajax.php?t=libraryBranching&a=dropItem',{anketa:srv_meta_anketa_id,item_id:item_id,item_type:item_type,folder_id:folder_id},function(){$('#question_item_holder_'+item_id).remove();});}
function initDragLibraryItem(){$('.question_item_info').draggable({containment:$('#general_popup'),helper:'clone',});$(".droppable_folder").droppable({accept:".question_item_info",tolerance:"pointer",hoverClass:"drag-hover",drop:function(event,ui){var item_id=ui.draggable.attr('item-id');var item_type=ui.draggable.attr('item-type');var folder_id=$(this).attr("folder-id");dropLibraryItem(item_id,item_type,folder_id);}});}
function initHideLibraryArrows(){$('ul.folder_list').each(function(){if($(this).is(':empty')){var id_string=$(this).attr("id");var id=id_string.substring(12);$('#folder_item_'+id).addClass('no_arrow');}});}
function insertLibraryItemsIntoSurvey(){var items=[];var multiple=false;var different=false;var prev='';var subtype='';$('.question_item_check:checkbox:checked').each(function(){var id_string=$(this).attr("id");var id=id_string.substring(20);var type=$(this).attr("item-type");subtype=$(this).attr("item-subtype");items.push(id+'_'+type);if(prev!=''){multiple=true;if(prev!=subtype){different=true;}}
prev=subtype;});var note=subtype;if(different){note='m';}
else if(multiple){note=subtype+'m';}
else{note=subtype;}
console.log(note)
$("#branching").load('ajax.php?t=libraryBranching&a=addIntoSurvey',{anketa:srv_meta_anketa_id,items:items},function(){popupClose();actionNotePopup('lib_add_to_survey_'+note,'success');});}
function displayAddIntoLibraryPopup(item_id,type){$('#fade').fadeTo('slow',1);$('#general_popup').html('').fadeIn('slow');$("#general_popup").load('ajax.php?t=libraryBranching&a=displayAddIntoLibraryPopup',{anketa:srv_meta_anketa_id,item_id:item_id,type:type});}
function addIntoLibrary(item_id,type){var title=$('#lib_item_title').val();var folder_id=$('#lib_item_folder').val();$.post('ajax.php?t=libraryBranching&a=addIntoLibrary',{anketa:srv_meta_anketa_id,item_id:item_id,type:type,title:title,folder_id:folder_id},function(){popupClose();actionNotePopup('lib_add_to_lib_type'+type,'success');});};function collectDataAjax(){var srv_meta_anketa_id=$("#srv_meta_anketa_id").val();$('#fade').fadeTo('slow',1);$('#collect_data_popup').fadeIn('slow',function(){$.ajax({type:'POST',async:false,url:'ajax.php?t=dataFile&a=prepareFiles',data:{anketa:srv_meta_anketa_id},success:function(response){if(response=='1'){location.reload();}
else{genericAlertPopup('srv_collectdata_failed');}}});});};function analiza_init(){var srv_site_url=$("#srv_site_url").val();$("#link_filter_profile").live("click",function(event){if(event.button!=0){return true;}
analiza_show_filter_profiles();return false;});$("#link_status_casi").live("click",function(event){if(event.button!=0){return true;}
vnosi_show_status_casi();return false;});$(".anl_click_missing").live('click',function(){toggle_click_missing(this)});$(".anl_click_missing_hide").live('click',function(){var variabla=$(this).attr('id').substr(21);toggle_click_missing($('#click_missing_'+variabla))});$("#status_casi").live('click',function(event){var $target=$(event.target);if($target.hasClass('option')){pid=$target.attr('value');vnosi_show_casi_data(pid);}});$('#div_analiza_single_var_close_button').live('click',function(event){hideAnalizaSingleVarPopup();});$('#dataTable td .delete').live('click',function(event){var usr_id=$(this).parent().parent().find('.data_uid').html();var row=$(this).parent().parent();var note='srv_ask_delete_data';if($(this).parent().parent().find('.invitation_cell').length==1){note='srv_ask_delete_inv';}
$.post('ajax.php?a=outputLanguageNote',{note:note},function(lang_note){if(confirm(lang_note)){if(usr_id>0){$.post('ajax.php?a=dataDeleteRow',{anketa:srv_meta_anketa_id,usr_id:usr_id},function(response){if(response=='0'){row.hide();}else{genericAlertPopup('alert_parameter_response',response);}});}else{genericAlertPopup('alert_delete_error');}}});});$('#dataTable td .delete_data_row').live('click',function(event){if($(this).is(':checked')){$("#switch_on").hide();$("#switch_off").show();$("#mass_delete_button").show();}
else if($('#dataTable td .delete_data_row:checked').length==0){$("#switch_on").show();$("#switch_off").hide();$("#mass_delete_button").hide();}});$('#dataTable td .edit_square').live('click',function(event){var uid=$(this).parent().parent().find('.data_uid').html();var href=srv_site_url+'main/survey/edit_anketa.php?anketa='+srv_meta_anketa_hash+'&usr_id='+uid+'';if(uid>0){window.open(href,'_blank');}});$('#dataTable td .edit').live('click',function(event){var uid=$(this).parent().parent().find('.data_uid').html();var href=srv_site_url+'admin/survey/index.php?anketa='+srv_meta_anketa_id+'&a=data&m=quick_edit&usr_id='+uid+'&quick_view=0';if(uid>0){window.location=href;}});$('#dataTable td .pdf').live('click',function(event){var uid=$(this).parent().parent().find('.data_uid').html();if(uid>0){var href=srv_site_url+'admin/survey/izvoz.php?a=pdf_results&anketa='+srv_meta_anketa_id+'&usr_id='+uid;$.post('ajax.php?a=makeEncodedIzvozUrlString',{anketa:srv_meta_anketa_id,string:href},function(url){window.open(url,'_blank');});}});$('#dataTable td .rtf').live('click',function(event){var uid=$(this).parent().parent().find('.data_uid').html();if(uid>0){var href=srv_site_url+'admin/survey/izvoz.php?a=rtf_results&anketa='+srv_meta_anketa_id+'&usr_id='+uid;$.post('ajax.php?a=makeEncodedIzvozUrlString',{anketa:srv_meta_anketa_id,string:href},function(url){window.open(url,'_blank');});}});$('#dataTable td .evoli').live('click',function(event){var uid=$(this).parent().parent().find('.data_uid').html();if(uid>0){var url=srv_site_url+'admin/survey/index.php?anketa='+srv_meta_anketa_id+'&a=data&m=evoli&usr_id='+uid;window.open(url,'_blank');}});$('#dataTable td .evoli2').live('click',function(event){var uid=$(this).parent().parent().find('.data_uid').html();if(uid>0){var url=srv_site_url+'admin/survey/index.php?anketa='+srv_meta_anketa_id+'&a=data&m=evoli&lang=dan&usr_id='+uid;window.open(url,'_blank');}});$('#dataTable td .evoli3').live('click',function(event){var uid=$(this).parent().parent().find('.data_uid').html();if(uid>0){var url=srv_site_url+'admin/survey/index.php?anketa='+srv_meta_anketa_id+'&a=data&m=evoli&lang=slo&usr_id='+uid;window.open(url,'_blank');}});$('#dataTable td .evoliEM').live('click',function(event){var uid=$(this).parent().parent().find('.data_uid').html();if(uid>0){var url=srv_site_url+'admin/survey/index.php?anketa='+srv_meta_anketa_id+'&a=data&m=evoli_employmeter&usr_id='+uid;window.open(url,'_blank');}});$('#dataTable td .evoliEM2').live('click',function(event){var uid=$(this).parent().parent().find('.data_uid').html();if(uid>0){var url=srv_site_url+'admin/survey/index.php?anketa='+srv_meta_anketa_id+'&a=data&m=evoli_employmeter&lang=dan&usr_id='+uid;window.open(url,'_blank');}});$('#dataTable td .evoliEM3').live('click',function(event){var uid=$(this).parent().parent().find('.data_uid').html();if(uid>0){var url=srv_site_url+'admin/survey/index.php?anketa='+srv_meta_anketa_id+'&a=data&m=evoli_employmeter&lang=slo&usr_id='+uid;window.open(url,'_blank');}});$('#dataTable td .mfdps').live('click',function(event){var uid=$(this).parent().parent().find('.data_uid').html();if(uid>0){var url=srv_site_url+'admin/survey/index.php?anketa='+srv_meta_anketa_id+'&a=data&m=mfdps&usr_id='+uid;window.open(url,'_blank');}});$('#dataTable td .borza').live('click',function(event){var uid=$(this).parent().parent().find('.data_uid').html();if(uid>0){var url=srv_site_url+'admin/survey/index.php?anketa='+srv_meta_anketa_id+'&a=data&m=borza&usr_id='+uid;window.open(url,'_blank');}});$("#span_rsdl_legend_togle").live("click",function(event){$("#span_color_residual_legend1").toggle();$("#span_color_residual_legend2").toggle();});$("td.fr_inspect").live("click",function(event){doInspectFromFrequency(this,event);return false;});$("td.mg_inspect").live("click",function(event){doInspectMultiGrid(this,event);return false;});$("td.dmg_inspect").live("click",function(event){doInspectDoubleMultiGrid(this,event);return false;});$("td.mc_inspect").live("click",function(event){doInspectMultiCheck(this,event);return false;});$("td.mt_inspect").live("click",function(event){doInspectMultiText(this,event);return false;});$('.div_analiza_holder').live({mouseenter:function(){$(this).find('.div_analiza_icons').stop().animate({opacity:1},600);},mouseleave:function(){$(this).find('.div_analiza_icons').stop().animate({opacity:0},600);}});var windowWidth=$(window).width();var windowHeight=$(window).height();var tableWidth=$('#dataTable').width();var tableHeight=$('#dataTable').height();if(tableWidth>windowWidth&&tableHeight>0.8*windowHeight){$('#tableContainer').live({mouseenter:function(){$(this).find('#dataTableScroller').stop().animate({opacity:1},600);},mouseleave:function(){$(this).find('#dataTableScroller').stop().animate({opacity:0},600);}});}};function statusCasiAction(action){if(action=='change'){pid=$("#vnosi_current_status_casi").val();$.post('ajax.php?a=vnosi_change_status_casi',{anketa:srv_meta_anketa_id,pid:pid},function(){return reloadData();});}
else if(action=='run'){pid=$("#status_casi .active").attr('value');var statusCnt=0;var srv_userstatus="";prefix="";$("input[name^=srv_userstatus]:checked").each(function(){srv_userstatus=srv_userstatus+prefix+$(this).attr('id');prefix=",";statusCnt=statusCnt+1;});$.post('ajax.php?a=vnosi_run_status_casi',{anketa:srv_meta_anketa_id,pid:pid,status:srv_userstatus},function(){$("#vnosi_current_status_casi").val(pid);return reloadData();});$("#div_status_values").hide(200);$("#div_status_values").html('');}
else if(action=='run_rezanje'){var rezanje=$("input[name=rezanje]:checked").val();var rezanje_meja_sp=$("select[name=rezanje_meja_sp]").val();var rezanje_meja_zg=$("select[name=rezanje_meja_zg]").val();var rezanje_predvidena_sp=$("select[name=rezanje_predvidena_sp]").val();var rezanje_predvidena_zg=$("select[name=rezanje_predvidena_zg]").val();var rezanje_preskocene=0;if($("input[name=rezanje_preskocene]:checked").length>0)
rezanje_preskocene=1;$.post('ajax.php?a=vnosi_run_rezanje_casi',{anketa:srv_meta_anketa_id,rezanje:rezanje,rezanje_meja_sp:rezanje_meja_sp,rezanje_meja_zg:rezanje_meja_zg,rezanje_predvidena_sp:rezanje_predvidena_sp,rezanje_predvidena_zg:rezanje_predvidena_zg,rezanje_preskocene:rezanje_preskocene},function(){return reloadData();});$("#div_status_values").hide(200);$("#div_status_values").html('');}
else if(action=='cancle'){$("#div_status_values").hide(200);$('#fade').fadeOut('slow');$("#div_status_values").html('');}
else if(action=='newName'){$("#statusCasiCoverDiv").show();$("#newProfile").show();}
else if(action=='newSave'){pid=$("#status_casi .active").attr('value');name=$("#newProfileName").val();$("#newProfile").hide();$("#statusProfileCoverDiv").fadeOut();var statusCnt=0;var srv_userstatus="";prefix="";$("input[name^=srv_userstatus]:checked").each(function(){srv_userstatus=srv_userstatus+prefix+$(this).attr('id');prefix=",";statusCnt=statusCnt+1;});$.post('ajax.php?a=vnosi_save_status_casi',{anketa:srv_meta_anketa_id,pid:pid,name:name,status:srv_userstatus},function(newId){$("#vnosi_current_status_casi").append($("<option></option>").attr("value",newId).attr("selected",true).text(name));return reloadData();});$("#div_status_values").hide(200);$('#fade').fadeOut('slow');$("#div_status_values").html('');}
else if(action=='deleteAsk'){$("#statusProfileCoverDiv").show();$("#deleteProfileDiv").show();}
else if(action=='deleteCancle'){$("#deleteProfileDiv").hide();$("#statusProfileCoverDiv").fadeOut();}
else if(action=='deleteConfirm'){pid=$("#status_casi .active").attr('value');$.post('ajax.php?a=vnosi_delete_status_casi',{anketa:srv_meta_anketa_id,pid:pid},function(){$("#vnosi_current_status_casi").val('1');return reloadData();});$("#deleteProfileDiv").hide();$("#statusProfileCoverDiv").fadeOut();$("#div_status_values").hide(200);$('#fade').fadeOut('slow');$("#div_status_values").html('');}}
function vnosi_show_status_casi()
{$('#fade').fadeTo('slow',1);$("#div_status_values").load('ajax.php?a=vnosi_show_status_casi',{anketa:srv_meta_anketa_id});var msg=$('#div_status_values');var height=$(window).height();var width=$(document).width();var left=width-(msg.width())-42;var top=height/2-(msg.height()/2);$("#div_status_values").show(200).draggable({delay:100,cancel:'input, .buttonwrapper, .select'});}
function vnosi_show_casi_data(pid){$("#div_status_values").load('ajax.php?a=vnosi_show_status_casi',{anketa:srv_meta_anketa_id,pid:pid});}
function vnosi_show_rezanje_casi()
{$('#fade').fadeTo('slow',1);$("#div_status_values").load('ajax.php?a=vnosi_show_rezanje_casi',{anketa:srv_meta_anketa_id});var msg=$('#div_status_values');var height=$(window).height();var width=$(document).width();var left=width-(msg.width())-42;var top=height/2-(msg.height()/2);$("#div_status_values").show(200);}
function changeViewMissingProfile(_profileId){var _pid=_profileId.split('missing_profile_');var profileId=_pid[1];$("#div_analiza_missing_values").load('ajax.php?a=analiza_changeViewMissingProfile',{anketa:srv_meta_anketa_id,podstran:srv_meta_podstran,profileId:profileId});}
function changeMissingProfileDropdown(){var profileId=$("#analiza_current_missing_profile").val();$.post('ajax.php?a=changeMissingProfileDropdown',{anketa:srv_meta_anketa_id,podstran:srv_meta_podstran,profileId:profileId},function(){$("#missingi").load('ajax.php?a=analiza_update_missing_checkbox',{anketa:srv_meta_anketa_id,podstran:srv_meta_podstran,profileId:profileId},function(){return reloadData();});});}
function reloadData(subwindow){window.location.reload();return false;}
function analizaMissingProfileDropdownReloadData(){$("#div_analiza_missing_profile_dropdown").load('ajax.php?a=analizaMissingProfileDropdownReloadData',{anketa:srv_meta_anketa_id,podstran:srv_meta_podstran});}
function analiza_show_settings(visible){if(visible=='true'){$("#div_analiza_missing_values").show().draggable({delay:500,cancel:'input, .buttonwrapper'});}
else{$("#div_analiza_missing_values").hide();}}
function showspremenljivkaSingleVarPopup(id){var size="location=0,height=500,width=700,scrollbars=1,fullscreen=0,menubar=0,status=0,titlebar=0,toolbar=0,channelmode=0,directories=0";var recipe=window.open('','RecipeWindow',size);$.post('ajax.php?t=analysis&a=showspremenljivkaSingleVarPopup&setSkipCreate=1',{anketa:srv_meta_anketa_id,id:id},function(response){recipe.document.open();recipe.document.write(response);recipe.document.close();recipe.focus();return false;});}
function showSpremenljivkaTextAnswersPopup(id){$('#fade').fadeTo('slow',1);$('#analysis_popup').html('').fadeIn('slow');$('#analysis_popup').load('ajax.php?t=analysis&a=showSpremenljivkaTextAnswersPopup&setSkipCreate=1',{anketa:srv_meta_anketa_id,id:id});}
function showAnalizaSingleVarPopup(id,zaPodstran,navedbe,loop,_this){var title=encodeURIComponent($(_this).html());$('#fade').fadeTo('slow',1);$('#analysis_popup').html('').fadeIn('slow');$('#analysis_popup').load('ajax.php?t=analysis&a=showAnalizaSingleVarPopup&setSkipCreate=1',{anketa:srv_meta_anketa_id,podstran:zaPodstran,zaPodstran:zaPodstran,id:id,navedbe:navedbe,loop:loop,title:title});}
function showAnalizaSingleChartPopup(id,zaPodstran){var size="location=0,height=550,width=830,scrollbars=1,fullscreen=0,menubar=0,status=0,titlebar=0,toolbar=0,channelmode=0,directories=0";var recipe=window.open('','RecipeWindow',size);$.post('ajax.php?t=analysis&a=showAnalizaSingleVarPopup&setSkipCreate=1',{anketa:srv_meta_anketa_id,podstran:zaPodstran,zaPodstran:zaPodstran,id:id},function(response){recipe.document.open();recipe.document.write(response);recipe.document.close();recipe.focus();return false;});}
function printPreviewSingleVar(id,auto){var size="location=0,height=700,width=700,scrollbars=1,fullscreen=0,menubar=0,status=0,titlebar=0,toolbar=0,channelmode=0,directories=0";var recipe=window.open('','RecipeWindow',size);$.post('ajax.php?t=analysis&a=printPreview_spremenljivka&setSkipCreate=1',{anketa:srv_meta_anketa_id,id:id},function(response){recipe.document.open();recipe.document.write(response);recipe.document.close();recipe.focus();return false;});}
function hideAnalizaSingleVarPopup(){$('#fade').fadeOut('slow');$('#fullscreen').fadeOut('slow').html('');}
function show_single_missing(id,what){if(what==0){$('tr[name=missing_detail_'+id+']').each(function(){$(this).removeClass('displayNone');});$("#single_missing_0"+id).hide();$("#single_missing_1"+id).show();$("#single_missing_suma_"+id).show();$("#single_missing_suma_freq_"+id).show();$("#single_missing_percent_"+id).hide();$("#single_missing_title_"+id).hide();}
else{$('tr[name=missing_detail_'+id+']').each(function(){$(this).addClass('displayNone');});$("#single_missing_0"+id).show();$("#single_missing_1"+id).hide();$("#single_missing_suma_"+id).hide();$("#single_missing_suma_freq_"+id).hide();$("#single_missing_percent_"+id).show();$("#single_missing_title_"+id).show();}}
function show_single_other(id,what){if(what==0){$('tr[name=other_detail_'+id+']').each(function(){$(this).removeClass('displayNone');});$("#single_other_suma_"+id).show();$("#single_other_suma_freq_"+id).show();$("#single_other_freq_"+id).addClass('silver');$("#single_other_perc_"+id).addClass('silver');$("#single_other_gray_suma_"+id).hide();$("#single_other_0"+id).hide();$("#single_other_1"+id).show();}else{$('tr[name=other_detail_'+id+']').each(function(){$(this).addClass('displayNone');});$("#single_other_suma_"+id).hide();$("#single_other_suma_freq_"+id).hide();$("#single_other_freq_"+id).removeClass('silver');$("#single_other_perc_"+id).removeClass('silver');$("#single_other_0"+id).show();$("#single_other_1"+id).hide();}}
function analiza_show_filter_profiles()
{$('#fade').fadeTo('slow',1);$("#div_analiza_filter_profiles").html("");$("#div_analiza_filter_profiles").load('ajax.php?a=analiza_loadFilterProfile',{anketa:srv_meta_anketa_id,podstran:srv_meta_podstran});var msg=$('#div_analiza_filter_profiles');var height=$(window).height();var width=$(document).width();var left=width-(msg.width())-42;var top=height/2-(msg.height()/2);$("#div_analiza_filter_profiles").show(200).draggable({delay:100,cancel:'input, .buttonwrapper'});}
function changeFilterProfileDropdown(){var profileId=$("#analiza_current_filter_profile").val();$.post('ajax.php?a=changeFilterProfileDropdown',{anketa:srv_meta_anketa_id,podstran:srv_meta_podstran,profileId:profileId},function(){return reloadData();});}
function changeViewFilterProfile(_profileId){var _pid=_profileId.split('filter_profile_');var profileId=_pid[1];$("#div_analiza_filter_profiles").load('ajax.php?a=analiza_changeViewFilterProfile',{anketa:srv_meta_anketa_id,podstran:srv_meta_podstran,profileId:profileId});}
function hideFilterProfile(){$('#fade').fadeOut('slow');$("#div_analiza_filter_profiles").hide("slow");}
function analiza_runFilterProfile(){var _pid=$(".option.active").attr("id").split('filter_profile_');var pid=_pid[1];$.post('ajax.php?a=analiza_runFilterProfile',{anketa:srv_meta_anketa_id,profileId:pid},function(){return reloadData();});}
function createFilterProfile(){var profileName=$("#newFilterProfileName").val();$.post('ajax.php?a=analiza_createFilterProfile',{anketa:srv_meta_anketa_id,podstran:srv_meta_podstran,profileName:profileName},function(){$("#div_analiza_filter_profiles").load('ajax.php?a=analiza_loadFilterProfile',{anketa:srv_meta_anketa_id,podstran:srv_meta_podstran},function(){return reloadData();});});}
function analizaFilterProfileDropdownReloadData(){if(__vnosi==0)
$("#div_analiza_filter_profile_dropdown").load('ajax.php?a=analizaFilterProfileDropdownReloadData',{anketa:srv_meta_anketa_id,podstran:srv_meta_podstran});else
location.reload();}
function deleteFilterProfile(){var profileId=$("#deleteFilterProfileId").val();$.post('ajax.php?a=analiza_deleteFilterProfile',{anketa:srv_meta_anketa_id,podstran:srv_meta_podstran,profileId:profileId},function(){$("#div_analiza_filter_profiles").load('ajax.php?a=analiza_loadFilterProfile',{anketa:srv_meta_anketa_id,podstran:srv_meta_podstran});if(__vnosi==0)
analizaFilterProfileDropdownReloadData();});}
function renameFilterProfile(){var newProfileName=$("#renameFilterProfileName").val();var profileId=$("#renameFilterProfileId").val();$.post('ajax.php?a=analiza_renameFilterProfile',{anketa:srv_meta_anketa_id,podstran:srv_meta_podstran,newProfileName:newProfileName,profileId:profileId},function(){if(__vnosi==0)
analizaFilterProfileDropdownReloadData();$("#div_analiza_filter_profiles").load('ajax.php?a=analiza_loadFilterProfile',{anketa:srv_meta_anketa_id,podstran:srv_meta_podstran});});}
function toggle_click_missing(what){var variabla=$(what).attr('id').substr(14);var state=$(what).attr('value');if(state===''){state=1;}
if(state==0){$('tr[name=missing_detail_'+variabla+']').each(function(){$(this).removeClass('displayNone');});$(what).attr('value',1);$(what).find('.arrow2_d').removeClass('arrow2_d').addClass('arrow2_u');}
else if(state==1||state==2||state==""){$('tr[name=missing_detail_'+variabla+']').each(function(){$(this).addClass('displayNone');});$(what).attr('value',0);$(what).find('.arrow2_u').removeClass('arrow2_u').addClass('arrow2_d');}}
function show_single_percent(id,status){if(status==1){if($('#freq-p_button_1_'+id).hasClass('active')){if($('#freq-p_button_2_'+id).hasClass('active')){$('[name=single_sums_percent_cnt_'+id+']').each(function(){$(this).hide().parent().parent().removeClass('freq_row');});$('#freq-p_button_1_'+id).removeClass('active');}}
else{$('[name=single_sums_percent_cnt_'+id+']').each(function(){$(this).show().parent().parent().addClass('freq_row');});$('#freq-p_button_1_'+id).addClass('active');}}
else if(status==2){if($('#freq-p_button_2_'+id).hasClass('active')){if($('#freq-p_button_1_'+id).hasClass('active')){$('[name=single_sums_percent_'+id+']').each(function(){$(this).hide().parent().parent().removeClass('percent_row');});$('#freq-p_button_2_'+id).removeClass('active');}}
else{$('[name=single_sums_percent_'+id+']').each(function(){$(this).show().parent().parent().addClass('percent_row');});$('#freq-p_button_2_'+id).addClass('active');}}}
function printAnaliza(ime)
{if(ime=='Crosstab')
var divToPrint=document.getElementById('crosstab_tables');else if(ime=='MultiCrosstab')
var divToPrint=document.getElementById('mc_holder');else if(ime=='Means')
var divToPrint=document.getElementById('div_means_data');else if(ime=='TTest')
var divToPrint=document.getElementById('ttestResults');else if(ime=='Break')
var divToPrint=document.getElementById('breakResults');else if(ime=='Status')
var divToPrint=document.getElementById('surveyStatistic');else if(ime=='EditsAnalysis')
var divToPrint=document.getElementById('surveyEditsAnalysis');else if(ime=='Vpogled')
var divToPrint=document.getElementById('edit_survey_data');else if(ime=='CReport')
var divToPrint=document.getElementById('custom_report_elements');else
var divToPrint=document.getElementById('div_analiza_data');newWin=window.open('',ime,'scrollbars=1');newWin.document.write('<html><head><title>Okno za tiskanje - '+ime+'</title>');newWin.document.write('<meta http-equiv="Cache-Control" content="no-store"/>');newWin.document.write('<meta http-equiv="Pragma" content="no-cache"/>');newWin.document.write('<meta http-equiv="Expires" content="0"/>');newWin.document.write('<link rel="stylesheet" href="css/print.css">');newWin.document.write('<link rel="stylesheet" href="css/style_print.css" media="print">');newWin.document.write('</head><body class="print_analiza">');newWin.document.write('<div id="printIcon">');newWin.document.write('<a href="#" onclick="window.print(); return false;">Natisni</a>');newWin.document.write('</div>');newWin.document.write(divToPrint.innerHTML);newWin.document.write('</body></html>');newWin.focus();newWin.document.close();}
function scrollToProfile(_target){var target=$(_target);if(target.length){var top=target.offset().top;if($('#status_profile').length){top=target.offset().top-$('#status_profile').offset().top;}else if($('#missing_profile').length){top=target.offset().top-$('#missing_profile').offset().top;}
$('#status_profile').animate({scrollTop:top});return false;}}
function cancleArchiveAnaliza(){$('#fullscreen').hide().removeClass('PopUpNarrow').removeClass('divPopUp');$('#fade').fadeOut('slow');}
function doArchiveAnaliza(){$("#fullscreen").addClass('PopUpNarrow').addClass('divPopUp');$("#fullscreen").load('ajax.php?a=doArchiveAnaliza',{anketa:srv_meta_anketa_id,podstran:srv_meta_podstran},function(){$('#fade').fadeTo('slow',1);$('#fullscreen').show();});}
function submitArchiveAnaliza(){$("#fullscreen").show();var name=$("#newAnalysisArchiveName").val();var note=$("#newAnalysisArchiveNote").val();var access=$("[name=newAnalysisArchiveAccess]:checked").val();var access_password=$("#newAnalysisArchiveAccessPassword").val();var duration=$("#newAnalysisArchiveDuration").val();var durationType=$("[name=newAADurationType]:checked").val();$("#fullscreen").load('ajax.php?a=submitArchiveAnaliza',{anketa:srv_meta_anketa_id,podstran:srv_meta_podstran,name:name,note:note,access:access,duration:duration,durationType:durationType,access_password:access_password},function(){$("#fullscreen").show();});}
function closeArchiveAnaliza(){$('#fullscreen').hide().removeClass('PopUpNarrow').removeClass('divPopUp');$('#fade').fadeOut('slow');}
function emailArchiveAnaliza(aid){$("#fullscreen").show();$("#fullscreen").load('ajax.php?a=emailArchiveAnaliza',{anketa:srv_meta_anketa_id,podstran:srv_meta_podstran,aid:aid},function(){$('#fullscreen').show();});}
function sendEmailArchiveAnaliza(aid){var subject=$("#email_archive_subject").val();var editor=CKEDITOR.instances.email_archive_text;try{var content=editor.getData();editor.isNotDirty=true;}catch(e){content=$('#email_archive_text').val();}
var emails=$("#email_archive_list").val();$("#fullscreen").load('ajax.php?a=sendEmailArchiveAnaliza',{anketa:srv_meta_anketa_id,podstran:srv_meta_podstran,aid:aid,subject:subject,text:content,emails:emails},function(){});}
function AnalysisArchiveEdit(aid){$('#fade').fadeTo('slow',1);$("#fullscreen").load('ajax.php?a=editArchiveAnaliza',{anketa:srv_meta_anketa_id,podstran:srv_meta_podstran,aid:aid},function(){$('#fullscreen').show();});}
function saveArchiveAnaliza(aid){var name=$("#newAnalysisArchiveName").val();var note=$("#newAnalysisArchiveNote").val();var access=$("[name=newAnalysisArchiveAccess]:checked").val();var access_password=$("#newAnalysisArchiveAccessPassword").val();var duration=$("#newAnalysisArchiveDuration").val();$("#fullscreen").load('ajax.php?a=saveArchiveAnaliza',{anketa:srv_meta_anketa_id,podstran:srv_meta_podstran,aid:aid,name:name,note:note,access:access,duration:duration,access_password:access_password},function(response){if(response>0){$('#div_archive_content').load('ajax.php?a=refreshArchiveAnaliza',{anketa:srv_meta_anketa_id,podstran:srv_meta_podstran},function(){$('#fullscreen').hide();$('#fade').fadeOut('slow');});}else{genericAlertPopup('error');$('#fullscreen').hide();$('#fade').fadeOut('slow');}});}
function toggleAnalysisArchiveAccessPassword(){var value=$("input[name=newAnalysisArchiveAccess]:checked").val();var pass_div=document.getElementById("newAnalysisArchiveAccessPasswordDiv");value==2?pass_div.style.display='block':pass_div.style.display='none';}
function AnalysisArchiveDelete(aid){$('#fade').fadeTo('slow',1);$("#fullscreen").load('ajax.php?a=askDeleteArchiveAnaliza',{anketa:srv_meta_anketa_id,podstran:srv_meta_podstran,aid:aid},function(){$('#fullscreen').show();});}
function doDeleteArchiveAnaliza(aid){$.post('ajax.php?a=doDeleteArchiveAnaliza',{anketa:srv_meta_anketa_id,podstran:srv_meta_podstran,aid:aid},function(response){if(response>0){$('#div_archive_content').load('ajax.php?a=refreshArchiveAnaliza',{anketa:srv_meta_anketa_id,podstran:srv_meta_podstran},function(){$('#fullscreen').hide();$('#fade').fadeOut('slow');});}else{genericAlertPopup('error');$('#fullscreen').hide();$('#fade').fadeOut('slow');}});}
function createArchiveBeforeEmail(){$('#fade').fadeTo('slow',1);$.post('ajax.php?a=createArchiveBeforeEmail',{anketa:srv_meta_anketa_id,podstran:srv_meta_podstran},function(response){if(parseInt(response)>0){var aid=parseInt(response);$("#fullscreen").load('ajax.php?a=emailArchiveAnaliza',{anketa:srv_meta_anketa_id,podstran:srv_meta_podstran,aid:aid},function(){$('#fullscreen').addClass("divPopUp").show();});}else{if(parseInt(response)==-1){genericAlertPopup('alert_no_archive_response',response);}else{genericAlertPopup('alert_archive_error_response',response);}
$('#fullscreen').removeClass("PopUpNarrow divPopUp").hide();$('#fade').fadeOut('slow');}});}
function showHidenTextRow($sequence){$("tr[name=valid_row_"+$sequence+"].displayNone").each(function(){$(this).removeClass('displayNone')});$("div#valid_row_togle_"+$sequence).addClass('displayNone');}
function showHidenTextTable(spid,num_records,loop_id){var srv_site_url=$("#srv_site_url").val();if($("#srv_meta_podstran").length==0){var podstran=srv_meta_podstran;}
else{var podstran=$("#srv_meta_podstran").val();}
if($("#srv_meta_anketa_id").length==0){var srv_meta_anketa_id=srv_meta_anketa_id;}
else{var srv_meta_anketa_id=$("#srv_meta_anketa_id").val();}
if(podstran=='frequency'){$('#freq_'+spid+'[loop="'+loop_id+'"]').load(srv_site_url+'/admin/survey/ajax.php?t=analysis&a=show_spid_more_table',{anketa:srv_meta_anketa_id,podstran:podstran,spid:spid,num_records:num_records,loop_id:loop_id});}
else if(podstran=='sumarnik'){$('#sum_'+spid+'[loop="'+loop_id+'"]').load(srv_site_url+'/admin/survey/ajax.php?t=analysis&a=show_spid_more_table',{anketa:srv_meta_anketa_id,podstran:podstran,spid:spid,num_records:num_records,loop_id:loop_id});}
else if(podstran=='charts'){$('#chart_'+spid+'_loop_'+loop_id).load(srv_site_url+'/admin/survey/ajax.php?t=charts&a=show_spid_more_table',{anketa:srv_meta_anketa_id,spid:spid,num_records:num_records,loop:loop_id});}}
function show_navedbe(spid,status){if(status==1){$("#div_navedbe_1_"+spid).removeClass('displayNone');$("#div_navedbe_2_"+spid).addClass('displayNone');}
else if(status==2){$("#div_navedbe_1_"+spid).addClass('displayNone');$("#div_navedbe_2_"+spid).removeClass('displayNone');}}
function deleteMultipleData(){var userArray=new Array;var note='srv_ask_delete_multiple_data';$('#div_vnosi_data input:checked').each(function(){userArray.push($(this).parent().parent().find('.data_uid').html());if($(this).parent().parent().find('.invitation_cell').length==1){note='srv_ask_delete_inv';}});if(userArray.length>0){$.post('ajax.php?a=outputLanguageNote',{note:note},function(lang_note){if(confirm(lang_note)){$.post('ajax.php?a=dataDeleteMultipleRow',{anketa:srv_meta_anketa_id,users:userArray},function(){$('#div_vnosi_data input:checked').each(function(){var row=$(this).parent().parent();row.hide();});});}});}else{genericAlertPopup('srv_data_delete_not_selected');}}
function selectAll(val){if(val==1){$(".delete_data_row").attr("checked","true");$("#switch_on").hide();$("#switch_off").show();$("#mass_delete_button").show();}
else{$('.delete_data_row').removeAttr('checked');$("#switch_off").hide();$("#switch_on").show();$("#mass_delete_button").hide();}}
function quickEditAction(action,usr_id){var srv_site_url=$("#srv_site_url").val();if(action=='delete'){$.post('ajax.php?a=outputLanguageNote',{note:'srv_ask_delete'},function(lang_note){if(confirm(lang_note)){if(usr_id>0){$.post('ajax.php?a=dataDeleteRow',{anketa:srv_meta_anketa_id,usr_id:usr_id},function(response){if(response=='0'){var href=srv_site_url+'admin/survey/index.php?anketa='+srv_meta_anketa_id+'&a=data&m=quick_edit';window.location=href;}else{genericAlertPopup('alert_parameter_response',response);}});}else{genericAlertPopup('alert_delete_error');}}});}
if(action=='edit'){var href=srv_site_url+'main/survey/edit_anketa.php?anketa='+srv_meta_anketa_hash+'&usr_id='+usr_id+'';if(usr_id>0){window.open(href,'_blank');}}
if(action=='pdf'){if(usr_id>0){var href=srv_site_url+'admin/survey/izvoz.php?a=pdf_results&anketa='+srv_meta_anketa_id+'&usr_id='+usr_id;$.post('ajax.php?a=makeEncodedIzvozUrlString',{anketa:srv_meta_anketa_id,string:href},function(url){window.open(url,'_blank');});}}
if(action=='rtf'){if(usr_id>0){var href=srv_site_url+'admin/survey/izvoz.php?a=rtf_results&anketa='+srv_meta_anketa_id+'&usr_id='+usr_id;$.post('ajax.php?a=makeEncodedIzvozUrlString',{anketa:srv_meta_anketa_id,string:href},function(url){window.open(url,'_blank');});}}
if(action=='quick_view'){if(document.getElementById('quick_view').value==1){var editing='&quick_view=0';}
else{var editing='&quick_view=1';}
var href=srv_site_url+'admin/survey/index.php?anketa='+srv_meta_anketa_id+'&a=data&m=quick_edit'+editing+'&usr_id='+usr_id+'';if(usr_id>0){window.location=href;}}
if(action=='copy'){$.post('ajax.php?a=outputLanguageNote',{note:'srv_ask_copy'},function(lang_note){if(confirm(lang_note)){if(usr_id>0){$.post('ajax.php?a=dataCopyRow',{anketa:srv_meta_anketa_id,usr_id:usr_id},function(response){var href=srv_site_url+'admin/survey/index.php?anketa='+srv_meta_anketa_id+'&a=data&m=quick_edit&usr_id='+response;window.location=href;});}else{genericAlertPopup('alert_copy_error');}}});}}
function doInspectFromFrequency(el,event){var $el_td=$(el);var $el_tr=$(el).parent();var spr_data=$el_tr.attr('id');var vkey=$el_tr.attr('vkey');$.post("ajax.php?t=inspect&a=analizaPrepareInspect",{anketa:srv_meta_anketa_id,from_podstran:srv_meta_podstran,spr_data:spr_data,vkey:vkey},function(response){window.location="index.php?anketa="+srv_meta_anketa_id+response;});}
function doInspectMultiGrid(el,event){var $el_td=$(el);var $el_tr_parent=$(el).parent().parent().closest('tr');var spr_data=$el_tr_parent.attr('id');var vkey=$el_td.attr('vkey');$.post("ajax.php?t=inspect&a=analizaPrepareInspect",{anketa:srv_meta_anketa_id,from_podstran:srv_meta_podstran,spr_data:spr_data,vkey:vkey},function(response){window.location="index.php?anketa="+srv_meta_anketa_id+response;});}
function doInspectDoubleMultiGrid(el,event){var $el_td=$(el);var $el_tr_parent=$(el).parent().parent().closest('tr');var spr_data=$el_tr_parent.attr('id');var vkey=$el_td.attr('gid');$.post("ajax.php?t=inspect&a=analizaPrepareInspect",{anketa:srv_meta_anketa_id,from_podstran:srv_meta_podstran,spr_data:spr_data,vkey:vkey},function(response){window.location="index.php?anketa="+srv_meta_anketa_id+response;});}
function doInspectMultiCheck(el,event){var $el_td=$(el);var $el_tr=$(el).parent().closest('tr');var spr_data=$el_tr.attr('id');var vkey='1';$.post("ajax.php?t=inspect&a=analizaPrepareInspect",{anketa:srv_meta_anketa_id,from_podstran:srv_meta_podstran,spr_data:spr_data,vkey:vkey},function(response){window.location="index.php?anketa="+srv_meta_anketa_id+response;});}
function doInspectMultiText(el,event){var $el_td=$(el);var $el_tr=$(el).parent().closest('tr');var spr_data=$el_tr.closest('table').attr('id');if($el_td.attr('vkey')!==undefined){var vkey=$el_td.attr('vkey');}else{var vkey=$el_td.html();}
$.post("ajax.php?t=inspect&a=analizaPrepareInspect",{anketa:srv_meta_anketa_id,from_podstran:srv_meta_podstran,spr_data:spr_data,vkey:vkey},function(response){window.location="index.php?anketa="+srv_meta_anketa_id+response;});}
function changeSessionInspectAnaliza(){$("#spanSessionInspect").load("ajax.php?t=inspect&a=changeSessionInspect",{anketa:srv_meta_anketa_id,isAnaliza:1},function(){reloadData();});}
function displayDataPrintPreview(){var size="location=0,height=500,width=700,scrollbars=1,fullscreen=0,menubar=0,status=0,titlebar=0,toolbar=0,channelmode=0,directories=0";var recipe=window.open('','RecipeWindow',size);var rec_on_page=$("#rec_on_page_top").val();$.post('ajax.php?t=displayData&a=displayDataPrintPreview&limit='+rec_on_page,{anketa:srv_meta_anketa_id,limit:rec_on_page},function(response){recipe.document.open();recipe.document.write(response);recipe.document.close();recipe.focus();return false;});}
function toggleAnalysisAdvanced(what){$("#div_analiza_filtri_right").load('ajax.php?t=analysis&a=toggleAnalysisAdvanced',{anketa:srv_meta_anketa_id,podstran:srv_meta_podstran,what:what},function(response){});}
function change_analiza_preview(){var value=$('#cbx_shoq_analiza_preview').is(':checked')?'1':'0';$("#analizaSubNav").load('ajax.php?t=analysis&a=changeAnalizaPreview&anketa='+srv_meta_anketa_id+'&m='+srv_meta_podstran,{anketa:srv_meta_anketa_id,podstran:srv_meta_podstran,value:value},function(response){});}
function doArchiveChart(){if($("#div_analiza_data.charts").length>0&&$("#div_analiza_data.charts").html()!=''){$("#fullscreen").load('ajax.php?a=doArchiveAnaliza',{anketa:srv_meta_anketa_id,podstran:srv_meta_podstran},function(){$('#fade').fadeTo('slow',1);$('#fullscreen').show();});}else{genericAlertPopup('alert_no_archive_tables');}}
function submitArchiveChart(){if($("#div_analiza_data.charts").html().length>0){var name=$("#newAnalysisArchiveName").val();var note=$("#newAnalysisArchiveNote").val();var access=$("[name=newAnalysisArchiveAccess]:checked").val();var duration=$("#newAnalysisArchiveDuration").val();var durationType=$("[name=newAADurationType]:checked").val();$("#fullscreen").load('ajax.php?a=submitArchiveAnaliza',{anketa:srv_meta_anketa_id,podstran:srv_meta_podstran,name:name,note:note,access:access,duration:duration,durationType:durationType},function(){$("#fullscreen").show();});}else{genericAlertPopup('alert_no_archive_tables');}}
function createArchiveChartBeforeEmail(){if($("#div_analiza_data.charts").html().length>0){$.post('ajax.php?a=createArchiveBeforeEmail',{anketa:srv_meta_anketa_id,podstran:srv_meta_podstran},function(response){if(parseInt(response)>0){var aid=parseInt(response);$("#fullscreen").load('ajax.php?a=emailArchiveAnaliza',{anketa:srv_meta_anketa_id,podstran:srv_meta_podstran,aid:aid},function(){$('#fullscreen').show();});}else{if(parseInt(response)==-1){genericAlertPopup('alert_no_archive_response',response);}else{genericAlertPopup('alert_archive_error_response',response);}
$('#fullscreen').hide();$('#fade').fadeOut('slow');}});}else{genericAlertPopup('alert_no_archive_tables');}};function surveyAnalisysIncludeTestData(){var includeTestData=$("#cnx_include_test_data").is(':checked');$.post('ajax.php?a=analisysIncludeTestData',{anketa:srv_meta_anketa_id,includeTestData:includeTestData},function(){return reloadData();});}
function setSnDisplayFullTableCheckbox(){var fullTable=$("#snCreateFullTable").is(':checked')?'1':'0';$.post('ajax.php?t=displayData&a=setSnDisplayFullTableCheckbox',{anketa:srv_meta_anketa_id,fullTable:fullTable},function(response){return reloadData();});}
function changeSpremenljivkaLestvica(spid,skala){$("#sum_"+spid).load('ajax.php?t=analysis&a=changeSpremenljivkaLestvica',{anketa:srv_meta_anketa_id,spid:spid,skala:skala},function(){window.location.reload();});}
function printCurrentAnalysis(spid){var content=document.getElementById("sum_"+spid);var pri=document.getElementById("ifmcontentstoprint").contentWindow;pri.document.open();pri.document.write(content.innerHTML);$("link[rel=stylesheet]").clone().appendTo($("#ifmcontentstoprint").contents().find("head"));pri.document.close();pri.focus();pri.print();}
$.fn.followTo=function(pos){var $this=this,$window=$(window);$this.css({top:(pos)});$window.scroll(function(e){var $position=$this.position().top;var wst=$window.scrollTop();if(wst<pos){$this.css({top:((pos-wst)>0)?(pos-wst):0});}else{$this.css({top:0});}});};function dataTableScroll(where){var scroll_width=$(window).width()/4*3;if(where=='left'){var leftPos=$('#tableContainer').scrollLeft();$("#tableContainer").animate({scrollLeft:leftPos-scroll_width},600);}
if(where=='right'){var leftPos=$('#tableContainer').scrollLeft();$("#tableContainer").animate({scrollLeft:leftPos+scroll_width},600);}}
function show_settings_survey_analysis(id_of_element){if($('#options'+id_of_element).is(":visible")){$('#options'+id_of_element).hide();}
else{$('.options').hide();$('#options'+id_of_element).show();}}
function closeAnalizaPopup(){$('#analysis_popup').fadeOut('slow').html('');$('#fade').fadeOut('slow');};function statistika_init(){$("#statistic_profile .option").live('click',function(){$("#statistic_profile .active").removeClass("active");$(this).toggleClass("active");var pid=$(this).attr("id").substr(18);$("#div_statistic_date_select").load("ajax.php?t=dashboard&a=loadStatisticProfile",{anketa:srv_meta_anketa_id,pid:pid});});}
function changeStatisticProfile(){var pid=$("#select_stat_profile").val();$.post("ajax.php?t=dashboard&a=changeStatisticProfile",{anketa:srv_meta_anketa_id,pid:pid},function(){$("#surveyStatistic").load("ajax.php?t=dashboard&a=statisticRefresh",{anketa:srv_meta_anketa_id});});}
function changeStatisticDate(isInterval){if(isInterval=='interval'){$("#statistic_date_interval").attr("checked","checked");}else{$("#statistic_date_timeline").attr("checked","checked");}}
function run_statistic_interval_filter(asSession){var pid=$("#statistic_profile .active").attr("id").substr(18);var timeline=$("input[name=timeline]:checked").val();var startDate=$("#startDate").val();var endDate=$("#endDate").val();var stat_interval=$("#stat_interval").val();$.post("ajax.php?t=dashboard&a=runStatisticProfile",{anketa:srv_meta_anketa_id,pid:pid,timeline:timeline,startDate:startDate,endDate:endDate,stat_interval:stat_interval,asSession:asSession},function(response){if(!response){$("#surveyStatistic").load("ajax.php?t=dashboard&a=statisticRefresh",{anketa:srv_meta_anketa_id},function(){$('#fade').fadeOut('slow');});}else{$('#fade').fadeOut('slow');}});}
function close_statistic_interval_filter(){$("#div_statistic_date_select").fadeOut('slow');$('#fade').fadeOut('slow');}
function showHideDeleteStatisticProfile(showhide){if(showhide=='true'){$("#statisticProfileCoverDiv").show();$("#deleteProfileDiv").show();}
else{$("#statisticProfileCoverDiv").hide();$("#deleteProfileDiv").hide();}}
function showHideRenameStatisticProfile(showhide){if(showhide=='true'){var pid=$("#statistic_profile .active").attr("id").substr(18);$("#renameProfileName").val($("#statistic_profile_"+pid).html());$("#statisticProfileCoverDiv").show();$("#renameProfileDiv").show();}
else{$("#statisticProfileCoverDiv").hide();$("#renameProfileDiv").hide();}}
function renameStatisticProfile(){var pid=$("#statistic_profile .active").attr("id").substr(18);var name=$("#renameProfileName").val();$.post("ajax.php?t=dashboard&a=renameStatisticProfile",{anketa:srv_meta_anketa_id,pid:pid,name:name},function(response){$("#statisticProfileCoverDiv").hide();$("#renameProfileDiv").hide();if(response>0){$("#statistic_profile .active").html(name);}else if(response<0){genericAlertPopup('error');}});}
function deleteStatisticProfile(){var pid=$("#statistic_profile .active").attr("id").substr(18);$.post("ajax.php?t=dashboard&a=deleteStatisticProfile",{anketa:srv_meta_anketa_id,pid:pid},function(response){$("#statisticProfileCoverDiv").hide();$("#deleteProfileDiv").hide();$("#div_statistic_date_select").load("ajax.php?t=dashboard&a=loadStatisticProfile",{anketa:srv_meta_anketa_id});});}
function show_statistic_interval_filter(){$('#fade').fadeTo('slow',1);$("#div_statistic_date_select").load("ajax.php?t=dashboard&a=loadStatisticProfile",{anketa:srv_meta_anketa_id}).fadeIn('slow').draggable({delay:100,cancel:'input, textarea, select, .buttonwrapper'});}
function showHideCreateStatisticProfile(showhide){if(showhide=='true'){$("#statisticProfileCoverDiv").show();$("#newProfileDiv").show();}
else{$("#statisticProfileCoverDiv").hide();$("#newProfileDiv").hide();}}
function create_new_statistic_interval_filter(){var timeline=$("input[name=timeline]:checked").val();var startDate=$("#startDate").val();var endDate=$("#endDate").val();var stat_interval=$("#stat_interval").val();var name=$("#newProfileName").val();$.post("ajax.php?t=dashboard&a=createStatisticProfile",{anketa:srv_meta_anketa_id,timeline:timeline,startDate:startDate,endDate:endDate,stat_interval:stat_interval,name:name},function(response){$("#statisticProfileCoverDiv").hide();$("#renameProfileDiv").hide();if(!response){$("#div_statistic_date_select").load("ajax.php?t=dashboard&a=loadStatisticProfile",{anketa:srv_meta_anketa_id});}else{genericAlertPopup('alert_parameter_response',response);}});};__refresh_on_close=0;function onload_init_vprasanje(){$('#vprasanje_float_editing').bind('click',function(event){vprasanje_float_editing_click(event);});}
function vprasanje_fullscreen(spremenljivka,cache,chart_edit,no_close,focus_last){if(locked)return;switchSliderOpisneLabeleEditMode(spremenljivka,'');if($('#spremenljivka_content_'+spremenljivka).hasClass('question_locked')){return;}
if(!(no_close==true))
close_all_editing();$('#form_settings_obvescanje').hide();$('#email_switch').attr("src","img_0/plus.png");$('#obvescanje_switch').attr("src","img_0/plus.png");var id;if(spremenljivka>0)
id='#branching_'+spremenljivka;else
id='#'+spremenljivka;$('#branching li.spr_editing').removeClass('spr_editing');$(id).addClass('spr_editing');$('#vprasanje_float_editing').html('').show().css('visibility','hidden');if(cache==undefined){$.post('ajax.php?t=vprasanje&a=vprasanje_fullscreen',{spremenljivka:spremenljivka,anketa:srv_meta_anketa_id},function(data){$('#vprasanje_float_editing').html(data).css('visibility','visible');$('#vprasanje_edit form select, #vprasanje_edit form input, #vprasanje_edit form textarea').not('.no_submit').change(function(){vprasanje_save(true);});var last=$('#branching_'+spremenljivka+' .variabla:last-child div.vrednost_inline');inline_nova_vrednost(last,focus_last);if(chart_edit==1){vprasanje_tab(spremenljivka,4);}
vprasanje_pozicija(spremenljivka);});}else{$('#vprasanje_float_editing').html(cache).css('visibility','visible');$('#vprasanje_edit form select, #vprasanje_edit form input, #vprasanje_edit form textarea').not('.no_submit').change(function(){vprasanje_save(true);});var last=$('#branching_'+spremenljivka+' .variabla:last-child div.vrednost_inline');inline_nova_vrednost(last);vprasanje_pozicija(spremenljivka);}
if($('#branching').hasClass('collapsed')){if(spremenljivka>0){$('#branching_'+spremenljivka).load('ajax.php?t=branching&a=vprasanje_full',{spremenljivka:spremenljivka,anketa:srv_meta_anketa_id},function(){vprasanje_pozicija(spremenljivka);});}
else{$('#'+spremenljivka).load('ajax.php?t=branching&a=vprasanje_full',{spremenljivka:spremenljivka,anketa:srv_meta_anketa_id},function(){vprasanje_pozicija(spremenljivka);});}}}
function vprasanje_pozicija(spremenljivka){var id;if(spremenljivka>0)
id='#branching_'+spremenljivka;else
id='#'+spremenljivka;var elTop=$(id).position().top;var elHeight=$(id).height();$('#vprasanje_float_editing').css('margin-top',elTop-224).show();var floatingTop=$('#vprasanje_float_editing').offset().top-40;var floatingHeight=$('#vprasanje_float_editing').height()+40;var top=floatingTop;var height=elHeight;if(floatingHeight>height)height=floatingHeight;var windowHeight=$(window).height();var scrollTop=$('html, body').scrollTop();if(top<scrollTop){$('html, body').animate({scrollTop:top-20});}else if((top+height)>(windowHeight+scrollTop)){var scroll=top+height-windowHeight+20;if(top<scroll)scroll=top;$('html, body').animate({scrollTop:scroll});}}
function vprasanje_tab(spremenljivka,tab){$('.tab','#vprasanje_edit').hide();$('#tab_'+tab).show();$('.tab_link','#vprasanje_tabs').removeClass('active');$('#tab_link_'+tab).addClass('active');}
function vprasanje_save(silentsave,spr,callback){var spremenljivka=$('input[name=spremenljivka]').val()||spr;if(spremenljivka==undefined)return;if(silentsave!=true)
$('#spremenljivka_content_'+spremenljivka+' #variabla_new').hide();inline_save_editor(spremenljivka);if($('#vsebina_'+spremenljivka+'_3').val()!='')
add_comment(spremenljivka,'1','3',$('#vsebina_'+spremenljivka+'_3').val());var id;if(spremenljivka>0)
id='#branching_'+spremenljivka;else
id='#'+spremenljivka;var form_serialize=$("form[name=vprasanje_edit]").serialize()||{spremenljivka:spremenljivka};if(silentsave!=true){$('#calculation').fadeOut('fast').html('');$('#vprasanje_float_editing').hide().html('');$(id).removeClass('spr_editing');}
$.post('ajax.php?t=vprasanje&a=vprasanje_save&silentsave='+silentsave,form_serialize,function(data){if(silentsave!=true){if(__refresh_on_close==0){$(id).html(data);}
else{window.location.reload();}}
else{$(id).html(data);let fake_event={target:id};branching_mouseover(fake_event);var last=$('#branching_'+spremenljivka+' .variabla:last-child div.vrednost_inline');inline_nova_vrednost(last);}
if(typeof callback=='function'){callback();}});}
function vprasanje_cancel(){var spremenljivka=$('input[name=spremenljivka]').val();$('#calculation').fadeOut('fast').html('');$('#vprasanje').hide();$('#fade').fadeOut('slow');$('#branching_'+spremenljivka).removeClass('spr_editing');remove_editor('naslov');$.post('ajax.php?t=vprasanje&a=vprasanje_save',{spremenljivka:spremenljivka,anketa:srv_meta_anketa_id},function(data){if(__refresh_on_close==0){$('#branching_'+spremenljivka).html(data);$('#vprasanje').html('');}else{window.location.reload();}});}
function vrednost_delete(spremenljivka,vrednost,tip,other){$('#vrednost_'+vrednost).remove();$("#missing_value_"+other).attr('checked',false);$("#missing_value_"+spremenljivka+"_"+other).attr('checked',false);$.post('ajax.php?t=vprasanje&a=vrednost_delete',{spremenljivka:spremenljivka,vrednost:vrednost,other:other,anketa:srv_meta_anketa_id},function(){if(tip==17)edit_ranking_moznosti();});}
function vrednost_new(spremenljivka,other,tip,mv){$.post('ajax.php?t=vprasanje&a=vrednost_new',{spremenljivka:spremenljivka,other:other,anketa:srv_meta_anketa_id,mv:mv},function(data){$('ul.vrednost_sort','#vprasanje_edit #tab_0').append(data);$('ul.vrednost_sort li:last-child textarea','#vprasanje_edit #tab_0').focus();$('#vprasanje_edit').attr({scrollTop:$('#vprasanje_edit').height()});if(tip==17)edit_ranking_moznosti();vprasanje_save(true,spremenljivka);});}
function vrednost_new_mobile(spremenljivka,tip){$.post('ajax.php?t=vprasanje&a=vrednost_new',{spremenljivka:spremenljivka,other:0,anketa:srv_meta_anketa_id,mv:0},function(data){vprasanje_save(true,spremenljivka,function(){$('#spremenljivka_contentdiv'+spremenljivka).find('#variable_holder div:last-child').find('.vrednost_inline').focus();});});}
function vrednost_new_dodatne(spremenljivka,mv,tip,checked){var vrednost;if(checked==true){vrednost_new(spremenljivka,mv,tip,mv);}else{var vre_id=$('#spremenljivka_content_'+spremenljivka+' #variable_holder [other|="'+mv+'"]').attr('id');vre_id=vre_id.replace('variabla_','');inline_vrednost_delete(spremenljivka,vre_id,'0');return false;}}
function edit_ranking_moznosti(){var counter=0;var inputs=document.getElementsByTagName('textarea');for(var i=0;i<inputs.length;i++)
{if(inputs[i].getAttribute('name').toLowerCase().substr(0,15)=='vrednost_naslov')
counter++;}
var value=$('select[name=ranking_k]').val();var html='';html=html+'<option value="0"'+(value==0?' selected="true"':'')+'>'+lang['srv_vsi']+'</option>';for(var i=1;i<counter;i++){html=html+'<option value="'+i+'"'+(value==i?' selected="true"':'')+'>'+i+'</option>';}
$('.ranking_k').html(html);}
function vrednost_edit(vrednost){$('#fade').fadeTo('slow',1);$('#vrednost_edit').html('').fadeIn('slow').load('ajax.php?t=vprasanje&a=vrednost_edit',{vrednost:vrednost,anketa:srv_meta_anketa_id,lang_id:srv_meta_lang_id},function(){});}
function vrednost_insert_image(vrednost,create_new){if(create_new){var div=$('#variabla_'+vrednost);var spr_id=div.closest('.spremenljivka_content').attr('spr_id');div.attr('new','waiting');$.post('ajax.php?t=vprasanjeinline&a=inline_vrednost_new',{spremenljivka:spr_id,anketa:srv_meta_anketa_id},function(data){vprasanje_save(true);$('#fade').fadeTo('slow',1);$('#vrednost_edit').html('').fadeIn('slow').load('ajax.php?t=vprasanje&a=vrednost_insert_image',{vrednost:data,anketa:srv_meta_anketa_id,lang_id:srv_meta_lang_id},function(){create_editor_hitro_nalaganje_slike('hitro-nalaganje-slike');});$('#vrednost_edit').css('position','fixed').css('top',-800);});}
else{vprasanje_save(true);$('#fade').fadeTo('slow',1);$('#vrednost_edit').html('').fadeIn('slow').load('ajax.php?t=vprasanje&a=vrednost_insert_image',{vrednost:vrednost,anketa:srv_meta_anketa_id,lang_id:srv_meta_lang_id},function(){create_editor_hitro_nalaganje_slike('hitro-nalaganje-slike');});$('#vrednost_edit').css('position','fixed').css('top',-800);}}
function vrednost_insert_image_save(){get_editor_close('hitro-nalaganje-slike');var vrednost=$('input[name=vrednost]').val();$('#fade').fadeOut('slow');$('#vrednost_edit').fadeOut('slow');$.post('ajax.php?t=vprasanje&a=vrednost_save',$("form[name=vrednost_insert_image_form]").serialize(),function(data){$('#vre_id_'+vrednost).html(data);$('#vrednost_edit').html('');vprasanje_save(true);var spremenljivka=$('#vre_id_'+vrednost).closest('.spremenljivka_content').attr('spr_id');vprasanje_pozicija(spremenljivka);});}
function hotspot_edit(spr_id){$('#fade').fadeTo('slow',1);$('#vrednost_edit').html('').fadeIn('slow').load('ajax.php?t=vprasanje&a=hotspot_edit',{spr_id:spr_id,anketa:srv_meta_anketa_id,lang_id:srv_meta_lang_id},function(){create_editor_hotspot('hotspot_image');});}
function vrednost_save(){get_editor_close('vrednost_naslov');var vrednost=$('input[name=vrednost]').val();var red=false
if($('#alert_show_99_popup').is(':checked')){var red=true;}
$('#fade').fadeOut('slow');$('#vrednost_edit').fadeOut('slow');$.post('ajax.php?t=vprasanje&a=vrednost_save',$("form[name=vrednost_edit]").serialize(),function(data){$('#vre_id_'+vrednost).html(data);$('#vrednost_edit').html('');if(red==true){$('#vre_id_'+vrednost).addClass('red');$('#alert_show_99').attr('checked',true,function(){vprasanje_save(true);});}
else{$('#vre_id_'+vrednost).removeClass('red');$('#alert_show_99').attr('checked',false,function(){vprasanje_save(true);});}});}
function vrednost_save_lang(){get_editor_close('vrednost_naslov');$('#fade').fadeOut('slow');$('#vrednost_edit').hide();var spremenljivka=$('form[name=vrednost_edit] input[name=spremenljivka]').val();var vrednost=$('form[name=vrednost_edit] input[name=vrednost]').val();var naslov=$('form[name=vrednost_edit] textarea[name=vrednost_naslov]').val();$.post('ajax.php?t=vprasanjeinline&a=inline_vrednost_naslov_save',{spremenljivka:spremenljivka,vrednost:vrednost,anketa:srv_meta_anketa_id,lang_id:srv_meta_lang_id,naslov:naslov},function(data){$('div[vre_id='+vrednost+'][contenteditable=true].vrednost_inline').html(data);});}
function vrednost_cancel(){remove_editor('vrednost_naslov');$('#fade').fadeOut('slow');$('#vrednost_edit').hide();}
function vrednost_fastadd(spremenljivka){$('#fade').fadeTo('slow',1);$('#vrednost_edit').addClass('PopUpNarrow');$('#vrednost_edit').show().load('ajax.php?t=vprasanje&a=vrednost_fastadd',{spremenljivka:spremenljivka,anketa:srv_meta_anketa_id});}
function vrednost_fastadd_save(){$('#fade').fadeOut('slow');$('#vrednost_edit').hide();$.post('ajax.php?t=vprasanje&a=vrednost_fastadd_save',$("form[name=vrednost_fastadd_form]").serialize(),function(data){$('#vrednost_edit').html('');vprasanje_save(true);});}
function vprasanje_refresh(spremenljivka,silentsave){$('#branching_'+spremenljivka).load('ajax.php?t=vprasanje&a=vprasanje_refresh&silentsave='+silentsave,{spremenljivka:spremenljivka,anketa:srv_meta_anketa_id});}
function show_ranking_k(value){if(value<2)
document.getElementById('ranking_k').style.display='block';else
document.getElementById('ranking_k').style.display='none';}
function show_timer(value){$('#timer').toggle();}
function show_dostop(value){$('#dostop').toggle();if(!value){$('#_dostop').prop('checked',false);}}
function show_reminders(value){$('#reminders').toggle();if(value==0){$('#reminder_1').prop('checked',false);$('#reminder_2').prop('checked',false);}
else
$('#reminder_1').prop('checked',true);}
function change_number(id1,id2){var size=document.getElementById('num_size').value;var enota=document.getElementById('num_enota').value;var taWidth=document.getElementById('width').value;if(taWidth==-1)
taWidth=10;var html='';if(enota==1||enota==2){if(enota==2)
html=html+'<input type="text" style="width: '+taWidth+'em;" disabled="disabled"> ';if($('input[name=vrednost_naslov_'+id1+']').length>0){var value=$('input[name=vrednost_naslov_'+id1+']').val();}else{var value='';}
html=html+'<input type="text" name="vrednost_naslov_'+id1+'" value="'+value+'" />';if(enota==1)
html=html+' <input type="text" style="width: '+taWidth+'em;" disabled="disabled">';if(size==2){html=html+'&nbsp&nbsp&nbsp&nbsp';if(enota==2)
html=html+'<input type="text" style="width: '+taWidth+'em;" disabled="disabled"> ';if($('input[name=vrednost_naslov_'+id2+']').length>0){var value=$('input[name=vrednost_naslov_'+id2+']').val();}else{var value='';}
html=html+' <input type="text" name="vrednost_naslov_'+id2+'" value="'+value+'" />';if(enota==1)
html=html+'<input type="text" style="width: '+taWidth+'em;" disabled="disabled">';}}
else{html=html+'<input type="text" style="width: '+taWidth+'em;" disabled="disabled">';if(size==2){html=html+'&nbsp&nbsp&nbsp&nbsp';html=html+'<input type="text" style="width: '+taWidth+'em;" disabled="disabled">';}}
$('#number').html(html);}
function toggle_num_limits(size){if(size==1){$("#num_limit2").hide();$("#num_limit_label").hide();}
else{$("#num_limit2").show();$("#num_limit_label").show();}}
function change_subtype_number(spremenljivka){$.post('ajax.php?t=vprasanje&a=change_subtype_number',{spremenljivka:spremenljivka,ranking_k:$('input:radio[name=ranking_k]:checked').val(),anketa:srv_meta_anketa_id},function(){$('#vprasanje_float_editing').hide().html('');vprasanje_fullscreen(spremenljivka);});}
function change_tip(spremenljivka,tip,confirmed){var old_tip=$('li#branching_'+spremenljivka).attr('tip');$.post('ajax.php?t=vprasanje&a=change_tip',{spremenljivka:spremenljivka,tip:tip,confirmed:confirmed,anketa:srv_meta_anketa_id},function(data){try{var data_json=JSON.parse(data);if(data_json.error==1){$('#fade').fadeIn("fast");$('#dropped_alert').html(data_json.output).fadeIn("fast").css('width','600px');return;}}
catch(e){}
$('li#branching_'+spremenljivka).attr('tip',tip);$('li#branching_'+spremenljivka).removeClass('spr_tip_'+old_tip).addClass('spr_tip_'+tip);vprasanje_fullscreen(spremenljivka,data,false,true);vprasanje_save(true);});}
function change_demografija(spremenljivka,podtip){$.post('ajax.php?t=vprasanje&a=change_demografija',{spremenljivka:spremenljivka,podtip:podtip,anketa:srv_meta_anketa_id},function(data){refreshLeft(data);vprasanje_fullscreen(data);});}
function change_limittype(limittype){if(limittype){document.getElementById('vsota_min').disabled=false;document.getElementById('vsota_limit').disabled=false;document.getElementById('vsota_exact').disabled=true;}
else{document.getElementById('vsota_min').disabled=true;document.getElementById('vsota_limit').disabled=true;document.getElementById('vsota_exact').disabled=false;}}
function num_limit(field,checkbox_id){if($('#'+checkbox_id).is(':checked')){document.getElementById(field).disabled=false;}
else{document.getElementById(field).disabled=true;}}
function changeGridAlign(spremenljivka,enota){var tip=$('#spremenljivka_tip_'+spremenljivka+' option:selected').val();if(tip==6&&enota==6)
$('#gridAlign').val(2);else if(tip==6&&enota!=6)
$('#gridAlign').val(0);}
function change_diferencial(spremenljivka,enota){if(enota==3)
$('.grid_subtitle').css('display','block');else
$('.grid_subtitle').css('display','none');if(enota==4||enota==5){$('.drop_grids_num').css('display','none');}
else{$('.drop_grids_num').css('display','');}
var tip_vpr=$('#spremenljivka_tip_'+spremenljivka+' option:selected').val();if(tip_vpr==6&&(enota==1||enota==0)){$('.diferencial_trak_class').css('display','');if($('#diferencial_trak_'+spremenljivka).is(":checked")){$('.diferencial_trak_starting_num_class_'+spremenljivka).css('display','block');$('.grid_defaults_class').css('display','none');$('.grid_var_class').css('display','none');$('.trak_num_of_titles_class').css('display','block');$('.drop_custom_column_labels').css('display','none');}else{$('.drop_custom_column_labels').css('display','block');}}else{$('.diferencial_trak_class').css('display','none');$('.diferencial_trak_starting_num_class_'+spremenljivka).css('display','none');$('.grid_defaults_class').css('display','block');$('.grid_var_class').css('display','block');$('.trak_num_of_titles_class').css('display','none');}
$('#vrednosti_holder').load('ajax.php?t=vprasanje&a=change_diferencial',{spremenljivka:spremenljivka,enota:enota,anketa:srv_meta_anketa_id});}
function vprasanje_check_variable(_this){var input=$(_this);var variable=input.val();variable1=check_valid_variable(variable);if(variable1!=variable)
input.val(variable1);}
function change_grid_width(width){if(width==-1)width=20;$('.vrednost_textarea').css('width',width+'%');}
function edit_grid_variable(){if($('#vprasanje_edit_grid_variable').attr('checked')){$('input[name=edit_grid_variable_edit]').val(1);$('table#grids tr:first td[variable]').each(function(){$(this).html('<input type="text" name="edit_grid_variable_'+$(this).attr('id')+'" value="'+$(this).html()+'" />');});}else{$('input[name=edit_grid_variable_edit]').val(0);$('table#grids tr:first td[variable]').each(function(){$(this).html($(this).attr('variable'));});}}
function get_editor_close(id){var editor=CKEDITOR.instances[id];if(editor!=undefined){try{content=editor.getData();editor.isNotDirty=true;$('#'+id).val(content);remove_editor(id);}catch(e){}}}
function comment_on_comment(id,user,date,spr_id){$('#comment_on_comment_'+id).html('<div class="reply_to_who"><span class="faicon fa-reply link-right"></span>'+lang['for']+': '+user+' ('+date+')</div>'+'<textarea name="vsebina" placeholder="'+lang['srv_comment_comment']+'" id="vsebina_comment_on_comment_'+id+'"></textarea>'+'<div class="button_holder bottom16">'+'<button class="medium white-blue" onclick="$(\'#comment_on_comment_'+id+'\').html(\'\'); return false;">'+lang['edit1338']+'</button>'+'<button class="medium blue" onclick="$.post(\'ajax.php?a=comment_on_comment\', {id: \''+id+'\', vsebina: $(\'#vsebina_comment_on_comment_'+id+'\').val(), anketa: srv_meta_anketa_id}, function() {window.location.reload();}); return false;">'+lang['srv_comment_comment']+'</button>'+'</div>');$(".options_dropdown").addClass("displayNone");var toggle='#comment_toggle_'+spr_id+'_4';$(toggle).toggle();}
function comment_on_comment_resp(id,user,date){$('#comment_on_comment_resp_'+id).html('<div class="reply_to_who"><span class="faicon fa-reply link-right"></span>'+lang['for']+': '+user+' ('+date+')</div>'+'<textarea name="vsebina" placeholder="'+lang['srv_comment_comment']+'" id="vsebina_comment_on_comment_resp_'+id+'"></textarea>'+'<div class="button_holder bottom16">'+'<button class="medium white-blue" onclick="$(\'#comment_on_comment_resp_'+id+'\').html(\'\'); return false;">'+lang['edit1338']+'</button>'+'<button class="medium blue" onclick="$.post(\'ajax.php?a=comment_on_comment_resp\', {id: \''+id+'\', vsebina: $(\'#vsebina_comment_on_comment_resp_'+id+'\').val(), anketa: srv_meta_anketa_id}, function() {window.location.reload();}); return false;">'+lang['srv_comment_comment']+'</button>'+'</div>');$(".options_dropdown").addClass("displayNone");}
function comment_on_comment_splosni(id,user,date){$('#comment_on_comment_splosni_'+id).html('<div class="reply_to_who"><span class="faicon fa-reply link-right"></span>'+lang['for']+': '+user+' ('+date+')</div>'+'<textarea name="vsebina" placeholder="'+lang['srv_comment_comment']+'" id="vsebina_comment_on_comment_splosni_'+id+'"></textarea>'+'<div class="button_holder bottom16">'+'<button class="medium white-blue" onclick="$(\'#comment_on_comment_splosni_'+id+'\').html(\'\'); return false;">'+lang['edit1338']+'</button>'+'<button class="medium blue" onclick="$.post(\'ajax.php?a=comment_on_comment\', {id: \''+id+'\', vsebina: $(\'#vsebina_comment_on_comment_splosni_'+id+'\').val(), anketa: srv_meta_anketa_id}, function() {window.location.reload();}); return false;">'+lang['srv_comment_comment']+'</button>'+'</div>');$(".options_dropdown").addClass("displayNone");var toggle='#comment_toggle_'+spr_id+'_4';$(toggle).toggle();}
function comment_on_comment_splosni_resp(id,user,date){$('#comment_on_comment_splosni_resp_'+id).html('<div class="reply_to_who"><span class="faicon fa-reply link-right"></span>'+lang['for']+': '+user+' ('+date+')</div>'+'<textarea name="vsebina" placeholder="'+lang['srv_comment_comment']+'" id="vsebina_comment_on_comment_splosni_resp_'+id+'"></textarea>'+'<div class="button_holder bottom16">'+'<button class="medium white-blue" onclick="$(\'#comment_on_comment_splosni_resp_'+id+'\').html(\'\'); return false;">'+lang['edit1338']+'</button>'+'<button class="medium blue" onclick="$.post(\'ajax.php?a=comment_on_comment_splosni_resp\', {id: \''+id+'\', vsebina: $(\'#vsebina_comment_on_comment_splosni_resp_'+id+'\').val(), anketa: srv_meta_anketa_id}, function() {window.location.reload();}); return false;">'+lang['srv_comment_comment']+'</button>'+'</div>');$(".options_dropdown").addClass("displayNone");var toggle='#comment_toggle_'+spr_id+'_4';$(toggle).toggle();}
function comment_delete(id){$.post("ajax.php?a=comment_delete",{id:id,anketa:srv_meta_anketa_id},function(){$(".options_dropdown").addClass("displayNone");$("#comment_box_"+id).remove();});}
function respondent_comment_delete(id){$.post("ajax.php?a=respondent_comment_delete",{id:id,anketa:srv_meta_anketa_id},function(){$(".options_dropdown").addClass("displayNone");$("#comment_box_"+id).remove();});}
function survey_respondent_comment_delete(id){$.post("ajax.php?a=survey_respondent_comment_delete",{id:id,anketa:srv_meta_anketa_id},function(){$(".options_dropdown").addClass("displayNone");$("#comment_box_"+id).remove();});}
function survey_comment_delete(id){$.post("ajax.php?a=survey_comment_delete",{id:id,anketa:srv_meta_anketa_id},function(){$(".options_dropdown").addClass("displayNone");$("#comment_box_"+id).remove();});}
function question_comment_solve(ocena,id){$.post("ajax.php?a=comment_ocena",{type:'question_comment',ocena:ocena,id:id,anketa:srv_meta_anketa_id},function(){if(ocena=='2'){$('#comment_box_'+id).addClass('archived').find('.solve').html('<p class="unarchive_comment" onclick="question_comment_solve(\'0\', '+id+');">'+'<span class="faicon fa-check link-right"></span>'+
lang['srv_comments_unarchive']+'</p>');}
else{$('#comment_box_'+id).removeClass('archived').find('.solve').html('<p class="archive_comment" onclick="question_comment_solve(\'2\', '+id+');">'+'<span class="faicon fa-check link-right"></span>'+
lang['srv_comments_archive']+'</p>');}});}
function question_respondent_comment_solve(text2,id){$.post("ajax.php?a=comment_ocena",{type:'respondent_comment',text2:text2,id:id,anketa:srv_meta_anketa_id},function(){if(text2=='2'){$('#comment_box_'+id).addClass('archived').find('.solve').html('<p class="unarchive_comment" onclick="question_respondent_comment_solve(\'0\', '+id+');">'+'<span class="faicon fa-check link-right"></span>'+
lang['srv_comments_unarchive']+'</p>');}
else{$('#comment_box_'+id).removeClass('archived').find('.solve').html('<p class="archive_comment" onclick="question_respondent_comment_solve(\'2\', '+id+');">'+'<span class="faicon fa-check link-right"></span>'+
lang['srv_comments_archive']+'</p>');}});}
function change_NG_cancelButton(value){if(value==1){$("#NG_cancelText").show();}
else{$("#NG_cancelText").hide();}}
function vprasanje_track(spremenljivka){$.post('ajax.php?t=vprasanje&a=vprasanje_tracking',{anketa:srv_meta_anketa_id,spremenljivka:spremenljivka},function(data){$("#dropped_alert").html('<p>'+data+'</p>').fadeIn("fast").animate({opacity:1.0},3000).fadeOut("slow");});}
function onchange_submit_show(value){if(value>0){$('#onchange_submit_div').show();}
else{$('#onchange_submit_div').hide();}}
function show_SN_count(value){$('.SN_hidable_settings').hide();if(value==0){$('#SN_add_text').show();}
else if(value==1){$('#SN_count').show();}
else if(value==3){$('#SN_count_text').show();}}
function validation_new(spremenljivka){$('#fade').fadeTo('slow',1);$('#div_condition_editing').show().load('ajax.php?t=vprasanje&a=validation_new',{spremenljivka:spremenljivka,anketa:srv_meta_anketa_id});}
function validation_edit(spremenljivka,if_id){$('#fade').fadeTo('slow',1);$('#div_condition_editing').show().load('ajax.php?t=vprasanje&a=validation_edit',{spremenljivka:spremenljivka,if_id:if_id,anketa:srv_meta_anketa_id});}
function validation_if_close(spremenljivka,_if){$('#fade').fadeOut('slow');$('#div_condition_editing').hide().html('');if(spremenljivka>0){$('#tab_7').load('ajax.php?t=vprasanje&a=validation_if_close',{spremenljivka:spremenljivka,anketa:srv_meta_anketa_id},function(){$('#tab_7 select, #tab_7 input, #tab_7 textarea').not('.no_submit').change(function(){vprasanje_save(true);});});}
else
window.location.reload();}
function validation_if_remove(spremenljivka,_if){if(confirm(lang['srv_brisiifconfirm'])){$.post('ajax.php?t=branching&a=if_remove',{'if':_if,anketa:srv_meta_anketa_id},function(){$('#fade').fadeOut('slow');$('#div_condition_editing').hide().html('');if(spremenljivka>0)
$('#tab_7').load('ajax.php?t=vprasanje&a=validation_if_close',{spremenljivka:spremenljivka,anketa:srv_meta_anketa_id});else
window.location.reload();});}}
function grid_plus_minus(type,confirm='0'){var selected=$('#grids_count').val();if(type=='1'){selected=parseInt(selected)+1;if(selected>=2&&selected<=12)
$('#grids_count').val(selected);vprasanje_save(true);return false;}
else if(type=='0'){selected=parseInt(selected)-1;$.post('ajax.php?t=vprasanje&a=grid_delete_check',{anketa:srv_meta_anketa_id},function(data){if(!data||confirm==='1'){if(selected>=2&&selected<=12)
$('#grids_count').val(selected);vprasanje_save(true);return false;}
else{$('#fade').fadeIn("fast");$('#dropped_alert').html(data.output).fadeIn("fast").css('width','600px');}},'json');}}
function grid_add_remove_missing(checkbox,spremenljivka,confirm='0'){if($(checkbox).is(":checked")){vprasanje_save(true,spremenljivka);}
else{$.post('ajax.php?t=vprasanje&a=grid_delete_missing_check',{anketa:srv_meta_anketa_id,spremenljivka:spremenljivka},function(data){if(!data||confirm==='1'){vprasanje_save(true,spremenljivka);}
else{$('#fade').fadeIn("fast");$('#dropped_alert').html(data.output).fadeIn("fast").css('width','600px');}},'json');}
close_missing_menu(spremenljivka);}
function grid_multiple_add(spr_id){$('#fade').fadeTo('slow',1);$('#vrednost_edit').show().load('ajax.php?t=vprasanje&a=grid_multiple_add',{spremenljivka:spr_id,anketa:srv_meta_anketa_id});return false;}
function grid_multiple_addnew(spr_id,tip,podtip){$.post('ajax.php?t=vprasanje&a=grid_multiple_addnew',{spremenljivka:spr_id,tip:tip,podtip:podtip,anketa:srv_meta_anketa_id},function(){$('#vrednost_edit').hide().html('');$('#fade').fadeOut('slow');vprasanje_save(true);});return false;}
function grid_multiple_edit(parent,spr_id){$('#fade').fadeTo('slow',1);$('#vrednost_edit').show().load('ajax.php?t=vprasanje&a=grid_multiple_edit',{parent:parent,spremenljivka:spr_id,anketa:srv_meta_anketa_id});return false;}
function grid_multiple_save(spr){var customRadio='';if($('#spremenljivka_podtip').val()==12){customRadio=$('#customRadioSelect'+spr+' option:selected').val();}
var post_data={anketa:srv_meta_anketa_id,spremenljivka:spr,grids_count:$('#multi_grids_count').val(),taWidth:$('#multi_taWidth').val(),taHeight:$('#multi_taHeight').val(),gridmultiple_width:$('#gridmultiple_width').val(),enota:$('#spremenljivka_podtip').val(),dostop:$('#spremenljivka_dostop').val(),cela:$('#vrednost_edit select[name=cela]').val(),decimalna:$('#vrednost_edit select[name=decimalna] ').val(),sbSize:$('#selectboxSize'+spr+' option:selected').val(),prvaVrstica:$('#prvaVrstica'+spr+' option:selected').val(),prvaVrstica_roleta:$('#prvaVrstica_roleta'+spr+' option:selected').val(),customRadio:customRadio}
if($('#date_range_min_'+spr).length)
{post_data['date_range_min']=$('#date_range_min_'+spr).val();}
if($('#date_range_max_'+spr).length)
{post_data['date_range_max']=$('#date_range_max_'+spr).val();}
$.post('ajax.php?t=vprasanje&a=vprasanje_save&silentsave=true',post_data,function(){$('#fade').fadeOut('slow');$('#vrednost_edit').html('').hide();vprasanje_save(true);});}
function show_alert_missing(sprid){if($('#missing_value_-97').attr("checked")||$('#missing_value_'+sprid+'-97').attr("checked"))
var missing_97=1;else
var missing_97=0;if($('#missing_value_-98').attr("checked")||$('#missing_value_'+sprid+'-98').attr("checked"))
var missing_98=1;else
var missing_98=0;if($('#missing_value_-99').attr("checked")||$('#missing_value_'+sprid+'-99').attr("checked"))
var missing_99=1;else
var missing_99=0;var reminder=$('input[type=checkbox][name=reminder]').is(':checked');if(reminder==1||reminder==2){}
else{$('#alert_show_96_'+sprid).attr("checked",false);$('#alert_show_97_'+sprid).attr("checked",false);$('#alert_show_98_'+sprid).attr("checked",false);$('#alert_show_99_'+sprid).attr("checked",false);}}
function show_scale_text(value){if(value==1){$('#skala_text_ord').hide();$('#skala_text_nom').show();}
else{$('#skala_text_nom').hide();$('#skala_text_ord').show();}}
function change_map(enota,spremenljivka){if(enota==1){$('#multi_input_type_'+spremenljivka).val('marker').change();$('#marker_podvprasanje').show();$('#max_markers_map').hide();$('#multi_input_type_map').hide();$('#user_location_map').show();$('#user_location_'+spremenljivka).prop("checked",true);$('#fokus_mape').show();$('#dodaj_searchbox').show();$('#dodaj_searchbox_'+spremenljivka).prop("checked",true);vprasanje_save(true,spremenljivka);}
else if(enota==2){$.post('ajax.php?t=vprasanje&a=get_input_type_map',{spr_id:spremenljivka},function(data){if(data==='marker'){$('#max_markers_map').show();$('#marker_podvprasanje').show();}
else{$('#user_location_map').hide();$('#marker_podvprasanje').show();}
$('#marker_podvprasanje').show();$('#multi_input_type_map').show();$('#user_location_'+spremenljivka).prop("checked",false);$('#fokus_mape').show();$('#dodaj_searchbox').show();$('#dodaj_searchbox_'+spremenljivka).prop("checked",true);vprasanje_save(true,spremenljivka);});}
else if(enota==3){$('#multi_input_type_'+spremenljivka).val('marker').change();$('#multi_input_type_map').hide();$('#user_location_map').hide();$('#user_location_'+spremenljivka).prop("checked",false);$('#marker_podvprasanje').hide();$('#marker_podvprasanje_'+spremenljivka).prop("checked",true);$('#naslov_podvprasanja_map').show();$('#fokus_mape').hide();$('#max_markers_map').hide();$('#dodaj_searchbox').hide();$('#dodaj_searchbox_'+spremenljivka).prop("checked",false);vprasanje_save(true,spremenljivka);}}
function change_input_map(tip,spremenljivka){if(tip==='marker'){$('#max_markers_map').show();$('#user_location_map').show();$('#marker_podvprasanje').show();}
else{$('#marker_podvprasanje').hide();$('#marker_podvprasanje_'+spremenljivka).prop("checked",false);$('#naslov_podvprasanja_map').hide();$('#max_markers_map').hide();$('#user_location_'+spremenljivka).prop("checked",false);$('#user_location_map').hide();$('#dodaj_searchbox').hide();$('#dodaj_searchbox_'+spremenljivka).prop("checked",false);vprasanje_save(true,spremenljivka);}}
function show_infowindow_map(){$('#naslov_podvprasanja_map').toggle();}
function show_selectbox_size(spremenljivka,enota,tip){if(tip==3){var trenutni_tip=$('#spremenljivka_tip_'+spremenljivka+' option:selected').text();$('#spremenljivka_tip_'+spremenljivka+' option:selected').val(1);}
if(tip==1||tip==2){if(enota!=6&&enota!=4){$('.dropselectboxsize').css('display','none');$('.dropselectboxsizeprvavrstica').css('display','none');$('.dropselectboxsizeprvavrstica_roleta').css('display','none');}
else if(enota==6){$('.dropselectboxsize').css('display','');$('.dropselectboxsizeprvavrstica').css('display','');$('.dropselectboxsizeprvavrstica_roleta').css('display','none');}
else if(enota==4){$('.dropselectboxsizeprvavrstica_roleta').css('display','');$('.dropselectboxsize').css('display','none');$('.dropselectboxsizeprvavrstica').css('display','none');}}
if(tip==6){if(enota!=6&&enota!=2){$('.dropselectboxsize').css('display','none');$('.dropselectboxsizeprvavrstica').css('display','none');$('.dropselectboxsizeprvavrstica_roleta').css('display','none');}
else if(enota==6){$('.dropselectboxsize').css('display','');$('.dropselectboxsizeprvavrstica').css('display','');$('.dropselectboxsizeprvavrstica_roleta').css('display','none');}
else if(enota==2){$('.dropselectboxsizeprvavrstica_roleta').css('display','');$('.dropselectboxsize').css('display','none');$('.dropselectboxsizeprvavrstica').css('display','none');}}}
function show_preset_value(spremenljivka,enota,tip){if(tip==1){if(enota==0||enota==1||enota==2||enota==7){$('.presetValue').css('display','');}
else{$('.presetValue').css('display','none');}}
if(tip==2){if(enota==0||enota==1||enota==2||enota==7){$('.presetValue').css('display','');}
else{$('.presetValue').css('display','none');}}
if(tip==6){if(enota==0||enota==1||enota==8){$('.presetValue').css('display','');}
else{$('.presetValue').css('display','none');}}}
function show_custom_picture_radio(spremenljivka,enota){if(enota==9||enota==12){$('#kategorije_odgovorov_'+spremenljivka).children('p').hide();$('.vizualna-analogna-skala').hide();$('.custom-picture-radio').show();}else if(enota==11){$('#kategorije_odgovorov_'+spremenljivka).children('p').hide();$('.custom-picture-radio').hide();$('.vizualna-analogna-skala').show();}else{$('#kategorije_odgovorov_'+spremenljivka).children('p').show();$('.vizualna-analogna-skala').hide();$('.custom-picture-radio').hide();}}
function change_selectbox_size(spremenljivka,size,tekst){if($('#selectboxSize'+spremenljivka+' option:selected').text()==tekst){var trenutnoStevilo=$('#selectboxSize'+spremenljivka+' option:selected').val();$('#selectboxSize'+spremenljivka+' option:selected').text(trenutnoStevilo);$('#selectboxSize'+spremenljivka).empty();for(i=1;i<=size;i++){if(i==size){$('#selectboxSize'+spremenljivka).append('<option value='+i+'>'+tekst+'</option>');$('#selectboxSize'+spremenljivka).val(i);$('#selectboxSize'+spremenljivka+' option:selected').text(tekst);}
else{$('#selectboxSize'+spremenljivka).append('<option value='+i+'>'+i+'</option>');}}}
else if($('#selectboxSize'+spremenljivka+' option:selected').text()!=tekst){var trenutnoStevilo=$('#selectboxSize'+spremenljivka+' option:selected').val();var selectboxsize=$('#selectboxSize'+spremenljivka+' option').length;if(size!=selectboxsize){$('#selectboxSize'+spremenljivka).empty();for(i=2;i<=size;i++){$('#selectboxSize'+spremenljivka).append('<option value='+i+'>'+i+'</option>');}}
for(i=1;i<=size+1;i++){var vse=$('#selectboxSize'+spremenljivka+' option[value='+i+']').text();if(vse==tekst){$('#selectboxSize'+spremenljivka+' option[value='+i+']').text(i);}}
$('#selectboxSize'+spremenljivka+' option[value='+size+']').text(tekst);$('#selectboxSize'+spremenljivka).val(trenutnoStevilo);}}
function change_selectbox_size_1(spremenljivka,tekst){var grids=$('#grids_count option:selected').val();var size=parseInt(grids)+1;if($('#selectboxSize'+spremenljivka+' option:selected').text()==tekst){var trenutnoStevilo=$('#selectboxSize'+spremenljivka+' option:selected').val();$('#selectboxSize'+spremenljivka+' option:selected').text(trenutnoStevilo);$('#selectboxSize'+spremenljivka).empty();for(i=1;i<=size;i++){if(i==size){$('#selectboxSize'+spremenljivka).append('<option value='+i+'>'+tekst+'</option>');$('#selectboxSize'+spremenljivka).val(i);$('#selectboxSize'+spremenljivka+' option:selected').text(tekst);}
else{$('#selectboxSize'+spremenljivka).append('<option value='+i+'>'+i+'</option>');}}}
else if($('#selectboxSize'+spremenljivka+' option:selected').text()!=tekst){var trenutnoStevilo=$('#selectboxSize'+spremenljivka+' option:selected').val();var selectboxsize=$('#selectboxSize'+spremenljivka+' option').length;if(size!=selectboxsize){$('#selectboxSize'+spremenljivka).empty();for(i=2;i<=size;i++){$('#selectboxSize'+spremenljivka).append('<option value='+i+'>'+i+'</option>');}}
for(i=1;i<=size+1;i++){var vse=$('#selectboxSize'+spremenljivka+' option[value='+i+']').text();if(vse==tekst){$('#selectboxSize'+spremenljivka+' option[value='+i+']').text(i);}}
$('#selectboxSize'+spremenljivka+' option[value='+size+']').text(tekst);$('#selectboxSize'+spremenljivka).val(trenutnoStevilo);}}
function show_nastavitve_tabela_da_ne(spremenljivka,enota){if(enota!=8&&enota!=4){if(enota!=5){$('.drop_grids_num').css('display','');}
$('.grid_defaults').css('display','');}
else{$('.drop_grids_num').css('display','none');$('.grid_defaults').css('display','none');$('#grid_defaults').val(6);$('#gridAlign').val(1);}
if(enota!=8){$('.faicon.add.'+spremenljivka).css('display','');}
else{$('.faicon.add.'+spremenljivka).css('display','none');}
vprasanje_save(true);}
function show_slider_prop(spremenljivka,ranking_k){if(ranking_k!=1){$('.dropsliderhandle').css('display','none');$('.dropsliderwindownumber').css('display','none');$('.dropMinMaxNumLabel').css('display','none');$('.dropNumLabelNew').css('display','none');$('.dropDescriptiveLabel').css('display','none');$('.dropVmesneLabel').css('display','none');$('.dropVmesneCrtice').css('display','none');$('.dropsliderhandle_step_'+spremenljivka).css('display','none');$('.MinMaxLabels').css('display','none');$('.dropslidernakaziodgovore').css('display','none');}
else{$('.dropsliderhandle').css('display','');$('.dropsliderwindownumber').css('display','');$('.dropMinMaxNumLabel').css('display','');$('.dropNumLabelNew').css('display','');$('.dropDescriptiveLabel').css('display','');$('.dropVmesneLabel').css('display','');$('.dropVmesneCrtice').css('display','');$('.dropsliderhandle_step_'+spremenljivka).css('display','');$('.dropslidernakaziodgovore').css('display','');}}
function slider_checkbox_prop(spremenljivka){if($('#slider_handle_'+spremenljivka).is(":checked")){$('#slider_handle_hidden_'+spremenljivka).prop('disabled',true);}
else{$('#slider_handle_hidden_'+spremenljivka).prop('disabled',false);}
if($('#slider_window_number_'+spremenljivka).is(":checked")){$('#slider_window_number_hidden_'+spremenljivka).prop('disabled',true);}
else{$('#slider_window_number_hidden_'+spremenljivka).prop('disabled',false);}
if($('#slider_nakazi_odgovore_'+spremenljivka).is(":checked")){$('#slider_nakazi_odgovore_hidden_'+spremenljivka).prop('disabled',true);$('#slider_VmesneCrtice_'+spremenljivka).prop('disabled',true);$('.dropVmesneCrtice').css({opacity:0.5});}
else{$('#slider_nakazi_odgovore_hidden_'+spremenljivka).prop('disabled',false);$('#slider_VmesneCrtice_'+spremenljivka).prop('disabled',false);$('.dropVmesneCrtice').css({opacity:1});}
if($('#slider_MinMaxNumLabelNew_'+spremenljivka).is(":checked")){$('#slider_MinMaxNumLabelNew_hidden_'+spremenljivka).prop('disabled',true);}
else{$('#slider_MinMaxNumLabelNew_hidden_'+spremenljivka).prop('disabled',false);}
if($('#slider_MinMaxLabel_'+spremenljivka).is(":checked")){$('#slider_MinMaxLabel_hidden_'+spremenljivka).prop('disabled',true);$('.MinMaxLabels').css('display','');}
else{$('#slider_MinMaxLabel_hidden_'+spremenljivka).prop('disabled',false);$('.MinMaxLabels').css('display','none');}
if($('#slider_VmesneCrtice_'+spremenljivka).is(":checked")){$('#slider_VmesneCrtice_hidden_'+spremenljivka).prop('disabled',true);}
else{$('#slider_VmesneCrtice_hidden_'+spremenljivka).prop('disabled',false);}
if($('#slider_VmesneNumLabel_'+spremenljivka).is(":checked")){$('#slider_VmesneNumLabel_hidden_'+spremenljivka).prop('disabled',true);}
else{$('#slider_VmesneNumLabel_hidden_'+spremenljivka).prop('disabled',false);}
if($('#slider_VmesneDescrLabel_'+spremenljivka).is(":checked")){$('#slider_VmesneDescrLabel_hidden_'+spremenljivka).prop('disabled',true);$('.slider_DescriptiveLabel_defaults').css('display','');$('.dropNumofDescrLabels').css('display','');$('#slider_handle_step_'+spremenljivka).val(1);var minimum=1;$('#slider_MinNumLabel_'+spremenljivka).val(minimum);var maximum=$('#slider_NumofDescrLabels_'+spremenljivka+' option:selected').val();$('#slider_MaxNumLabel_'+spremenljivka).val(maximum);var post_data={anketa:srv_meta_anketa_id,spremenljivka:spremenljivka,slider_handle_step:$('#slider_handle_step_'+spremenljivka).val(),slider_MinNumLabel:$('#slider_MinNumLabel_'+spremenljivka).val(),slider_MaxNumLabel:maximum}
$.post('ajax.php?t=vprasanje&a=vprasanje_save&silentsave=true',post_data,function(){vprasanje_save(true);});$('#slider_handle_step_'+spremenljivka).prop('disabled',true);$('.dropsliderhandle_step_'+spremenljivka).css({opacity:0.5});$('.MinMaxNumLabels_'+spremenljivka).css('display','none');$('.dropsliderhandle_step_'+spremenljivka).css('display','none');$('.slider_VmesneCrtice_'+spremenljivka).css('display','none');}
else{$('#slider_VmesneDescrLabel_hidden_'+spremenljivka).prop('disabled',false);$('.slider_DescriptiveLabel_defaults').css('display','none');$('.dropNumofDescrLabels').css('display','none');$('#slider_DescriptiveLabel_defaults_'+spremenljivka).val('0');$('#slider_handle_step_'+spremenljivka).prop('disabled',false);$('.dropsliderhandle_step_'+spremenljivka).css({opacity:1});$('.MinMaxNumLabels_'+spremenljivka).css('display','');$('.dropsliderhandle_step_'+spremenljivka).css('display','');$('.slider_VmesneCrtice_'+spremenljivka).css('display','');var maximum_100=$('#slider_MaxNumLabelTemp_'+spremenljivka).val();var minimum_100=$('#slider_MinNumLabelTemp_'+spremenljivka).val();var post_data={anketa:srv_meta_anketa_id,spremenljivka:spremenljivka,slider_handle_step:$('#slider_handle_step_'+spremenljivka).val(),slider_MaxNumLabel:maximum_100,slider_MinNumLabel:minimum_100}
$.post('ajax.php?t=vprasanje&a=vprasanje_save&silentsave=true',post_data,function(){vprasanje_save(true);});}
if($('#slider_labele_podrocij_'+spremenljivka).is(":checked")){$('#slider_labele_podrocij_hidden_'+spremenljivka).prop('disabled',true);$('.drop_slider_stevilo_label_podrocij').css('display','');}
else{$('#slider_labele_podrocij_hidden_'+spremenljivka).prop('disabled',false);$('.drop_slider_stevilo_label_podrocij').css('display','none');}}
function slider_defaultDescrLabels_value(spremenljivka,descLabelId){if(descLabelId!=0){$('#inline_opisne_labele_'+spremenljivka).css('display','none');}else{$('#inline_opisne_labele_'+spremenljivka).css('display','block');}}
function sliderCopytoMinNumLabelTemp(spremenljivka){var minimum=$('#slider_MinNumLabel_'+spremenljivka).val();$('#slider_MinNumLabelTemp_'+spremenljivka).val(minimum);}
function sliderCopytoMaxNumLabelTemp(spremenljivka){var maximum=$('#slider_MaxNumLabel_'+spremenljivka).val();$('#slider_MaxNumLabelTemp_'+spremenljivka).val(maximum);}
function max_diff_labels(spremenljivka,enota,label1,label2,label3){if(enota==5){$.post('ajax.php?t=vprasanjeinline&a=inline_grid_naslov_save',{spremenljivka:spremenljivka,grid:'1',anketa:srv_meta_anketa_id,lang_id:srv_meta_lang_id,naslov:label1});$.post('ajax.php?t=vprasanjeinline&a=inline_grid_naslov_save',{spremenljivka:spremenljivka,grid:'2',anketa:srv_meta_anketa_id,lang_id:srv_meta_lang_id,naslov:label2});}}
function vprasanje_float_editing_click(event){inline_vprasanje_float_editing_click(event);}
function show_drag_and_drop_new_look_option(spremenljivka,enota){if(enota==9){$('.drag_and_drop_new_look_class').css('display','');}else{$('.drag_and_drop_new_look_class').css('display','none');}}
function drag_and_drop_new_look_checkbox_prop(spremenljivka){if($('#drag_and_drop_new_look_'+spremenljivka).is(":checked")){$('#drag_and_drop_new_look_hidden_'+spremenljivka).prop('disabled',true);}
else{$('#drag_and_drop_new_look_hidden_'+spremenljivka).prop('disabled',false);}}
function signatureProp(spremenljivka){if($('#signature_'+spremenljivka).is(":checked")){$('#orientation_'+spremenljivka).css('display','none');$('#kategorijeOdgovorov_'+spremenljivka).css('display','none');}
else{$('#orientation_'+spremenljivka).css('display','');$('#kategorijeOdgovorov_'+spremenljivka).css('display','');}}
function textSubtypeToggle(what,value){if(value==0){$('select[name=upload]').prop('disabled',false);$('input[name=signature]').prop('disabled',false);$('input[name=captcha]').prop('disabled',false);$('input[name=emailVerify]').prop('disabled',false);$('.kategorije_odgovorov').show();$('.upload_info').hide();}
else{if(what!='upload')
$('select[name=upload]').prop('disabled',true);if(what!='signature')
$('input[name=signature]').prop('disabled',true);if(what!='captcha')
$('input[name=captcha]').prop('disabled',true);if(what!='emailVerify')
$('input[name=emailVerify]').prop('disabled',true);if(what=='upload'||what=='signature'||what=='captcha')
$('.kategorije_odgovorov').hide();if(what=='upload')
$('.upload_info').show();}}
function checkCheckboxLimits(spremenljivka,value,checkbox_limit_name){if(checkbox_limit_name=="checkbox_min_limit"){var other_value=$('#checkbox_limit_'+spremenljivka+' option:selected').val();var max_value=other_value;var min_value=value;}else{var other_value=$('#checkbox_min_limit_'+spremenljivka+' option:selected').val();var max_value=value;var min_value=other_value;}
if(max_value!=0&&min_value>max_value){genericAlertPopup('srv_checkbox_min_limit_error_msg');$('#checkbox_min_limit_'+spremenljivka).val(0);}}
function toggleCheckboxMinLimitReminder(spremenljivka,checkbox_min_limit){if(checkbox_min_limit!=0){$('#checkboxLimitReminder_'+spremenljivka).css('display','');}else{$('#checkboxLimitReminder_'+spremenljivka).css('display','none');}}
function fieldsetToggle(element){$(element).next('.fieldset_holder').slideToggle(function(){});$(element).find('.faicon').toggleClass('arrow2_d').toggleClass('arrow2_u');}
function add_question_category(spremenljivka){var last=$('#branching_'+spremenljivka+' .variabla:last-child div.vrednost_inline');inline_nova_vrednost(last,true);};var srv_meta_lang_id=0;var orientation;function getOrientation(orientation01){orientation=orientation01;}
function getOrientation1(){return orientation;}
function onload_init_inline(){if(locked)return;$("div.naslov_inline").live({focus:function(){close_all_editing($(this).attr('spr_id'));if($(this).attr('default')=='1'&&$(this).attr('contenteditable')=='true')window.setTimeout(function(){document.execCommand('selectAll',false,null);},1);$('#spremenljivka_content_'+$(this).attr('spr_id')+' span.display_editor').addClass('show');},keypress:function(event){enterKeyPressHandler(event);$(this).attr('default','0');},blur:function(){inline_naslov($(this).attr('spr_id'),this);if(!$(this).closest('.spr').hasClass('spr_editing')){var spr_id=$(this).attr('spr_id');$('#spremenljivka_content_'+spr_id+' span.display_editor').css('opacity','0');window.setTimeout(function(){$('#spremenljivka_content_'+spr_id+' span.display_editor').removeClass('show').css({'opacity':'1'});},300);}},mouseover:function(){$('#spremenljivka_content_'+$(this).attr('spr_id')+' span.display_editor').addClass('show');},mouseleave:function(){var u=$(this).siblings('span.display_editor');setTimeout(function(){if(u.is(':hover')==false){u.removeClass('show');}},100);}});$("div.info_inline").live('focus',function(){close_all_editing($(this).attr('spr_id'));if($(this).attr('default')=='1'&&$(this).attr('contenteditable')=='true')window.setTimeout(function(){document.execCommand('selectAll',false,null);},1);}).live('keypress',function(event){enterKeyPressHandler(event);$(this).attr('default','0');}).live('blur',function(){inline_info($(this).attr('spr_id'),this);});$("div.variable_inline").live('focus',function(){close_all_editing($(this).closest('.spremenljivka_content').attr('spr_id'));}).live('keyup',function(){var variable=$(this).html();var tip=$(this).closest('.spremenljivka_content').attr('tip');if($.trim(variable).length&&tip!=1){variable=variable.replace(/(<([^>]+)>)/ig,"");var variable1=check_valid_variable(variable);if(variable1!=variable){$(this).html(variable1);}}
else if($.trim(variable).length&&tip==1){variable=variable.replace(/(<([^>]+)>)/ig,"");var variable1=check_valid_radio_variable(variable);if(variable1!=variable){$(this).html(variable1);}}}).live('keypress',function(event){enterKeyPressHandler(event);}).live('blur',function(){inline_vrednost_variable($(this).attr('vre_id'),this);});$('div.vrednost_inline').live({focus:function(event){close_all_editing($(this).closest('.spremenljivka_content').attr('spr_id'));if($(this).attr('default')=='1'&&$(this).attr('contenteditable')=='true')window.setTimeout(function(){document.execCommand('selectAll',false,null);},1);$(this).closest('.variabla').addClass('inlineedit');if(!$(this).closest('.spr').hasClass('spr_editing'))$(this).parent().find('.inline_edit, .inline_delete, .inline_if_not, .inline_hidden, .correct').addClass('show');inline_nova_vrednost(this);},keypress:function(event){var evt=event||window.event;var charCode=evt.which||evt.keyCode;if(charCode==9)return;enterKeyPressHandler(event);$(this).attr('default','0');inline_nova_vrednost(this);var div=$(this).closest('.variabla');if(div.attr('id')=='variabla_new'&&div.attr('new')!='waiting'&&(div.find('div.vrednost_inline:first').html()!=''||div.find('div.vrednost_inline:last').html()!='')){var spr_id=div.closest('.spremenljivka_content').attr('spr_id');div.attr('new','waiting');$.post('ajax.php?t=vprasanjeinline&a=inline_vrednost_new',{spremenljivka:spr_id,anketa:srv_meta_anketa_id},function(data){div.attr('id','variabla_'+data);div.attr('new','');div.find('div.vrednost_inline').attr('id','vre_id_'+data).attr('vre_id',data);div.find('div.icons_holder').css('display','inline');div.find('span.inline_hidden').attr('odg_id',data);div.find('span.correct').attr('vre_id',data);div.find('span.inline_if_follow').attr('onclick','follow_up_condition(\''+data+'\'); return false;');div.find('span.inline_if_not').attr('onclick','vrednost_condition_editing(\''+data+'\'); return false;');if(div.find('div.vrednost_inline').length>1)
div.find('div.vrednost_inline:last').attr('id','vre_id_'+data+'_2').attr('vre_id',data+'_2');});}},keyup:function(event){inline_nova_vrednost(this);},blur:function(){var _this=this;var vre_id=$(this).attr('vre_id');var spr_id=$(this).closest('div.spremenljivka_content').attr('spr_id');setTimeout(function(){inline_nova_vrednost_hide(spr_id,vre_id);if(!$(_this).closest('.spr').hasClass('spr_editing'))$(_this).parent().find('.inline_edit, .inline_delete, .inline_if_not, .inline_if_follow, .inline_hidden').removeClass('show');},200);$(this).closest('.variabla').removeClass('inlineedit');inline_vrednost(spr_id,this);}});$('.textfield_editable').live({blur:function(){var _this=this;var vre_id=$(this).attr('id');var spr_id=$(this).closest('div.spremenljivka_content').attr('spr_id');inline_vrednost(spr_id,this);}});$('div.hotspot_vrednost_inline').live({focus:function(event){if($(this).attr('default')=='1'&&$(this).attr('contenteditable')=='true')window.setTimeout(function(){document.execCommand('selectAll',false,null);},1);$(this).closest('.variabla').addClass('inlineedit');if(!$(this).closest('.spr').hasClass('spr_editing'))$(this).parent().find('.inline_edit, .inline_delete, .inline_if_not, .inline_hidden').addClass('show');inline_nova_vrednost(this);},blur:function(){var _this=this;var vre_id=$(this).attr('vre_id');var spr_id=$(this).closest('div.spremenljivka_content').attr('spr_id');setTimeout(function(){inline_nova_vrednost_hide(spr_id,vre_id);if(!$(_this).closest('.spr').hasClass('spr_editing'))$(_this).parent().find('.inline_edit, .inline_delete, .inline_if_not, .inline_if_follow, .inline_hidden').removeClass('show');},200);$(this).closest('.variabla').removeClass('inlineedit');inline_hotspot_vrednost(spr_id,this);}});$(document).delegate('.variabla','hover',function(event){if(event.type=='mouseleave'){$(this).find('.inline_edit, .inline_delete, .inline_if_not, .inline_if_follow, .inline_hidden, .correct').removeClass('show');}
if(event.type=='mouseenter'){$(this).find('.inline_edit, .inline_delete, .inline_if_not, .inline_if_follow, .inline_hidden, .correct').addClass('show');}});$("div.grid_inline").live('focus',function(){close_all_editing($(this).closest('.spremenljivka_content').attr('spr_id'));if($(this).attr('default')=='1'&&$(this).attr('contenteditable')=='true')window.setTimeout(function(){document.execCommand('selectAll',false,null);},1);}).live('keypress',function(event){enterKeyPressHandler(event);$(this).attr('default','0');}).live('blur',function(){var spr_id=$(this).attr('spr_id')||$(this).closest('div.spremenljivka_content').attr('spr_id');inline_grid(spr_id,this);});$("div.grid_variable_inline").live('focus',function(){close_all_editing($(this).closest('.spremenljivka_content').attr('spr_id'));}).live('keyup',function(){var variable=$(this).html();var tip=$(this).closest('.spremenljivka_content').attr('tip');if($.trim(variable).length&&tip!=6){variable=variable.replace(/(<([^>]+)>)/ig,"");var variable1=check_valid_variable(variable);if(variable1!=variable){$(this).html(variable1);}}
else if($.trim(variable).length&&tip==6){variable=variable.replace(/(<([^>]+)>)/ig,"");var variable1=check_valid_radio_variable(variable);if(variable1!=variable){$(this).html(variable1);}}}).live('keypress',function(event){enterKeyPressHandler(event);}).live('blur',function(){inline_variable_grid(spr_id,this);});$("div.grid_subtitle_inline").live('blur',function(){var spr_id=$(this).closest('div.spremenljivka_content').attr('spr_id');inline_subtitle_grid(spr_id,this);});$('div.spremenljivka_content').live('mouseover',function(event){var table=$(this).find('div.variable_holder table');if(table.length>0&&!table.hasClass('variabla_vsota')){if(!table.hasClass('ui-sortable')){table.sortable({items:'tr.variabla',handle:'span.inline_move',stop:function(){$.post('ajax.php?t=vprasanjeinline&a=inline_vrednost_vrstni_red',{spremenljivka:$(this).closest('div.spremenljivka_content').attr('spr_id'),sortable:$(this).sortable('serialize'),anketa:srv_meta_anketa_id});}});}}else{var div=$(this).find('div.variable_holder');if(div.length>0){if(!div.hasClass('ui-sortable')){div.sortable({items:'div.variabla',handle:'span.inline_move',stop:function(){$.post('ajax.php?t=vprasanjeinline&a=inline_vrednost_vrstni_red',{spremenljivka:$(this).closest('div.spremenljivka_content').attr('spr_id'),sortable:$(this).sortable('serialize'),anketa:srv_meta_anketa_id});}});}}}});$("div.label_inline").live('focus',function(){close_all_editing($(this).closest('.spremenljivka_content').attr('spr_id'));if($(this).attr('default')=='1'&&$(this).attr('contenteditable')=='true')window.setTimeout(function(){document.execCommand('selectAll',false,null);},1);}).live('keypress',function(event){enterKeyPressHandler(event);$(this).attr('default','0');}).live('blur',function(){var spr_id=$(this).attr('spr_id')||$(this).closest('div.spremenljivka_content').attr('spr_id');var tiplabele=$(this).attr('name');inline_minmaxlabel(spr_id,this,tiplabele);});$("div.inline_labele_podrocij").live('focus',function(){close_all_editing($(this).closest('.spremenljivka_content').attr('spr_id'));if($(this).attr('default')=='1'&&$(this).attr('contenteditable')=='true')window.setTimeout(function(){document.execCommand('selectAll',false,null);},1);}).live('keyup',function(event){enterKeyPressHandler(event);$(this).attr('default','0');}).live('blur',function(){var spr_id=$(this).attr('spr_id')||$(this).closest('div.spremenljivka_content').attr('spr_id');var tiplabele=$(this).attr('name');inline_labele_podrocij(spr_id,this,tiplabele);});$("div.inline_opisne_labele").live('focus',function(){close_all_editing($(this).closest('.spremenljivka_content').attr('spr_id'));if($(this).attr('default')=='1'&&$(this).attr('contenteditable')=='true')window.setTimeout(function(){document.execCommand('selectAll',false,null);},1);}).live('blur',function(){var spr_id=$(this).attr('spr_id')||$(this).closest('div.spremenljivka_content').attr('spr_id');var tiplabele=$(this).attr('name');inline_opisne_labele(spr_id,this,tiplabele);});$("div.trak_inline_nadnaslov").live('focus',function(){close_all_editing($(this).closest('.spremenljivka_content').attr('spr_id'));if($(this).attr('default')=='1'&&$(this).attr('contenteditable')=='true')window.setTimeout(function(){document.execCommand('selectAll',false,null);},1);}).live('keypress',function(event){enterKeyPressHandler(event);$(this).attr('default','0');}).live('blur',function(){var spr_id=$(this).attr('spr_id')||$(this).closest('div.spremenljivka_content').attr('spr_id');var tiplabele=$(this).attr('name');var grid=$(this).attr('grid');trak_inline_nadnaslov(spr_id,this,tiplabele,grid);});$("div.variabla_vsota_inline").live('focus',function(){close_all_editing($(this).closest('.spremenljivka_content').attr('spr_id'));if($(this).attr('default')=='1'&&$(this).attr('contenteditable')=='true')window.setTimeout(function(){document.execCommand('selectAll',false,null);},1);}).live('keypress',function(event){enterKeyPressHandler(event);$(this).attr('default','0');}).live('blur',function(){var spr_id=$(this).attr('spr_id')||$(this).closest('div.spremenljivka_content').attr('spr_id');inline_variabla_vsota(spr_id,this);});}
function inline_bind_click(event){var ta=$(event.target);var td;td=$(event.target).closest('span.inline_delete');if(td.hasClass('inline_delete')){var spr=td.closest('div.spremenljivka_content').attr('spr_id');var vre=td.closest('.variabla').attr('id');vre=vre.replace('variabla_','');inline_vrednost_delete(spr,vre,'0');return false;}
td=$(event.target).closest('span.inline_edit');if(td.hasClass('inline_edit')){var spr=td.closest('div.spremenljivka_content').attr('spr_id');var vre=td.closest('.variabla').attr('id');vre=vre.replace('variabla_','');vrednost_edit(vre);return false;}
td=$(event.target).closest('span.inline_hidden');if(td.hasClass('inline_hidden')){var odg=td.attr('odg_vre');var odg_id=td.attr('odg_id');hidden_answer(odg,odg_id);return false;}
td=$(event.target).closest('span.correct');if(td.hasClass('correct')){var spr_id=td.attr('spr_id');var vre_id=td.attr('vre_id');correct_answer(spr_id,vre_id);return false;}}
function inline_vprasanje_float_editing_click(event){var ta=$(event.target);var td;td=ta.closest('span.inline_hotspot_delete_region');if(td.hasClass('inline_hotspot_delete_region')){var spr=$('input[name=spremenljivka]').val();var region_index=td.closest('.hotspot_region').find('.hotspot_vrednost_inline').attr('region_index');var vre_id=td.closest('.hotspot_region').find('.hotspot_vrednost_inline').attr('vre_id');inline_hotspot_delete_region(spr,region_index,vre_id);return false;}
td=$(event.target).closest('span.inline_hotspot_edit_region');if(td.hasClass('inline_hotspot_edit_region')){var spr=$('input[name=spremenljivka]').val();var region_index=td.closest('.hotspot_region').find('.hotspot_vrednost_inline').attr('region_index');var vre_id=td.closest('.hotspot_region').find('.hotspot_vrednost_inline').attr('vre_id');inline_hotspot_edit_region(spr,region_index,vre_id);return false;}}
function inline_naslov(spremenljivka,_this){if($(_this).attr('contenteditable')!='true')return;if(parseInt(spremenljivka)==-1){$.post('ajax.php?t=vprasanje&a=vprasanje_save',{spremenljivka:spremenljivka,anketa:srv_meta_anketa_id,lang_id:srv_meta_lang_id,introduction:$(_this).html()});}else if(parseInt(spremenljivka)==-2){$.post('ajax.php?t=vprasanje&a=vprasanje_save',{spremenljivka:spremenljivka,anketa:srv_meta_anketa_id,lang_id:srv_meta_lang_id,conclusion:$(_this).html()});}else{$.post('ajax.php?t=vprasanje&a=vprasanje_save',{spremenljivka:spremenljivka,anketa:srv_meta_anketa_id,lang_id:srv_meta_lang_id,naslov:$(_this).html()});}}
function inline_textfield(spremenljivka,_this){if($(_this).attr('contenteditable')!='true')return;if(parseInt(spremenljivka)==-1){$.post('ajax.php?t=vprasanje&a=vprasanje_save',{spremenljivka:spremenljivka,anketa:srv_meta_anketa_id,lang_id:srv_meta_lang_id,introduction:$(_this).html()});}else if(parseInt(spremenljivka)==-2){$.post('ajax.php?t=vprasanje&a=vprasanje_save',{spremenljivka:spremenljivka,anketa:srv_meta_anketa_id,lang_id:srv_meta_lang_id,conclusion:$(_this).html()});}else{$.post('ajax.php?t=vprasanje&a=vprasanje_save',{spremenljivka:spremenljivka,anketa:srv_meta_anketa_id,lang_id:srv_meta_lang_id,naslov:$(_this).html()});}}
function inline_hotspot(spremenljivka,_this){$.post('ajax.php?t=vprasanjeinline&a=inline_vrednost_naslov_save',{spremenljivka:spremenljivka,vrednost:$(_this).attr('vre_id'),anketa:srv_meta_anketa_id,lang_id:srv_meta_lang_id,naslov:$(_this).html()});}
function inline_info(spremenljivka,_this){if($(_this).attr('contenteditable')!='true')return;$.post('ajax.php?t=vprasanjeinline&a=inline_info_save',{spremenljivka:spremenljivka,anketa:srv_meta_anketa_id,lang_id:srv_meta_lang_id,info:$(_this).html()});}
function inline_vrednost_variable(vre_id,_this){if($(_this).attr('contenteditable')!='true')return;$.post('ajax.php?t=vprasanjeinline&a=inline_vrednost_variable_save',{vre_id:vre_id,anketa:srv_meta_anketa_id,lang_id:srv_meta_lang_id,variable:$(_this).html()});}
function inline_variable(spremenljivka,_this){if($(_this).attr('contenteditable')!='true')return;$.post('ajax.php?t=vprasanjeinline&a=inline_variable_save',{spremenljivka:spremenljivka,anketa:srv_meta_anketa_id,lang_id:srv_meta_lang_id,variable:$(_this).html()});}
function inline_vrednost(spremenljivka,_this){if($(_this).attr('contenteditable')!='true')return;var vnosi=$('.edit_mode div.vrednost_inline').length;if($(_this).attr('ETF')=='true'){$.post('ajax.php?t=vprasanjeinline&a=inline_vrednost_naslov_save',{spremenljivka:spremenljivka,vrednost:$(_this).attr('vre_id'),anketa:srv_meta_anketa_id,lang_id:srv_meta_lang_id,naslov:$(_this).val()});}
else{$.post('ajax.php?t=vprasanjeinline&a=inline_vrednost_naslov_save',{spremenljivka:spremenljivka,vrednost:$(_this).attr('vre_id'),anketa:srv_meta_anketa_id,lang_id:srv_meta_lang_id,naslov:$(_this).html()});}}
function inline_hotspot_vrednost(spremenljivka,_this){if($(_this).attr('contenteditable')!='true')return;var vnosi=$('.edit_mode div.vrednost_inline').length;$.post('ajax.php?t=vprasanjeinline&a=inline_hotspot_vrednost_save',{spremenljivka:spremenljivka,vrednost:$(_this).attr('vre_id'),anketa:srv_meta_anketa_id,lang_id:srv_meta_lang_id,naslov:$(_this).html()});}
function inline_grid(spremenljivka,_this){if($(_this).attr('contenteditable')!='true')return;var string=$(_this).html();$('#branching_'+spremenljivka+' td.double[grd=g_'+$(_this).attr('grd_id')+']').html(string);$('#vprlang_'+spremenljivka+' td.double[grd=g_'+$(_this).attr('grd_id')+']').html(string);$.post('ajax.php?t=vprasanjeinline&a=inline_grid_naslov_save',{spremenljivka:spremenljivka,grid:$(_this).attr('grd_id'),anketa:srv_meta_anketa_id,lang_id:srv_meta_lang_id,naslov:string});}
function inline_variable_grid(spremenljivka,_this){if($(_this).attr('contenteditable')!='true')return;$.post('ajax.php?t=vprasanjeinline&a=inline_grid_variable_save',{spremenljivka:spremenljivka,grid:$(_this).attr('grd_id'),anketa:srv_meta_anketa_id,lang_id:srv_meta_lang_id,variable:$(_this).html()});}
function inline_subtitle_grid(spremenljivka,_this){if($(_this).attr('contenteditable')!='true')return;$.post('ajax.php?t=vprasanjeinline&a=inline_grid_subtitle_save',{spremenljivka:spremenljivka,subtitle:$(_this).attr('grid_subtitle'),anketa:srv_meta_anketa_id,lang_id:srv_meta_lang_id,value:$(_this).text(),grid_id:$(_this).attr('grid_id')});}
function inline_vrednost_delete(spremenljivka,vrednost,confirmed,callback){text=lang['srv_brisivrednostconfirm'];var special_vrednost=($("#variabla_"+vrednost).length<1);var other=$("#variabla_"+vrednost).attr('other');if(confirmed==1||confirm(text)){if(confirmed==undefined)confirmed=1;$.post('ajax.php?t=vprasanje&a=vrednost_delete',{spremenljivka:spremenljivka,vrednost:vrednost,confirmed:confirmed,anketa:srv_meta_anketa_id,can_delete_last:special_vrednost?1:0},function(data){if(!data)return;if(data.error==0){if(!special_vrednost){if(other!='0'){$("#missing_value_"+other).attr('checked',false);$("#missing_value_"+spremenljivka+"_"+other).attr('checked',false);}
$('#variabla_'+vrednost).remove();if(other=='1'){$('#fieldset'+spremenljivka).hide();}}
else{callback();}}
else if(data.error==1){$('#fade').fadeIn("fast");$('#dropped_alert').html(data.output).fadeIn("fast").animate({opacity:1.0},3000).fadeOut("slow");}
else if(data.error==2){$('#fade').fadeIn("fast");$('#dropped_alert').html(data.output).fadeIn("fast").css('width','600px');if(special_vrednost){document.getElementById('brisivrednostchecked').onclick=function(){inline_vrednost_delete(spremenljivka,vrednost,1,callback);$('#dropped_alert').html('').hide();return false;}
var missing=$("#missing_value_"+spremenljivka+"_"+other);$('#fade').fadeOut("fast");}}},'json');}
else{$("#missing_value_"+spremenljivka+"_"+other).attr('checked',true);}}
function inline_nova_vrednost(_this,focus){if($(_this).attr('contenteditable')!='true')return;if($('.mobile_header:visible').length!=0)return;var variable_holder=$(_this).closest('.variable_holder');var _default=1;variable_holder.children().each(function(){if($(this).find('.vrednost_inline').attr('default')!='1')_default=0;});if(_default==1)return;var tip=$(_this).closest('.spremenljivka_content').attr('tip');if($('#commercial_package').attr('value')=='1'){var if_class_locked='user_access_locked';}
else{var if_class_locked='';}
if($(_this).closest('.variabla').is(':last-child')&&$(_this).closest('.variabla').parent().hasClass('allow_new')){if($(_this).html()!=''&&$(_this).attr('vre_id')!='new'&&$(_this).attr('vre_id')!='new_2'){var spremenljivka=$(_this).closest('.spremenljivka_content').attr('spr_id');var orientation=$('#spremenljivka_content_'+spremenljivka).attr('spr_orientation');var enota=$('#spremenljivka_content_'+spremenljivka).attr('spr_enota');if(tip<=3){if(tip<=3&&orientation!=7&&orientation!=8){var new_div='<div id="variabla_new" class="variabla after_'+$(_this).attr('vre_id')+'">'+'<span class="faicon move_updown inline inline_move" title=""></span>';if(tip<=2&&orientation!=6)
new_div+='<input id="foo_new" class="enka-admin-custom enka-inline" type="'+(tip==1?'radio':'checkbox')+'" value="" name="foo_new" /><span class="enka-checkbox-radio"></span>';if($(_this).closest('.variabla').parent().find('.image_upload').length){new_div+='<span class="faicon image_upload pointer" onclick="vrednost_insert_image(\''+$(_this).attr('vre_id')+'\', true); return false;" title="'+lang['upload_img2']+'"></span>';new_div+='<div id="vre_id_new" class="vrednost_inline" contenteditable="true" tabindex="1" default="1" vre_id="new">'+lang['srv_new_vrednost']+'</div>'+' <span class="inline_other pointer" onclick="vrednost_new(\''+spremenljivka+'\', \'1\', \'\'); $(\'#fieldset'+spremenljivka+'\').show();">'+lang['srv_novavrednost_drugo']+'</span>'+' <span id="missing_block_'+spremenljivka+'" class="inline_other inline_missings pointer"></span>'+' <div class="icons_holder">'+'   <span class="faicon delete small inline inline_delete" title="'+lang['srv_brisivrednost']+'"></span>'+
(($(_this).closest('.variabla').parent().find('.correct').length)?' <span class="faicon correct inline" spr_id="'+spremenljivka+'" vre_id="new" title="'+lang['srv_vrednost_correct']+'"></span>':'')+'   <span class="faicon odg_hidden inline inline_hidden" odg_vre="0" odg_id="new" title="'+lang['srv_hide-disable_answer-0']+'"></span>'+'   <span class="faicon odg_if_follow inline inline_if_follow '+if_class_locked+'" onclick="follow_up_condition(\'new\'); return false;" title="'+lang['srv_follow_up']+'"></span>'+'   <span class="faicon odg_if_not inline inline_if_not '+if_class_locked+'" onclick="vrednost_condition_editing(\'new\'); return false;" title="'+lang['srv_podif_edit']+'"></span>'+'   <span class="faicon edit2 inline inline_edit"></span>'+' </div>'+'</div>';}
else{new_div+='<div id="vre_id_new" class="vrednost_inline" contenteditable="true" tabindex="1" default="1" vre_id="new">'+lang['srv_new_vrednost']+'</div>'+' <span class="inline_other pointer" onclick="vrednost_new(\''+spremenljivka+'\', \'1\', \'\'); $(\'#fieldset'+spremenljivka+'\').show();">'+lang['srv_novavrednost_drugo']+'</span>'+' <span id="missing_block_'+spremenljivka+'" class="inline_other inline_missings pointer"></span>'+' <div class="icons_holder">'+'   <span class="faicon delete small inline inline_delete" title="'+lang['srv_brisivrednost']+'"></span>'+
(($(_this).closest('.variabla').parent().find('.correct').length)?' <span class="faicon correct inline" spr_id="'+spremenljivka+'" vre_id="new" title="'+lang['srv_vrednost_correct']+'"></span>':'')+'   <span class="faicon odg_hidden inline inline_hidden" odg_vre="0" odg_id="new" title="'+lang['srv_hide-disable_answer-0']+'"></span>'+'   <span class="faicon odg_if_follow inline inline_if_follow '+if_class_locked+'" onclick="follow_up_condition(\'new\'); return false;" title="'+lang['srv_follow_up']+'"></span>'+'   <span class="faicon odg_if_not inline inline_if_not '+if_class_locked+'" onclick="vrednost_condition_editing(\'new\'); return false;" title="'+lang['srv_podif_edit']+'"></span>'+'   <span class="faicon edit2 inline inline_edit"></span>'+' </div>'+'</div>';}}
else if(tip<=3&&orientation==7){if(tip<=2&&orientation!=6){var new_div='<div id="variabla_new" class="variabla after_'+$(_this).attr('vre_id')+'">'+'<span class="faicon move_updown inline inline_move" title=""></span>';new_div+='<div id="vre_id_new" class="vrednost_inline" contenteditable="true" tabindex="1" default="1" vre_id="new">'+lang['srv_new_vrednost']+'</div>'+' <span class="inline_other pointer" onclick="vrednost_new(\''+spremenljivka+'\', \'1\', \'\'); $(\'#fieldset'+spremenljivka+'\').show();">'+lang['srv_novavrednost_drugo']+'</span>'+' <span id="missing_block_'+spremenljivka+'" class="inline_other inline_missings pointer"></span>'+' <input id="foo_new" type="'+(tip==1?'radio':'checkbox')+'" value="" name="foo_new" />'+' <div class="icons_holder">'+'   <span class="faicon odg_hidden inline inline_hidden" odg_vre="0" odg_id="new" title="'+lang['srv_hide-disable_answer-0']+'"></span>'+'   <span class="faicon odg_if_follow inline inline_if_follow '+if_class_locked+'" onclick="follow_up_condition(\'new\'); return false;" title="'+lang['srv_follow_up']+'"></span>'+'   <span class="faicon odg_if_not inline inline_if_not '+if_class_locked+'" onclick="vrednost_condition_editing(\'new\'); return false;" title="'+lang['srv_podif_edit']+'"></span>'+'   <span class="faicon delete small inline inline_delete" title="'+'"></span>'+'   <span class="faicon edit2 inline inline_edit"></span>'+' </div>'+'</div>';}}
else if(tip<=2&&orientation==8){var new_div='<div id="variabla_new" class="variabla after_'+$(_this).attr('vre_id')+'">';if($(_this).closest('.variabla').parent().find('.image_upload').length){new_div+='<span class="faicon image_upload pointer" onclick="vrednost_insert_image(\''+$(_this).attr('vre_id')+'\', true); return false;" title="'+lang['upload_img2']+'"></span>'+'<span class="faicon move_updown inline inline_move" title=""></span>'+' <div id="vre_id_new" class="vrednost_inline ranking" style="float:none" contenteditable="true" tabindex="1" default="1" vre_id="new">'+lang['srv_new_vrednost']+'</div>'+' <div class="icons_holder">'+'   <span class="faicon delete small inline inline_delete" title="'+'"></span>'+'   <span class="faicon odg_hidden inline inline_hidden" odg_vre="0" odg_id="new" title="'+lang['srv_hide-disable_answer-0']+'"></span>'+'   <span class="faicon odg_if_not inline inline_if_not '+if_class_locked+'" onclick="vrednost_condition_editing(\'new\'); return false;" title="'+lang['srv_podif_edit']+'"></span>'+'   <span class="faicon edit2 inline inline_edit"></span>'+' </div>'+'</div>';}else{new_div+='<span class="faicon move_updown inline inline_move" title=""></span>'+'<div id="vre_id_new" class="vrednost_inline ranking" style="float:none" contenteditable="true" tabindex="1" default="1" vre_id="new">'+lang['srv_new_vrednost']+'</div>'+' <div class="icons_holder">'+'   <span class="faicon delete small inline inline_delete" title="'+'"></span>'+'   <span class="faicon odg_hidden inline inline_hidden" odg_vre="0" odg_id="new" title="'+lang['srv_hide-disable_answer-0']+'"></span>'+'   <span class="faicon odg_if_not inline inline_if_not '+if_class_locked+'" onclick="vrednost_condition_editing(\'new\'); return false;" title="'+lang['srv_podif_edit']+'"></span>'+'   <span class="faicon edit2 inline inline_edit"></span>'+' </div>'+'</div>';}}}else if((tip==6||tip==16)&&enota==9){var new_div='<div id="variabla_new" class="variabla after_'+$(_this).attr('vre_id')+'">'+'<span class="faicon move_updown inline inline_move" title=""></span>'+'<div id="vre_id_new" class="vrednost_inline ranking" style="float:none" contenteditable="true" tabindex="1" default="1" vre_id="new">'+lang['srv_new_vrednost']+'</div>'+'</div>';}else if(tip==17){if($(_this).closest('.variabla').find('select').length>0){var new_div='<div id="variabla_new" class="variabla after_'+$(_this).attr('vre_id')+'">'+'<span class="faicon move_updown inline inline_move" title=""></span>'+' <select style="width:50px; margin-top:0; float:left;"> '+'   <option></option> '+' </select> '+'<div id="vre_id_new" class="vrednost_inline" contenteditable="true" tabindex="1" default="1" vre_id="new">'+lang['srv_new_vrednost']+'</div>'+' <div class="icons_holder">'+'   <span class="faicon delete small inline inline_delete" title="'+'"></span>'+'   <span class="faicon odg_hidden inline inline_hidden" odg_vre="0" odg_id="new" title="'+lang['srv_hide-disable_answer-0']+'"></span>'+'   <span class="faicon odg_if_not inline inline_if_not '+if_class_locked+'" onclick="vrednost_condition_editing(\'new\'); return false;" title="'+lang['srv_podif_edit']+'"></span>'+'   <span class="faicon edit2 inline inline_edit"></span>'+' </div>'+'</div>';}
else{var new_div='<div id="variabla_new" class="variabla after_'+$(_this).attr('vre_id')+'">'+'<span class="faicon move_updown inline inline_move" title=""></span>'+'<div id="vre_id_new" class="vrednost_inline ranking" style="float:none" contenteditable="true" tabindex="1" default="1" vre_id="new">'+lang['srv_new_vrednost']+'</div>'+' <div class="icons_holder">'+'   <span class="faicon delete small inline inline_delete" title="'+'"></span>'+'   <span class="faicon odg_hidden inline inline_hidden" odg_vre="0" odg_id="new" title="'+lang['srv_hide-disable_answer-0']+'"></span>'+'   <span class="faicon odg_if_not inline inline_if_not '+if_class_locked+'" onclick="vrednost_condition_editing(\'new\'); return false;" title="'+lang['srv_podif_edit']+'"></span>'+'   <span class="faicon edit2 inline inline_edit"></span>'+' </div>'+'</div>';}}else if(tip==18){var text_width=$(_this).closest('.variabla').find('.vrednost_inline_vsota')[0].style.width;var new_div='<div id="variabla_new" class="variabla variabla_vsota after_'+$(_this).attr('vre_id')+'">'+'<span class="faicon move_updown inline inline_move" title=""></span>'+' <div class="icons_holder">'+'   <span class="faicon delete small inline inline_delete" title="'+'"></span>'+'   <span class="faicon odg_hidden inline inline_hidden" odg_vre="0" odg_id="new" title="'+lang['srv_hide-disable_answer-0']+'"></span>'+'   <span class="faicon odg_if_not inline inline_if_not '+if_class_locked+'" onclick="vrednost_condition_editing(\'new\'); return false;" title="'+lang['srv_podif_edit']+'"></span>'+'   <span class="faicon edit2 inline inline_edit"></span>'+' </div>'+'<div id="vre_id_new" class="vrednost_inline vrednost_inline_vsota" style="width:'+text_width+'" contenteditable="true" tabindex="1" default="1" vre_id="new">'+lang['srv_new_vrednost']+'</div>'+' <input type="text" name="foo_" maxlength="8" size="5">'+'</div>';}else{var new_div=$('<tr id="variabla_new" class="variabla after_'+$(_this).attr('vre_id')+'">'+$(_this).closest('.variabla').html()+'</tr>');new_div.find('*').removeAttr('id');new_div.find('div.vrednost_inline').attr('id','vre_id_new').attr('vre_id','new').attr('default','1').html(lang['srv_new_vrednost_grid']);new_div.find('div.icons_holder').css('display','none');new_div.find('input[type=text]:disabled').remove();new_div.find('span.inline_other').remove();new_div.find('span.red').remove();let child=(tip==6&&enota==5)?'td:nth-child(2)':'td:first-child';new_div.find(child).append(' <span class="inline_other pointer" '+((tip==24)?'style="margin-left:0px;" ':'')
+'onclick="vrednost_new(\''+$(_this).closest('.spremenljivka_content').attr('spr_id')+'\', \'1\', \'\');">'+lang['srv_novavrednost_drugo']+'</span>');if(new_div.find('div').length>1){new_div.find('div:last').attr('id','vre_id_new_2').attr('vre_id','new_2').attr('default','1').html(lang['srv_new_vrednost_grid']);}
let icons='   <span class="faicon delete small inline inline_delete" title="'+'"></span>'+'   <span class="faicon odg_hidden inline inline_hidden" odg_vre="0" odg_id="new" title="'+lang['srv_hide-disable_answer-0']+'"></span>'+'   <span class="faicon odg_if_not inline inline_if_not '+if_class_locked+'" onclick="vrednost_condition_editing(\'new\'); return false;" title="'+lang['srv_podif_edit']+'"></span>'+'   <span class="faicon edit2 inline inline_edit" style="margin-left:0;"></span>';new_div.find('div.icons_holder').html(icons);}
$(_this).closest('.variabla').parent().append(new_div);$(function(){if(tip<=3){$.post('ajax.php?t=branching&a=get_missing_block',{spremenljivka:spremenljivka,lang_id:srv_meta_lang_id,anketa:srv_meta_anketa_id},function(data){if(data){$('[id="missing_block_'+spremenljivka+'"]').last().html(data);}});}});if(focus===true)
$('#branching_'+spremenljivka).find('#vre_id_new').focus();}}}
function inline_nova_vrednost_hide(spr_id,vre_id){if($('#branching_'+spr_id).hasClass('spr_editing'))return;var div_new=$("#spremenljivka_content_"+spr_id).find('#variabla_new');if(div_new.hasClass('after_'+vre_id)&&!div_new.hasClass('inlineedit')){div_new.remove();}
if(vre_id=='new'&&!div_new.hasClass('inlineedit')){div_new.remove();}}
function inline_load_editor(_this){$(_this).css('display','none');var el=$(_this).parent().find('div[contenteditable].naslov_inline');if(el.attr('contenteditable')=='true'){var spr_id=el.attr('spr_id');var def_text=el.attr('default');var def_pogoj='';if(def_text==1)
var def_pogoj='default="'+def_text+'"';el.replaceWith('<textarea name="naslov_'+spr_id+'" id="naslov_'+spr_id+'" style="width:99%" '+def_pogoj+'>'+el.html()+'</textarea>'+'<div class="button_holder editor_button_holder"><button class="small blue" onclick="inline_save_editor(\''+spr_id+'\'); return false;">'+lang['save']+'</button></div>');editor_display(spr_id);}}
function inline_load_editor_hotspot(_this,vre_id){$(_this).css('display','none');var el=$(_this).parent().find('.vrednost_inline_hotspot');var spr_id=el.attr('spr_id');var def_text=el.attr('default');var def_pogoj='';if(def_text==1)
var def_pogoj='default="'+def_text+'"';el.replaceWith('<textarea name="hotspot_image_'+vre_id+'" id="hotspot_image_'+vre_id+'" style="width:99%" '+def_pogoj+'>'+el.html()+'</textarea>'+'<div class="button_holder editor_button_holder"><button class="medium blue" onclick="inline_save_editor_hotspot(\''+vre_id+'\', \''+spr_id+'\'); return false;">'+lang['save']+'</button></div>');editor_display_hotspot(vre_id);}
function inline_save_editor_hotspot(vre_id,spr_id,postsave){get_editor_close('hotspot_image_'+vre_id);var el=$('#hotspot_image_'+vre_id);var parent=el.parent();el.replaceWith('<div id="vre_id_'+vre_id+'" vre_id="'+vre_id+'" class="vrednost_inline_hotspot " contenteditable="false" spr_id="'+spr_id+'" tabindex="1">'+el.val()+'</div>');parent.find('div.button_holder').remove();if(postsave!=false)
inline_hotspot(spr_id,parent.find('div.vrednost_inline_hotspot'));$('#spremenljivka_content_'+spr_id+' span.inline_edit_hotspot').css('display','inline-block');}
function inline_save_editor(spr_id,postsave){get_editor_close('naslov_'+spr_id);var el=$('#naslov_'+spr_id);var parent=el.parent();el.replaceWith('<div class="naslov naslov_inline" contenteditable="true" spr_id="'+spr_id+'" tabindex="1">'+el.val()+'</div>');parent.find('div.button_holder').remove();if(postsave!=false)
inline_naslov(spr_id,parent.find('div.naslov_inline'));$('#spremenljivka_content_'+spr_id+' span.display_editor').css('display','inline-block');$('#spremenljivka_content_'+spr_id+' div.missing_dropdown_link').css('display','inline-block');}
function enterKeyPressHandler(evt){var sel,range,br,addedBr=false;evt=evt||window.event;var charCode=evt.which||evt.keyCode;if(charCode==13){if(typeof window.getSelection!="undefined"){sel=window.getSelection();if(sel.getRangeAt&&sel.rangeCount){range=sel.getRangeAt(0);range.deleteContents();br=document.createElement("br");range.insertNode(br);range.setEndAfter(br);range.setStartAfter(br);sel.removeAllRanges();sel.addRange(range);addedBr=true;}}else if(typeof document.selection!="undefined"){sel=document.selection;if(sel.createRange){range=sel.createRange();range.pasteHTML("<br>");range.select();addedBr=true;}}
if(addedBr){if(typeof evt.preventDefault!="undefined"){evt.preventDefault();}else{evt.returnValue=false;}}}}
function inline_minmaxlabel(spremenljivka,_this,tiplabele){if($(_this).attr('contenteditable')!='true')return;$.post('ajax.php?t=vprasanjeinline&a=inline_label_save',{spremenljivka:spremenljivka,anketa:srv_meta_anketa_id,lang_id:srv_meta_lang_id,tiplabele:tiplabele,label:$(_this).html()});}
function inline_labele_podrocij(spremenljivka,_this,tiplabele){if($(_this).attr('contenteditable')!='true')return;$.post('ajax.php?t=vprasanjeinline&a=inline_labele_podrocij_save',{spremenljivka:spremenljivka,anketa:srv_meta_anketa_id,lang_id:srv_meta_lang_id,tiplabele:tiplabele,label:$(_this).html()});}
function inline_opisne_labele(spremenljivka,_this,tiplabele){if($(_this).attr('contenteditable')!='true')return;$.post('ajax.php?t=vprasanjeinline&a=inline_opisne_labele_save',{spremenljivka:spremenljivka,anketa:srv_meta_anketa_id,lang_id:srv_meta_lang_id,tiplabele:tiplabele,label:$(_this).html()});}
function inline_variabla_vsota(spremenljivka,_this){if($(_this).attr('contenteditable')!='true')return;$.post('ajax.php?t=vprasanjeinline&a=inline_variabla_vsota_save',{spremenljivka:spremenljivka,anketa:srv_meta_anketa_id,lang_id:srv_meta_lang_id,inline_variabla_vsota:$(_this).html()});}
function inline_hotspot_delete_region(spr_id,region_index,vre_id){$.post('ajax.php?t=vprasanjeinline&a=inline_hotspot_delete_region',{spr_id:spr_id,region_index:region_index,vre_id:vre_id});$('#hotspot_region_'+region_index).remove();var heatmap_region_settings=true;$('#hot_spot_fieldset_'+spr_id).children().each(function(){heatmap_region_settings=$('#hot_spot_fieldset_'+spr_id).children().hasClass('hotspot_region');});if(heatmap_region_settings){$('#heatmap_region_settings_'+spr_id).css('display','');}else{$('#heatmap_region_settings_'+spr_id).css('display','none');}
$('#variabla_'+vre_id).remove();var vrednost=$('input[name=vrednost]').val();$.post('ajax.php?t=vprasanje&a=vrednost_save',$("form[name=vrednost_edit]").serialize(),function(data){$('#vre_id_'+vrednost).html(data);$('#vrednost_edit').html('');vprasanje_save(true);});$.post('ajax.php?t=vprasanjeinline&a=inline_hotspot_update_region',{spr_id:spr_id});}
function inline_hotspot_edit_region(spr_id,region_index,vre_id){hotspot_edit_regions(spr_id,vre_id);}
function trak_inline_nadnaslov(spremenljivka,_this,tiplabele,grid){if($(_this).attr('contenteditable')!='true')return;$.post('ajax.php?t=vprasanjeinline&a=inline_nadnaslov_save',{anketa:srv_meta_anketa_id,grid:grid,spremenljivka:spremenljivka,anketa:srv_meta_anketa_id,lang_id:srv_meta_lang_id,tiplabele:tiplabele,label:$(_this).html()});};function displayVprasanjeDeletedPopup(){$('#fade').fadeTo('slow',1);$('#general_popup').html('').addClass('vprasanje_deleted_popup').fadeIn('slow');$("#general_popup").load('ajax.php?t=vprasanjeDeleted&a=displayVprasanjeDeletedPopup',{anketa:srv_meta_anketa_id});}
function selectVprasanjeDeletedItem(item_id){if($('#question_item_holder_'+item_id).hasClass('active')){$('#question_item_holder_'+item_id).removeClass('active');$('#question_item_check_'+item_id).attr("checked",false);}
else{$('#question_item_holder_'+item_id).addClass('active');$('#question_item_check_'+item_id).attr("checked",true);}
var count=$('.question_item_check:checkbox:checked').length;$('#selected_item_counter').html(count);if(count>0){$("#insert_vprasanje_deleted_button").prop('disabled',false);}
else{$("#insert_vprasanje_deleted_button").prop('disabled',true);}}
function deleteVprasanjeDeleted(item_id,item_type){$.post('ajax.php?t=vprasanjeDeleted&a=deleteItem',{anketa:srv_meta_anketa_id,item_id:item_id,item_type:item_type},function(){$('#question_item_holder_'+item_id).remove();});event.stopPropagation();}
function insertVprasanjeDeletedItemsIntoSurvey(){var items=[];var prev=false;var note='1';$('.question_item_check:checkbox:checked').each(function(){var id_string=$(this).attr("id");var id=id_string.substring(20);items.push(id);if(prev){note='1m';}
prev=true;});$("#branching").load('ajax.php?t=vprasanjeDeleted&a=addIntoSurvey',{anketa:srv_meta_anketa_id,items:items},function(){popupClose();actionNotePopup('lib_add_to_survey_'+note,'success');});}
function previewVprasanje(spr_id){$('#vprasanje_preview').load('ajax.php?a=preview_spremenljivka_lib',{anketa:srv_meta_anketa_id,spremenljivka:spr_id,podstran:srv_meta_podstran}).removeClass('displayNone');event.stopPropagation();}
function closePreviewVprasanje(){$('#vprasanje_preview').addClass('displayNone').empty();};function openCommentPopupInline(type,spremenljivka){$('.comment_inline_popup').addClass('displayNone');if(type==1){$("#comment_inline_add_"+spremenljivka).removeClass('displayNone');}
else if(type==2){$("#comment_inline_editor_"+spremenljivka).removeClass('displayNone');}
else if(type==3){$("#comment_inline_respondent_"+spremenljivka).removeClass('displayNone');}}
function closeCommentPopupInline(type,spremenljivka){if(type==1){$("#comment_inline_add_"+spremenljivka).addClass('displayNone');}
else if(type==2){$("#comment_inline_editor_"+spremenljivka).addClass('displayNone');}
else if(type==3){$("#comment_inline_respondent_"+spremenljivka).addClass('displayNone');}}
function openIfCommentPopupInline(type,if_id){$('.comment_inline_popup').addClass('displayNone');if(type==1){$("#comment_if_inline_add_"+if_id).removeClass('displayNone');}
else if(type==2){$("#comment_if_inline_editor_"+if_id).removeClass('displayNone');}}
function closeIfCommentPopupInline(type,if_id){if(type==1){$("#comment_if_inline_add_"+if_id).addClass('displayNone');}
else if(type==2){$("#comment_if_inline_editor_"+if_id).addClass('displayNone');}}
function toggleCommentDropdown(){$("#comment_dropdown").toggleClass('displayNone');}
function toggleCommentDropdownTestSurvey(){$("#comment_dropdown_test_survey").toggleClass('displayNone');$(".open_comment_box").toggleClass('active');}
function toggleCommentOptions(id){$("#options_"+id).toggleClass("displayNone");}
var siteurl='';if(typeof srv_site_url!=='undefined'){siteurl=srv_site_url+'/admin/survey/';}
function add_comment(spremenljivka,type,view,vsebina){$('div#survey_comment_'+spremenljivka+'_'+view).load(siteurl+'ajax.php?t=branching&a=comment_manage',{type:type,view:view,spremenljivka:spremenljivka,vsebina:vsebina,anketa:srv_meta_anketa_id,refresh:'1'},function(){if(view==1&&(type==0||type==4)){$('#comment_dropdown_test_survey').html('<div class="success">'+lang['action_note_comment_added']+'</div>');}
else if(view==0){$(".comment_inline_popup").addClass('displayNone');}
else if(view==4||view==5){window.location.reload();}});}
function load_comment(__this,show){if(show==1){_when=false;_ready=true;var corners=['leftMiddle','leftMiddle'];var opposites=['rightMiddle','rightMiddle'];}else if(show==2){_when='click';_ready=true;var corners=['topRight','topRight'];var opposites=['bottomLeft','bottomLeft'];}else{_when='click';_ready=false;var corners=['topLeft','topRight'];var opposites=['bottomRight','bottomLeft'];}
var width=$(document).width();var position=$(__this).offset();var left=width-position.left;var i=(left>=350)?0:1;if($(__this).data("qtip")){$(__this).qtip("destroy");$('div.qtip').html('');}
if($(__this).attr('view')=='1'&&!show&&$('#comment_qtip_title').length>0&&$(__this).attr('subtype')==undefined){var naslov=$('#comment_qtip_title').val();}
else if($(__this).attr('subtype')=='q_admin_add'){var naslov=lang['srv_testiranje_komentar_q_title'];}
else if($(__this).attr('subtype')=='if_admin_add'){var naslov=lang['srv_testiranje_komentar_if_title'];}
else if($(__this).attr('subtype')=='if_admin_all'){var naslov=lang['srv_testiranje_komentar_if_all_title'];}
else if($(__this).attr('subtype')=='blok_admin_add'){var naslov=lang['srv_testiranje_komentar_blok_title'];}
else if($(__this).attr('subtype')=='blok_admin_all'){var naslov=lang['srv_testiranje_komentar_blok_all_title'];}
else if($(__this).attr('subtype')=='q_admin_all'){var naslov=lang['srv_testiranje_komentar_q_all_title'];}
else if($(__this).attr('subtype')=='q_resp_all'){var naslov=lang['srv_testiranje_komentar_q_resp_all_title'];}
else{var naslov=lang['srv_testiranje_komentarji_anketa_title2'];}
$(__this).qtip({content:{text:'<div class="qtip_comment"><h1>'+naslov+'</h1><div id="survey_comment_'+$(__this).attr('spremenljivka')+'_'+$(__this).attr('view')+'"></div></div>',title:{button:'&#x2715;'}},fixed:false,show:{when:_when,ready:_ready,solo:true},hide:{when:'click'},style:{name:'light',border:{width:3,radius:8},width:350,tip:{corner:corners[i]}},position:{corner:{tooltip:corners[i],target:opposites[i]},adjust:{screen:true}},api:{beforeShow:function(){_comment=1;$('div#survey_comment_'+$(__this).attr('spremenljivka')+'_'+$(__this).attr('view')).load(siteurl+'ajax.php?t=branching&a=comment_manage',{anketa:srv_meta_anketa_id,type:$(__this).attr('type'),view:$(__this).attr('view'),spremenljivka:$(__this).attr('spremenljivka'),vsebina:'',anketa:srv_meta_anketa_id,refresh:'1'});},onShow:function(){$('div.qtip').draggable();}}});}
var _comment=0;;var _vprasanje_prevod_preview=0;function extra_translation(text){if(!$('#srvlang_'+text).hasClass('editing'))
$('#srvlang_'+text).addClass('editing').load('ajax.php?t=prevajanje&a=extra_translation',{text:text,lang_id:srv_meta_lang_id,anketa:srv_meta_anketa_id},function(){$('#srvlang_'+text+'_'+srv_meta_lang_id).focus();});}
function extra_translation_save(text){value=$('#srvlang_'+text+'_'+srv_meta_lang_id).html();$.post('ajax.php?t=prevajanje&a=extra_translation_save',{value:value,text:text,lang_id:srv_meta_lang_id,anketa:srv_meta_anketa_id});}
function vprasanje_prevod(spremenljivka){if(_vprasanje_prevod_preview==1){_vprasanje_prevod_preview=0;return;}
if(!$('#vprlang_'+spremenljivka).hasClass('editing'))
$('#vprlang_'+spremenljivka).addClass('editing').load('ajax.php?t=prevajanje&a=vprasanje_prevod',{spremenljivka:spremenljivka,lang_id:srv_meta_lang_id,anketa:srv_meta_anketa_id});}
function vprasanje_prevod_save(spremenljivka){$.post('ajax.php?t=prevajanje&a=vprasanje_prevod_save',$('form#vprasanje_prevod_'+spremenljivka).serialize(),function(data){$('#vprlang_'+spremenljivka).html(data).removeClass('editing');});}
function prevajanje_bind_click(){$('fieldset.locked').bind('click',function(event){inline_bind_click(event);});};function missingValues_init(){$("input[name=missing_values_type]").live("click",function(event){if(event.button!=0){return true;}
changeSurveyMissingSettings();});$('input[name=mv_value_input], input[name=mv_text_input]').live('keypress',function(evt){evt=evt||window.event;if(/^(37|39)$/i.test(evt.keyCode)){return;}
if(evt.keyCode==13||evt.keyCode==9){saveSurveyMissingValue(evt,this);}else{var charCode=evt.keyCode||evt.which;var charStr=String.fromCharCode(charCode);if(charStr=='_'){evt.preventDefault();}
$(this).data('changed',true);}}).live('blur',function(e){saveSurveyMissingValue(e,this);});$('span[name=mv_delete_img]').live('click',function(evt){deleteSurveyMissingValue(this);});$('#mv_add_img').live('click',function(evt){addSurveyMissingValue();});};function sysMissingValuesChangeMode(mode){$("#sys_missing_values").load('ajax.php?t=missingValues&a=sysMissingValuesChangeMode',{mode:mode});}
function sysMissingValuesAdd()
{var filter=jQuery.trim($("#sysMissingValues_filter_input_add").val());var text=jQuery.trim($("#sysMissingValues_text_input_add").val());if(filter!=undefined&&!(filter==='')&&text!=undefined&&!(text==='')){$("#sys_missing_values").load('ajax.php?t=missingValues&a=sysMissingValuesAdd',{filter:filter,text:text});}else{genericAlertPopup('srv_missing_value_not_empty');}}
function sysMissingValuesDelete(id)
{$("#sys_missing_values").load('ajax.php?t=missingValues&a=sysMissingValuesDelete',{id:id});}
function sysMissingValuesSave(id){var filter=jQuery.trim($("#sysMissingValues_filter_input_"+id).val());var text=jQuery.trim($("#sysMissingValues_text_input_"+id).val());if(filter!=undefined&&!(filter==='')&&text!=undefined&&!(text==='')){$("#sys_missing_values").load('ajax.php?t=missingValues&a=sysMissingValuesSave',{filter:filter,text:text,id:id});}else{genericAlertPopup('srv_missing_value_not_empty');}}
function changeSurveyMissingSettings(){var missing_values_type=$("input[name=missing_values_type]:checked").val();$("#anketa_edit").load('ajax.php?t=missingValues&a=changeSurveyMissingSettings',{anketa:srv_meta_anketa_id,missing_values_type:missing_values_type});}
function useSystemMissingValues(){if(confirm(lang['srv_missing_confirm_use_system'])){$("#anketa_edit").load('ajax.php?t=missingValues&a=useSystemMissingValues',{anketa:srv_meta_anketa_id});}}
function saveSurveyMissingValue(event,what){var changed=$(what).data('changed');if(changed==true){$("#anketa_edit").load('ajax.php?t=missingValues&a=saveSurveyMissingValue',{anketa:srv_meta_anketa_id,el_id:$(what).attr('id'),new_value:$(what).val()});}}
function deleteSurveyMissingValue(what){var delete_id=$(what).attr('id');var data=delete_id.split('_');var missing_value_label=$("#mv_value_"+data[2]+"_"+data[3]).val()+' > '+$("#mv_text_"+data[2]+"_"+data[3]).val();if(confirm(lang['srv_missing_confirm_delete']+' '+missing_value_label+' ?')){$("#anketa_edit").load('ajax.php?t=missingValues&a=srv_missing_confirm_delete',{anketa:srv_meta_anketa_id,delete_id:delete_id});}}
function addSurveyMissingValue(what){$('#fullscreen').html('').fadeIn().draggable({delay:100,cancel:'input, textarea, select, .buttonwrapper'});$('#fade').fadeTo('fast',0.5);$('#fullscreen').load('ajax.php?t=missingValues&a=srv_missing_add_new',{anketa:srv_meta_anketa_id});}
function addSurveyMissingValueCancel(){$('#fade').fadeOut('slow');$('#fullscreen').fadeOut();}
function addSurveyMissingValueConfirm(){var mv_add_filter=$("#mv_add_filter").val();var mv_add_text=$("#mv_add_text").val();$.post('ajax.php?t=missingValues&a=srv_missing_confirm_add',{anketa:srv_meta_anketa_id,mv_add_filter:mv_add_filter,mv_add_text:mv_add_text},function(response){if(response=='true'){$("#anketa_edit").load('ajax.php?t=missingValues&a=srv_missing_display',{anketa:srv_meta_anketa_id},function(){$('#fade').fadeOut('slow');$('#fullscreen').fadeOut('slow');});}else{genericAlertPopup('alert_parameter_response',response);}});};function missingProfiles_init(){$("#missing_profile").live('click',function(event){var $target=$(event.target);if($target.hasClass('option')){pid=$target.attr('value');$.post('ajax.php?t=missingProfiles&a=change_profile',{anketa:srv_meta_anketa_id,pid:pid},function(){show_missing_profile_data(pid);});}});};function show_missing_profile_data(pid){$("#div_missing_profiles").load('ajax.php?t=missingProfiles&a=show_profile',{anketa:srv_meta_anketa_id,pid:pid,meta_akcija:srv_meta_akcija});}
function show_missing_profiles()
{$('#fade').fadeTo('slow',1);$("#div_missing_profiles").load('ajax.php?t=missingProfiles&a=show_profile',{anketa:srv_meta_anketa_id,podstran:srv_meta_podstran});var msg=$('#div_analiza_missing_values');var height=$(window).height();var width=$(document).width();var left=width-(msg.width())-42;var top=height/2-(msg.height()/2);$("#div_missing_profiles").show(200).draggable({delay:100,cancel:'input, .buttonwrapper'});}
function missingProfileAction(action){if(action=='change'){$("#loading").show();var pid=$("#current_missing_profile").val();$.post('ajax.php?t=missingProfiles&a=change_profile',{anketa:srv_meta_anketa_id,pid:pid},function(){missingProfileRefreshData(pid);});}else if(action=='runSession'||action=='run'){if(action=='run'){var pid=$("#missing_profile .active").attr('value');}else{var pid='-1';}
var missing_values="";var prefix="";$('input[name="profile_value[]"]:checked').each(function(){missing_values=missing_values+prefix+$(this).attr('id');prefix=",";});var display_mv_type=$('input[name="display_mv_type"]:checked').val();var show_zerro=$("#show_zerro").is(':checked');var merge_missing=$("#merge_missing").is(':checked');$.post('ajax.php?t=missingProfiles&a=run_profile',{anketa:srv_meta_anketa_id,pid:pid,missing_values:missing_values,display_mv_type:display_mv_type,show_zerro:show_zerro,merge_missing:merge_missing},function(){missingProfileRefreshData(pid);});missingProfileAction('cancle');}else if(action=='newCancle'){$("#missingProfileCoverDiv").hide();$("#newProfile").hide();}else if(action=='newName'){$("#missingProfileCoverDiv").show();$("#newProfile").show();}else if(action=='newSave'){var pid=$("#missing_profile .active").attr('value');var name=$("#newProfileName").val();var missing_values="";var prefix="";$('input[name="profile_value[]"]:checked').each(function(){missing_values=missing_values+prefix+$(this).attr('id');prefix=",";});var display_mv_type=$('input[name="display_mv_type"]:checked').val();var show_zerro=$("#show_zerro").is(':checked');var merge_missing=$("#merge_missing").is(':checked');$.post('ajax.php?t=missingProfiles&a=save_profile',{anketa:srv_meta_anketa_id,pid:pid,name:name,missing_values:missing_values,display_mv_type:display_mv_type,show_zerro:show_zerro,merge_missing:merge_missing},function(newId){if(parseInt(newId)>0){$("#div_missing_profiles").load('ajax.php?t=missingProfiles&a=show_profile',{anketa:srv_meta_anketa_id,meta_akcija:srv_meta_akcija});$("#current_missing_profile").append($("<option></option>").attr("value",newId).attr("selected",true).text(name));$("#newProfile").hide();$("#missingProfileCoverDiv").fadeOut();missingProfileRefreshData(newId);}});}else if(action=='cancle'){$("#div_missing_profiles").hide(200);$('#fade').fadeOut('slow');$("#div_missing_profiles").html('');return reloadData();}else if(action=='deleteAsk'){$("#missingProfileCoverDiv").show();$("#deleteProfileDiv").show();}else if(action=='deleteCancle'){$("#deleteProfileDiv").hide();$("#missingProfileCoverDiv").fadeOut();}else if(action=='deleteConfirm'){var pid=$("#missing_profile .active").attr('value');$.post('ajax.php?t=missingProfiles&a=delete_profile',{anketa:srv_meta_anketa_id,pid:pid},function(){$("#div_missing_profiles").load('ajax.php?t=missingProfiles&a=show_profile',{anketa:srv_meta_anketa_id,meta_akcija:srv_meta_akcija,pid:'1'});missingProfileRefreshData('1');});$("#deleteProfileDiv").hide();$("#missingProfileCoverDiv").fadeOut();}else if(action=='renameAsk'){$("#renameProfileDiv").show();$("#missingProfileCoverDiv").fadeIn();}else if(action=='renameCancle'){$("#renameProfileDiv").hide();$("#missingProfileCoverDiv").fadeOut();}else if(action=='rename'){var pid=$("#missing_profile .active").attr('value');var name=$("#renameProfileName").val();$.post('ajax.php?t=missingProfiles&a=rename_profile',{anketa:srv_meta_anketa_id,pid:pid,name:name},function(response){if(parseInt(response)==0){$("#div_missing_profiles").load('ajax.php?t=missingProfiles&a=show_profile',{anketa:srv_meta_anketa_id,meta_akcija:srv_meta_akcija,pid:pid});$("#renameProfileDiv").hide();$("#missingProfileCoverDiv").fadeOut();}else{genericAlertPopup('alert_parameter_response',response);}});}else{genericAlertPopup('alert_parameter_action',action);}}
function missingProfileRefreshData(pid){return reloadData();};function variableProfiles_init(){};function changeVariableProfile(pid)
{$('#fade').fadeTo('slow',1);$('#fullscreen').fadeIn('slow');$("#fullscreen").load('ajax.php?t=variableProfile&a=displayProfile',{anketa:srv_meta_anketa_id,podstran:srv_meta_podstran,pid:pid});}
function displayVariableProfile()
{$('#fade').fadeTo('slow',1);$('#fullscreen').html('').fadeIn('slow');$("#fullscreen").load('ajax.php?t=variableProfile&a=displayProfile',{anketa:srv_meta_anketa_id,podstran:srv_meta_podstran});}
function variableProfileSelectAll(val){$("#vp_list_ul input:checkbox").each(function(){if(val=='1'){this.checked=true;}
else{this.checked=false;}
variableProfileCheckboxChange(this);});}
function variableProfileCheckboxChange(what)
{$(what).is(':checked')?$(what).parent().parent().addClass('selected'):$(what).parent().parent().removeClass('selected');}
function variableProfileAction(action){if(action=='choose')
{variableProfileAction('save');pid=$("#variable_profile div.active").attr('value');if(pid==0&&$("input[name=vp_list_li]:checked").length!=$("input[name=vp_list_li]").length)
{pid=-1}
$(".divPopUp").fadeOut();$.post('ajax.php?t=variableProfile&a=chooseProfile',{anketa:srv_meta_anketa_id,meta_akcija:srv_meta_akcija,podstran:srv_meta_podstran,pid:pid},function(){return reloadData();});}
else if(action=='save')
{pid=$("#variable_profile div.active").attr('value');vp_list_li=$("input[name=vp_list_li]:checked").serialize();$.post('ajax.php?t=variableProfile&a=saveProfile',{anketa:srv_meta_anketa_id,pid:pid,vp_list_li:vp_list_li,meta_akcija:srv_meta_akcija,podstran:srv_meta_podstran});}
else if(action=='newName')
{$("#variableProfileCoverDiv").show();$("#newProfile").show();}
else if(action=='newCancel')
{$("#newProfile").hide();$("#variableProfileCoverDiv").fadeOut();}
else if(action=='newSave')
{pid=$("#variable_profile div.active").attr('value');vp_list_li=$("input[name=vp_list_li]:checked").serialize();name=$("#newProfileName").val();$.post('ajax.php?t=variableProfile&a=saveNewProfile',{anketa:srv_meta_anketa_id,pid:pid,vp_list_li:vp_list_li,name:name,meta_akcija:srv_meta_akcija,podstran:srv_meta_podstran},function(newId){changeVariableProfile(newId);});}
else if(action=='deleteAsk')
{$("#variableProfileCoverDiv").show();$("#deleteProfileDiv").show();}
else if(action=='deleteCancel')
{$("#deleteProfileDiv").hide();$("#variableProfileCoverDiv").fadeOut();}
else if(action=='deleteConfirm')
{pid=$("#variable_profile div.active").attr('value');$.post('ajax.php?t=variableProfile&a=deleteProfile',{anketa:srv_meta_anketa_id,meta_akcija:srv_meta_akcija,podstran:srv_meta_podstran,pid:pid},function(){displayVariableProfile();});}
else if(action=='renameAsk')
{$("#renameProfileDiv").show();$("#variableProfileCoverDiv").fadeIn();}
else if(action=='renameCancel')
{$("#renameProfileDiv").hide();$("#variableProfileCoverDiv").fadeOut();}
else if(action=='renameProfile')
{pid=$("#variable_profile div.active").attr('value');name=$("#renameProfileName").attr('value');$.post('ajax.php?t=variableProfile&a=renameProfile',{anketa:srv_meta_anketa_id,pid:pid,name:name},function(){changeVariableProfile(pid);});}}
function removeVariableProfile()
{var pid='0';$.post('ajax.php?t=variableProfile&a=chooseProfile',{anketa:srv_meta_anketa_id,meta_akcija:srv_meta_akcija,podstran:srv_meta_podstran,pid:pid},function(){return reloadData();});};function show_status_profile_data(pid){$("#fullscreen").load('ajax.php?t=statusProfile&a=displayProfile',{anketa:srv_meta_anketa_id,pid:pid,meta_akcija:srv_meta_akcija,podstran:srv_meta_podstran});}
function show_status_profile(){$('#fade').fadeTo('slow',1);$('#fullscreen').html('').fadeIn('slow');$("#fullscreen").load('ajax.php?t=statusProfile&a=displayProfile',{anketa:srv_meta_anketa_id,meta_akcija:srv_meta_akcija,podstran:srv_meta_podstran});}
function statusProfileAction(action){if(action=='choose')
{$(".divPopUp").fadeOut();pid=$("#status_profile .active").attr('value');$.post('ajax.php?t=statusProfile&a=chooseProfile',{anketa:srv_meta_anketa_id,pid:pid,meta_akcija:srv_meta_akcija,podstran:srv_meta_podstran},function(){return reloadData('status');});}
else if(action=='save')
{pid=$("#status_profile .active").attr('value');var statusCnt=0;var srv_userstatus="";prefix="";$("input[name^=srv_userstatus]:checked").each(function(){srv_userstatus=srv_userstatus+prefix+$(this).attr('id');prefix=",";statusCnt=statusCnt+1;});var lurker=$("input[name=srv_us_lurker]:checked").val();var testni=$("input[name=srv_us_testni]:checked").val();var nonusable=0;var partusable=0;var usable=0;if($("input[name=srv_us_nonusable]").attr('checked'))
nonusable=1;if($("input[name=srv_us_partusable]").attr('checked'))
partusable=1;if($("input[name=srv_us_usable]").attr('checked'))
usable=1;$.post('ajax.php?t=statusProfile&a=saveProfile',{anketa:srv_meta_anketa_id,pid:pid,status:srv_userstatus,testni:testni,lurker:lurker,nonusable:nonusable,partusable:partusable,usable:usable,meta_akcija:srv_meta_akcija,podstran:srv_meta_podstran});}
else if(action=='newSave')
{pid=$("#status_profile .active").attr('value');name=$("#newProfileName").val();var statusCnt=0;var srv_userstatus="";prefix="";$("input[name^=srv_userstatus]:checked").each(function(){srv_userstatus=srv_userstatus+prefix+$(this).attr('id');prefix=",";statusCnt=statusCnt+1;});var lurker=$("input[name=srv_us_lurker]:checked").val();var testni=$("input[name=srv_us_testni]:checked").val();var nonusable=0;var partusable=0;var usable=0;if($("input[name=srv_us_nonusable]").attr('checked'))
nonusable=1;if($("input[name=srv_us_partusable]").attr('checked'))
partusable=1;if($("input[name=srv_us_usable]").attr('checked'))
usable=1;$.post('ajax.php?t=statusProfile&a=save_status_profile',{anketa:srv_meta_anketa_id,pid:pid,name:name,status:srv_userstatus,testni:testni,lurker:lurker,nonusable:nonusable,partusable:partusable,usable:usable,meta_akcija:srv_meta_akcija,podstran:srv_meta_podstran},function(newId){show_status_profile_data(newId);});}else if(action=='runSession'){var pid='-1';var statusCnt=0;var srv_userstatus="";prefix="";$("input[name^=srv_userstatus]:checked").each(function(){srv_userstatus=srv_userstatus+prefix+$(this).attr('id');prefix=",";statusCnt=statusCnt+1;});var lurker=$("input[name=srv_us_lurker]:checked").val();var testni=$("input[name=srv_us_testni]:checked").val();var nonusable=0;var partusable=0;var usable=0;if($("input[name=srv_us_nonusable]").attr('checked'))
nonusable=1;if($("input[name=srv_us_partusable]").attr('checked'))
partusable=1;if($("input[name=srv_us_usable]").attr('checked'))
usable=1;$.post('ajax.php?t=statusProfile&a=run_status_profile',{anketa:srv_meta_anketa_id,pid:pid,status:srv_userstatus,testni:testni,lurker:lurker,nonusable:nonusable,partusable:partusable,usable:usable,meta_akcija:srv_meta_akcija,podstran:srv_meta_podstran},function(){return reloadData('status');});}else if(action=='run'){pid=$("#status_profile .active").attr('value');var statusCnt=0;var srv_userstatus="";prefix="";$("input[name^=srv_userstatus]:checked").each(function(){srv_userstatus=srv_userstatus+prefix+$(this).attr('id');prefix=",";statusCnt=statusCnt+1;});var lurker=$("input[name=srv_us_lurker]:checked").val();var testni=$("input[name=srv_us_testni]:checked").val();var nonusable=0;var partusable=0;var usable=0;if($("input[name=srv_us_nonusable]").attr('checked'))
nonusable=1;if($("input[name=srv_us_partusable]").attr('checked'))
partusable=1;if($("input[name=srv_us_usable]").attr('checked'))
usable=1;$.post('ajax.php?t=statusProfile&a=run_status_profile',{anketa:srv_meta_anketa_id,pid:pid,status:srv_userstatus,testni:testni,lurker:lurker,nonusable:nonusable,partusable:partusable,usable:usable,meta_akcija:srv_meta_akcija,podstran:srv_meta_podstran},function(){return reloadData('status');});}else if(action=='cancel'){$("#div_status_values").hide(200);$("#div_status_values").html('');return reloadData('status');}else if(action=='newCancel'){$("#statusProfileCoverDiv").hide();$("#newProfile").hide();}else if(action=='newName'){$("#statusProfileCoverDiv").show();$("#newProfile").show();}else if(action=='deleteAsk')
{$("#statusProfileCoverDiv").show();$("#deleteProfileDiv").show();}
else if(action=='deleteCancel')
{$("#deleteProfileDiv").hide();$("#statusProfileCoverDiv").fadeOut();}
else if(action=='deleteConfirm')
{pid=$("#status_profile .active").attr('value');$.post('ajax.php?t=statusProfile&a=deleteProfile',{anketa:srv_meta_anketa_id,meta_akcija:srv_meta_akcija,podstran:srv_meta_podstran,pid:pid},function(){show_status_profile();});}
else if(action=='renameAsk')
{$("#renameProfileDiv").show();$("#statusProfileCoverDiv").fadeIn();}
else if(action=='renameCancel')
{$("#renameProfileDiv").hide();$("#statusProfileCoverDiv").fadeOut();}
else if(action=='renameProfile')
{pid=$("#status_profile .active").attr('value');name=$("#renameProfileName").attr('value');$.post('ajax.php?t=statusProfile&a=renameProfile',{anketa:srv_meta_anketa_id,pid:pid,name:name},function(){show_status_profile_data(pid);});}}
function statusProfileRefreshData(pid){$("#current_status_profile").val(pid);return reloadData('status');}
function changeColectDataStatus(){let invalid_answers_count=0;$.post('ajax.php?a=dataCountNeustrezne',{anketa:srv_meta_anketa_id},function(response){invalid_answers_count=response;if(invalid_answers_count>1000){showInvalidResponsesWarning();}
else{refreshDataFile();}});}
function showInvalidResponsesWarning(){$('#fade').fadeTo('slow',1);$('#general_popup').addClass('PopUpNarrow');$('#general_popup').html('').fadeIn('slow');$("#general_popup").load('ajax.php?t=statusProfile&a=showInvalidResponsesWarning',{anketa:srv_meta_anketa_id});}
function refreshDataFile(){var collect_all_status=$('input[name="collect_all_status"]').is(':checked')?'0':'1';$.post('ajax.php?t=statusProfile&a=saveCollectDataSetting',{anketa:srv_meta_anketa_id,collect_all_status:collect_all_status},function(response){return reloadData('status');});}
function deleteInvalidAnswers(){$.post('ajax.php?a=dataDeleteNeustrezne',{anketa:srv_meta_anketa_id},function(response){refreshDataFile();});}
function changeOnlyValidRadio(){var checked=$('input[name=statusOnlyValid]:checked').val();$.post('ajax.php?t=statusProfile&a=changeOnlyValidRadio',{anketa:srv_meta_anketa_id,meta_akcija:srv_meta_akcija,podstran:srv_meta_podstran,checked:checked},function(response){return reloadData('status');});};function conditionProfiles_init(){$("#condition_profile .option:not(.active)").live('click',function(event){var $target=$(event.target);var pid=$target.attr('value');$.post('ajax.php?t=conditionProfile&a=change_condition_profile',{anketa:srv_meta_anketa_id,pid:pid},function(){$("#div_condition_profiles").load('ajax.php?t=conditionProfile&a=show_condition_profile',{anketa:srv_meta_anketa_id,pid:pid,meta_akcija:srv_meta_akcija,podstran:srv_meta_podstran});});});$("#link_condition_remove").live("click",function(event){$.post('ajax.php?t=conditionProfile&a=condition_remove',{anketa:srv_meta_anketa_id},function(){return reloadData();});});$("#link_condition_edit").live("click",function(event){conditionProfileAction('showProfiles');});};function conditionProfileAction(action){if(action=='showProfiles'){$('#fade').fadeTo('slow',1);$("#div_condition_profiles").load('ajax.php?t=conditionProfile&a=show_condition_profile',{anketa:srv_meta_anketa_id,meta_akcija:srv_meta_akcija,podstran:srv_meta_podstran}).show(200);}else if(action=='change'){$("#loading").show();var pid=$("#current_condition_profile").val();$.post('ajax.php?t=conditionProfile&a=change_condition_profile',{anketa:srv_meta_anketa_id,pid:pid},function(){return reloadData();});}else if(action=='cancle'){reloadData('condition');$("#div_condition_profiles").hide(200);$("#div_condition_profiles").html('');}else if(action=='newName'){$("#conditionProfileCoverDiv").show();$("#newProfile").show();}else if(action=='newCancle'){$("#conditionProfileCoverDiv").hide();$("#newProfile").hide();}else if(action=='newCreate'){name=$("#newProfileName").val();$.post('ajax.php?t=conditionProfile&a=create_condition_profile',{anketa:srv_meta_anketa_id,name:name,meta_akcija:srv_meta_akcija,podstran:srv_meta_podstran},function(newId){if(newId>0){$("#div_condition_profiles").load('ajax.php?t=conditionProfile&a=show_condition_profile',{anketa:srv_meta_anketa_id,meta_akcija:srv_meta_akcija,podstran:srv_meta_podstran,pid:newId});$("#current_condition_profile").append($("<option></option>").attr("value",newId).attr("selected",true).text(name));}else{genericAlertPopup('error');}});}else if(action=='deleteAsk'){$("#conditionProfileCoverDiv").show();$("#deleteProfileDiv").show();}else if(action=='deleteCancle'){$("#deleteProfileDiv").hide();$("#conditionProfileCoverDiv").fadeOut();}else if(action=='deleteConfirm'){var pid=$("#condition_profile .active").attr('value');$.post('ajax.php?t=conditionProfile&a=delete_condition_profile',{anketa:srv_meta_anketa_id,pid:pid},function(){$("#div_condition_profiles").load('ajax.php?t=conditionProfile&a=show_condition_profile',{anketa:srv_meta_anketa_id,meta_akcija:srv_meta_akcija,podstran:srv_meta_podstran});});$("#deleteProfileDiv").hide();$("#conditionProfileCoverDiv").fadeOut();}else if(action=='renameAsk'){$("#renameProfileDiv").show();$("#conditionProfileCoverDiv").fadeIn();}else if(action=='renameCancle'){$("#renameProfileDiv").hide();$("#conditionProfileCoverDiv").fadeOut();}else if(action=='renameConfirm'){var pid=$("#condition_profile .active").attr('value');var name=$("#renameProfileName").val();$.post('ajax.php?t=conditionProfile&a=rename_condition_profile',{anketa:srv_meta_anketa_id,pid:pid,name:name},function(){$("#div_condition_profiles").load('ajax.php?t=conditionProfile&a=show_condition_profile',{anketa:srv_meta_anketa_id,meta_akcija:srv_meta_akcija,podstran:srv_meta_podstran});});$("#renameProfileDiv").hide();$("#conditionProfileCoverDiv").fadeOut();}else if(action=='run'){$("#loading").show();var pid=$("#condition_profile .active").attr('value');var condition_label=$("#div_condition_editing_conditions").html();var condition_error=$("#div_condition_editing_conditions img").length==0?'0':'1';$.post('ajax.php?t=conditionProfile&a=change_condition_profile',{anketa:srv_meta_anketa_id,pid:pid,meta_akcija:srv_meta_akcija,podstran:srv_meta_podstran,condition_label:condition_label,condition_error:condition_error},function(){return reloadData('condition');});}else{genericAlertPopup('alert_missing_action',action)};};function zankaProfiles_init(){$("#zanka_profile").live('click',function(event){var $target=$(event.target);if($target.hasClass('option')){pid=$target.attr('value');changeViewZankaProfile(pid);}});};function changeViewZankaProfile(pid){$("#div_zanka_profiles").load('ajax.php?t=zankaProfile&a=show_profile',{anketa:srv_meta_anketa_id,podstran:srv_meta_podstran,pid:pid});}
function zankaProfileAction(action){if(action=='showProfiles'){$('#fade').fadeTo('slow',1);$("#div_zanka_profiles").load('ajax.php?t=zankaProfile&a=show_profile',{anketa:srv_meta_anketa_id,meta_akcija:srv_meta_akcija,podstran:srv_meta_podstran},function(){var msg=$('#div_zanka_profiles');var height=$(window).height();var width=$(document).width();var left=width-(msg.width())-42;var top=height/2-(msg.height()/2);}).show(200).draggable({delay:100,cancel:'#fs_list, input, .buttonwrapper, .select'});}
else if(action=='cancle'){$("#div_zanka_profiles").hide(200);$('#fade').fadeOut('slow');$("#div_zanka_profiles").html('');return reloadData();}
else if(action=='newName'){$("#zankaProfileCoverDiv").show();$("#newProfileDiv").show();}
else if(action=='newCancle'){$("#zankaProfileCoverDiv").hide();$("#newProfileDiv").hide();}
else if(action=='newCreate'){var profileName=$("#newProfileName").val();var data=$.dds.serialize('fs_list_4');var mnozenje=0;if($('#mnozenje').is(':checked'))mnozenje=$('#mnozenje').val();$.post('ajax.php?t=zankaProfile&a=createProfile',{anketa:srv_meta_anketa_id,podstran:srv_meta_podstran,profileName:profileName,data:data,mnozenje:mnozenje},function(newId){zankaProfileAction('showProfiles');});}
else if(action=='deleteAsk'){$("#zankaProfileCoverDiv").show();$("#deleteProfileDiv").show();}
else if(action=='deleteCancle'){$("#deleteProfileDiv").hide();$("#zankaProfileCoverDiv").fadeOut();}
else if(action=='deleteConfirm'){var pid=$("#zanka_profile .active").attr('value');$.post('ajax.php?t=zankaProfile&a=delete_profile',{anketa:srv_meta_anketa_id,pid:pid},function(){$("#div_zanka_profiles").load('ajax.php?t=zankaProfile&a=show_profile',{anketa:srv_meta_anketa_id,meta_akcija:srv_meta_akcija,podstran:srv_meta_podstran});});$("#deleteProfileDiv").hide();$("#zankaProfileCoverDiv").fadeOut();}
else if(action=='renameAsk'){$("#renameProfileDiv").show();$("#zankaProfileCoverDiv").fadeIn();}
else if(action=='renameCancle'){$("#renameProfileDiv").hide();$("#zankaProfileCoverDiv").fadeOut();}
else if(action=='renameConfirm'){var pid=$("#zanka_profile .active").attr('value');var name=$("#renameProfileName").val();$.post('ajax.php?t=zankaProfile&a=rename_profile',{anketa:srv_meta_anketa_id,pid:pid,name:name},function(){$("#div_zanka_profiles").load('ajax.php?t=zankaProfile&a=show_profile',{anketa:srv_meta_anketa_id,meta_akcija:srv_meta_akcija,podstran:srv_meta_podstran},function(){$("#renameProfileDiv").hide();$("#zankaProfileCoverDiv").fadeOut();});});}
else if(action=='run'||action=='runSession'){var pid=$("#zanka_profile .active").attr('value');var data=$.dds.serialize('fs_list_4');var mnozenje=0;if($('#mnozenje').is(':checked'))mnozenje=1;if(mnozenje*$("#fs_list_4 li").length>2){genericAlertPopup('srv_loop_multiplication_error');}else{$.post('ajax.php?t=zankaProfile&a=run',{anketa:srv_meta_anketa_id,podstran:srv_meta_podstran,data:data,mnozenje:mnozenje,run:action,pid:pid},function(){return reloadData('zanka');});}}
else if(action=='change'){$("#loading").show();var pid=$("#current_zanka_profile").val();$.post('ajax.php?t=zankaProfile&a=change_profile',{anketa:srv_meta_anketa_id,pid:pid},function(){return reloadData();});}else{genericAlertPopup('alert_missing_action',action)};};function timeProfiles_init(){$("#link_time_profile_remove").live("click",function(event){var pid='0';$.post('ajax.php?t=timeProfile&a=changeProfile',{anketa:srv_meta_anketa_id,meta_akcija:srv_meta_akcija,podstran:srv_meta_podstran,pid:pid},function(){return reloadData('interval');});});$("#link_time_profile_edit").live("click",function(event){timeProfileAction('showProfiles');});$("#time_profile").live('click',function(event){var $target=$(event.target);if($target.hasClass('option')){pid=$target.attr('value');$.post('ajax.php?t=timeProfile&a=changeProfile',{anketa:srv_meta_anketa_id,meta_akcija:srv_meta_akcija,podstran:srv_meta_podstran,pid:pid},function(){changeViewTimeProfile(pid);});}});};function changeViewTimeProfile(pid){$("#div_time_profiles").load('ajax.php?t=timeProfile&a=showProfile',{anketa:srv_meta_anketa_id,meta_akcija:srv_meta_akcija,podstran:srv_meta_podstran,pid:pid});}
function changeTimeProfileType(what){if(what=='interval'){$("#time_date_interval").attr('checked',true);}else{$("#time_date_type").attr('checked',true);}}
function timeProfileAction(action){if(action=='showProfiles'){$('#fade').fadeTo('slow',1);$("#div_time_profiles").load('ajax.php?t=timeProfile&a=showProfile',{anketa:srv_meta_anketa_id,meta_akcija:srv_meta_akcija,podstran:srv_meta_podstran},function(){var msg=$('#div_time_profiles');var height=$(window).height();var width=$(document).width();var left=width-(msg.width())-42;var top=height/2-(msg.height()/2);}).show(200);}else if(action=='cancel'){reloadData('interval');$("#div_time_profiles").hide(200);$("#div_time_profiles").html('');}else if(action=='change_profile'){var pid=$("#current_time_profile").val();$.post('ajax.php?t=timeProfile&a=changeProfile',{anketa:srv_meta_anketa_id,meta_akcija:srv_meta_akcija,podstran:srv_meta_podstran,pid:pid},function(){return reloadData('interval');});}else if(action=='show_create'){$("#timeProfileCoverDiv").show();$("#newProfileDiv").show();}else if(action=='cancel_create'){$("#timeProfileCoverDiv").hide();$("#newProfileDiv").hide();}else if(action=='do_create'){var profileName=$("#newProfileName").val();$("#div_time_profiles").load('ajax.php?t=timeProfile&a=createProfile',{anketa:srv_meta_anketa_id,podstran:srv_meta_podstran,profileName:profileName},function(newId){$("#div_time_profiles").load('ajax.php?t=timeProfile&a=showProfile',{anketa:srv_meta_anketa_id,meta_akcija:srv_meta_akcija,podstran:srv_meta_podstran,pid:newId});});}else if(action=='show_rename'){$("#timeProfileCoverDiv").show();$("#renameProfileDiv").show();}else if(action=='cancel_rename'){$("#timeProfileCoverDiv").hide();$("#renameProfileDiv").hide();}else if(action=='do_rename'){var pid=$("#time_profile .active").attr('value');var name=$("#renameProfileName").val();$.post('ajax.php?t=timeProfile&a=renameProfile',{anketa:srv_meta_anketa_id,pid:pid,name:name},function(){$("#div_time_profiles").load('ajax.php?t=timeProfile&a=showProfile',{anketa:srv_meta_anketa_id,meta_akcija:srv_meta_akcija,podstran:srv_meta_podstran},function(){$("#renameProfileDiv").hide();$("#timeProfileCoverDiv").fadeOut();});});}else if(action=='show_delete'){$("#timeProfileCoverDiv").show();$("#deleteProfileDiv").show();}else if(action=='cancel_delete'){$("#timeProfileCoverDiv").hide();$("#deleteProfileDiv").hide();}else if(action=='do_delete'){var pid=$("#time_profile .active").attr('value');$.post('ajax.php?t=timeProfile&a=deleteProfile',{anketa:srv_meta_anketa_id,pid:pid},function(){$("#div_time_profiles").load('ajax.php?t=timeProfile&a=showProfile',{anketa:srv_meta_anketa_id,meta_akcija:srv_meta_akcija,podstran:srv_meta_podstran});});$("#deleteProfileDiv").hide();$("#timeProfileCoverDiv").fadeOut();}else if(action=='run_profile'||action=='run_session_profile'){if(action=='run_profile'){var pid=$("#time_profile .active").attr('value');}else{var pid=-1;}
var type=$('input[name=type]:checked').val();var startDate=$("#startDate").val();var endDate=$("#endDate").val();var stat_interval=$("#stat_interval").val();if(type==1&&stat_interval==''){genericAlertPopup('srv_time_profile_error_interval');return false;}else{$.post("ajax.php?t=timeProfile&a=saveProfile",{anketa:srv_meta_anketa_id,pid:pid,type:type,startDate:startDate,endDate:endDate,stat_interval:stat_interval},function(response){return reloadData('interval');});}}else{genericAlertPopup('alert_parameter_action',action);return false;}};function postprocess_start_calculation(){init_progressBar();$.redirect('ajax.php?t=postprocess&a=postprocess_start_calculation',{anketa:srv_meta_anketa_id});}
function edit_data(event){var tableIconColspan=parseInt($("#tableIconColspan").val());var target=$(event.target);target=target.closest('td');if(!target.is('td'))return;var target_parent_children=target.parent().children();var table_head_children=$('#dataTable tr:nth-child(2)').children();var td=target.prevAll('td.data_uid');if(td.hasClass('data_uid')&&!isNaN(td.html())){var usr_id=td.html();var cell_over=target_parent_children.index(target);var spr_index=cell_over-tableIconColspan+(tableIconColspan>0?1:0);if(isNaN(table_head_children.filter(":eq("+spr_index+")").attr('spr_id')))return;var spr_id=table_head_children.filter(":eq("+spr_index+")").attr('spr_id');if(table_head_children.filter(":eq("+spr_index+")").attr('inline_edit')==1)return;if(!isNaN(usr_id)&&usr_id!=''&&!isNaN(spr_id)&&spr_id!=''){$.each(table_head_children.filter("th[spr_id="+spr_id+"]"),function(i,value){var table_index=table_head_children.index(value);var corect_index=table_index+(tableIconColspan==0?0:tableIconColspan-1);target_parent_children.filter(":eq("+corect_index+")").addClass("data_spr_editing");});$('#fullscreen').html('').fadeIn('slow');$('#fade').fadeTo('slow',1);$('#fullscreen').load('ajax.php?t=postprocess&a=edit_data_question',{anketa:srv_meta_anketa_id,spr_id:spr_id,usr_id:usr_id});}}}
function edit_data_close(){$('#fullscreen').html('').fadeOut();$('#fade').fadeOut('slow');$('#dataTable td.data_spr_editing').delay('2000').removeClass('data_spr_editing',500);}
function edit_data_question_save(){$('#fullscreen').hide();$('#loading').show();$('#fade').fadeOut('slow');var cell=$('#dataTable td.data_spr_editing').removeClass('data_spr_editing');$.post('ajax.php?t=postprocess&a=edit_data_question_save&anketa='+srv_meta_anketa_id,$("form[name=edit_data]").serialize(),function(){cell.css('color','lightgray');$('#loading').hide();});}
function edit_data_hover(event){var tableIconColspan=parseInt($("#tableIconColspan").val());var target=$(event.target);if(!target.is('td'))return;var target_parent_children=target.parent().children();var table_head_children=$('#dataTable tr:nth-child(2)').children();var cell_over=target_parent_children.index(target);var spr_index=cell_over-tableIconColspan+(tableIconColspan>0?1:0);if(isNaN(table_head_children.filter(":eq("+spr_index+")").attr('spr_id')))return;var spr_id=table_head_children.filter(":eq("+spr_index+")").attr('spr_id');if(table_head_children.filter(":eq("+spr_index+")").attr('inline_edit')==1)return;var inline_edit=table_head_children.filter(":eq("+spr_index+")").attr('inline_edit');if(!isNaN(spr_id)&&spr_id!=''){$.each(table_head_children.filter("th[spr_id="+spr_id+"]"),function(i,value){var table_index=table_head_children.index(value);var corect_index=table_index+(tableIconColspan==0?0:tableIconColspan-1);target_parent_children.filter(":eq("+corect_index+")").addClass("hover");});}}
function edit_data_hoverout(event){$(event.target).parent().find('td.hover').removeClass("hover");}
function edit_data_inline_edit(){srv_meta_anketa_id=srv_meta_anketa_id||$("#srv_meta_anketa_id").val();var tableIconColspan=parseInt($("#tableIconColspan").val())||0;var tableHeadChildren=$('#dataTable tr:nth-child(2)').children();var sprList=[];tableHeadChildren.filter("th[inline_edit=1]").each(function(ii,column){sprList.push($(column).attr('spr_id'));});$.post('ajax.php?t=postprocess&a=get_inline_edit_all',{anketa:srv_meta_anketa_id,spr:sprList},function(response){for(var i=0,len=response.length;i<len;i++){var column=$('th[spr_id='+response[i].spr+']');var spr_id=$(column).attr('spr_id');var tableIndex=tableHeadChildren.index(column);tableIndex=tableIndex+(tableIconColspan>0?tableIconColspan:1);$('#dataTable tr').each(function(ii,tr){var element=$(tr).find('td:nth-child('+(tableIndex)+')');if($(element).is('td')){var usr_id=$(tr).find('td.data_uid').html();var val=element.html();if(val&&val.trim()!=''){var fragment=$(response[i].html);if(fragment.find('select option.'+val+'').length==0){fragment.find('select').prepend('<option value="'+val+'" selected="selected">'+val+'</option>').val(val);}else{fragment.find('select').val(fragment.find('select option.'+val+'').val());}
fragment.filter('form').prepend('<input type="hidden" name="usr_id" value="'+usr_id+'" />').attr('name','inline_edit_'+usr_id+'_'+spr_id);element.html(fragment);}}});}},'json');}
function edit_data_inline_edit_save(name){$.post('ajax.php?t=postprocess&a=edit_data_question_save&anketa='+srv_meta_anketa_id,$("form[name="+name+"]").serialize(),function(){});}
function data_preview_content(event){var target=$(event.target).closest('td');if(target.closest('tr').parent().is('tbody')){if(!target.hasClass('enkaIcon')&&!target.hasClass('data_edit')&&!target.hasClass('cellGreen')){if(target.find('.data_preview_content').length==0){if(target.html()!='')
target.append('<div class="data_preview_content">'+target.html()+'</div>');}else{target.find('.data_preview_content').remove();}}}
return false;}
function data_header_hover(event){var target=$(event.target);if(target.is('.dataCell')){target=target.parent();}
if(!target.is('th'))return;var seq=target.attr('seq');if(!isNaN(seq)&&seq!=''){target.addClass("hover");}}
function data_header_hoverout(event){var target=$(event.target);target.parent().parent().find(':not(.sort_asc, .sort_dsc)').removeClass("hover");}
function data_header_click(event){var target=$(event.target);let spr_id=target.attr('spr_id');if(spr_id!='lineNo'){if(target.is('.dataCell')){target=target.parent();}
if(!target.is('th'))return;$("#loading").show();var sort_seq=target.attr('seq');if(!isNaN(sort_seq)&&sort_seq!=''){var sort_type=target.is('.sort_asc')?'sort_dsc':'sort_asc'
vnos_redirect(sort_action_url+'&sort_seq='+sort_seq+'&sort_type='+sort_type);}}}
var coding_cache=new Array();function coding_click(el,event){var usr_id=el.closest('tr').find('td.data_uid').html();usr_id=parseInt(usr_id);var td_pos=el.parent().children().index(el);var spr_id=$('#dataTable tr:nth-child(2) th:eq('+td_pos+')').attr('spr_id');if(!spr_id>0)return;var pos=el.offset();$("#coding").html('').css({"left":(event.pageX)+"px","top":(event.pageY+20)+"px"}).show();$('#dataTable tr td').removeClass('active');el.addClass('active');$('#dataTable tbody td').removeClass('cellBlue');$('#dataTable tbody td:nth-child('+(td_pos+1)+')').addClass('cellBlue');if(false&&usr_id in coding_cache){$('#coding').html(coding_cache[usr_id]);}else{$('#coding').load('ajax.php?t=postprocess&a=coding',{anketa:srv_meta_anketa_id,spr_id:spr_id,usr_id:usr_id},function(data){coding_cache[usr_id]=data;});}}
function coding_save(usr_id){delete coding_cache[usr_id];$.post('ajax.php?t=postprocess&a=coding_save',$('form#coding_'+usr_id).serialize(),function(data){});$('#dataTable td.active').css('color','lightgray');$('#dataTable td').removeClass('active');$('#dataTable tbody td').removeClass('cellBlue');$('#coding').hide();$('.coding-refresh').show();}
function coding_vrednost_new(spr_id,usr_id,naslov){coding_cache=new Array();$('#coding').load('ajax.php?t=postprocess&a=vrednost_new',{anketa:srv_meta_anketa_id,spr_id:spr_id,naslov:naslov,usr_id:usr_id});}
function coding_spremenljivka_new(spr_id,usr_id,naslov){coding_cache=new Array();$('#coding').load('ajax.php?t=postprocess&a=spremenljivka_new',{anketa:srv_meta_anketa_id,naslov:naslov,spr_id:spr_id,usr_id:usr_id});}
function coding_tip(spr_id,usr_id,tip){coding_cache=new Array();$('#coding').load('ajax.php?t=postprocess&a=tip',{anketa:srv_meta_anketa_id,spr_id:spr_id,usr_id:usr_id,tip:tip});}
function mass_coding(seq,coding_type){$('#vrednost_edit').load('ajax.php?t=postprocess&a=mass_coding',{anketa:srv_meta_anketa_id,seq:seq,coding_type:coding_type},function(data){$('#vrednost_edit').show();$('#fade').fadeTo('slow',1);});}
function coding_filter(seq){$.post('ajax.php?t=postprocess&a=coding_filter',{anketa:srv_meta_anketa_id,seq:seq},function(data){window.location.reload()});}
function toggle_coding_div(){$('#coding').hide();}
function coding_merge(spr_id,vre_id,usr_id,merge){if(spr_id>0&&vre_id>0&&merge>0){$('#coding').load('ajax.php?t=postprocess&a=coding_merge',{anketa:srv_meta_anketa_id,spr_id:spr_id,vre_id:vre_id,usr_id:usr_id,merge:merge});}}
function postProcessAddTitles(){$.each($('#dataTable tbody tr td'),function(i,value){var element=$(value);if(!$(element).attr('title')&&$(element).attr('class')!='data_edit'){var txt=element.html();element.attr('title',txt);}});}
function postProcessAddMetaTitles(){var tableIconColspan=parseInt($("#tableIconColspan").val());if(tableIconColspan==0)
{tableIconColspan=1;}
var fields={};fields['status']=0;fields['lurker']=0;fields['recnum']=0;fields['code']=0;fields['itime']=0;fields['lineNo']=0;fields['meta']=0;$.each($('#dataTable tr:nth-child(2) th'),function(i,element)
{if($(element).attr('spr_id')=='status')
{fields['status']=i+tableIconColspan;}
else if($(element).attr('spr_id')=='lurker')
{fields['lurker']=i+tableIconColspan;}
else if($(element).attr('spr_id')=='recnum')
{fields['recnum']=i+tableIconColspan;}
else if($(element).attr('spr_id')=='code')
{fields['code']=i+tableIconColspan;}
else if($(element).attr('spr_id')=='itime')
{fields['itime']=i+tableIconColspan;}
else if($(element).attr('spr_id')=='lineNo')
{fields['lineNo']=i+tableIconColspan;}
else if($(element).attr('spr_id')=='meta'&&fields['meta']==0)
{fields['meta']=i+tableIconColspan;}});var langs=new Array();$.post('ajax.php?a=getDataStatusTitles',{anketa:srv_meta_anketa_id},function(data){data=jQuery.parseJSON(data);langs[0]=data.status0;langs[1]=data.status1;langs[2]=data.status2;langs[3]=data.status3;langs[4]=data.status4;langs[5]=data.status5;langs[6]=data.status6;$.each($('#dataTable tr'),function(i,value)
{if(fields['status']>0)
{var element=$(value).find(':nth-child('+(fields['status'])+')');if($(element).is('td')){element.addClass("cellBlue");var status=parseInt(element.html());var new_val=langs[status];element.attr('title',status+' - '+new_val);}}
if(fields['lurker']>0)
{var element=$(value).find(':nth-child('+(fields['lurker'])+')');if($(element).is('td')){element.addClass("cellBlue");}}
if(fields['recnum']>0)
{var element=$(value).find(':nth-child('+(fields['recnum'])+')');if($(element).is('td')){element.addClass("cellBlue");}}
if(fields['code']>0)
{var element=$(value).find(':nth-child('+(fields['code'])+')');if($(element).is('td')){element.addClass("cellBlue");}}
if(fields['itime']>0)
{var element=$(value).find(':nth-child('+(fields['itime'])+')');if($(element).is('td')){element.addClass("cellYellow");}}
if(fields['lineNo']>0)
{var element=$(value).find(':nth-child('+(fields['lineNo'])+')');if($(element).is('td')){element.addClass("cellYellow");}}
if(fields['meta']>0)
{var element=$(value).find(':nth-child(n+'+(fields['meta'])+')');if($(element).is('td')){element.addClass("cellBlue");}}});});}
function postProcessAddSystem(columns){var tableIconColspan=parseInt($("#tableIconColspan").val());var indexes=[];$.each(columns,function(j,col){var index=$("th[seq="+col+"]").index()+tableIconColspan;indexes.push(index);});$.each($('#dataTable tr'),function(i,value){$.each(indexes,function(j,pos){var element=$(value).find(':nth-child('+(pos)+')');if($(element).is('td')){element.addClass("cellRed");}});});}
function postProcessAddLurkerTitles(column){var tableIconColspan=parseInt($("#tableIconColspan").val());var table_head_children=$('#dataTable tr:nth-child(2)').children();var table_index=table_head_children.filter("th[spr_id=lurker]").index();if(table_index>0){table_index=1+tableIconColspan+column;var langs=new Array();$.post('ajax.php?a=getDataLurkerTitles',{anketa:srv_meta_anketa_id},function(data){data=jQuery.parseJSON(data);langs[0]=data.status0;langs[1]=data.status1;$.each($('#dataTable tbody tr'),function(i,value){var element=$(value).find('td:nth-child('+(table_index)+')');if($(element).is('td')){var status=parseInt(element.html());var new_val=langs[status];element.attr('title',new_val);element.html(new_val);element.addClass("cellGreen");}});});}}
function postProcessAddRelevanceTitles(column){var tableIconColspan=parseInt($("#tableIconColspan").val());var table_head_children=$('#dataTable tr:nth-child(2)').children();var table_index=table_head_children.filter("th[spr_id=relevance]").index();if(table_index>0){table_index=1+tableIconColspan+column;var langs=new Array();$.post('ajax.php?a=getDataLurkerTitles',{anketa:srv_meta_anketa_id},function(data){data=jQuery.parseJSON(data);langs[0]=data.status0;langs[1]=data.status1;$.each($('#dataTable tbody tr'),function(i,value){var element=$(value).find('td:nth-child('+(table_index)+')');if($(element).is('td')){var status=parseInt(element.html());var new_val=langs[status];element.attr('title',new_val);element.html(new_val);element.addClass("cellGreen");}});});}}
function postProcessAddEmailTitles(column){var tableIconColspan=parseInt($("#tableIconColspan").val());var table_head_children=$('#dataTable tr:nth-child(2)').children();var table_index=table_head_children.filter("th[spr_id=invitation]").index();if(table_index>0){table_index=1+tableIconColspan+column;var langs=new Array();$.post('ajax.php?a=getDataEmailTitles',{anketa:srv_meta_anketa_id},function(data){data=jQuery.parseJSON(data);langs[0]=data.email0;langs[1]=data.email1;langs[2]=data.email2;$.each($('#dataTable tbody tr'),function(i,value){var element=$(value).find('td:nth-child('+(table_index)+')');if($(element).is('td')){var status=parseInt(element.html());var new_val=langs[status];element.attr('title',new_val);element.html(new_val);element.addClass("cellGreen");if(status==1)
element.addClass("invitation_cell");}});});}}
function showSurveyAnswers(event){var srv_site_url=$("#srv_site_url").val();var target=$(event.target);var uid=$(target).parent().parent().find('.data_uid').html();var href=srv_site_url+'admin/survey/index.php?anketa='+srv_meta_anketa_id+'&a=data&m=quick_edit&usr_id='+uid+'&quick_view=1';if(uid>0){window.location=href;}}
function dataTableResize(sid){var mousedown=false;var startObj=undefined;var startX,startWidth;var anketa=sid;var widths={};if(localStorage.dataTableWidths)
widths=JSON.parse(localStorage.dataTableWidths);return function(){for(var seq in widths[anketa]){$('#dataTable col[seq='+seq+']').width(widths[anketa][seq]);}
$('#dataTable tr:nth-child(2) th div.dataCell').append('<div class="tableResize"></div>');$('#dataTable tr:nth-child(2) th .tableResize').bind('mousedown',function(e){startObj=$('#dataTable col[seq='+$(this).closest('th').attr('seq')+']');mousedown=true;startX=e.pageX;startWidth=startObj[0].offsetWidth||parseInt(startObj[0].style.width.substring(0,(startObj[0].style.width.length)-2))||100;document.onmousemove=function(e){if(mousedown){var width=startWidth+(e.pageX-startX);if(width<20)width=20;startObj.width(width);var seq=startObj.attr('seq');if(widths[anketa]==undefined)widths[anketa]={};widths[anketa][seq]=width;}};document.onmouseup=function(){if(mousedown){mousedown=false;localStorage.dataTableWidths=JSON.stringify(widths);document.onmousemove=null;document.onmouseup=null;}};return false;}).bind('dblclick',function(e){var textWidth=$('<span class="textWidth" style="position:absolute; visibility:hidden; white-space:nowrap;"></span>');var textWidthJS=textWidth[0];$('#tableContainer').append(textWidth);var index=$(e.target).closest('tr').find('th').index($(e.target).closest('th'));var maxWidth=0;var tWidth=0;var rows=$('#dataTable tbody td:nth-child('+(index+1)+')');for(var i=0,len=rows.length;i<len;i++){textWidthJS.innerHTML=rows[i].innerHTML;tWidth=textWidthJS.offsetWidth;if(tWidth>maxWidth)maxWidth=tWidth;}
maxWidth+=10;if(maxWidth<20)maxWidth=20;var seq=$('#dataTable col:nth-child('+(index)+')').width(maxWidth).attr('seq');if(widths[anketa]==undefined)widths[anketa]={};widths[anketa][seq]=maxWidth;localStorage.dataTableWidths=JSON.stringify(widths);textWidth.remove();});}();};var pbInterval='';var timer=0;var starttime=0;function init_progressBar(getProgress){$('body').addClass('waitlong');$("#loading").show();}
function refresh_progressBar(getProgress){timer++;var d=new Date();time=parseInt((d.getTime()-starttime)/1000);if(time>=60){minutes=parseInt(time/60);time=time-minutes*60;if(time<10)time='0'+time;if(minutes<10)minutes='0'+minutes;time=minutes+':'+time;}else{if(time<10)time='0'+time;time='00:'+time;}
if(getProgress==true){$.post('getCollectTimer.php?getProgress=true&foo='+Math.random(),{anketa:srv_meta_anketa_id},function(data){if(data.status!='null'){width=parseInt(data.current/data.total*100);$('#pbRowPercentLabel').html(data.current+' / '+data.total+' ('+time+')');$('#pbRowPercent div').css('width',width+'%');}},"json");}else{margin=(timer%19)*5;$('#pbRowPercentLabel').html(time);$('#pbRowPercent div').css('width','10%').css('margin-left',margin+'%');}}
function stop_progressBar(){window.clearInterval(pbInterval);pbInterval='';timer=0;$('#fade').fadeOut('slow');$('#fullscreen').hide();$('#fullscreen').html('');}
function set_progressBar_label(label){$('#pbLabel').html(label);};function crosstab_init(){$("td.ct_inspect").live("click",function(event){doInspectFromCrosstab(this,event);return false;});}
function add_new_variable(which){var sequence=new Array();var spr=new Array();var grid=new Array();$('select[name=crosstab_variable_'+which+']').each(function(index,el){sequence.push($(el).val());});$('select[name=crosstab_variable_'+which+'] option:selected').each(function(index,el){spr.push($(el).attr("spr_id"));grid.push($(el).attr("grd_id"));});var crossNavVsEno=$('#crossNavVsEno1').is(':checked')?'1':'0';$.post("ajax.php?t=crosstab&a=add_new_variable",{anketa:srv_meta_anketa_id,which:which,sequence:sequence,spr:spr,grid:grid,crossNavVsEno:crossNavVsEno},function(response){if(which=='2'){$(response).appendTo('#crossRightDropdowns');}else{$(response).appendTo('#crossLeftDropdowns');}});}
function crs_remove_variable(what){$(what).parent().parent().remove();change_crosstab();}
function change_crosstab(action){var sequence1=new Array();var spr1=new Array();var grid1=new Array();var sequence2=new Array();var spr2=new Array();var grid2=new Array();if(action=='rotate'){$('select[name=crosstab_variable_2]').each(function(index,el){sequence1.push($(el).val());});$('select[name=crosstab_variable_2] option:selected').each(function(index,el){spr1.push($(el).attr("spr_id"));grid1.push($(el).attr("grd_id"));});$('select[name=crosstab_variable_1]').each(function(index,el){sequence2.push($(el).val());});$('select[name=crosstab_variable_1] option:selected').each(function(index,el){spr2.push($(el).attr("spr_id"));grid2.push($(el).attr("grd_id"));});}else{$('select[name=crosstab_variable_1]').each(function(index,el){sequence1.push($(el).val());});$('select[name=crosstab_variable_1] option:selected').each(function(index,el){spr1.push($(el).attr("spr_id"));grid1.push($(el).attr("grd_id"));});$('select[name=crosstab_variable_2]').each(function(index,el){sequence2.push($(el).val());});$('select[name=crosstab_variable_2] option:selected').each(function(index,el){spr2.push($(el).attr("spr_id"));grid2.push($(el).attr("grd_id"));});}
var crossNavVsEno=$('#crossNavVsEno1').is(':checked')?'1':'0';$("#crosstab_drobdowns").fadeTo(100,0.2);$("#crosstab_tables").fadeTo(100,0.2);$("#crosstab_drobdowns").load("ajax.php?t=crosstab&a=changeDropdown",{anketa:srv_meta_anketa_id,sequence1:sequence1,sequence2:sequence2,spr1:spr1,spr2:spr2,crossNavVsEno:crossNavVsEno,grid1:grid1,grid2:grid2},function(){if(isNaN(spr1)&&isNaN(spr2)){$("#div_analiza_data").load("ajax.php?t=crosstab&a=change",{anketa:srv_meta_anketa_id,sequence1:sequence1,sequence2:sequence2,spr1:spr1,spr2:spr2,crossNavVsEno:crossNavVsEno,grid1:grid1,grid2:grid2},function(){});}else{$("#crosstab_drobdowns").fadeTo(100,1);$("#crosstab_tables").fadeTo(100,1);}});}
function change_crosstab_cb(){$("#crosstab_drobdowns").fadeTo(100,0.2);$("#crosstab_tables").fadeTo(100,0.2);var sequence1=$("#crosstab_variable_1").val();var sequence2=$("#crosstab_variable_2").val();var spr1=$("#crosstab_variable_1 option:selected").attr("spr_id");var spr2=$("#crosstab_variable_2 option:selected").attr("spr_id");if($("#crosstab_variable_1 option:selected").attr("grd_id")!==undefined){var grid1=$("#crosstab_variable_1 option:selected").attr("grd_id");}else{var grid1='';}
if($("#crosstab_variable_2 option:selected").attr("grd_id")!==undefined){var grid2=$("#crosstab_variable_2 option:selected").attr("grd_id");}else{var grid2='';}
var crossNavVsEno=$('#crossNavVsEno1').is(':checked')?'1':'0';$("#crosstab_tables").load("ajax.php?t=crosstab&a=change_cb",{anketa:srv_meta_anketa_id,sequence1:sequence1,sequence2:sequence2,spr1:spr1,spr2:spr2,crossNavVsEno:crossNavVsEno,grid1:grid1,grid2:grid2},function(){$("#crosstab_drobdowns").fadeTo(100,1);$("#crosstab_tables").fadeTo(100,1);});}
function change_crosstab_percent(){var crossChk1=$("#crossCheck1").is(':checked');$.post("ajax.php?t=crosstab&a=change_cb_percent",{anketa:srv_meta_anketa_id,crossChk1:crossChk1},function(){change_crosstab();});}
function change_crosstab_color(){var doColor=$("#crossDoColor").is(':checked');if(doColor){$("#span_color_residual_legend").show();}else{$("#span_color_residual_legend").hide();}
$.post("ajax.php?t=crosstab&a=change_cb_color",{anketa:srv_meta_anketa_id,doColor:doColor},function(){change_crosstab();});}
function doInspectFromCrosstab(el,event){var k1=$(el).attr('k1');var k2=$(el).attr('k2');var n1=$(el).attr('n1');var n2=$(el).attr('n2');var v1=$(el).attr('v1');var v2=$(el).attr('v2');var sp1=$(el).parent().closest('table').attr('sp1');var sp2=$(el).parent().closest('table').attr('sp2');var sq1=$(el).parent().closest('table').attr('sq1');var sq2=$(el).parent().closest('table').attr('sq2');var gd1=$(el).parent().closest('table').attr('gd1');var gd2=$(el).parent().closest('table').attr('gd2');$.post("ajax.php?t=crosstab&a=prepareInspect",{anketa:srv_meta_anketa_id,k1:k1,k2:k2,n1:n1,n2:n2,v1:v1,v2:v2,sp1:sp1,sp2:sp2,sq1:sq1,sq2:sq2,gd1:gd1,gd2:gd2,from_podstran:srv_meta_podstran},function(response){window.location="index.php?anketa="+srv_meta_anketa_id+response;});}
function doArchiveCrosstab(){if($("#crosstab_tables").length>0&&$("#crosstab_tables").html()!=''){$("#fullscreen").load('ajax.php?a=doArchiveAnaliza',{anketa:srv_meta_anketa_id,podstran:srv_meta_podstran},function(){$('#fade').fadeTo('slow',1);$('#fullscreen').show();});}else{genericAlertPopup('alert_no_archive_tables');}}
function createArchiveCrosstabBeforeEmail(){if($("#crosstab_tables").length>0&&$("#crosstab_tables").html()!=''){var content=$("#crosstab_tables").html();var regex=new RegExp('ct_inspect',"g");content=content.replace(regex,'');$.post('ajax.php?a=createArchiveCrosstabBeforeEmail',{anketa:srv_meta_anketa_id,podstran:srv_meta_podstran,content:content},function(response){if(parseInt(response)>0){var aid=parseInt(response);$("#fullscreen").load('ajax.php?a=emailArchiveAnaliza',{anketa:srv_meta_anketa_id,podstran:srv_meta_podstran,aid:aid},function(){$('#fullscreen').show();});}else{if(parseInt(response)==-1){genericAlertPopup('alert_no_archive_response',response);}else{genericAlertPopup('alert_archive_error_response',response);}
$('#fullscreen').hide();$('#fade').fadeOut('slow');}});}else{genericAlertPopup('alert_no_archive_tables');}}
function submitArchiveCrosstabs(){if($("#crosstab_tables").length>0&&$("#crosstab_tables").html()!=''){var content=$("#crosstab_tables").html();var regex=new RegExp('ct_inspect',"g");content=content.replace(regex,'');var name=$("#newAnalysisArchiveName").val();var note=$("#newAnalysisArchiveNote").val();var access=$("[name=newAnalysisArchiveAccess]:checked").val();var duration=$("#newAnalysisArchiveDuration").val();var durationType=$("[name=newAADurationType]:checked").val();$("#fullscreen").load('ajax.php?a=submitArchiveAnaliza',{anketa:srv_meta_anketa_id,podstran:srv_meta_podstran,name:name,note:note,access:access,duration:duration,durationType:durationType,content:content},function(){$("#fullscreen").show();});}else{genericAlertPopup('alert_no_archive_tables');}}
function changeSessionInspect(){$("#spanSessionInspect").load("ajax.php?t=crosstab&a=changeSessionInspect",{anketa:srv_meta_anketa_id},function(){change_crosstab();});};function multiCrosstabs_init(){$('.draggable').draggable({helper:'clone',revert:'invalid',opacity:'1',zIndex:'1',delay:100,appendTo:'body'});$("td.ct_inspect").live("click",function(event){doInspectFromCrosstab(this,event);return false;});$('div.multicrosstab_title_inline').live('focus',function(event){$(this).parent().addClass('writing');}).live('blur',function(){$(this).parent().removeClass('writing');var table_id=$(this).parent().attr('id').substr(6);var value=$(this).html();;$.post('ajax.php?t=multicrosstabs&a=edit_title',{anketa:srv_meta_anketa_id,value:value,table_id:table_id});});$(".mc_tables").live('click',function(event){var $target=$(event.target);if($target.hasClass('option')){var id=$target.attr('value');$("#div_mc_tables").load('ajax.php?t=multicrosstabs&a=mc_change_table',{anketa:srv_meta_anketa_id,id:id});}});$("#mc_tables_plus").live("click",function(event){mc_table_action('show_new');});}
function createDroppable(){$('.droppable').droppable({accept:'.draggable',hoverClass:'drophover',tolerance:'pointer',drop:function(e,ui){var table_id=$(this).closest('table').attr('id');var position=0;if($(this).hasClass('vertical')){var position=1;}
if($(this).attr('id')!='undefined'){var parent=$(this).attr('id');}
else{var parent='';}
$('#mc_table_holder_'+table_id).load('ajax.php?t=multicrosstabs&a=add_variable',{anketa:srv_meta_anketa_id,table_id:table_id,spr:$(ui.draggable).attr('id'),parent:parent,position:position});}});}
function deleteVariable(element){var table_id=$(element).closest('table').attr('id');var vrstni_red=$(element).closest('td').attr('id');var position=0;if($(element).closest('td').hasClass('vertical')){var position=1;}
var parent=$(element).closest('td').attr('parent');$('#mc_table_holder_'+table_id).load('ajax.php?t=multicrosstabs&a=remove_variable',{anketa:srv_meta_anketa_id,table_id:table_id,vrstni_red:vrstni_red,position:position,parent:parent});}
function changeMCSettings(table_id,what){if(what=='navVsEno'){var value=1;value=$('input[name=navVsEno]:checked').val();}
else{var value=0;if($('#'+what+'_'+table_id).is(':checked')){value=1;}}
$('#mc_table_holder_'+table_id).load('ajax.php?t=multicrosstabs&a=change_settings',{anketa:srv_meta_anketa_id,table_id:table_id,what:what,value:value});}
function showMCSettings(table_id){$('#fade').fadeTo('slow',1,function(){$('#mc_table_settings').show();});}
function closeMCSettings(table_id){$('#fade').fadeOut('slow');$('#mc_table_settings').hide();}
function saveMCSettings(table_id){var form=$("form[name=mc_settings]").serializeArray();$('#mc_table_holder_'+table_id).load('ajax.php?t=multicrosstabs&a=save_settings',form,function(){$('#fade').fadeOut('slow');$('#mc_table_settings').hide();});}
function toggleMCSetting(setting){$('#'+setting).toggle();if(setting=='delezVar'){$('#delez').toggle();}}
function setDelez(delezVar){$('#delez').load('ajax.php?t=multicrosstabs&a=set_delez',{anketa:srv_meta_anketa_id,delezVar:delezVar});}
function show_mc_tables(){$('#fade').fadeTo('slow',1);$("#div_mc_tables").load('ajax.php?t=multicrosstabs&a=mc_show_tables',{anketa:srv_meta_anketa_id},function(){$("#div_mc_tables").show(200);});return false;}
function add_mc_table(){$('#fade').fadeTo('slow',1);$("#newMCTable").show();}
function delete_mc_table(){$('#fade').fadeTo('slow',1);$("#deleteMCTable").show();}
function close_mc_tables(){$("#div_mc_tables").fadeOut();$("#fade").fadeOut();}
function use_mc_table(){var value=$(".mc_tables .active").attr('value');$.post('ajax.php?t=multicrosstabs&a=use_mc_table',{anketa:srv_meta_anketa_id,value:value},function(){location.reload();});}
function switch_mc_table(value){$.post('ajax.php?t=multicrosstabs&a=use_mc_table',{anketa:srv_meta_anketa_id,value:value},function(){location.reload();});}
function mc_table_action(action){if(action=='show_rename'){$("#dsp_cover_div").show();$("#renameMCTable").show();var title=$("#mc_tables").find('.active').html();$("#renameMCTableName").val(title);}
else if(action=='cancel_rename'){$("#dsp_cover_div").hide();$("#renameMCTable").hide();}
else if(action=='rename'){var id=$(".mc_tables .active").attr('value');var name=$("#renameMCTableName").val();$("#div_mc_tables").load('ajax.php?t=multicrosstabs&a=rename_table',{anketa:srv_meta_anketa_id,id:id,name:name},function(){$("#renameMCTable").hide();$("#dsp_cover_div").fadeOut();});}
else if(action=='show_delete'){if($("#div_mc_tables").is(':visible'))
$("#dsp_cover_div").show();else
$('#fade').fadeTo('slow',1);$("#deleteMCTable").show();var title=$("#mc_tables").find('.active').html();$("#deleteMCTableName").html(title);}
else if(action=='cancel_delete'){if($("#div_mc_tables").is(':visible')){$("#deleteMCTable").hide();$("#dsp_cover_div").hide();}
else{$("#deleteMCTable").hide();$("#fade").fadeOut();}}
else if(action=='delete'){var id=$(".mc_tables .active").attr('value');$("#div_mc_tables").load('ajax.php?t=multicrosstabs&a=delete_table',{anketa:srv_meta_anketa_id,id:id},function(){$("#deleteMCTable").hide();$("#dsp_cover_div").fadeOut();});}
else if(action=='show_new'){if($("#div_mc_tables").is(':visible'))
$("#dsp_cover_div").show();else
$('#fade').fadeTo('slow',1);$("#newMCTable").show();}
else if(action=='cancel_new'){if($("#div_mc_tables").is(':visible')){$("#newMCTable").hide();$("#dsp_cover_div").hide();}
else{$("#newMCTable").hide();$("#fade").fadeOut();}}
else if(action=='goto_archive'){$("#newMCTable").hide();show_mc_tables();}
else if(action=='new'){var name=$("#newMCTableName").val();$.post('ajax.php?t=multicrosstabs&a=new_table',{anketa:srv_meta_anketa_id,name:name},function(){location.reload();});}};function slideshow_init(){$("#link_slideshow_reset_interval").live("click",function(event){if(event.button!=0){return true;}
slideshow_reset_interval();return false;});};function slideshow_reset_interval(){if($('#slide_fixed_interval').is(':checked')){var timer=$("#slideshow_timer").val();var fixed_interval=$('#slide_fixed_interval').is(':checked')?'1':'0';$("#globalSettingsInner").load('ajax.php?t=slideshow&a=reset_interval',{anketa:srv_meta_anketa_id,timer:timer,fixed_interval:fixed_interval},function(){});}else{genericAlertPopup('alert_checkbox_error');}}
function slideshow_save_settings(){var timer=$("#slideshow_timer").val();var fixed_interval=$('#slide_fixed_interval').is(':checked')?'1':'0';var save_entries=$('input[name=slide_save_entries]:checked').val();var autostart=$('input[name=slide_autostart]:checked').val();var next_btn=$('input[name=slide_next]:checked').val();var back_btn=$('input[name=slide_back]:checked').val();var pause_btn=$('input[name=slide_pause]:checked').val();$.post('ajax.php?t=slideshow&a=save_settings',{anketa:srv_meta_anketa_id,timer:timer,fixed_interval:fixed_interval,save_entries:save_entries,autostart:autostart,next_btn:next_btn,back_btn:back_btn,pause_btn:pause_btn},function(){actionNotePopup('success_save','success');});};function dataSetingProfile_init(){$("#dsp_link, #link_variableType_profile_setup").live("click",function(event){if(event.button!=0){return true;}
dataSettingProfileAction('showProfiles');return false;});$("#link_variableType_profile_remove").live("click",function(event){if(event.button!=0){return true;}
dataSettingProfileAction('removeKategoriesProfile');return false;});$("#dsp_profiles").live('click',function(event){var $target=$(event.target);if($target.hasClass('option')){pid=$target.attr('value');$.post('ajax.php?t=dataSettingProfile&a=changeProfile',{anketa:srv_meta_anketa_id,meta_akcija:srv_meta_akcija,podstran:srv_meta_podstran,pid:pid},function(){changeViewDataSetingProfile(pid);});}});};function changeViewDataSetingProfile(pid){$("#dsp_div").load('ajax.php?t=dataSettingProfile&a=showProfile',{anketa:srv_meta_anketa_id,meta_akcija:srv_meta_akcija,podstran:srv_meta_podstran,pid:pid});}
function dataSettingProfileAction(action){if(action=='showProfiles'){$('#fade').fadeTo('slow',1);$("#dsp_div").show().load('ajax.php?t=dataSettingProfile&a=showProfile',{anketa:srv_meta_anketa_id,meta_akcija:srv_meta_akcija,podstran:srv_meta_podstran});}else if(action=='cancel'){return reloadData('dataSetting');}else if(action=='change_profile'){var pid=$("#dsp_dropdown").val();$.post('ajax.php?t=dataSettingProfile&a=changeProfile',{anketa:srv_meta_anketa_id,meta_akcija:srv_meta_akcija,podstran:srv_meta_podstran,pid:pid},function(){return reloadData('dataSetting');});}else if(action=='show_create'){$("#dsp_cover_div").show();$("#newProfileDiv").show();}else if(action=='cancel_create'){$("#dsp_cover_div").hide();$("#newProfileDiv").hide();}else if(action=='do_create'){var profileName=$("#newProfileName").val();$("#dsp_div").load('ajax.php?t=dataSettingProfile&a=createProfile',{anketa:srv_meta_anketa_id,podstran:srv_meta_podstran,profileName:profileName},function(newId){$("#dsp_div").load('ajax.php?t=dataSettingProfile&a=showProfile',{anketa:srv_meta_anketa_id,meta_akcija:srv_meta_akcija,podstran:srv_meta_podstran,pid:newId});});}else if(action=='removeKategoriesProfile'){var pid=$("#dsp_dropdown").val();$.post('ajax.php?t=dataSettingProfile&a=removeKategoriesProfile',{anketa:srv_meta_anketa_id,meta_akcija:srv_meta_akcija,podstran:srv_meta_podstran,pid:pid},function(){return reloadData('dataSetting');});}else if(action=='show_rename'){$("#dsp_cover_div").show();$("#renameProfileDiv").show();}else if(action=='cancel_rename'){$("#dsp_cover_div").hide();$("#renameProfileDiv").hide();}else if(action=='do_rename'){var pid=$("#dsp_profiles .active").attr('value');var name=$("#renameProfileName").val();$.post('ajax.php?t=dataSettingProfile&a=renameProfile',{anketa:srv_meta_anketa_id,pid:pid,name:name},function(){$("#dsp_div").load('ajax.php?t=dataSettingProfile&a=showProfile',{anketa:srv_meta_anketa_id,meta_akcija:srv_meta_akcija,podstran:srv_meta_podstran},function(){$("#renameProfileDiv").hide();$("#dsp_cover_div").fadeOut();});});}else if(action=='show_delete'){$("#dsp_cover_div").show();$("#deleteProfileDiv").show();}else if(action=='cancel_delete'){$("#dsp_cover_div").hide();$("#deleteProfileDiv").hide();}else if(action=='do_delete'){var pid=$("#dsp_profiles .active").attr('value');$.post('ajax.php?t=dataSettingProfile&a=deleteProfile',{anketa:srv_meta_anketa_id,pid:pid},function(){$("#dsp_div").load('ajax.php?t=dataSettingProfile&a=showProfile',{anketa:srv_meta_anketa_id,meta_akcija:srv_meta_akcija,podstran:srv_meta_podstran});});$("#deleteProfileDiv").hide();$("#dsp_cover_div").fadeOut();}else if(action=='run_profile'||action=='run_session_profile'){if(action=='run_profile'){var pid=$("#dsp_profiles .active").attr('value');}else{var pid='-1';}
var dsp_ndp=$('#dsp_ndp').val();var dsp_nda=$('#dsp_nda').val();var dsp_ndd=$('#dsp_ndd').val();var dsp_res=$('#dsp_res').val();var dsp_sep=$('input[name="radio_dsp_sep"]:checked').val()
var crossChk0=$("#crossCheck0").is(':checked')?'1':'0';var crossChk1=$("#crossCheck1").is(':checked')?'1':'0';var crossChk2=$("#crossCheck2").is(':checked')?'1':'0';var crossChk3=$("#crossCheck3").is(':checked')?'1':'0';var crossChkEC=$("#crossCheckEC").is(':checked')?'1':'0';var crossChkRE=$("#crossCheckRE").is(':checked')?'1':'0';var crossChkSR=$("#crossCheckSR").is(':checked')?'1':'0';var crossChkAR=$("#crossCheckAR").is(':checked')?'1':'0';var doColor=$("#crossCheckColor").is(':checked')?'1':'0';var doValues=$("#crossCheckValues").is(':checked')?'1':'0';var showCategories=$("#showCategories").is(':checked')?'1':'0';var showOther=$("#showOther").is(':checked')?'1':'0';var showNumbers=$("#showNumbers").is(':checked')?'1':'0';var showText=$("#showText").is(':checked')?'1':'0';var chartNumbering=$("#chartNumbering").is(':checked')?'1':'0';var chartFontSize=$("#chartFontSize").val();var chartFP=$("#chartFP").is(':checked')?'1':'0';var chartTableAlign=$('input[name="chartTableAlign"]:checked').val();var chartTableMore=$("#chartTableMore").is(':checked')?'1':'0';var chartNumerusText=$("#chartNumerusText").val();var chartAvgText=$("#chartAvgText").val();var chartPieZeros=$("#chartPieZeros").is(':checked')?'1':'0';var hideEmpty=$("#hideEmpty").is(':checked')?'1':'0';var hideAllSystem=$("#hideAllSystem").is(':checked')?'1':'0';var numOpenAnswers=$("#dsp_content #numOpenAnswers").val();var dataPdfType=$('#dataPdfType').val();var exportDataNumbering=$("#exportDataNumbering").is(':checked')?'1':'0';var exportDataShowIf=$("#exportDataShowIf").is(':checked')?'1':'0';var exportDataFontSize=$("#exportDataFontSize").val();var exportDataShowRecnum=$("#exportDataShowRecnum").is(':checked')?'1':'0';var exportDataPB=$("#exportDataPB").is(':checked')?'1':'0';var exportDataSkipEmpty=$("#exportDataSkipEmpty").is(':checked')?'1':'0';var exportDataSkipEmptySub=$("#exportDataSkipEmptySub").is(':checked')?'1':'0';var exportDataLandscape=$("#exportDataLandscape").is(':checked')?'1':'0';var exportNumbering=$("#exportNumbering").is(':checked')?'1':'0';var exportShowIf=$("#exportShowIf").is(':checked')?'1':'0';var exportFontSize=$("#exportFontSize").val();var exportShowIntro=$("#exportShowIntro").is(':checked')?'1':'0';var dataShowIcons=$('input[name="dataShowIcons"]:checked').val();var analysisGoTo=$('#analysisGoTo').val();var analiza_legenda=$("#analiza_legenda").is(':checked')?'1':'0';$.post("ajax.php?t=dataSettingProfile&a=saveProfile",{anketa:srv_meta_anketa_id,pid:pid,dsp_ndp:dsp_ndp,dsp_nda:dsp_nda,dsp_ndd:dsp_ndd,dsp_res:dsp_res,dsp_sep:dsp_sep,crossChk0:crossChk0,crossChk1:crossChk1,crossChk2:crossChk2,crossChk3:crossChk3,crossChkEC:crossChkEC,crossChkRE:crossChkRE,crossChkSR:crossChkSR,crossChkAR:crossChkAR,doColor:doColor,doValues:doValues,showCategories:showCategories,showOther:showOther,showNumbers:showNumbers,showText:showText,chartNumbering:chartNumbering,chartFontSize:chartFontSize,chartFP:chartFP,chartTableAlign:chartTableAlign,chartTableMore:chartTableMore,chartNumerusText:chartNumerusText,chartAvgText:chartAvgText,chartPieZeros:chartPieZeros,hideEmpty:hideEmpty,hideAllSystem:hideAllSystem,numOpenAnswers:numOpenAnswers,dataPdfType:dataPdfType,exportDataNumbering:exportDataNumbering,exportDataShowIf:exportDataShowIf,exportDataFontSize:exportDataFontSize,exportDataShowRecnum:exportDataShowRecnum,exportDataPB:exportDataPB,exportDataSkipEmpty:exportDataSkipEmpty,exportDataSkipEmptySub:exportDataSkipEmptySub,exportDataLandscape:exportDataLandscape,exportNumbering:exportNumbering,exportShowIf:exportShowIf,exportFontSize:exportFontSize,exportShowIntro:exportShowIntro,dataShowIcons:dataShowIcons,analysisGoTo:analysisGoTo,analiza_legenda:analiza_legenda},function(response){return reloadData('dataSetting');});}else{genericAlertPopup('alert_parameter_action',action);return false;}}
function saveSingleProfileSetting(pid,what,value){$.post("ajax.php?t=dataSettingProfile&a=saveSingleProfileSetting",{anketa:srv_meta_anketa_id,pid:pid,what:what,value:value},function(response){return reloadData('dataSetting');});}
function saveResidualProfileSetting(pid,checked){var value=0;if(checked==true){value=1;}
$.post("ajax.php?t=dataSettingProfile&a=saveResidualProfileSetting",{anketa:srv_meta_anketa_id,pid:pid,value:value},function(response){return reloadData('dataSetting');});};function deleteRecipient_confirm(inv_rid){$('#fade').fadeTo('slow',1);$('#fullscreen').html('').fadeIn('slow');$("#fullscreen").load('ajax.php?t=invitations&a=delete_recipient_confirm',{anketa:srv_meta_anketa_id,inv_rid:inv_rid,noNavi:'true'});}
function inv_delete_recipient(){var inv_rid=$("#inv_delete_rec_confirm input#inv_rid").val();$.post('ajax.php?t=invitations&a=delete_recipient_single',{anketa:srv_meta_anketa_id,inv_rid:inv_rid,noNavi:'true'},function(data){data=jQuery.parseJSON(data);if(data.success==1){$('#tbl_recipients_list tr td input[value="'+inv_rid+'"]').closest('tr').hide('slow');$('#fade').fadeOut('slow');$('#fullscreen').fadeOut('slow').html('');}});}
function editRecipient(inv_rid){$('#fade').fadeTo('slow',1);$('#fullscreen').addClass('divPopUp PopUpNarrow');$('#fullscreen').html('').fadeIn('slow');$("#fullscreen").load('ajax.php?t=invitations&a=edit_recipient',{anketa:srv_meta_anketa_id,inv_rid:inv_rid,noNavi:'true'});}
function inv_arch_recipients_close(){$('#fade').fadeOut('slow');$('#fullscreen').fadeOut('slow').html('');}
function inv_arch_save_comment(){var aid=$("#inv_arch_id").val();var comment=$("#inv_arch_comment").val();$.post('ajax.php?t=invitations&a=arch_save_comment',{anketa:srv_meta_anketa_id,aid:aid,comment:comment,noNavi:'true'},function(data){$('#fade').fadeOut('slow');$('#fullscreen').fadeOut('slow').html('');});}
function inv_arch_recipients_send(){var send_type=$('input[name=mailto]:checked').val();var prefix="";var checkboxes="";$('input[name="mailto_status[]"]:checked').each(function(el){checkboxes=checkboxes+prefix+$(this).val();prefix=",";});$('#fullscreen').load('ajax.php?t=invitations&a=send_mail',{anketa:srv_meta_anketa_id,noNavi:'true',send_type:send_type,checkboxes:checkboxes});}
function inv_change_import_type(){var import_type=$('input[name=inv_import_type]:checked').val();$("#inv_import").load('ajax.php?t=invitations&a=change_import_type',{anketa:srv_meta_anketa_id,import_type:import_type,noNavi:'true'},function(){refreshFieldsList();});}
function toggleInvCheckbox(what){var id=$(what).attr("id");if($(what).is(":checked")){$(what).parent().addClass('inv_field_enabled');}
else{$(what).parent().removeClass('inv_field_enabled');}
refreshFieldsList();}
function refreshFieldsList(){var fields='';var fields_id='';var prefix='';var pass_field=false;$('ul').children('li.inv_field_enabled').each(function(idx,elm){fields=fields+prefix+$(elm).find('label').html();fields_id=fields_id+prefix+$(elm).attr('id');prefix=',';if($(elm).find('label').html()=='PASSWORD')
pass_field=true;});$("#inv_field_list.inv_type_0, #inv_field_list.inv_type_1").html(fields);if($("#inv_recipients_upoad_fields").length>0){$("#inv_recipients_upoad_fields").val(fields_id);}
if(pass_field)
$("#inv_field_list_warning").show();else
$("#inv_field_list_warning").hide();}
function inv_save_rec_profile(){var profile_name=$("#rec_profile_name").val();var profile_id=$("#inv_recipients_profile_name select").find('option:selected').val();var profile_comment=$("#rec_profile_comment").val();var recipients_list=$("#inv_prof_recipients_list").val();var field_list=$("#inv_prof_field_list").val();var doAdd=($("#inv_doAdd").val()==1||$("#inv_doAdd").val()=='1')?true:false;$.post('ajax.php?t=invitations&a=save_rec_profile',{anketa:srv_meta_anketa_id,recipients_list:recipients_list,field_list:field_list,profile_name:profile_name,profile_comment:profile_comment,noNavi:'true',profile_id:profile_id},function(data){data=jQuery.parseJSON(data);if(doAdd==true){inv_add_recipients(data.pid);}else{$("#anketa_edit").load('ajax.php?t=invitations&a=use_recipients_list',{anketa:srv_meta_anketa_id,pid:data.pid});}});$('#fade').fadeOut('slow');$('#fullscreen').fadeOut('slow').html('');}
function inv_update_rec_profile(){var pid=$('#inv_recipients_profile_name').find('#rec_profile_pid').val();var profile_name=$('#inv_recipients_profile_name').find('#rec_profile_name').val();$("#inv_error_note").addClass('displayNone');$.post('ajax.php?t=invitations&a=update_rec_profile',{anketa:srv_meta_anketa_id,pid:pid,profile_name:profile_name,noNavi:'true'},function(data){data=jQuery.parseJSON(data);if(data.error=="0"){$('#fade').fadeOut('slow');$('#fullscreen').fadeOut('slow').html('');$("#anketa_edit").load('ajax.php?t=invitations&a=use_recipients_list',{anketa:srv_meta_anketa_id,pid:pid});}else{$("#inv_error_note").html(data.msg);$("#inv_error_note").show();$("#inv_error_note").removeClass('displayNone');}});}
function inv_add_recipients(profile_id){if(typeof profile_id==="undefined"){var pid=$("#inv_import_list_profiles ol li.active").attr('pid');}else{var pid=profile_id;}
var save_profile=true;var recipients_list=$("#inv_recipients_list").val();var fields=[];$('ul').children('li.inv_field_enabled').each(function(idx,elm){fields.push(elm.id);});if(fields.length>0){if(recipients_list.length>0){$("#anketa_edit").load('ajax.php?t=invitations&a=add_recipients',{anketa:srv_meta_anketa_id,recipients_list:recipients_list,fields:fields,pid:pid,save_profile:save_profile});$elm=$("ul.secondNavigation li.inv_ff_left_on");$elm.prev().find('a').removeClass('active');$elm.next().find('a').addClass('active');$elm.removeClass('inv_ff_left_on').addClass('inv_ff_right_on').next().next().addClass('inv_ff_left_on');}else{genericAlertPopup('srv_invitation_note1');}}else{genericAlertPopup('srv_invitation_note2');}}
function inv_save_recipient(){var inv_rid=$("#inv_rid").val();var rec_email=$("#rec_email").val();var rec_password=$("#rec_password").val();var rec_firstname=$("#rec_firstname").val();var rec_lastname=$("#rec_lastname").val();var rec_salutation=$("#rec_salutation").val();var rec_phone=$("#rec_phone").val();var rec_custom=$("#rec_custom").val();var rec_relation=$("#rec_relation").val();$("#rec_email").removeClass('inv_input_error');$("#rec_password").removeClass('inv_input_error');$.post('ajax.php?t=invitations&a=save_recipient',{anketa:srv_meta_anketa_id,inv_rid:inv_rid,rec_email:rec_email,rec_password:rec_password,rec_firstname:rec_firstname,rec_lastname:rec_lastname,rec_salutation:rec_salutation,rec_phone:rec_phone,rec_custom:rec_custom,rec_relation:rec_relation,noNavi:'true'},function(data){data=jQuery.parseJSON(data);if(data.error=="0"){$('#fade').fadeOut('slow');$('#fullscreen').fadeOut('slow').html('');location.reload();}
else{$("#inv_error_note").html(data.msg);$("#inv_error_note").show();$("#inv_error_note").removeClass('displayNone');if(data.error_email=='1'){$("#rec_email").addClass('inv_input_error');}
if(data.error_password=='1'){$("#rec_password").addClass('inv_input_error');}}});}
function inv_filter_recipients(){var inv_filter_on=$("#inv_rec_filter_on").is(":checked")?'true':'false';var inv_filter_value=$("#inv_rec_filter_value").val();var inv_filter_send=$("#inv_rec_filter_send option:selected").val();var inv_filter_respondet=$("#inv_rec_filter_respondet option:selected").val();var inv_filter_unsubscribed=$("#inv_rec_filter_unsubscribed option:selected").val();var inv_filter_list=$("#inv_rec_filter_list option:selected").val();var inv_filter_duplicates=$("#inv_rec_filter_duplicates").is(":checked")?'true':'false';$.post('ajax.php?t=invitations&a=set_recipient_filter',{anketa:srv_meta_anketa_id,inv_filter_on:inv_filter_on,inv_filter_value:inv_filter_value,inv_filter_send:inv_filter_send,inv_filter_respondet:inv_filter_respondet,inv_filter_unsubscribed:inv_filter_unsubscribed,inv_filter_list:inv_filter_list,inv_filter_duplicates:inv_filter_duplicates,noNavi:'true'},function(){if($('#advanced_module_phone').val()){$("#globalSettingsInner").load('ajax.php?t=invitations&a=view_recipients',{anketa:srv_meta_anketa_id});}
else{$("#anketa_edit").load('ajax.php?t=invitations&a=view_recipients',{anketa:srv_meta_anketa_id});}});}
function inv_add_rec_to_db(){$('#fade').fadeTo('slow',1);$("#anketa_edit").load('ajax.php?t=invitations&a=add_users_to_database',{anketa:srv_meta_anketa_id},function(){$('#fade').fadeOut('slow');});}
function recipientsProfileOnlyThisSurvey(){var checked=$('input[name=inv_show_list_type]:checked').val()==1?true:false;$.post('ajax.php?t=invitations&a=only_this_survey',{anketa:srv_meta_anketa_id,checked:checked,noNavi:'true'},function(data){var pid=$("#inv_import_list_profiles ol li.active").attr('pid');if(pid=='undefined'){pid='-1';}
$("#anketa_edit").load('ajax.php?t=invitations&a=use_recipients_list',{anketa:srv_meta_anketa_id,pid:pid});});}
function mailToRadioChange(){var send_type=$('input[name=mailto]:checked').val();var prefix="";var checkboxes="";if($('#mailto4').is(":checked")){$('#inv_send_advanced_div span').removeClass('gray');$('#inv_send_advanced_div span input[type=checkbox]').attr('disabled',false);}else{$('#inv_send_advanced_div span').addClass('gray');$('#inv_send_advanced_div span input[type=checkbox]').attr('disabled',true);}
$('input[name="mailto_status[]"]:checked').each(function(el){checkboxes=checkboxes+prefix+$(this).val();prefix=",";});var source_type=$('input[name=mailsource]:checked').val();var source_lists="";var prefix="";$('input[name="mailsource_lists[]"]:checked').each(function(el){source_lists=source_lists+prefix+$(this).val();prefix=",";});var noMailing=$('input[name=noMailing]').val();$("#inv_select_mail_to_respondents").load('ajax.php?t=invitations&a=view_send_recipients',{anketa:srv_meta_anketa_id,noNavi:'true',send_type:send_type,checkboxes:checkboxes,source_type:source_type,source_lists:source_lists,noMailing:noMailing},function(){var cb=$('#tbl_recipients_send_list tr td').length;if(cb>0){$("#inv_send_mail_btn").show();}else{$("#inv_send_mail_btn").hide();}
if(cb>4999){$("#inv_send_mail_limit").show();}else{$("#inv_send_mail_limit").hide();}});};function mailToSourceChange(){var send_type=$('input[name=mailto]:checked').val();var prefix="";var checkboxes="";$('input[name="mailto_status[]"]:checked').each(function(el){checkboxes=checkboxes+prefix+$(this).val();prefix=",";});var source_type=$('input[name=mailsource]:checked').val();var source_lists="";var prefix="";$('input[name="mailsource_lists[]"]:checked').each(function(el){source_lists=source_lists+prefix+$(this).val();prefix=",";});$("#inv_select_mail_to_source_lists").load('ajax.php?t=invitations&a=mailToSourceChange',{anketa:srv_meta_anketa_id,noNavi:'true',source_type:source_type,source_lists:source_lists},function(){});$("#inv_select_mail_to_respondents").load('ajax.php?t=invitations&a=view_send_recipients',{anketa:srv_meta_anketa_id,noNavi:'true',send_type:send_type,checkboxes:checkboxes,source_type:source_type,source_lists:source_lists},function(){var cb=$('#tbl_recipients_send_list tr td').length;if(cb>0){$("#inv_send_mail_btn").show();}else{$("#inv_send_mail_btn").hide();}
if(cb>4999){$("#inv_send_mail_limit").show();}else{$("#inv_send_mail_limit").hide();}});}
function mailToSourceCheckboxChange(){var send_type=$('input[name=mailto]:checked').val();var prefix="";var checkboxes="";$('input[name="mailto_status[]"]:checked').each(function(el){checkboxes=checkboxes+prefix+$(this).val();prefix=",";});var source_type=$('input[name=mailsource]:checked').val();var source_lists="";var prefix="";$('input[name="mailsource_lists[]"]:checked').each(function(el){source_lists=source_lists+prefix+$(this).val();prefix=",";});$("#inv_select_mail_to_respondents").load('ajax.php?t=invitations&a=view_send_recipients',{anketa:srv_meta_anketa_id,noNavi:'true',send_type:send_type,checkboxes:checkboxes,source_type:source_type,source_lists:source_lists},function(){var cb=$('#tbl_recipients_send_list tr td').length;if(cb>0){$("#inv_send_mail_btn").show();}
else{$("#inv_send_mail_btn").hide();}
if(cb>4999){$("#inv_send_mail_limit").show();}
else{$("#inv_send_mail_limit").hide();}});}
function mailTocheCheckboxChange(){$('#mailto4').attr('checked',true);var send_type=$('input[name=mailto]:checked').val();var prefix="";var checkboxes="";$('input[name="mailto_status[]"]:checked').each(function(el){checkboxes=checkboxes+prefix+$(this).val();prefix=",";});var source_type=$('input[name=mailsource]:checked').val();var source_lists="";var prefix="";$('input[name="mailsource_lists[]"]:checked').each(function(el){source_lists=source_lists+prefix+$(this).val();prefix=",";});$("#inv_select_mail_to_respondents").load('ajax.php?t=invitations&a=view_send_recipients',{anketa:srv_meta_anketa_id,noNavi:'true',send_type:send_type,checkboxes:checkboxes,source_type:source_type,source_lists:source_lists},function(){var cb=$('#tbl_recipients_send_list tr td').length;if(cb>0){$("#inv_send_mail_btn").show();}else{$("#inv_send_mail_btn").hide();}
if(cb>4999){$("#inv_send_mail_limit").show();}else{$("#inv_send_mail_limit").hide();}});};function invitations_init(){$(".inv_checkbox").live('change',function(event){toggleInvCheckbox(this);});$("#inv_upload_recipients").live('click',function(event){var inv_iid=$("#inv_iid").val();$("#inv_recipients_upload_form").submit();});$(".inv_step").mouseover(function(){$(this).addClass("hover");}).mouseout(function(){$(this).removeClass("hover");});$('#tbl_recipients_send_list tr td input').live('change',function(event){var cb=$('#tbl_recipients_send_list tr td input').filter(':checked').length;$("#inv_num_recipients").html(cb);if(cb>0){$("#inv_send_mail_btn").show();}else{$("#inv_send_mail_btn").hide();}
if(cb>4999){$("#inv_send_mail_limit").show();}else{$("#inv_send_mail_limit").hide();}});$("#add_recipients").live('click',function(event){inv_add_recipients();});$("#inv_import_list_profiles ol li").live('click',function(event){var pid=$(this).attr('pid');if(pid!='undefined'){$("#anketa_edit").load('ajax.php?t=invitations&a=use_recipients_list',{anketa:srv_meta_anketa_id,pid:pid});}});$("#tbl_archive_list .as_link").live('click',function(event){var target=$(event.target);var arch_to_view=$(target).attr('id');if($(target).hasClass('as_view')){$('#fade').fadeTo('slow',1);$('#fullscreen').html('').fadeIn('slow');archType=$(target).data('archtype');$("#fullscreen").load('ajax.php?t=invitations&a=view_archive_recipients',{anketa:srv_meta_anketa_id,arch_to_view:arch_to_view,archType:archType,noNavi:'true'});}else{$('#fade').fadeTo('slow',1);$('#fullscreen').html('').fadeIn('slow');$("#fullscreen").load('ajax.php?t=invitations&a=edit_archive_comment',{anketa:srv_meta_anketa_id,arch_to_view:arch_to_view,noNavi:'true'});}});}
function invChangeMessage(mid){if(mid!='undefined'&&mid>0){if(CKEDITOR.instances['inv_message_body']){delete CKEDITOR.instances['inv_message_body'];}
$("#anketa_edit").load('ajax.php?t=invitations&a=make_default',{anketa:srv_meta_anketa_id,mid:mid},function(){if(!CKEDITOR.instances){CKEDITOR.replace['inv_message_body'];}});}}
function invMessageDelete(){var mid=$("#invitation_messages ol li.active").attr("mid");if(confirm(lang['srv_inv_recipients_delete_message_confirm'])){if(CKEDITOR.instances['inv_message_body']){delete CKEDITOR.instances['inv_message_body'];}
$("#anketa_edit").load('ajax.php?t=invitations&a=delete_msg_profile',{anketa:srv_meta_anketa_id,mid:mid});event.stopPropagation();}}
function invShowMessageRename(){var mid=$("#invitation_messages ol li.active").attr("mid");$('#fade').fadeTo('slow',1);$('#fullscreen').addClass('divPopUp PopUpNarrow');$('#fullscreen').html('').fadeIn('slow');$("#fullscreen").load('ajax.php?t=invitations&a=show_message_rename',{anketa:srv_meta_anketa_id,noNavi:'true',mid:mid});}
function invMessageRename(){var mid=$("#invitation_messages ol li.active").attr("mid");var name=$("#inv_message_profile_name").val();var comment=$("#inv_message_comment").val();$.post('ajax.php?t=invitations&a=message_rename',{anketa:srv_meta_anketa_id,mid:mid,name:name,comment:comment,noNavi:'true'},function(data){data=jQuery.parseJSON(data);if(data.error=="0"){$('#fade').fadeOut('slow');$('#fullscreen').fadeOut('slow').html('')}else{$('#fade').fadeOut('slow');$('#fullscreen').fadeOut('slow').html('')}});}
function inv_message_save_advanced(mid){$('#fade').fadeTo('slow',1);$('#fullscreen').addClass('divPopUp PopUpNarrow');$('#fullscreen').html('').fadeIn('slow');$("#fullscreen").load('ajax.php?t=invitations&a=edit_message_details',{anketa:srv_meta_anketa_id,noNavi:'true',mid:mid});}
function inv_message_save_forward(mid){if(CKEDITOR.instances['inv_message_body']){CKEDITOR.instances['inv_message_body'].destroy();}
var replyto=$("#inv_message_replyto").val();var subject=$("#inv_message_subject").val();var body=$("#inv_message_body").val();var url=$("#inv_message_url").val();$("#inv_message_replyto").css({'border':'none'});$("#inv_message_subject").css({'border':'none'});$("#inv_message_body").css({'border':'none'});$("#inv_error_note").addClass('displayNone');$.post('ajax.php?t=invitations&a=message_save_forward',{anketa:srv_meta_anketa_id,mid:mid,replyto:replyto,subject:subject,body:body,url:url,noNavi:'true',},function(data){data=jQuery.parseJSON(data);if(data.error=="0"){var href='index.php?anketa='+srv_meta_anketa_id+'&a=invitations&m=send_message';window.location=href;}else{if(!CKEDITOR.instances){CKEDITOR.replace['inv_message_body'];}
$("#inv_error_note").html(data.msg);$("#inv_error_note").removeClass('displayNone');if(data.inv_message_replyto=='1'){$("#inv_¸ge_replyto").css({'border':'1px solid red'});}
if(data.inv_message_subject=='1'){$("#inv_message_subject").css({'border':'1px solid red'});}
if(data.inv_message_body=='1'){$("#inv_message_body").css({'border':'1px solid red'});}}});}
function inv_message_save_forward_noEmail(mid){if(CKEDITOR.instances['inv_message_body']){CKEDITOR.instances['inv_message_body'].destroy();}
var subject=$("#inv_message_subject").val();var body=$("#inv_message_body").val();var url=$("#inv_message_url").val();$("#inv_message_subject").css({'border':'none'});$("#inv_message_body").css({'border':'none'});$("#inv_error_note").addClass('displayNone');$.post('ajax.php?t=invitations&a=message_save_forward_noEmail',{anketa:srv_meta_anketa_id,mid:mid,subject:subject,body:body,url:url,noNavi:'true',},function(data){data=jQuery.parseJSON(data);if(data.error=="0"){var href='index.php?anketa='+srv_meta_anketa_id+'&a=invitations&m=send_message';window.location=href;}else{if(!CKEDITOR.instances){CKEDITOR.replace['inv_message_body'];}
$("#inv_error_note").html(data.msg);$("#inv_error_note").removeClass('displayNone');if(data.inv_message_subject=='1'){$("#inv_message_subject").css({'border':'1px solid red'});}
if(data.inv_message_body=='1'){$("#inv_message_body").css({'border':'1px solid red'});}}});}
function inv_message_save_simple(mid){if(CKEDITOR.instances['inv_message_body']){CKEDITOR.instances['inv_message_body'].destroy();}
var replyto=$("#inv_message_replyto").val();var subject=$("#inv_message_subject").val();var body=$("#inv_message_body").val();var url=$("#inv_message_url").val();$("#inv_message_replyto").css({'border':'none'});$("#inv_message_subject").css({'border':'none'});$("#inv_message_body").css({'border':'none'});$("#inv_error_note").addClass('displayNone');$.post('ajax.php?t=invitations&a=save_message_simple',{anketa:srv_meta_anketa_id,mid:mid,replyto:replyto,subject:subject,body:body,url:url,noNavi:'true'},function(data){create_editor('inv_message_body',true);data=jQuery.parseJSON(data);if(data.error==0){return true;}
else{$("#inv_error_note").html(data.msg);$("#inv_error_note").removeClass('displayNone');if(data.inv_message_replyto=='1'){$("#inv_messge_replyto").css({'border':'1px solid red'});}
if(data.inv_message_subject=='1'){$("#inv_message_subject").css({'border':'1px solid red'});}
if(data.inv_message_body=='1'){$("#inv_message_body").css({'border':'1px solid red'});}
return false;}});}
function inv_message_save_simple_noEmail(mid){if(CKEDITOR.instances['inv_message_body']){CKEDITOR.instances['inv_message_body'].destroy();}
var subject=$("#inv_message_subject").val();var body=$("#inv_message_body").val();var url=$("#inv_message_url").val();$("#inv_message_subject").css({'border':'none'});$("#inv_message_body").css({'border':'none'});$("#inv_error_note").addClass('displayNone');$.post('ajax.php?t=invitations&a=save_message_simple_noEmail',{anketa:srv_meta_anketa_id,mid:mid,subject:subject,body:body,url:url,noNavi:'true'},function(data){create_editor('',true)
data=jQuery.parseJSON(data);if(data.error==0){return true;}else{$("#inv_error_note").html(data.msg);$("#inv_error_note").removeClass('displayNone');if(data.inv_message_subject=='1'){$("#inv_message_subject").css({'border':'1px solid red'});}
if(data.inv_message_body=='1'){$("#inv_message_body").css({'border':'1px solid red'});}
return false;}});}
function inv_message_save_details(){var mid=$("#inv_recipients_profile_name select").val();var profile_comment=$("#inv_message_comment").val();var naslov=$("#rec_profile_name").val();if(CKEDITOR.instances['inv_message_body']){CKEDITOR.instances['inv_message_body'].destroy();}
var subject=$("#inv_message_subject").val();var body=$("#inv_message_body").val();$.post('ajax.php?t=invitations&a=message_save_details',{anketa:srv_meta_anketa_id,mid:mid,profile_comment:profile_comment,naslov:naslov,body:body,subject:subject,noNavi:'true'},function(data){data=jQuery.parseJSON(data);if(data.error=="0"&&parseInt(data.mid)>0){inv_message_save_simple(parseInt(data.mid));window.location.reload()}else{genericAlertPopup('alert_parameter_datamsg',data.msg);}});}
function inv_new_message_list_change(what){if($(what).val()==0){$("#new_message_list_span").show();$("#inv_message_comment").val('');}else{$("#new_message_list_span").hide();$("#inv_message_comment").val($(what).find('option:selected').attr('comment'));}}
function inv_del_rec_profile(){var pid=$("#inv_import_list_profiles ol li.active").attr("pid");if(confirm(lang['srv_inv_recipients_delete_profile_confirm'])){$.post('ajax.php?t=invitations&a=delete_rec_profile',{anketa:srv_meta_anketa_id,pid:pid,noNavi:'true'},function(data){var new_pid=$("#inv_import_list_profiles ol li").first().attr('pid');if(new_pid==pid){var new_pid=$("#inv_import_list_profiles ol li").first().next().attr('pid');}
$("#anketa_edit").load('ajax.php?t=invitations&a=use_recipients_list',{anketa:srv_meta_anketa_id,pid:new_pid});});}}
function inv_edit_rec_profile(){var pid=$("#inv_import_list_profiles ol li.active").attr("pid");$('#fade').fadeTo('slow',1);$('#fullscreen').addClass('divPopUp PopUpNarrow');$('#fullscreen').html('').fadeIn('slow');$("#fullscreen").load('ajax.php?t=invitations&a=edit_rec_profile',{anketa:srv_meta_anketa_id,pid:pid,noNavi:'true'});}
function inv_prepare_add_recipients(){genericAlertPopup('alert_deprecated');return false;}
function inv_recipients_add_to_list(){var recipients_list=$("#inv_recipients_list").val();var fields=[];$('ul').children('li.inv_field_enabled').each(function(idx,elm){fields.push(elm.id);});var doAdd='0';if(fields.length>0){if(recipients_list.length>0){$('#fade').fadeTo('slow',1);$('#fullscreen').html('').fadeIn('slow');$("#fullscreen").load('ajax.php?t=invitations&a=get_profile_name',{anketa:srv_meta_anketa_id,recipients_list:recipients_list,fields:fields,noNavi:'true',doAdd:doAdd});}else{genericAlertPopup('srv_invitation_note1');}}else{genericAlertPopup('srv_invitation_note2');}}
function inv_new_recipients_list_change(what){if($(what).val()>0){$("#new_recipients_list_span_note").show();$("#new_recipients_list_span_note_name").html($(what).find('option:selected').text());}else{$("#new_recipients_list_span_note").hide();}
if($(what).val()==0){$("#new_recipients_list_span").show();$("#rec_profile_comment").val('');}else{$("#new_recipients_list_span").hide();$("#rec_profile_comment").val($(what).find('option:selected').attr('comment'));}}
function invSendPage(page,show_per_page){var start=(page-1)*show_per_page;var end=start+show_per_page;$("#tbl_recipients_send_list").find('tbody tr').slice(1).addClass('displayNone').slice(start,end).removeClass('displayNone');$("#frm_do_send div#pagination div").removeClass('currentPage_small');$("#frm_do_send div#pagination div").slice(page-1,page).addClass('currentPage_small');}
function invSendPageChangeLimit(what,cnt){$("#inv_pagination_content").load('ajax.php?t=invitations&a=changePaginationLimit',{anketa:srv_meta_anketa_id,noNavi:'true',limit:$(what).val(),cnt:cnt},function(){invSendPage(1,$(what).val());});}
function invTogleSend(what){var checked=$(what).is(":checked")?true:false;$('#tbl_recipients_send_list tr td input[type=checkbox]').attr('checked',checked);var cb=$('#tbl_recipients_send_list tr td input').filter(':checked').length;$("#inv_num_recipients").html(cb);if(cb>0){$("#inv_send_mail_btn").show();}else{$("#inv_send_mail_btn").hide();}
if(cb>4999){$("#inv_send_mail_limit").show();}else{$("#inv_send_mail_limit").hide();}}
function inv_selectAll(checkbox){val=$(checkbox).is(':checked');$('#tbl_recipients_list tr td input[type="checkbox"]').each(function(){$(this).attr("checked",val);});if(val==true){$("#inv_switch_on").hide();$("#inv_switch_off").show();}
else{$("#inv_switch_off").hide();$("#inv_switch_on").show();}}
function inv_list_selectAll(val){if(val==true){$('.test_checkAll').each(function(){this.checked=true;})
$("#inv_switch_on").hide();$("#inv_switch_off").show();}
else{$('.test_checkAll').each(function(){this.checked=false;})
$("#inv_switch_on").show();$("#inv_switch_off").hide();}}
function inv_recipients_form_action(action){var recipents=$('#tbl_recipients_list input[name="inv_rids[]"]:checked');if(action=='delete'){if(recipents.length){if(confirm(lang['srv_inv_recipients_delete_multi'])){$("#frm_inv_rec_export").attr("action","ajax.php?t=invitations&a=delete_recipient");$('#frm_inv_rec_export').submit();return false;}}else{if(confirm(lang['srv_invitation_note10'])){$.post('ajax.php?t=invitations&a=delete_recipient_all',{anketa:srv_meta_anketa_id,noNavi:'true'},function(data){data=jQuery.parseJSON(data);if(data.success==1){$("#anketa_edit").load('ajax.php?t=invitations&a=view_recipients',{anketa:srv_meta_anketa_id});}else{genericAlertPopup('alert_parameter_dataerror',data.error);}});}}}
else if(action=='export_all'){$("#frm_inv_rec_export").attr("action","ajax.php?t=invitations&a=export_recipients_all");$("#frm_inv_rec_export").attr("target","_blank");$('#frm_inv_rec_export').submit();return false;}
else if(action=='export_qr_codes'){$("#frm_inv_rec_export").attr("action","ajax.php?t=invitations&a=export_recipients_qr_codes");$("#frm_inv_rec_export").attr("target","_blank");$('#frm_inv_rec_export').submit();return false;}
else if(action=='export'){if(recipents.length==0){$("#frm_inv_rec_export").attr("action","ajax.php?t=invitations&a=export_recipients_all");$("#frm_inv_rec_export").attr("target","_blank");$('#frm_inv_rec_export').submit();}else{$("#frm_inv_rec_export").attr("action","ajax.php?t=invitations&a=export_recipients");$("#frm_inv_rec_export").attr("target","_blank");$('#frm_inv_rec_export').submit();}
return false;}
else if(action=='add'){if(recipents.length){$("#frm_inv_rec_export").attr("action","ajax.php?t=invitations&a=add_checked_users_to_database");$('#frm_inv_rec_export').submit();return false;}}}
function inv_recipients_list_action(action){if(action=='delete'){var ids=[];$('.test_checkAll').each(function(){if(this.checked==true){ids.push(this.value);}});if(ids.length){if(confirm(lang['srv_inv_list_delete_multi'])){$.ajax({type:"POST",data:{anketa:srv_meta_anketa_id,noNavi:'true',ids:ids},url:"ajax.php?t=invitations&a=deleteRecipientsListMulti",success:function(data){$("#anketa_edit").load('ajax.php?t=invitations&a=inv_lists',{anketa:srv_meta_anketa_id});}});}}}else{confirm(lang['srv_inv_list_delete_multi']);}}
function inv_arch_edit_details(aid){if(aid>0){$('#fade').fadeTo('slow',1);$('#fullscreen').html('').fadeIn('slow');$("#fullscreen").load('ajax.php?t=invitations&a=arch_edit_details',{anketa:srv_meta_anketa_id,aid:aid,noNavi:'true'});}}
function inv_arch_show_details(aid){if(aid>0){$('#fade').fadeTo('slow',1);$('#fullscreen').html('').fadeIn('slow');$("#fullscreen").load('ajax.php?t=invitations&a=arch_show_details',{anketa:srv_meta_anketa_id,aid:aid,noNavi:'true'});}}
function inv_arch_show_recipients(aid){if(aid>0){$('#fade').fadeTo('slow',1);$('#fullscreen').html('').fadeIn('slow');$("#fullscreen").load('ajax.php?t=invitations&a=arch_show_recipients',{anketa:srv_meta_anketa_id,aid:aid,noNavi:'true'});}}
function showRecipientTracking(rid){if(rid>0){$('#fade').fadeTo('slow',1);$('#fullscreen').html('').fadeIn('slow');$("#fullscreen").load('ajax.php?t=invitations&a=showRecipientTracking',{anketa:srv_meta_anketa_id,rid:rid,noNavi:'true'});}}
function changeInvRecListCheckbox(){var pids="";var prefix="";$('#inv_edit_rec_list table tr td input:checked').each(function(idx,elm){pids=pids+prefix+$(elm).attr('value');prefix=',';});var onlyThisSurvey=$('input[name=inv_show_list_type]:checked').val();$("#inv_selected_rec_list").load('ajax.php?t=invitations&a=editRecList',{anketa:srv_meta_anketa_id,noNavi:'true',pids:pids,onlyThisSurvey:onlyThisSurvey});}
function inv_list_edit(pid){$('#fade').fadeTo('slow',1);$('#fullscreen').addClass('divPopUp PopUpNarrow');$('#fullscreen').html('').fadeIn('slow');$("#fullscreen").load('ajax.php?t=invitations&a=invListEdit',{anketa:srv_meta_anketa_id,pid:pid,noNavi:'true'});}
function inv_list_get_name(saveNew){var recipients_list=$("#inv_recipients_list").val();var fields=[];$('div#inv_field_container ul').children('li.inv_field_enabled').each(function(idx,elm){fields.push(elm.id);});var pid="";var prefix="";$('#inv_edit_rec_list table tr td input:checked').each(function(idx,elm){pid=pid+prefix+$(elm).attr('value');prefix=',';});if(fields.length>0){if(recipients_list.length>0){$('#fade').fadeTo('slow',1);$('#fullscreen').html('').fadeIn('slow');$("#fullscreen").load('ajax.php?t=invitations&a=list_get_name',{anketa:srv_meta_anketa_id,recipients_list:recipients_list,fields:fields,noNavi:'true',pid:pid,saveNew:saveNew});}else{genericAlertPopup('srv_invitation_note1');}}else{genericAlertPopup('srv_invitation_note2');}}
function changeInvRecListEdit(){var checked=$("#inv_show_list_edit").is(":checked");$.post('ajax.php?t=invitations&a=changeInvRecListEdit',{anketa:srv_meta_anketa_id,checked:checked,noNavi:'true'},function(){changeInvRecListCheckbox();});}
function inv_list_save(){var profile_id=$("#profile_id").val();var profile_name=$("#inv_recipients_profile_name").find("#rec_profile_name").val();var profile_comment=$("#inv_recipients_profile_name").find("#rec_profile_comment").val();var recipients_list=$("#inv_prof_recipients_list").val();var field_list=$("#inv_prof_field_list").val();var saveNew=($("#saveNew").val()=='true')?'true':'false';genericAlertPopup('alert_parameter_profilename',profile_name);$("#anketa_edit").load('ajax.php?t=invitations&a=inv_list_save',{anketa:srv_meta_anketa_id,recipients_list:recipients_list,field_list:field_list,profile_id:profile_id,profile_name:profile_name,profile_comment:profile_comment,saveNew:saveNew});$('#fade').fadeOut('slow');$('#fullscreen').fadeOut('slow').html('');}
function inv_list_edit_save(){var form_serialize=$("#inv_list_edit_form").serializeArray();form_serialize[form_serialize.length]={name:'anketa',value:srv_meta_anketa_id}
form_serialize[form_serialize.length]={name:'noNavi',value:'true'}
$("#anketa_edit").load('ajax.php?t=invitations&a=invListEditSave',form_serialize);$('#fade').fadeOut('slow');$('#fullscreen').fadeOut('slow').html('');}
function inv_list_save_old(profile_id){var recipients_list=$("#inv_recipients_list").val();var fields=[];$('ul').children('li.inv_field_enabled').each(function(idx,elm){fields.push(elm.id);});var rec_profile_name=$("#rec_profile_name").val();var rec_profile_comment=$("#rec_profile_comment").val();$("#anketa_edit").load('ajax.php?t=invitations&a=invListSaveOld',{anketa:srv_meta_anketa_id,recipients_list:recipients_list,field_list:fields,profile_id:profile_id,rec_profile_name:rec_profile_name,rec_profile_comment:rec_profile_comment});$('#fade').fadeOut('slow');$('#fullscreen').fadeOut('slow').html('');}
function deleteRecipientsList_confirm(id){if(confirm(lang['srv_inv_recipients_delete_list_confirm'])){$("#anketa_edit").load('ajax.php?t=invitations&a=deleteRecipientsList',{anketa:srv_meta_anketa_id,id:id});}}
function inv_listAccess(show_hide){if(show_hide=='true'){$("#invListAccessShow1").toggle();$("#invListAccessShow2").toggle();$("div[name=listAccess]").each(function(){$(this).removeClass('displayNone');});}else{$("#invListAccessShow1").toggle();$("#invListAccessShow2").toggle();$("div[name=listAccess] label input:not(:checked)").each(function(){$(this).parent().parent().addClass('displayNone');});}}
function showInvitationListsNames(){var onlyThisSurvey=$('input[name=inv_show_list_type]:checked').val();var pids="";var prefix="";$('#inv_edit_rec_list table tr td input:checked').each(function(idx,elm){pids=pids+prefix+$(elm).attr('value');prefix=',';});$("#inv_edit_rec_list").load('ajax.php?t=invitations&a=showInvitationListsNames',{anketa:srv_meta_anketa_id,noNavi:'true',onlyThisSurvey:onlyThisSurvey,pids:pids},function(){var pids="";var prefix="";$('#inv_edit_rec_list table tr td input:checked').each(function(idx,elm){pids=pids+prefix+$(elm).attr('value');prefix=',';});$("#inv_selected_rec_list").load('ajax.php?t=invitations&a=editRecList',{anketa:srv_meta_anketa_id,noNavi:'true',pids:pids,onlyThisSurvey:onlyThisSurvey});});}
function inv_upload_list(){$('#fade').fadeTo('slow',1);$('#fullscreen').html('').fadeIn('slow');$("#fullscreen").load('ajax.php?t=invitations&a=upload_list',{anketa:srv_meta_anketa_id,noNavi:'true'});}
function inv_upload_list_check(){var file=$('#invListFile').val();if(file!=''){var extension=file.split('.').pop().toLowerCase();if(extension=='txt'||extension=='csv'){$('#inv_recipients_upload_form').submit();}else{genericAlertPopup('alert_incorrect_filetype');}}else{genericAlertPopup('alert_choose_file');}}
function create_inv_editor(id,focus){id='inv_message_body';if(!editor_init){CKEDITOR.replace(id,{fullPage:true,allowedContent:true});editor_init=true;}
else{CKEDITOR.replace(id,{fullPage:true,allowedContent:true});}}
function mailSourceMesageChange(what){var mid=$(what).val();if(mid!='undefined'&&mid>0){$("#inv_select_mail_preview").load('ajax.php?t=invitations&a=make_default_from_preview',{anketa:srv_meta_anketa_id,mid:mid,noNavi:'true'});}}
function inv_set_sort_field(field,type){$.post('ajax.php?t=invitations&a=setSortField',{anketa:srv_meta_anketa_id,noNavi:'true',field:field,type:type},function(){$("#anketa_edit").load('ajax.php?t=invitations&a=view_recipients',{anketa:srv_meta_anketa_id});});}
function inv_addSysVarsMapping(){var form_serialize=$("#inv_ValidateSysVarsMappingFrm").serializeArray();form_serialize[form_serialize.length]={name:'anketa',value:srv_meta_anketa_id};form_serialize[form_serialize.length]={name:'noNavi',value:'true'};$("#inv_ValidateSysVarsMappingDiv").load('ajax.php?t=invitations&a=addSysVarsMapping',form_serialize);}
function inv_ValidateSysVarsMapping(){var form_serialize=$("#inv_ValidateSysVarsMappingFrm").serializeArray();form_serialize[form_serialize.length]={name:'anketa',value:srv_meta_anketa_id};form_serialize[form_serialize.length]={name:'noNavi',value:'true'};$("#inv_ValidateSysVarsMappingDiv").load('ajax.php?t=invitations&a=validateSysVarsMapping',form_serialize);}
function invSysVarMapChange(what){var value=$(what).val()+"";var name=$(what).attr('name')+"";{var values=[];$('#inv_ValidateSysVarsMappingFrm select').each(function(el){if($(this).val()+""!=""){values.push($(this).val()+"");}});$('#inv_ValidateSysVarsMappingFrm select > option').each(function(el){$(this).removeAttr("disabled","disabled");});$('#inv_ValidateSysVarsMappingFrm select > option').each(function(el){if($(this).parent().attr('name')!=name&&($.inArray($(this).val()+"",values)!==-1)){$(this).attr("disabled","disabled");}});}}
function invRenameRecipientsChange(){var checked=$("#inv_recipients_rename_profile").is(":checked");if(checked==true){$("#div_inv_recipients_rename_list_type").show();$('#rec_profile_name').focus();}else{$("#div_inv_recipients_rename_list_type").hide();}}
function invRecipientsForward(){var doAdd=$("#inv_recipients_add").is(":checked")?true:false;var doSave=true;var profile_name=$("#rec_profile_name").val();var profile_id=$("#inv_import_list_profiles ol li.active").attr('pid');if(doSave==true)
{profile_id=$("#sel_inv_list_type").find('option:selected').val();}
var profile_comment=$("#rec_profile_comment").val();var recipients_list=$("#inv_recipients_list").val();var recipientsDelimiter=$('input[name=recipientsDelimiter]:checked').val();var fields=[];$('ul').children('li.inv_field_enabled').each(function(idx,elm)
{fields.push(elm.id);});if(fields.length>0)
{if(recipients_list.length>0)
{$("#anketa_edit").load('ajax.php?t=invitations&a=recipientsAddForward',{anketa:srv_meta_anketa_id,doAdd:doAdd,doSave:doSave,recipients_list:recipients_list,fields:fields,profile_name:profile_name,profile_comment:profile_comment,profile_id:profile_id,recipientsDelimiter:recipientsDelimiter});}
else
{genericAlertPopup('srv_invitation_note1');}}
else
{genericAlertPopup('srv_invitation_note2');}}
function showInvitationAdvancedConditions(cid){if(typeof cid==='undefined')
{if($("a.faicon.if_add").data('cid').length)
{cid=$("a.faicon.if_add").data('cid');}
else
{cid=0;}}
$('#fade').fadeTo('slow',1);$('#fullscreen').html('').fadeIn('slow');$("#fullscreen").load('ajax.php?t=invitations&a=showAdvancedConditions',{anketa:srv_meta_anketa_id,noNavi:'true',cid:cid});}
function invitationSetCondition(cid)
{var cid=$("#divConditionProfiles #condition_profile").find(".active").data('cid');$('#fullscreen').fadeOut('slow').html('');$('#fade').fadeOut('slow');$("#anketa_edit").load('ajax.php?t=invitations&a=setAdvancedCondition',{anketa:srv_meta_anketa_id,cid:cid});}
function noEmailingToggle(value){$.post('ajax.php?t=invitations&a=set_noEmailing',{anketa:srv_meta_anketa_id,value:value},function(data){window.location.reload();});}
function noEmailingType(value){$.post('ajax.php?t=invitations&a=set_noEmailing_type',{anketa:srv_meta_anketa_id,value:value});}
function smtpAAIPopupShow(){$('#fade').fadeTo('slow',1);$('#general_popup').html('').addClass('PopUpNarrow').fadeIn('slow');$("#general_popup").load('ajax.php?t=invitations&a=showAAISmtpPopup',{anketa:srv_meta_anketa_id,noNavi:'true'});}
function smtpAAIPopupClose(){$('input[name=SMTPMailMode][value=2]').prop('checked',true);popupClose();}
function smtpAAISet(){$("form[name='settingsanketa_"+srv_meta_anketa_id+"']").submit();}
function smtpAAIAccept(){if($('#aai_smtp_checkbox').is(':checked'))
$('#aai_smtp_button').show();else
$('#aai_smtp_button').hide();}
function squaloSwitch(){if($('#squalo_mode').prop('checked')){$('#send_mail_mode0, #send_mail_mode1, #send_mail_mode2, .mail_mode_switch, #send_mail_mode_test').addClass('displayNone');$('#success_save').hide();}
else{$('.squalo_settings').addClass('displayNone');$('#send_mail_mode2, .mail_mode_switch, #send_mail_mode_test').removeClass('displayNone');$('#success_save').hide();}}
function initInvitationsConnectedSortable(){if($(window).width()<850)
return false;$('ul.connectedSortable').sortable({update:function(){refreshFieldsList();},forcePlaceholderSize:'true',tolerance:'pointer',placeholder:'inv_field_placeholder',cancel:'#inv_field_relation'});};function themes_init(){$("#edit_theme_css.as_link").live('click',function(event){window.location='index.php?anketa='+srv_meta_anketa_id+'&a=edit_css';});$("#theme_progressbar input:radio").live('change',function(event){var progressbar=$(this).val();$.post("ajax.php?t=theme&a=changeProgressbar",{anketa:srv_meta_anketa_id,progressbar:progressbar},function(){});});$("div.theme_links_preview").live('click',function(event){event.preventDefault();event.stopPropagation();window.open($(this).attr('src')+'&size=full','_blank');});$("div.theme_delete.theme").live('click',function(event){event.preventDefault();event.stopPropagation();if(confirm(lang['srv_ask_delete'])){var css=$(this).attr('css');$.post('ajax.php?t=theme&a=theme_delete',{anketa:srv_meta_anketa_id,css:css},function(){window.location.reload();});}});$("#theme_rename_confirm").live('click',function(event){var theme_new_name=$("#theme_new_name").val();var theme=$("#theme").val();$.post('ajax.php?t=theme&a=theme_rename_confirm',{anketa:srv_meta_anketa_id,theme:theme,theme_new_name:theme_new_name},function(data){data=jQuery.parseJSON(data);if(data.error=="0"){var gid=$("#sel_theme_group").val();$("#div_theme_group_holder").load("ajax.php?t=theme&a=changeGroup",{anketa:srv_meta_anketa_id,gid:gid},function(){$("#div_theme_groups span.theme_header strong").html(data.theme_new_name);$('#fade').fadeOut('slow');$('#fullscreen').fadeOut('slow').html('');return false;});return false;}else{$("#fullscreen").load('ajax.php?t=theme&a=theme_rename',{anketa:srv_meta_anketa_id,theme:data.theme,theme_new_name:data.theme_new_name,msg:data.msg});}});return false;});$("#theme_rename_cancle").live('click',function(event){$('#fade').fadeOut('slow');$('#fullscreen').fadeOut('slow').html('');return false;});$('#izbira-checkbox-gumbov').change(function(){var izbira=$(this).find(":selected").val();$.post('ajax.php?t=checboxChangeTheme&a=checboxThemeSave',{anketa:srv_meta_anketa_id,checkbox:izbira});});}
function theme_changeGroup(){var gid=$("#sel_theme_group").val();$("#div_theme_group_holder").load("ajax.php?t=theme&a=changeGroup",{anketa:srv_meta_anketa_id,gid:gid});}
function add_theme(){$('#fade').fadeTo('slow',1);$('#vrednost_edit').load('ajax.php?t=theme&a=add_theme',{anketa:srv_meta_anketa_id}).show();}
function init_themeEditor(id){var f=$.farbtastic('#picker');var p=$('#picker').hide();var selected;$('.colorwell').each(function(){f.linkTo(this);$(this).css('opacity',0.75);}).focus(function(){if(selected){$(selected).css('opacity',0.75).removeClass('colorwell-selected');}
f.linkTo(this);p.show();$(selected=this).css('opacity',1).addClass('colorwell-selected');});$("#theme_progressbar input:radio").live('change',function(event){var progressbar=$(this).val();$.post("ajax.php?t=theme&a=changeProgressbar",{anketa:srv_meta_anketa_id,progressbar:progressbar},function(){var iframe=document.getElementById('theme-preview-iframe');iframe.src=iframe.src;});});$('.auto-save').change(function(){te_auto_save(this,true);}).blur(function(){te_auto_save(this,true);$('#picker').hide();});}
function te_auto_save(_this,refresh){var value=$(_this).val();if($(_this).is(':checkbox')){if($(_this).is(':checked'))
value=1;else
value=0;}
$.post('ajax.php?t=themeEditor&a=auto_save&profile='+$('#profile').val()+'&mobile='+$('#mobile').val(),{anketa:srv_meta_anketa_id,id:$(_this).attr('data-id'),type:$(_this).attr('data-type'),value:value},function(){if(refresh){var iframe=document.getElementById('theme-preview-iframe');iframe.src=iframe.src;}});}
function te_remove_setting(id,type){$.post('ajax.php?t=themeEditor&a=auto_save&profile='+$('#profile').val()+'&mobile='+$('#mobile').val(),{anketa:srv_meta_anketa_id,id:id,type:type,value:''},function(){window.location.reload();});}
function te_change_profile(profile,redirect,mobile_skin){var mobile=0;if(mobile_skin===true)
mobile=1;$.post('ajax.php?t=themeEditor&a=change_profile&profile='+profile+'&mobile='+mobile,{anketa:srv_meta_anketa_id},function(){if(redirect===true)
window.location='index.php?anketa='+srv_meta_anketa_id+'&a=tema';});}
function te_change_profile_oldskin(skin,refresh){$.post('ajax.php?t=themeEditor&a=change_profile_oldskin',{skin:skin,anketa:srv_meta_anketa_id},function(data){if(refresh===true)
window.location='index.php?anketa='+srv_meta_anketa_id+'&a=tema';else
window.location=data;});}
function te_delete_profile(profile,mobile_skin){var mobile=0;if(mobile_skin===true)
mobile=1;$.post('ajax.php?t=themeEditor&a=delete_profile&profile='+profile+'&mobile='+mobile,{anketa:srv_meta_anketa_id},function(){window.location='index.php?anketa='+srv_meta_anketa_id+'&a=tema';});}
function te_add_theme(){$('#fade').fadeTo('slow',1);$('#vrednost_edit').load('ajax.php?t=themeEditor&a=add_theme',{anketa:srv_meta_anketa_id}).show();}
function te_change_name(_this){$.post('ajax.php?t=themeEditor&a=change_name&profile='+$('#profile').val()+'&mobile='+$('#mobile').val(),{anketa:srv_meta_anketa_id,name:$(_this).val()},function(){$('select[name=profile-select] option[value='+$('#profile').val()+']').html($(_this).val());});}
function toggle_custom_themes(){$('.user_themes_button').toggleClass("fa-angle-up");$('.div_theme_group.custom').slideToggle('medium');}
function changeTheme(gid,css){$.post("ajax.php?t=theme&a=changeTheme",{anketa:srv_meta_anketa_id,gid:gid,css:css},function(data){$("#div_theme_group_holder").html(data.group_themes);$('#div_theme_groups').html(data.theme_name);$('#div_theme_group_holder').append('<div id="success_save">'+lang['srv_success_save']+'</div>');actionNotePopup('success_save','success');},'json');}
function show_settings(id_of_element){if($('#additional_settings_'+id_of_element).hasClass('displayNone')){$('.buttons-window').addClass('displayNone');$('#additional_settings_'+id_of_element).removeClass('displayNone');}
else{$('.buttons-window').addClass('displayNone');}}
function show_settings_mobile(id_of_element){var options=document.getElementById("options_mobile"+id_of_element);var additional_settings=document.getElementById("additional_settings_mobile_"+id_of_element);additional_settings.classList.toggle("active");if($('#additional_settings_mobile_'+id_of_element).hasClass('displayNone')){$('.buttons-window').addClass('displayNone');$('#additional_settings_mobile_'+id_of_element).removeClass('displayNone');}
else{$('.buttons-window').addClass('displayNone');}};function inspect_init(){$("#inspectListSpr").live('click',function(event){$("#inspect_cover_div").show();$('#fullscreen').html('').fadeIn('slow');$("#fullscreen").load('ajax.php?t=inspect&a=show_inspectListSpr',{anketa:srv_meta_anketa_id}).addClass('z-index200').addClass('popupShadow');});$("#dsp_inspect_cancel").live('click',function(event){$("#inspect_cover_div").hide();$("#fullscreen").removeClass('z-index200').fadeOut();});$("#dsp_inspect_save").live('click',function(event){var vars=new Array();$('input[name="dsp_inspect_vars"]:checked').each(function(index,el){vars.push($(el).val());});$.post('ajax.php?t=inspect&a=saveInspectListVars',{anketa:srv_meta_anketa_id,vars:vars},function(){$("#inspectListSpr").load('ajax.php?t=inspect&a=displayInspectVars',{anketa:srv_meta_anketa_id});$("#inspect_cover_div").hide();$("#fullscreen").removeClass('z-index200').fadeOut();});});}
function show_inspect_settings(){$('#fade').fadeTo('slow',1);$("#inspect_div").load("ajax.php?t=inspect&a=showInspectSettings",{anketa:srv_meta_anketa_id},function(){}).show(200).draggable({delay:100,cancel:'input, .buttonwrapper, .select'});}
function inspectSaveSettings(){var enableInspect=$('input[name="enableInspect"]:checked').val();var inspectGoto=$('input[name=inspectGoto]:checked').val();$.post("ajax.php?t=inspect&a=saveSettings",{anketa:srv_meta_anketa_id,enableInspect:enableInspect,inspectGoto:inspectGoto},function(){return reloadData('inpect');});}
function inspectCloseSettings(){$("#fade").fadeOut();$("#inspect_div").hide(200);}
function inspectRadioChange(){var inspectGoto=$('input[name=inspectGoto]:checked').val();if(inspectGoto==2){$("#inspectListDiv").show();}else{$("#inspectListDiv").hide();}}
function inspectRemoveCondition(inspect_comeFrom){$.post("ajax.php?t=inspect&a=removeInspect",{anketa:srv_meta_anketa_id},function(){window.location=inspect_comeFrom;});}
function doZoomFromInspect(){if($("#div_zoom_condition").length>0){$.post("ajax.php?t=zoom&a=doZoomFromInspect",{anketa:srv_meta_anketa_id,showDiv:0},function(response){$("#div_zoom_condition").html(response).show();});}else{$.post("ajax.php?t=zoom&a=doZoomFromInspect",{anketa:srv_meta_anketa_id,showDiv:1},function(response){$("#globalSetingsHolder").append(response);});}};function means_init(){}
function change_means(action){$("#div_means_dropdowns").fadeTo(100,0.2);$("#div_means_data").fadeTo(100,0.2);var sequence1=new Array();var spr1=new Array();var grid1=new Array();var sequence2=new Array();var spr2=new Array();var grid2=new Array();if(action=='rotate'){$('select[name=means_variable_2]').each(function(index,el){sequence1.push($(el).val());});$('select[name=means_variable_1]').each(function(index,el){sequence2.push($(el).val());});$('select[name=means_variable_2] option:selected').each(function(index,el){spr1.push($(el).attr("spr_id"));grid1.push($(el).attr("grd_id"));});$('select[name=means_variable_1] option:selected').each(function(index,el){spr2.push($(el).attr("spr_id"));grid2.push($(el).attr("grd_id"));});}else{$('select[name=means_variable_1]').each(function(index,el){sequence1.push($(el).val());});$('select[name=means_variable_2]').each(function(index,el){sequence2.push($(el).val());});$('select[name=means_variable_1] option:selected').each(function(index,el){spr1.push($(el).attr("spr_id"));grid1.push($(el).attr("grd_id"));});$('select[name=means_variable_2] option:selected').each(function(index,el){spr2.push($(el).attr("spr_id"));grid2.push($(el).attr("grd_id"));});}
$("#div_means_dropdowns").load("ajax.php?t=means&a=changeDropdown",{anketa:srv_meta_anketa_id,sequence1:sequence1,sequence2:sequence2,spr1:spr1,spr2:spr2,grid1:grid1,grid2:grid2},function(){if(spr1&&spr2){$("#div_means_data").load("ajax.php?t=means&a=change",{anketa:srv_meta_anketa_id,sequence1:sequence1,sequence2:sequence2,spr1:spr1,spr2:spr2,grid1:grid1,grid2:grid2},function(){$("#div_means_dropdowns").fadeTo(100,1);$("#div_means_data").fadeTo(100,1);});}});}
function means_add_new_variable(which){var sequence=new Array();var spr=new Array();var grid=new Array();$('select[name=means_variable_'+which+']').each(function(index,el){sequence.push($(el).val());});$('select[name=means_variable_'+which+'] option:selected').each(function(index,el){spr.push($(el).attr("spr_id"));grid.push($(el).attr("grd_id"));});$.post("ajax.php?t=means&a=add_new_variable",{anketa:srv_meta_anketa_id,which:which,sequence:sequence,spr:spr,grid:grid},function(response){if(which=='2'){$(response).appendTo('#meansRightDropdowns');}else{$(response).appendTo('#meansLeftDropdowns');}});}
function means_remove_variable(what){$(what).parent().remove();change_means();}
function changeMeansSubSetting(){var chkMeansSeperate=$("#chkMeansSeperate").is(':checked')?1:0;var chkMeansJoinPercentage=$("#chkMeansJoinPercentage").is(':checked')?1:0;if(chkMeansSeperate==1){$("#spanMeansJoinPercentage").removeClass('displayNone');}else{$("#spanMeansJoinPercentage").removeClass('displayNone');}
$.post("ajax.php?t=means&a=changeMeansSubSetting",{anketa:srv_meta_anketa_id,chkMeansSeperate:chkMeansSeperate,chkMeansJoinPercentage:chkMeansJoinPercentage},function(response){change_means();});}
function doArchiveMeans(){if($("#div_means_data").html().length>0){$("#fullscreen").load('ajax.php?a=doArchiveAnaliza',{anketa:srv_meta_anketa_id,podstran:srv_meta_podstran},function(){$('#fade').fadeTo('slow',1);$('#fullscreen').show();});}else{genericAlertPopup('alert_no_archive_tables');}}
function submitArchiveMeans(){if($("#div_means_data").html().length>0){var content=$("#div_means_data").html();var name=$("#newAnalysisArchiveName").val();var note=$("#newAnalysisArchiveNote").val();var access=$("[name=newAnalysisArchiveAccess]:checked").val();var duration=$("#newAnalysisArchiveDuration").val();var durationType=$("[name=newAADurationType]:checked").val();$("#fullscreen").load('ajax.php?a=submitArchiveAnaliza',{anketa:srv_meta_anketa_id,podstran:srv_meta_podstran,name:name,note:note,access:access,duration:duration,durationType:durationType,content:content},function(){$("#fullscreen").show();});}else{genericAlertPopup('alert_no_archive_tables');}}
function createArchiveMeansBeforeEmail(){if($("#div_means_data").html().length>0){var content=$("#div_means_data").html();$.post('ajax.php?a=createArchiveBeforeEmail',{anketa:srv_meta_anketa_id,podstran:srv_meta_podstran,content:content},function(response){if(parseInt(response)>0){var aid=parseInt(response);$("#fullscreen").load('ajax.php?a=emailArchiveAnaliza',{anketa:srv_meta_anketa_id,podstran:srv_meta_podstran,aid:aid},function(){$('#fullscreen').show();});}else{if(parseInt(response)==-1){genericAlertPopup('alert_no_archive_response',response);}else{genericAlertPopup('alert_archive_error_response',response);}
$('#fullscreen').hide();$('#fade').fadeOut('slow');}});}else{genericAlertPopup('alert_no_archive_tables');}};;function ttest_init(){}
function ttestSpremenljivkaChange(){var spr2=$('#ttestSpremenljivka').val();var grid2=$("#ttestSpremenljivka option:selected").attr('grid');var seq2=$("#ttestSpremenljivka option:selected").attr('seq2');$("#ttestResults").html('');$("#ttestVariablesSpan").load("ajax.php?t=ttest&a=spremenljivkaChange",{anketa:srv_meta_anketa_id,spr2:spr2,seq2:seq2,grid2:grid2},function(){$("#ttestVariablesSpan").fadeTo(100,1);});$('#ttestVariablesSpan').addClass('active');$('#ttestNumerus').attr('disabled',true);$('#ttestNumerusSpan').addClass('gray');}
function ttestVariableChange(){var seq=new Array();var spr=new Array();var grd=new Array();$('#ttestNumerus').each(function(index,el){spr.push($(el).val());});$('#ttestNumerus').attr('disabled',false).focus().attr('size',1);$('#ttestNumerusSpan').removeClass('gray');$('#ttestNumerus option:selected').each(function(index,el){seq.push($(el).attr("seq"));grd.push($(el).attr("grd"));});var spr2=$('#ttestSpremenljivka').val();var grid2=$("#ttestSpremenljivka option:selected").attr('grid');var seq2=$("#ttestSpremenljivka option:selected").attr('seq2');var label2=$("#ttestSpremenljivka option:selected").html();var sub_conditions=new Array();$('#ttestVariablesSpan input:checked').each(function(index,el){sub_conditions.push($(el).val());});$("#ttestResults").load("ajax.php?t=ttest&a=variableChange",{anketa:srv_meta_anketa_id,sub_conditions:sub_conditions,spr:spr,seq:seq,grd:grd,spr2:spr2,seq2:seq2,grid2:grid2,label2:label2},function(){var cnt=$("input[name=subTtest]:checked").length;if(cnt==2){$("input[name=subTtest]:not(:checked)").each(function(index,el){$(this).attr("disabled",true);$(this).parent().addClass("gray");});$("#ttestVariablesSpan").removeClass('active');}
else if(cnt<2){$('#ttestNumerus').attr('disabled',true);$('#ttestNumerusSpan').addClass('gray');$("#ttestVariablesSpan").addClass('active');$("input[name=subTtest]:disabled").each(function(index,el){$(this).removeAttr("disabled");$(this).parent().removeClass("gray");});$("#ttestResults").html('');}});}
function doArchiveTTest(){if($("#ttestResults").length>0&&$("#ttestResults").html()!=''){$("#fullscreen").load('ajax.php?a=doArchiveAnaliza',{anketa:srv_meta_anketa_id,podstran:srv_meta_podstran},function(){$('#fade').fadeTo('slow',1);$('#fullscreen').show();});}else{genericAlertPopup('alert_no_archive_tables');}}
function submitArchiveTTest(){if($("#ttestResults").html().length>0){var content=$("#ttestResults").html();var name=$("#newAnalysisArchiveName").val();var note=$("#newAnalysisArchiveNote").val();var access=$("[name=newAnalysisArchiveAccess]:checked").val();var duration=$("#newAnalysisArchiveDuration").val();var durationType=$("[name=newAADurationType]:checked").val();$("#fullscreen").load('ajax.php?a=submitArchiveAnaliza',{anketa:srv_meta_anketa_id,podstran:srv_meta_podstran,name:name,note:note,access:access,duration:duration,durationType:durationType,content:content},function(){$("#fullscreen").show();});}else{genericAlertPopup('alert_no_archive_tables');}}
function createArchiveTTestBeforeEmail(){if($("#ttestResults").html().length>0){var content=$("#ttestResults").html();$.post('ajax.php?a=createArchiveBeforeEmail',{anketa:srv_meta_anketa_id,podstran:srv_meta_podstran,content:content},function(response){if(parseInt(response)>0){var aid=parseInt(response);$("#fullscreen").load('ajax.php?a=emailArchiveAnaliza',{anketa:srv_meta_anketa_id,podstran:srv_meta_podstran,aid:aid},function(){$('#fullscreen').show();});}else{if(parseInt(response)==-1){genericAlertPopup('alert_no_archive_response',response);}else{genericAlertPopup('alert_archive_error_response',response);}
$('#fullscreen').hide();$('#fade').fadeOut('slow');}});}else{genericAlertPopup('alert_no_archive_tables');}};;function simpleMailInvitation_init(){$("#simpleMailInvitation_div div.profile_holder div.option").live("click",function(event){var $target=$(event.target);if($target.hasClass('active')==false){var pid=$target.attr('value');var emails=$("#simpleMailInvitation_div").find("#simpleMailRecipients").val();$("#fullscreen").load("ajax.php?t=simpleMailInvitation&a=showInvitation",{anketa:srv_meta_anketa_id,emails:emails,pid:pid});return false;}
return false;});}
function previewMailInvitation(){var pid=$("#simpleMailInvitation_div div.profile_holder div.active").attr('value');var subject=$("#simpleMailSubject").val();var body=$("#simpleMailBody").val();var emails=$("#simpleMailInvitation_div").find("#simpleMailRecipients").val();$("#simpleMailInvitationCoverDiv").fadeIn();$("#simpleMailInvitationPreviewDiv").load("ajax.php?t=simpleMailInvitation&a=previewInvitation",{anketa:srv_meta_anketa_id,emails:emails,pid:pid,subject:subject,body:body}).show();}
function showSimpleMailInvitation(){var emails=$("#mails").val();$('#fade').fadeTo('slow',1);$('#fullscreen').html('').fadeIn('slow');$("#fullscreen").load("ajax.php?t=simpleMailInvitation&a=showInvitation",{anketa:srv_meta_anketa_id,emails:emails});}
function sendSimpleMailInvitation(){$("#simpleMailInvitationCoverDiv").fadeIn();var subject=$("#simpleMailSubject").val();var body=$("#simpleMailBody").val();var emails=$("#simpleMailInvitation_div").find("#simpleMailRecipients").val();$("#fullscreen").load("ajax.php?t=simpleMailInvitation&a=sendInvitation",{anketa:srv_meta_anketa_id,emails:emails,subject:subject,body:body});};function showZoomSettings(){$('#fade').fadeTo('slow',1);$('#fullscreen').html('')
$('#zoom_div').load('ajax.php?t=zoom&a=showProfile',{anketa:srv_meta_anketa_id}).fadeIn('slow');}
function zoomChangeProfile(pid){$.post('ajax.php?t=zoom&a=changeProfile',{anketa:srv_meta_anketa_id,meta_akcija:srv_meta_akcija,podstran:srv_meta_podstran,pid:pid},function(){$("#zoom_div").load('ajax.php?t=zoom&a=showProfile',{anketa:srv_meta_anketa_id,meta_akcija:srv_meta_akcija,podstran:srv_meta_podstran,pid:pid});});}
function removeZoomProfile(){$.post('ajax.php?t=zoom&a=changeProfile',{anketa:srv_meta_anketa_id,meta_akcija:srv_meta_akcija,podstran:srv_meta_podstran,pid:0},function(){return reloadData('zoom');});}
function removeZoomCheckbox(){$.post('ajax.php?t=zoom&a=removeZoomCheckbox',{anketa:srv_meta_anketa_id,meta_akcija:srv_meta_akcija,podstran:srv_meta_podstran,pid:0},function()
{return reloadData('zoom');});}
function zoomProfileAction(action){if(action=='cancel'){$("#zoom_div").hide(200);return reloadData('zoom');}else if(action=='runProfile'||action=='run_session_profile'){if(action=='runProfile'){var pid=$("#zoom_profiles .active").attr('value');}else{var pid='-1';}
var vars=new Array();$('input[name="zoom_vars"]:checked').each(function(index,el){vars.push($(el).val());});if(vars.length>0){$("#zoom_div").hide(200);$("#zoom_div").load("ajax.php?t=zoom&a=saveProfile",{anketa:srv_meta_anketa_id,pid:pid,vars:vars,action:action},function(response){return reloadData('zoom');});}else{$('#zoom_div').load('ajax.php?t=zoom&a=showProfile',{anketa:srv_meta_anketa_id,error:'srv_zoom_error_no_var'}).fadeIn('slow');}}else if(action=='showRename'){$("#zoom_div div#renameProfileDiv").show();}else if(action=='cancelRename'){$("#zoom_div div#renameProfileDiv").hide();}else if(action=='doRename'){var pid=$("#zoom_profiles .active").attr('value');var name=$("#zoom_div div#renameProfileDiv input#renameProfileName").val();$.post('ajax.php?t=zoom&a=renameProfile',{anketa:srv_meta_anketa_id,pid:pid,name:name},function(){$("#zoom_div").load('ajax.php?t=zoom&a=showProfile',{anketa:srv_meta_anketa_id,meta_akcija:srv_meta_akcija,podstran:srv_meta_podstran},function(){$("#zoom_div div#renameProfileDiv").hide();});});}else if(action=='showDelete'){$("#zoom_div div#deleteProfileDiv").show();}else if(action=='cancelDelete'){$("#zoom_div div#deleteProfileDiv").hide();}else if(action=='newName'){var vars=new Array();$('#zoom_div input[name="zoom_vars"]:checked').each(function(index,el){vars.push($(el).val());});if(vars.length>0){$("#zoom_div div#newProfileDiv").show();}else{genericAlertPopup('alert_choose_variables');}}else if(action=='newCancel'){$("#zoom_div div#newProfileDiv").hide();}else if(action=='newCreate'){var name=$("#zoom_div div#newProfileDiv input#newProfileName").val();var vars=new Array();$('#zoom_div input[name="zoom_vars"]:checked').each(function(index,el){vars.push($(el).val());});$.post('ajax.php?t=zoom&a=createNewProfile',{anketa:srv_meta_anketa_id,name:name,meta_akcija:srv_meta_akcija,podstran:srv_meta_podstran,vars:vars},function(data){data=jQuery.parseJSON(data);if(data.error=='0'){if(data.newId>0){zoomChangeProfile(data.newId);}else{genericAlertPopup('alert_parameter_datamsg',data.msg);}}else{genericAlertPopup('alert_parameter_datamsg',data.msg);}});}else if(action=='doDelete'){var pid=$("#zoom_profiles div.active").attr('value');$.post('ajax.php?t=zoom&a=deleteProfile',{anketa:srv_meta_anketa_id,pid:pid},function(){$("#zoom_div").load('ajax.php?t=zoom&a=showProfile',{anketa:srv_meta_anketa_id,meta_akcija:srv_meta_akcija,podstran:srv_meta_podstran});});$("#zoom_div div#deleteProfileDiv").hide();}else{genericAlertPopup('alert_parameter_action',action);}}
function changeZoomCheckbox(){var vars=new Array();$('#div_zoom_condition input:checked').each(function(index,el){vars.push($(el).val());});$("#div_analiza_data").load('ajax.php?t=zoom&a=changeZoomCheckbox',{anketa:srv_meta_anketa_id,meta_akcija:srv_meta_akcija,podstran:srv_meta_podstran,vars:vars});if(vars.length>0){$("#span_zoom_condition_remove").hide();}else{$("#span_zoom_condition_remove").show();}}
function toggleAllZoom(what){$.post('ajax.php?t=zoom&a=togleExtended',{anketa:srv_meta_anketa_id,what:what},function(){if(what==0){$("#div_zoom_condition ul").parent().removeClass('displayNone');$("#div_zoom_condition #zoomSpritesMinus").removeClass('displayNone');$("#div_zoom_condition #zoomSpritesPlus").addClass('displayNone');}else{$("#div_zoom_condition ul").parent().addClass('displayNone');$("#div_zoom_condition #zoomSpritesMinus").addClass('displayNone');$("#div_zoom_condition #zoomSpritesPlus").removeClass('displayNone');}});}
function toggleShowZoomVariables(what){$.post('ajax.php?t=zoom&a=toggleShowZoomVariables',{anketa:srv_meta_anketa_id,what:what},function(){if(what==0){$("#div_zoom_condition").show();$("#conditionProfileNote #zoomSpritesMinus1").show();$("#conditionProfileNote #zoomSpritesPlus1").hide();}else{$("#div_zoom_condition").hide();$("#conditionProfileNote #zoomSpritesMinus1").hide();$("#conditionProfileNote #zoomSpritesPlus1").show();}});};function break_init(){}
function breakSpremenljivkaChange(){var spr=$('#breakSpremenljivka').val();var seq=$("#breakSpremenljivka option:selected").attr('seq');$("#breakResults").html('');$("#breakResults").load("ajax.php?t=break&a=spremenljivkaChange",{anketa:srv_meta_anketa_id,spr:spr,seq:seq},function(){$("#breakResults").fadeTo(100,1);}).show();}
function change_break_percent(){var break_percent=$("#break_percent").is(':checked');var crossChk1=break_percent;$.post("ajax.php?t=crosstab&a=change_cb_percent",{anketa:srv_meta_anketa_id,crossChk1:crossChk1},function(){$.post("ajax.php?t=break&a=change_break_percent",{anketa:srv_meta_anketa_id,break_percent:break_percent},function(){breakSpremenljivkaChange();});});}
function change_break_charts(break_charts){$.post("ajax.php?t=break&a=change_break_charts",{anketa:srv_meta_anketa_id,break_charts:break_charts},function(){breakSpremenljivkaChange();});}
function doArchiveBreak(){if($("#breakResults").length>0&&$("#breakResults").html()!=''){$("#fullscreen").load('ajax.php?a=doArchiveAnaliza',{anketa:srv_meta_anketa_id,podstran:srv_meta_podstran},function(){$('#fade').fadeTo('slow',1);$('#fullscreen').show();});}
else{genericAlertPopup('alert_no_archive_tables');}}
function submitArchiveBreak(){if($("#breakResults").html().length>0){var content=$("#breakResults").html();var name=$("#newAnalysisArchiveName").val();var note=$("#newAnalysisArchiveNote").val();var access=$("[name=newAnalysisArchiveAccess]:checked").val();var duration=$("#newAnalysisArchiveDuration").val();var durationType=$("[name=newAADurationType]:checked").val();$("#fullscreen").load('ajax.php?a=submitArchiveAnaliza',{anketa:srv_meta_anketa_id,podstran:srv_meta_podstran,name:name,note:note,access:access,duration:duration,durationType:durationType,content:content},function(){$("#fullscreen").show();});}
else{genericAlertPopup('alert_no_archive_tables');}}
function createArchiveBreakBeforeEmail(){if($("#breakResults").html().length>0){var content=$("#breakResults").html();$.post('ajax.php?a=createArchiveBeforeEmail',{anketa:srv_meta_anketa_id,podstran:srv_meta_podstran,content:content},function(response){if(parseInt(response)>0){var aid=parseInt(response);$("#fullscreen").load('ajax.php?a=emailArchiveAnaliza',{anketa:srv_meta_anketa_id,podstran:srv_meta_podstran,aid:aid},function(){$('#fullscreen').show();});}
else{if(parseInt(response)==-1){genericAlertPopup('alert_no_archive_response',response);}
else{genericAlertPopup('alert_archive_error_response',response);}
$('#fullscreen').hide();$('#fade').fadeOut('slow');}});}
else{genericAlertPopup('alert_no_archive_tables');}};;function anketa_user_dostop(uid,aid){var anketa=aid||srv_meta_anketa_id;$('#fade').fadeTo('slow',1);$('#vrednost_edit').show().load('ajax.php?t=dostop&a=anketa_user_dostop',{uid:uid,anketa:anketa});}
function anketa_user_dostop_close(){$('#vrednost_edit').html('').removeClass('edit_user').hide();$('#fade').fadeOut('slow');}
function anketa_user_dostop_save(aid){var anketa=aid||srv_meta_anketa_id;var form=$('form#dostop').serializeArray();form[form.length]={name:'anketa',value:anketa};$.post('ajax.php?t=dostop&a=anketa_user_dostop_save',form,function(){window.location.reload();});}
function edit_user(uid){$('#fade').fadeTo('slow',1);$('#vrednost_edit').addClass('edit_user').show().load('ajax.php?t=dostop&a=edit_user',{uid:uid});}
function edit_user_close(){$('#vrednost_edit').removeClass('edit_user').hide().html('');$('#fade').fadeOut('slow');}
function dodeljeni_uporabniki_display(manager){$('#fade').fadeTo('slow',1);$('#vrednost_edit').addClass('dodeljeni_uporabniki').show().load('ajax.php?t=dostop&a=dodeljeni_uporabniki_display',{manager:manager});}
function dodeljeni_uporabniki_close(){$('#vrednost_edit').removeClass('dodeljeni_uporabniki').hide().html('');$('#fade').fadeOut('slow');}
function dodeljeni_uporabniki_remove(manager,user){if(confirm(lang['srv_manager_remove_alert'])){$('#vrednost_edit').load('ajax.php?t=dostop&a=edit_remove_user_admin',{manager:manager,user:user});}}
function dodeljeni_uporabniki_add(manager,user){var user=$('#add_user_id').val();$('#vrednost_edit').load('ajax.php?t=dostop&a=admin_add_user_popup',{manager:manager,user:user});}
function dostop_language(chk){var edit=$('#edit').is(':checked');var test=$('#test').is(':checked');var publish=$('#publish').is(':checked');if(edit&&test&&publish){$('#dostop_language_edit').attr('value','0');$('.dostop_language').attr('disabled',true).attr('checked',true);}
else{$('#dostop_language_edit').attr('value','1');$('.dostop_language').removeAttr('disabled');}}
function dostop_anketar(chk){if(chk.checked){$('#dostop input[type=checkbox]').each(function(){if($(this).attr('id')!='phone'){$(this).attr('disabled',true).attr('checked',false);}});}
else{$('#dostop input[type=checkbox]').each(function(){if($(this).attr('id')!='phone'){$(this).attr('disabled',false);}
if($(this).attr('id')=='dashboard'||$(this).attr('id')=='edit'||$(this).attr('id')=='test'||$(this).attr('id')=='publish'||$(this).attr('id')=='data'||$(this).attr('id')=='analyse'){$(this).attr('checked',true);}});}}
function hierarhijaPravice(anketa_id,user){var anketa=anketa_id||srv_meta_anketa_id;var user=user||null;if(user==null){return false;}
var tip=$('#hierarchy-type-change option:selected').val();$.post('ajax.php?anketa='+anketa+'&t=hierarhija-ajax&a=spremeni_tip_hierarhije',{anketa:anketa,user:user,tip:tip});}
function dodeliSAdostopUporabniku(){$('#fade').fadeTo('slow',1);$('#vrednost_edit').html('').fadeIn('slow').load('ajax.php?t=sa-uporabniki&a=get');}
function shraniSAuporabnika(){$.post('ajax.php?t=sa-uporabniki&a=add',{email:$('#sa-email').val(),id:$('#sa-id').val(),ustanova:$('#sa-ustanova').val(),aai:$('#sa-aai').val()}).success(function(){location.reload();});}
function preveriVpisanEmailZaSAdostop(){var email=$('#sa-email').val();$('.sa-potrdi').show();$('#sa-aai').removeAttr('disabled');$('#sa-organizacija').removeAttr('disabled');$('#sa-email-sporocilo').html('');$('#sa-id').val('');$.post('ajax.php?t=sa-uporabniki&a=check',{email:email}).success(function(data){data=JSON.parse(data);if(data.tip=='error'){$('.sa-potrdi').hide();$('#sa-aai').attr('disabled');$('#sa-organizacija').attr('disabled');$('#sa-email-sporocilo').html(data.sporocilo).removeClass('moder').addClass('red');}
else if(data.tip=='success'){$('#sa-email-sporocilo').html(data.sporocilo).removeClass('red').addClass('moder');$('#sa-id').val(data.id);}});}
function izbrisiSAuporabnika(id){$.post('ajax.php?t=sa-uporabniki&a=delete',{id:id}).success(function(){location.reload();});}
function urediSAuporabnika(id){$.post('ajax.php?t=sa-uporabniki&a=edit',{id:id}).success(function(data){$('#fade').fadeTo('slow',1);$('#vrednost_edit').html(data).fadeIn('slow');});}
function posodobiSAuporabnika(id){$.post('ajax.php?t=sa-uporabniki&a=update',{id:id,email:$('#sa-email').val(),ustanova:$('#sa-ustanova').val(),aai:$('#sa-aai').val()}).success(function(){location.reload();});}
function preveriSAuporabnika(id){$.post('ajax.php?t=sa-uporabniki&a=show',{id:id}).success(function(data){$('#fade').fadeTo('slow',1);$('#vrednost_edit').html(data).fadeIn('slow');});}
var tabelaDataTables;var siteUrl=$('meta[name="site-url"]').attr("content");$(document).ready(function(){if($.fn.dataTable){$.fn.dataTable.moment('DD.MM.YYYY');if($('#survey_list_users').length>0){$('#survey_list_users').DataTable({dom:'Bfrtip',deferRender:true});}
if($('#all_users_list').length>0){tabelaDataTables=$('#all_users_list').DataTable({lengthMenu:[[50,500,1000,5000,10000],[50,500,1000,5000,10000]],select:true,order:[[11,"desc"]],lengthChange:true,serverSide:true,ajax:{"url":siteUrl+"admin/survey/ajax.php?t=dostop&a=all_users_list","type":"post"},dom:'Blfrtip',buttons:[{extend:'copy',exportOptions:{columns:':visible'}},{extend:'print',exportOptions:{columns:':visible'}},{extend:'csv',title:'1KA - Seznam vseh uporabnikov',bom:true,exportOptions:{columns:':visible'}},{extend:'excel',title:'1KA - Seznam vseh uporabnikov',bom:true,exportOptions:{columns:':visible'}},{extend:'pdf',title:'1KA - Seznam vseh uporabnikov',orientation:'landscape',pageSize:'LEGAL',exportOptions:{columns:':visible'}},'colvis'],deferRender:true,language:{"url":siteUrl+"admin/survey/script/datatables/Slovenian.json"}});}
if($('#my_users_list').length>0){tabelaDataTables=$('#my_users_list').DataTable({"ajax":{"url":siteUrl+"admin/survey/ajax.php?t=dostop&a=my_users_list","type":"post"},serverSide:true,lengthMenu:[[50,500,1000,5000,10000],[50,500,1000,5000,10000]],dom:'Blfrtip',deferRender:true,select:true,buttons:[],language:{"url":siteUrl+"admin/survey/script/datatables/Slovenian.json"},fnInitComplete:function(){if($(this).find('tbody tr td').hasClass('dataTables_empty')){}}});}
if($('#deleted_users_list').length>0){$('#deleted_users_list').DataTable({"ajax":{"url":siteUrl+"admin/survey/ajax.php?t=dostop&a=delete_users_list","type":"post"},dom:'Blfrtip',deferRender:true,select:true,buttons:[{extend:'copy',exportOptions:{columns:':visible'}},{extend:'print',exportOptions:{columns:':visible'}},{extend:'csv',title:'1KA - Izbrisani uporabniki',bom:true,exportOptions:{columns:':visible'}},{extend:'excel',title:'1KA - Izbrisani uporabniki',bom:true,exportOptions:{columns:':visible'}},{extend:'pdf',title:'1KA - Izbrisani uporabniki',exportOptions:{columns:':visible'}},'colvis'],language:{"url":siteUrl+"admin/survey/script/datatables/Slovenian.json"}});}
if($('#unsigned_users_list').length>0){$('#unsigned_users_list').DataTable({"ajax":{"url":siteUrl+"admin/survey/ajax.php?t=dostop&a=unsigned_users_list","type":"post"},lengthMenu:[[50,500,1000,5000,10000],[50,500,1000,5000,10000]],dom:'Blfrtip',deferRender:true,select:true,buttons:[{extend:'copy',exportOptions:{columns:':visible'}},{extend:'print',exportOptions:{columns:':visible'}},{extend:'csv',title:'1KA - Odjavljeni uporabniki',bom:true,exportOptions:{columns:':visible'}},{extend:'excel',title:'1KA - Odjavljeni uporabniki',bom:true,exportOptions:{columns:':visible'}},{extend:'pdf',title:'1KA - Odjavljeni uporabniki',exportOptions:{columns:':visible'}},'colvis'],language:{"url":siteUrl+"admin/survey/script/datatables/Slovenian.json"}});}
if($('#unconfirmed_mail_user_list').length>0){tabelaDataTables=$('#unconfirmed_mail_user_list').DataTable({"ajax":{"url":siteUrl+"admin/survey/ajax.php?t=dostop&a=unconfirmed_mail_user_list","type":"post"},lengthMenu:[[50,500,1000,5000,10000],[50,500,1000,5000,10000]],dom:'Blfrtip',deferRender:true,select:true,buttons:[{extend:'copy',exportOptions:{columns:':visible'}},{extend:'print',exportOptions:{columns:':visible'}},{extend:'csv',title:'1KA - Nepotrjeni uporabniki',bom:true,exportOptions:{columns:':visible'}},{extend:'excel',title:'1KA - Nepotrjeni uporabniki',bom:true,exportOptions:{columns:':visible'}},{extend:'pdf',title:'1KA - Nepotrjeni uporabniki',exportOptions:{columns:':visible'}},'colvis'],language:{"url":siteUrl+"admin/survey/script/datatables/Slovenian.json"}});}
if($('.js-obstojeci-uporabniki-admin-ajax').length>0){$('.js-obstojeci-uporabniki-admin-ajax').select2({minimumInputLength:3,ajax:{url:'ajax.php?t=dostop&a=find_user',dataType:'json'}});}}
$('#manager-email').on('keyup',function(){if($(this).val().length>3){$.post('ajax.php?t=dostop&a=find_user',{uemail:$(this).val()},function(data){if(data=="error"){$('#manager-email').removeClass('success').addClass('error');$('#manager-email-obvestilo').text(lang['srv_user_not_exist']).removeClass('success').addClass('error').show();$('#manager-email-submit').hide();}else{$('#manager-email').removeClass('error').addClass('success');$('#manager-email-obvestilo').text(lang['srv_user_exist']).removeClass('error').addClass('success').show();$('#manager-email-submit').show();}});}else{$('#manager-email-obvestilo').hide();}});});function potrdiNepotrjenegaUporabnika(id){$.post(siteUrl+"admin/survey/ajax.php?t=dostop&a=unconfirmed_mail_user_list&m=accept",{uid:id},function(request){tabelaDataTables.ajax.reload();});}
function izbrisiNepotrjenegaUporabnika(id){$.post(siteUrl+"admin/survey/ajax.php?t=dostop&a=unconfirmed_mail_user_list&m=delete",{uid:id},function(request){tabelaDataTables.ajax.reload();});}
function vsiUporabnikiAkcija(id,action){var action=action||'delete';if(action=='delete'&&!confirm(lang['srv_survey_list_users_confirm_delete_warning'])){return false;}
$.post(siteUrl+"admin/survey/ajax.php?t=dostop&a=all_users_list&m="+action,{uid:id},function(request){tabelaDataTables.ajax.reload();});};function onload_init_recode(){$("#rec_spremenljivka_naslov").live('focus',function(){if($(this).attr('default')=='1')
$(this).select();}).live('keypress',function(event){enterKeyPressHandler(event);$(this).attr('default','0');})}
function showQuestionRecode(spr_id){$('#fade').fadeTo('slow',1);$("#question_recode").load("ajax.php?t=recode&a=showQuestionRecode",{anketa:srv_meta_anketa_id,spr_id:spr_id}).show();}
function removeQuestionRecode(spr_id,confirmtext){if(confirm(confirmtext)){$.post("ajax.php?t=recode&a=removeQuestionRecode",{anketa:srv_meta_anketa_id,spr_id:spr_id},function(response){response=jQuery.parseJSON(response);if(response.spr_id>0){brisi_spremenljivko(response.spr_id,response.confirmtext);}
window.location.reload();});}}
function cancelQuestionRecode(){$("#question_recode").fadeOut().html('');$('#fade').fadeOut('slow');}
function saveQuestionRecode(){var form_serialize=$("form[name=spremenljivka_recode]").serialize()||{anketa:srv_meta_anketa_id};$('#fade').fadeOut('slow');$("#question_recode").hide();$.post("ajax.php?t=recode&a=saveQuestionRecode",form_serialize,function(){window.location.reload();});}
function recode_add_numeric(spremenljivka){var recode_type=$('input[name=recode_type]:checked').val();$.post('ajax.php?t=recode&a=add_new_numeric',{anketa:srv_meta_anketa_id,spremenljivka:spremenljivka,recode_type:recode_type},function(data){if(data){if($('ul#recode_number_sort').length){$('ul#recode_number_sort').append(data);}else{$('#question_recode').append(data);}
$('ul.vrednost_sort li:last-child textarea','#question_recode').focus();$('#question_recode').attr({scrollTop:$('#question_recode').height()});}else{alert('Napaka x!');}});}
function recode_delete_numeric(spremenljivka,what){$(what).closest('li').remove();}
function recode_number_type_changed(what){var type=$(what).find('option:selected').val();var input_el=$(what).closest('li').find('input[name="recode_number_value[]"]');if(type=="_"){input_el.removeClass('hidden');input_el.show();}else{input_el.hide();input_el.addClass('hidden');input_el.val(type);}}
function recode_operator_changed(what){var type=$(what).find('option:selected').val();var span_el1=$(what).closest('li').find('span.recode_int_first');var span_el2=$(what).closest('li').find('span.recode_int_seccond');if(type=="6"){span_el1.addClass('hidden');span_el2.removeClass('hidden');}else{span_el1.removeClass('hidden');span_el2.addClass('hidden');}}
function changeRecodeType(){var form_serialize=$("form[name=spremenljivka_recode]").serializeArray();if(form_serialize.length==0){form_serialize[form_serialize.length]={name:'spr_id',value:$("input[name=spr_id]").val()};form_serialize[form_serialize.length]={name:'recodeToSpr',value:$("input[name=recodeToSpr]").val()};form_serialize[form_serialize.length]={name:'recode_type',value:$('input[name=recode_type]:checked').val()};}
if($("#recIsCharts").length){form_serialize[form_serialize.length]={name:'recIsCharts',value:$("#recIsCharts").val()};}
form_serialize[form_serialize.length]={name:'anketa',value:srv_meta_anketa_id}
$("#recodeToNewSpr").load("ajax.php?t=recode&a=changeRecodeType",form_serialize);}
function recodeSpremenljivkaNew(){var form_serialize=$("form[name=spremenljivka_recode]").serializeArray();if(form_serialize.length==0){form_serialize[form_serialize.length]={name:'spr_id',value:$("input[name=spr_id]").val()};form_serialize[form_serialize.length]={name:'recodeToSpr',value:$("input[name=recodeToSpr]").val()};form_serialize[form_serialize.length]={name:'recode_type',value:$('input[name=recode_type]:checked').val()};}
if($("#recIsCharts").length){form_serialize[form_serialize.length]={name:'recIsCharts',value:$("#recIsCharts").val()};}
form_serialize[form_serialize.length]={name:'anketa',value:srv_meta_anketa_id}
$("#recodeToNewSpr").load("ajax.php?t=recode&a=recodeSpremenljivkaNew",form_serialize);}
function recodeVrednostNew(){var form_serialize=$("form[name=spremenljivka_recode]").serializeArray();if(form_serialize.length==0){form_serialize[form_serialize.length]={name:'spr_id',value:$("input[name=spr_id]").val()};form_serialize[form_serialize.length]={name:'recodeToSpr',value:$("input[name=recodeToSpr]").val()};form_serialize[form_serialize.length]={name:'recode_type',value:$('input[name=recode_type]:checked').val()};}
if($("#recIsCharts").length){form_serialize[form_serialize.length]={name:'recIsCharts',value:$("#recIsCharts").val()};}
form_serialize[form_serialize.length]={name:'anketa',value:srv_meta_anketa_id}
$("#recodeToNewSpr").load("ajax.php?t=recode&a=recodeVrednostNew",form_serialize);}
function runRecodeVredonosti(what){init_progressBar();$(what).load("ajax.php?t=recode&a=runRecodeVredonosti",{anketa:srv_meta_anketa_id});}
function enableRecodeVariable(spr_id,what){$(what).load("ajax.php?t=recode&a=enableRecodeVariable",{anketa:srv_meta_anketa_id,spr_id:spr_id});}
function visibleRecodeVariable(spr_id,what){$(what).load("ajax.php?t=recode&a=visibleRecodeVariable",{anketa:srv_meta_anketa_id,spr_id:spr_id});};function append_submit(do_submit){if($("#inv_import_type1").is(":checked"))
{$("#inv_recipients_upload_form").submit();}
else
{var form=$('form#inv_recipients_upload_form');if(do_submit==1){form.append('<input type="hidden" name="do" value="1">');}
$.post('ajax.php?t=appendMerge&a=submit',form.serialize(),function(data){$('#fade').fadeTo('slow',1);$('#vrednost_edit').show().html(data);});}}
function append_submit_close(){$('#fade').fadeOut('slow');$('#vrednost_edit').hide().html('');}
function append_change_import_type(action){$('form#inv_recipients_upload_form').get(0).setAttribute('action',action);var import_type=$('input[name=inv_import_type]:checked').val();if(import_type==1){$('#inv_import_file').show();$('#inv_import_list').hide();}else{$('#inv_import_list').show();$('#inv_import_file').hide();}}
function append_refreshFieldsList(){var fields='';var fields_id='';var prefix='';$('ul').children('li.inv_field_enabled').each(function(idx,elm){fields=fields+prefix+$(elm).find('label').html();fields_id=fields_id+prefix+$(elm).attr('id');prefix=',';});$("#inv_field_list.inv_type_0, #inv_field_list.inv_type_1").html(fields);if($("#inv_recipients_upoad_fields").length>0){$("#inv_recipients_upoad_fields").val(fields_id);}}
function append_prepare_add_recipients(){var chck1=$("input#inv_recipients_add_type1").is(":checked");var chck2=$("input#inv_recipients_add_type2").is(":checked");if(chck1||chck2){var type=1;if(chck1==true){if(chck2==true){type=1;}else{type=0;}}else{type=2}
if(type==1){var recipients_list=$("#inv_recipients_list").val();var fields=[];$('ul').children('li.inv_field_enabled').each(function(idx,elm){fields.push(elm.id);});var doAdd='1';var pid=$("#inv_import_list_profiles ol li.active").attr('pid');if(fields.length>0){if(recipients_list.length>0){$('#fade').fadeTo('slow',1);$('#fullscreen').html('').fadeIn('slow');$("#fullscreen").load('ajax.php?t=invitations&a=get_profile_name',{anketa:srv_meta_anketa_id,recipients_list:recipients_list,fields:fields,noNavi:'true',doAdd:doAdd,pid:pid});}else{genericAlertPopup('srv_invitation_note1');}}else{genericAlertPopup('srv_invitation_note2');}}else if(type==0){append_add_recipients();}else if(type==2){inv_recipients_add_to_list()}}else{if(confirm('Niste izbrali akcije. Ali želite podatke dodati v anketo?')){append_add_recipients();}}}
function append_add_recipients(profile_id){if(typeof profile_id==="undefined"){var pid=$("#inv_import_list_profiles ol li.active").attr('pid');}else{var pid=profile_id;}
var recipients_list=$("#inv_recipients_list").val();var fields=[];$('#inv_field_container ul').children('li.inv_field_enabled').each(function(idx,elm){fields.push(elm.id);});var merge;if($('#do_merge').length>0){merge=$('ul#merge input:checked').attr('id').slice(0,-6);}else{merge=-1;}
if(fields.length>0){if(recipients_list.length>0){$("#anketa_edit").load('ajax.php?t=appendMerge&a=add_recipients',{anketa:srv_meta_anketa_id,recipients_list:recipients_list,fields:fields,merge:merge,pid:pid});$elm=$("ul.secondNavigation li.inv_ff_left_on");$elm.prev().find('a').removeClass('active');$elm.next().find('a').addClass('active');$elm.removeClass('inv_ff_left_on').addClass('inv_ff_right_on').next().next().addClass('inv_ff_left_on');}else{genericAlertPopup('srv_invitation_note1');}}else{genericAlertPopup('srv_invitation_note2');}}
function merge_getItems(){var checkboxes=$('ul.connectedSortable li input:checked');var fields=[];var checked=$('ul#merge input:checked').attr('id');$('ul#merge').empty();checkboxes.each(function(){var id=$(this).closest('li').attr('id');var label=$(this).closest('li').find('label').text();var dataTip=$(this).closest('li').data('tip');var ch,cl;if(checked==id+'_radio'){ch=' checked';cl='inv_field_enabled';}else{cd='';cl='';}
if(dataTip!=2&&dataTip!=6)
$('ul#merge').append('<li class="'+cl+'"><input type="radio" id="'+id+'_radio"'+ch+' name="merge" value="'+id+'" onclick="merge_labels();"><label style="display: inline;" for="'+id+'_radio">'+label+'</label></li>');});}
function merge_labels(){var radios=$('ul#merge input');radios.each(function(){if($(this).is(":checked")){$(this).closest('li').addClass('inv_field_enabled');}else{$(this).closest('li').removeClass('inv_field_enabled');}});}
function initAppendMergeConnectedSortable(){if($(window).width()<850)
return false;$('ul.connectedSortable').sortable({update:function(){append_refreshFieldsList();},forcePlaceholderSize:'true',tolerance:'pointer',placeholder:'inv_field_placeholder'});};function charts_init(){$("#link_chart_color").on("click",function(event){if(event.button!=0){return true;}
analiza_show_chart_color();return false;});$('.chart_holder,.tableChart').on({mouseenter:function(){$(this).find('.chart_settings').stop().animate({opacity:1},600);},mouseleave:function(){$(this).find('.chart_settings').stop().animate({opacity:0},600);}});$("#dsp_link, #link_variableType_profile_setup").live("click",function(event){if(event.button!=0){return true;}
dataSettingProfileAction('showProfiles');return false;});$("#link_variableType_profile_remove").live("click",function(event){if(event.button!=0){return true;}
dataSettingProfileAction('removeKategoriesProfile');return false;});$(".chart_profiles").live('click',function(event){var $target=$(event.target);if($target.hasClass('option')){var skin=$target.attr('value');$("#div_chart_settings_profiles").load('ajax.php?t=charts&a=analiza_change_chart_color',{anketa:srv_meta_anketa_id,podstran:srv_meta_podstran,skin:skin});}});}
function changeChart(spid,spr_type,what,loop){if(what=='show_legend'||what=='barLabel'||what=='barLabelSmall'||what=='show_numerus'||what=='show_avg'||what=='scale_limit'||what=='open_up'||what=='open_down'||what=='3d_pie'||what=='hideEmptyVar'||what=='noFixedScale'){if(document.getElementById('chart_'+what+'_'+spid+'_loop_'+loop).checked){var value=1;}
else{var value=0;}}
else{var value=document.getElementById('chart_'+what+'_'+spid+'_loop_'+loop).value;}
if($("#chart_settings_basic_"+spid+'_loop_'+loop).css("display")=='none'){var settings_mode=1;}
else{var settings_mode=0;}
$.post('ajax.php?t=charts&a=change_chart',{anketa:srv_meta_anketa_id,spid:spid,loop:loop,spr_type:spr_type,what:what,value:value,settings_mode:settings_mode},function(data){$('#chart_'+spid+'_loop_'+loop).replaceWith(data);});}
function changeOther(spid,what,loop){if(document.getElementById('chart_other_'+what+'_'+spid+'_loop_'+loop).checked){var value=1;}
else{var value=0;}
$('#chart_other_text_'+spid+'_loop_'+loop).load('ajax.php?t=charts&a=change_other',{anketa:srv_meta_anketa_id,spid:spid,loop:loop,what:what,value:value});}
function changeChartHq(){if($('#chart_hq').is(':checked')){var value=1;}
else{var value=0;}
if(value==1){$.post('ajax.php?a=outputLanguageNote',{note:'srv_chart_hq_warning'},function(lang_note){if(confirm(lang_note)){$.post('ajax.php?t=charts&a=change_hq_settings',{anketa:srv_meta_anketa_id,value:value,podstran:'charts'},function(){window.location.reload();});}
else{$('#chart_hq').attr('checked',false);}});}
else{$.post('ajax.php?t=charts&a=change_hq_settings',{anketa:srv_meta_anketa_id,value:value,podstran:'charts'},function(){window.location.reload();});}}
function changeTableChart(chartID,podstran,what){if(what=='barLabel'||what=='barLabelSmall'||(what=='sort'&&podstran!='break')||what=='show_numerus'){if(document.getElementById('tablechart_'+what+'_'+chartID).checked){var value=1;}
else{var value=0;}}
else if(what=='hq'){if(document.getElementById('tablechart_'+what+'_'+chartID).checked){var value=3;}
else{var value=1;}}
else{var value=document.getElementById('tablechart_'+what+'_'+chartID).value;}
var url=window.location.search.substring(1);var url_variables=url.split('&');for(var i=0;i<url_variables.length;i++)
{var sParameterName=url_variables[i].split('=');if(sParameterName[0]=='m')
{var location=sParameterName[1];}}
if(location=='break'){$('#tableChart_'+chartID).load('ajax.php?t=table_chart&a=change_chart',{anketa:srv_meta_anketa_id,chartID:chartID,podstran:podstran,what:what,value:value});}
else{$.post('ajax.php?t=table_chart',{anketa:srv_meta_anketa_id,chartID:chartID,podstran:podstran,what:what,value:value},function(){window.location.reload();});}}
function showTableChart(podstran){var showChart=$("#showChart").is(':checked');if(podstran=='crosstab'){$.post("ajax.php?t=crosstab&a=change_show_chart",{anketa:srv_meta_anketa_id,showChart:showChart},function(){change_crosstab();});}
else if(podstran=='mean'){$.post("ajax.php?t=means&a=changeMeansShowChart",{anketa:srv_meta_anketa_id,showChart:showChart},function(response){change_means();});}
else if(podstran=='hierarhy_mean'){$.post("ajax.php?t=hierarhy-means&a=changeMeansShowChart",{anketa:srv_meta_anketa_id,showChart:showChart},function(response){change_hierarhy_means();});}
else if(podstran=='ttest'){$.post("ajax.php?t=ttest&variableChange",{anketa:srv_meta_anketa_id,showChart:showChart},function(){window.location.reload();});}}
function clearCache(){$.post('ajax.php?t=charts&a=clear_cache',{anketa:srv_meta_anketa_id});}
function chartAdvancedSettings(spremenljivka,tab,loop){var id='#chart_'+spremenljivka+'_loop_'+loop;$('#fade').fadeTo('slow',1,function(){$('#chart_float_editing').html('').show().css('visibility','hidden');$.post('ajax.php?t=charts&a=chart_advanced_settings',{spid:spremenljivka,loop:loop,anketa:srv_meta_anketa_id},function(data){$('#chart_float_editing').html(data).css('visibility','visible');var height=$('#chartSettingsArea1').height();if(height<290){height=290;}
$('#chart_float_editing').height(height+145).show();if(tab==2||tab==3||tab==4){chartTabAdvancedSettings(tab);}});});}
function chartCloseAdvancedSettings(){$('#fade').fadeOut('slow');$('.chartSettingsArea').css('visibility','hidden');$('#chart_float_editing').css('visibility','hidden');}
function chartSaveAdvancedSettings(spid,loop){if($("#chart_settings_basic_"+spid+"_loop_"+loop).css("display")=='none'){var settings_mode=1;}
else{var settings_mode=0;}
var form=$("form[name=chart_advanced_settings]").serialize()+'&settings_mode='+settings_mode;var checkEmpty=chartAdvancedSettingsLimitEmpty();if(checkEmpty==true){genericAlertPopup('srv_chart_num_limit_warning');}
else{$.post('ajax.php?t=charts&a=chart_save_advanced_settings',form,function(data){$('#fade').fadeOut('slow');$('.chartSettingsArea').css('visibility','hidden');$('#chart_float_editing').css('visibility','hidden');$('#chart_'+spid+'_loop_'+loop).html(data);});}}
function chartTabAdvancedSettings(tab){$('.chartSettingsArea').addClass("displayNone");$('.chartTab').removeClass('active');$('#chartSettingsArea'+tab).removeClass("displayNone");$('#chartTab'+tab).addClass('active');}
function chartAdvancedSettingsSkala(spid,skala,loop){$.post('ajax.php?t=charts&a=chart_advanced_settings_skala',{spid:spid,loop:loop,skala:skala,anketa:srv_meta_anketa_id},function(){window.location.reload();});}
function chartAdvancedSettingsSetColor(skin){var colors=new Array();if(skin.charAt(0)=='#'){colors=skin.split('_');}
else{switch(skin){case'1ka':colors=["#1e88e5","#ffa608","#48e5c2","#f25757","#754668","#f8ca00","#ff70a6"];break;case'lively':colors=["#e9090d","#0417e3","#00ff08","#fff703","#ff9500","#00fbff","#a600ff"];break;case'mild':colors=["#bce02e","#e0642e","#e0d62e","#2e97e0","#b02ee0","#00fbff","#5ce02e"];break;case'office':colors=["#4f81bd","#c0504d","#9bbb59","#8064a2","#4bacc6","#f79646","#92a9cf"];break;case'pastel':colors=["#799f0b","#d7a125","#9264be","#188484","#4cc68b","#8a8823","#6c99d2"];break;case'green':colors=["#a8bc38","#b8c948","#c8d658","#d8e468","#e8e178","#ffff00","#e803b6"];break;case'blue':colors=["#1e88e5","#4f97ea","#6ea6ee","#89b5f3","#a2c4f7","#bad3fb","#d1e3ff"];break;case'red':colors=["#ff0000","#dc0202","#b90404","#960606","#730808","#ffff00","#e803b6"];break;case'multi':colors=["#8c0000","#f00800","#ff8a82","#f2c4c8","#0b0387","#0400fc","#9794f2"];break;default:break;}}
for(var i=0;i<7;i++){var value=colors[i];$('#color'+(i+1)).attr("value",value);}
var fb=$.farbtastic('#picker');$('.colorwell').each(function(){fb.linkTo(this);});}
function chartAdvancedSettingsLimitSwitch(mode){if(mode==1){$("#chart_number_limits_basic").hide('fast');$("#chart_number_limits_advanced").show('fast');}
else{$("#chart_number_limits_advanced").hide('fast');$("#chart_number_limits_basic").show('fast');}}
function chartAdvancedSettingsLimitInterval(interval,spid,loop){$("#chartSettingsArea4").load('ajax.php?t=charts&a=analiza_num_limit_interval',{anketa:srv_meta_anketa_id,podstran:srv_meta_podstran,spid:spid,loop:loop,interval:interval});}
function chartAdvancedSettingsLimitLabel(interval,spid,loop){var min=$("#interval_"+interval+"_min_"+spid+"_loop_"+loop).val();var max=$("#interval_"+interval+"_max_"+spid+"_loop_"+loop).val();$("#interval_"+interval+"_label_"+spid+"_loop_"+loop).val(min+"-"+max);}
function chartAdvancedSettingsLimitCheck(interval,spid,loop){var min=parseFloat($("#interval_"+interval+"_min_"+spid+"_loop_"+loop).val());var max=parseFloat($("#interval_"+interval+"_max_"+spid+"_loop_"+loop).val());if(interval>0)
var prev_max=parseFloat($("#interval_"+(parseInt(interval)-1)+"_max_"+spid+"_loop_"+loop).val());if($("#interval_"+(parseInt(interval)+1)+"_min_"+spid+"_loop_"+loop).length!=0)
var next_min=parseFloat($("#interval_"+(parseInt(interval)+1)+"_min_"+spid+"_loop_"+loop).val());if(min>=max&&min!=''&&max!=''){$("#chart_advanced_warning_1_interval_"+interval).show();}
else{$("#chart_advanced_warning_1_interval_"+interval).hide();}
if(prev_max>=min&&prev_max!=''&&min!=''){$("#chart_advanced_warning_2_interval_"+interval).show();}
else{$("#chart_advanced_warning_2_interval_"+interval).hide();}
if(next_min<=max&&next_min!=''&&max!=''){$("#chart_advanced_warning_2_interval_"+(parseInt(interval)+1)).show();}
else{$("#chart_advanced_warning_2_interval_"+(parseInt(interval)+1)).hide();}}
function chartAdvancedSettingsLimitEmpty(){var checkEmpty=false;if($("#chartSettingsArea4").length!=0){if($('input[name=chart_number_limits_switch]:checked').val()=='1'){textboxes=$('#chart_number_limits_advanced').find('.advanced_interval');textboxes.each(function(){if(this.value.length==0){checkEmpty=true;return false;}});}}
return checkEmpty;}
function tableChartAdvancedSettings(chartID,podstran){$('#fade').fadeTo('slow',1,function(){$('#chart_float_editing').html('').show().css('visibility','hidden');$.post('ajax.php?t=table_chart&a=table_chart_advanced_settings',{chartID:chartID,podstran:podstran,anketa:srv_meta_anketa_id},function(data){$('#chart_float_editing').html(data).css('visibility','visible');var height=$('#chartSettingsArea1').height();if(height<290){height=290;}
$('#chart_float_editing').height(height+145).show();});});}
function tableChartSaveAdvancedSettings(chartID){var url=window.location.search.substring(1);var url_variables=url.split('&');for(var i=0;i<url_variables.length;i++)
{var sParameterName=url_variables[i].split('=');if(sParameterName[0]=='m')
{var location=sParameterName[1];}}
if(location=='break'){var form=$("form[name=table_chart_advanced_settings]").serializeArray();$('#tableChart_'+chartID).load('ajax.php?t=table_chart&a=chart_reload_advanced_settings',form,function(data){$('#fade').fadeOut('slow');$('.chartSettingsArea').css('visibility','hidden');$('#chart_float_editing').css('visibility','hidden');});}
else{var form=$("form[name=table_chart_advanced_settings]").serialize();$.post('ajax.php?t=table_chart&a=chart_save_advanced_settings',form,function(data){$('#fade').fadeOut('slow');$('.chartSettingsArea').css('visibility','hidden');$('#chart_float_editing').css('visibility','hidden');window.location.reload();});}}
function edit_labels(val){if(val==0){$('.chart_editing :input').attr('disabled',true);$('#title_edit').addClass('gray');}
else{$('.chart_editing :input').removeAttr('disabled');$('#title_edit').removeClass('gray');}}
function chartSwitchSettings(spid,mode,loop){if(mode==1){$("#chart_settings_advanced_"+spid+"_loop_"+loop).show();$("#chart_settings_basic_"+spid+"_loop_"+loop).hide();$("#switch_left_"+spid+"_loop_"+loop).addClass('non-active');$("#switch_right_"+spid+"_loop_"+loop).removeClass('non-active');$("#switch_middle_"+spid+"_loop_"+loop).attr('class','rightHighlight');}
else{$("#chart_settings_basic_"+spid+"_loop_"+loop).show();$("#chart_settings_advanced_"+spid+"_loop_"+loop).hide();$("#switch_left_"+spid+"_loop_"+loop).removeClass('non-active');$("#switch_right_"+spid+"_loop_"+loop).addClass('non-active');$("#switch_middle_"+spid+"_loop_"+loop).attr('class','leftHighlight');}}
function analiza_show_chart_color(){$('#fade').fadeTo('slow',1);$("#div_chart_settings_profiles").load('ajax.php?t=charts&a=analiza_show_chart_color',{anketa:srv_meta_anketa_id,podstran:srv_meta_podstran},function(){$("#div_chart_settings_profiles").show(200);var skin=$("#chart_skin :selected").val();if(skin!=-1){$("#div_chart_skin_preview_"+skin).show();}});}
function changeChartGlobalSettings(what,value){if(what=='numbering'||what=='frontpage'||what=='otherTables'||what=='textTables'){if($('#chart_'+what).is(':checked')){value=1;}
else{value=0;}}
$.post('ajax.php?t=charts&a=change_global_settings',{anketa:srv_meta_anketa_id,what:what,value:value,podstran:'charts'});}
function change_chart_color(value){if(value==-1){$("#div_chart_skin_previews").hide();$("#chart_custom_skin").show();}
else{$("#chart_custom_skin").hide();var skin=$("#chart_skin :selected").val();$("#div_chart_skin_previews").show(200,function(){$("#div_chart_skin_preview_"+skin).show();});}}
function close_chartColor(){$("#div_chart_settings_profiles").fadeOut();$("#div_chart_skin_previews").fadeOut();$("#fade").fadeOut();}
function save_chartColor(){var what='skin';var value=$(".chart_profiles .active").attr('value');if($(".chart_profiles .active").parent().attr('id')=='chart_profiles_custom'){colors='';for(var i=0;i<7;i++){colors=colors+document.getElementById('color'+(i+1)).value;if(i<6){colors=colors+"_";}}
$.post('ajax.php?t=charts&a=editSkin',{anketa:srv_meta_anketa_id,id:value,colors:colors},function(){$.post('ajax.php?t=charts&a=save_global_settings',{anketa:srv_meta_anketa_id,what:what,value:value,podstran:'charts'},function(){var srv_site_url=$("#srv_site_url").val();srv_site_url+='admin/survey/index.php?anketa='+srv_meta_anketa_id+'&a=analysis&m=charts&refresh=1';window.location.href=srv_site_url;});});}
else{$.post('ajax.php?t=charts&a=save_global_settings',{anketa:srv_meta_anketa_id,what:what,value:value,podstran:'charts'},function(){var srv_site_url=$("#srv_site_url").val();srv_site_url+='admin/survey/index.php?anketa='+srv_meta_anketa_id+'&a=analysis&m=charts';window.location.href=srv_site_url;});}}
function chart_skin_action(action){if(action=='show_rename'){$("#dsp_cover_div").show();$("#renameChartSkin").show();}
else if(action=='cancel_rename'){$("#dsp_cover_div").hide();$("#renameChartSkin").hide();}
else if(action=='rename'){var id=$(".chart_profiles .active").attr('value');var name=$("#renameChartSkinName").val();$("#div_chart_settings_profiles").load('ajax.php?t=charts&a=renameSkin',{anketa:srv_meta_anketa_id,id:id,name:name},function(){$("#renameChartSkin").hide();$("#dsp_cover_div").fadeOut();});}
else if(action=='show_delete'){$("#dsp_cover_div").show();$("#deleteChartSkin").show();}
else if(action=='cancel_delete'){$("#dsp_cover_div").hide();$("#deleteChartSkin").hide();}
else if(action=='delete'){var id=$(".chart_profiles .active").attr('value');$("#div_chart_settings_profiles").load('ajax.php?t=charts&a=deleteSkin',{anketa:srv_meta_anketa_id,id:id},function(){$("#deleteChartSkin").hide();$("#dsp_cover_div").fadeOut();});}
else if(action=='show_new'){$("#dsp_cover_div").show();$("#newChartSkin").show();}
else if(action=='cancel_new'){$("#dsp_cover_div").hide();$("#newChartSkin").hide();}
else if(action=='new'){var name=$("#newChartSkinName").val();var colors='';for(var i=0;i<7;i++){colors=colors+document.getElementById('color'+(i+1)).value;if(i<6){colors=colors+"_";}}
$("#div_chart_settings_profiles").load('ajax.php?t=charts&a=newSkin',{anketa:srv_meta_anketa_id,name:name,colors:colors},function(){$("#newChartSkin").hide();$("#dsp_cover_div").fadeOut();});}}
function checkNumber(field,cela,dec,absolute,min,max){var val=field.value;var okval='';var decimal=false;var separator=false;for(var i=0;i<val.length;i++){if(val.charAt(i)!=' '&&val.charAt(i)>=0&&val.charAt(i)<=9&&(absolute?!(i==0&&val.charAt(i)==0):true)){if(!decimal){if(cela>0){okval=okval+val.charAt(i);cela=cela-1;}}else{if(dec>0){okval=okval+val.charAt(i);dec=dec-1;}}}else if(val.charAt(i)=='.'||val.charAt(i)==','){if(i==0||dec==0)
break;if(!separator)
okval=okval+'.';separator=true;decimal=true;}else if(!absolute&&i==0&&val.charAt(i)=='-'){okval=okval+'-';}}
if(min&&parseFloat(okval)<min)
field.value=min;else if(max&&parseFloat(okval)>max)
field.value=max;else if(val!=okval)
field.value=okval;};var global_expanded=0;function creport_init(){global_expanded=$("#creport_expanded").val();$('.report_element').live('mouseover',function(event){$('#custom_report_sortable').sortable({items:'li.report_element_standard, li.report_element_break',handle:'.report_element_head',opacity:0.8,revert:true,create:function(){$('#custom_report_sortable').css('min-height',$('#custom_report_sortable').height());},stop:function(){$.post('ajax.php?t=custom_report&a=change_order',{anketa:srv_meta_anketa_id,sortable:$('#custom_report_sortable').sortable('serialize')});}});});$(".report_element").live({mouseenter:function(){$(this).addClass('hover');$(this).find('.report_element_head').addClass('hover');},mouseleave:function(){$(this).removeClass('hover');$(this).find('.report_element_head').removeClass('hover');}});$(".report_element_separator").live({mouseenter:function(){$(this).find('.add_element').stop().animate({opacity:1},500);},mouseleave:function(){$(this).find('.add_element').stop().animate({opacity:0},500);}});$(".report_element_head").live("click",function(event){var element=$(this).parent();var id=$(element).attr('id').substr(15);expandCustomReportElement(id);});$('div.creport_text_inline').live('focus',function(event){$(this).parent().addClass('writing');}).live('blur',function(){$(this).parent().removeClass('writing');var expanded=0;if($(this).parent().parent().hasClass('active')){expanded=1;}
var id=$(this).attr('el_id');var value=$(this).html();;$.post('ajax.php?t=custom_report&a=edit_element',{anketa:srv_meta_anketa_id,element_id:id,what:'text',value:value,expanded:expanded});});$('div.creport_title_inline').live('focus',function(event){$(this).parent().addClass('writing');}).live('blur',function(){$(this).parent().removeClass('writing');var value=$(this).html();;$.post('ajax.php?t=custom_report&a=edit_title',{anketa:srv_meta_anketa_id,value:value});});$("#creport_profile_setting_text").live("click",function(event){if(event.button!=0){return true;}
showCReportProfiles(false);});$(".creport_profiles").live('click',function(event){var $target=$(event.target);if($target.hasClass('option')){var id=$target.attr('value');var author=$target.attr('author');$("#div_creport_settings_profiles").load('ajax.php?t=custom_report&a=creport_change_profile',{anketa:srv_meta_anketa_id,id:id,author:author});}});$("#creport_profile_setting_plus").live("click",function(event){creport_profile_action('show_new');});$("#creport_profile_setting_edit").live("click",function(event){showCReportProfiles();});}
function addCustomReportElement(type,sub_type,spr1,spr2,with_text){var element=document.getElementById(type+'-'+sub_type+'-'+spr1+'-'+spr2);var insert=$(element).hasClass('star_on')?0:1;if(insert==1){$(element).removeClass('star_off');$(element).addClass('star_on');$(element).parent().attr('title',lang['srv_custom_report_inserted_title']);if(with_text==1){var insert_text=document.getElementById(type+'-'+sub_type+'-'+spr1+'-'+spr2+'_insert');var inserted_text=document.getElementById(type+'-'+sub_type+'-'+spr1+'-'+spr2+'_inserted');$(insert_text).hide();$(inserted_text).show();}}
else{$(element).removeClass('star_on');$(element).addClass('star_off');$(element).parent().attr('title',lang['srv_custom_report_insert_title']);if(with_text==1){var insert_text=document.getElementById(type+'-'+sub_type+'-'+spr1+'-'+spr2+'_insert');var inserted_text=document.getElementById(type+'-'+sub_type+'-'+spr1+'-'+spr2+'_inserted');$(inserted_text).hide();$(insert_text).show();}}
$.post('ajax.php?t=custom_report&a=add_element',{anketa:srv_meta_anketa_id,type:type,sub_type:sub_type,spr1:spr1,spr2:spr2,insert:insert},function(response){if(response=='1'){$('#fade').fadeTo('slow',1,function(){$('#custom_report_alert').show();$('#custom_report_alert').load('ajax.php?t=custom_report&a=first_alert',{anketa:srv_meta_anketa_id});});}});}
function addEmptyCustomReportElement(id){$('#anketa_custom_report').load('ajax.php?t=custom_report&a=add_empty_element',{anketa:srv_meta_anketa_id,expanded:global_expanded,element_id:id},function(){var added_el=$('#added_element').attr('el_id');var element=document.getElementById('report_element_'+added_el);if(!$(element).find('.report_element_head').hasClass('active')){$(element).addClass('active');$("#report_element_"+added_el).load('ajax.php?t=custom_report&a=expand_element',{anketa:srv_meta_anketa_id,element_id:added_el,expanded:1});}});}
function addTextCustomReportElement(id){$('#anketa_custom_report').load('ajax.php?t=custom_report&a=add_text_element',{anketa:srv_meta_anketa_id,expanded:global_expanded,element_id:id},function(){var added_el=$('#added_element').attr('el_id');var element=document.getElementById('report_element_'+added_el);if(!$(element).find('.report_element_head').hasClass('active')){$(element).addClass('active');$("#report_element_"+added_el).load('ajax.php?t=custom_report&a=expand_element',{anketa:srv_meta_anketa_id,element_id:added_el,expanded:1},function(){$('#report_element_'+added_el).find('.creport_text_inline').focus();});}
else{$('#report_element_'+added_el).find('.creport_text_inline').focus();}});}
function addPBCustomReportElement(id){$('#anketa_custom_report').load('ajax.php?t=custom_report&a=add_pb_element',{anketa:srv_meta_anketa_id,expanded:global_expanded,element_id:id});}
function deleteCustomReportElement(element_id){$('#anketa_custom_report').load('ajax.php?t=custom_report&a=delete_element',{anketa:srv_meta_anketa_id,expanded:global_expanded,element_id:element_id});event.stopPropagation();}
function expandCustomReportElement(id){var element=document.getElementById('report_element_'+id);if($(element).find('.report_element_head').hasClass('active')){var expanded=0;$(element).removeClass('active');}
else{var expanded=1;$(element).addClass('active');}
$("#report_element_"+id).load('ajax.php?t=custom_report&a=expand_element',{anketa:srv_meta_anketa_id,element_id:id,expanded:expanded});}
function editCustomReportElement(id,what,value){$('#report_element_'+id).load('ajax.php?t=custom_report&a=edit_element',{anketa:srv_meta_anketa_id,element_id:id,what:what,value:value});}
function editCustomReportTTestVar(id){var what='spr1';var value=document.getElementById('report_element_spr_id_'+id).value;$('input:checkbox.subTtest_'+id).each(function(){value=value+(this.checked?'-'+$(this).val():"");});$('#report_element_'+id).load('ajax.php?t=custom_report&a=edit_element',{anketa:srv_meta_anketa_id,element_id:id,what:what,value:value});}
function copyCustomReportElement(id){$('#anketa_custom_report').load('ajax.php?t=custom_report&a=copy_element',{anketa:srv_meta_anketa_id,expanded:global_expanded,element_id:id});event.stopPropagation();}
function printCustomReportElement(ime,id){var divToPrint=document.getElementById(id);newWin=window.open('',ime,'scrollbars=1');newWin.document.write('<html><head><title>Okno za tiskanje - '+ime+'</title>');newWin.document.write('<link rel="stylesheet" href="css/print.css">');newWin.document.write('<link rel="stylesheet" href="css/style_print.css" media="print">');newWin.document.write('</head><body>');newWin.document.write('<div id="printIcon">');newWin.document.write('<a href="#" onclick="window.print(); return false;">Natisni</a>');newWin.document.write('</div>');newWin.document.write(divToPrint.innerHTML);newWin.document.write('</body></html>');newWin.focus();newWin.document.close();event.stopPropagation();}
function addCustomReportAllElementsAlert(type){if(type>0){$('#fade').fadeTo('slow',1,function(){$('#custom_report_alert').show();$('#custom_report_alert').load('ajax.php?t=custom_report&a=all_elements_alert',{anketa:srv_meta_anketa_id,type:type});});}}
function addCustomReportAllElementsClose(){$('#fade').fadeOut('slow',function(){$('#custom_report_alert').hide();});}
function addCustomReportAllElements(type){if(type==9){var sub_type=$('input:radio[name=break_charts]:checked').val();var spr=$('#breakSpremenljivka').val();var seq=$('option:selected','#breakSpremenljivka').attr('seq');var spr1=seq+'-'+spr+'-undefined';$.post('ajax.php?t=custom_report&a=all_elements_add',{anketa:srv_meta_anketa_id,type:type,sub_type:sub_type,spr1:spr1},function(){var srv_site_url=$("#srv_site_url").val();srv_site_url+='admin/survey/index.php?anketa='+srv_meta_anketa_id+'&a=analysis&m=analysis_creport';window.location.href=srv_site_url;});}
else{$.post('ajax.php?t=custom_report&a=all_elements_add',{anketa:srv_meta_anketa_id,type:type},function(){var srv_site_url=$("#srv_site_url").val();srv_site_url+='admin/survey/index.php?anketa='+srv_meta_anketa_id+'&a=analysis&m=analysis_creport';window.location.href=srv_site_url;});}}
function creport_load_editor(_this){$(_this).css('display','none');var el=$(_this).parent().find('.creport_text_inline');var el_id=el.attr('el_id');el.replaceWith('<textarea id="report_element_texteditor_'+el_id+'" class="creport_textarea" style="width:100%">'+el.html()+'</textarea>'+'<div class="button_holder below"><button class="medium blue" onclick="creport_save_editor(\''+el_id+'\'); return false;">'+lang['save']+'</button></div>');create_editor('report_element_texteditor_'+el_id);}
function creport_save_editor(el_id){get_editor_close('report_element_texteditor_'+el_id);var el=$('#report_element_texteditor_'+el_id);var parent=el.parent();el.replaceWith('<div class="creport_text_inline" contenteditable="true" el_id="'+el_id+'">'+el.html+'</div>');parent.find('span.buttonwrapper').remove();editCustomReportElement(el_id,'text',el.val());}
function doArchiveCReport(){if($("#custom_report_elements").length>0&&$("#custom_report_elements").html()!=''){$("#fullscreen").load('ajax.php?a=doArchiveAnaliza',{anketa:srv_meta_anketa_id,podstran:srv_meta_podstran},function(){$('#fade').fadeTo('slow',1);$('#fullscreen').show();});}else{genericAlertPopup('alert_no_archive_tables');}}
function submitArchiveCReport(){if($("#custom_report_elements").html().length>0){var name=$("#newAnalysisArchiveName").val();var note=$("#newAnalysisArchiveNote").val();var access=$("[name=newAnalysisArchiveAccess]:checked").val();var duration=$("#newAnalysisArchiveDuration").val();var durationType=$("[name=newAADurationType]:checked").val();$("#fullscreen").load('ajax.php?a=submitArchiveAnaliza',{anketa:srv_meta_anketa_id,podstran:srv_meta_podstran,name:name,note:note,access:access,duration:duration,durationType:durationType},function(){$("#fullscreen").show();});}
else{genericAlertPopup('alert_no_archive_tables');}}
function createArchiveCReportBeforeEmail(){if($("#custom_report_elements").html().length>0){$.post('ajax.php?a=createArchiveBeforeEmail',{anketa:srv_meta_anketa_id,podstran:srv_meta_podstran},function(response){if(parseInt(response)>0){var aid=parseInt(response);$("#fullscreen").load('ajax.php?a=emailArchiveAnaliza',{anketa:srv_meta_anketa_id,podstran:srv_meta_podstran,aid:aid},function(){$('#fullscreen').show();});}else{if(parseInt(response)==-1){genericAlertPopup('alert_no_archive_response',response);}else{genericAlertPopup('alert_archive_error_response',response);}
$('#fullscreen').hide();$('#fade').fadeOut('slow');}});}else{genericAlertPopup('alert_no_archive_tables');}};function showCReportPreview(){var size="location=0,height=800,scrollbars=1,fullscreen=0,menubar=0,status=0,titlebar=0,toolbar=0,channelmode=0,directories=0";var recipe=window.open('','RecipeWindow',size);$.post('ajax.php?t=custom_report&a=report_preview',{anketa:srv_meta_anketa_id},function(response){recipe.document.open();recipe.document.write('<html><head><title>Predogled poro&#269;ila po meri</title>');recipe.document.write('<link rel="stylesheet" href="minify/g=css">');recipe.document.write('<link rel="stylesheet" href="css/style_print.css" media="print">');recipe.document.write('<style>');recipe.document.write('ul{margin: 16px; padding: 0; list-style-type: none;} li{margin:16px 0;} .container {margin-bottom:45px;} #navigationBottom {width: 100%; margin-bottom: 16px; padding-right: 16px;}');recipe.document.write('</style>');recipe.document.write('</head><body>');recipe.document.write(response);recipe.document.write('</body></html>');recipe.document.close();recipe.focus();return false;});}
function showCReportProfiles(){$('#fade').fadeTo('slow',1);$("#div_creport_settings_profiles").load('ajax.php?t=custom_report&a=creport_show_profiles',{anketa:srv_meta_anketa_id},function(){$("#div_creport_settings_profiles").show(200);});return false;}
function add_creport_profile(){$('#fade').fadeTo('slow',1);$("#newCReportProfile").show();}
function delete_creport_profile(){$('#fade').fadeTo('slow',1);$("#deleteCReportProfile").show();}
function close_creport_profile(){$("#div_creport_settings_profiles").fadeOut();$("#fade").fadeOut();}
function use_creport_profile(){var value=$(".creport_profiles .active").attr('value');var author=$(".creport_profiles .active").attr('author');$.post('ajax.php?t=custom_report&a=use_creport_profile',{anketa:srv_meta_anketa_id,id:value,author:author},function(){var srv_site_url=$("#srv_site_url").val();srv_site_url+='admin/survey/index.php?anketa='+srv_meta_anketa_id+'&a=analysis&m=analysis_creport&expanded='+global_expanded;window.location.href=srv_site_url;});}
function change_creport_profile(profile_id,author){$.post('ajax.php?t=custom_report&a=use_creport_profile',{anketa:srv_meta_anketa_id,id:profile_id,author:author},function(){var srv_site_url=$("#srv_site_url").val();srv_site_url+='admin/survey/index.php?anketa='+srv_meta_anketa_id+'&a=analysis&m=analysis_creport&expanded='+global_expanded;window.location.href=srv_site_url;});}
function creport_profile_action(action){if(action=='show_rename'){$("#dsp_cover_div").show();$("#renameCReportProfile").show();var title=$("#creport_profiles").find('.active').html();$("#renameCReportProfileName").val(title);}
else if(action=='cancel_rename'){$("#dsp_cover_div").hide();$("#renameCReportProfile").hide();}
else if(action=='rename'){var id=$(".creport_profiles .active").attr('value');var name=$("#renameCReportProfileName").val();$("#div_creport_settings_profiles").load('ajax.php?t=custom_report&a=renameProfile',{anketa:srv_meta_anketa_id,id:id,name:name},function(){$("#renameCReportProfile").hide();$("#dsp_cover_div").fadeOut();});}
else if(action=='show_delete'){if($("#div_creport_settings_profiles").is(':visible'))
$("#dsp_cover_div").show();else
$('#fade').fadeTo('slow',1);$("#deleteCReportProfile").show();var title=$("#creport_profiles").find('.active').html();$("#deleteCReportProfileName").html(title);}
else if(action=='cancel_delete'){if($("#div_creport_settings_profiles").is(':visible')){$("#deleteCReportProfile").hide();$("#dsp_cover_div").hide();}
else{$("#deleteCReportProfile").hide();$("#fade").fadeOut();}}
else if(action=='delete'){var id=$(".creport_profiles .active").attr('value');$("#div_creport_settings_profiles").load('ajax.php?t=custom_report&a=deleteProfile',{anketa:srv_meta_anketa_id,id:id},function(){$("#deleteCReportProfile").hide();$("#dsp_cover_div").fadeOut();});}
else if(action=='show_new'){if($("#div_creport_settings_profiles").is(':visible'))
$("#dsp_cover_div").show();else
$('#fade').fadeTo('slow',1);$("#newCReportProfile").show();}
else if(action=='cancel_new'){if($("#div_creport_settings_profiles").is(':visible')){$("#newCReportProfile").hide();$("#dsp_cover_div").hide();}
else{$("#newCReportProfile").hide();$("#fade").fadeOut();}}
else if(action=='new'){var name=$("#newCReportProfileName").val();var comment=$("#newCReportProfileComment").val();$.post('ajax.php?t=custom_report&a=newProfile',{anketa:srv_meta_anketa_id,name:name,comment:comment},function(){var srv_site_url=$("#srv_site_url").val();srv_site_url+='admin/survey/index.php?anketa='+srv_meta_anketa_id+'&a=analysis&m=analysis_creport';window.location.href=srv_site_url;});}
if(action=='show_share'){var id=$(".creport_profiles .active").attr('value');$("#dsp_cover_div").show();$("#shareCReportProfile").load('ajax.php?t=custom_report&a=shareProfileShow',{anketa:srv_meta_anketa_id,id:id},function(){$("#shareCReportProfile").show(200);});}
else if(action=='cancel_share'){$("#dsp_cover_div").hide();$("#shareCReportProfile").hide();}
else if(action=='share'){var id=$(".creport_profiles .active").attr('value');var users=[];$("#shareCReportProfile input:checked").each(function(){users.push($(this).val());});$("#div_creport_settings_profiles").load('ajax.php?t=custom_report&a=shareProfile',{anketa:srv_meta_anketa_id,id:id,users:users},function(){$("#shareCReportProfile").hide();$("#dsp_cover_div").fadeOut();});}}
function creport_profile_comment(value){$.post('ajax.php?t=custom_report&a=edit_profile_comment',{anketa:srv_meta_anketa_id,value:value});};var srv_meta_anketa_id=$("#srv_meta_anketa").val();function preveri_nove_stevilke(){$.timer(30000,function(timer){$('#preveri_stevilke').load('ajax.php?t=telefon&a=preveri_stevilke',{anketa:srv_meta_anketa_id});timer.stop();});}
function tel_date_filter(){var dateFrom=$('#tel_dash_dateFrom').val();var dateFromText='';if(dateFrom!='')
dateFromText='&date_from='+dateFrom;var dateTo=$('#tel_dash_dateTo').val();var dateToText='';if(dateTo!='')
dateToText='&date_to='+dateTo;var srv_site_url=$("#srv_site_url").val();srv_site_url+='admin/survey/index.php?anketa='+srv_meta_anketa_id+'&a=telephone&m=dashboard'+dateFromText+dateToText;window.location.href=srv_site_url;}
function showPhnList(pid){$("#globalSettingsInner").load('ajax.php?t=telephone&m=recipients_lists',{anketa:srv_meta_anketa_id,pid:pid});}
function phn_settings_save(){var form_serialize=$("#phn_settings").serializeArray();form_serialize[form_serialize.length]={name:'anketa',value:srv_meta_anketa_id}
$("#globalSettingsInner").load('ajax.php?t=telephone&m=settings_save',form_serialize,function(){actionNotePopup('success_save','success');});}
function phn_set_sort_field(field,type){$.post('ajax.php?t=telephone&m=setSortField',{anketa:srv_meta_anketa_id,noNavi:'true',field:field,type:type},function(){$("#globalSettingsInner").load('ajax.php?t=telephone&m=view_recipients',{anketa:srv_meta_anketa_id});});}
function preveriStevilkeTimer(){$.timer(10000,function(timer){$('#preveri_stevilke').load('ajax.php?t=telephone&m=preveriStevilkeTimer',{anketa:srv_meta_anketa_id,noNavi:false});timer.stop();});}
function phn_add_recipients(){var recipients_list=$("#inv_recipients_list").val();var fields=[];var pid=$("#phn_import_list_profiles ol li.active").attr('pid');$('ul').children('li.inv_field_enabled').each(function(idx,elm){fields.push(elm.id);});if(fields.length>0){if(recipients_list.length>0){$("#globalSettingsInner").load('ajax.php?t=telephone&m=addRecipients',{anketa:srv_meta_anketa_id,pid:pid,recipients_list:recipients_list,fields:fields});$elm=$("ul.secondNavigation li.inv_ff_left_on");$elm.prev().find('a').removeClass('active');$elm.next().find('a').addClass('active');$elm.removeClass('inv_ff_left_on').addClass('inv_ff_right_on').next().next().addClass('inv_ff_left_on');}else{genericAlertPopup('srv_invitation_note1',null,'PopUpNarrow');}}else{genericAlertPopup('srv_invitation_note2',null,'PopUpNarrow');}
return true;}
function phnStartSurvey(usr_id){$.ajax({type:'POST',url:'ajax.php?t=telephone&m=startSurvey',data:{anketa:srv_meta_anketa_id,usr_id:usr_id,noNavi:'true'},success:function(return_data){return_data=jQuery.parseJSON(return_data);if(return_data.error==""&&return_data.reloadUrl!=""&&return_data.surveyUrl!=""){window.open(return_data.surveyUrl,'_blank');window.location=return_data.reloadUrl;return false;}else{genericAlertPopup('alert_parameter_datamsg');}},async:false});}
function phnNextActionChange(phnNextAction){var phnNextAction=$("input[name=phnNextAction]:checked").val();$.post('ajax.php?t=telephone&m=setNextAction',{anketa:srv_meta_anketa_id,noNavi:'true',phnNextAction:phnNextAction});}
function phnAddMarker(usr_id,marker){if(marker=='T'){window.location=('ajax.php?anketa='+srv_meta_anketa_id+'&t=telephone&m=addmark&usr_id='+usr_id+'&status='+marker+'&datetime='+$("#T_datetime").val());}else if(marker=='P'){window.location=('ajax.php?anketa='+srv_meta_anketa_id+'&t=telephone&m=addmark&usr_id='+usr_id+'&status='+marker+'&datetime='+$("#P_datetime").val());}else{window.location=('ajax.php?anketa='+srv_meta_anketa_id+'&t=telephone&m=addmark&usr_id='+usr_id+'&status='+marker);}}
function phnSetUserComment(what,usr_id){var comment=$(what).html();$.post('ajax.php?t=telephone&m=setUserComment',{anketa:srv_meta_anketa_id,noNavi:'true',usr_id:usr_id,comment:comment});}
function phnDeleteProfile(){var pid=$("#phn_import_list_profiles ol li.active").attr("pid");if(confirm(lang['srv_inv_recipients_delete_profile_confirm'])){$.post('ajax.php?t=telephone&m=deleteProfile',{anketa:srv_meta_anketa_id,pid:pid,noNavi:'true'},function(data){var new_pid=$("#phn_import_list_profiles ol li").first().attr('pid');if(new_pid==pid){var new_pid=$("#phn_import_list_profiles ol li").first().next().attr('pid');}
$("#globalSettingsInner").load('ajax.php?t=telephone&m=recipients_lists',{anketa:srv_meta_anketa_id,pid:new_pid});});}}
function phnEditProfile(inv_rid){var pid=$("#phn_import_list_profiles ol li.active").attr("pid");$('#fade').fadeTo('slow',1);$('#fullscreen').html('').fadeIn('slow');$("#fullscreen").load('ajax.php?t=telephone&m=editProfile',{anketa:srv_meta_anketa_id,pid:pid,noNavi:'true'});}
function phnUpdateProfile(){var pid=$("#rec_profile_pid").val();var profile_name=$("#rec_profile_name").val();var profile_comment=$("#rec_profile_comment").val();var profile_respondents=$("#rec_profile_respondents").val();$("#inv_error_note").addClass('hidden');$.post('ajax.php?t=telephone&m=updateProfile',{anketa:srv_meta_anketa_id,pid:pid,profile_name:profile_name,profile_comment:profile_comment,profile_respondents:profile_respondents,noNavi:'true'},function(data){data=jQuery.parseJSON(data);if(data.error=="0"){$('#fade').fadeOut('slow');$('#fullscreen').fadeOut('slow').html('');$("#globalSettingsInner").load('ajax.php?t=telephone&m=recipients_lists',{anketa:srv_meta_anketa_id,pid:pid});}else{$("#inv_error_note").html(data.msg);$("#inv_error_note").show();$("#inv_error_note").removeClass('hidden');}});}
function phnSaveProfile(){var pid=$("#phn_import_list_profiles ol li.active").attr("pid");var recipients_list=$("#inv_recipients_list").val();var fields=[];$('ul').children('li.inv_field_enabled').each(function(idx,elm){fields.push(elm.id);});$("#globalSettingsInner").load('ajax.php?t=telephone&m=saveProfile',{anketa:srv_meta_anketa_id,recipients_list:recipients_list,fields:fields,pid:pid});}
function phnGetNewProfileName(){var pid=$("#phn_import_list_profiles ol li.active").attr("pid");var recipients_list=$("#inv_recipients_list").val();var fields=[];$('ul').children('li.inv_field_enabled').each(function(idx,elm){fields.push(elm.id);});if(pid!='undefined'){if(fields.length>0){if(recipients_list.length>0){$('#fade').fadeTo('slow',1);$('#fullscreen').html('').fadeIn('slow');$("#fullscreen").load('ajax.php?t=telephone&m=getProfileName',{anketa:srv_meta_anketa_id,recipients_list:recipients_list,fields:fields,noNavi:'true',pid:pid});}else{genericAlertPopup('srv_invitation_note1',null,'PopUpNarrow');}}else{genericAlertPopup('srv_invitation_note2',null,'PopUpNarrow');}}else{genericAlertPopup('alert_invalidPID',null,'PopUpNarrow');}}
function phnSaveNewProfile(){var pid=$("#phn_import_list_profiles ol li.active").attr("pid");var recipients_list=$("#inv_recipients_list").val();var fields=[];$('ul').children('li.inv_field_enabled').each(function(idx,elm){fields.push(elm.id);});var profile_id=$("#profile_id").val();var profile_name=$("#inv_recipients_profile_name").find("#rec_profile_name").val();var profile_comment=$("#inv_recipients_profile_name").find("#rec_profile_comment").val();$("#globalSettingsInner").load('ajax.php?t=telephone&m=saveNewProfile',{anketa:srv_meta_anketa_id,recipients_list:recipients_list,fields:fields,profile_id:profile_id,profile_name:profile_name,profile_comment:profile_comment});$('#fade').fadeOut('slow');$('#fullscreen').fadeOut('slow').html('');}
function phn_new_recipients_list_change(what){if($(what).val()==0){$("#new_recipients_list_span").show();$("#rec_profile_comment").val('');}else{$("#new_recipients_list_span").hide();$("#rec_profile_comment").val($(what).find('option:selected').attr('comment'));}}
function phnGoToUser(usr_id){$("#globalSettingsInner").load('ajax.php?t=telephone&m=goToUser',{anketa:srv_meta_anketa_id,noNavi:'false',showUser:usr_id});}
function phnShowPopupAddMarker(usr_id,marker){$('#fade').fadeTo('slow',1);$('#telephone_popup').show().load('ajax.php?t=telephone&m=showPopupAddMarker',{anketa:srv_meta_anketa_id,usr_id:usr_id,marker:marker,noNavi:'true'},function(){});}
function tel_filter_recipients(){var tel_filter_value=$("#tel_rec_filter_value").val();$.post('ajax.php?t=telephone&m=set_recipient_filter',{anketa:srv_meta_anketa_id,tel_filter_value:tel_filter_value},function(){$("#globalSettingsInner").load('ajax.php?t=telephone&m=view_recipients',{anketa:srv_meta_anketa_id});});}
function phnUndoStatus(usr_id){$.post('ajax.php?t=telephone&m=undoLastStatus',{anketa:srv_meta_anketa_id,usr_id:usr_id},function(){phnGoToUser(usr_id);});}
function initTelephoneConnectedSortable(){if($(window).width()<850)
return false;$('ul.connectedSortable').sortable({update:function(){refreshFieldsList();},forcePlaceholderSize:'true',tolerance:'pointer',placeholder:'inv_field_placeholder'});};$("#profileManager_profile.select div.option").live('click',function(event){var $target=$(event.target);var pid=$target.attr('value');$("#fullscreen").load('ajax.php?t=profileManager&m=changeProfile',{anketa:srv_meta_anketa_id,pid:pid});});function profileManager_displayProfiles(){$('#fade').fadeTo('slow',1);$('#fullscreen').html('').fadeIn('slow');$("#fullscreen").load('ajax.php?t=profileManager&m=displayProfiles',{anketa:srv_meta_anketa_id});}
function profileManager_newName(pid){$("#profileManagerCoverDiv").show();$("#newProfile").show();}
function profileManager_saveNew(pid){var newName=$('#newProfileName').val();var form_serialize=$("#profileManager_form").serializeArray();form_serialize[form_serialize.length]={name:'anketa',value:srv_meta_anketa_id}
form_serialize[form_serialize.length]={name:'pid',value:pid}
form_serialize[form_serialize.length]={name:'newName',value:newName}
$("#fullscreen").load('ajax.php?t=profileManager&m=saveNew',form_serialize);}
function profileManager_save(pid,asNew){var form_serialize=$("#profileManager_form").serializeArray();form_serialize[form_serialize.length]={name:'anketa',value:srv_meta_anketa_id}
form_serialize[form_serialize.length]={name:'pid',value:pid}
form_serialize[form_serialize.length]={name:'asNew',value:asNew}
$("#fullscreen").load('ajax.php?t=profileManager&m=save',form_serialize);}
function profileManager_delete(pid){$("#fullscreen").load('ajax.php?t=profileManager&m=delete',{anketa:srv_meta_anketa_id,pid:pid});}
function profileManager_choose(pid){var form_serialize=$("#profileManager_form").serializeArray();form_serialize[form_serialize.length]={name:'anketa',value:srv_meta_anketa_id}
form_serialize[form_serialize.length]={name:'pid',value:pid}
$.post('ajax.php?t=profileManager&m=choose',form_serialize,function(){reloadData();});};function sc_display(usr_id){$('#survey-connect-disp').toggle().load('ajax.php?t=SurveyConnect&a=display',{usr_id:usr_id,anketa:srv_meta_anketa_id});};function showSurveyCondition(cid)
{var chooseProfileJSAction=$("#chooseProfileJSAction").val();$("#fullscreen").load('ajax.php?t=surveyCondition&a=showCondition',{anketa:srv_meta_anketa_id,cid:cid,surveyConditionProfileAction:chooseProfileJSAction});}
function newSurveyCondition()
{var name=$("#newSurveyConditionName").val();var chooseProfileJSAction=$("#chooseProfileJSAction").val();$.post('ajax.php?t=surveyCondition&a=newCondition',{anketa:srv_meta_anketa_id,name:name,surveyConditionProfileAction:chooseProfileJSAction},function(response)
{var data=jQuery.parseJSON(response);if(data.if_id>0)
{showSurveyCondition(data.if_id);}
else
{genericAlertPopup('alert_error_code',data.error);}})}
function deleteSurveyCondition(cid)
{var chooseProfileJSAction=$("#chooseProfileJSAction").val();$.post('ajax.php?t=surveyCondition&a=deleteCondition',{anketa:srv_meta_anketa_id,cid:cid,surveyConditionProfileAction:chooseProfileJSAction},function(response)
{var data=jQuery.parseJSON(response);if(data.error==0)
{showSurveyCondition(data.cid);if($("#surveyConditionPage").val()=='invitations')
{$("#conditionProfileNote").hide();$("#inv_rec_filter a").data('cid',0);}}
else
{genericAlertPopup('alert_error_code',data.error);}});}
function showRenameSurveyCondition(cid)
{var chooseProfileJSAction=$("#chooseProfileJSAction").val();$("#surveyConditionCover").show();$("#divConditionProfiles #renameProfileDiv").load('ajax.php?t=surveyCondition&a=showRename',{anketa:srv_meta_anketa_id,cid:cid}).show();}
function renameSurveyCondition()
{var cid=$("#divConditionProfiles #renameProfileId").val();var name=$("#divConditionProfiles #renameProfileName").val();$.post('ajax.php?t=surveyCondition&a=renameCondition',{anketa:srv_meta_anketa_id,cid:cid,name:name},function(response)
{var data=jQuery.parseJSON(response);if(data.error==0&&data.if_id>0)
{showSurveyCondition(data.if_id);}
else
{genericAlertPopup('alert_parameter_dataerrormsg');}});};function datepicker(selector,event_trigger,datetime){var datetime=datetime||false;if(datetime==true){$(selector).datetimepicker({showOtherMonths:true,selectOtherMonths:true,changeMonth:true,changeYear:true,dateFormat:"dd.mm.yy",showAnim:"slideDown",showOn:"button",buttonText:"",controlType:'select',oneLine:true,timeFormat:'HH:mm',stepMinute:5,hour:8,onSelect:function(selected,evnt){if(event_trigger){checkBranchingDate();$(selector).trigger('change');return false;}}});}
else{$(selector).datepicker({showOtherMonths:true,selectOtherMonths:true,changeMonth:true,changeYear:true,dateFormat:"dd.mm.yy",showAnim:"slideDown",showOn:"both",buttonText:"",onSelect:function(selected,evnt){if(event_trigger){checkBranchingDate();$(selector).trigger('change');return false;}}});}};function add_skupina(skupine){var spr_id=$('#skupine_spr_id').val();var text=$('input[name=skupina]').val();$.post('ajax.php?t=skupine&a=add_skupina',{anketa:srv_meta_anketa_id,spr_id:spr_id,text:text,skupine:skupine},function(response){$('#groups_table').removeClass('displayNone');$('#groups_table tr:last').after(response);$('input[name=skupina]').val('').focus();$('#passwords_table').removeClass('displayNone');$('#passwords_table tr:last').after(response);$('input[name=skupina]').val('').focus();});}
function add_skupina_enter(skupine,event){if(event.keyCode==13){add_skupina(skupine);}}
function delete_skupina(skupine,vre_id){var spr_id=$('#skupine_spr_id').val();$.post('ajax.php?t=skupine&a=delete_skupina',{anketa:srv_meta_anketa_id,skupine:skupine,spr_id:spr_id,vre_id:vre_id},function(){window.location.reload();});}
function display_add_passwords_mass(){$('#fade').fadeTo('slow',1);$("#popup_import_from_text").load('ajax.php?t=skupine&a=show_add_password_mass',{anketa:srv_meta_anketa_id});$("#popup_import_from_text").show();}
function execute_add_passwords_mass(){var spr_id=$('#skupine_spr_id').val();var passwords=$("textarea#add_passwords_mass").val().trim();$.redirect('ajax.php?t=skupine&a=add_password_mass',{anketa:srv_meta_anketa_id,spr_id:spr_id,passwords:passwords},function(){popupImportAnketaFromText_close();});};$(function(){$(".main_aapor, .read_aapor").qtip({content:lang['srv_aapor_automatic'],show:'mouseover',hide:'mouseout',position:{corner:{target:'rightMiddle',tooltip:'leftMiddle'}},style:{width:200,padding:5,background:'red',color:'black',textAlign:'center',border:{width:7,radius:5,color:'#A2D959'},tip:{corner:'leftMiddle',color:false},name:'blue'}});});function prikazi(id){if($("#prikazipriblizek").prop('checked')){console.log(id);$.post("ajax.php?t=aaporCalculation&m=priblizek",{'anketa':id},function(data,status){if(data.usable!='undefined'&&data.unusable!='undefined'&&data.partusable!='undefined'&&data.status34!='undefined'&&data.status02!='undefined'&&data.status!='undefined'){var obj=JSON.parse(data);$("input").val(0);$("input[name='complete']").val(obj.usable);$("input[name='partial']").val(obj.partusable);$("input[name='breakOff']").val(obj.unusable);$("input[name='loggedNotComplete']").val(obj.status34);$("input[name='noInvitation']").val(obj.status02);$("input[name='nothingReturned']").val(obj.status1);$("input[name='e']").val(100);$(".totalSubDatabaseSpan").text(obj.skupaj);calculateReturne();calculateRefusalIm();calculateEligible();calculateNothingKnownRespondent();}});}else{$("input[name='rq']").val('');$("input[name='complete']").val('');$("input[name='partial']").val('');$("input[name='refusalIm']").val('');$("input[name='breakOff']").val('');$("input[name='loggedNotComplete']").val('');$("input[name='nothingKnown']").val('');$("input[name='noInvitation']").val('');$("input[name='nothingReturned']").val('');$(".totalSubDatabaseSpan").text('');calculateReturne();calculateEligible();}}
function calculateReturne(){var com=$("input[name='complete']").val();var par=$("input[name='partial']").val();if($.trim(com)&&$.trim(par)){var test=(parseInt(com)+parseInt(par));console.log(test);$("input[name='rq']").val(test);calculateAll();}}
function calculateRefusal(){var refusalEx=$("input[name='refusalEx']").val();var refusalIm=$("input[name='refusalIm']").val();if($.trim(refusalEx)&&$.trim(refusalIm)){var test=parseInt(refusalEx)+parseInt(refusalIm);console.log(test);$("input[name='refusal']").val(test);calculateAll();}}
function calculateRefusalIm(){var loggedNotComplete=$("input[name='loggedNotComplete']").val();var readReceiptConfirmation=$("input[name='readReceiptConfirmation']").val();console.log(loggedNotComplete+readReceiptConfirmation);if($.trim(loggedNotComplete)&&$.trim(readReceiptConfirmation)){var test=(parseInt(loggedNotComplete)+parseInt(readReceiptConfirmation));console.log(test);$("input[name='refusalIm']").val(test);calculateRefusal();}}
function calculateNonContact(){var respondentUnavailable=$("input[name='respondentUnavailable']").val();var completedNotReturned=$("input[name='completedNotReturned']").val();if($.trim(respondentUnavailable)&&$.trim(completedNotReturned)){var test=(parseInt(respondentUnavailable)+parseInt(completedNotReturned));$("input[name='nonContact']").val(test);calculateEligible();}}
function calculateOtherEligible(){var languageBarrier=$("input[name='languageBarrier']").val();if($.trim(languageBarrier)){$("input[name='otherEligible']").val(parseInt(languageBarrier));calculateEligible();}}
function calculateEligible(){var refusal=$("input[name='refusal']").val();var breakOff=$("input[name='breakOff']").val();var nonContact=$("input[name='nonContact']").val();var otherEligible=$("input[name='otherEligible']").val();if($.trim(refusal)&&$.trim(breakOff)&&$.trim(nonContact)&&$.trim(otherEligible)){var test=parseInt(refusal)+parseInt(breakOff)+parseInt(nonContact)+parseInt(otherEligible);console.log(test);$("input[name='eligible']").val(test);calculateAll();}}
function calculateNothingKnownRespondent(){var noInvitation=$("input[name='noInvitation']").val();var nothingReturned=$("input[name='nothingReturned']").val();if($.trim(noInvitation)&&$.trim(nothingReturned)){var test=(parseInt(noInvitation)+parseInt(nothingReturned));$("input[name='nothingKnown']").val(test);calculateUnknownEligibility();}}
function calculateOtherUnknownEligibility(){var returnedUnsampledEmail=$("input[name='returnedUnsampledEmail']").val();if($.trim(returnedUnsampledEmail)){var test=(parseInt(returnedUnsampledEmail));$("input[name='otherUnknownEligible']").val(test);calculateUnknownEligibility();}}
function calculateUnknownEligibility(){var nothingKnown=$("input[name='nothingKnown']").val();var invitationReturnedUndelivered=$("input[name='invitationReturnedUndelivered']").val();var invitationReturnedForwarding=$("input[name='invitationReturnedForwarding']").val();var otherUnknownEligible=$("input[name='otherUnknownEligible']").val();if($.trim(nothingKnown)&&$.trim(invitationReturnedUndelivered)&&$.trim(invitationReturnedForwarding)&&$.trim(otherUnknownEligible)){var test=parseInt(nothingKnown)+parseInt(invitationReturnedUndelivered)+parseInt(invitationReturnedForwarding)+parseInt(otherUnknownEligible);console.log(test);$("input[name='unknownEligible']").val(test);calculateAll();}}
function calculateQuotaFilled(){var duplicateListing=$("input[name='duplicateListing']").val();if($.trim(duplicateListing)){var test=(parseInt(duplicateListing));$("input[name='quotaFilled']").val(test);calculateNotEligible();}}
function calculateNotEligible(){var selectedRespondent=$("input[name='selectedRespondent']").val();var quotaFilled=$("input[name='quotaFilled']").val();var otherNotEligible=$("input[name='otherNotEligible']").val();if($.trim(selectedRespondent)&&$.trim(quotaFilled)&&$.trim(otherNotEligible)){var test=parseInt(selectedRespondent)+parseInt(quotaFilled)+parseInt(otherNotEligible);console.log(test);$("input[name='notEligible']").val(test);calculateAll();}}
function calculateAll(){var rq=$("input[name='rq']").val();var eligible=$("input[name='eligible']").val();var unknownEligible=$("input[name='unknownEligible']").val();var notEligible=$("input[name='notEligible']").val();if($.trim(rq)&&$.trim(eligible)&&$.trim(unknownEligible)&&$.trim(notEligible)){var test=parseInt(rq)+parseInt(eligible)+parseInt(unknownEligible)+parseInt(notEligible);console.log(test);$(".totalSubSpan").text(test);}}
function getCallculationAapor(id){var refusal=$("input[name='refusal']").val();var breakOff=$("input[name='breakOff']").val();var invitationReturnedUndelivered=$("input[name='invitationReturnedUndelivered']").val();var invitationReturnedForwarding=$("input[name='invitationReturnedForwarding']").val();var otherUnknownEligible=$("input[name='otherUnknownEligible']").val();var complete=$("input[name='complete']").val();var partial=$("input[name='partial']").val();var nonContact=$("input[name='nonContact']").val();var otherEligible=$("input[name='otherEligible']").val();var nothingKnown=$("input[name='nothingKnown']").val();var e=$("input[name='e']").val();$.post("ajax.php?t=aaporCalculation",{anketa:id,refusal:refusal,breakoff:breakOff,invitationReturnedUndelivered:invitationReturnedUndelivered,invitationReturnedForwarding:invitationReturnedForwarding,otherUnknownEligible:otherUnknownEligible,complete:complete,partial:partial,nonContact:nonContact,otherEligible:otherEligible,nothingKnown:nothingKnown,e:e},function(data,status){var obj=JSON.parse(data);$("#rr1").text(obj.rr1);$("#rr2").text(obj.rr2);$("#rr3").text(obj.rr3);$("#rr4").text(obj.rr4);$("#rr5").text(obj.rr5);$("#rr6").text(obj.rr6);});};function sendNotification(){if(CKEDITOR.instances['notification']){CKEDITOR.instances['notification'].destroy();}
var recipient=$("input[name='recipient']").val();var title=$("input[name='title']").val();var notification=$("#notification").val();if($("input[name='recipient_all_slo']").is(':checked'))
var recipient_all_slo=1;else
var recipient_all_slo=0;if($("input[name='recipient_all_ang']").is(':checked'))
var recipient_all_ang=1;else
var recipient_all_ang=0;if($("input[name='force_show']").is(':checked'))
var force_show=1;else
var force_show=0;$('#notifications').load('ajax.php?t=notifications&a=sendNotification',{anketa:srv_meta_anketa_id,recipient:recipient,recipient_all_slo:recipient_all_slo,recipient_all_ang:recipient_all_ang,title:title,notification:notification,force_show:force_show,function(){if(!CKEDITOR.instances){CKEDITOR.replace['notification'];}}});}
function viewMessage(id){$('#notifications').load('ajax.php?t=notifications&a=viewMessage',{anketa:srv_meta_anketa_id,id:id});}
function resolveMessages(id){$('.sent_list').load('ajax.php?t=notifications&a=resolveMessages',{anketa:srv_meta_anketa_id,id:id});}
function showUnreadMessages(){$('#unread_notifications').load('ajax.php?t=notifications&a=viewUnreadMessages',{anketa:srv_meta_anketa_id},function(data){$('#unread_notifications').show();$('#fade').fadeTo('slow',1);});}
function closeUnreadMessages(){$('#new_notification_alert').remove();$('#fade').fadeOut('slow');$("#unread_notifications").fadeOut();}
function recipient_toggle(type){if(type=='slo'){if($("input[name='recipient_all_slo']").is(':checked')){$("input[name='recipient_custom']").attr("checked",false);$("#recipient").addClass('disabled');}}
if(type=='ang'){if($("input[name='recipient_all_ang']").is(':checked')){$("input[name='recipient_custom']").attr("checked",false);$("#recipient").addClass('disabled');}}
if(type=='custom'){if($("input[name='recipient_custom']").is(':checked')){$("input[name='recipient_all_slo']").attr("checked",false);$("input[name='recipient_all_ang']").attr("checked",false);$("#recipient").removeClass('disabled');}}}
function showGDPRMessage(){$('#unread_notifications').load('ajax.php?t=notifications&a=viewGDPRMessage',{anketa:srv_meta_anketa_id},function(data){$('#unread_notifications').show();$('#fade').fadeTo('slow',1);});}
function enableGDPRPopupButton(){$("#GDPR_popup_button").css("visibility","visible");}
function saveGDPRMessage(){var gdpr_agree='-1';if($("input[name='gdpr_agree']:checked").val())
gdpr_agree=$("input[name=gdpr_agree]:checked").val();if(gdpr_agree=='0'||gdpr_agree=='1'){$.post('ajax.php?t=notifications&a=saveGDPRAgree',{gdpr_agree:gdpr_agree,anketa:srv_meta_anketa_id},function(data){$('#fade').fadeOut('slow');$("#unread_notifications").fadeOut();});}}
function toggleGDPRMore(){$("#gdpr_popup_more").toggle();};function quota_editing(condition,new_spremenljivka,vrednost){$('#fade').fadeTo('slow',1);$('#quota').html('').fadeIn("slow");if(condition<0)$('#branching_'+(-condition)).addClass('spr_editing');$('#quota').load('ajax.php?t=quota&a=quota_editing',{condition:condition,vrednost:vrednost,noupdate:__vnosi+__analiza,anketa:srv_meta_anketa_id});if(new_spremenljivka==1&&condition<0){refreshLeft(-condition);}}
function quota_editing_close(condition,vrednost){$('#quota').fadeOut('slow');if(condition>=0){if($('#div_condition_editing').is(':hidden')){$('#fade').fadeOut('slow');}
$('#div_condition_editing').load('ajax.php?t=quota&a=quota_editing_close',{anketa:srv_meta_anketa_id,condition:condition,vrednost:vrednost});}
else{$('#branching_'+(-condition)).delay('3000').removeClass('spr_editing',500);if(__vnosi==1){window.location.reload();}
else{$('#fade').fadeOut('slow');$('#branching_'+(-condition)).load('ajax.php?t=quota&a=quota_editing_close',{anketa:srv_meta_anketa_id,condition:condition});}}}
function quota_save(quota){$.post('ajax.php?t=quota&a=quota_save',{quota:quota,expression:$('#expression_'+quota).val(),noupdate:__vnosi+__analiza,anketa:srv_meta_anketa_id});}
function quota_add(condition,operator,vrednost){$('#quota_editing_inner').load('ajax.php?t=quota&a=quota_add',{condition:condition,operator:operator,vrednost:vrednost,noupdate:__vnosi+__analiza,anketa:srv_meta_anketa_id},function(){$("#quota_editing_inner").attr({scrollTop:$("#quota_editing_inner").attr("scrollHeight")});$('#quota_editing_inner').scroll();});}
function quota_operator_edit(quota,operator){$('#quota_editing_inner').load('ajax.php?t=quota&a=quota_operator_edit',{quota:quota,operator:operator,noupdate:__vnosi+__analiza,anketa:srv_meta_anketa_id},function(){$('#quota_editing_inner').scroll();});}
function quota_sort(condition){$('#quota_editing_inner').load('ajax.php?t=quota&a=quota_sort',{'condition':condition,sortable:$('#quota_editing_inner').sortable('serialize'),anketa:srv_meta_anketa_id},function(){$('#quota_editing_inner').scroll();});}
function quota_edit(quota,vrednost){var spr_id=document.getElementById('quota_spremenljivka_'+quota);var spremenljivka=spr_id.options[spr_id.selectedIndex].value;var value=$('#quota_value_'+quota).val();$('#quota_editing_inner').load('ajax.php?t=quota&a=quota_edit',{value:value,quota:quota,vrednost:vrednost,spremenljivka:spremenljivka,noupdate:__vnosi+__analiza,anketa:srv_meta_anketa_id},function(){$('#quota_editing_inner').scroll();});}
function quota_value_edit(spremenljivka){var value=$('#quota_value').val();$.post('ajax.php?t=quota&a=quota_value_edit',{value:value,spremenljivka:spremenljivka,noupdate:__vnosi+__analiza,anketa:srv_meta_anketa_id});}
function quota_remove(condition,quota,vrednost){$('#quota_editing_inner').load('ajax.php?t=quota&a=quota_remove',{condition:condition,quota:quota,vrednost:vrednost,noupdate:__vnosi+__analiza,anketa:srv_meta_anketa_id},function(){$('#quota_editing_inner').scroll();});}
function quota_bracket_edit_new(quota,vrednost,who,what){$('#quota_editing_inner').load('ajax.php?t=quota&a=quota_bracket_edit_new',{who:who,what:what,quota:quota,vrednost:vrednost,noupdate:__vnosi+__analiza,anketa:srv_meta_anketa_id},function(){$('#quota_editing_inner').scroll();});}
function quota_edit_variable(spremenljivka){var input=$("#variable_"+spremenljivka);var variable=input.val();variable=check_valid_variable(variable);input.val(variable);$.post('ajax.php?t=quota&a=quota_edit_variable',{anketa:srv_meta_anketa_id,spremenljivka:spremenljivka,variable:variable});};var vre_id_prej=[];var refresh=[];var refreshed=[];function mapinitRadioGrid(spremenljivka,options,hotspot_region_visibility_option,hotspot_tooltips_option,hotspot_region_color,hotspot_visibility_color,quick_view){$('#hotspot_image_'+spremenljivka+' .grid_table').css("display","none");hotspot_visibility_color=hotspot_visibility_color.slice(1);var image1=$('#hotspot_'+spremenljivka+'_image');if(hotspot_region_visibility_option==0){hotspot_region_visibility_option=false;var hotspot_region_visibility_option_highlight=false;var hotspot_region_visibility_option_clicked=false;}else if(hotspot_region_visibility_option==1){hotspot_region_visibility_option=true;var hotspot_region_visibility_option_highlight=true;var hotspot_region_visibility_option_clicked=false;}else if(hotspot_region_visibility_option==2){hotspot_region_visibility_option=false;var hotspot_region_visibility_option_highlight=true;var hotspot_region_visibility_option_clicked=false;}else if(hotspot_region_visibility_option==3){hotspot_region_visibility_option=false;var hotspot_region_visibility_option_highlight=false;var hotspot_region_visibility_option_clicked=true;}
var vre_id_d=[];var grid_id=[];var hiddenInputs=$('#hotspot_image_'+spremenljivka+' .grid_table').children('tbody').children('tr');hiddenInputs.each(function(index,value){var that=$(this);that.each(function(i,value){var this_id=$(this).attr('id');var vre_id_child=$('#'+this_id).find('input[ checked="" ]').attr('vre_id');var grid_id_child=$('#'+this_id).find('input[ checked="" ]').val();vre_id_d[index]=vre_id_child;grid_id[vre_id_child]=grid_id_child;refreshed[vre_id_child]=false;});});if(vre_id_d[0]===undefined){refresh[spremenljivka]=false;console.log("Not refreshed");}else{refresh[spremenljivka]=true;console.log("Refreshed");}
var map=$('#hotspot_'+spremenljivka+'_map');var izbranaObmocja={};var obmocja=[];map.children().each(function(index,value){obmocja[index]=$(this).attr('name');});var obmocja_string=obmocja.toString();function urediRadioGrid(data){var vre_id=0;var identifikator='';if(refreshed[data.key]==false){vre_id_d.forEach(function(item,i){if(item==data.key){vre_id=item;identifikator='#vrednost_'+vre_id+"_grid_"+grid_id[vre_id];}});}else{vre_id=data.key;identifikator='#vrednost_if_'+vre_id;}
if(quick_view){var test=$('#im_vrednost_if_'+data.key).find('input');test.each(function(index,value){var idPointa=$(this).attr('id');$('#'+idPointa).prop('disabled',true);$('#'+idPointa).attr('onclick','');});}
if($(identifikator).hasClass('checked')){var id=$(identifikator+' input:checked').attr("id");id="im_"+id;$('#'+id).prop("checked",true);}else if($(identifikator).prop('checked')){var id=$(identifikator).attr('id');id="im_"+id;$('#'+id).prop('checked',true);}}
function pokaziNamigObKliku(data){if(hotspot_tooltips_option==2){var vre_id=data.key;image1.mapster('tooltip',vre_id);}}
function urediZapiranjeNamiga(data){if(hotspot_tooltips_option==2){var vre_id=data.key;return["area-click"];}else if(hotspot_tooltips_option!=2){return["tooltip-click"];}}
function urediNamig(data){if(hotspot_tooltips_option==0){var out=true;return out;}else if(hotspot_tooltips_option==1){var out=false;return out;}else if(hotspot_tooltips_option==2){var out=false;return out;}}
if(hotspot_tooltips_option==0){var hotspot_show_tooltips=true;}else if(hotspot_tooltips_option==1){var hotspot_show_tooltips=false;}else if(hotspot_tooltips_option==2){var hotspot_show_tooltips=false;}
hotspot_region_color=hotspot_region_color.slice(1);var izbrano_obmocje_prikaz={fillColor:hotspot_region_color,stroke:false,strokeColor:'000000',strokeWidth:2};image1.mapster({scaleMap:false,fillColor:hotspot_visibility_color,isSelectable:false,mapKey:'name',listKey:'name',showToolTip:hotspot_show_tooltips,highlight:hotspot_region_visibility_option_highlight,toolTipClose:["image-mouseout"],onShowToolTip:urediRadioGrid,onClick:pokaziNamigObKliku}).mapster('set_options',options);if(vre_id_d[0]!==undefined){}}
function mapdelovanjeRadioGrid(htmlobject,vre_id_d){htmlobjectid=htmlobject.id.substring(3);if($('#'+htmlobjectid).is(':checked')){$('#'+htmlobject.id).prop("checked",false);$('#'+htmlobjectid).prop("checked",false);}else{$('#'+htmlobjectid).prop("checked",true);refreshed[vre_id_d]=true;}}
function mapinitRadio(spremenljivka,options,tip,hotspot_region_visibility_option,hotspot_tooltips_option,hotspot_region_color,hotspot_visibility_color){$('#hotspot_image_'+spremenljivka+' .variabla').css("display","none");$('#hotspot_image_'+spremenljivka+' .missing').css("display","");if(hotspot_region_visibility_option==0){hotspot_region_visibility_option=false;var hotspot_region_visibility_option_highlight=false;var hotspot_region_visibility_option_clicked=false;}else if(hotspot_region_visibility_option==1){hotspot_region_visibility_option=true;var hotspot_region_visibility_option_highlight=true;var hotspot_region_visibility_option_clicked=false;}else if(hotspot_region_visibility_option==2){hotspot_region_visibility_option=false;var hotspot_region_visibility_option_highlight=true;var hotspot_region_visibility_option_clicked=false;}else if(hotspot_region_visibility_option==3){hotspot_region_visibility_option=false;var hotspot_region_visibility_option_highlight=false;var hotspot_region_visibility_option_clicked=true;}
if(hotspot_tooltips_option==0){hotspot_tooltips_option=true;}else if(hotspot_tooltips_option==1){hotspot_tooltips_option=false;}else if(hotspot_tooltips_option==2){hotspot_tooltips_option=false;}
if(tip==1){var vre_id_d=$('#hotspot_image_'+spremenljivka+' .checked input[name=vrednost_'+spremenljivka+']').val();}else if(tip==2){var vre_id_d=[];$('#hotspot_image_'+spremenljivka+' .checked input[ checked="" ]').each(function(index,value){vre_id_d[index]=$(this).val();});}
if(vre_id_d===undefined){refresh[spremenljivka]=false;}else{refresh[spremenljivka]=true;}
var map=$('#hotspot_'+spremenljivka+'_map');var izbranaObmocja={};var obmocja=[];map.children().each(function(index,value){obmocja[index]=$(this).attr('name');});var obmocja_string=obmocja.toString();var image1=$('#hotspot_'+spremenljivka+'_image');hotspot_visibility_color=hotspot_visibility_color.slice(1);var default_prikaz={scaleMap:false,isSelectable:false,mapKey:'name',highlight:hotspot_region_visibility_option_highlight,showToolTip:hotspot_tooltips_option,fillColor:hotspot_visibility_color};hotspot_region_color=hotspot_region_color.slice(1);var izbrano_obmocje_prikaz={fillColor:hotspot_region_color,stroke:false,strokeColor:'000000',strokeWidth:2};function urediObmocja(data){if(!quick_view){var vre_id=data.key;if($('#spremenljivka_'+spremenljivka+'_vrednost_'+vre_id).is(':checked')||$('#missing_value_spremenljivka_'+spremenljivka+'_vrednost_'+vre_id).is(':checked')){$('#spremenljivka_'+spremenljivka+'_vrednost_'+vre_id).prop("checked",false);$('#missing_value_spremenljivka_'+spremenljivka+'_vrednost_'+vre_id).prop("checked",false);image1.mapster('set',false,vre_id);image1.mapster('set',hotspot_region_visibility_option,vre_id,default_prikaz);}else{image1.mapster('set',false,vre_id);if((vre_id_d!==undefined)&&(refresh[spremenljivka]==true)){vre_id_prej[spremenljivka]=vre_id_d;refresh[spremenljivka]=false;}
if(tip==1){image1.mapster('set',false,vre_id_prej[spremenljivka]);if(vre_id!=vre_id_prej[spremenljivka]){image1.mapster('set',hotspot_region_visibility_option,vre_id_prej[spremenljivka],default_prikaz);}}
if(tip==2&&($('#hotspot_image_'+spremenljivka).children().hasClass('missing'))&&($('#hotspot_image_'+spremenljivka).children().hasClass('checked'))){}else{$('#spremenljivka_'+spremenljivka+'_vrednost_'+vre_id).prop("checked",true);image1.mapster('set',true,vre_id,izbrano_obmocje_prikaz);}
vre_id_prej[spremenljivka]=vre_id;}}}
image1.mapster({scaleMap:false,isSelectable:false,mapKey:'name',highlight:hotspot_region_visibility_option_highlight,showToolTip:hotspot_tooltips_option,onClick:urediObmocja,fillColor:hotspot_visibility_color}).mapster('set',hotspot_region_visibility_option,obmocja_string).mapster('set_options',options);if(vre_id_d!==undefined){image1.mapster('set',false,vre_id_d);image1.mapster('set',true,vre_id_d,izbrano_obmocje_prikaz);}}
function mapinitRanking(spremenljivka,options,hotspot_region_visibility_option,hotspot_tooltips_option,hotspot_region_color,hotspot_visibility_color){$('#hotspot_image_'+spremenljivka+' .variabla').css("display","none");hotspot_visibility_color=hotspot_visibility_color.slice(1);var image1=$('#hotspot_'+spremenljivka+'_image');if(hotspot_region_visibility_option==0){hotspot_region_visibility_option=false;var hotspot_region_visibility_option_highlight=false;var hotspot_region_visibility_option_clicked=false;}else if(hotspot_region_visibility_option==1){hotspot_region_visibility_option=true;var hotspot_region_visibility_option_highlight=true;var hotspot_region_visibility_option_clicked=false;}else if(hotspot_region_visibility_option==2){hotspot_region_visibility_option=false;var hotspot_region_visibility_option_highlight=true;var hotspot_region_visibility_option_clicked=false;}else if(hotspot_region_visibility_option==3){hotspot_region_visibility_option=false;var hotspot_region_visibility_option_highlight=false;var hotspot_region_visibility_option_clicked=true;}
var vre_id_d=[];var values=[];$('#hotspot_image_'+spremenljivka+' .variabla input').each(function(index){var value=$(this).attr('value');var vre_id=$(this).attr('vred_id');if(value!=''){values[vre_id]=value;refreshed[vre_id]=false;$(this).parent().addClass('checked');}else{refreshed[vre_id]=true;}});var valuesLength=values.length;var map=$('#hotspot_'+spremenljivka+'_map');var izbranaObmocja={};var obmocja=[];map.children().each(function(index,value){obmocja[index]=$(this).attr('name');});var obmocja_string=obmocja.toString();function urediRadioGrid(data){var vre_id=0;var identifikator='';if(refreshed[data.key]==false){vre_id=data.key;$('#im_vrednost_if_'+vre_id+' .category input').each(function(index){var id=$(this).attr('id');var vrstni_red=$(this).attr('vrstni_red');if(vrstni_red==values[vre_id]){$('#'+id).prop("checked",true);disableOthers(spremenljivka,vre_id);enableCurrent(id);}});}else{vre_id=data.key;identifikator='#vrednost_if_'+vre_id;}
if($(identifikator).hasClass('checked')){var id=$(identifikator+' input').attr('id');id=$('#vrednost_if_'+vre_id).attr('tooltipid');id='im_'+id;$('#'+id).prop("checked",true);disableOthers(spremenljivka,vre_id);enableCurrent(id);}else if($(identifikator).attr('checked')){var id=$(identifikator).attr('id');id="im_"+id;console.log("id2:"+id);$('#'+id).prop("checked",true);}else if(refreshed[data.key]==true){enableCurrent(id);disableOthers(spremenljivka,vre_id);}}
function pokaziNamigObKliku(data){if(hotspot_tooltips_option==2){var vre_id=data.key;image1.mapster('tooltip',vre_id);}}
function urediZapiranjeNamiga(data){if(hotspot_tooltips_option==2){var vre_id=data.key;return["area-click"];}else if(hotspot_tooltips_option!=2){return["tooltip-click"];}}
function urediNamig(data){if(hotspot_tooltips_option==0){var out=true;return out;}else if(hotspot_tooltips_option==1){var out=false;return out;}else if(hotspot_tooltips_option==2){var out=false;return out;}}
if(hotspot_tooltips_option==0){var hotspot_show_tooltips=true;}else if(hotspot_tooltips_option==1){var hotspot_show_tooltips=false;}else if(hotspot_tooltips_option==2){var hotspot_show_tooltips=false;}
hotspot_region_color=hotspot_region_color.slice(1);var izbrano_obmocje_prikaz={fillColor:hotspot_region_color,stroke:false,strokeColor:'000000',strokeWidth:2};image1.mapster({scaleMap:false,fillColor:hotspot_visibility_color,isSelectable:false,mapKey:'name',listKey:'name',showToolTip:hotspot_show_tooltips,highlight:hotspot_region_visibility_option_highlight,toolTipClose:["image-mouseout"],onShowToolTip:urediRadioGrid,onClick:pokaziNamigObKliku}).mapster('set_options',options);if(vre_id_d[0]!==undefined){}}
function mapdelovanjeRanking(htmlobject,vre_id_d){htmlobjectid=htmlobject.id.substring(3);var vrstni_red=0;if($('#vrednost_if_'+vre_id_d+' input').attr('value')==$('#im_'+htmlobjectid).attr('vrstni_red')){$('#'+htmlobject.id).prop("checked",false);$('#vrednost_if_'+vre_id_d+' input').val('');$('#vrednost_if_'+vre_id_d+' input').attr('value','');refreshed[vre_id_d]=true;}else{vrstni_red=$('#im_'+htmlobjectid).attr('vrstni_red');$('#vrednost_if_'+vre_id_d+' input').val(vrstni_red);$('#vrednost_if_'+vre_id_d+' input').attr('value',vrstni_red);$('#vrednost_if_'+vre_id_d).attr('tooltipid',htmlobjectid);refreshed[vre_id_d]=true;}}
function disableOthers(spremenljivka,vre_id){$('#hotspot_image_'+spremenljivka+' .checked input').each(function(){var value=$(this).attr('value');$('#im_vrednost_if_'+vre_id+' .category input').each(function(){var vrstni_red=$(this).attr('vrstni_red');if(vrstni_red==value){$(this).attr('disabled','disabled');$(this).parent().css('cursor','not-allowed');}});});}
function enableCurrent(id){$('#'+id).prop("disabled","");$('#'+id).parent().css('cursor','pointer');};function diferencial_trak_checkbox_prop(spremenljivka,num_grids){if($('#diferencial_trak_'+spremenljivka).is(":checked")){$('#diferencial_trak_hidden_'+spremenljivka).prop('disabled',true);$('.diferencial_trak_starting_num_class_'+spremenljivka).css('display','block');$('.trak_num_of_titles_class').css('display','block');$('.grid_defaults_class').css('display','none');$('.grid_var_class').css('display','none');diferencial_trak_change_values(spremenljivka,num_grids);$('.drop_custom_column_labels').css('display','none');}
else{$('#diferencial_trak_hidden_'+spremenljivka).prop('disabled',false);$('.diferencial_trak_starting_num_class_'+spremenljivka).css('display','none');$('.trak_num_of_titles_class').css('display','none');$('.grid_defaults_class').css('display','block');$('.grid_var_class').css('display','block');$('.drop_custom_column_labels').css('display','block');}}
function diferencial_trak_change_values(spremenljivka,num_grids){num_grids=$('.drop_grids_num option:selected').val();var diferencial_trak_starting_num=parseInt($('#diferencial_trak_starting_num_'+spremenljivka).val());var new_vrednosti_odgovorov=[];new_vrednosti_odgovorov[0]=diferencial_trak_starting_num;for(var i=1;i<num_grids;i++){new_vrednosti_odgovorov[i]=new_vrednosti_odgovorov[i-1]+1;}
var j=0;$('#grid_variable_'+spremenljivka+' .grid_variable_inline').each(function(){$(this).text(new_vrednosti_odgovorov[j]);j=j+1;});$.post('ajax.php?t=vprasanje&a=diferencial_trak_skrite_vrednosti',{spr_id:spremenljivka,num_grids:num_grids,diferencial_trak_starting_num:diferencial_trak_starting_num});}
function trak_edit_num_titles(size,spremenljivka,trak_num_of_titles,trak_nadnaslov){var g_last='g_'+trak_num_of_titles;var colspan_calc=[];var g_middle=[];if(size%trak_num_of_titles==0){for(var i=1;i<=trak_num_of_titles;i++){colspan_calc[i]=size/trak_num_of_titles;if(i!=1&&i!=trak_num_of_titles){g_middle[i]='g_'+i;}}}else if(size%trak_num_of_titles==2){for(var i=1;i<=trak_num_of_titles;i++){if(i!=1&&i!=trak_num_of_titles){g_middle[i]='g_'+i;colspan_calc[i]=parseInt(size/trak_num_of_titles);}else{colspan_calc[i]=1+parseInt(size/trak_num_of_titles);}}}else if(trak_num_of_titles==2){if(size%trak_num_of_titles==0){for(var i=1;i<=trak_num_of_titles;i++){colspan_calc[i]=size/trak_num_of_titles;}}else{colspan_calc[1]=(size/trak_num_of_titles)+0.5;colspan_calc[trak_num_of_titles]=(size/trak_num_of_titles)-0.5;}}
var indeks=1;$('.display_trak_num_of_titles_'+spremenljivka+' > td').each(function(){var grd=$(this).attr('grd');if(String(grd)!='g_1'&&String(grd)!=g_last&&String(grd)!=g_middle[indeks]){if(grd!==undefined){$(this).children().text("");$(this).remove();}}
if(String(grd)=='g_1'){$(this).attr('colspan',colspan_calc[1]);$(this).attr('style','text-align: left');$(this).children().text(trak_nadnaslov[String(1)]);indeks++;}
if(String(grd)==g_last){$(this).attr('colspan',colspan_calc[trak_num_of_titles]);$(this).attr('style','text-align: right');$(this).children().text(trak_nadnaslov[String(trak_num_of_titles)]);}
if(String(grd)==g_middle[indeks]){$(this).attr('colspan',colspan_calc[indeks]);$(this).attr('style','text-align: center');$(this).children().text(trak_nadnaslov[String(indeks)]);indeks++;}});}
function change_trak_num_of_titles(spremenljivka,size){var trakNumOfTitlesSize=$('#trak_num_of_titles option').length;var isTrakNumOfTitlesNow=false;var deljivaStevila=[];var trakNumOfTitles=$('#trak_num_of_titles option:selected').val();$('#trak_num_of_titles').empty();deljivaStevila=soDeljiva(size);for(var i=0;i<deljivaStevila.length;i++){$('#trak_num_of_titles').append('<option value='+deljivaStevila[i]+'>'+deljivaStevila[i]+'</option>');if(deljivaStevila[i]==$('#trak_num_of_titles option:selected').val()){isTrakNumOfTitlesNow=true;}}
if(isTrakNumOfTitlesNow){var trakNumOfTitlesNow=trakNumOfTitles;}else{var trakNumOfTitlesNow=deljivaStevila[0];}
$('#trak_num_of_titles').val(trakNumOfTitlesNow);}
function soDeljiva(size){var deljivaStevila=[];var indeksDeljivihStevil=1;deljivaStevila[0]=2;for(var i=3;i<=size;i++){if(size%i==0){deljivaStevila[indeksDeljivihStevil]=i;indeksDeljivihStevil++;}else if(size%i==2){deljivaStevila[indeksDeljivihStevil]=i;indeksDeljivihStevil++;}}
return deljivaStevila;}
var elem_now_trak=[];var elem_before_trak=[];var klik_trak=[];function trak_change_bg(this_s,diferencial_trak,spremenljivka){if(diferencial_trak){var children=$(this_s).find('input[type=radio]').attr('id');var vre_id=$(this_s).find('input[type=radio]').attr('vre_id');elem_now_trak[spremenljivka]=children;$('#variabla_'+vre_id).children().removeClass('trak_container_bg');$('#'+children).attr('checked','checked');var trak=children.replace("foo","trak_tbl");if(!klik_trak[spremenljivka]&&(elem_now_trak[spremenljivka]!=elem_before_trak[spremenljivka])){$('#'+trak).addClass('trak_container_bg');klik_trak[spremenljivka]=1;}else if(klik_trak[spremenljivka]&&(elem_now_trak[spremenljivka]!=elem_before_trak[spremenljivka])){$('#'+trak).addClass('trak_container_bg');}else if(klik_trak[spremenljivka]&&(elem_now_trak[spremenljivka]==elem_before_trak[spremenljivka])){$('#variabla_'+vre_id).children().removeClass('trak_container_bg');klik_trak[spremenljivka]=0;}else if(!klik_trak[spremenljivka]&&(elem_now_trak[spremenljivka]==elem_before_trak[spremenljivka])){$('#'+trak).addClass('trak_container_bg');klik_trak[spremenljivka]=1;}
elem_before_trak[spremenljivka]=elem_now_trak[spremenljivka];}};function trak_edit_num_titles_respondent(size,spremenljivka,trak_num_of_titles,trak_nadnaslov){var g_last='gr_'+trak_num_of_titles;var colspan_calc=[];var g_middle=[];if(size%trak_num_of_titles==0){for(var i=1;i<=trak_num_of_titles;i++){colspan_calc[i]=size/trak_num_of_titles;if(i!=1&&i!=trak_num_of_titles){g_middle[i]='gr_'+i;}}}else if(size%trak_num_of_titles==2){for(var i=1;i<=trak_num_of_titles;i++){if(i!=1&&i!=trak_num_of_titles){g_middle[i]='gr_'+i;colspan_calc[i]=parseInt(size/trak_num_of_titles);}else{colspan_calc[i]=1+parseInt(size/trak_num_of_titles);}}}else if(trak_num_of_titles==2){if(size%trak_num_of_titles==0){for(var i=1;i<=trak_num_of_titles;i++){colspan_calc[i]=size/trak_num_of_titles;}}else{colspan_calc[1]=(size/trak_num_of_titles)+0.5;colspan_calc[trak_num_of_titles]=(size/trak_num_of_titles)-0.5;}}
var indeks=1;$('.display_trak_num_of_titles_respondent_'+spremenljivka+' > td').each(function(){var grd=$(this).attr('grd');if(String(grd)!='gr_1'&&String(grd)!=g_last&&String(grd)!=g_middle[indeks]){if(grd!==undefined){$(this).children().text("");$(this).remove();}}
if(String(grd)=='gr_1'){$(this).attr('colspan',colspan_calc[1]);$(this).attr('style','text-align: left');$(this).children().text(trak_nadnaslov[String(1)]);indeks++;}
if(String(grd)==g_last){$(this).attr('colspan',colspan_calc[trak_num_of_titles]);$(this).attr('style','text-align: right');$(this).children().text(trak_nadnaslov[String(trak_num_of_titles)]);}
if(String(grd)==g_middle[indeks]){$(this).attr('colspan',colspan_calc[indeks]);$(this).attr('style','text-align: center');$(this).children().text(trak_nadnaslov[String(indeks)]);indeks++;}});};function editGDPRSurvey(ank_id){var form_serialize=$('form[name="settingsanketa_'+ank_id+'"]').serializeArray();form_serialize[form_serialize.length]={name:'ank_id',value:ank_id};$.post('ajax.php?t=gdpr&a=gdpr_edit_anketa&s=1',form_serialize,function(){window.location.reload();});}
function showGDPRSettings(){var is_gdpr=$("input[name='is_gdpr']:checked").val();var is_identifier=0;is_identifier+=parseInt($("input[name='name']:checked").val());is_identifier+=parseInt($("input[name='email']:checked").val());is_identifier+=parseInt($("input[name='location']:checked").val());is_identifier+=parseInt($("input[name='phone']:checked").val());is_identifier+=parseInt($("input[name='web']:checked").val());is_identifier+=parseInt($("input[name='other']:checked").val());if(is_gdpr=='1'){$("#gdpr_data_identifiers").show('fast');}
else{$("#gdpr_data_identifiers").hide('fast');}
if(is_identifier>0&&is_gdpr=='1'){$("#gdpr_data_settings").show('fast');$("#gdpr_additional_info").show('fast');$("#gdpr_export_individual").show('fast');$("#gdpr_export_activity").show('fast');}
else{$("#gdpr_data_settings").hide('fast');$("#gdpr_additional_info").hide('fast');$("#gdpr_export_individual").hide('fast');$("#gdpr_export_activity").hide('fast');}}
function showGDPRTemplate(val){if(val=='1'){$("#gdpr_data_template").show();$("#gdpr_data_template_warning").hide();}
else{$("#gdpr_data_template").hide();$("#gdpr_data_template_warning").show();}}
function previewGDPRIntro(){var ank_id=$("input[name=anketa]").val();$('#fullscreen').html('').fadeIn('slow').draggable({delay:100});$('#fade').fadeTo('slow',1);$('#fullscreen').load('ajax.php?t=gdpr&a=gdpr_preview_intro',{ank_id:ank_id}).draggable({delay:100});}
function toggleGDPROtherText(obj){var val=$(obj).val();if(val=='1'){$('#other_text').show('fast');}
else{$('#other_text').hide('fast');}}
function toggleGDPRInfoText(obj){var name=$(obj).attr("name");var val=$(obj).val();if(val=='1'){$(".line_text."+name).prop("disabled",false);}
else{$(".line_text."+name).prop("disabled",true);}}
function previewGDPRExport(type){var ank_id=$("input[name=anketa]").val();$('#fullscreen').addClass("divPopUp");$('#fullscreen').html('').fadeIn('slow').draggable({delay:100});$('#fade').fadeTo('slow',1);$('#fullscreen').load('ajax.php?t=gdpr&a=gdpr_preview_export',{ank_id:ank_id,type:type}).draggable({delay:100});}
function setGDPRSurvey(ank_id,checked){var gdpr='0';if(checked)
gdpr='1';$("#gdpr_nastavitve").load('ajax.php?t=gdpr&a=gdpr_add_anketa',{ank_id:ank_id,value:gdpr});}
function editGDPRProfile(){var form_serialize=$("#form_gdpr_user_settings").serializeArray();$("#gdpr_nastavitve").load('ajax.php?t=gdpr&a=gdpr_edit_user&s=1',form_serialize);}
function editGDPRAuthority(country){$("#gdpr_authority_info").load('ajax.php?t=gdpr&a=gdpr_edit_authority',{country:country});}
function toggleGDPRDPO(){var organization=$('input[name=type]:checked').val();var has_dpo=$('input[name=has_dpo]:checked').val();if(organization=='1'||has_dpo=='1')
$("#gdpr_dpo").removeClass('displayNone');else
$("#gdpr_dpo").addClass('displayNone');if(organization=='1'){$("#gdpr_organization").removeClass('displayNone');$("#gdpr_has_dpo").addClass('displayNone');$("#gdpr_has_dpo").find('.setting_holder').removeClass('bottom16');}
else{$("#gdpr_organization").addClass('displayNone');$("#gdpr_has_dpo").removeClass('displayNone');$("#gdpr_has_dpo").find('.setting_holder').addClass('bottom16');}}
function toggleGDPRHasDPO(){var has_dpo=$('input[name=has_dpo]:checked').val();if(has_dpo=='1')
$("#gdpr_dpo").removeClass('displayNone');else
$("#gdpr_dpo").addClass('displayNone');}
function setGDPRRequestStatus(request_id,checked){var value='0';if(checked)
value='1';$("#gdpr_nastavitve").load('ajax.php?t=gdpr&a=gdpr_request_done',{request_id:request_id,value:value});}
function setGDPRRequestStatusSurvey(request_id,checked){var ank_id=$("input[name=anketa]").val();var value='0';if(checked)
value='1';$("#survey_requests").load('ajax.php?t=gdpr&a=gdpr_request_done_survey',{request_id:request_id,value:value,ank_id:ank_id});}
function setGDPRRequestComment(request_id,text){var value=text;$("#gdpr_nastavitve").load('ajax.php?t=gdpr&a=gdpr_request_comment',{request_id:request_id,value:value});}
function setGDPRRequestCommentSurvey(request_id,text){var ank_id=$("input[name=anketa]").val();var value=text;$("#survey_requests").load('ajax.php?t=gdpr&a=gdpr_request_comment_survey',{request_id:request_id,value:value,ank_id:ank_id});}
function gdpr_ankete(){var check_gdpr_ankete=document.getElementById('gdpr_ankete_check');if(check_gdpr_ankete.checked){check_gdpr_ankete.checked=false;$('#num_box1').removeClass('checked');$('.green_row').hide();}
else{check_gdpr_ankete.checked=true;$('#num_box1').addClass('checked');$('.green_row').show();}}
function potenc_gdpr_ankete(){var check_potenc_gdpr=document.getElementById('potenc_gdpr_ankete_check');if(check_potenc_gdpr.checked){check_potenc_gdpr.checked=false;$('#num_box2').removeClass('checked');$('.red_row').hide();}
else{check_potenc_gdpr.checked=true;$('#num_box2').addClass('checked');$('.red_row').show();}}
function ne_gdpr_ankete(){var check_negdpr_ankete=document.getElementById('ne_gdpr_ankete');if(check_negdpr_ankete.checked){check_negdpr_ankete.checked=false;$('#num_box3').removeClass('checked');$('.grey_row').hide();}
else{check_negdpr_ankete.checked=true;$('#num_box3').addClass('checked');$('.grey_row').show();}};function userAccessExport(){$("a.user_access_locked").each(function(index){$(this).attr("href","#");$(this).removeAttr("target");$(this).removeAttr("onclick");what=$(this).attr('user-access');if(typeof what===typeof undefined||what===false)
var what='export';$(this).click(function(){popupUserAccess(what);});});}
function userAccessFilters(){$("#div_analiza_filtri_right ul li span").each(function(index){$(this).removeAttr("onclick");var what='filters';$(this).click(function(){popupUserAccess(what);});});}
function popupUserAccess(what){$('#fade').fadeTo('slow',1);$("#popup_user_access").load('ajax.php?t=userAccess&a=displayNoAccessPopup',{what:what,anketa:srv_meta_anketa_id});$("#popup_user_access").show();}
function popupUserAccess_close(){$("#popup_user_access").hide();$('#fade').fadeOut('slow');}
function prepareNarocilaTableAdmin(){$("#user_narocila").DataTable({order:[[5,"desc"]],lengthMenu:[[50,500,1000],[50,500,1000]],select:false,lengthChange:true,deferRender:true,dom:'Blfrtip',responsive:true,columnDefs:[{responsivePriority:1,targets:0},{responsivePriority:2,targets:1},{responsivePriority:3,targets:8},{responsivePriority:4,targets:5}],language:{"url":siteUrl+"admin/survey/script/datatables/Slovenian.json"},buttons:[{extend:'copy',exportOptions:{columns:':visible'}},{extend:'print',exportOptions:{columns:':visible'}},{extend:'csv',title:'1KA - Seznam vseh uporabnikov',bom:true,exportOptions:{columns:':visible'}},{extend:'excel',title:'1KA - Seznam vseh uporabnikov',bom:true,exportOptions:{columns:':visible'}},{extend:'pdf',title:'1KA - Seznam vseh uporabnikov',orientation:'landscape',pageSize:'LEGAL',exportOptions:{columns:':visible'}}]});}
function preparePlacilaTableAdmin(){$("#user_placila").DataTable({order:[[2,"desc"]],lengthMenu:[[50,500,1000],[50,500,1000]],select:false,lengthChange:true,deferRender:true,dom:'Blfrtip',responsive:true,columnDefs:[{responsivePriority:1,targets:0},{responsivePriority:2,targets:3},{responsivePriority:3,targets:2}],language:{"url":siteUrl+"admin/survey/script/datatables/Slovenian.json"},buttons:[{extend:'copy',exportOptions:{columns:':visible'}},{extend:'print',exportOptions:{columns:':visible'}},{extend:'csv',title:'1KA - Seznam vseh uporabnikov',bom:true,exportOptions:{columns:':visible'}},{extend:'excel',title:'1KA - Seznam vseh uporabnikov',bom:true,exportOptions:{columns:':visible'}},{extend:'pdf',title:'1KA - Seznam vseh uporabnikov',orientation:'landscape',pageSize:'LEGAL',exportOptions:{columns:':visible'}},'colvis']});}
function getNarociloPredracun(narocilo_id){$.post('ajax.php?t=userNarocila&a=getPredracun',{narocilo_id:narocilo_id},function(response){var pdf_url=response.replace(/\\\//g,"/");pdf_url=pdf_url.replace(/['"]+/g,'');window.location=pdf_url;});}
function getNarociloRacun(narocilo_id){$.post('ajax.php?t=userNarocila&a=getRacun',{narocilo_id:narocilo_id},function(response){var pdf_url=response.replace(/\\\//g,"/");pdf_url=pdf_url.replace(/['"]+/g,'');window.location=pdf_url;});}
function displayNarociloPopup(narocilo_id){$('#fade').fadeTo('slow',1);$("#user_narocila_popup").load('ajax.php?t=userNarocila&a=displayNarociloPopup',{narocilo_id:narocilo_id});$("#user_narocila_popup").show();}
function urediNarociloSave(){var form_serialize=$("#edit_narocilo").serializeArray();$("#narocila").load('ajax.php?t=userNarocila&a=editNarocilo',form_serialize,function(){$('#user_narocila_popup').hide().html('');$('#fade').fadeOut('slow');});}
function urediNarociloPay(narocilo_id){$("#narocila").load('ajax.php?t=userNarocila&a=payNarocilo',{narocilo_id:narocilo_id,payment_method:'1'},function(){$('#user_narocila_popup').hide().html('');$('#fade').fadeOut('slow');});}
function urediNarociloPayEracun(narocilo_id){$("#narocila").load('ajax.php?t=userNarocila&a=payNarociloEracun',{narocilo_id:narocilo_id,payment_method:'1'},function(){$('#user_narocila_popup').hide().html('');$('#fade').fadeOut('slow');});}
function urediNarociloClose(){$('#user_narocila_popup').hide().html('');$('#fade').fadeOut('slow');}
function brisiNarocilo(narocilo_id){if(confirm('Ste prepričani?')){$.post('ajax.php?t=userNarocila&a=deleteNarocilo',{narocilo_id:narocilo_id},function(){});}}
function displayPlaciloPopup(placilo_id){$('#fade').fadeTo('slow',1);$("#user_placila_popup").load('ajax.php?t=userPlacila&a=displayPlaciloPopup',{placilo_id:placilo_id});$("#user_placila_popup").show();}
function urediPlaciloSave(){var form_serialize=$("#edit_placilo").serializeArray();$("#placila").load('ajax.php?t=userPlacila&a=editPlacilo',form_serialize,function(){$('#user_placila_popup').hide().html('');$('#fade').fadeOut('slow');});}
function createPlaciloSave(){var form_serialize=$("#create_placilo").serializeArray();$("#placila").load('ajax.php?t=userPlacila&a=createPlacilo',form_serialize,function(){$('#user_placila_popup').hide().html('');$('#fade').fadeOut('slow');});}
function urediPlaciloClose(){$('#user_placila_popup').hide().html('');$('#fade').fadeOut('slow');}
function brisiPlacilo(placilo_id){if(confirm('Ste prepričani?')){$("#placila").load('ajax.php?t=userPlacila&a=deletePlacilo',{placilo_id:placilo_id});}}
function stornirajPlacilo(placilo_id){if(confirm('Ste prepričani?')){$("#placila").load('ajax.php?t=userPlacila&a=stornirajPlacilo',{placilo_id:placilo_id});}}
function filterNarocila(status,checked){if(checked)
var value=1;else
var value=0;$("#narocila").load('ajax.php?t=userNarocila&a=filterNarocila',{status:status,value:value});};function popupSwitch(){$('#fade').fadeTo('slow',1);$("#popup_user_access").load('ajax.php?t=domainChange&a=displaySwitchPopup');$("#popup_user_access").show();}
function popupSwitch_close(){$("#popup_user_access").html().hide();$('#fade').fadeOut('slow');}
function popupSwitch_save(switch_status){$.post('ajax.php?t=domainChange&a=setSwitchStatus',{switch_status:switch_status},function(response){var data=JSON.parse(response);if(data['action']=='switch_domain'){window.location=data['url'];}});};function heatmap_show_clicks_checkbox_prop(spremenljivka){if($('#heatmap_show_clicks_'+spremenljivka).is(":checked")){$('#heatmap_show_clicks_hidden_'+spremenljivka).prop('disabled',true);$('#heatmap_clicks_settings_'+spremenljivka).css("display","block");}
else{$('#heatmap_show_clicks_hidden_'+spremenljivka).prop('disabled',false);$('#heatmap_clicks_settings_'+spremenljivka).css("display","none");}}
function heatmap_show_counter_clicks_checkbox_prop(spremenljivka){if($('#heatmap_show_counter_clicks_'+spremenljivka).is(":checked")){$('#heatmap_show_counter_clicks_hidden_'+spremenljivka).prop('disabled',true);}
else{$('#heatmap_show_counter_clicks_hidden_'+spremenljivka).prop('disabled',false);}}
function showHeatMapClickCounter(heatmap_num_clicks,spremenljivka){if(heatmap_num_clicks>1){$('.heatmap_show_counter_clicks_class').css("display","block");}else{$('.heatmap_show_counter_clicks_class').css("display","none");$('#heatmap_show_counter_clicks_'+spremenljivka).prop('checked',false);$('#heatmap_show_counter_clicks_hidden_'+spremenljivka).prop('disabled',false);}}
function show_hot_spot_settings_4Heatmap(spremenljivka,tip,hotspot_image){var heatmap_region_settings=false;$('#hot_spot_fieldset_'+spremenljivka).children().each(function(){heatmap_region_settings=$('#hot_spot_fieldset_'+spremenljivka).children().hasClass('hotspot_region');});$('#hot_spot_fieldset_'+spremenljivka).css('display','');var hotspot_image=function(){$.ajaxSetup({async:false});var tmp=null;$.post('ajax.php?t=vprasanje&a=get_hotspot_image',{spremenljivka:spremenljivka},function(data){tmp=data;});return tmp;}();if((hotspot_image=='')||(hotspot_image.substring(0,4)!='<img')){$('#hot_spot_regions_add_button').css('display','none');$('#hotspot_message').css('display','');}else if(hotspot_image.substring(0,4)=='<img'){$('#hot_spot_regions_add_button').css('display','');$('#hotspot_message').css('display','none');}
if(heatmap_region_settings){}else{}
var enako_stevilo_vnosov_za_hotspot=function(){$.ajaxSetup({async:false});var tmp=null;$.post('ajax.php?t=vprasanje&a=get_hotspot_stevilo_vnosov',{spremenljivka:spremenljivka},function(data){tmp=data;});return tmp;}();}
function UpdateClickSizeSlider(radij,spremenljivka){document.querySelector('#heatmapClickSizeValue_'+spremenljivka).value=radij;};var heatmap_num_clicksGlobal=[];var mousePos=[];var indeksMousePos=[];function InitHeatMapCanvas(spremenljivka,quick_view){var imageJQ=$('#hotspot_'+spremenljivka+'_image');var visina=imageJQ.height();var sirina=imageJQ.width();var canvas=document.getElementById('heatmapCanvas_'+spremenljivka);imageJQ.css("display","none");image=new Image();image.src=$('#hotspot_'+spremenljivka+'_image').attr("src");image.height=visina;image.width=sirina;canvas.setAttribute('height',visina);canvas.setAttribute('width',sirina);if(canvas.getContext){var context=canvas.getContext('2d');context.drawImage(image,0,0,sirina,visina);}else{console.log("Canvas not supported");}
if(quick_view==true){$('#resetHeatMapCanvas_'+spremenljivka).prop('disabled',true);$('#resetHeatMapLastPoint_'+spremenljivka).prop('disabled',true);}else{$('#resetHeatMapCanvas_'+spremenljivka).prop('disabled',false);$('#resetHeatMapLastPoint_'+spremenljivka).prop('disabled',false);}}
function HeatMapCanvasDelovanje(evt,spremenljivka,heatmap_show_clicks,heatmap_num_clicks,heatmap_click_color,heatmap_click_size,heatmap_click_shape,quick_view){if(!quick_view){var canvas=document.getElementById('heatmapCanvas_'+spremenljivka);var context=canvas.getContext('2d');if(heatmap_num_clicksGlobal[spremenljivka]!=0){mousePos[spremenljivka][indeksMousePos[spremenljivka]]=getMousePos(canvas,evt);checkIfPointInsidePoly(spremenljivka);heatmap_num_clicksGlobal[spremenljivka]--;if(heatmap_show_clicks){drawShapeOnCanvas(mousePos[spremenljivka][indeksMousePos[spremenljivka]],canvas,context,heatmap_click_color,heatmap_click_size,heatmap_click_shape);}
HeatMapAddInput(spremenljivka,0,0);indeksMousePos[spremenljivka]=indeksMousePos[spremenljivka]+1;$('#heatmapClickNumber_'+spremenljivka).text(indeksMousePos[spremenljivka]);if(heatmap_num_clicksGlobal[spremenljivka]==0){$('#heatmapCanvas_'+spremenljivka).css('cursor','default');}}else{$('#heatmapCanvas_'+spremenljivka).css('cursor','default');}}}
function getMousePos(canvas,evt){var rect=canvas.getBoundingClientRect();return{x:parseInt(evt.clientX-rect.left),y:parseInt(evt.clientY-rect.top)};}
function HeatMapAddInput(spremenljivka,refresh,mousePosRefresh){var $variable_holder=$("#heatmapInputs_"+spremenljivka);var pointId="pointId_"+spremenljivka+"_"+indeksMousePos[spremenljivka];if(refresh){var $pointInput=$("<input>",{id:pointId,name:"vrednost_"+spremenljivka+"[]",value:pointId+"|"+mousePosRefresh.lat+"|"+mousePosRefresh.lng});}else{var $pointInput=$("<input>",{id:pointId,name:"vrednost_"+spremenljivka+"[]",value:pointId+"|"+mousePos[spremenljivka][indeksMousePos[spremenljivka]].x+"|"+mousePos[spremenljivka][indeksMousePos[spremenljivka]].y});}
$variable_holder.append($pointInput);}
function drawShapeOnCanvas(mousePos,canvas,context,heatmap_click_color,heatmap_click_size,heatmap_click_shape,refresh){stranicaRect=heatmap_click_size;if(heatmap_click_shape==1)
{if(refresh==1){context.arc(mousePos.lat,mousePos.lng,stranicaRect,0,2*Math.PI,false);}
else{context.arc(mousePos.x,mousePos.y,stranicaRect,0,2*Math.PI,false);}}else if(heatmap_click_shape==2)
{if(refresh==1){context.rect(mousePos.lat-stranicaRect/2,mousePos.lng-stranicaRect/2,stranicaRect,stranicaRect);}else{context.rect(mousePos.x-stranicaRect/2,mousePos.y-stranicaRect/2,stranicaRect,stranicaRect);}}
context.fillStyle=heatmap_click_color;context.fill();context.closePath();}
function resetHeatMapCanvas(spremenljivka,heatmap_num_clicks,quick_view){var canvas=document.getElementById('heatmapCanvas_'+spremenljivka);var context=canvas.getContext('2d');context.clearRect(0,0,canvas.width,canvas.height);InitHeatMapCanvas(spremenljivka);heatmap_num_clicksGlobal[spremenljivka]=heatmap_num_clicks;indeksMousePos[spremenljivka]=0;var $variable_holder=$("#heatmapInputs_"+spremenljivka);$variable_holder.children().remove();$('#heatmapCanvas_'+spremenljivka).css('cursor','pointer');$("#heatmapCheckbox_"+spremenljivka).children().each(function(index,name){$(this).find('input').prop("checked",false);});$('#heatmapClickNumber_'+spremenljivka).text(0);}
function resetHeatMapLastPoint(spremenljivka,heatmap_num_clicks,heatmap_show_clicks,heatmap_click_color,heatmap_click_size,heatmap_click_shape,heatmap_data,quick_view){var canvas=document.getElementById('heatmapCanvas_'+spremenljivka);var context=canvas.getContext('2d');context.clearRect(0,0,canvas.width,canvas.height);InitHeatMapCanvas(spremenljivka);var $variable_holder=$("#heatmapInputs_"+spremenljivka);$variable_holder.children().remove();$("#heatmapCheckbox_"+spremenljivka).children().each(function(index,name){$(this).find('input').prop("checked",false);});if((heatmap_num_clicks-heatmap_num_clicksGlobal[spremenljivka])>0)
{indeksMousePos[spremenljivka]=indeksMousePos[spremenljivka]-1;heatmap_num_clicksGlobal[spremenljivka]=heatmap_num_clicksGlobal[spremenljivka]+1;$('#heatmapClickNumber_'+spremenljivka).text(heatmap_num_clicks-heatmap_num_clicksGlobal[spremenljivka]);}
if(refreshed[spremenljivka]==1){for(var row in heatmap_data){var row_object=heatmap_data[row];mousePos[spremenljivka][row]={x:row_object.lat,y:row_object.lng};}
refreshed[spremenljivka]=0;}
for(var i=0;i<indeksMousePos[spremenljivka];i++){var pointId="pointId_"+spremenljivka+"_"+i;var $pointInput=$("<input>",{id:pointId,name:"vrednost_"+spremenljivka+"[]",value:pointId+"|"+mousePos[spremenljivka][i].x+"|"+mousePos[spremenljivka][i].y});$variable_holder.append($pointInput);if(heatmap_show_clicks){drawShapeOnCanvas(mousePos[spremenljivka][i],canvas,context,heatmap_click_color,heatmap_click_size,heatmap_click_shape);}}}
function heatmap_data_add(spremenljivka,heatmap_data,heatmap_click_color,heatmap_click_size,heatmap_click_shape,heatmap_show_clicks,heatmap_num_clicks){heatmap_num_clicksGlobal[spremenljivka]=heatmap_num_clicks;var i=0;for(var row in heatmap_data){var row_object=heatmap_data[row];var mousePos={lat:row_object.lat,lng:row_object.lng};var canvas=document.getElementById('heatmapCanvas_'+spremenljivka);var context=canvas.getContext('2d');if(heatmap_show_clicks){drawShapeOnCanvas(mousePos,canvas,context,heatmap_click_color,heatmap_click_size,heatmap_click_shape,1);}
indeksMousePos[spremenljivka]++;i++
HeatMapAddInput(spremenljivka,1,mousePos);}
heatmap_num_clicksGlobal[spremenljivka]=heatmap_num_clicksGlobal[spremenljivka]-i;$('#heatmapClickNumber_'+spremenljivka).text(i);}
function convertPolyString(polypoints,vre_id){var poly=[];var polyObjectArray=[];var tmpX;var tmpY;var j=0;poly=polypoints.split(",");for(var i=0;i<poly.length;i++){if(i==0||i%2==0){tmpX=parseInt(poly[i]);}else{tmpY=parseInt(poly[i]);polyObjectArray.push({x:tmpX,y:tmpY});}}
return polyObjectArray;}
function checkIfPointInsidePoly(spremenljivka){$("#hotspot_"+spremenljivka+"_map").children().each(function(index,name){var vre_id=$(this).attr('name');var polypoints=$(this).attr('coords');poly=convertPolyString(polypoints,vre_id);var inside=insidePoly(poly,mousePos[spremenljivka][indeksMousePos[spremenljivka]].x,mousePos[spremenljivka][indeksMousePos[spremenljivka]].y,vre_id);if(inside==true){$('#spremenljivka_'+spremenljivka+'_vrednost_'+vre_id).prop("checked",true);}});}
function insidePoly(poly,pointx,pointy,vre_id){var i,j;var inside=false;for(i=0,j=poly.length-1;i<poly.length;j=i++){if(((poly[i].y>pointy)!=(poly[j].y>pointy))&&(pointx<(poly[j].x-poly[i].x)*(pointy-poly[i].y)/(poly[j].y-poly[i].y)+poly[i].x))inside=!inside;}
return inside;};var heatmap_data_holder={};var heatmap;var heatmapData=[];var heatmapBackground_data_holder;var max=0;var r=1;var spr_id=0;var anketa_id;var slikaNalozena=0;function heatmapInit(spremenljivka){$('#heatmapRadij').val(r);$('#heatmapRadijValue').text(r);}
function drawHeatmap(){var min=0;for(var row in heatmap_data_holder){var row_object=heatmap_data_holder[row];heatmapData.push({x:parseInt(row_object.lat),y:parseInt(row_object.lng),value:parseInt(row_object.text),radius:r});if(max<parseInt(row_object.text)){max=parseInt(row_object.text);}}
heatmap.setData({min:min,max:max,data:heatmapData});exportHeatmapAsImage(spr_id);}
$(document).ready(function(){$(".fHeatMap").colorbox({scrolling:false,width:"80%",height:"80%",title:"",html:'<div id="heatmap_canvas_all" style="width:100%;height:95%"></div><div style="display:inline-block">'+lang["srv_heatmap_radius"]+': <input id="heatmapRadij" type="range" min="1" max="500" step="1" value="'+r+'" oninput="outputUpdate(value)"/><output for="heatmapRadij" id="heatmapRadijValue">'+r+'</output></div><div style="display:inline-block">&emsp;</div><div id="izvozHeatmap" style="display:inline-block"></div>',onComplete:function(){getHeatMapDataAjax();}});});function outputUpdate(radij){document.querySelector('#heatmapRadijValue').value=radij;r=radij;heatmapData=[];drawHeatmap();max=0;$.ajax({cache:false,crossDomain:true,type:'post',dataType:"text",url:'ajax.php?t=heatmapRadij',data:{heatmapRadij:radij,anketa:anketa_id,sprid:spr_id},error:function(response){console.log("Error in Ajax4HeatMap connection! Please try later!");}});if($('#heatMapSaveAsMsg_'+spr_id).text()!='')
{$('#heatMapSaveAsMsg_'+spr_id).remove();}}
function passHeatMapData(sprid,usrid,loopid,anketa){heatmap_data_holder={spr_id:sprid,usr_id:usrid,loop_id:loopid};if(spr_id!=sprid){heatmapData=[];max=0;}
anketa_id=anketa;spremenljivka=spr_id=sprid;getHeatMapRadij(sprid,anketa);getHeatMapExportIcons(sprid,anketa);}
function getHeatMapRadij(sprid,anketa){$.ajax({cache:false,crossDomain:true,type:'post',dataType:"text",url:'ajax.php?t=getheatmapradij',data:{sprid:sprid,anketa:anketa},error:function(response){console.log("Error in AjaxHeatMapBackGround connection! Please try later!");},success:function(response){r=response;if(r){}else{r=1;}
$('#heatmapRadij').val(r);$('#heatmapRadijValue').text(r);}});}
function getHeatMapExportIcons(sprid,anketa){$.ajax({cache:false,crossDomain:true,type:'post',dataType:"html",url:'ajax.php?t=getheatmapexporticons',data:{sprid:sprid,anketa:anketa},error:function(response){console.log("Error in AjaxHeatMapBackGround connection! Please try later!");},success:function(response){$('#izvozHeatmap').html(response);}});}
function getHeatMapBackGround(){$.ajax({cache:false,crossDomain:true,type:'post',dataType:"text",url:'ajax.php?t=heatmapBackgroundData',data:{heatmapBackground_data:spremenljivka},error:function(response){console.log("Error in AjaxHeatMapBackGround connection! Please try later!");},success:function(response){heatmapBackground_data_holder=response;$('#heatmap_canvas_all_'+spremenljivka).append(heatmapBackground_data_holder);$('#heatmap_canvas_all_'+spr_id).find('img').attr('id','heatmap-background');var bgSrc=$('#heatmap_canvas_all_'+spr_id).find('img').attr('src');var slikaNaStrezniku=checkBgSrc(bgSrc);if(slikaNaStrezniku<=0){var url=getSiteUrl();bgSrc=url+"uploadi/editor/"+spr_id+"tmpImage.png";$('#heatmap_canvas_all_'+spr_id).find('img').attr('src',bgSrc);}
var bgWidth=$('#heatmap_canvas_all_'+spr_id).find('img').width();var bgHeight=$('#heatmap_canvas_all_'+spr_id).find('img').height();$('#heatmap_canvas_all_'+spr_id).width(bgWidth);$('#heatmap_canvas_all_'+spr_id).height(bgHeight);$('#heatmap-canvas').width(bgWidth);$('#heatmap-canvas').height(bgHeight);$('#heatmap-canvas').css("background","transparent url('"+bgSrc+"') no-repeat left top");$('#heatmap-canvas').css("background-size",bgWidth+"px "+bgHeight+"px");heatmap=h337.create({container:document.getElementById('heatmap_canvas_all_'+spr_id),opacity:.5,blur:0.7});drawHeatmap();}});}
function checkBgSrc(bgSrc){var findme='editor/';var pos=bgSrc.indexOf(findme);return pos;}
function getSiteUrl(){$.ajax({cache:false,crossDomain:true,type:'post',dataType:"text",url:'ajax.php?t=getSiteUrl',error:function(response){console.log("Error in AjaxHeatMapBackGround connection! Please try later!");},success:function(response){siteUrl=response;}});return siteUrl;}
function getHeatMapDataAjax(){$.ajax({cache:false,crossDomain:true,type:'post',dataType:"json",url:'ajax.php?t=heatmapData',data:{heatmap_data:heatmap_data_holder,anketa:anketa_id},error:function(response){console.log("Error in AjaxHeatMapDataAjax connection! Please try later!");},success:function(response){$('#heatmap_canvas_all').attr('id','heatmap_canvas_all_'+spremenljivka);eliminateDuplicates();heatmap_data_holder=response;heatmapInit(spremenljivka);getHeatMapBackGround();}});}
function eliminateDuplicates(){var i=1;for(var row in heatmap_data_holder){var row_object=heatmap_data_holder[row];if(row==0){delete row_object[0];delete row_object[1];delete row_object[2];delete row_object[3];}}}
function insert(str,index,value){return str.substring(0,index)+value+str.substring(index);}
function exportHeatmapAsImage(spr_id){var canvas=document.getElementById("heatmap-canvas");var img=document.getElementById("heatmap-background");var bgWidth=$('#heatmap_canvas_all_'+spr_id).find('img').width();var bgHeight=$('#heatmap_canvas_all_'+spr_id).find('img').height();var ctx=canvas.getContext("2d");if(slikaNalozena){izrisiSliko(canvas,img,bgWidth,bgHeight,ctx);}else{img.onload=function(){izrisiSliko(canvas,img,bgWidth,bgHeight,ctx);slikaNalozena=1;}}}
function izrisiSliko(canvas,img,bgWidth,bgHeight,ctx){ctx.globalAlpha=0.4;ctx.drawImage(img,0,0,bgWidth,bgHeight);var image=canvas.toDataURL("image/png");$.ajax({cache:false,crossDomain:true,type:'post',dataType:"text",url:'ajax.php?t=saveHeatmapImage',data:{sprid:spr_id,image:image},error:function(response){console.log("Error in SurveyHeatMapSaveImage connection! Please try later!");},success:function(response){}});};;(function(name,context,factory){if(typeof module!=="undefined"&&module.exports){module.exports=factory();}else if(typeof define==="function"&&define.amd){define(factory);}else{context[name]=factory();}})("h337",this,function(){var HeatmapConfig={defaultRadius:40,defaultRenderer:'canvas2d',defaultGradient:{0.25:"rgb(0,0,255)",0.55:"rgb(0,255,0)",0.85:"yellow",1.0:"rgb(255,0,0)"},defaultMaxOpacity:1,defaultMinOpacity:0,defaultBlur:.85,defaultXField:'x',defaultYField:'y',defaultValueField:'value',plugins:{}};var Store=(function StoreClosure(){var Store=function Store(config){this._coordinator={};this._data=[];this._radi=[];this._min=10;this._max=1;this._xField=config['xField']||config.defaultXField;this._yField=config['yField']||config.defaultYField;this._valueField=config['valueField']||config.defaultValueField;if(config["radius"]){this._cfgRadius=config["radius"];}};var defaultRadius=HeatmapConfig.defaultRadius;Store.prototype={_organiseData:function(dataPoint,forceRender){var x=dataPoint[this._xField];var y=dataPoint[this._yField];var radi=this._radi;var store=this._data;var max=this._max;var min=this._min;var value=dataPoint[this._valueField]||1;var radius=dataPoint.radius||this._cfgRadius||defaultRadius;if(!store[x]){store[x]=[];radi[x]=[];}
if(!store[x][y]){store[x][y]=value;radi[x][y]=radius;}else{store[x][y]+=value;}
var storedVal=store[x][y];if(storedVal>max){if(!forceRender){this._max=storedVal;}else{this.setDataMax(storedVal);}
return false;}else if(storedVal<min){if(!forceRender){this._min=storedVal;}else{this.setDataMin(storedVal);}
return false;}else{return{x:x,y:y,value:value,radius:radius,min:min,max:max};}},_unOrganizeData:function(){var unorganizedData=[];var data=this._data;var radi=this._radi;for(var x in data){for(var y in data[x]){unorganizedData.push({x:x,y:y,radius:radi[x][y],value:data[x][y]});}}
return{min:this._min,max:this._max,data:unorganizedData};},_onExtremaChange:function(){this._coordinator.emit('extremachange',{min:this._min,max:this._max});},addData:function(){if(arguments[0].length>0){var dataArr=arguments[0];var dataLen=dataArr.length;while(dataLen--){this.addData.call(this,dataArr[dataLen]);}}else{var organisedEntry=this._organiseData(arguments[0],true);if(organisedEntry){if(this._data.length===0){this._min=this._max=organisedEntry.value;}
this._coordinator.emit('renderpartial',{min:this._min,max:this._max,data:[organisedEntry]});}}
return this;},setData:function(data){var dataPoints=data.data;var pointsLen=dataPoints.length;this._data=[];this._radi=[];for(var i=0;i<pointsLen;i++){this._organiseData(dataPoints[i],false);}
this._max=data.max;this._min=data.min||0;this._onExtremaChange();this._coordinator.emit('renderall',this._getInternalData());return this;},removeData:function(){},setDataMax:function(max){this._max=max;this._onExtremaChange();this._coordinator.emit('renderall',this._getInternalData());return this;},setDataMin:function(min){this._min=min;this._onExtremaChange();this._coordinator.emit('renderall',this._getInternalData());return this;},setCoordinator:function(coordinator){this._coordinator=coordinator;},_getInternalData:function(){return{max:this._max,min:this._min,data:this._data,radi:this._radi};},getData:function(){return this._unOrganizeData();}};return Store;})();var Canvas2dRenderer=(function Canvas2dRendererClosure(){var _getColorPalette=function(config){var gradientConfig=config.gradient||config.defaultGradient;var paletteCanvas=document.createElement('canvas');var paletteCtx=paletteCanvas.getContext('2d');paletteCanvas.width=256;paletteCanvas.height=1;var gradient=paletteCtx.createLinearGradient(0,0,256,1);for(var key in gradientConfig){gradient.addColorStop(key,gradientConfig[key]);}
paletteCtx.fillStyle=gradient;paletteCtx.fillRect(0,0,256,1);return paletteCtx.getImageData(0,0,256,1).data;};var _getPointTemplate=function(radius,blurFactor){var tplCanvas=document.createElement('canvas');var tplCtx=tplCanvas.getContext('2d');var x=radius;var y=radius;tplCanvas.width=tplCanvas.height=radius*2;if(blurFactor==1){tplCtx.beginPath();tplCtx.arc(x,y,radius,0,2*Math.PI,false);tplCtx.fillStyle='rgba(0,0,0,1)';tplCtx.fill();}else{var gradient=tplCtx.createRadialGradient(x,y,radius*blurFactor,x,y,radius);gradient.addColorStop(0,'rgba(0,0,0,1)');gradient.addColorStop(1,'rgba(0,0,0,0)');tplCtx.fillStyle=gradient;tplCtx.fillRect(0,0,2*radius,2*radius);}
return tplCanvas;};var _prepareData=function(data){var renderData=[];var min=data.min;var max=data.max;var radi=data.radi;var data=data.data;var xValues=Object.keys(data);var xValuesLen=xValues.length;while(xValuesLen--){var xValue=xValues[xValuesLen];var yValues=Object.keys(data[xValue]);var yValuesLen=yValues.length;while(yValuesLen--){var yValue=yValues[yValuesLen];var value=data[xValue][yValue];var radius=radi[xValue][yValue];renderData.push({x:xValue,y:yValue,value:value,radius:radius});}}
return{min:min,max:max,data:renderData};};function Canvas2dRenderer(config){var container=config.container;var shadowCanvas=this.shadowCanvas=document.createElement('canvas');var canvas=this.canvas=config.canvas||document.createElement('canvas');var renderBoundaries=this._renderBoundaries=[10000,10000,0,0];var computed=getComputedStyle(config.container)||{};canvas.id='heatmap-canvas';this._width=canvas.width=shadowCanvas.width=config.width||+(computed.width.replace(/px/,''));this._height=canvas.height=shadowCanvas.height=config.height||+(computed.height.replace(/px/,''));this.shadowCtx=shadowCanvas.getContext('2d');this.ctx=canvas.getContext('2d');canvas.style.cssText=shadowCanvas.style.cssText='position:absolute;left:0;top:0;';container.style.position='relative';container.appendChild(canvas);this._palette=_getColorPalette(config);this._templates={};this._setStyles(config);};Canvas2dRenderer.prototype={renderPartial:function(data){if(data.data.length>0){this._drawAlpha(data);this._colorize();}},renderAll:function(data){this._clear();if(data.data.length>0){this._drawAlpha(_prepareData(data));this._colorize();}},_updateGradient:function(config){this._palette=_getColorPalette(config);},updateConfig:function(config){if(config['gradient']){this._updateGradient(config);}
this._setStyles(config);},setDimensions:function(width,height){this._width=width;this._height=height;this.canvas.width=this.shadowCanvas.width=width;this.canvas.height=this.shadowCanvas.height=height;},_clear:function(){this.shadowCtx.clearRect(0,0,this._width,this._height);this.ctx.clearRect(0,0,this._width,this._height);},_setStyles:function(config){this._blur=(config.blur==0)?0:(config.blur||config.defaultBlur);if(config.backgroundColor){this.canvas.style.backgroundColor=config.backgroundColor;}
this._width=this.canvas.width=this.shadowCanvas.width=config.width||this._width;this._height=this.canvas.height=this.shadowCanvas.height=config.height||this._height;this._opacity=(config.opacity||0)*255;this._maxOpacity=(config.maxOpacity||config.defaultMaxOpacity)*255;this._minOpacity=(config.minOpacity||config.defaultMinOpacity)*255;this._useGradientOpacity=!!config.useGradientOpacity;},_drawAlpha:function(data){var min=this._min=data.min;var max=this._max=data.max;var data=data.data||[];var dataLen=data.length;var blur=1-this._blur;while(dataLen--){var point=data[dataLen];var x=point.x;var y=point.y;var radius=point.radius;var value=Math.min(point.value,max);var rectX=x-radius;var rectY=y-radius;var shadowCtx=this.shadowCtx;var tpl;if(!this._templates[radius]){this._templates[radius]=tpl=_getPointTemplate(radius,blur);}else{tpl=this._templates[radius];}
var templateAlpha=(value-min)/(max-min);shadowCtx.globalAlpha=templateAlpha<.01?.01:templateAlpha;shadowCtx.drawImage(tpl,rectX,rectY);if(rectX<this._renderBoundaries[0]){this._renderBoundaries[0]=rectX;}
if(rectY<this._renderBoundaries[1]){this._renderBoundaries[1]=rectY;}
if(rectX+2*radius>this._renderBoundaries[2]){this._renderBoundaries[2]=rectX+2*radius;}
if(rectY+2*radius>this._renderBoundaries[3]){this._renderBoundaries[3]=rectY+2*radius;}}},_colorize:function(){var x=this._renderBoundaries[0];var y=this._renderBoundaries[1];var width=this._renderBoundaries[2]-x;var height=this._renderBoundaries[3]-y;var maxWidth=this._width;var maxHeight=this._height;var opacity=this._opacity;var maxOpacity=this._maxOpacity;var minOpacity=this._minOpacity;var useGradientOpacity=this._useGradientOpacity;if(x<0){x=0;}
if(y<0){y=0;}
if(x+width>maxWidth){width=maxWidth-x;}
if(y+height>maxHeight){height=maxHeight-y;}
var img=this.shadowCtx.getImageData(x,y,width,height);var imgData=img.data;var len=imgData.length;var palette=this._palette;for(var i=3;i<len;i+=4){var alpha=imgData[i];var offset=alpha*4;if(!offset){continue;}
var finalAlpha;if(opacity>0){finalAlpha=opacity;}else{if(alpha<maxOpacity){if(alpha<minOpacity){finalAlpha=minOpacity;}else{finalAlpha=alpha;}}else{finalAlpha=maxOpacity;}}
imgData[i-3]=palette[offset];imgData[i-2]=palette[offset+1];imgData[i-1]=palette[offset+2];imgData[i]=useGradientOpacity?palette[offset+3]:finalAlpha;}
img.data=imgData;this.ctx.putImageData(img,x,y);this._renderBoundaries=[1000,1000,0,0];},getValueAt:function(point){var value;var shadowCtx=this.shadowCtx;var img=shadowCtx.getImageData(point.x,point.y,1,1);var data=img.data[3];var max=this._max;var min=this._min;value=(Math.abs(max-min)*(data/255))>>0;return value;},getDataURL:function(){return this.canvas.toDataURL();}};return Canvas2dRenderer;})();var Renderer=(function RendererClosure(){var rendererFn=false;if(HeatmapConfig['defaultRenderer']==='canvas2d'){rendererFn=Canvas2dRenderer;}
return rendererFn;})();var Util={merge:function(){var merged={};var argsLen=arguments.length;for(var i=0;i<argsLen;i++){var obj=arguments[i]
for(var key in obj){merged[key]=obj[key];}}
return merged;}};var Heatmap=(function HeatmapClosure(){var Coordinator=(function CoordinatorClosure(){function Coordinator(){this.cStore={};};Coordinator.prototype={on:function(evtName,callback,scope){var cStore=this.cStore;if(!cStore[evtName]){cStore[evtName]=[];}
cStore[evtName].push((function(data){return callback.call(scope,data);}));},emit:function(evtName,data){var cStore=this.cStore;if(cStore[evtName]){var len=cStore[evtName].length;for(var i=0;i<len;i++){var callback=cStore[evtName][i];callback(data);}}}};return Coordinator;})();var _connect=function(scope){var renderer=scope._renderer;var coordinator=scope._coordinator;var store=scope._store;coordinator.on('renderpartial',renderer.renderPartial,renderer);coordinator.on('renderall',renderer.renderAll,renderer);coordinator.on('extremachange',function(data){scope._config.onExtremaChange&&scope._config.onExtremaChange({min:data.min,max:data.max,gradient:scope._config['gradient']||scope._config['defaultGradient']});});store.setCoordinator(coordinator);};function Heatmap(){var config=this._config=Util.merge(HeatmapConfig,arguments[0]||{});this._coordinator=new Coordinator();if(config['plugin']){var pluginToLoad=config['plugin'];if(!HeatmapConfig.plugins[pluginToLoad]){throw new Error('Plugin \''+pluginToLoad+'\' not found. Maybe it was not registered.');}else{var plugin=HeatmapConfig.plugins[pluginToLoad];this._renderer=new plugin.renderer(config);this._store=new plugin.store(config);}}else{this._renderer=new Renderer(config);this._store=new Store(config);}
_connect(this);};Heatmap.prototype={addData:function(){this._store.addData.apply(this._store,arguments);return this;},removeData:function(){this._store.removeData&&this._store.removeData.apply(this._store,arguments);return this;},setData:function(){this._store.setData.apply(this._store,arguments);return this;},setDataMax:function(){this._store.setDataMax.apply(this._store,arguments);return this;},setDataMin:function(){this._store.setDataMin.apply(this._store,arguments);return this;},configure:function(config){this._config=Util.merge(this._config,config);this._renderer.updateConfig(this._config);this._coordinator.emit('renderall',this._store._getInternalData());return this;},repaint:function(){this._coordinator.emit('renderall',this._store._getInternalData());return this;},getData:function(){return this._store.getData();},getDataURL:function(){return this._renderer.getDataURL();},getValueAt:function(point){if(this._store.getValueAt){return this._store.getValueAt(point);}else if(this._renderer.getValueAt){return this._renderer.getValueAt(point);}else{return null;}}};return Heatmap;})();var heatmapFactory={create:function(config){return new Heatmap(config);},register:function(pluginKey,plugin){HeatmapConfig.plugins[pluginKey]=plugin;}};return heatmapFactory;});;function GridDraggableBox(tip,spremenljivka,vre_id,ajax,anketa,site_url,usr_id,other,mobile){var top_cat=-1;var left_cat=-1;if(mobile==0||mobile==2){top_cat=-6;top_cat_right=30;left_cat=-6;}
$('#spremenljivka_'+spremenljivka+'_vrednost_'+vre_id).detach().css({top:top_cat,left:left_cat}).appendTo('#half_frame_dropping_'+spremenljivka).draggable({cursor:'move',helper:'original',zIndex:100,revert:function(socketObj)
{checkBranching();var revert=false;var cat_default_height=37;var cat_margin_left=10+5*2+1*2;var last_vre_id_revert=last_vre_id[spremenljivka];var trenutna_vre_id_revert=vre_id_global[spremenljivka];var indeks_revert=last_drop[trenutna_vre_id_revert];vre_id=trenutna_vre_id_revert;grd_id=indeks_revert;var prejsnji_okvir=$('#half2_frame_dropping_'+last_indeks[spremenljivka]+'_'+spremenljivka);var trenutni_okvir=$('#half2_frame_dropping_'+last_drop[trenutna_vre_id_revert]+'_'+spremenljivka);var draggable=draggable_global[trenutna_vre_id_revert];if(socketObj===false){revert=true;if(tip==6){if(indeks_revert!=0){draggableOnDroppable[last_vre_id_revert][indeks_revert]=true;draggableOverDroppable[vre_id][indeks_revert]=true;frame_and_question_height(trenutni_okvir,spremenljivka,num_grids_global[spremenljivka],cat_margin_left,cat_default_height,draggable);}
var prejsnji_okvir_kat_prisotna=[];var stevilo_prisotnih=prejsnji_okvir.children('div').length;for(var z=1;z<=stevilo_prisotnih;z++){prejsnji_okvir_kat_prisotna[z]=prejsnji_okvir.children('div :nth-child('+z+')').attr('value');if(last_indeks[spremenljivka]!=0&&indeks_revert==0){if(prejsnji_okvir_kat_prisotna[z]===undefined){last_frame_height(prejsnji_okvir,spremenljivka,num_grids_global[spremenljivka],cat_margin_left,draggable_global[trenutna_vre_id_revert]);}
last_indeks[spremenljivka]=0;}
if((last_indeks[spremenljivka]!=last_drop[trenutna_vre_id_revert])&&(indeks_revert!=0)){frame_height(spremenljivka,vre_id,grd_id,revert);if(prejsnji_okvir_kat_prisotna[z]===undefined){last_frame_height(prejsnji_okvir,spremenljivka,num_grids_global[spremenljivka],cat_margin_left,draggable_global[trenutna_vre_id_revert]);}
var default_var_height=1;dynamic_question_height(spremenljivka,num_grids_global[spremenljivka],default_var_height);}}}
return true;}
else{revert=false;return false;}},stack:'#half2_'+spremenljivka+' div',opacity:0.9,containment:'#spremenljivka_'+spremenljivka,});$('#spremenljivka_'+spremenljivka+'_vrednost_'+vre_id).attr({'reverted':false,'value':vre_id,'name':'vrednost_'+spremenljivka,'onclick':'checkBranching();','missing':other});if(tip==16){$('#spremenljivka_'+spremenljivka+'_vrednost_'+vre_id).draggable("option","helper","clone");}
var default_cat_height=15;var final_height=0;var cat_text_length=$('#spremenljivka_'+spremenljivka+'_vrednost_'+vre_id).html().length;var num_of_br=$('#spremenljivka_'+spremenljivka+'_vrednost_'+vre_id+' br').length;var num_imgs=$('#spremenljivka_'+spremenljivka+'_vrednost_'+vre_id+' img').length;var max_cat_text_length=30;if((cat_text_length>max_cat_text_length)&&(num_of_br==0)&&(num_imgs==0)){var txt=$('#spremenljivka_'+spremenljivka+'_vrednost_'+vre_id).html();var txt_alt=txt.slice(0,max_cat_text_length)+"<br>"+txt.slice(max_cat_text_length);$('#spremenljivka_'+spremenljivka+'_vrednost_'+vre_id).html(txt_alt);final_height=final_height+default_cat_height+25;}
if(num_imgs!=0){var img_height=0;var max_width=230;var img=$('#spremenljivka_'+spremenljivka+'_vrednost_'+vre_id+' img');var img_width=img.width();var img_height=img.height();if(img_width>max_width){img_height=(img_height/img_width)*max_width;img.css({width:max_width});img.css({height:img_height});}
if(img_height>25){final_height=final_height+img_height;}}
if(num_of_br!=0){var br_height=num_of_br*25;if(num_imgs==0){final_height=final_height+default_cat_height+br_height;}
else{final_height=final_height+br_height;}
if((img_height<25)&&(img_height!=0)){final_height=final_height+img_height;}}
if(final_height!=0){$('#spremenljivka_'+spremenljivka+'_vrednost_'+vre_id).css({'height':final_height});}}
function GridDragDropDelovanjeBox(num_grids,indeks,tip,spremenljivka,site_url,ajax,anketa,usr_id,num_of_cats,mobile){var top_cat=-1;var left_cat=-1;var default_var_height=290;if(mobile==0||mobile==2){top_cat=-6;top_cat_right=30;left_cat=-6;var default_var_height=220;}
var cat_margin_left=10+5*2+1*2;var cat_max_height=0;var grid_title_height=15+5*2+1*2;var cat_default_height=37;var title_heigth=26;var naslov_height=$('#spremenljivka_'+spremenljivka+' .naslov').height();var margin_now=10;var cat_default_inline_text_length=16;var variable_holder_height=$('#spremenljivka_'+spremenljivka+' .variable_holder').height();$('#spremenljivka_'+spremenljivka+' td.middle img').css({'top':(naslov_height+variable_holder_height/2)+'px'});if(ajax){$.get(site_url+'/main/survey/ajax.php?a=get_dragdrop1_data',{spremenljivka:spremenljivka,anketa:anketa},function(data){var default_var_height=$('#spremenljivka_'+spremenljivka).height();if(indeks==1){var cat_total_height_left=0;var array_length=data.length;var vre_id=[];var cat_margin=30;for(var i=0;i<array_length;i++){vre_id[i]=data[i];var cat_height=$('#spremenljivka_'+spremenljivka+'_vrednost_'+vre_id[i]).height();cat_height=parseInt(cat_height);if(mobile==1){var cat_text_length=$('#spremenljivka_'+spremenljivka+'_vrednost_'+vre_id[i]).text().length;if(cat_text_length>(cat_default_inline_text_length)*2){var num_of_rows=cat_text_length/cat_default_inline_text_length;cat_height=cat_height+25*(num_of_rows-1);$('#spremenljivka_'+spremenljivka+'_vrednost_'+vre_id[i]).css({'height':(cat_height)+'px'});}}
cat_total_height_left=cat_total_height_left+cat_height+cat_margin_left;if(cat_max_height<cat_height){cat_max_height=cat_height;}}
$('#half_frame_dropping_'+spremenljivka).css({'height':(cat_total_height_left)+'px'});}
if(indeks==1){for(var j=1;j<=num_grids;j++){var okvir_height=$('#half2_frame_dropping_'+j+'_'+spremenljivka).height();okvir_height=okvir_height+10+2;frame_total_height_right[spremenljivka]=frame_total_height_right[spremenljivka]+okvir_height+margin_now+title_heigth;}}
default_var_height_1[spremenljivka]=$('#spremenljivka_'+spremenljivka).height();if(cat_total_height_left>frame_total_height_right[spremenljivka]){if((cat_total_height_left>default_var_height)){dynamic_question_height_sub(cat_total_height_left,spremenljivka,default_var_height_1[spremenljivka]);}else if(cat_total_height_left<default_var_height_1[spremenljivka]){dynamic_question_height_sub(cat_total_height_left,spremenljivka,default_var_height_1[spremenljivka]);}else{dynamic_question_height_sub(cat_total_height_left,spremenljivka,default_var_height_1[spremenljivka]);}}else if(cat_total_height_left<frame_total_height_right[spremenljivka]){$('#spremenljivka_'+spremenljivka+' div.variable_holder.clr').height(frame_total_height_right[spremenljivka]+50);frame_total_height_right[spremenljivka]=frame_total_height_right[spremenljivka]+naslov_height;$('#spremenljivka_'+spremenljivka).height(frame_total_height_right[spremenljivka]+50);}},"json");}
$('#half_frame_dropping_'+spremenljivka).droppable({hoverClass:'frame_dropping_hover',drop:function(event,ui){checkBranching();$(ui.draggable).detach().css({top:top_cat,left:left_cat}).appendTo(this);var vre_id=ui.draggable.attr('value');if(ajax&&tip==6){$.post(site_url+'/main/survey/ajax.php?a=delete_dragdrop_grid_data_1',{spremenljivka:spremenljivka,vre_id:vre_id,usr_id:usr_id,anketa:anketa,indeks:last_indeks[spremenljivka]});draggableOnDroppable[vre_id][last_indeks[spremenljivka]]=false;draggableOverDroppable[vre_id][last_indeks[spremenljivka]]=false;var prejsnji_okvir=$('#half2_frame_dropping_'+last_indeks[spremenljivka]+'_'+spremenljivka);var prejsnji_okvir_kat_prisotna=prejsnji_okvir.children('div').attr('value');if(prejsnji_okvir_kat_prisotna===undefined&&last_indeks[spremenljivka]!=0){last_frame_height(prejsnji_okvir,spremenljivka,num_grids,cat_margin_left,ui.draggable);}
dynamic_question_height(spremenljivka,num_grids);last_indeks[spremenljivka]=0;last_drop[vre_id]=0;last_vre_id[spremenljivka]=0;}
from_left[vre_id]=true;},out:function(event,ui){},over:function(event,ui){var vre_id=ui.draggable.attr('value');vre_id_global[spremenljivka]=vre_id;draggable_global[vre_id]=ui.draggable;}});$('#half2_frame_dropping_'+indeks+'_'+spremenljivka).droppable({hoverClass:'frame_dropping_hover',tolerance:"pointer",drop:function(event,ui){checkBranching();if(mobile==0||mobile==2){}else if(mobile==1){}
num_grids=num_grids_global[spremenljivka];var vre_id=ui.draggable.attr('value');var other=ui.draggable.attr('missing');var other_present=$(this).children('div').attr('missing');var cat_right=$(this).children('div').height();var vre_id_present=$(this).children('div').attr('value');draggable_global[vre_id]=ui.draggable;var title_heigth=26;var margin_now=10;var height_beside=40;var final_height_right_block=0;final_height_right_block=final_height_right_block+height_beside;for(var j=1;j<=num_grids;j++){var okvir_height=$('#half2_frame_dropping_'+j+'_'+spremenljivka).height();okvir_height=okvir_height+10+2;final_height_right_block=final_height_right_block+okvir_height+margin_now+title_heigth;}
var default_var_height=$('#spremenljivka_'+spremenljivka).height();if(final_height_right_block>default_var_height){$('#spremenljivka_'+spremenljivka).css({'height':final_height_right_block+'px'});$('#spremenljivka_'+spremenljivka+' div.variable_holder.clr').css({'height':(final_height_right_block-100)+'px'});}
if(tip==6){if(cat_right){$(ui.draggable).detach().css({top:(top_cat_right),left:-6}).prependTo(this);}else{$(ui.draggable).detach().css({top:top_cat_right,left:-6}).appendTo(this);}
if(ajax){$.post(site_url+'/main/survey/ajax.php?a=accept_dragdrop_grid',{vre_id_present:vre_id_present,tip:tip,spremenljivka:spremenljivka,vre_id:vre_id,anketa:anketa,usr_id:usr_id,indeks:indeks,cat_right:cat_right,last_vre_id:last_vre_id[spremenljivka]});if(last_drop[vre_id]!=indeks||last_drop[vre_id]!=0){$.post(site_url+'/main/survey/ajax.php?a=delete_dragdrop_grid_data_1',{spremenljivka:spremenljivka,vre_id:vre_id,usr_id:usr_id,anketa:anketa,indeks:last_drop[vre_id]});}}}
else if(tip==16&&draggableOnDroppable[vre_id][indeks]==false){var visina_test=ui.draggable.css('height');$(ui.draggable.clone()).detach().css({top:top_cat_right,left:left_cat,height:visina_test}).prependTo(this);if(ajax){$.post(site_url+'/main/survey/ajax.php?a=accept_dragdrop_grid',{vre_id_present:vre_id_present,tip:tip,spremenljivka:spremenljivka,vre_id:vre_id,anketa:anketa,usr_id:usr_id,indeks:indeks,cat_right:cat_right,last_vre_id:last_vre_id[spremenljivka]});}}
if(last_indeks[spremenljivka]!==undefined){var prejsnji_okvir=$('#half2_frame_dropping_'+last_indeks[spremenljivka]+'_'+spremenljivka);var prejsnji_okvir_kat_prisotna=prejsnji_okvir.children('div').attr('value');if(last_indeks[spremenljivka]==0||prejsnji_okvir_kat_prisotna===undefined){last_frame_height(prejsnji_okvir,spremenljivka,num_grids,cat_margin_left,ui.draggable);}}
last_drop[vre_id]=indeks;draggableOnDroppable[vre_id][indeks]=true;if(tip==6){from_left[vre_id]=false;}},over:function(event,ui){num_grids=num_grids_global[spremenljivka];checkBranching();var vre_id=ui.draggable.attr('value');var vre_id_present=$(this).children('div').attr('value');vre_id_global[spremenljivka]=vre_id;var trenutni_okvir=$('#half2_frame_dropping_'+indeks+'_'+spremenljivka);if(last_indeks[spremenljivka]==0&&tip==6){last_indeks[spremenljivka]=indeks;}else{var last_vrednost_id_temp=last_vre_id[spremenljivka];var prejsnji_okvir=$('#half2_frame_dropping_'+last_indeks[spremenljivka]+'_'+spremenljivka);if(tip==6){var prejsnji_okvir_kat_prisotna=[];var stevilo_prisotnih=prejsnji_okvir.children('div').length;for(var z=1;z<=stevilo_prisotnih;z++){prejsnji_okvir_kat_prisotna[z]=prejsnji_okvir.children('div :nth-child('+z+')').attr('value');if(last_vrednost_id_temp!=0){if((draggableOnDroppable[last_vrednost_id_temp][indeks]==false)&&((prejsnji_okvir_kat_prisotna===undefined)||(prejsnji_okvir_kat_prisotna==vre_id))){if((tip==16&&draggableOnDroppable[vre_id][last_indeks[spremenljivka]]==false)||tip==6){last_frame_height(prejsnji_okvir,spremenljivka,num_grids,cat_margin_left,ui.draggable);}}}}}}
if(vre_id_present!==undefined){if(draggableOnDroppable[vre_id_present][indeks]!=true||(draggableOverDroppable[vre_id][indeks]==false&&(tip==16||tip==6))){draggableOverDroppable[vre_id][indeks]=true;if((tip==16&&draggableOnDroppable[vre_id][indeks]==false)||tip==6){frame_and_question_height(trenutni_okvir,spremenljivka,num_grids,cat_margin_left,cat_default_height,ui.draggable);if(from_left[vre_id]!=false){dynamic_question_height(spremenljivka,num_grids);}}}}else{if(vre_id_present===undefined||(draggableOverDroppable[vre_id][indeks]==false&&(tip==16||tip==6))){draggableOverDroppable[vre_id][indeks]=true;if((tip==16&&(draggableOnDroppable[vre_id][indeks]==false||last_drop[vre_id]==0))||tip==6){frame_and_question_height(trenutni_okvir,spremenljivka,num_grids,cat_margin_left,cat_default_height,ui.draggable);if(from_left[vre_id]!=false){dynamic_question_height(spremenljivka,num_grids);}}}}
if(draggableOverDroppable[vre_id][indeks]==true){if(mobile==0||mobile==2){}
else if(mobile==1){}}
last_indeks[spremenljivka]=indeks;cat_pushed[spremenljivka]=false;},out:function(event,ui){num_grids=num_grids_global[spremenljivka];var vre_id=ui.draggable.attr('value');var vre_id_present=$(this).children('div').attr('value');var prejsnji_okvir=$('#half2_frame_dropping_'+last_indeks[spremenljivka]+'_'+spremenljivka);var prejsnji_okvir_kat_prisotna=prejsnji_okvir.children('div').attr('value');if(draggableOverDroppable[vre_id][indeks]==true&&((tip==16&&draggableOnDroppable[vre_id][last_indeks[spremenljivka]]==false)||tip==6)){last_frame_height(prejsnji_okvir,spremenljivka,num_grids,cat_margin_left,ui.draggable);}
last_vre_id[spremenljivka]=vre_id;last_indeks[spremenljivka]=indeks;if(tip==6||(tip==16&&draggableOnDroppable[vre_id][last_indeks[spremenljivka]]==false)){draggableOnDroppable[vre_id][indeks]=false;}
draggableOverDroppable[vre_id][indeks]=false;draggable_global[vre_id]=ui.draggable;if(draggableOverDroppable[vre_id][indeks]==false){if(mobile==0||mobile==2){}else if(mobile==1){}}}});if(tip==16){$('#half2_frame_dropping_'+indeks+'_'+spremenljivka).click(function(){$('#half2_frame_dropping_'+indeks+'_'+spremenljivka).children().click(function(){var index1=$('#half2_frame_dropping_'+indeks+'_'+spremenljivka).children().index(this);var prejsnji_okvir=$('#half2_frame_dropping_'+indeks+'_'+spremenljivka);var vre_id=$('#half2_frame_dropping_'+indeks+'_'+spremenljivka+' div:nth-child('+(index1+1)+')').attr('value');var draggable=$('#half2_frame_dropping_'+indeks+'_'+spremenljivka+' div:nth-child('+(index1+1)+')');$('#half2_frame_dropping_'+indeks+'_'+spremenljivka+' div:nth-child('+(index1+1)+')').detach();if(ajax){$.post(site_url+'/main/survey/ajax.php?a=delete_dragdrop_grid_data',{tip:tip,spremenljivka:spremenljivka,vre_id:vre_id,usr_id:usr_id,anketa:anketa,indeks:indeks});}
console.log(draggableOnDroppable[vre_id][indeks]);last_frame_height(prejsnji_okvir,spremenljivka,num_grids,cat_margin_left,draggable);draggableOnDroppable[vre_id][indeks]=false;draggableOverDroppable[vre_id][indeks]=false;from_left[vre_id]=true;dynamic_question_height(spremenljivka,num_grids);});});}}
function frame_and_question_height(trenutni_okvir,spremenljivka,num_grids,cat_margin_left,cat_default_height,draggable){var other=draggable.attr('missing');var other_present=trenutni_okvir.children('div').attr('missing');var cat_height_now=draggable.height();var cat_right=trenutni_okvir.children('div').height();if(cat_right){var whole_heigth=trenutni_okvir.height();cat_height_now=cat_height_now+cat_margin_left;var okvir_height=whole_heigth+cat_height_now;trenutni_okvir.css({'height':(okvir_height)+'px'});}else{cat_height_now=cat_height_now+cat_default_height;if(cat_height_now<15){cat_height_now=15;}
trenutni_okvir.css({'height':(cat_height_now)+'px'});}}
function frame_height(spremenljivka,vre_id,grd_id,revert){var cat_default_height=37;var cat_height_now=$('#spremenljivka_'+spremenljivka+'_vrednost_'+vre_id).height();var cat_right=$('#half2_frame_dropping_'+grd_id+'_'+spremenljivka).children('div').height();if(cat_right||revert){var whole_heigth=$('#half2_frame_dropping_'+grd_id+'_'+spremenljivka).height();cat_height_now=cat_height_now+cat_margin_left;var okvir_height=parseInt(whole_heigth)+parseInt(cat_height_now);$('#half2_frame_dropping_'+grd_id+'_'+spremenljivka).css({'height':(okvir_height)+'px'});}else{cat_height_now=cat_height_now+cat_default_height;if(cat_height_now<15){cat_height_now=15;}
$('#half2_frame_dropping_'+grd_id+'_'+spremenljivka).css({'height':(cat_height_now)+'px'});}}
function last_frame_height(prejsnji_okvir,spremenljivka,num_grids,cat_margin_left,draggable){var trenutna_visina_okvirja=prejsnji_okvir.height();var trenutna_visina_kategorije=draggable.height();koncna_visina_zapuscenega_okvirja=trenutna_visina_okvirja-trenutna_visina_kategorije-cat_margin_left;if(koncna_visina_zapuscenega_okvirja<15){koncna_visina_zapuscenega_okvirja=15;}
prejsnji_okvir.css({'height':(koncna_visina_zapuscenega_okvirja)+'px'});}
function dynamic_question_height_sub(frame_height,spremenljivka){default_height_no_px=$('#spremenljivka_'+spremenljivka).height();var naslov_height=$('#spremenljivka_'+spremenljivka+' .naslov').height();if((frame_height+naslov_height)>default_height_no_px){$('#spremenljivka_'+spremenljivka).height(frame_height+naslov_height+50);$('#spremenljivka_'+spremenljivka+' div.variable_holder.clr').height(frame_height+25);}else if((frame_height+naslov_height)<default_height_no_px){$('#spremenljivka_'+spremenljivka).height(default_height_no_px+50);$('#spremenljivka_'+spremenljivka+' div.variable_holder.clr').height(default_height_no_px-naslov_height+25);}}
function dynamic_question_height(spremenljivka,num_grids){var naslov_height=$('#spremenljivka_'+spremenljivka+' .naslov').height();var title_heigth=26;var margin_now=10;var height_beside=40;var final_height_right_block=0;final_height_right_block=final_height_right_block+height_beside;var frame_height_left=$('#half_frame_dropping_'+spremenljivka).height();frame_height_left=frame_height_left+10+2;frame_height_left=frame_height_left+height_beside;for(var j=1;j<=num_grids;j++){var okvir_height=$('#half2_frame_dropping_'+j+'_'+spremenljivka).height();okvir_height=okvir_height+10+2;final_height_right_block=final_height_right_block+okvir_height+margin_now+title_heigth;}
var default_var_height_now=$('#spremenljivka_'+spremenljivka).height();var default_var_height=$('#spremenljivka_'+spremenljivka).height();if((default_var_height<(frame_height_left+naslov_height))||(default_var_height<(final_height_right_block+naslov_height))){if(frame_height_left<final_height_right_block){dynamic_question_height_sub(final_height_right_block,spremenljivka);}else if(frame_height_left>final_height_right_block){dynamic_question_height_sub(frame_height_left,spremenljivka);}}else if(frame_height_left<final_height_right_block){$('#spremenljivka_'+spremenljivka).height(final_height_right_block+naslov_height+50);$('#spremenljivka_'+spremenljivka+' div.variable_holder.clr').height(final_height_right_block+25);}else if(frame_height_left>final_height_right_block){$('#spremenljivka_'+spremenljivka).height(frame_height_left+naslov_height+50);$('#spremenljivka_'+spremenljivka+' div.variable_holder.clr').height(frame_height_left+25);}};var refresh=[];var skatlastOkvir=[];var draggableOnDroppable=[];var maxDragDrop=[];var draggableOverDroppable=[];var default_var_height_1=[];var data_after_refresh=[];var frame_total_height_right=[];var draggableOver=[];var last_vre_id=[];var vre_id_global=[];var last_indeks=[];var indeks_global=[];var last_drop=[];var num_grids_global=[];var draggable_global=[];var cat_pushed=[];function DraggableAdmin(vre_id){var default_cat_height=15;var final_height=0;var cat_text_length=$('#vre_id_'+vre_id).html().length;var num_of_br=$('#vre_id_'+vre_id+' br').length;var num_imgs=$('#vre_id_'+vre_id+' img').length;var max_cat_text_length=30;if((cat_text_length>max_cat_text_length)&&(num_of_br==0)&&(num_imgs==0)){var txt=$('#vre_id_'+vre_id).html();var txt_alt=txt.slice(0,max_cat_text_length)+"<br>"+txt.slice(max_cat_text_length);$('#vre_id_'+vre_id).html(txt_alt);final_height=final_height+default_cat_height+25;}
if(num_imgs!=0){var img_height=0;var max_width=$('.ranking').width();var img=$('#vre_id_'+vre_id+' img');var img_width=img.width();var img_height=img.height();if(img_width>max_width){img_height=(img_height/img_width)*max_width;$('#vre_id_'+vre_id).children('img').css({width:max_width});$('#vre_id_'+vre_id).children('img').css({height:img_height});}
if(img_height>25){final_height=final_height+img_height;}}
if(num_of_br!=0){var br_height=num_of_br*25;if(num_imgs==0){final_height=final_height+default_cat_height+br_height;}
else{final_height=final_height+br_height;}
if((img_height<25)&&(img_height!=0)){final_height=final_height+img_height;}}
if(final_height!=0){$('#vre_id_'+vre_id).css({'height':final_height});}}
function init_GridDraggable(spremenljivka,vre_id,grids){data_after_refresh[spremenljivka]=false;frame_total_height_right[spremenljivka]=0;last_vre_id[spremenljivka]=0;vre_id_global[spremenljivka]=0;last_indeks[spremenljivka]=0;last_drop[vre_id]=0;indeks_global[spremenljivka]=0;num_grids_global[spremenljivka]=grids;cat_pushed[spremenljivka]=false;draggable_global[vre_id]=0;draggableOnDroppable[vre_id]=new Array(2);draggableOverDroppable[vre_id]=new Array(2);for(i=1;i<=num_grids_global[spremenljivka];i++){draggableOnDroppable[vre_id][i]=false;draggableOverDroppable[vre_id][i]=false;}}
function Draggable(tip,spremenljivka,vre_id,ajax,anketa,site_url,usr_id,other,mobile,quick_view,preview_spremenljivka){var top_cat=-1;var left_cat=-1;if(mobile==0||mobile==2){}
$('#spremenljivka_'+spremenljivka+'_vrednost_'+vre_id).addClass('drag_and_drop').detach().appendTo('#half_frame_dropping_'+spremenljivka).draggable({cursor:'move',revert:function(socketObj)
{if(typeof checkBranching=='function'){checkBranching();}
if(socketObj===false){if(tip==1&&draggableOver[spremenljivka]==true){$('#half2_frame_dropping_'+spremenljivka).toggleClass('frame_dropping_hover_right_single');}
draggableOver[spremenljivka]=false;return true;}
else{return false;}},stack:'#half2_'+spremenljivka+' div',opacity:0.9,containment:'#prestavljanje_'+spremenljivka,}).dblclick(function(){var vre_id=$(this).attr('value');var id_parent=$(this).parent().attr('id');var other=$(this).attr('missing');var other_present=$('#half2_frame_dropping_'+spremenljivka).children('div').attr('missing');if(typeof checkBranching=='function'){checkBranching();}
if(id_parent=='half_frame_dropping_'+spremenljivka){if(((tip==1&&other==0))||((tip==2)&&(other_present!=0))||((other!=0))){if(ajax){$.post(site_url+'/main/survey/ajax.php?a=delete_dragdrop2_data',{spremenljivka:spremenljivka,usr_id:usr_id,anketa:anketa});}
$('.ui-draggable[name="vrednost_'+spremenljivka+'"]').appendTo('#half_frame_dropping_'+spremenljivka);}
$('#half2_frame_dropping_'+spremenljivka).prepend(this);if(ajax){$.post(site_url+'/main/survey/ajax.php?a=accept_dragdrop1',{spremenljivka:spremenljivka,vre_id:vre_id,anketa:anketa,usr_id:usr_id});}
draggableOver[spremenljivka]=false;draggableOnDroppable[vre_id]=true;}
else if(id_parent=='half2_frame_dropping_'+spremenljivka){if(other!=0||other==0){var vre_id=$(this).attr('value');$('#half_frame_dropping_'+spremenljivka).prepend(this);$('#spremenljivka_'+spremenljivka+'_vrednost_'+vre_id).draggable('option','appendTo','#half_frame_dropping_'+spremenljivka);$('#vrednost_if_'+usr_id).remove();if(ajax){$.post(site_url+'/main/survey/ajax.php?a=delete_dragdrop1_data',{spremenljivka:spremenljivka,vre_id:vre_id,usr_id:usr_id,anketa:anketa});}}
draggableOver[spremenljivka]==false;draggableOnDroppable[vre_id]=false;}});$('#spremenljivka_'+spremenljivka+'_vrednost_'+vre_id).attr({'value':vre_id,'name':'vrednost_'+spremenljivka,'onclick':'checkBranching();','missing':other});if(quick_view||preview_spremenljivka){$('#spremenljivka_'+spremenljivka+'_vrednost_'+vre_id).draggable("option","disabled",true);}
var default_cat_height=15;var final_height=0;var cat_text_length=$('#spremenljivka_'+spremenljivka+'_vrednost_'+vre_id).html().length;var num_of_br=$('#spremenljivka_'+spremenljivka+'_vrednost_'+vre_id+' br').length;var num_imgs=$('#spremenljivka_'+spremenljivka+'_vrednost_'+vre_id+' img').length;var max_cat_text_length=30;if((cat_text_length>max_cat_text_length)&&(num_of_br==0)&&(num_imgs==0)){var txt=$('#spremenljivka_'+spremenljivka+'_vrednost_'+vre_id).html();var txt_alt=txt.slice(0,max_cat_text_length)+"<br>"+txt.slice(max_cat_text_length);$('#spremenljivka_'+spremenljivka+'_vrednost_'+vre_id).html(txt_alt);final_height=final_height+default_cat_height+25;}
if(num_imgs!=0){var img_height=0;var max_width=230;var img=$('#spremenljivka_'+spremenljivka+'_vrednost_'+vre_id+' img');var img_width=img.width();var img_height=img.height();if(img_width>max_width){img_height=(img_height/img_width)*max_width;img.css({width:max_width});img.css({height:img_height});}
if(img_height>25){final_height=final_height+img_height;}}
if(num_of_br!=0){var br_height=num_of_br*25;if(num_imgs==0){final_height=final_height+default_cat_height+br_height;}
else{final_height=final_height+br_height;}
if((img_height<25)&&(img_height!=0)){final_height=final_height+img_height;}}
if(final_height!=0){$('#spremenljivka_'+spremenljivka+'_vrednost_'+vre_id).css({'height':final_height});}}
function DragDropDelovanje(tip,spremenljivka,site_url,ajax,anketa,usr_id,num_of_cats,mobile){var top_cat=-1;var left_cat=-1;var default_var_height=290;if(mobile==0||mobile==2){default_var_height=220;}
var cat_total_height_left=0;var cat_margin_left=0;var cat_max_height=0;var cat_default_inline_text_length=16;var naslov_height=$('#spremenljivka_'+spremenljivka+' .naslov').outerHeight(true);var visinaPaddingovMarginovVprasanja=$('#spremenljivka_'+spremenljivka).outerHeight(true)-$('#spremenljivka_'+spremenljivka).height();var visinaPaddingovMarginovHolder=$('#spremenljivka_'+spremenljivka+' div.variable_holder.clr').outerHeight(true)-$('#spremenljivka_'+spremenljivka+' div.variable_holder.clr').height();var pomoznoBesediloHeight=40;var variable_holder_height=$('#spremenljivka_'+spremenljivka+' .variable_holder').height();$('#spremenljivka_'+spremenljivka+' td.middle img').css({'top':(naslov_height+variable_holder_height/2)+'px'});if(ajax){$.get(site_url+'/main/survey/ajax.php?a=get_dragdrop1_data',{spremenljivka:spremenljivka,anketa:anketa},function(data){var array_length=data.length;var vre_id=[];for(var i=0;i<array_length;i++){vre_id[i]=data[i];var cat_height=$('#spremenljivka_'+spremenljivka+'_vrednost_'+vre_id[i]).height();var cat_height_real=$('#spremenljivka_'+spremenljivka+'_vrednost_'+vre_id[i]).outerHeight(true);if(mobile==1){var cat_text_length=$('#spremenljivka_'+spremenljivka+'_vrednost_'+vre_id[i]).text().length;if(cat_text_length>(cat_default_inline_text_length)*2){var num_of_rows=cat_text_length/cat_default_inline_text_length;cat_height_real=cat_height_real+25*(num_of_rows-2);$('#spremenljivka_'+spremenljivka+'_vrednost_'+vre_id[i]).css({'height':(cat_height_real)+'px'});}}
cat_total_height_left=cat_total_height_left+cat_height_real;if(cat_max_height<cat_height){cat_max_height=cat_height;}}
var koncnaVisinaVprasanja=cat_total_height_left+naslov_height+pomoznoBesediloHeight+visinaPaddingovMarginovVprasanja+visinaPaddingovMarginovHolder*4;$('#spremenljivka_'+spremenljivka).css({'height':(koncnaVisinaVprasanja)+'px'});$('#spremenljivka_'+spremenljivka+' div.variable_holder.clr').css({'height':(koncnaVisinaVprasanja*0.85)+'px'});$('#half_frame_dropping_'+spremenljivka).css({'height':(cat_total_height_left)+'px'});if(tip!=1){$('#half2_frame_dropping_'+spremenljivka).css({'height':(cat_total_height_left)+'px'});}
else if(tip==1){$('#half2_frame_dropping_'+spremenljivka).css({'height':(cat_max_height)+'px'});}
default_var_height=$('#spremenljivka_'+spremenljivka).height();ResetButtonHeight(spremenljivka);},"json");}
$('#half_frame_dropping_'+spremenljivka).droppable({hoverClass:'frame_dropping_hover',drop:function(event,ui){if(typeof checkBranching=='function'){checkBranching();}
$(ui.draggable).detach().css({top:top_cat,left:left_cat}).appendTo(this);$(ui.draggable).addClass('drag_and_drop_right');var vre_id=ui.draggable.attr('value');if(ajax){$.post(site_url+'/main/survey/ajax.php?a=delete_dragdrop1_data',{spremenljivka:spremenljivka,vre_id:vre_id,usr_id:usr_id,anketa:anketa});}
draggableOver[spremenljivka]==false;draggableOnDroppable[vre_id]=false;},out:function(event,ui){$(ui.draggable).removeClass('drag_and_drop_right');$(ui.draggable).addClass('drag_and_drop');}});if(tip==1){$('#half2_frame_dropping_'+spremenljivka).droppable({hoverClass:'frame_dropping_hover_right_single',drop:function(event,ui){if(typeof checkBranching=='function'){checkBranching();}
var vre_id=ui.draggable.attr('value');var other=ui.draggable.attr('missing');var other_present=$(this).children('div').attr('missing');var cat_right=$(this).children('div').css('height');if(((tip==1&&other==0&&cat_right))||((tip==2)&&(other_present!=0))||((other!=0))){$('.ui-draggable[name="vrednost_'+spremenljivka+'"]').appendTo('#half_frame_dropping_'+spremenljivka);}
$(ui.draggable).removeClass('drag_and_drop');$(ui.draggable).detach().css({top:top_cat,left:left_cat}).appendTo(this);$(ui.draggable).addClass('drag_and_drop_right');if(ajax){$.post(site_url+'/main/survey/ajax.php?a=accept_dragdrop1',{other_present:other_present,other:other,cat_right:cat_right,tip:tip,spremenljivka:spremenljivka,vre_id:vre_id,anketa:anketa,usr_id:usr_id});}
draggableOver[spremenljivka]=false;draggableOnDroppable[vre_id]=true;},over:function(event,ui){draggableOver[spremenljivka]=true;if(typeof checkBranching=='function'){checkBranching();}},out:function(event,ui){draggableOver[spremenljivka]=false;$(ui.draggable).removeClass('drag_and_drop_right');}});}
else if(tip==2){$('#half2_frame_dropping_'+spremenljivka).droppable({hoverClass:'frame_dropping_hover',drop:function(event,ui){if(typeof checkBranching=='function'){checkBranching();}
var vre_id=ui.draggable.attr('value');var other=ui.draggable.attr('missing');var other_present=$(this).children('div').attr('missing');if(((tip==2)&&(other_present!=0))||((other!=0))){$('.ui-draggable[name="vrednost_'+spremenljivka+'"]').appendTo('#half_frame_dropping_'+spremenljivka);}
$(ui.draggable).removeClass('drag_and_drop');$(ui.draggable).detach().css({top:top_cat,left:left_cat}).appendTo(this);$(ui.draggable).addClass('drag_and_drop_right');if(ajax){$.post(site_url+'/main/survey/ajax.php?a=accept_dragdrop1',{other_present:other_present,other:other,tip:tip,spremenljivka:spremenljivka,vre_id:vre_id,anketa:anketa,usr_id:usr_id});}},out:function(event,ui){$(ui.draggable).removeClass('drag_and_drop_right');}});}}
function GridDraggable(tip,spremenljivka,vre_id,ajax,anketa,site_url,usr_id,other,mobile,skatle,quick_view,preview_spremenljivka)
{var top_cat=-1;var left_cat=-1;if(mobile==0||mobile==2){top_cat_right=30;}
$('#spremenljivka_'+spremenljivka+'_vrednost_'+vre_id).addClass('drag_and_drop').detach().appendTo('#half_frame_dropping_'+spremenljivka).draggable({cursor:'move',helper:'original',zIndex:100,revert:function(socketObj)
{if(typeof checkBranching=='function'){checkBranching();}
var revert=false;var cat_default_height=37;var cat_margin_left=10+5*2+1*2;var last_vre_id_revert=last_vre_id[spremenljivka];var trenutna_vre_id_revert=vre_id_global[spremenljivka];var indeks_revert=last_drop[trenutna_vre_id_revert];vre_id=trenutna_vre_id_revert;grd_id=indeks_revert;var prejsnji_okvir=$('#half2_frame_dropping_'+last_indeks[spremenljivka]+'_'+spremenljivka);var trenutni_okvir=$('#half2_frame_dropping_'+last_drop[trenutna_vre_id_revert]+'_'+spremenljivka);var draggable=draggable_global[trenutna_vre_id_revert];var skatle=skatlastOkvir[spremenljivka];if(socketObj===false){revert=true;if(tip==6){if(indeks_revert!=0){draggableOnDroppable[last_vre_id_revert][indeks_revert]=true;draggableOverDroppable[vre_id][indeks_revert]=true;frame_and_question_height(trenutni_okvir,spremenljivka,num_grids_global[spremenljivka],cat_margin_left,cat_default_height,draggable);}
var prejsnji_okvir_kat_prisotna=[];var stevilo_prisotnih=prejsnji_okvir.children('div').length;for(var z=1;z<=stevilo_prisotnih;z++){prejsnji_okvir_kat_prisotna[z]=prejsnji_okvir.children('div :nth-child('+z+')').attr('value');if(last_indeks[spremenljivka]!=0&&indeks_revert==0){if(prejsnji_okvir_kat_prisotna[z]===undefined){last_frame_height(prejsnji_okvir,spremenljivka,num_grids_global[spremenljivka],cat_margin_left,draggable_global[trenutna_vre_id_revert]);}
last_indeks[spremenljivka]=0;}
if((last_indeks[spremenljivka]!=last_drop[trenutna_vre_id_revert])&&(indeks_revert!=0)){frame_height(spremenljivka,vre_id,grd_id,revert);if(prejsnji_okvir_kat_prisotna[z]===undefined){last_frame_height(prejsnji_okvir,spremenljivka,num_grids_global[spremenljivka],cat_margin_left,draggable_global[trenutna_vre_id_revert]);}
var default_var_height=1;dynamic_question_height(spremenljivka,num_grids_global[spremenljivka],mobile,skatle);}}
if(skatle){$(draggable).addClass('drag_and_drop_box_right_after_refresh');var pravaVisina=calcPravaVisina(prejsnji_okvir,draggable,0,spremenljivka,0,0,1);$(draggable).css({top:pravaVisina+'!important'});}}
return true;}
else{revert=false;return false;}},stack:'#half2_'+spremenljivka+' div',opacity:0.9,containment:'#spremenljivka_'+spremenljivka,});if(quick_view||preview_spremenljivka){$('#spremenljivka_'+spremenljivka+'_vrednost_'+vre_id).draggable("option","disabled",true);}
$('#spremenljivka_'+spremenljivka+'_vrednost_'+vre_id).attr({'reverted':false,'value':vre_id,'name':'vrednost_'+spremenljivka,'onclick':'checkBranching();','missing':other});if(tip==16){$('#spremenljivka_'+spremenljivka+'_vrednost_'+vre_id).draggable("option","helper","clone");}
var default_cat_height=15;var final_height=0;var cat_text_length=$('#spremenljivka_'+spremenljivka+'_vrednost_'+vre_id).html().length;var num_of_br=$('#spremenljivka_'+spremenljivka+'_vrednost_'+vre_id+' br').length;var num_imgs=$('#spremenljivka_'+spremenljivka+'_vrednost_'+vre_id+' img').length;var max_cat_text_length=30;if((cat_text_length>max_cat_text_length)&&(num_of_br==0)&&(num_imgs==0)){var txt=$('#spremenljivka_'+spremenljivka+'_vrednost_'+vre_id).html();var txt_alt=txt.slice(0,max_cat_text_length)+"<br>"+txt.slice(max_cat_text_length);$('#spremenljivka_'+spremenljivka+'_vrednost_'+vre_id).html(txt_alt);final_height=final_height+default_cat_height+25;}
if(num_imgs!=0){var img_height=0;var max_width=230;var img=$('#spremenljivka_'+spremenljivka+'_vrednost_'+vre_id+' img');var img_width=img.width();var img_height=img.height();if(img_width>max_width){img_height=(img_height/img_width)*max_width;img.css({width:max_width});img.css({height:img_height});}
if(img_height>25){final_height=final_height+img_height;}}
if(num_of_br!=0){var br_height=num_of_br*25;if(num_imgs==0){final_height=final_height+default_cat_height+br_height;}
else{final_height=final_height+br_height;}
if((img_height<25)&&(img_height!=0)){final_height=final_height+img_height;}}
if(final_height!=0){$('#spremenljivka_'+spremenljivka+'_vrednost_'+vre_id).css({'height':final_height});}}
function GridDragDropDelovanje(num_grids,indeks,tip,spremenljivka,site_url,ajax,anketa,usr_id,num_of_cats,mobile,skatle){var top_cat=-1;var left_cat=-1;var default_var_height=290;if(mobile==0||mobile==2){top_cat_right=30;var default_var_height=220;}
var cat_max_height=0;var cat_default_height=37;var naslov_height=$('#spremenljivka_'+spremenljivka+' .naslov').outerHeight(true);var visinaPaddingovMarginovVprasanja=$('#spremenljivka_'+spremenljivka).outerHeight(true)-$('#spremenljivka_'+spremenljivka).height();var visinaPaddingovMarginovHolder=$('#spremenljivka_'+spremenljivka+' div.variable_holder.clr').outerHeight(true)-$('#spremenljivka_'+spremenljivka+' div.variable_holder.clr').height();var pomoznoBesediloHeight=40;var cat_default_inline_text_length=16;var variable_holder_height=$('#spremenljivka_'+spremenljivka+' .variable_holder').height();$('#spremenljivka_'+spremenljivka+' td.middle img').css({'top':(naslov_height+variable_holder_height/2)+'px'});if(ajax){$.get(site_url+'/main/survey/ajax.php?a=get_dragdrop1_data',{spremenljivka:spremenljivka,anketa:anketa},function(data){var default_var_height=$('#spremenljivka_'+spremenljivka).height();if(indeks==1){var cat_total_height_left=0;var array_length=data.length;var vre_id=[];for(var i=0;i<array_length;i++){vre_id[i]=data[i];var cat_height=$('#spremenljivka_'+spremenljivka+'_vrednost_'+vre_id[i]).outerHeight();var cat_height_real=$('#spremenljivka_'+spremenljivka+'_vrednost_'+vre_id[i]).outerHeight(true);if(mobile==1){var cat_text_length=$('#spremenljivka_'+spremenljivka+'_vrednost_'+vre_id[i]).text().length;if(cat_text_length>(cat_default_inline_text_length)*2.5){var num_of_rows=cat_text_length/cat_default_inline_text_length;cat_height=cat_height+25*(num_of_rows-1);$('#spremenljivka_'+spremenljivka+'_vrednost_'+vre_id[i]).css({'height':(cat_height)+'px'});}}
cat_total_height_left=cat_total_height_left+cat_height_real;if(cat_max_height<cat_height){cat_max_height=cat_height;}}
$('#half_frame_dropping_'+spremenljivka).css({'height':(cat_total_height_left)+'px'});}
if(mobile==0||mobile==2){if(skatle){var title_heigth_real=$('.frame_dropping_titles_box').outerHeight(true);}else{var title_heigth_real=$('.frame_dropping_titles').outerHeight(true);}}else{if(skatle){var title_heigth_real=$('.frame_dropping_titles_box_mobile').outerHeight(true);}else{var title_heigth_real=$('.frame_dropping_titles_mobile').outerHeight(true);}}
if(indeks==1){for(var j=1;j<=num_grids;j++){var okvir_height_real=$('#half2_frame_dropping_'+j+'_'+spremenljivka).outerHeight(true);frame_total_height_right[spremenljivka]=frame_total_height_right[spremenljivka]+okvir_height_real+title_heigth_real;if(refresh[spremenljivka]==1&&skatle){var desniOkvir=$('#half2_frame_dropping_'+j+'_'+spremenljivka);var cat_right=desniOkvir.children('div').outerHeight(true);if(cat_right){var zapStevKategorije=1;desniOkvir.children('div').each(function(){var trenutnaVisinaKategorije=$(this).outerHeight(true);var pravaVisina=calcPravaVisina(desniOkvir,$(this),j,spremenljivka,refresh[spremenljivka],zapStevKategorije);desniOkvir.prepend($(this).css({top:pravaVisina}));zapStevKategorije++;});}}else{}}
if(refresh[spremenljivka]==1&&skatle){refresh[spremenljivka]=0;}}
default_var_height_1[spremenljivka]=$('#spremenljivka_'+spremenljivka).height();if(cat_total_height_left>frame_total_height_right[spremenljivka]){if((cat_total_height_left>default_var_height)){dynamic_question_height_sub(cat_total_height_left,spremenljivka,default_var_height_1[spremenljivka]);}else if(cat_total_height_left<default_var_height_1[spremenljivka]){dynamic_question_height_sub(cat_total_height_left,spremenljivka,default_var_height_1[spremenljivka]);}else{dynamic_question_height_sub(cat_total_height_left,spremenljivka,default_var_height_1[spremenljivka]);}}else if(cat_total_height_left<frame_total_height_right[spremenljivka]){frame_total_height_right[spremenljivka]=frame_total_height_right[spremenljivka]+naslov_height+pomoznoBesediloHeight+visinaPaddingovMarginovVprasanja+visinaPaddingovMarginovHolder*5;$('#spremenljivka_'+spremenljivka+' div.variable_holder.clr').height(frame_total_height_right[spremenljivka]*0.9);$('#spremenljivka_'+spremenljivka).height(frame_total_height_right[spremenljivka]);}
ResetButtonHeight(spremenljivka);},"json");}
$('#half_frame_dropping_'+spremenljivka).droppable({drop:function(event,ui){if(typeof checkBranching=='function'){checkBranching();}
$(ui.draggable).detach().css({top:top_cat,left:left_cat}).appendTo(this);$(ui.draggable).addClass('drag_and_drop_right');var vre_id=ui.draggable.attr('value');if(ajax&&tip==6){$.post(site_url+'/main/survey/ajax.php?a=delete_dragdrop_grid_data_1',{spremenljivka:spremenljivka,vre_id:vre_id,usr_id:usr_id,anketa:anketa,indeks:last_indeks[spremenljivka]});draggableOnDroppable[vre_id][last_indeks[spremenljivka]]=false;draggableOverDroppable[vre_id][last_indeks[spremenljivka]]=false;var prejsnji_okvir=$('#half2_frame_dropping_'+last_indeks[spremenljivka]+'_'+spremenljivka);var prejsnji_okvir_kat_prisotna=prejsnji_okvir.children('div').attr('value');if(prejsnji_okvir_kat_prisotna===undefined&&last_indeks[spremenljivka]!=0){last_frame_height(prejsnji_okvir,spremenljivka,num_grids,cat_margin_left,ui.draggable);}
dynamic_question_height(spremenljivka,num_grids,mobile,skatle);last_indeks[spremenljivka]=0;last_drop[vre_id]=0;last_vre_id[spremenljivka]=0;}
from_left[vre_id]=true;},out:function(event,ui){$(ui.draggable).removeClass('drag_and_drop_right');$(ui.draggable).addClass('drag_and_drop');},over:function(event,ui){var vre_id=ui.draggable.attr('value');vre_id_global[spremenljivka]=vre_id;draggable_global[vre_id]=ui.draggable;$(ui.draggable).removeClass('drag_and_drop_box_right_after_refresh');}});$('#half2_frame_dropping_'+indeks+'_'+spremenljivka).droppable({tolerance:"pointer",drop:function(event,ui){if(typeof checkBranching=='function'){checkBranching();}
if(mobile==0||mobile==2){}else if(mobile==1){}
num_grids=num_grids_global[spremenljivka];var vre_id=ui.draggable.attr('value');var other=ui.draggable.attr('missing');var other_present=$(this).children('div').attr('missing');var cat_right=$(this).children('div').outerHeight(true);var vre_id_present=$(this).children('div').attr('value');draggable_global[vre_id]=ui.draggable;var title_heigth=26;var height_beside=40;var final_height_right_block=0;final_height_right_block=final_height_right_block+height_beside;for(var j=1;j<=num_grids;j++){var okvir_height=$('#half2_frame_dropping_'+j+'_'+spremenljivka).outerHeight(true);final_height_right_block=final_height_right_block+okvir_height+title_heigth;}
var default_var_height=$('#spremenljivka_'+spremenljivka).height();if(final_height_right_block>default_var_height){$('#spremenljivka_'+spremenljivka).css({'height':final_height_right_block+'px'});$('#spremenljivka_'+spremenljivka+' div.variable_holder.clr').css({'height':(final_height_right_block-100)+'px'});}
if(tip==6){if(cat_right&&skatle){$(ui.draggable).removeClass('drag_and_drop');$(ui.draggable).removeClass('drag_and_drop_box_right_after_refresh');var pravaVisina=calcPravaVisina(this,ui.draggable);$(ui.draggable).detach().css({top:(pravaVisina),left:left_cat}).prependTo(this);if($(this).children('div').hasClass('drag_and_drop_box_right_after_refresh')){$(ui.draggable).addClass('drag_and_drop_box_right_after_refresh');}else{$(ui.draggable).addClass('drag_and_drop_box_right_over');}}else{$(ui.draggable).removeClass('drag_and_drop');$(ui.draggable).detach().css({top:top_cat,left:left_cat}).appendTo(this);if(skatle){$(ui.draggable).removeClass('drag_and_drop_box_right_after_refresh');$(ui.draggable).addClass('drag_and_drop_box_right');}else{$(ui.draggable).addClass('drag_and_drop_right');}}
if(ajax){$.post(site_url+'/main/survey/ajax.php?a=accept_dragdrop_grid',{vre_id_present:vre_id_present,tip:tip,spremenljivka:spremenljivka,vre_id:vre_id,anketa:anketa,usr_id:usr_id,indeks:indeks,cat_right:cat_right,last_vre_id:last_vre_id[spremenljivka]});if(last_drop[vre_id]!=indeks||last_drop[vre_id]!=0){$.post(site_url+'/main/survey/ajax.php?a=delete_dragdrop_grid_data_1',{spremenljivka:spremenljivka,vre_id:vre_id,usr_id:usr_id,anketa:anketa,indeks:last_drop[vre_id]});}}}
else if(tip==16&&draggableOnDroppable[vre_id][indeks]==false){var visina_test=ui.draggable.css('height');if(cat_right&&skatle){var pravaVisina=calcPravaVisina(this,ui.draggable);$(ui.draggable.clone()).detach().css({top:pravaVisina,left:left_cat,height:visina_test}).prependTo(this);if($(this).children('div').hasClass('drag_and_drop_box_right_after_refresh')){$(this).children(ui.draggable).addClass('drag_and_drop_box_right_after_refresh');}else{$(this).children(ui.draggable).addClass('drag_and_drop_box_right_over');}}else{if(skatle){$(ui.draggable.clone()).detach().css({top:top_cat,left:left_cat,height:visina_test}).addClass('drag_and_drop_box_right').appendTo(this);}else{$(ui.draggable.clone()).detach().css({top:top_cat,left:left_cat,height:visina_test}).addClass('drag_and_drop_right').appendTo(this);}}
if(ajax){$.post(site_url+'/main/survey/ajax.php?a=accept_dragdrop_grid',{vre_id_present:vre_id_present,tip:tip,spremenljivka:spremenljivka,vre_id:vre_id,anketa:anketa,usr_id:usr_id,indeks:indeks,cat_right:cat_right,last_vre_id:last_vre_id[spremenljivka]});}}
if(last_indeks[spremenljivka]!==undefined){var prejsnji_okvir=$('#half2_frame_dropping_'+last_indeks[spremenljivka]+'_'+spremenljivka);var prejsnji_okvir_kat_prisotna=prejsnji_okvir.children('div').attr('value');if(last_indeks[spremenljivka]==0||prejsnji_okvir_kat_prisotna===undefined){last_frame_height(prejsnji_okvir,spremenljivka,num_grids,cat_margin_left,ui.draggable);}}
last_drop[vre_id]=indeks;draggableOnDroppable[vre_id][indeks]=true;if(tip==6){from_left[vre_id]=false;}},over:function(event,ui){num_grids=num_grids_global[spremenljivka];if(typeof checkBranching=='function'){checkBranching();}
var vre_id=ui.draggable.attr('value');var vre_id_present=$(this).children('div').attr('value');vre_id_global[spremenljivka]=vre_id;var trenutni_okvir=$('#half2_frame_dropping_'+indeks+'_'+spremenljivka);if(last_indeks[spremenljivka]==0&&tip==6){last_indeks[spremenljivka]=indeks;}else{var last_vrednost_id_temp=last_vre_id[spremenljivka];var prejsnji_okvir=$('#half2_frame_dropping_'+last_indeks[spremenljivka]+'_'+spremenljivka);if(tip==6){var prejsnji_okvir_kat_prisotna=[];var stevilo_prisotnih=prejsnji_okvir.children('div').length;for(var z=1;z<=stevilo_prisotnih;z++){prejsnji_okvir_kat_prisotna[z]=prejsnji_okvir.children('div :nth-child('+z+')').attr('value');if(last_vrednost_id_temp!=0){if((draggableOnDroppable[last_vrednost_id_temp][indeks]==false)&&((prejsnji_okvir_kat_prisotna===undefined)||(prejsnji_okvir_kat_prisotna==vre_id))){if((tip==16&&draggableOnDroppable[vre_id][last_indeks[spremenljivka]]==false)||tip==6){last_frame_height(prejsnji_okvir,spremenljivka,num_grids,cat_margin_left,ui.draggable);}}}}}}
if(vre_id_present!==undefined){if(draggableOnDroppable[vre_id_present][indeks]!=true||(draggableOverDroppable[vre_id][indeks]==false&&(tip==16||tip==6))){draggableOverDroppable[vre_id][indeks]=true;if((tip==16&&draggableOnDroppable[vre_id][indeks]==false)||tip==6){frame_and_question_height(trenutni_okvir,spremenljivka,num_grids,cat_margin_left,cat_default_height,ui.draggable);if(from_left[vre_id]!=false){dynamic_question_height(spremenljivka,num_grids,mobile,skatle);}}}}else{if(vre_id_present===undefined||(draggableOverDroppable[vre_id][indeks]==false&&(tip==16||tip==6))){draggableOverDroppable[vre_id][indeks]=true;if((tip==16&&(draggableOnDroppable[vre_id][indeks]==false||last_drop[vre_id]==0))||tip==6){frame_and_question_height(trenutni_okvir,spremenljivka,num_grids,cat_margin_left,cat_default_height,ui.draggable);if(from_left[vre_id]!=false){dynamic_question_height(spremenljivka,num_grids,mobile,skatle);}}}}
if(draggableOverDroppable[vre_id][indeks]==true){if(mobile==0||mobile==2){}
else if(mobile==1){}}
last_indeks[spremenljivka]=indeks;cat_pushed[spremenljivka]=false;},out:function(event,ui){console.log("Out");num_grids=num_grids_global[spremenljivka];var vre_id=ui.draggable.attr('value');var vre_id_present=$(this).children('div').attr('value');var prejsnji_okvir=$('#half2_frame_dropping_'+last_indeks[spremenljivka]+'_'+spremenljivka);var prejsnji_okvir_kat_prisotna=prejsnji_okvir.children('div').attr('value');if(draggableOverDroppable[vre_id][indeks]==true&&((tip==16&&draggableOnDroppable[vre_id][last_indeks[spremenljivka]]==false)||tip==6)){last_frame_height(prejsnji_okvir,spremenljivka,num_grids,cat_margin_left,ui.draggable);}
last_vre_id[spremenljivka]=vre_id;last_indeks[spremenljivka]=indeks;if(tip==6||(tip==16&&draggableOnDroppable[vre_id][last_indeks[spremenljivka]]==false)){draggableOnDroppable[vre_id][indeks]=false;}
draggableOverDroppable[vre_id][indeks]=false;draggable_global[vre_id]=ui.draggable;if(draggableOverDroppable[vre_id][indeks]==false){if(mobile==0||mobile==2){}else if(mobile==1){}}
if(skatle){$(ui.draggable).removeClass('drag_and_drop_box_right');$(ui.draggable).removeClass('drag_and_drop_box_right_over');$(ui.draggable).removeClass('drag_and_drop_box_right_after_refresh');}else{$(ui.draggable).removeClass('drag_and_drop_right');}}});if(tip==16){$('#half2_frame_dropping_'+indeks+'_'+spremenljivka).click(function(){$('#half2_frame_dropping_'+indeks+'_'+spremenljivka).children().click(function(){var index1=$('#half2_frame_dropping_'+indeks+'_'+spremenljivka).children().index(this);var prejsnji_okvir=$('#half2_frame_dropping_'+indeks+'_'+spremenljivka);var vre_id=$('#half2_frame_dropping_'+indeks+'_'+spremenljivka+' div:nth-child('+(index1+1)+')').attr('value');var draggable=$('#half2_frame_dropping_'+indeks+'_'+spremenljivka+' div:nth-child('+(index1+1)+')');$('#half2_frame_dropping_'+indeks+'_'+spremenljivka+' div:nth-child('+(index1+1)+')').detach();if(ajax){$.post(site_url+'/main/survey/ajax.php?a=delete_dragdrop_grid_data',{tip:tip,spremenljivka:spremenljivka,vre_id:vre_id,usr_id:usr_id,anketa:anketa,indeks:indeks});}
last_frame_height(prejsnji_okvir,spremenljivka,num_grids,cat_margin_left,draggable);draggableOnDroppable[vre_id][indeks]=false;draggableOverDroppable[vre_id][indeks]=false;from_left[vre_id]=true;dynamic_question_height(spremenljivka,num_grids,mobile,skatle);ResetButtonHeight(spremenljivka);});});}}
function frame_and_question_height(trenutni_okvir,spremenljivka,num_grids,cat_margin_left,cat_default_height,draggable){var other=draggable.attr('missing');var other_present=trenutni_okvir.children('div').attr('missing');var cat_height_now=draggable.outerHeight(true);var cat_right=trenutni_okvir.children('div').outerHeight(true);if(cat_right){var whole_heigth=trenutni_okvir.height();var okvir_height=whole_heigth+cat_height_now;trenutni_okvir.css({'height':(okvir_height)+'px'});}else{if(cat_height_now<15){cat_height_now=15;}
trenutni_okvir.css({'height':(cat_height_now)+'px'});}}
function frame_height(spremenljivka,vre_id,grd_id,revert,refresh){var cat_default_height=37;if(vre_id!=0){var cat_height_now=$('#spremenljivka_'+spremenljivka+'_vrednost_'+vre_id).outerHeight();}
if(refresh==1){var visinaPrisotnihKategorij=0;$('#half2_frame_dropping_'+grd_id+'_'+spremenljivka).children('div').each(function(){var trenutnaVisinaKategorije=$(this).outerHeight(true);visinaPrisotnihKategorij=visinaPrisotnihKategorij+trenutnaVisinaKategorije;});var cat_height_now=visinaPrisotnihKategorij;}
var cat_right=$('#half2_frame_dropping_'+grd_id+'_'+spremenljivka).children('div').outerHeight(true);if(cat_right||revert||refresh){var whole_heigth=$('#half2_frame_dropping_'+grd_id+'_'+spremenljivka).outerHeight();var okvir_height=whole_heigth+cat_height_now;$('#half2_frame_dropping_'+grd_id+'_'+spremenljivka).css({'height':(okvir_height)+'px'});}else{if(cat_height_now<15){cat_height_now=15;}
$('#half2_frame_dropping_'+grd_id+'_'+spremenljivka).css({'height':(cat_height_now)+'px'});}}
function last_frame_height(prejsnji_okvir,spremenljivka,num_grids,cat_margin_left,draggable){var trenutna_visina_okvirja=prejsnji_okvir.height();var trenutna_visina_kategorije=draggable.outerHeight(true);koncna_visina_zapuscenega_okvirja=trenutna_visina_okvirja-trenutna_visina_kategorije;if(koncna_visina_zapuscenega_okvirja<15){koncna_visina_zapuscenega_okvirja=15;}
prejsnji_okvir.css({'height':(koncna_visina_zapuscenega_okvirja)+'px'});}
function dynamic_question_height_sub(frame_height,spremenljivka){var default_var_height=$('#spremenljivka_'+spremenljivka).outerHeight(true);var naslov_height=$('#spremenljivka_'+spremenljivka+' .naslov').outerHeight(true);var visinaPaddingovMarginovVprasanja=$('#spremenljivka_'+spremenljivka).outerHeight(true)-$('#spremenljivka_'+spremenljivka).height();var visinaPaddingovMarginovHolder=$('#spremenljivka_'+spremenljivka+' div.variable_holder.clr').outerHeight(true)-$('#spremenljivka_'+spremenljivka+' div.variable_holder.clr').height();var pomoznoBesediloHeight=40;var vmesnaVisinaOkvirja=realnaVisina(spremenljivka,frame_height);if((vmesnaVisinaOkvirja)>default_var_height){updateHeight(spremenljivka,frame_height);}else if((vmesnaVisinaOkvirja)<default_var_height){var koncnaVisinaVprasanja=$('#spremenljivka_'+spremenljivka).outerHeight(true);updateHeight(spremenljivka,0,koncnaVisinaVprasanja);$('#spremenljivka_'+spremenljivka).height(koncnaVisinaVprasanja);$('#spremenljivka_'+spremenljivka+' div.variable_holder.clr').height(koncnaVisinaVprasanja*0.85);}}
function dynamic_question_height(spremenljivka,num_grids,mobile,skatle){if(mobile==0||mobile==2){if(skatle){var title_heigth=$('.frame_dropping_titles_box').outerHeight(true);}else{var title_heigth=$('.frame_dropping_titles').outerHeight(true);}}else{if(skatle){var title_heigth=$('.frame_dropping_titles_box_mobile').outerHeight(true);}else{var title_heigth=$('.frame_dropping_titles_mobile').outerHeight(true);}}
var final_height_right_block=0;var frame_height_left=$('#half_frame_dropping_'+spremenljivka).outerHeight(true);for(var j=1;j<=num_grids;j++){var okvir_height=$('#half2_frame_dropping_'+j+'_'+spremenljivka).outerHeight(true);final_height_right_block=final_height_right_block+okvir_height+title_heigth;}
var default_var_height=$('#spremenljivka_'+spremenljivka).height();var vmesnaVisinaVprasanjaLevo=realnaVisina(spremenljivka,frame_height_left);var vmesnaVisinaVprasanjaDesno=realnaVisina(spremenljivka,final_height_right_block);if((default_var_height<(vmesnaVisinaVprasanjaLevo))||(default_var_height<(vmesnaVisinaVprasanjaDesno))){if(frame_height_left<final_height_right_block){dynamic_question_height_sub(final_height_right_block,spremenljivka);}else if(frame_height_left>final_height_right_block){dynamic_question_height_sub(frame_height_left,spremenljivka);}}else if(frame_height_left<final_height_right_block){updateHeight(spremenljivka,final_height_right_block);}else if(frame_height_left>final_height_right_block){updateHeight(spremenljivka,frame_height_left);}}
function updateHeight(spremenljivka,final_height_block,visinaVprasanja){if(visinaVprasanja){var koncnaVisinaVprasanja=visinaVprasanja;}
else{var koncnaVisinaVprasanja=realnaVisina(spremenljivka,final_height_block);}
$('#spremenljivka_'+spremenljivka).height(koncnaVisinaVprasanja);$('#spremenljivka_'+spremenljivka+' div.variable_holder.clr').height(koncnaVisinaVprasanja*0.85);}
function realnaVisina(spremenljivka,final_height_block){var naslov_height=$('#spremenljivka_'+spremenljivka+' .naslov').height();var visinaPaddingovMarginovVprasanja=$('#spremenljivka_'+spremenljivka).outerHeight(true)-$('#spremenljivka_'+spremenljivka).height();var visinaPaddingovMarginovHolder=$('#spremenljivka_'+spremenljivka+' div.variable_holder.clr').outerHeight(true)-$('#spremenljivka_'+spremenljivka+' div.variable_holder.clr').height();var pomoznoBesediloHeight=40;var realnaVisina=final_height_block+naslov_height+pomoznoBesediloHeight+visinaPaddingovMarginovVprasanja+visinaPaddingovMarginovHolder*4;return realnaVisina;}
function calcPravaVisina(tole,draggable,indeks,spremenljivka,refresh,zapStevKategorije,revert){var visinaDesnegaOkvirja=$(tole).outerHeight();var visinaPreneseneKategorije=0;if(draggable){visinaPreneseneKategorije=$(draggable).outerHeight(true);}
var visinaPrisotnihKategorij=0;var steviloKategorij=0;$(tole).children('div').each(function(){var trenutnaVisinaKategorije=$(this).outerHeight(true);visinaPrisotnihKategorij=visinaPrisotnihKategorij+trenutnaVisinaKategorije;steviloKategorij++;});if(refresh==1||revert==1){if(visinaDesnegaOkvirja<visinaPrisotnihKategorij){if(refresh==1){$('#half2_frame_dropping_'+indeks+'_'+spremenljivka).css({'height':(visinaPrisotnihKategorij)+'px'});}
visinaDesnegaOkvirja=$(tole).outerHeight();}
if(steviloKategorij>1){var pravaVisina=visinaDesnegaOkvirja-visinaPrisotnihKategorij;}else{var pravaVisina=visinaDesnegaOkvirja-visinaPreneseneKategorije;}}else{var pravaVisina=visinaDesnegaOkvirja-visinaPrisotnihKategorij-visinaPreneseneKategorije;}
return pravaVisina;}
function ResetButtonHeight(spremenljivka){$('#resetDragDrop_'+spremenljivka).position({my:"left bottom",at:"left bottom",of:"#spremenljivka_"+spremenljivka,collision:'none'});var currentTop=$('#resetDragDrop_'+spremenljivka).css('top');var newTop=parseInt(currentTop)-20;$('#resetDragDrop_'+spremenljivka).css('top',newTop+'px');};function change_custom_column_label_respondent(size,spremenljivka,value){if(value==2){var i=0;if(size%2==0){var colspan_calc_1=colspan_calc_2=size/2;}else if(size%2!=0){var colspan_calc_1=(size/2)+0.5;var colspan_calc_2=(size/2)-0.5;}
$('#spremenljivka_'+spremenljivka+' table.grid_table > thead > tr > td.category').each(function(){i=i+1;if(i!=1&&i!=size){$(this).children().text("");$(this).remove();}
if(i==1){$(this).attr('colspan',colspan_calc_1);$(this).attr('style','text-align: left');$(this).removeClass('alignLeft');}
if(i==size){$(this).attr('colspan',colspan_calc_2);$(this).attr('style','text-align: right');$(this).removeClass('alignLeft');}});$('#spremenljivka_'+spremenljivka+' table.grid_table > tbody > tr > td.category').each(function(){$(this).removeClass('alignLeft');});}else if(value==3){var i=0;if(size%3==0){var colspan_calc_1=colspan_calc_2=colspan_calc_3=size/3;var middle=1+size/3;}else if(size%3==1){var colspan_calc_1=colspan_calc_2=parseInt(size/3);var colspan_calc_3=parseInt(size/3)+1;var middle=1+parseInt(size/3);}else if(size%3==2){var colspan_calc_1=colspan_calc_2=1+parseInt(size/3);var colspan_calc_3=parseInt(size/3);var middle=size%3+parseInt(size/3);}
$('#spremenljivka_'+spremenljivka+' table.grid_table > thead > tr > td.category').each(function(){i=i+1;if(i!=1&&i!=size&&i!=middle){$(this).children().text("");$(this).remove();}
if(i==1){$(this).attr('colspan',colspan_calc_1);$(this).attr('style','text-align: left');$(this).removeClass('alignLeft');}
if(i==size){$(this).attr('colspan',colspan_calc_2);$(this).attr('style','text-align: right');$(this).removeClass('alignLeft');}
if(i==middle){$(this).attr('colspan',colspan_calc_3);$(this).attr('style','text-align: center');$(this).removeClass('alignLeft');}});$('#spremenljivka_'+spremenljivka+' table.grid_table > tbody > tr > td.category').each(function(){$(this).removeClass('alignLeft');});}
else if(value==4){}};function mapinit_editor(spremenljivka){var map=$('#hotspot_'+spremenljivka+'_map');var izbranaObmocja={};var obmocja=[];map.children().each(function(index,value){obmocja[index]=$(this).attr('name');});var obmocja_string=obmocja.toString();var image1=$('#hotspot_'+spremenljivka+'_image');image1.mapster({scaleMap:false,fillOpacity:0.4,fillColor:"d42e16",stroke:true,strokeColor:"3320FF",strokeOpacity:0.8,isSelectable:false,mapKey:'name',listKey:'name'}).mapster('set',true,obmocja_string);};function init_colorPicker(id){var colorPicker='#picker';var f=$.farbtastic(colorPicker);var p=$(colorPicker).hide();var selected;$('.colorwell').each(function(){f.linkTo(this);$(this).css('opacity',0.75);}).focus(function(){if(selected){$(selected).css('opacity',0.75).removeClass('colorwell-selected');}
f.linkTo(this);p.show();$(selected=this).css('opacity',1).addClass('colorwell-selected');});$('.auto-save').change(function(){}).blur(function(){$(colorPicker).hide();vprasanje_save(true);});$('.farbtastic').mouseup(function(){vprasanje_save(true);});}
function hotspot_region_visibility_option_checkbox_prop(spremenljivka)
{if($('#hotspot_region_visibility_options_'+spremenljivka).is(":checked")){$('#hotspot_region_visibility_option_'+spremenljivka).prop('disabled',true);$('#hotspot_region_visibility_'+spremenljivka).css('display','');}
else{$('#hotspot_region_visibility_option_'+spremenljivka).prop('disabled',false);$('#hotspot_region_visibility_'+spremenljivka).css('display','none');}}
function hotspot_comment_option_checkbox_prop(spremenljivka)
{if($('#hotspot_comment_options_'+spremenljivka).is(":checked")){$('#hotspot_comment_option_'+spremenljivka).prop('disabled',true);$('#hotspot_comment_'+spremenljivka).css('display','');}
else{$('#hotspot_comment_option_'+spremenljivka).prop('disabled',false);$('#hotspot_comment_'+spremenljivka).css('display','none');}}
function hotspot_edit_regions(spr_id,vre_id){if(vre_id==0){var region_name="";var next_vrednost=function(){$.ajaxSetup({async:false});var tmp=null;$.post('ajax.php?t=vprasanje&a=get_next_hotspot_vrednost',{spr_id:spr_id,},function(data){tmp=data;});return tmp;}();if(next_vrednost!=""){var vrednost=next_vrednost;}else{var vrednost=function(){$.ajaxSetup({async:false});var tmp=null;$.post('ajax.php?t=vprasanje&a=hotspot_vrednost_new',{spremenljivka:spr_id,anketa:srv_meta_anketa_id},function(data){tmp=data;});return tmp;}();}}else{var vrednost=vre_id;var region_name=function(){$.ajaxSetup({async:false});var tmp=null;$.post('ajax.php?t=vprasanje&a=hotspot_get_region_name',{spr_id:spr_id,vrednost:vrednost,anketa:srv_meta_anketa_id},function(data){tmp=data;});return tmp;}();}
var src_image=$('#spremenljivka_contentdiv'+spr_id).find('img').attr('src');var hotspot_image_height=$('#hotspot_image_'+spr_id+'_hidden').find('img').css('height');var hotspot_image_width=$('#hotspot_image_'+spr_id+'_hidden').find('img').css('width');hotspot_image_height=parseInt(hotspot_image_height.replace('px',''));hotspot_image_width=parseInt(hotspot_image_width.replace('px',''));$('#fade').fadeTo('slow',1);$('#vrednost_edit').html('').fadeIn('slow').load('ajax.php?t=vprasanje&a=hotspot_edit_regions',{spr_id:spr_id,hotspot_image_height:hotspot_image_height,hotspot_image_width:hotspot_image_width,src_image:src_image,vrednost:vrednost,anketa:srv_meta_anketa_id,lang_id:srv_meta_lang_id,region_name:region_name},function(){});}
function hotspot_image_save(spr_id){var hotspot_image=$('#hotspot_image').val();get_editor_close('hotspot_image');$('#fade').fadeOut('slow');$('#vrednost_edit').fadeOut('slow');var paramArr=$("form[name=hotspot_image_edit]").serialize();var query_string=paramArr;if(decodeURIComponent(query_string).indexOf("style=")==-1){hotspot_image=decodeURIComponent(paramArr);var src_start=hotspot_image.indexOf('src');var src_end=hotspot_image.indexOf('"',(src_start+5));var src=hotspot_image.substring((src_start+5),src_end);var img=new Image();img.src=src;var width=img.width;var height=img.height;query_string=query_string+"&width="+width+"&height="+height;hotspot_append_hidden_image(spr_id,width,height,1);}
else{hotspot_append_hidden_image(spr_id,0,0,0);}
$.post('ajax.php?t=vprasanje&a=hotspot_image_save',query_string,function(data){$('#hotspot_image_'+spr_id).html(data);$('#hotspot_image_edit').html('');});}
function create_hotspot_input(vre_id,spr_id){}
function hotspot_region_cancel(spr_id,vre_id){$.post('ajax.php?t=vprasanje&a=hotspot_region_cancel',{spr_id:spr_id,vre_id:vre_id});$('#fade').fadeOut('slow');$('#vrednost_edit').fadeOut('slow');}
function hotspot_save_regions(spr_id,last_hotspot_region_index,vre_id,hotspot_region_index){var hotspot_region_name=$('input[name=hotspot_region_name]').val();var hotspot_region_coords=$('#hotspot_region_coords_'+spr_id).val();last_hotspot_region_index=last_hotspot_region_index+1;if(hotspot_region_index==-2){$('#hot_spot_fieldset_'+spr_id).prepend('<div id="hotspot_region_'+last_hotspot_region_index+'" class="hotspot_region"><div id="hotspot_region_name_'+last_hotspot_region_index+'" vre_id="'+vre_id+'" region_index = "'+last_hotspot_region_index+'" class="hotspot_vrednost_inline" contenteditable="true">'+hotspot_region_name+'</div><span class="sprites edit2 inline_hotspot_edit_region"></span><span class="faicon delete_circle icon-orange_link inline_hotspot_delete_region"></span></br></div>');}else{$('#hotspot_region_name_'+hotspot_region_index).text(hotspot_region_name);}
var new_hotspot_vrednost_needed=$('#vre_id_'+vre_id).attr('vre_id');if(new_hotspot_vrednost_needed==undefined){$('#hotspot_regions_hidden_menu_'+spr_id).prepend('<div id="variabla_'+vre_id+'" class="variabla" style="display:none;"><div id="vre_id_'+vre_id+'" class="vrednost_inline" vre_id="'+vre_id+'"></div>'+hotspot_region_name+'</div>');}else{$('#vre_id_'+vre_id).text(hotspot_region_name);}
$.post('ajax.php?t=vprasanje&a=hotspot_save_regions',{spr_id:spr_id,vre_id:vre_id,hotspot_region_name:hotspot_region_name,hotspot_region_coords:hotspot_region_coords,last_hotspot_region_index:last_hotspot_region_index,hotspot_region_index:hotspot_region_index});$('#fade').fadeOut('slow');$('#vrednost_edit').fadeOut('slow');}
function hotspot_append_hidden_image(spr_id,width,height,no_dimensions){var hotspot_image=$('#hotspot_image').val();var hotspot_image_hidden_height=$('#hotspot_image_'+spr_id+'_hidden').find('img').css('height');if(hotspot_image_hidden_height==undefined){$('#hotspot_image_'+spr_id+'_hidden').append(hotspot_image);}
else if(hotspot_image==''){$('#hotspot_image_'+spr_id+'_hidden').find('img').remove();}
else{$('#hotspot_image_'+spr_id+'_hidden').find('img').remove();$('#hotspot_image_'+spr_id+'_hidden').append(hotspot_image);}
if(no_dimensions==1){$('#hotspot_image_'+spr_id+'_hidden').find('img').css('height',height);$('#hotspot_image_'+spr_id+'_hidden').find('img').css('width',width);}}
function show_hot_spot_settings_from_editor(spremenljivka,enota,tip){var hotspot_image=$('#hotspot_image').val();if((tip==6&&enota==10)||(tip==1&&enota==10)||(tip==2&&enota==10)||tip==27||(tip==17&&enota==3)){$('#hot_spot_fieldset_'+spremenljivka).css('display','');if((tip==1)||(tip==2)||(tip==17&&enota==3)){$('#kategorije_odgovorov_'+spremenljivka).css('display','none');}
if((hotspot_image=='')||(hotspot_image.substring(0,4)!='<img')){$('#hot_spot_regions_add_button').css('display','none');$('#hotspot_message').css('display','');}else if(hotspot_image.substring(0,4)=='<img'){$('#hot_spot_regions_add_button').css('display','');$('#hotspot_message').css('display','none');}}else{$('#hot_spot_fieldset_'+spremenljivka).css('display','none');$('#kategorije_odgovorov_'+spremenljivka).css('display','');}}
function show_hot_spot_settings(spremenljivka,enota,tip){if((tip==6&&enota==10)||(tip==1&&enota==10)||(tip==2&&enota==10)||(tip==17&&enota==3)){$('#hot_spot_fieldset_'+spremenljivka).css('display','');if((tip==1)||(tip==2)||(tip==17&&enota==3)){$('#kategorije_odgovorov_'+spremenljivka).css('display','none');}
var hotspot_image=function(){$.ajaxSetup({async:false});var tmp=null;$.post('ajax.php?t=vprasanje&a=get_hotspot_image',{spremenljivka:spremenljivka},function(data){tmp=data;});return tmp;}();if((hotspot_image=='')||(hotspot_image.substring(0,4)!='<img')){$('#hot_spot_regions_add_button').css('display','none');$('#hotspot_message').css('display','');}else if(hotspot_image.substring(0,4)=='<img'){$('#hot_spot_regions_add_button').css('display','');$('#hotspot_message').css('display','none');}
var enako_stevilo_vnosov_za_hotspot=function(){$.ajaxSetup({async:false});var tmp=null;$.post('ajax.php?t=vprasanje&a=get_hotspot_stevilo_vnosov',{spremenljivka:spremenljivka},function(data){tmp=data;});return tmp;}();}else{$('#hot_spot_fieldset_'+spremenljivka).css('display','none');$('#kategorije_odgovorov_'+spremenljivka).css('display','');}};
/*!
 * Chart.js v3.8.0
 * https://www.chartjs.org
 * (c) 2022 Chart.js Contributors
 * Released under the MIT License
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).Chart=e()}(this,(function(){"use strict";const t="undefined"==typeof window?function(t){return t()}:window.requestAnimationFrame;function e(e,i,s){const n=s||(t=>Array.prototype.slice.call(t));let o=!1,a=[];return function(...s){a=n(s),o||(o=!0,t.call(window,(()=>{o=!1,e.apply(i,a)})))}}function i(t,e){let i;return function(...s){return e?(clearTimeout(i),i=setTimeout(t,e,s)):t.apply(this,s),e}}const s=t=>"start"===t?"left":"end"===t?"right":"center",n=(t,e,i)=>"start"===t?e:"end"===t?i:(e+i)/2,o=(t,e,i,s)=>t===(s?"left":"right")?i:"center"===t?(e+i)/2:e;var a=new class{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,i,s){const n=e.listeners[s],o=e.duration;n.forEach((s=>s({chart:t,initial:e.initial,numSteps:o,currentStep:Math.min(i-e.start,o)})))}_refresh(){this._request||(this._running=!0,this._request=t.call(window,(()=>{this._update(),this._request=null,this._running&&this._refresh()})))}_update(t=Date.now()){let e=0;this._charts.forEach(((i,s)=>{if(!i.running||!i.items.length)return;const n=i.items;let o,a=n.length-1,r=!1;for(;a>=0;--a)o=n[a],o._active?(o._total>i.duration&&(i.duration=o._total),o.tick(t),r=!0):(n[a]=n[n.length-1],n.pop());r&&(s.draw(),this._notify(s,i,t,"progress")),n.length||(i.running=!1,this._notify(s,i,t,"complete"),i.initial=!1),e+=n.length})),this._lastDate=t,0===e&&(this._running=!1)}_getAnims(t){const e=this._charts;let i=e.get(t);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,i)),i}listen(t,e,i){this._getAnims(t).listeners[e].push(i)}add(t,e){e&&e.length&&this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce(((t,e)=>Math.max(t,e._duration)),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!!(e&&e.running&&e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.items.length)return;const i=e.items;let s=i.length-1;for(;s>=0;--s)i[s].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}};
/*!
 * @kurkle/color v0.2.1
 * https://github.com/kurkle/color#readme
 * (c) 2022 Jukka Kurkela
 * Released under the MIT License
 */
function r(t){return t+.5|0}const l=(t,e,i)=>Math.max(Math.min(t,i),e);function h(t){return l(r(2.55*t),0,255)}function c(t){return l(r(255*t),0,255)}function d(t){return l(r(t/2.55)/100,0,1)}function u(t){return l(r(100*t),0,100)}const f={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},g=[..."0123456789ABCDEF"],p=t=>g[15&t],m=t=>g[(240&t)>>4]+g[15&t],b=t=>(240&t)>>4==(15&t);function x(t){var e=(t=>b(t.r)&&b(t.g)&&b(t.b)&&b(t.a))(t)?p:m;return t?"#"+e(t.r)+e(t.g)+e(t.b)+((t,e)=>t<255?e(t):"")(t.a,e):void 0}const _=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function y(t,e,i){const s=e*Math.min(i,1-i),n=(e,n=(e+t/30)%12)=>i-s*Math.max(Math.min(n-3,9-n,1),-1);return[n(0),n(8),n(4)]}function v(t,e,i){const s=(s,n=(s+t/60)%6)=>i-i*e*Math.max(Math.min(n,4-n,1),0);return[s(5),s(3),s(1)]}function w(t,e,i){const s=y(t,1,.5);let n;for(e+i>1&&(n=1/(e+i),e*=n,i*=n),n=0;n<3;n++)s[n]*=1-e-i,s[n]+=e;return s}function M(t){const e=t.r/255,i=t.g/255,s=t.b/255,n=Math.max(e,i,s),o=Math.min(e,i,s),a=(n+o)/2;let r,l,h;return n!==o&&(h=n-o,l=a>.5?h/(2-n-o):h/(n+o),r=function(t,e,i,s,n){return t===n?(e-i)/s+(e<i?6:0):e===n?(i-t)/s+2:(t-e)/s+4}(e,i,s,h,n),r=60*r+.5),[0|r,l||0,a]}function k(t,e,i,s){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,i,s)).map(c)}function S(t,e,i){return k(y,t,e,i)}function P(t){return(t%360+360)%360}function D(t){const e=_.exec(t);let i,s=255;if(!e)return;e[5]!==i&&(s=e[6]?h(+e[5]):c(+e[5]));const n=P(+e[2]),o=+e[3]/100,a=+e[4]/100;return i="hwb"===e[1]?function(t,e,i){return k(w,t,e,i)}(n,o,a):"hsv"===e[1]?function(t,e,i){return k(v,t,e,i)}(n,o,a):S(n,o,a),{r:i[0],g:i[1],b:i[2],a:s}}const C={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},O={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let A;function T(t){A||(A=function(){const t={},e=Object.keys(O),i=Object.keys(C);let s,n,o,a,r;for(s=0;s<e.length;s++){for(a=r=e[s],n=0;n<i.length;n++)o=i[n],r=r.replace(o,C[o]);o=parseInt(O[a],16),t[r]=[o>>16&255,o>>8&255,255&o]}return t}(),A.transparent=[0,0,0,0]);const e=A[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:4===e.length?e[3]:255}}const L=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;const R=t=>t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055,E=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function I(t,e,i){if(t){let s=M(t);s[e]=Math.max(0,Math.min(s[e]+s[e]*i,0===e?360:1)),s=S(s),t.r=s[0],t.g=s[1],t.b=s[2]}}function z(t,e){return t?Object.assign(e||{},t):t}function F(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=c(t[3]))):(e=z(t,{r:0,g:0,b:0,a:1})).a=c(e.a),e}function B(t){return"r"===t.charAt(0)?function(t){const e=L.exec(t);let i,s,n,o=255;if(e){if(e[7]!==i){const t=+e[7];o=e[8]?h(t):l(255*t,0,255)}return i=+e[1],s=+e[3],n=+e[5],i=255&(e[2]?h(i):l(i,0,255)),s=255&(e[4]?h(s):l(s,0,255)),n=255&(e[6]?h(n):l(n,0,255)),{r:i,g:s,b:n,a:o}}}(t):D(t)}class V{constructor(t){if(t instanceof V)return t;const e=typeof t;let i;var s,n,o;"object"===e?i=F(t):"string"===e&&(o=(s=t).length,"#"===s[0]&&(4===o||5===o?n={r:255&17*f[s[1]],g:255&17*f[s[2]],b:255&17*f[s[3]],a:5===o?17*f[s[4]]:255}:7!==o&&9!==o||(n={r:f[s[1]]<<4|f[s[2]],g:f[s[3]]<<4|f[s[4]],b:f[s[5]]<<4|f[s[6]],a:9===o?f[s[7]]<<4|f[s[8]]:255})),i=n||T(t)||B(t)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var t=z(this._rgb);return t&&(t.a=d(t.a)),t}set rgb(t){this._rgb=F(t)}rgbString(){return this._valid?(t=this._rgb)&&(t.a<255?`rgba(${t.r},${t.g},${t.b},${d(t.a)})`:`rgb(${t.r},${t.g},${t.b})`):void 0;var t}hexString(){return this._valid?x(this._rgb):void 0}hslString(){return this._valid?function(t){if(!t)return;const e=M(t),i=e[0],s=u(e[1]),n=u(e[2]);return t.a<255?`hsla(${i},${s}%,${n}%,${d(t.a)})`:`hsl(${i},${s}%,${n}%)`}(this._rgb):void 0}mix(t,e){if(t){const i=this.rgb,s=t.rgb;let n;const o=e===n?.5:e,a=2*o-1,r=i.a-s.a,l=((a*r==-1?a:(a+r)/(1+a*r))+1)/2;n=1-l,i.r=255&l*i.r+n*s.r+.5,i.g=255&l*i.g+n*s.g+.5,i.b=255&l*i.b+n*s.b+.5,i.a=o*i.a+(1-o)*s.a,this.rgb=i}return this}interpolate(t,e){return t&&(this._rgb=function(t,e,i){const s=E(d(t.r)),n=E(d(t.g)),o=E(d(t.b));return{r:c(R(s+i*(E(d(e.r))-s))),g:c(R(n+i*(E(d(e.g))-n))),b:c(R(o+i*(E(d(e.b))-o))),a:t.a+i*(e.a-t.a)}}(this._rgb,t._rgb,e)),this}clone(){return new V(this.rgb)}alpha(t){return this._rgb.a=c(t),this}clearer(t){return this._rgb.a*=1-t,this}greyscale(){const t=this._rgb,e=r(.3*t.r+.59*t.g+.11*t.b);return t.r=t.g=t.b=e,this}opaquer(t){return this._rgb.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return I(this._rgb,2,t),this}darken(t){return I(this._rgb,2,-t),this}saturate(t){return I(this._rgb,1,t),this}desaturate(t){return I(this._rgb,1,-t),this}rotate(t){return function(t,e){var i=M(t);i[0]=P(i[0]+e),i=S(i),t.r=i[0],t.g=i[1],t.b=i[2]}(this._rgb,t),this}}function N(t){return new V(t)}function W(t){if(t&&"object"==typeof t){const e=t.toString();return"[object CanvasPattern]"===e||"[object CanvasGradient]"===e}return!1}function H(t){return W(t)?t:N(t)}function j(t){return W(t)?t:N(t).saturate(.5).darken(.1).hexString()}function $(){}const Y=function(){let t=0;return function(){return t++}}();function U(t){return null==t}function X(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return"[object"===e.slice(0,7)&&"Array]"===e.slice(-6)}function q(t){return null!==t&&"[object Object]"===Object.prototype.toString.call(t)}const K=t=>("number"==typeof t||t instanceof Number)&&isFinite(+t);function G(t,e){return K(t)?t:e}function Z(t,e){return void 0===t?e:t}const J=(t,e)=>"string"==typeof t&&t.endsWith("%")?parseFloat(t)/100:t/e,Q=(t,e)=>"string"==typeof t&&t.endsWith("%")?parseFloat(t)/100*e:+t;function tt(t,e,i){if(t&&"function"==typeof t.call)return t.apply(i,e)}function et(t,e,i,s){let n,o,a;if(X(t))if(o=t.length,s)for(n=o-1;n>=0;n--)e.call(i,t[n],n);else for(n=0;n<o;n++)e.call(i,t[n],n);else if(q(t))for(a=Object.keys(t),o=a.length,n=0;n<o;n++)e.call(i,t[a[n]],a[n])}function it(t,e){let i,s,n,o;if(!t||!e||t.length!==e.length)return!1;for(i=0,s=t.length;i<s;++i)if(n=t[i],o=e[i],n.datasetIndex!==o.datasetIndex||n.index!==o.index)return!1;return!0}function st(t){if(X(t))return t.map(st);if(q(t)){const e=Object.create(null),i=Object.keys(t),s=i.length;let n=0;for(;n<s;++n)e[i[n]]=st(t[i[n]]);return e}return t}function nt(t){return-1===["__proto__","prototype","constructor"].indexOf(t)}function ot(t,e,i,s){if(!nt(t))return;const n=e[t],o=i[t];q(n)&&q(o)?at(n,o,s):e[t]=st(o)}function at(t,e,i){const s=X(e)?e:[e],n=s.length;if(!q(t))return t;const o=(i=i||{}).merger||ot;for(let a=0;a<n;++a){if(!q(e=s[a]))continue;const n=Object.keys(e);for(let s=0,a=n.length;s<a;++s)o(n[s],t,e,i)}return t}function rt(t,e){return at(t,e,{merger:lt})}function lt(t,e,i){if(!nt(t))return;const s=e[t],n=i[t];q(s)&&q(n)?rt(s,n):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=st(n))}function ht(t,e){const i=t.indexOf(".",e);return-1===i?t.length:i}function ct(t,e){if(""===e)return t;let i=0,s=ht(e,i);for(;t&&s>i;)t=t[e.slice(i,s)],i=s+1,s=ht(e,i);return t}function dt(t){return t.charAt(0).toUpperCase()+t.slice(1)}const ut=t=>void 0!==t,ft=t=>"function"==typeof t,gt=(t,e)=>{if(t.size!==e.size)return!1;for(const i of t)if(!e.has(i))return!1;return!0};function pt(t){return"mouseup"===t.type||"click"===t.type||"contextmenu"===t.type}const mt=Object.create(null),bt=Object.create(null);function xt(t,e){if(!e)return t;const i=e.split(".");for(let e=0,s=i.length;e<s;++e){const s=i[e];t=t[s]||(t[s]=Object.create(null))}return t}function _t(t,e,i){return"string"==typeof e?at(xt(t,e),i):at(xt(t,""),e)}var yt=new class{constructor(t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=t=>t.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(t,e)=>j(e.backgroundColor),this.hoverBorderColor=(t,e)=>j(e.borderColor),this.hoverColor=(t,e)=>j(e.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t)}set(t,e){return _t(this,t,e)}get(t){return xt(this,t)}describe(t,e){return _t(bt,t,e)}override(t,e){return _t(mt,t,e)}route(t,e,i,s){const n=xt(this,t),o=xt(this,i),a="_"+e;Object.defineProperties(n,{[a]:{value:n[e],writable:!0},[e]:{enumerable:!0,get(){const t=this[a],e=o[s];return q(t)?Object.assign({},e,t):Z(t,e)},set(t){this[a]=t}}})}}({_scriptable:t=>!t.startsWith("on"),_indexable:t=>"events"!==t,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}});function vt(t,e,i){i=i||(i=>t[i]<e);let s,n=t.length-1,o=0;for(;n-o>1;)s=o+n>>1,i(s)?o=s:n=s;return{lo:o,hi:n}}const wt=(t,e,i)=>vt(t,i,(s=>t[s][e]<i)),Mt=(t,e,i)=>vt(t,i,(s=>t[s][e]>=i));function kt(t,e,i){let s=0,n=t.length;for(;s<n&&t[s]<e;)s++;for(;n>s&&t[n-1]>i;)n--;return s>0||n<t.length?t.slice(s,n):t}const St=["push","pop","shift","splice","unshift"];function Pt(t,e){t._chartjs?t._chartjs.listeners.push(e):(Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),St.forEach((e=>{const i="_onData"+dt(e),s=t[e];Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value(...e){const n=s.apply(this,e);return t._chartjs.listeners.forEach((t=>{"function"==typeof t[i]&&t[i](...e)})),n}})})))}function Dt(t,e){const i=t._chartjs;if(!i)return;const s=i.listeners,n=s.indexOf(e);-1!==n&&s.splice(n,1),s.length>0||(St.forEach((e=>{delete t[e]})),delete t._chartjs)}function Ct(t){const e=new Set;let i,s;for(i=0,s=t.length;i<s;++i)e.add(t[i]);return e.size===s?t:Array.from(e)}const Ot=Math.PI,At=2*Ot,Tt=At+Ot,Lt=Number.POSITIVE_INFINITY,Rt=Ot/180,Et=Ot/2,It=Ot/4,zt=2*Ot/3,Ft=Math.log10,Bt=Math.sign;function Vt(t){const e=Math.round(t);t=Ht(t,e,t/1e3)?e:t;const i=Math.pow(10,Math.floor(Ft(t))),s=t/i;return(s<=1?1:s<=2?2:s<=5?5:10)*i}function Nt(t){const e=[],i=Math.sqrt(t);let s;for(s=1;s<i;s++)t%s==0&&(e.push(s),e.push(t/s));return i===(0|i)&&e.push(i),e.sort(((t,e)=>t-e)).pop(),e}function Wt(t){return!isNaN(parseFloat(t))&&isFinite(t)}function Ht(t,e,i){return Math.abs(t-e)<i}function jt(t,e){const i=Math.round(t);return i-e<=t&&i+e>=t}function $t(t,e,i){let s,n,o;for(s=0,n=t.length;s<n;s++)o=t[s][i],isNaN(o)||(e.min=Math.min(e.min,o),e.max=Math.max(e.max,o))}function Yt(t){return t*(Ot/180)}function Ut(t){return t*(180/Ot)}function Xt(t){if(!K(t))return;let e=1,i=0;for(;Math.round(t*e)/e!==t;)e*=10,i++;return i}function qt(t,e){const i=e.x-t.x,s=e.y-t.y,n=Math.sqrt(i*i+s*s);let o=Math.atan2(s,i);return o<-.5*Ot&&(o+=At),{angle:o,distance:n}}function Kt(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Gt(t,e){return(t-e+Tt)%At-Ot}function Zt(t){return(t%At+At)%At}function Jt(t,e,i,s){const n=Zt(t),o=Zt(e),a=Zt(i),r=Zt(o-n),l=Zt(a-n),h=Zt(n-o),c=Zt(n-a);return n===o||n===a||s&&o===a||r>l&&h<c}function Qt(t,e,i){return Math.max(e,Math.min(i,t))}function te(t){return Qt(t,-32768,32767)}function ee(t,e,i,s=1e-6){return t>=Math.min(e,i)-s&&t<=Math.max(e,i)+s}function ie(){return"undefined"!=typeof window&&"undefined"!=typeof document}function se(t){let e=t.parentNode;return e&&"[object ShadowRoot]"===e.toString()&&(e=e.host),e}function ne(t,e,i){let s;return"string"==typeof t?(s=parseInt(t,10),-1!==t.indexOf("%")&&(s=s/100*e.parentNode[i])):s=t,s}const oe=t=>window.getComputedStyle(t,null);function ae(t,e){return oe(t).getPropertyValue(e)}const re=["top","right","bottom","left"];function le(t,e,i){const s={};i=i?"-"+i:"";for(let n=0;n<4;n++){const o=re[n];s[o]=parseFloat(t[e+"-"+o+i])||0}return s.width=s.left+s.right,s.height=s.top+s.bottom,s}function he(t,e){if("native"in t)return t;const{canvas:i,currentDevicePixelRatio:s}=e,n=oe(i),o="border-box"===n.boxSizing,a=le(n,"padding"),r=le(n,"border","width"),{x:l,y:h,box:c}=function(t,e){const i=t.touches,s=i&&i.length?i[0]:t,{offsetX:n,offsetY:o}=s;let a,r,l=!1;if(((t,e,i)=>(t>0||e>0)&&(!i||!i.shadowRoot))(n,o,t.target))a=n,r=o;else{const t=e.getBoundingClientRect();a=s.clientX-t.left,r=s.clientY-t.top,l=!0}return{x:a,y:r,box:l}}(t,i),d=a.left+(c&&r.left),u=a.top+(c&&r.top);let{width:f,height:g}=e;return o&&(f-=a.width+r.width,g-=a.height+r.height),{x:Math.round((l-d)/f*i.width/s),y:Math.round((h-u)/g*i.height/s)}}const ce=t=>Math.round(10*t)/10;function de(t,e,i,s){const n=oe(t),o=le(n,"margin"),a=ne(n.maxWidth,t,"clientWidth")||Lt,r=ne(n.maxHeight,t,"clientHeight")||Lt,l=function(t,e,i){let s,n;if(void 0===e||void 0===i){const o=se(t);if(o){const t=o.getBoundingClientRect(),a=oe(o),r=le(a,"border","width"),l=le(a,"padding");e=t.width-l.width-r.width,i=t.height-l.height-r.height,s=ne(a.maxWidth,o,"clientWidth"),n=ne(a.maxHeight,o,"clientHeight")}else e=t.clientWidth,i=t.clientHeight}return{width:e,height:i,maxWidth:s||Lt,maxHeight:n||Lt}}(t,e,i);let{width:h,height:c}=l;if("content-box"===n.boxSizing){const t=le(n,"border","width"),e=le(n,"padding");h-=e.width+t.width,c-=e.height+t.height}return h=Math.max(0,h-o.width),c=Math.max(0,s?Math.floor(h/s):c-o.height),h=ce(Math.min(h,a,l.maxWidth)),c=ce(Math.min(c,r,l.maxHeight)),h&&!c&&(c=ce(h/2)),{width:h,height:c}}function ue(t,e,i){const s=e||1,n=Math.floor(t.height*s),o=Math.floor(t.width*s);t.height=n/s,t.width=o/s;const a=t.canvas;return a.style&&(i||!a.style.height&&!a.style.width)&&(a.style.height=`${t.height}px`,a.style.width=`${t.width}px`),(t.currentDevicePixelRatio!==s||a.height!==n||a.width!==o)&&(t.currentDevicePixelRatio=s,a.height=n,a.width=o,t.ctx.setTransform(s,0,0,s,0,0),!0)}const fe=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};window.addEventListener("test",null,e),window.removeEventListener("test",null,e)}catch(t){}return t}();function ge(t,e){const i=ae(t,e),s=i&&i.match(/^(\d+)(\.\d+)?px$/);return s?+s[1]:void 0}function pe(t){return!t||U(t.size)||U(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function me(t,e,i,s,n){let o=e[n];return o||(o=e[n]=t.measureText(n).width,i.push(n)),o>s&&(s=o),s}function be(t,e,i,s){let n=(s=s||{}).data=s.data||{},o=s.garbageCollect=s.garbageCollect||[];s.font!==e&&(n=s.data={},o=s.garbageCollect=[],s.font=e),t.save(),t.font=e;let a=0;const r=i.length;let l,h,c,d,u;for(l=0;l<r;l++)if(d=i[l],null!=d&&!0!==X(d))a=me(t,n,o,a,d);else if(X(d))for(h=0,c=d.length;h<c;h++)u=d[h],null==u||X(u)||(a=me(t,n,o,a,u));t.restore();const f=o.length/2;if(f>i.length){for(l=0;l<f;l++)delete n[o[l]];o.splice(0,f)}return a}function xe(t,e,i){const s=t.currentDevicePixelRatio,n=0!==i?Math.max(i/2,.5):0;return Math.round((e-n)*s)/s+n}function _e(t,e){(e=e||t.getContext("2d")).save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore()}function ye(t,e,i,s){let n,o,a,r,l;const h=e.pointStyle,c=e.rotation,d=e.radius;let u=(c||0)*Rt;if(h&&"object"==typeof h&&(n=h.toString(),"[object HTMLImageElement]"===n||"[object HTMLCanvasElement]"===n))return t.save(),t.translate(i,s),t.rotate(u),t.drawImage(h,-h.width/2,-h.height/2,h.width,h.height),void t.restore();if(!(isNaN(d)||d<=0)){switch(t.beginPath(),h){default:t.arc(i,s,d,0,At),t.closePath();break;case"triangle":t.moveTo(i+Math.sin(u)*d,s-Math.cos(u)*d),u+=zt,t.lineTo(i+Math.sin(u)*d,s-Math.cos(u)*d),u+=zt,t.lineTo(i+Math.sin(u)*d,s-Math.cos(u)*d),t.closePath();break;case"rectRounded":l=.516*d,r=d-l,o=Math.cos(u+It)*r,a=Math.sin(u+It)*r,t.arc(i-o,s-a,l,u-Ot,u-Et),t.arc(i+a,s-o,l,u-Et,u),t.arc(i+o,s+a,l,u,u+Et),t.arc(i-a,s+o,l,u+Et,u+Ot),t.closePath();break;case"rect":if(!c){r=Math.SQRT1_2*d,t.rect(i-r,s-r,2*r,2*r);break}u+=It;case"rectRot":o=Math.cos(u)*d,a=Math.sin(u)*d,t.moveTo(i-o,s-a),t.lineTo(i+a,s-o),t.lineTo(i+o,s+a),t.lineTo(i-a,s+o),t.closePath();break;case"crossRot":u+=It;case"cross":o=Math.cos(u)*d,a=Math.sin(u)*d,t.moveTo(i-o,s-a),t.lineTo(i+o,s+a),t.moveTo(i+a,s-o),t.lineTo(i-a,s+o);break;case"star":o=Math.cos(u)*d,a=Math.sin(u)*d,t.moveTo(i-o,s-a),t.lineTo(i+o,s+a),t.moveTo(i+a,s-o),t.lineTo(i-a,s+o),u+=It,o=Math.cos(u)*d,a=Math.sin(u)*d,t.moveTo(i-o,s-a),t.lineTo(i+o,s+a),t.moveTo(i+a,s-o),t.lineTo(i-a,s+o);break;case"line":o=Math.cos(u)*d,a=Math.sin(u)*d,t.moveTo(i-o,s-a),t.lineTo(i+o,s+a);break;case"dash":t.moveTo(i,s),t.lineTo(i+Math.cos(u)*d,s+Math.sin(u)*d)}t.fill(),e.borderWidth>0&&t.stroke()}}function ve(t,e,i){return i=i||.5,!e||t&&t.x>e.left-i&&t.x<e.right+i&&t.y>e.top-i&&t.y<e.bottom+i}function we(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function Me(t){t.restore()}function ke(t,e,i,s,n){if(!e)return t.lineTo(i.x,i.y);if("middle"===n){const s=(e.x+i.x)/2;t.lineTo(s,e.y),t.lineTo(s,i.y)}else"after"===n!=!!s?t.lineTo(e.x,i.y):t.lineTo(i.x,e.y);t.lineTo(i.x,i.y)}function Se(t,e,i,s){if(!e)return t.lineTo(i.x,i.y);t.bezierCurveTo(s?e.cp1x:e.cp2x,s?e.cp1y:e.cp2y,s?i.cp2x:i.cp1x,s?i.cp2y:i.cp1y,i.x,i.y)}function Pe(t,e,i,s,n,o={}){const a=X(e)?e:[e],r=o.strokeWidth>0&&""!==o.strokeColor;let l,h;for(t.save(),t.font=n.string,function(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]);U(e.rotation)||t.rotate(e.rotation);e.color&&(t.fillStyle=e.color);e.textAlign&&(t.textAlign=e.textAlign);e.textBaseline&&(t.textBaseline=e.textBaseline)}(t,o),l=0;l<a.length;++l)h=a[l],r&&(o.strokeColor&&(t.strokeStyle=o.strokeColor),U(o.strokeWidth)||(t.lineWidth=o.strokeWidth),t.strokeText(h,i,s,o.maxWidth)),t.fillText(h,i,s,o.maxWidth),De(t,i,s,h,o),s+=n.lineHeight;t.restore()}function De(t,e,i,s,n){if(n.strikethrough||n.underline){const o=t.measureText(s),a=e-o.actualBoundingBoxLeft,r=e+o.actualBoundingBoxRight,l=i-o.actualBoundingBoxAscent,h=i+o.actualBoundingBoxDescent,c=n.strikethrough?(l+h)/2:h;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=n.decorationWidth||2,t.moveTo(a,c),t.lineTo(r,c),t.stroke()}}function Ce(t,e){const{x:i,y:s,w:n,h:o,radius:a}=e;t.arc(i+a.topLeft,s+a.topLeft,a.topLeft,-Et,Ot,!0),t.lineTo(i,s+o-a.bottomLeft),t.arc(i+a.bottomLeft,s+o-a.bottomLeft,a.bottomLeft,Ot,Et,!0),t.lineTo(i+n-a.bottomRight,s+o),t.arc(i+n-a.bottomRight,s+o-a.bottomRight,a.bottomRight,Et,0,!0),t.lineTo(i+n,s+a.topRight),t.arc(i+n-a.topRight,s+a.topRight,a.topRight,0,-Et,!0),t.lineTo(i+a.topLeft,s)}function Oe(t,e=[""],i=t,s,n=(()=>t[0])){ut(s)||(s=Ne("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:i,_fallback:s,_getTarget:n,override:n=>Oe([n,...t],e,i,s)};return new Proxy(o,{deleteProperty:(e,i)=>(delete e[i],delete e._keys,delete t[0][i],!0),get:(i,s)=>Ee(i,s,(()=>function(t,e,i,s){let n;for(const o of e)if(n=Ne(Le(o,t),i),ut(n))return Re(t,n)?Be(i,s,t,n):n}(s,e,t,i))),getOwnPropertyDescriptor:(t,e)=>Reflect.getOwnPropertyDescriptor(t._scopes[0],e),getPrototypeOf:()=>Reflect.getPrototypeOf(t[0]),has:(t,e)=>We(t).includes(e),ownKeys:t=>We(t),set(t,e,i){const s=t._storage||(t._storage=n());return t[e]=s[e]=i,delete t._keys,!0}})}function Ae(t,e,i,s){const n={_cacheable:!1,_proxy:t,_context:e,_subProxy:i,_stack:new Set,_descriptors:Te(t,s),setContext:e=>Ae(t,e,i,s),override:n=>Ae(t.override(n),e,i,s)};return new Proxy(n,{deleteProperty:(e,i)=>(delete e[i],delete t[i],!0),get:(t,e,i)=>Ee(t,e,(()=>function(t,e,i){const{_proxy:s,_context:n,_subProxy:o,_descriptors:a}=t;let r=s[e];ft(r)&&a.isScriptable(e)&&(r=function(t,e,i,s){const{_proxy:n,_context:o,_subProxy:a,_stack:r}=i;if(r.has(t))throw new Error("Recursion detected: "+Array.from(r).join("->")+"->"+t);r.add(t),e=e(o,a||s),r.delete(t),Re(t,e)&&(e=Be(n._scopes,n,t,e));return e}(e,r,t,i));X(r)&&r.length&&(r=function(t,e,i,s){const{_proxy:n,_context:o,_subProxy:a,_descriptors:r}=i;if(ut(o.index)&&s(t))e=e[o.index%e.length];else if(q(e[0])){const i=e,s=n._scopes.filter((t=>t!==i));e=[];for(const l of i){const i=Be(s,n,t,l);e.push(Ae(i,o,a&&a[t],r))}}return e}(e,r,t,a.isIndexable));Re(e,r)&&(r=Ae(r,n,o&&o[e],a));return r}(t,e,i))),getOwnPropertyDescriptor:(e,i)=>e._descriptors.allKeys?Reflect.has(t,i)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,i),getPrototypeOf:()=>Reflect.getPrototypeOf(t),has:(e,i)=>Reflect.has(t,i),ownKeys:()=>Reflect.ownKeys(t),set:(e,i,s)=>(t[i]=s,delete e[i],!0)})}function Te(t,e={scriptable:!0,indexable:!0}){const{_scriptable:i=e.scriptable,_indexable:s=e.indexable,_allKeys:n=e.allKeys}=t;return{allKeys:n,scriptable:i,indexable:s,isScriptable:ft(i)?i:()=>i,isIndexable:ft(s)?s:()=>s}}const Le=(t,e)=>t?t+dt(e):e,Re=(t,e)=>q(e)&&"adapters"!==t&&(null===Object.getPrototypeOf(e)||e.constructor===Object);function Ee(t,e,i){if(Object.prototype.hasOwnProperty.call(t,e))return t[e];const s=i();return t[e]=s,s}function Ie(t,e,i){return ft(t)?t(e,i):t}const ze=(t,e)=>!0===t?e:"string"==typeof t?ct(e,t):void 0;function Fe(t,e,i,s,n){for(const o of e){const e=ze(i,o);if(e){t.add(e);const o=Ie(e._fallback,i,n);if(ut(o)&&o!==i&&o!==s)return o}else if(!1===e&&ut(s)&&i!==s)return null}return!1}function Be(t,e,i,s){const n=e._rootScopes,o=Ie(e._fallback,i,s),a=[...t,...n],r=new Set;r.add(s);let l=Ve(r,a,i,o||i,s);return null!==l&&((!ut(o)||o===i||(l=Ve(r,a,o,l,s),null!==l))&&Oe(Array.from(r),[""],n,o,(()=>function(t,e,i){const s=t._getTarget();e in s||(s[e]={});const n=s[e];if(X(n)&&q(i))return i;return n}(e,i,s))))}function Ve(t,e,i,s,n){for(;i;)i=Fe(t,e,i,s,n);return i}function Ne(t,e){for(const i of e){if(!i)continue;const e=i[t];if(ut(e))return e}}function We(t){let e=t._keys;return e||(e=t._keys=function(t){const e=new Set;for(const i of t)for(const t of Object.keys(i).filter((t=>!t.startsWith("_"))))e.add(t);return Array.from(e)}(t._scopes)),e}function He(t,e,i,s){const{iScale:n}=t,{key:o="r"}=this._parsing,a=new Array(s);let r,l,h,c;for(r=0,l=s;r<l;++r)h=r+i,c=e[h],a[r]={r:n.parse(ct(c,o),h)};return a}const je=Number.EPSILON||1e-14,$e=(t,e)=>e<t.length&&!t[e].skip&&t[e],Ye=t=>"x"===t?"y":"x";function Ue(t,e,i,s){const n=t.skip?e:t,o=e,a=i.skip?e:i,r=Kt(o,n),l=Kt(a,o);let h=r/(r+l),c=l/(r+l);h=isNaN(h)?0:h,c=isNaN(c)?0:c;const d=s*h,u=s*c;return{previous:{x:o.x-d*(a.x-n.x),y:o.y-d*(a.y-n.y)},next:{x:o.x+u*(a.x-n.x),y:o.y+u*(a.y-n.y)}}}function Xe(t,e="x"){const i=Ye(e),s=t.length,n=Array(s).fill(0),o=Array(s);let a,r,l,h=$e(t,0);for(a=0;a<s;++a)if(r=l,l=h,h=$e(t,a+1),l){if(h){const t=h[e]-l[e];n[a]=0!==t?(h[i]-l[i])/t:0}o[a]=r?h?Bt(n[a-1])!==Bt(n[a])?0:(n[a-1]+n[a])/2:n[a-1]:n[a]}!function(t,e,i){const s=t.length;let n,o,a,r,l,h=$e(t,0);for(let c=0;c<s-1;++c)l=h,h=$e(t,c+1),l&&h&&(Ht(e[c],0,je)?i[c]=i[c+1]=0:(n=i[c]/e[c],o=i[c+1]/e[c],r=Math.pow(n,2)+Math.pow(o,2),r<=9||(a=3/Math.sqrt(r),i[c]=n*a*e[c],i[c+1]=o*a*e[c])))}(t,n,o),function(t,e,i="x"){const s=Ye(i),n=t.length;let o,a,r,l=$e(t,0);for(let h=0;h<n;++h){if(a=r,r=l,l=$e(t,h+1),!r)continue;const n=r[i],c=r[s];a&&(o=(n-a[i])/3,r[`cp1${i}`]=n-o,r[`cp1${s}`]=c-o*e[h]),l&&(o=(l[i]-n)/3,r[`cp2${i}`]=n+o,r[`cp2${s}`]=c+o*e[h])}}(t,o,e)}function qe(t,e,i){return Math.max(Math.min(t,i),e)}function Ke(t,e,i,s,n){let o,a,r,l;if(e.spanGaps&&(t=t.filter((t=>!t.skip))),"monotone"===e.cubicInterpolationMode)Xe(t,n);else{let i=s?t[t.length-1]:t[0];for(o=0,a=t.length;o<a;++o)r=t[o],l=Ue(i,r,t[Math.min(o+1,a-(s?0:1))%a],e.tension),r.cp1x=l.previous.x,r.cp1y=l.previous.y,r.cp2x=l.next.x,r.cp2y=l.next.y,i=r}e.capBezierPoints&&function(t,e){let i,s,n,o,a,r=ve(t[0],e);for(i=0,s=t.length;i<s;++i)a=o,o=r,r=i<s-1&&ve(t[i+1],e),o&&(n=t[i],a&&(n.cp1x=qe(n.cp1x,e.left,e.right),n.cp1y=qe(n.cp1y,e.top,e.bottom)),r&&(n.cp2x=qe(n.cp2x,e.left,e.right),n.cp2y=qe(n.cp2y,e.top,e.bottom)))}(t,i)}const Ge=t=>0===t||1===t,Ze=(t,e,i)=>-Math.pow(2,10*(t-=1))*Math.sin((t-e)*At/i),Je=(t,e,i)=>Math.pow(2,-10*t)*Math.sin((t-e)*At/i)+1,Qe={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>1-Math.cos(t*Et),easeOutSine:t=>Math.sin(t*Et),easeInOutSine:t=>-.5*(Math.cos(Ot*t)-1),easeInExpo:t=>0===t?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>1===t?1:1-Math.pow(2,-10*t),easeInOutExpo:t=>Ge(t)?t:t<.5?.5*Math.pow(2,10*(2*t-1)):.5*(2-Math.pow(2,-10*(2*t-1))),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>Ge(t)?t:Ze(t,.075,.3),easeOutElastic:t=>Ge(t)?t:Je(t,.075,.3),easeInOutElastic(t){const e=.1125;return Ge(t)?t:t<.5?.5*Ze(2*t,e,.45):.5+.5*Je(2*t-1,e,.45)},easeInBack(t){const e=1.70158;return t*t*((e+1)*t-e)},easeOutBack(t){const e=1.70158;return(t-=1)*t*((e+1)*t+e)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?t*t*((1+(e*=1.525))*t-e)*.5:.5*((t-=2)*t*((1+(e*=1.525))*t+e)+2)},easeInBounce:t=>1-Qe.easeOutBounce(1-t),easeOutBounce(t){const e=7.5625,i=2.75;return t<1/i?e*t*t:t<2/i?e*(t-=1.5/i)*t+.75:t<2.5/i?e*(t-=2.25/i)*t+.9375:e*(t-=2.625/i)*t+.984375},easeInOutBounce:t=>t<.5?.5*Qe.easeInBounce(2*t):.5*Qe.easeOutBounce(2*t-1)+.5};function ti(t,e,i,s){return{x:t.x+i*(e.x-t.x),y:t.y+i*(e.y-t.y)}}function ei(t,e,i,s){return{x:t.x+i*(e.x-t.x),y:"middle"===s?i<.5?t.y:e.y:"after"===s?i<1?t.y:e.y:i>0?e.y:t.y}}function ii(t,e,i,s){const n={x:t.cp2x,y:t.cp2y},o={x:e.cp1x,y:e.cp1y},a=ti(t,n,i),r=ti(n,o,i),l=ti(o,e,i),h=ti(a,r,i),c=ti(r,l,i);return ti(h,c,i)}const si=new Map;function ni(t,e,i){return function(t,e){e=e||{};const i=t+JSON.stringify(e);let s=si.get(i);return s||(s=new Intl.NumberFormat(t,e),si.set(i,s)),s}(e,i).format(t)}const oi=new RegExp(/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/),ai=new RegExp(/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/);function ri(t,e){const i=(""+t).match(oi);if(!i||"normal"===i[1])return 1.2*e;switch(t=+i[2],i[3]){case"px":return t;case"%":t/=100}return e*t}function li(t,e){const i={},s=q(e),n=s?Object.keys(e):e,o=q(t)?s?i=>Z(t[i],t[e[i]]):e=>t[e]:()=>t;for(const t of n)i[t]=+o(t)||0;return i}function hi(t){return li(t,{top:"y",right:"x",bottom:"y",left:"x"})}function ci(t){return li(t,["topLeft","topRight","bottomLeft","bottomRight"])}function di(t){const e=hi(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function ui(t,e){t=t||{},e=e||yt.font;let i=Z(t.size,e.size);"string"==typeof i&&(i=parseInt(i,10));let s=Z(t.style,e.style);s&&!(""+s).match(ai)&&(console.warn('Invalid font style specified: "'+s+'"'),s="");const n={family:Z(t.family,e.family),lineHeight:ri(Z(t.lineHeight,e.lineHeight),i),size:i,style:s,weight:Z(t.weight,e.weight),string:""};return n.string=pe(n),n}function fi(t,e,i,s){let n,o,a,r=!0;for(n=0,o=t.length;n<o;++n)if(a=t[n],void 0!==a&&(void 0!==e&&"function"==typeof a&&(a=a(e),r=!1),void 0!==i&&X(a)&&(a=a[i%a.length],r=!1),void 0!==a))return s&&!r&&(s.cacheable=!1),a}function gi(t,e,i){const{min:s,max:n}=t,o=Q(e,(n-s)/2),a=(t,e)=>i&&0===t?0:t+e;return{min:a(s,-Math.abs(o)),max:a(n,o)}}function pi(t,e){return Object.assign(Object.create(t),e)}function mi(t,e,i){return t?function(t,e){return{x:i=>t+t+e-i,setWidth(t){e=t},textAlign:t=>"center"===t?t:"right"===t?"left":"right",xPlus:(t,e)=>t-e,leftForLtr:(t,e)=>t-e}}(e,i):{x:t=>t,setWidth(t){},textAlign:t=>t,xPlus:(t,e)=>t+e,leftForLtr:(t,e)=>t}}function bi(t,e){let i,s;"ltr"!==e&&"rtl"!==e||(i=t.canvas.style,s=[i.getPropertyValue("direction"),i.getPropertyPriority("direction")],i.setProperty("direction",e,"important"),t.prevTextDirection=s)}function xi(t,e){void 0!==e&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function _i(t){return"angle"===t?{between:Jt,compare:Gt,normalize:Zt}:{between:ee,compare:(t,e)=>t-e,normalize:t=>t}}function yi({start:t,end:e,count:i,loop:s,style:n}){return{start:t%i,end:e%i,loop:s&&(e-t+1)%i==0,style:n}}function vi(t,e,i){if(!i)return[t];const{property:s,start:n,end:o}=i,a=e.length,{compare:r,between:l,normalize:h}=_i(s),{start:c,end:d,loop:u,style:f}=function(t,e,i){const{property:s,start:n,end:o}=i,{between:a,normalize:r}=_i(s),l=e.length;let h,c,{start:d,end:u,loop:f}=t;if(f){for(d+=l,u+=l,h=0,c=l;h<c&&a(r(e[d%l][s]),n,o);++h)d--,u--;d%=l,u%=l}return u<d&&(u+=l),{start:d,end:u,loop:f,style:t.style}}(t,e,i),g=[];let p,m,b,x=!1,_=null;const y=()=>x||l(n,b,p)&&0!==r(n,b),v=()=>!x||0===r(o,p)||l(o,b,p);for(let t=c,i=c;t<=d;++t)m=e[t%a],m.skip||(p=h(m[s]),p!==b&&(x=l(p,n,o),null===_&&y()&&(_=0===r(p,n)?t:i),null!==_&&v()&&(g.push(yi({start:_,end:t,loop:u,count:a,style:f})),_=null),i=t,b=p));return null!==_&&g.push(yi({start:_,end:d,loop:u,count:a,style:f})),g}function wi(t,e){const i=[],s=t.segments;for(let n=0;n<s.length;n++){const o=vi(s[n],t.points,e);o.length&&i.push(...o)}return i}function Mi(t,e){const i=t.points,s=t.options.spanGaps,n=i.length;if(!n)return[];const o=!!t._loop,{start:a,end:r}=function(t,e,i,s){let n=0,o=e-1;if(i&&!s)for(;n<e&&!t[n].skip;)n++;for(;n<e&&t[n].skip;)n++;for(n%=e,i&&(o+=n);o>n&&t[o%e].skip;)o--;return o%=e,{start:n,end:o}}(i,n,o,s);if(!0===s)return ki(t,[{start:a,end:r,loop:o}],i,e);return ki(t,function(t,e,i,s){const n=t.length,o=[];let a,r=e,l=t[e];for(a=e+1;a<=i;++a){const i=t[a%n];i.skip||i.stop?l.skip||(s=!1,o.push({start:e%n,end:(a-1)%n,loop:s}),e=r=i.stop?a:null):(r=a,l.skip&&(e=a)),l=i}return null!==r&&o.push({start:e%n,end:r%n,loop:s}),o}(i,a,r<a?r+n:r,!!t._fullLoop&&0===a&&r===n-1),i,e)}function ki(t,e,i,s){return s&&s.setContext&&i?function(t,e,i,s){const n=t._chart.getContext(),o=Si(t.options),{_datasetIndex:a,options:{spanGaps:r}}=t,l=i.length,h=[];let c=o,d=e[0].start,u=d;function f(t,e,s,n){const o=r?-1:1;if(t!==e){for(t+=l;i[t%l].skip;)t-=o;for(;i[e%l].skip;)e+=o;t%l!=e%l&&(h.push({start:t%l,end:e%l,loop:s,style:n}),c=n,d=e%l)}}for(const t of e){d=r?d:t.start;let e,o=i[d%l];for(u=d+1;u<=t.end;u++){const r=i[u%l];e=Si(s.setContext(pi(n,{type:"segment",p0:o,p1:r,p0DataIndex:(u-1)%l,p1DataIndex:u%l,datasetIndex:a}))),Pi(e,c)&&f(d,u-1,t.loop,c),o=r,c=e}d<u-1&&f(d,u-1,t.loop,c)}return h}(t,e,i,s):e}function Si(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function Pi(t,e){return e&&JSON.stringify(t)!==JSON.stringify(e)}var Di=Object.freeze({__proto__:null,easingEffects:Qe,isPatternOrGradient:W,color:H,getHoverColor:j,noop:$,uid:Y,isNullOrUndef:U,isArray:X,isObject:q,isFinite:K,finiteOrDefault:G,valueOrDefault:Z,toPercentage:J,toDimension:Q,callback:tt,each:et,_elementsEqual:it,clone:st,_merger:ot,merge:at,mergeIf:rt,_mergerIf:lt,_deprecated:function(t,e,i,s){void 0!==e&&console.warn(t+': "'+i+'" is deprecated. Please use "'+s+'" instead')},resolveObjectKey:ct,_capitalize:dt,defined:ut,isFunction:ft,setsEqual:gt,_isClickEvent:pt,toFontString:pe,_measureText:me,_longestText:be,_alignPixel:xe,clearCanvas:_e,drawPoint:ye,_isPointInArea:ve,clipArea:we,unclipArea:Me,_steppedLineTo:ke,_bezierCurveTo:Se,renderText:Pe,addRoundedRectPath:Ce,_lookup:vt,_lookupByKey:wt,_rlookupByKey:Mt,_filterBetween:kt,listenArrayEvents:Pt,unlistenArrayEvents:Dt,_arrayUnique:Ct,_createResolver:Oe,_attachContext:Ae,_descriptors:Te,_parseObjectDataRadialScale:He,splineCurve:Ue,splineCurveMonotone:Xe,_updateBezierControlPoints:Ke,_isDomSupported:ie,_getParentNode:se,getStyle:ae,getRelativePosition:he,getMaximumSize:de,retinaScale:ue,supportsEventListenerOptions:fe,readUsedSize:ge,fontString:function(t,e,i){return e+" "+t+"px "+i},requestAnimFrame:t,throttled:e,debounce:i,_toLeftRightCenter:s,_alignStartEnd:n,_textX:o,_pointInLine:ti,_steppedInterpolation:ei,_bezierInterpolation:ii,formatNumber:ni,toLineHeight:ri,_readValueToProps:li,toTRBL:hi,toTRBLCorners:ci,toPadding:di,toFont:ui,resolve:fi,_addGrace:gi,createContext:pi,PI:Ot,TAU:At,PITAU:Tt,INFINITY:Lt,RAD_PER_DEG:Rt,HALF_PI:Et,QUARTER_PI:It,TWO_THIRDS_PI:zt,log10:Ft,sign:Bt,niceNum:Vt,_factorize:Nt,isNumber:Wt,almostEquals:Ht,almostWhole:jt,_setMinAndMaxByKey:$t,toRadians:Yt,toDegrees:Ut,_decimalPlaces:Xt,getAngleFromPoint:qt,distanceBetweenPoints:Kt,_angleDiff:Gt,_normalizeAngle:Zt,_angleBetween:Jt,_limitValue:Qt,_int16Range:te,_isBetween:ee,getRtlAdapter:mi,overrideTextDirection:bi,restoreTextDirection:xi,_boundSegment:vi,_boundSegments:wi,_computeSegments:Mi});function Ci(t,e,i,s){const{controller:n,data:o,_sorted:a}=t,r=n._cachedMeta.iScale;if(r&&e===r.axis&&"r"!==e&&a&&o.length){const t=r._reversePixels?Mt:wt;if(!s)return t(o,e,i);if(n._sharedOptions){const s=o[0],n="function"==typeof s.getRange&&s.getRange(e);if(n){const s=t(o,e,i-n),a=t(o,e,i+n);return{lo:s.lo,hi:a.hi}}}}return{lo:0,hi:o.length-1}}function Oi(t,e,i,s,n){const o=t.getSortedVisibleDatasetMetas(),a=i[e];for(let t=0,i=o.length;t<i;++t){const{index:i,data:r}=o[t],{lo:l,hi:h}=Ci(o[t],e,a,n);for(let t=l;t<=h;++t){const e=r[t];e.skip||s(e,i,t)}}}function Ai(t,e,i,s,n){const o=[];if(!n&&!t.isPointInArea(e))return o;return Oi(t,i,e,(function(i,a,r){(n||ve(i,t.chartArea,0))&&i.inRange(e.x,e.y,s)&&o.push({element:i,datasetIndex:a,index:r})}),!0),o}function Ti(t,e,i,s,n,o){let a=[];const r=function(t){const e=-1!==t.indexOf("x"),i=-1!==t.indexOf("y");return function(t,s){const n=e?Math.abs(t.x-s.x):0,o=i?Math.abs(t.y-s.y):0;return Math.sqrt(Math.pow(n,2)+Math.pow(o,2))}}(i);let l=Number.POSITIVE_INFINITY;return Oi(t,i,e,(function(i,h,c){const d=i.inRange(e.x,e.y,n);if(s&&!d)return;const u=i.getCenterPoint(n);if(!(!!o||t.isPointInArea(u))&&!d)return;const f=r(e,u);f<l?(a=[{element:i,datasetIndex:h,index:c}],l=f):f===l&&a.push({element:i,datasetIndex:h,index:c})})),a}function Li(t,e,i,s,n,o){return o||t.isPointInArea(e)?"r"!==i||s?Ti(t,e,i,s,n,o):function(t,e,i,s){let n=[];return Oi(t,i,e,(function(t,i,o){const{startAngle:a,endAngle:r}=t.getProps(["startAngle","endAngle"],s),{angle:l}=qt(t,{x:e.x,y:e.y});Jt(l,a,r)&&n.push({element:t,datasetIndex:i,index:o})})),n}(t,e,i,n):[]}function Ri(t,e,i,s,n){const o=[],a="x"===i?"inXRange":"inYRange";let r=!1;return Oi(t,i,e,((t,s,l)=>{t[a](e[i],n)&&(o.push({element:t,datasetIndex:s,index:l}),r=r||t.inRange(e.x,e.y,n))})),s&&!r?[]:o}var Ei={evaluateInteractionItems:Oi,modes:{index(t,e,i,s){const n=he(e,t),o=i.axis||"x",a=i.includeInvisible||!1,r=i.intersect?Ai(t,n,o,s,a):Li(t,n,o,!1,s,a),l=[];return r.length?(t.getSortedVisibleDatasetMetas().forEach((t=>{const e=r[0].index,i=t.data[e];i&&!i.skip&&l.push({element:i,datasetIndex:t.index,index:e})})),l):[]},dataset(t,e,i,s){const n=he(e,t),o=i.axis||"xy",a=i.includeInvisible||!1;let r=i.intersect?Ai(t,n,o,s,a):Li(t,n,o,!1,s,a);if(r.length>0){const e=r[0].datasetIndex,i=t.getDatasetMeta(e).data;r=[];for(let t=0;t<i.length;++t)r.push({element:i[t],datasetIndex:e,index:t})}return r},point:(t,e,i,s)=>Ai(t,he(e,t),i.axis||"xy",s,i.includeInvisible||!1),nearest(t,e,i,s){const n=he(e,t),o=i.axis||"xy",a=i.includeInvisible||!1;return Li(t,n,o,i.intersect,s,a)},x:(t,e,i,s)=>Ri(t,he(e,t),"x",i.intersect,s),y:(t,e,i,s)=>Ri(t,he(e,t),"y",i.intersect,s)}};const Ii=["left","top","right","bottom"];function zi(t,e){return t.filter((t=>t.pos===e))}function Fi(t,e){return t.filter((t=>-1===Ii.indexOf(t.pos)&&t.box.axis===e))}function Bi(t,e){return t.sort(((t,i)=>{const s=e?i:t,n=e?t:i;return s.weight===n.weight?s.index-n.index:s.weight-n.weight}))}function Vi(t,e){const i=function(t){const e={};for(const i of t){const{stack:t,pos:s,stackWeight:n}=i;if(!t||!Ii.includes(s))continue;const o=e[t]||(e[t]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=n}return e}(t),{vBoxMaxWidth:s,hBoxMaxHeight:n}=e;let o,a,r;for(o=0,a=t.length;o<a;++o){r=t[o];const{fullSize:a}=r.box,l=i[r.stack],h=l&&r.stackWeight/l.weight;r.horizontal?(r.width=h?h*s:a&&e.availableWidth,r.height=n):(r.width=s,r.height=h?h*n:a&&e.availableHeight)}return i}function Ni(t,e,i,s){return Math.max(t[i],e[i])+Math.max(t[s],e[s])}function Wi(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function Hi(t,e,i,s){const{pos:n,box:o}=i,a=t.maxPadding;if(!q(n)){i.size&&(t[n]-=i.size);const e=s[i.stack]||{size:0,count:1};e.size=Math.max(e.size,i.horizontal?o.height:o.width),i.size=e.size/e.count,t[n]+=i.size}o.getPadding&&Wi(a,o.getPadding());const r=Math.max(0,e.outerWidth-Ni(a,t,"left","right")),l=Math.max(0,e.outerHeight-Ni(a,t,"top","bottom")),h=r!==t.w,c=l!==t.h;return t.w=r,t.h=l,i.horizontal?{same:h,other:c}:{same:c,other:h}}function ji(t,e){const i=e.maxPadding;function s(t){const s={left:0,top:0,right:0,bottom:0};return t.forEach((t=>{s[t]=Math.max(e[t],i[t])})),s}return s(t?["left","right"]:["top","bottom"])}function $i(t,e,i,s){const n=[];let o,a,r,l,h,c;for(o=0,a=t.length,h=0;o<a;++o){r=t[o],l=r.box,l.update(r.width||e.w,r.height||e.h,ji(r.horizontal,e));const{same:a,other:d}=Hi(e,i,r,s);h|=a&&n.length,c=c||d,l.fullSize||n.push(r)}return h&&$i(n,e,i,s)||c}function Yi(t,e,i,s,n){t.top=i,t.left=e,t.right=e+s,t.bottom=i+n,t.width=s,t.height=n}function Ui(t,e,i,s){const n=i.padding;let{x:o,y:a}=e;for(const r of t){const t=r.box,l=s[r.stack]||{count:1,placed:0,weight:1},h=r.stackWeight/l.weight||1;if(r.horizontal){const s=e.w*h,o=l.size||t.height;ut(l.start)&&(a=l.start),t.fullSize?Yi(t,n.left,a,i.outerWidth-n.right-n.left,o):Yi(t,e.left+l.placed,a,s,o),l.start=a,l.placed+=s,a=t.bottom}else{const s=e.h*h,a=l.size||t.width;ut(l.start)&&(o=l.start),t.fullSize?Yi(t,o,n.top,a,i.outerHeight-n.bottom-n.top):Yi(t,o,e.top+l.placed,a,s),l.start=o,l.placed+=s,o=t.right}}e.x=o,e.y=a}yt.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}});var Xi={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},t.boxes.push(e)},removeBox(t,e){const i=t.boxes?t.boxes.indexOf(e):-1;-1!==i&&t.boxes.splice(i,1)},configure(t,e,i){e.fullSize=i.fullSize,e.position=i.position,e.weight=i.weight},update(t,e,i,s){if(!t)return;const n=di(t.options.layout.padding),o=Math.max(e-n.width,0),a=Math.max(i-n.height,0),r=function(t){const e=function(t){const e=[];let i,s,n,o,a,r;for(i=0,s=(t||[]).length;i<s;++i)n=t[i],({position:o,options:{stack:a,stackWeight:r=1}}=n),e.push({index:i,box:n,pos:o,horizontal:n.isHorizontal(),weight:n.weight,stack:a&&o+a,stackWeight:r});return e}(t),i=Bi(e.filter((t=>t.box.fullSize)),!0),s=Bi(zi(e,"left"),!0),n=Bi(zi(e,"right")),o=Bi(zi(e,"top"),!0),a=Bi(zi(e,"bottom")),r=Fi(e,"x"),l=Fi(e,"y");return{fullSize:i,leftAndTop:s.concat(o),rightAndBottom:n.concat(l).concat(a).concat(r),chartArea:zi(e,"chartArea"),vertical:s.concat(n).concat(l),horizontal:o.concat(a).concat(r)}}(t.boxes),l=r.vertical,h=r.horizontal;et(t.boxes,(t=>{"function"==typeof t.beforeLayout&&t.beforeLayout()}));const c=l.reduce(((t,e)=>e.box.options&&!1===e.box.options.display?t:t+1),0)||1,d=Object.freeze({outerWidth:e,outerHeight:i,padding:n,availableWidth:o,availableHeight:a,vBoxMaxWidth:o/2/c,hBoxMaxHeight:a/2}),u=Object.assign({},n);Wi(u,di(s));const f=Object.assign({maxPadding:u,w:o,h:a,x:n.left,y:n.top},n),g=Vi(l.concat(h),d);$i(r.fullSize,f,d,g),$i(l,f,d,g),$i(h,f,d,g)&&$i(l,f,d,g),function(t){const e=t.maxPadding;function i(i){const s=Math.max(e[i]-t[i],0);return t[i]+=s,s}t.y+=i("top"),t.x+=i("left"),i("right"),i("bottom")}(f),Ui(r.leftAndTop,f,d,g),f.x+=f.w,f.y+=f.h,Ui(r.rightAndBottom,f,d,g),t.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},et(r.chartArea,(e=>{const i=e.box;Object.assign(i,t.chartArea),i.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})}))}};class qi{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,i){}removeEventListener(t,e,i){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,i,s){return e=Math.max(0,e||t.width),i=i||t.height,{width:e,height:Math.max(0,s?Math.floor(e/s):i)}}isAttached(t){return!0}updateConfig(t){}}class Ki extends qi{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const Gi={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Zi=t=>null===t||""===t;const Ji=!!fe&&{passive:!0};function Qi(t,e,i){t.canvas.removeEventListener(e,i,Ji)}function ts(t,e){for(const i of t)if(i===e||i.contains(e))return!0}function es(t,e,i){const s=t.canvas,n=new MutationObserver((t=>{let e=!1;for(const i of t)e=e||ts(i.addedNodes,s),e=e&&!ts(i.removedNodes,s);e&&i()}));return n.observe(document,{childList:!0,subtree:!0}),n}function is(t,e,i){const s=t.canvas,n=new MutationObserver((t=>{let e=!1;for(const i of t)e=e||ts(i.removedNodes,s),e=e&&!ts(i.addedNodes,s);e&&i()}));return n.observe(document,{childList:!0,subtree:!0}),n}const ss=new Map;let ns=0;function os(){const t=window.devicePixelRatio;t!==ns&&(ns=t,ss.forEach(((e,i)=>{i.currentDevicePixelRatio!==t&&e()})))}function as(t,i,s){const n=t.canvas,o=n&&se(n);if(!o)return;const a=e(((t,e)=>{const i=o.clientWidth;s(t,e),i<o.clientWidth&&s()}),window),r=new ResizeObserver((t=>{const e=t[0],i=e.contentRect.width,s=e.contentRect.height;0===i&&0===s||a(i,s)}));return r.observe(o),function(t,e){ss.size||window.addEventListener("resize",os),ss.set(t,e)}(t,a),r}function rs(t,e,i){i&&i.disconnect(),"resize"===e&&function(t){ss.delete(t),ss.size||window.removeEventListener("resize",os)}(t)}function ls(t,i,s){const n=t.canvas,o=e((e=>{null!==t.ctx&&s(function(t,e){const i=Gi[t.type]||t.type,{x:s,y:n}=he(t,e);return{type:i,chart:e,native:t,x:void 0!==s?s:null,y:void 0!==n?n:null}}(e,t))}),t,(t=>{const e=t[0];return[e,e.offsetX,e.offsetY]}));return function(t,e,i){t.addEventListener(e,i,Ji)}(n,i,o),o}class hs extends qi{acquireContext(t,e){const i=t&&t.getContext&&t.getContext("2d");return i&&i.canvas===t?(function(t,e){const i=t.style,s=t.getAttribute("height"),n=t.getAttribute("width");if(t.$chartjs={initial:{height:s,width:n,style:{display:i.display,height:i.height,width:i.width}}},i.display=i.display||"block",i.boxSizing=i.boxSizing||"border-box",Zi(n)){const e=ge(t,"width");void 0!==e&&(t.width=e)}if(Zi(s))if(""===t.style.height)t.height=t.width/(e||2);else{const e=ge(t,"height");void 0!==e&&(t.height=e)}}(t,e),i):null}releaseContext(t){const e=t.canvas;if(!e.$chartjs)return!1;const i=e.$chartjs.initial;["height","width"].forEach((t=>{const s=i[t];U(s)?e.removeAttribute(t):e.setAttribute(t,s)}));const s=i.style||{};return Object.keys(s).forEach((t=>{e.style[t]=s[t]})),e.width=e.width,delete e.$chartjs,!0}addEventListener(t,e,i){this.removeEventListener(t,e);const s=t.$proxies||(t.$proxies={}),n={attach:es,detach:is,resize:as}[e]||ls;s[e]=n(t,e,i)}removeEventListener(t,e){const i=t.$proxies||(t.$proxies={}),s=i[e];if(!s)return;({attach:rs,detach:rs,resize:rs}[e]||Qi)(t,e,s),i[e]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,i,s){return de(t,e,i,s)}isAttached(t){const e=se(t);return!(!e||!e.isConnected)}}function cs(t){return!ie()||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas?Ki:hs}var ds=Object.freeze({__proto__:null,_detectPlatform:cs,BasePlatform:qi,BasicPlatform:Ki,DomPlatform:hs});const us="transparent",fs={boolean:(t,e,i)=>i>.5?e:t,color(t,e,i){const s=H(t||us),n=s.valid&&H(e||us);return n&&n.valid?n.mix(s,i).hexString():e},number:(t,e,i)=>t+(e-t)*i};class gs{constructor(t,e,i,s){const n=e[i];s=fi([t.to,s,n,t.from]);const o=fi([t.from,n,s]);this._active=!0,this._fn=t.fn||fs[t.type||typeof o],this._easing=Qe[t.easing]||Qe.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=i,this._from=o,this._to=s,this._promises=void 0}active(){return this._active}update(t,e,i){if(this._active){this._notify(!1);const s=this._target[this._prop],n=i-this._start,o=this._duration-n;this._start=i,this._duration=Math.floor(Math.max(o,t.duration)),this._total+=n,this._loop=!!t.loop,this._to=fi([t.to,e,s,t.from]),this._from=fi([t.from,s,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const e=t-this._start,i=this._duration,s=this._prop,n=this._from,o=this._loop,a=this._to;let r;if(this._active=n!==a&&(o||e<i),!this._active)return this._target[s]=a,void this._notify(!0);e<0?this._target[s]=n:(r=e/i%2,r=o&&r>1?2-r:r,r=this._easing(Math.min(1,Math.max(0,r))),this._target[s]=this._fn(n,a,r))}wait(){const t=this._promises||(this._promises=[]);return new Promise(((e,i)=>{t.push({res:e,rej:i})}))}_notify(t){const e=t?"res":"rej",i=this._promises||[];for(let t=0;t<i.length;t++)i[t][e]()}}yt.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0});const ps=Object.keys(yt.animation);yt.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>"onProgress"!==t&&"onComplete"!==t&&"fn"!==t}),yt.set("animations",{colors:{type:"color",properties:["color","borderColor","backgroundColor"]},numbers:{type:"number",properties:["x","y","borderWidth","radius","tension"]}}),yt.describe("animations",{_fallback:"animation"}),yt.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>0|t}}}});class ms{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!q(t))return;const e=this._properties;Object.getOwnPropertyNames(t).forEach((i=>{const s=t[i];if(!q(s))return;const n={};for(const t of ps)n[t]=s[t];(X(s.properties)&&s.properties||[i]).forEach((t=>{t!==i&&e.has(t)||e.set(t,n)}))}))}_animateOptions(t,e){const i=e.options,s=function(t,e){if(!e)return;let i=t.options;if(!i)return void(t.options=e);i.$shared&&(t.options=i=Object.assign({},i,{$shared:!1,$animations:{}}));return i}(t,i);if(!s)return[];const n=this._createAnimations(s,i);return i.$shared&&function(t,e){const i=[],s=Object.keys(e);for(let e=0;e<s.length;e++){const n=t[s[e]];n&&n.active()&&i.push(n.wait())}return Promise.all(i)}(t.options.$animations,i).then((()=>{t.options=i}),(()=>{})),n}_createAnimations(t,e){const i=this._properties,s=[],n=t.$animations||(t.$animations={}),o=Object.keys(e),a=Date.now();let r;for(r=o.length-1;r>=0;--r){const l=o[r];if("$"===l.charAt(0))continue;if("options"===l){s.push(...this._animateOptions(t,e));continue}const h=e[l];let c=n[l];const d=i.get(l);if(c){if(d&&c.active()){c.update(d,h,a);continue}c.cancel()}d&&d.duration?(n[l]=c=new gs(d,t,l,h),s.push(c)):t[l]=h}return s}update(t,e){if(0===this._properties.size)return void Object.assign(t,e);const i=this._createAnimations(t,e);return i.length?(a.add(this._chart,i),!0):void 0}}function bs(t,e){const i=t&&t.options||{},s=i.reverse,n=void 0===i.min?e:0,o=void 0===i.max?e:0;return{start:s?o:n,end:s?n:o}}function xs(t,e){const i=[],s=t._getSortedDatasetMetas(e);let n,o;for(n=0,o=s.length;n<o;++n)i.push(s[n].index);return i}function _s(t,e,i,s={}){const n=t.keys,o="single"===s.mode;let a,r,l,h;if(null!==e){for(a=0,r=n.length;a<r;++a){if(l=+n[a],l===i){if(s.all)continue;break}h=t.values[l],K(h)&&(o||0===e||Bt(e)===Bt(h))&&(e+=h)}return e}}function ys(t,e){const i=t&&t.options.stacked;return i||void 0===i&&void 0!==e.stack}function vs(t,e,i){const s=t[e]||(t[e]={});return s[i]||(s[i]={})}function ws(t,e,i,s){for(const n of e.getMatchingVisibleMetas(s).reverse()){const e=t[n.index];if(i&&e>0||!i&&e<0)return n.index}return null}function Ms(t,e){const{chart:i,_cachedMeta:s}=t,n=i._stacks||(i._stacks={}),{iScale:o,vScale:a,index:r}=s,l=o.axis,h=a.axis,c=function(t,e,i){return`${t.id}.${e.id}.${i.stack||i.type}`}(o,a,s),d=e.length;let u;for(let t=0;t<d;++t){const i=e[t],{[l]:o,[h]:d}=i;u=(i._stacks||(i._stacks={}))[h]=vs(n,c,o),u[r]=d,u._top=ws(u,a,!0,s.type),u._bottom=ws(u,a,!1,s.type)}}function ks(t,e){const i=t.scales;return Object.keys(i).filter((t=>i[t].axis===e)).shift()}function Ss(t,e){const i=t.controller.index,s=t.vScale&&t.vScale.axis;if(s){e=e||t._parsed;for(const t of e){const e=t._stacks;if(!e||void 0===e[s]||void 0===e[s][i])return;delete e[s][i]}}}const Ps=t=>"reset"===t||"none"===t,Ds=(t,e)=>e?t:Object.assign({},t);class Cs{constructor(t,e){this.chart=t,this._ctx=t.ctx,this.index=e,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=ys(t.vScale,t),this.addElements()}updateIndex(t){this.index!==t&&Ss(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,e=this._cachedMeta,i=this.getDataset(),s=(t,e,i,s)=>"x"===t?e:"r"===t?s:i,n=e.xAxisID=Z(i.xAxisID,ks(t,"x")),o=e.yAxisID=Z(i.yAxisID,ks(t,"y")),a=e.rAxisID=Z(i.rAxisID,ks(t,"r")),r=e.indexAxis,l=e.iAxisID=s(r,n,o,a),h=e.vAxisID=s(r,o,n,a);e.xScale=this.getScaleForId(n),e.yScale=this.getScaleForId(o),e.rScale=this.getScaleForId(a),e.iScale=this.getScaleForId(l),e.vScale=this.getScaleForId(h)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const e=this._cachedMeta;return t===e.iScale?e.vScale:e.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&Dt(this._data,this),t._stacked&&Ss(t)}_dataCheck(){const t=this.getDataset(),e=t.data||(t.data=[]),i=this._data;if(q(e))this._data=function(t){const e=Object.keys(t),i=new Array(e.length);let s,n,o;for(s=0,n=e.length;s<n;++s)o=e[s],i[s]={x:o,y:t[o]};return i}(e);else if(i!==e){if(i){Dt(i,this);const t=this._cachedMeta;Ss(t),t._parsed=[]}e&&Object.isExtensible(e)&&Pt(e,this),this._syncList=[],this._data=e}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const e=this._cachedMeta,i=this.getDataset();let s=!1;this._dataCheck();const n=e._stacked;e._stacked=ys(e.vScale,e),e.stack!==i.stack&&(s=!0,Ss(e),e.stack=i.stack),this._resyncElements(t),(s||n!==e._stacked)&&Ms(this,e._parsed)}configure(){const t=this.chart.config,e=t.datasetScopeKeys(this._type),i=t.getOptionScopes(this.getDataset(),e,!0);this.options=t.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,e){const{_cachedMeta:i,_data:s}=this,{iScale:n,_stacked:o}=i,a=n.axis;let r,l,h,c=0===t&&e===s.length||i._sorted,d=t>0&&i._parsed[t-1];if(!1===this._parsing)i._parsed=s,i._sorted=!0,h=s;else{h=X(s[t])?this.parseArrayData(i,s,t,e):q(s[t])?this.parseObjectData(i,s,t,e):this.parsePrimitiveData(i,s,t,e);const n=()=>null===l[a]||d&&l[a]<d[a];for(r=0;r<e;++r)i._parsed[r+t]=l=h[r],c&&(n()&&(c=!1),d=l);i._sorted=c}o&&Ms(this,h)}parsePrimitiveData(t,e,i,s){const{iScale:n,vScale:o}=t,a=n.axis,r=o.axis,l=n.getLabels(),h=n===o,c=new Array(s);let d,u,f;for(d=0,u=s;d<u;++d)f=d+i,c[d]={[a]:h||n.parse(l[f],f),[r]:o.parse(e[f],f)};return c}parseArrayData(t,e,i,s){const{xScale:n,yScale:o}=t,a=new Array(s);let r,l,h,c;for(r=0,l=s;r<l;++r)h=r+i,c=e[h],a[r]={x:n.parse(c[0],h),y:o.parse(c[1],h)};return a}parseObjectData(t,e,i,s){const{xScale:n,yScale:o}=t,{xAxisKey:a="x",yAxisKey:r="y"}=this._parsing,l=new Array(s);let h,c,d,u;for(h=0,c=s;h<c;++h)d=h+i,u=e[d],l[h]={x:n.parse(ct(u,a),d),y:o.parse(ct(u,r),d)};return l}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,e,i){const s=this.chart,n=this._cachedMeta,o=e[t.axis];return _s({keys:xs(s,!0),values:e._stacks[t.axis]},o,n.index,{mode:i})}updateRangeFromParsed(t,e,i,s){const n=i[e.axis];let o=null===n?NaN:n;const a=s&&i._stacks[e.axis];s&&a&&(s.values=a,o=_s(s,n,this._cachedMeta.index)),t.min=Math.min(t.min,o),t.max=Math.max(t.max,o)}getMinMax(t,e){const i=this._cachedMeta,s=i._parsed,n=i._sorted&&t===i.iScale,o=s.length,a=this._getOtherScale(t),r=((t,e,i)=>t&&!e.hidden&&e._stacked&&{keys:xs(i,!0),values:null})(e,i,this.chart),l={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:h,max:c}=function(t){const{min:e,max:i,minDefined:s,maxDefined:n}=t.getUserBounds();return{min:s?e:Number.NEGATIVE_INFINITY,max:n?i:Number.POSITIVE_INFINITY}}(a);let d,u;function f(){u=s[d];const e=u[a.axis];return!K(u[t.axis])||h>e||c<e}for(d=0;d<o&&(f()||(this.updateRangeFromParsed(l,t,u,r),!n));++d);if(n)for(d=o-1;d>=0;--d)if(!f()){this.updateRangeFromParsed(l,t,u,r);break}return l}getAllParsedValues(t){const e=this._cachedMeta._parsed,i=[];let s,n,o;for(s=0,n=e.length;s<n;++s)o=e[s][t.axis],K(o)&&i.push(o);return i}getMaxOverflow(){return!1}getLabelAndValue(t){const e=this._cachedMeta,i=e.iScale,s=e.vScale,n=this.getParsed(t);return{label:i?""+i.getLabelForValue(n[i.axis]):"",value:s?""+s.getLabelForValue(n[s.axis]):""}}_update(t){const e=this._cachedMeta;this.update(t||"default"),e._clip=function(t){let e,i,s,n;return q(t)?(e=t.top,i=t.right,s=t.bottom,n=t.left):e=i=s=n=t,{top:e,right:i,bottom:s,left:n,disabled:!1===t}}(Z(this.options.clip,function(t,e,i){if(!1===i)return!1;const s=bs(t,i),n=bs(e,i);return{top:n.end,right:s.end,bottom:n.start,left:s.start}}(e.xScale,e.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,e=this.chart,i=this._cachedMeta,s=i.data||[],n=e.chartArea,o=[],a=this._drawStart||0,r=this._drawCount||s.length-a,l=this.options.drawActiveElementsOnTop;let h;for(i.dataset&&i.dataset.draw(t,n,a,r),h=a;h<a+r;++h){const e=s[h];e.hidden||(e.active&&l?o.push(e):e.draw(t,n))}for(h=0;h<o.length;++h)o[h].draw(t,n)}getStyle(t,e){const i=e?"active":"default";return void 0===t&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(t||0,i)}getContext(t,e,i){const s=this.getDataset();let n;if(t>=0&&t<this._cachedMeta.data.length){const e=this._cachedMeta.data[t];n=e.$context||(e.$context=function(t,e,i){return pi(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:i,index:e,mode:"default",type:"data"})}(this.getContext(),t,e)),n.parsed=this.getParsed(t),n.raw=s.data[t],n.index=n.dataIndex=t}else n=this.$context||(this.$context=function(t,e){return pi(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),n.dataset=s,n.index=n.datasetIndex=this.index;return n.active=!!e,n.mode=i,n}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,e){return this._resolveElementOptions(this.dataElementType.id,e,t)}_resolveElementOptions(t,e="default",i){const s="active"===e,n=this._cachedDataOpts,o=t+"-"+e,a=n[o],r=this.enableOptionSharing&&ut(i);if(a)return Ds(a,r);const l=this.chart.config,h=l.datasetElementScopeKeys(this._type,t),c=s?[`${t}Hover`,"hover",t,""]:[t,""],d=l.getOptionScopes(this.getDataset(),h),u=Object.keys(yt.elements[t]),f=l.resolveNamedOptions(d,u,(()=>this.getContext(i,s)),c);return f.$shared&&(f.$shared=r,n[o]=Object.freeze(Ds(f,r))),f}_resolveAnimations(t,e,i){const s=this.chart,n=this._cachedDataOpts,o=`animation-${e}`,a=n[o];if(a)return a;let r;if(!1!==s.options.animation){const s=this.chart.config,n=s.datasetAnimationScopeKeys(this._type,e),o=s.getOptionScopes(this.getDataset(),n);r=s.createResolver(o,this.getContext(t,i,e))}const l=new ms(s,r&&r.animations);return r&&r._cacheable&&(n[o]=Object.freeze(l)),l}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,e){return!e||Ps(t)||this.chart._animationsDisabled}updateElement(t,e,i,s){Ps(s)?Object.assign(t,i):this._resolveAnimations(e,s).update(t,i)}updateSharedOptions(t,e,i){t&&!Ps(e)&&this._resolveAnimations(void 0,e).update(t,i)}_setStyle(t,e,i,s){t.active=s;const n=this.getStyle(e,s);this._resolveAnimations(e,i,s).update(t,{options:!s&&this.getSharedOptions(n)||n})}removeHoverStyle(t,e,i){this._setStyle(t,i,"active",!1)}setHoverStyle(t,e,i){this._setStyle(t,i,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const e=this._data,i=this._cachedMeta.data;for(const[t,e,i]of this._syncList)this[t](e,i);this._syncList=[];const s=i.length,n=e.length,o=Math.min(n,s);o&&this.parse(0,o),n>s?this._insertElements(s,n-s,t):n<s&&this._removeElements(n,s-n)}_insertElements(t,e,i=!0){const s=this._cachedMeta,n=s.data,o=t+e;let a;const r=t=>{for(t.length+=e,a=t.length-1;a>=o;a--)t[a]=t[a-e]};for(r(n),a=t;a<o;++a)n[a]=new this.dataElementType;this._parsing&&r(s._parsed),this.parse(t,e),i&&this.updateElements(n,t,e,"reset")}updateElements(t,e,i,s){}_removeElements(t,e){const i=this._cachedMeta;if(this._parsing){const s=i._parsed.splice(t,e);i._stacked&&Ss(i,s)}i.data.splice(t,e)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[e,i,s]=t;this[e](i,s)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,e){e&&this._sync(["_removeElements",t,e]);const i=arguments.length-2;i&&this._sync(["_insertElements",t,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}Cs.defaults={},Cs.prototype.datasetElementType=null,Cs.prototype.dataElementType=null;class Os{constructor(){this.x=void 0,this.y=void 0,this.active=!1,this.options=void 0,this.$animations=void 0}tooltipPosition(t){const{x:e,y:i}=this.getProps(["x","y"],t);return{x:e,y:i}}hasValue(){return Wt(this.x)&&Wt(this.y)}getProps(t,e){const i=this.$animations;if(!e||!i)return this;const s={};return t.forEach((t=>{s[t]=i[t]&&i[t].active()?i[t]._to:this[t]})),s}}Os.defaults={},Os.defaultRoutes=void 0;const As={values:t=>X(t)?t:""+t,numeric(t,e,i){if(0===t)return"0";const s=this.chart.options.locale;let n,o=t;if(i.length>1){const e=Math.max(Math.abs(i[0].value),Math.abs(i[i.length-1].value));(e<1e-4||e>1e15)&&(n="scientific"),o=function(t,e){let i=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;Math.abs(i)>=1&&t!==Math.floor(t)&&(i=t-Math.floor(t));return i}(t,i)}const a=Ft(Math.abs(o)),r=Math.max(Math.min(-1*Math.floor(a),20),0),l={notation:n,minimumFractionDigits:r,maximumFractionDigits:r};return Object.assign(l,this.options.ticks.format),ni(t,s,l)},logarithmic(t,e,i){if(0===t)return"0";const s=t/Math.pow(10,Math.floor(Ft(t)));return 1===s||2===s||5===s?As.numeric.call(this,t,e,i):""}};var Ts={formatters:As};function Ls(t,e){const i=t.options.ticks,s=i.maxTicksLimit||function(t){const e=t.options.offset,i=t._tickSize(),s=t._length/i+(e?0:1),n=t._maxLength/i;return Math.floor(Math.min(s,n))}(t),n=i.major.enabled?function(t){const e=[];let i,s;for(i=0,s=t.length;i<s;i++)t[i].major&&e.push(i);return e}(e):[],o=n.length,a=n[0],r=n[o-1],l=[];if(o>s)return function(t,e,i,s){let n,o=0,a=i[0];for(s=Math.ceil(s),n=0;n<t.length;n++)n===a&&(e.push(t[n]),o++,a=i[o*s])}(e,l,n,o/s),l;const h=function(t,e,i){const s=function(t){const e=t.length;let i,s;if(e<2)return!1;for(s=t[0],i=1;i<e;++i)if(t[i]-t[i-1]!==s)return!1;return s}(t),n=e.length/i;if(!s)return Math.max(n,1);const o=Nt(s);for(let t=0,e=o.length-1;t<e;t++){const e=o[t];if(e>n)return e}return Math.max(n,1)}(n,e,s);if(o>0){let t,i;const s=o>1?Math.round((r-a)/(o-1)):null;for(Rs(e,l,h,U(s)?0:a-s,a),t=0,i=o-1;t<i;t++)Rs(e,l,h,n[t],n[t+1]);return Rs(e,l,h,r,U(s)?e.length:r+s),l}return Rs(e,l,h),l}function Rs(t,e,i,s,n){const o=Z(s,0),a=Math.min(Z(n,t.length),t.length);let r,l,h,c=0;for(i=Math.ceil(i),n&&(r=n-s,i=r/Math.floor(r/i)),h=o;h<0;)c++,h=Math.round(o+c*i);for(l=Math.max(o,0);l<a;l++)l===h&&(e.push(t[l]),c++,h=Math.round(o+c*i))}yt.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",grace:0,grid:{display:!0,lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1,borderDash:[],borderDashOffset:0,borderWidth:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Ts.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),yt.route("scale.ticks","color","","color"),yt.route("scale.grid","color","","borderColor"),yt.route("scale.grid","borderColor","","borderColor"),yt.route("scale.title","color","","color"),yt.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&"callback"!==t&&"parser"!==t,_indexable:t=>"borderDash"!==t&&"tickBorderDash"!==t}),yt.describe("scales",{_fallback:"scale"}),yt.describe("scale.ticks",{_scriptable:t=>"backdropPadding"!==t&&"callback"!==t,_indexable:t=>"backdropPadding"!==t});const Es=(t,e,i)=>"top"===e||"left"===e?t[e]+i:t[e]-i;function Is(t,e){const i=[],s=t.length/e,n=t.length;let o=0;for(;o<n;o+=s)i.push(t[Math.floor(o)]);return i}function zs(t,e,i){const s=t.ticks.length,n=Math.min(e,s-1),o=t._startPixel,a=t._endPixel,r=1e-6;let l,h=t.getPixelForTick(n);if(!(i&&(l=1===s?Math.max(h-o,a-h):0===e?(t.getPixelForTick(1)-h)/2:(h-t.getPixelForTick(n-1))/2,h+=n<e?l:-l,h<o-r||h>a+r)))return h}function Fs(t){return t.drawTicks?t.tickLength:0}function Bs(t,e){if(!t.display)return 0;const i=ui(t.font,e),s=di(t.padding);return(X(t.text)?t.text.length:1)*i.lineHeight+s.height}function Vs(t,e,i){let n=s(t);return(i&&"right"!==e||!i&&"right"===e)&&(n=(t=>"left"===t?"right":"right"===t?"left":t)(n)),n}class Ns extends Os{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:i,_suggestedMax:s}=this;return t=G(t,Number.POSITIVE_INFINITY),e=G(e,Number.NEGATIVE_INFINITY),i=G(i,Number.POSITIVE_INFINITY),s=G(s,Number.NEGATIVE_INFINITY),{min:G(t,i),max:G(e,s),minDefined:K(t),maxDefined:K(e)}}getMinMax(t){let e,{min:i,max:s,minDefined:n,maxDefined:o}=this.getUserBounds();if(n&&o)return{min:i,max:s};const a=this.getMatchingVisibleMetas();for(let r=0,l=a.length;r<l;++r)e=a[r].controller.getMinMax(this,t),n||(i=Math.min(i,e.min)),o||(s=Math.max(s,e.max));return i=o&&i>s?s:i,s=n&&i>s?i:s,{min:G(i,G(s,i)),max:G(s,G(i,s))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){tt(this.options.beforeUpdate,[this])}update(t,e,i){const{beginAtZero:s,grace:n,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=gi(this,n,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const r=a<this.ticks.length;this._convertTicksToLabels(r?Is(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||"auto"===o.source)&&(this.ticks=Ls(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),r&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t,e,i=this.options.reverse;this.isHorizontal()?(t=this.left,e=this.right):(t=this.top,e=this.bottom,i=!i),this._startPixel=t,this._endPixel=e,this._reversePixels=i,this._length=e-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){tt(this.options.afterUpdate,[this])}beforeSetDimensions(){tt(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){tt(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),tt(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){tt(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const e=this.options.ticks;let i,s,n;for(i=0,s=t.length;i<s;i++)n=t[i],n.label=tt(e.callback,[n.value,i,t],this)}afterTickToLabelConversion(){tt(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){tt(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,e=t.ticks,i=this.ticks.length,s=e.minRotation||0,n=e.maxRotation;let o,a,r,l=s;if(!this._isVisible()||!e.display||s>=n||i<=1||!this.isHorizontal())return void(this.labelRotation=s);const h=this._getLabelSizes(),c=h.widest.width,d=h.highest.height,u=Qt(this.chart.width-c,0,this.maxWidth);o=t.offset?this.maxWidth/i:u/(i-1),c+6>o&&(o=u/(i-(t.offset?.5:1)),a=this.maxHeight-Fs(t.grid)-e.padding-Bs(t.title,this.chart.options.font),r=Math.sqrt(c*c+d*d),l=Ut(Math.min(Math.asin(Qt((h.highest.height+6)/o,-1,1)),Math.asin(Qt(a/r,-1,1))-Math.asin(Qt(d/r,-1,1)))),l=Math.max(s,Math.min(n,l))),this.labelRotation=l}afterCalculateLabelRotation(){tt(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){tt(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:e,options:{ticks:i,title:s,grid:n}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const o=Bs(s,e.options.font);if(a?(t.width=this.maxWidth,t.height=Fs(n)+o):(t.height=this.maxHeight,t.width=Fs(n)+o),i.display&&this.ticks.length){const{first:e,last:s,widest:n,highest:o}=this._getLabelSizes(),r=2*i.padding,l=Yt(this.labelRotation),h=Math.cos(l),c=Math.sin(l);if(a){const e=i.mirror?0:c*n.width+h*o.height;t.height=Math.min(this.maxHeight,t.height+e+r)}else{const e=i.mirror?0:h*n.width+c*o.height;t.width=Math.min(this.maxWidth,t.width+e+r)}this._calculatePadding(e,s,c,h)}}this._handleMargins(),a?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,i,s){const{ticks:{align:n,padding:o},position:a}=this.options,r=0!==this.labelRotation,l="top"!==a&&"x"===this.axis;if(this.isHorizontal()){const a=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1);let c=0,d=0;r?l?(c=s*t.width,d=i*e.height):(c=i*t.height,d=s*e.width):"start"===n?d=e.width:"end"===n?c=t.width:"inner"!==n&&(c=t.width/2,d=e.width/2),this.paddingLeft=Math.max((c-a+o)*this.width/(this.width-a),0),this.paddingRight=Math.max((d-h+o)*this.width/(this.width-h),0)}else{let i=e.height/2,s=t.height/2;"start"===n?(i=0,s=t.height):"end"===n&&(i=e.height,s=0),this.paddingTop=i+o,this.paddingBottom=s+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){tt(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:e}=this.options;return"top"===e||"bottom"===e||"x"===t}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){let e,i;for(this.beforeTickToLabelConversion(),this.generateTickLabels(t),e=0,i=t.length;e<i;e++)U(t[e].label)&&(t.splice(e,1),i--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const e=this.options.ticks.sampleSize;let i=this.ticks;e<i.length&&(i=Is(i,e)),this._labelSizes=t=this._computeLabelSizes(i,i.length)}return t}_computeLabelSizes(t,e){const{ctx:i,_longestTextCache:s}=this,n=[],o=[];let a,r,l,h,c,d,u,f,g,p,m,b=0,x=0;for(a=0;a<e;++a){if(h=t[a].label,c=this._resolveTickFontOptions(a),i.font=d=c.string,u=s[d]=s[d]||{data:{},gc:[]},f=c.lineHeight,g=p=0,U(h)||X(h)){if(X(h))for(r=0,l=h.length;r<l;++r)m=h[r],U(m)||X(m)||(g=me(i,u.data,u.gc,g,m),p+=f)}else g=me(i,u.data,u.gc,g,h),p=f;n.push(g),o.push(p),b=Math.max(g,b),x=Math.max(p,x)}!function(t,e){et(t,(t=>{const i=t.gc,s=i.length/2;let n;if(s>e){for(n=0;n<s;++n)delete t.data[i[n]];i.splice(0,s)}}))}(s,e);const _=n.indexOf(b),y=o.indexOf(x),v=t=>({width:n[t]||0,height:o[t]||0});return{first:v(0),last:v(e-1),widest:v(_),highest:v(y),widths:n,heights:o}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const e=this._startPixel+t*this._length;return te(this._alignToPixels?xe(this.chart,e,0):e)}getDecimalForPixel(t){const e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){const e=this.ticks||[];if(t>=0&&t<e.length){const i=e[t];return i.$context||(i.$context=function(t,e,i){return pi(t,{tick:i,index:e,type:"tick"})}(this.getContext(),t,i))}return this.$context||(this.$context=pi(this.chart.getContext(),{scale:this,type:"scale"}))}_tickSize(){const t=this.options.ticks,e=Yt(this.labelRotation),i=Math.abs(Math.cos(e)),s=Math.abs(Math.sin(e)),n=this._getLabelSizes(),o=t.autoSkipPadding||0,a=n?n.widest.width+o:0,r=n?n.highest.height+o:0;return this.isHorizontal()?r*i>a*s?a/i:r/s:r*s<a*i?r/i:a/s}_isVisible(){const t=this.options.display;return"auto"!==t?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const e=this.axis,i=this.chart,s=this.options,{grid:n,position:o}=s,a=n.offset,r=this.isHorizontal(),l=this.ticks.length+(a?1:0),h=Fs(n),c=[],d=n.setContext(this.getContext()),u=d.drawBorder?d.borderWidth:0,f=u/2,g=function(t){return xe(i,t,u)};let p,m,b,x,_,y,v,w,M,k,S,P;if("top"===o)p=g(this.bottom),y=this.bottom-h,w=p-f,k=g(t.top)+f,P=t.bottom;else if("bottom"===o)p=g(this.top),k=t.top,P=g(t.bottom)-f,y=p+f,w=this.top+h;else if("left"===o)p=g(this.right),_=this.right-h,v=p-f,M=g(t.left)+f,S=t.right;else if("right"===o)p=g(this.left),M=t.left,S=g(t.right)-f,_=p+f,v=this.left+h;else if("x"===e){if("center"===o)p=g((t.top+t.bottom)/2+.5);else if(q(o)){const t=Object.keys(o)[0],e=o[t];p=g(this.chart.scales[t].getPixelForValue(e))}k=t.top,P=t.bottom,y=p+f,w=y+h}else if("y"===e){if("center"===o)p=g((t.left+t.right)/2);else if(q(o)){const t=Object.keys(o)[0],e=o[t];p=g(this.chart.scales[t].getPixelForValue(e))}_=p-f,v=_-h,M=t.left,S=t.right}const D=Z(s.ticks.maxTicksLimit,l),C=Math.max(1,Math.ceil(l/D));for(m=0;m<l;m+=C){const t=n.setContext(this.getContext(m)),e=t.lineWidth,s=t.color,o=n.borderDash||[],l=t.borderDashOffset,h=t.tickWidth,d=t.tickColor,u=t.tickBorderDash||[],f=t.tickBorderDashOffset;b=zs(this,m,a),void 0!==b&&(x=xe(i,b,e),r?_=v=M=S=x:y=w=k=P=x,c.push({tx1:_,ty1:y,tx2:v,ty2:w,x1:M,y1:k,x2:S,y2:P,width:e,color:s,borderDash:o,borderDashOffset:l,tickWidth:h,tickColor:d,tickBorderDash:u,tickBorderDashOffset:f}))}return this._ticksLength=l,this._borderValue=p,c}_computeLabelItems(t){const e=this.axis,i=this.options,{position:s,ticks:n}=i,o=this.isHorizontal(),a=this.ticks,{align:r,crossAlign:l,padding:h,mirror:c}=n,d=Fs(i.grid),u=d+h,f=c?-h:u,g=-Yt(this.labelRotation),p=[];let m,b,x,_,y,v,w,M,k,S,P,D,C="middle";if("top"===s)v=this.bottom-f,w=this._getXAxisLabelAlignment();else if("bottom"===s)v=this.top+f,w=this._getXAxisLabelAlignment();else if("left"===s){const t=this._getYAxisLabelAlignment(d);w=t.textAlign,y=t.x}else if("right"===s){const t=this._getYAxisLabelAlignment(d);w=t.textAlign,y=t.x}else if("x"===e){if("center"===s)v=(t.top+t.bottom)/2+u;else if(q(s)){const t=Object.keys(s)[0],e=s[t];v=this.chart.scales[t].getPixelForValue(e)+u}w=this._getXAxisLabelAlignment()}else if("y"===e){if("center"===s)y=(t.left+t.right)/2-u;else if(q(s)){const t=Object.keys(s)[0],e=s[t];y=this.chart.scales[t].getPixelForValue(e)}w=this._getYAxisLabelAlignment(d).textAlign}"y"===e&&("start"===r?C="top":"end"===r&&(C="bottom"));const O=this._getLabelSizes();for(m=0,b=a.length;m<b;++m){x=a[m],_=x.label;const t=n.setContext(this.getContext(m));M=this.getPixelForTick(m)+n.labelOffset,k=this._resolveTickFontOptions(m),S=k.lineHeight,P=X(_)?_.length:1;const e=P/2,i=t.color,r=t.textStrokeColor,h=t.textStrokeWidth;let d,u=w;if(o?(y=M,"inner"===w&&(u=m===b-1?this.options.reverse?"left":"right":0===m?this.options.reverse?"right":"left":"center"),D="top"===s?"near"===l||0!==g?-P*S+S/2:"center"===l?-O.highest.height/2-e*S+S:-O.highest.height+S/2:"near"===l||0!==g?S/2:"center"===l?O.highest.height/2-e*S:O.highest.height-P*S,c&&(D*=-1)):(v=M,D=(1-P)*S/2),t.showLabelBackdrop){const e=di(t.backdropPadding),i=O.heights[m],s=O.widths[m];let n=v+D-e.top,o=y-e.left;switch(C){case"middle":n-=i/2;break;case"bottom":n-=i}switch(w){case"center":o-=s/2;break;case"right":o-=s}d={left:o,top:n,width:s+e.width,height:i+e.height,color:t.backdropColor}}p.push({rotation:g,label:_,font:k,color:i,strokeColor:r,strokeWidth:h,textOffset:D,textAlign:u,textBaseline:C,translation:[y,v],backdrop:d})}return p}_getXAxisLabelAlignment(){const{position:t,ticks:e}=this.options;if(-Yt(this.labelRotation))return"top"===t?"left":"right";let i="center";return"start"===e.align?i="left":"end"===e.align?i="right":"inner"===e.align&&(i="inner"),i}_getYAxisLabelAlignment(t){const{position:e,ticks:{crossAlign:i,mirror:s,padding:n}}=this.options,o=t+n,a=this._getLabelSizes().widest.width;let r,l;return"left"===e?s?(l=this.right+n,"near"===i?r="left":"center"===i?(r="center",l+=a/2):(r="right",l+=a)):(l=this.right-o,"near"===i?r="right":"center"===i?(r="center",l-=a/2):(r="left",l=this.left)):"right"===e?s?(l=this.left+n,"near"===i?r="right":"center"===i?(r="center",l-=a/2):(r="left",l-=a)):(l=this.left+o,"near"===i?r="left":"center"===i?(r="center",l+=a/2):(r="right",l=this.right)):r="right",{textAlign:r,x:l}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,e=this.options.position;return"left"===e||"right"===e?{top:0,left:this.left,bottom:t.height,right:this.right}:"top"===e||"bottom"===e?{top:this.top,left:0,bottom:this.bottom,right:t.width}:void 0}drawBackground(){const{ctx:t,options:{backgroundColor:e},left:i,top:s,width:n,height:o}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(i,s,n,o),t.restore())}getLineWidthForValue(t){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const i=this.ticks.findIndex((e=>e.value===t));if(i>=0){return e.setContext(this.getContext(i)).lineWidth}return 0}drawGrid(t){const e=this.options.grid,i=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let n,o;const a=(t,e,s)=>{s.width&&s.color&&(i.save(),i.lineWidth=s.width,i.strokeStyle=s.color,i.setLineDash(s.borderDash||[]),i.lineDashOffset=s.borderDashOffset,i.beginPath(),i.moveTo(t.x,t.y),i.lineTo(e.x,e.y),i.stroke(),i.restore())};if(e.display)for(n=0,o=s.length;n<o;++n){const t=s[n];e.drawOnChartArea&&a({x:t.x1,y:t.y1},{x:t.x2,y:t.y2},t),e.drawTicks&&a({x:t.tx1,y:t.ty1},{x:t.tx2,y:t.ty2},{color:t.tickColor,width:t.tickWidth,borderDash:t.tickBorderDash,borderDashOffset:t.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:e,options:{grid:i}}=this,s=i.setContext(this.getContext()),n=i.drawBorder?s.borderWidth:0;if(!n)return;const o=i.setContext(this.getContext(0)).lineWidth,a=this._borderValue;let r,l,h,c;this.isHorizontal()?(r=xe(t,this.left,n)-n/2,l=xe(t,this.right,o)+o/2,h=c=a):(h=xe(t,this.top,n)-n/2,c=xe(t,this.bottom,o)+o/2,r=l=a),e.save(),e.lineWidth=s.borderWidth,e.strokeStyle=s.borderColor,e.beginPath(),e.moveTo(r,h),e.lineTo(l,c),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;const e=this.ctx,i=this._computeLabelArea();i&&we(e,i);const s=this._labelItems||(this._labelItems=this._computeLabelItems(t));let n,o;for(n=0,o=s.length;n<o;++n){const t=s[n],i=t.font,o=t.label;t.backdrop&&(e.fillStyle=t.backdrop.color,e.fillRect(t.backdrop.left,t.backdrop.top,t.backdrop.width,t.backdrop.height)),Pe(e,o,0,t.textOffset,i,t)}i&&Me(e)}drawTitle(){const{ctx:t,options:{position:e,title:i,reverse:s}}=this;if(!i.display)return;const o=ui(i.font),a=di(i.padding),r=i.align;let l=o.lineHeight/2;"bottom"===e||"center"===e||q(e)?(l+=a.bottom,X(i.text)&&(l+=o.lineHeight*(i.text.length-1))):l+=a.top;const{titleX:h,titleY:c,maxWidth:d,rotation:u}=function(t,e,i,s){const{top:o,left:a,bottom:r,right:l,chart:h}=t,{chartArea:c,scales:d}=h;let u,f,g,p=0;const m=r-o,b=l-a;if(t.isHorizontal()){if(f=n(s,a,l),q(i)){const t=Object.keys(i)[0],s=i[t];g=d[t].getPixelForValue(s)+m-e}else g="center"===i?(c.bottom+c.top)/2+m-e:Es(t,i,e);u=l-a}else{if(q(i)){const t=Object.keys(i)[0],s=i[t];f=d[t].getPixelForValue(s)-b+e}else f="center"===i?(c.left+c.right)/2-b+e:Es(t,i,e);g=n(s,r,o),p="left"===i?-Et:Et}return{titleX:f,titleY:g,maxWidth:u,rotation:p}}(this,l,e,r);Pe(t,i.text,0,0,o,{color:i.color,maxWidth:d,rotation:u,textAlign:Vs(r,e,s),textBaseline:"middle",translation:[h,c]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,e=t.ticks&&t.ticks.z||0,i=Z(t.grid&&t.grid.z,-1);return this._isVisible()&&this.draw===Ns.prototype.draw?[{z:i,draw:t=>{this.drawBackground(),this.drawGrid(t),this.drawTitle()}},{z:i+1,draw:()=>{this.drawBorder()}},{z:e,draw:t=>{this.drawLabels(t)}}]:[{z:e,draw:t=>{this.draw(t)}}]}getMatchingVisibleMetas(t){const e=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",s=[];let n,o;for(n=0,o=e.length;n<o;++n){const o=e[n];o[i]!==this.id||t&&o.type!==t||s.push(o)}return s}_resolveTickFontOptions(t){return ui(this.options.ticks.setContext(this.getContext(t)).font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class Ws{constructor(t,e,i){this.type=t,this.scope=e,this.override=i,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const e=Object.getPrototypeOf(t);let i;(function(t){return"id"in t&&"defaults"in t})(e)&&(i=this.register(e));const s=this.items,n=t.id,o=this.scope+"."+n;if(!n)throw new Error("class does not have id: "+t);return n in s||(s[n]=t,function(t,e,i){const s=at(Object.create(null),[i?yt.get(i):{},yt.get(e),t.defaults]);yt.set(e,s),t.defaultRoutes&&function(t,e){Object.keys(e).forEach((i=>{const s=i.split("."),n=s.pop(),o=[t].concat(s).join("."),a=e[i].split("."),r=a.pop(),l=a.join(".");yt.route(o,n,l,r)}))}(e,t.defaultRoutes);t.descriptors&&yt.describe(e,t.descriptors)}(t,o,i),this.override&&yt.override(t.id,t.overrides)),o}get(t){return this.items[t]}unregister(t){const e=this.items,i=t.id,s=this.scope;i in e&&delete e[i],s&&i in yt[s]&&(delete yt[s][i],this.override&&delete mt[i])}}var Hs=new class{constructor(){this.controllers=new Ws(Cs,"datasets",!0),this.elements=new Ws(Os,"elements"),this.plugins=new Ws(Object,"plugins"),this.scales=new Ws(Ns,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,i){[...e].forEach((e=>{const s=i||this._getRegistryForType(e);i||s.isForType(e)||s===this.plugins&&e.id?this._exec(t,s,e):et(e,(e=>{const s=i||this._getRegistryForType(e);this._exec(t,s,e)}))}))}_exec(t,e,i){const s=dt(t);tt(i["before"+s],[],i),e[t](i),tt(i["after"+s],[],i)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const i=this._typedRegistries[e];if(i.isForType(t))return i}return this.plugins}_get(t,e,i){const s=e.get(t);if(void 0===s)throw new Error('"'+t+'" is not a registered '+i+".");return s}};class js{constructor(){this._init=[]}notify(t,e,i,s){"beforeInit"===e&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const n=s?this._descriptors(t).filter(s):this._descriptors(t),o=this._notify(n,t,e,i);return"afterDestroy"===e&&(this._notify(n,t,"stop"),this._notify(this._init,t,"uninstall")),o}_notify(t,e,i,s){s=s||{};for(const n of t){const t=n.plugin;if(!1===tt(t[i],[e,s,n.options],t)&&s.cancelable)return!1}return!0}invalidate(){U(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){const i=t&&t.config,s=Z(i.options&&i.options.plugins,{}),n=function(t){const e=[],i=Object.keys(Hs.plugins.items);for(let t=0;t<i.length;t++)e.push(Hs.getPlugin(i[t]));const s=t.plugins||[];for(let t=0;t<s.length;t++){const i=s[t];-1===e.indexOf(i)&&e.push(i)}return e}(i);return!1!==s||e?function(t,e,i,s){const n=[],o=t.getContext();for(let a=0;a<e.length;a++){const r=e[a],l=$s(i[r.id],s);null!==l&&n.push({plugin:r,options:Ys(t.config,r,l,o)})}return n}(t,n,s,e):[]}_notifyStateChanges(t){const e=this._oldCache||[],i=this._cache,s=(t,e)=>t.filter((t=>!e.some((e=>t.plugin.id===e.plugin.id))));this._notify(s(e,i),t,"stop"),this._notify(s(i,e),t,"start")}}function $s(t,e){return e||!1!==t?!0===t?{}:t:null}function Ys(t,e,i,s){const n=t.pluginScopeKeys(e),o=t.getOptionScopes(i,n);return t.createResolver(o,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Us(t,e){const i=yt.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||i.indexAxis||"x"}function Xs(t,e){return"x"===t||"y"===t?t:e.axis||("top"===(i=e.position)||"bottom"===i?"x":"left"===i||"right"===i?"y":void 0)||t.charAt(0).toLowerCase();var i}function qs(t){const e=t.options||(t.options={});e.plugins=Z(e.plugins,{}),e.scales=function(t,e){const i=mt[t.type]||{scales:{}},s=e.scales||{},n=Us(t.type,e),o=Object.create(null),a=Object.create(null);return Object.keys(s).forEach((t=>{const e=s[t];if(!q(e))return console.error(`Invalid scale configuration for scale:${t}`);if(e._proxy)return console.warn(`Ignoring resolver passed as options for scale:${t}`);const r=Xs(t,e),l=function(t,e){return t===e?"_index_":"_value_"}(r,n),h=i.scales||{};o[r]=o[r]||t,a[t]=rt(Object.create(null),[{axis:r},e,h[r],h[l]])})),t.data.datasets.forEach((i=>{const n=i.type||t.type,r=i.indexAxis||Us(n,e),l=(mt[n]||{}).scales||{};Object.keys(l).forEach((t=>{const e=function(t,e){let i=t;return"_index_"===t?i=e:"_value_"===t&&(i="x"===e?"y":"x"),i}(t,r),n=i[e+"AxisID"]||o[e]||e;a[n]=a[n]||Object.create(null),rt(a[n],[{axis:e},s[n],l[t]])}))})),Object.keys(a).forEach((t=>{const e=a[t];rt(e,[yt.scales[e.type],yt.scale])})),a}(t,e)}function Ks(t){return(t=t||{}).datasets=t.datasets||[],t.labels=t.labels||[],t}const Gs=new Map,Zs=new Set;function Js(t,e){let i=Gs.get(t);return i||(i=e(),Gs.set(t,i),Zs.add(i)),i}const Qs=(t,e,i)=>{const s=ct(e,i);void 0!==s&&t.add(s)};class tn{constructor(t){this._config=function(t){return(t=t||{}).data=Ks(t.data),qs(t),t}(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=Ks(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),qs(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return Js(t,(()=>[[`datasets.${t}`,""]]))}datasetAnimationScopeKeys(t,e){return Js(`${t}.transition.${e}`,(()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]]))}datasetElementScopeKeys(t,e){return Js(`${t}-${e}`,(()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]]))}pluginScopeKeys(t){const e=t.id;return Js(`${this.type}-plugin-${e}`,(()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]]))}_cachedScopes(t,e){const i=this._scopeCache;let s=i.get(t);return s&&!e||(s=new Map,i.set(t,s)),s}getOptionScopes(t,e,i){const{options:s,type:n}=this,o=this._cachedScopes(t,i),a=o.get(e);if(a)return a;const r=new Set;e.forEach((e=>{t&&(r.add(t),e.forEach((e=>Qs(r,t,e)))),e.forEach((t=>Qs(r,s,t))),e.forEach((t=>Qs(r,mt[n]||{},t))),e.forEach((t=>Qs(r,yt,t))),e.forEach((t=>Qs(r,bt,t)))}));const l=Array.from(r);return 0===l.length&&l.push(Object.create(null)),Zs.has(e)&&o.set(e,l),l}chartOptionScopes(){const{options:t,type:e}=this;return[t,mt[e]||{},yt.datasets[e]||{},{type:e},yt,bt]}resolveNamedOptions(t,e,i,s=[""]){const n={$shared:!0},{resolver:o,subPrefixes:a}=en(this._resolverCache,t,s);let r=o;if(function(t,e){const{isScriptable:i,isIndexable:s}=Te(t);for(const n of e){const e=i(n),o=s(n),a=(o||e)&&t[n];if(e&&(ft(a)||sn(a))||o&&X(a))return!0}return!1}(o,e)){n.$shared=!1;r=Ae(o,i=ft(i)?i():i,this.createResolver(t,i,a))}for(const t of e)n[t]=r[t];return n}createResolver(t,e,i=[""],s){const{resolver:n}=en(this._resolverCache,t,i);return q(e)?Ae(n,e,void 0,s):n}}function en(t,e,i){let s=t.get(e);s||(s=new Map,t.set(e,s));const n=i.join();let o=s.get(n);if(!o){o={resolver:Oe(e,i),subPrefixes:i.filter((t=>!t.toLowerCase().includes("hover")))},s.set(n,o)}return o}const sn=t=>q(t)&&Object.getOwnPropertyNames(t).reduce(((e,i)=>e||ft(t[i])),!1);const nn=["top","bottom","left","right","chartArea"];function on(t,e){return"top"===t||"bottom"===t||-1===nn.indexOf(t)&&"x"===e}function an(t,e){return function(i,s){return i[t]===s[t]?i[e]-s[e]:i[t]-s[t]}}function rn(t){const e=t.chart,i=e.options.animation;e.notifyPlugins("afterRender"),tt(i&&i.onComplete,[t],e)}function ln(t){const e=t.chart,i=e.options.animation;tt(i&&i.onProgress,[t],e)}function hn(t){return ie()&&"string"==typeof t?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const cn={},dn=t=>{const e=hn(t);return Object.values(cn).filter((t=>t.canvas===e)).pop()};function un(t,e,i){const s=Object.keys(t);for(const n of s){const s=+n;if(s>=e){const o=t[n];delete t[n],(i>0||s>e)&&(t[s+i]=o)}}}class fn{constructor(t,e){const s=this.config=new tn(e),n=hn(t),o=dn(n);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas can be reused.");const r=s.createResolver(s.chartOptionScopes(),this.getContext());this.platform=new(s.platform||cs(n)),this.platform.updateConfig(s);const l=this.platform.acquireContext(n,r.aspectRatio),h=l&&l.canvas,c=h&&h.height,d=h&&h.width;this.id=Y(),this.ctx=l,this.canvas=h,this.width=d,this.height=c,this._options=r,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new js,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=i((t=>this.update(t)),r.resizeDelay||0),this._dataChanges=[],cn[this.id]=this,l&&h?(a.listen(this,"complete",rn),a.listen(this,"progress",ln),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:e},width:i,height:s,_aspectRatio:n}=this;return U(t)?e&&n?n:s?i/s:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():ue(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return _e(this.canvas,this.ctx),this}stop(){return a.stop(this),this}resize(t,e){a.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){const i=this.options,s=this.canvas,n=i.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(s,t,e,n),a=i.devicePixelRatio||this.platform.getDevicePixelRatio(),r=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,ue(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),tt(i.onResize,[this,o],this),this.attached&&this._doResize(r)&&this.render())}ensureScalesHaveIDs(){et(this.options.scales||{},((t,e)=>{t.id=e}))}buildOrUpdateScales(){const t=this.options,e=t.scales,i=this.scales,s=Object.keys(i).reduce(((t,e)=>(t[e]=!1,t)),{});let n=[];e&&(n=n.concat(Object.keys(e).map((t=>{const i=e[t],s=Xs(t,i),n="r"===s,o="x"===s;return{options:i,dposition:n?"chartArea":o?"bottom":"left",dtype:n?"radialLinear":o?"category":"linear"}})))),et(n,(e=>{const n=e.options,o=n.id,a=Xs(o,n),r=Z(n.type,e.dtype);void 0!==n.position&&on(n.position,a)===on(e.dposition)||(n.position=e.dposition),s[o]=!0;let l=null;if(o in i&&i[o].type===r)l=i[o];else{l=new(Hs.getScale(r))({id:o,type:r,ctx:this.ctx,chart:this}),i[l.id]=l}l.init(n,t)})),et(s,((t,e)=>{t||delete i[e]})),et(i,(t=>{Xi.configure(this,t,t.options),Xi.addBox(this,t)}))}_updateMetasets(){const t=this._metasets,e=this.data.datasets.length,i=t.length;if(t.sort(((t,e)=>t.index-e.index)),i>e){for(let t=e;t<i;++t)this._destroyDatasetMeta(t);t.splice(e,i-e)}this._sortedMetasets=t.slice(0).sort(an("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach(((t,i)=>{0===e.filter((e=>e===t._dataset)).length&&this._destroyDatasetMeta(i)}))}buildOrUpdateControllers(){const t=[],e=this.data.datasets;let i,s;for(this._removeUnreferencedMetasets(),i=0,s=e.length;i<s;i++){const s=e[i];let n=this.getDatasetMeta(i);const o=s.type||this.config.type;if(n.type&&n.type!==o&&(this._destroyDatasetMeta(i),n=this.getDatasetMeta(i)),n.type=o,n.indexAxis=s.indexAxis||Us(o,this.options),n.order=s.order||0,n.index=i,n.label=""+s.label,n.visible=this.isDatasetVisible(i),n.controller)n.controller.updateIndex(i),n.controller.linkScales();else{const e=Hs.getController(o),{datasetElementType:s,dataElementType:a}=yt.datasets[o];Object.assign(e.prototype,{dataElementType:Hs.getElement(a),datasetElementType:s&&Hs.getElement(s)}),n.controller=new e(this,i),t.push(n.controller)}}return this._updateMetasets(),t}_resetElements(){et(this.data.datasets,((t,e)=>{this.getDatasetMeta(e).controller.reset()}),this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const e=this.config;e.update();const i=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0}))return;const n=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let t=0,e=this.data.datasets.length;t<e;t++){const{controller:e}=this.getDatasetMeta(t),i=!s&&-1===n.indexOf(e);e.buildOrUpdateElements(i),o=Math.max(+e.getMaxOverflow(),o)}o=this._minPadding=i.layout.autoPadding?o:0,this._updateLayout(o),s||et(n,(t=>{t.reset()})),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(an("z","_idx"));const{_active:a,_lastEvent:r}=this;r?this._eventHandler(r,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){et(this.scales,(t=>{Xi.removeBox(this,t)})),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,e=new Set(Object.keys(this._listeners)),i=new Set(t.events);gt(e,i)&&!!this._responsiveListeners===t.responsive||(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[];for(const{method:i,start:s,count:n}of e){un(t,s,"_removeElements"===i?-n:n)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const e=this.data.datasets.length,i=e=>new Set(t.filter((t=>t[0]===e)).map(((t,e)=>e+","+t.splice(1).join(",")))),s=i(0);for(let t=1;t<e;t++)if(!gt(s,i(t)))return;return Array.from(s).map((t=>t.split(","))).map((t=>({method:t[1],start:+t[2],count:+t[3]})))}_updateLayout(t){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;Xi.update(this,this.width,this.height,t);const e=this.chartArea,i=e.width<=0||e.height<=0;this._layers=[],et(this.boxes,(t=>{i&&"chartArea"===t.position||(t.configure&&t.configure(),this._layers.push(...t._layers()))}),this),this._layers.forEach(((t,e)=>{t._idx=e})),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})){for(let t=0,e=this.data.datasets.length;t<e;++t)this.getDatasetMeta(t).controller.configure();for(let e=0,i=this.data.datasets.length;e<i;++e)this._updateDataset(e,ft(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){const i=this.getDatasetMeta(t),s={meta:i,index:t,mode:e,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",s)&&(i.controller._update(e),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(a.has(this)?this.attached&&!a.running(this)&&a.start(this):(this.draw(),rn({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:t,height:e}=this._resizeBeforeDraw;this._resize(t,e),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0)return;if(!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const e=this._sortedMetasets,i=[];let s,n;for(s=0,n=e.length;s<n;++s){const n=e[s];t&&!n.visible||i.push(n)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const e=this.ctx,i=t._clip,s=!i.disabled,n=this.chartArea,o={meta:t,index:t.index,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetDraw",o)&&(s&&we(e,{left:!1===i.left?0:n.left-i.left,right:!1===i.right?this.width:n.right+i.right,top:!1===i.top?0:n.top-i.top,bottom:!1===i.bottom?this.height:n.bottom+i.bottom}),t.controller.draw(),s&&Me(e),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}isPointInArea(t){return ve(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,e,i,s){const n=Ei.modes[e];return"function"==typeof n?n(this,t,i,s):[]}getDatasetMeta(t){const e=this.data.datasets[t],i=this._metasets;let s=i.filter((t=>t&&t._dataset===e)).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},i.push(s)),s}getContext(){return this.$context||(this.$context=pi(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const e=this.data.datasets[t];if(!e)return!1;const i=this.getDatasetMeta(t);return"boolean"==typeof i.hidden?!i.hidden:!e.hidden}setDatasetVisibility(t,e){this.getDatasetMeta(t).hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,i){const s=i?"show":"hide",n=this.getDatasetMeta(t),o=n.controller._resolveAnimations(void 0,s);ut(e)?(n.data[e].hidden=!i,this.update()):(this.setDatasetVisibility(t,i),o.update(n,{visible:i}),this.update((e=>e.datasetIndex===t?s:void 0)))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){const e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),a.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),_e(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),this.notifyPlugins("destroy"),delete cn[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,e=this.platform,i=(i,s)=>{e.addEventListener(this,i,s),t[i]=s},s=(t,e,i)=>{t.offsetX=e,t.offsetY=i,this._eventHandler(t)};et(this.options.events,(t=>i(t,s)))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,e=this.platform,i=(i,s)=>{e.addEventListener(this,i,s),t[i]=s},s=(i,s)=>{t[i]&&(e.removeEventListener(this,i,s),delete t[i])},n=(t,e)=>{this.canvas&&this.resize(t,e)};let o;const a=()=>{s("attach",a),this.attached=!0,this.resize(),i("resize",n),i("detach",o)};o=()=>{this.attached=!1,s("resize",n),this._stop(),this._resize(0,0),i("attach",a)},e.isAttached(this.canvas)?a():o()}unbindEvents(){et(this._listeners,((t,e)=>{this.platform.removeEventListener(this,e,t)})),this._listeners={},et(this._responsiveListeners,((t,e)=>{this.platform.removeEventListener(this,e,t)})),this._responsiveListeners=void 0}updateHoverStyle(t,e,i){const s=i?"set":"remove";let n,o,a,r;for("dataset"===e&&(n=this.getDatasetMeta(t[0].datasetIndex),n.controller["_"+s+"DatasetHoverStyle"]()),a=0,r=t.length;a<r;++a){o=t[a];const e=o&&this.getDatasetMeta(o.datasetIndex).controller;e&&e[s+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const e=this._active||[],i=t.map((({datasetIndex:t,index:e})=>{const i=this.getDatasetMeta(t);if(!i)throw new Error("No dataset found at index "+t);return{datasetIndex:t,element:i.data[e],index:e}}));!it(i,e)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,e))}notifyPlugins(t,e,i){return this._plugins.notify(this,t,e,i)}_updateHoverStyles(t,e,i){const s=this.options.hover,n=(t,e)=>t.filter((t=>!e.some((e=>t.datasetIndex===e.datasetIndex&&t.index===e.index)))),o=n(e,t),a=i?t:n(t,e);o.length&&this.updateHoverStyle(o,s.mode,!1),a.length&&s.mode&&this.updateHoverStyle(a,s.mode,!0)}_eventHandler(t,e){const i={event:t,replay:e,cancelable:!0,inChartArea:this.isPointInArea(t)},s=e=>(e.options.events||this.options.events).includes(t.native.type);if(!1===this.notifyPlugins("beforeEvent",i,s))return;const n=this._handleEvent(t,e,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,s),(n||i.changed)&&this.render(),this}_handleEvent(t,e,i){const{_active:s=[],options:n}=this,o=e,a=this._getActiveElements(t,s,i,o),r=pt(t),l=function(t,e,i,s){return i&&"mouseout"!==t.type?s?e:t:null}(t,this._lastEvent,i,r);i&&(this._lastEvent=null,tt(n.onHover,[t,a,this],this),r&&tt(n.onClick,[t,a,this],this));const h=!it(a,s);return(h||e)&&(this._active=a,this._updateHoverStyles(a,s,e)),this._lastEvent=l,h}_getActiveElements(t,e,i,s){if("mouseout"===t.type)return[];if(!i)return e;const n=this.options.hover;return this.getElementsAtEventForMode(t,n.mode,n,s)}}const gn=()=>et(fn.instances,(t=>t._plugins.invalidate())),pn=!0;function mn(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}Object.defineProperties(fn,{defaults:{enumerable:pn,value:yt},instances:{enumerable:pn,value:cn},overrides:{enumerable:pn,value:mt},registry:{enumerable:pn,value:Hs},version:{enumerable:pn,value:"3.8.0"},getChart:{enumerable:pn,value:dn},register:{enumerable:pn,value:(...t)=>{Hs.add(...t),gn()}},unregister:{enumerable:pn,value:(...t)=>{Hs.remove(...t),gn()}}});class bn{constructor(t){this.options=t||{}}formats(){return mn()}parse(t,e){return mn()}format(t,e){return mn()}add(t,e,i){return mn()}diff(t,e,i){return mn()}startOf(t,e,i){return mn()}endOf(t,e){return mn()}}bn.override=function(t){Object.assign(bn.prototype,t)};var xn={_date:bn};function _n(t){const e=t.iScale,i=function(t,e){if(!t._cache.$bar){const i=t.getMatchingVisibleMetas(e);let s=[];for(let e=0,n=i.length;e<n;e++)s=s.concat(i[e].controller.getAllParsedValues(t));t._cache.$bar=Ct(s.sort(((t,e)=>t-e)))}return t._cache.$bar}(e,t.type);let s,n,o,a,r=e._length;const l=()=>{32767!==o&&-32768!==o&&(ut(a)&&(r=Math.min(r,Math.abs(o-a)||r)),a=o)};for(s=0,n=i.length;s<n;++s)o=e.getPixelForValue(i[s]),l();for(a=void 0,s=0,n=e.ticks.length;s<n;++s)o=e.getPixelForTick(s),l();return r}function yn(t,e,i,s){return X(t)?function(t,e,i,s){const n=i.parse(t[0],s),o=i.parse(t[1],s),a=Math.min(n,o),r=Math.max(n,o);let l=a,h=r;Math.abs(a)>Math.abs(r)&&(l=r,h=a),e[i.axis]=h,e._custom={barStart:l,barEnd:h,start:n,end:o,min:a,max:r}}(t,e,i,s):e[i.axis]=i.parse(t,s),e}function vn(t,e,i,s){const n=t.iScale,o=t.vScale,a=n.getLabels(),r=n===o,l=[];let h,c,d,u;for(h=i,c=i+s;h<c;++h)u=e[h],d={},d[n.axis]=r||n.parse(a[h],h),l.push(yn(u,d,o,h));return l}function wn(t){return t&&void 0!==t.barStart&&void 0!==t.barEnd}function Mn(t,e,i,s){let n=e.borderSkipped;const o={};if(!n)return void(t.borderSkipped=o);const{start:a,end:r,reverse:l,top:h,bottom:c}=function(t){let e,i,s,n,o;return t.horizontal?(e=t.base>t.x,i="left",s="right"):(e=t.base<t.y,i="bottom",s="top"),e?(n="end",o="start"):(n="start",o="end"),{start:i,end:s,reverse:e,top:n,bottom:o}}(t);"middle"===n&&i&&(t.enableBorderRadius=!0,(i._top||0)===s?n=h:(i._bottom||0)===s?n=c:(o[kn(c,a,r,l)]=!0,n=h)),o[kn(n,a,r,l)]=!0,t.borderSkipped=o}function kn(t,e,i,s){var n,o,a;return s?(a=i,t=Sn(t=(n=t)===(o=e)?a:n===a?o:n,i,e)):t=Sn(t,e,i),t}function Sn(t,e,i){return"start"===t?e:"end"===t?i:t}function Pn(t,{inflateAmount:e},i){t.inflateAmount="auto"===e?1===i?.33:0:e}class Dn extends Cs{parsePrimitiveData(t,e,i,s){return vn(t,e,i,s)}parseArrayData(t,e,i,s){return vn(t,e,i,s)}parseObjectData(t,e,i,s){const{iScale:n,vScale:o}=t,{xAxisKey:a="x",yAxisKey:r="y"}=this._parsing,l="x"===n.axis?a:r,h="x"===o.axis?a:r,c=[];let d,u,f,g;for(d=i,u=i+s;d<u;++d)g=e[d],f={},f[n.axis]=n.parse(ct(g,l),d),c.push(yn(ct(g,h),f,o,d));return c}updateRangeFromParsed(t,e,i,s){super.updateRangeFromParsed(t,e,i,s);const n=i._custom;n&&e===this._cachedMeta.vScale&&(t.min=Math.min(t.min,n.min),t.max=Math.max(t.max,n.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const e=this._cachedMeta,{iScale:i,vScale:s}=e,n=this.getParsed(t),o=n._custom,a=wn(o)?"["+o.start+", "+o.end+"]":""+s.getLabelForValue(n[s.axis]);return{label:""+i.getLabelForValue(n[i.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();this._cachedMeta.stack=this.getDataset().stack}update(t){const e=this._cachedMeta;this.updateElements(e.data,0,e.data.length,t)}updateElements(t,e,i,s){const n="reset"===s,{index:o,_cachedMeta:{vScale:a}}=this,r=a.getBasePixel(),l=a.isHorizontal(),h=this._getRuler(),c=this.resolveDataElementOptions(e,s),d=this.getSharedOptions(c),u=this.includeOptions(s,d);this.updateSharedOptions(d,s,c);for(let c=e;c<e+i;c++){const e=this.getParsed(c),i=n||U(e[a.axis])?{base:r,head:r}:this._calculateBarValuePixels(c),f=this._calculateBarIndexPixels(c,h),g=(e._stacks||{})[a.axis],p={horizontal:l,base:i.base,enableBorderRadius:!g||wn(e._custom)||o===g._top||o===g._bottom,x:l?i.head:f.center,y:l?f.center:i.head,height:l?f.size:Math.abs(i.size),width:l?Math.abs(i.size):f.size};u&&(p.options=d||this.resolveDataElementOptions(c,t[c].active?"active":s));const m=p.options||t[c].options;Mn(p,m,g,o),Pn(p,m,h.ratio),this.updateElement(t[c],c,p,s)}}_getStacks(t,e){const i=this._cachedMeta.iScale,s=i.getMatchingVisibleMetas(this._type),n=i.options.stacked,o=s.length,a=[];let r,l;for(r=0;r<o;++r)if(l=s[r],l.controller.options.grouped){if(void 0!==e){const t=l.controller.getParsed(e)[l.controller._cachedMeta.vScale.axis];if(U(t)||isNaN(t))continue}if((!1===n||-1===a.indexOf(l.stack)||void 0===n&&void 0===l.stack)&&a.push(l.stack),l.index===t)break}return a.length||a.push(void 0),a}_getStackCount(t){return this._getStacks(void 0,t).length}_getStackIndex(t,e,i){const s=this._getStacks(t,i),n=void 0!==e?s.indexOf(e):-1;return-1===n?s.length-1:n}_getRuler(){const t=this.options,e=this._cachedMeta,i=e.iScale,s=[];let n,o;for(n=0,o=e.data.length;n<o;++n)s.push(i.getPixelForValue(this.getParsed(n)[i.axis],n));const a=t.barThickness;return{min:a||_n(e),pixels:s,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:t.grouped,ratio:a?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:e,_stacked:i},options:{base:s,minBarLength:n}}=this,o=s||0,a=this.getParsed(t),r=a._custom,l=wn(r);let h,c,d=a[e.axis],u=0,f=i?this.applyStack(e,a,i):d;f!==d&&(u=f-d,f=d),l&&(d=r.barStart,f=r.barEnd-r.barStart,0!==d&&Bt(d)!==Bt(r.barEnd)&&(u=0),u+=d);const g=U(s)||l?u:s;let p=e.getPixelForValue(g);if(h=this.chart.getDataVisibility(t)?e.getPixelForValue(u+f):p,c=h-p,Math.abs(c)<n){c=function(t,e,i){return 0!==t?Bt(t):(e.isHorizontal()?1:-1)*(e.min>=i?1:-1)}(c,e,o)*n,d===o&&(p-=c/2);const t=e.getPixelForDecimal(0),i=e.getPixelForDecimal(1),s=Math.min(t,i),a=Math.max(t,i);p=Math.max(Math.min(p,a),s),h=p+c}if(p===e.getPixelForValue(o)){const t=Bt(c)*e.getLineWidthForValue(o)/2;p+=t,c-=t}return{size:c,base:p,head:h,center:h+c/2}}_calculateBarIndexPixels(t,e){const i=e.scale,s=this.options,n=s.skipNull,o=Z(s.maxBarThickness,1/0);let a,r;if(e.grouped){const i=n?this._getStackCount(t):e.stackCount,l="flex"===s.barThickness?function(t,e,i,s){const n=e.pixels,o=n[t];let a=t>0?n[t-1]:null,r=t<n.length-1?n[t+1]:null;const l=i.categoryPercentage;null===a&&(a=o-(null===r?e.end-e.start:r-o)),null===r&&(r=o+o-a);const h=o-(o-Math.min(a,r))/2*l;return{chunk:Math.abs(r-a)/2*l/s,ratio:i.barPercentage,start:h}}(t,e,s,i):function(t,e,i,s){const n=i.barThickness;let o,a;return U(n)?(o=e.min*i.categoryPercentage,a=i.barPercentage):(o=n*s,a=1),{chunk:o/s,ratio:a,start:e.pixels[t]-o/2}}(t,e,s,i),h=this._getStackIndex(this.index,this._cachedMeta.stack,n?t:void 0);a=l.start+l.chunk*h+l.chunk/2,r=Math.min(o,l.chunk*l.ratio)}else a=i.getPixelForValue(this.getParsed(t)[i.axis],t),r=Math.min(o,e.min*e.ratio);return{base:a-r/2,head:a+r/2,center:a,size:r}}draw(){const t=this._cachedMeta,e=t.vScale,i=t.data,s=i.length;let n=0;for(;n<s;++n)null!==this.getParsed(n)[e.axis]&&i[n].draw(this._ctx)}}Dn.id="bar",Dn.defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}},Dn.overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};class Cn extends Cs{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,e,i,s){const n=super.parsePrimitiveData(t,e,i,s);for(let t=0;t<n.length;t++)n[t]._custom=this.resolveDataElementOptions(t+i).radius;return n}parseArrayData(t,e,i,s){const n=super.parseArrayData(t,e,i,s);for(let t=0;t<n.length;t++){const s=e[i+t];n[t]._custom=Z(s[2],this.resolveDataElementOptions(t+i).radius)}return n}parseObjectData(t,e,i,s){const n=super.parseObjectData(t,e,i,s);for(let t=0;t<n.length;t++){const s=e[i+t];n[t]._custom=Z(s&&s.r&&+s.r,this.resolveDataElementOptions(t+i).radius)}return n}getMaxOverflow(){const t=this._cachedMeta.data;let e=0;for(let i=t.length-1;i>=0;--i)e=Math.max(e,t[i].size(this.resolveDataElementOptions(i))/2);return e>0&&e}getLabelAndValue(t){const e=this._cachedMeta,{xScale:i,yScale:s}=e,n=this.getParsed(t),o=i.getLabelForValue(n.x),a=s.getLabelForValue(n.y),r=n._custom;return{label:e.label,value:"("+o+", "+a+(r?", "+r:"")+")"}}update(t){const e=this._cachedMeta.data;this.updateElements(e,0,e.length,t)}updateElements(t,e,i,s){const n="reset"===s,{iScale:o,vScale:a}=this._cachedMeta,r=this.resolveDataElementOptions(e,s),l=this.getSharedOptions(r),h=this.includeOptions(s,l),c=o.axis,d=a.axis;for(let r=e;r<e+i;r++){const e=t[r],i=!n&&this.getParsed(r),l={},u=l[c]=n?o.getPixelForDecimal(.5):o.getPixelForValue(i[c]),f=l[d]=n?a.getBasePixel():a.getPixelForValue(i[d]);l.skip=isNaN(u)||isNaN(f),h&&(l.options=this.resolveDataElementOptions(r,e.active?"active":s),n&&(l.options.radius=0)),this.updateElement(e,r,l,s)}this.updateSharedOptions(l,s,r)}resolveDataElementOptions(t,e){const i=this.getParsed(t);let s=super.resolveDataElementOptions(t,e);s.$shared&&(s=Object.assign({},s,{$shared:!1}));const n=s.radius;return"active"!==e&&(s.radius=0),s.radius+=Z(i&&i._custom,n),s}}Cn.id="bubble",Cn.defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}},Cn.overrides={scales:{x:{type:"linear"},y:{type:"linear"}},plugins:{tooltip:{callbacks:{title:()=>""}}}};class On extends Cs{constructor(t,e){super(t,e),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,e){const i=this.getDataset().data,s=this._cachedMeta;if(!1===this._parsing)s._parsed=i;else{let n,o,a=t=>+i[t];if(q(i[t])){const{key:t="value"}=this._parsing;a=e=>+ct(i[e],t)}for(n=t,o=t+e;n<o;++n)s._parsed[n]=a(n)}}_getRotation(){return Yt(this.options.rotation-90)}_getCircumference(){return Yt(this.options.circumference)}_getRotationExtents(){let t=At,e=-At;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)){const s=this.chart.getDatasetMeta(i).controller,n=s._getRotation(),o=s._getCircumference();t=Math.min(t,n),e=Math.max(e,n+o)}return{rotation:t,circumference:e-t}}update(t){const e=this.chart,{chartArea:i}=e,s=this._cachedMeta,n=s.data,o=this.getMaxBorderWidth()+this.getMaxOffset(n)+this.options.spacing,a=Math.max((Math.min(i.width,i.height)-o)/2,0),r=Math.min(J(this.options.cutout,a),1),l=this._getRingWeight(this.index),{circumference:h,rotation:c}=this._getRotationExtents(),{ratioX:d,ratioY:u,offsetX:f,offsetY:g}=function(t,e,i){let s=1,n=1,o=0,a=0;if(e<At){const r=t,l=r+e,h=Math.cos(r),c=Math.sin(r),d=Math.cos(l),u=Math.sin(l),f=(t,e,s)=>Jt(t,r,l,!0)?1:Math.max(e,e*i,s,s*i),g=(t,e,s)=>Jt(t,r,l,!0)?-1:Math.min(e,e*i,s,s*i),p=f(0,h,d),m=f(Et,c,u),b=g(Ot,h,d),x=g(Ot+Et,c,u);s=(p-b)/2,n=(m-x)/2,o=-(p+b)/2,a=-(m+x)/2}return{ratioX:s,ratioY:n,offsetX:o,offsetY:a}}(c,h,r),p=(i.width-o)/d,m=(i.height-o)/u,b=Math.max(Math.min(p,m)/2,0),x=Q(this.options.radius,b),_=(x-Math.max(x*r,0))/this._getVisibleDatasetWeightTotal();this.offsetX=f*x,this.offsetY=g*x,s.total=this.calculateTotal(),this.outerRadius=x-_*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-_*l,0),this.updateElements(n,0,n.length,t)}_circumference(t,e){const i=this.options,s=this._cachedMeta,n=this._getCircumference();return e&&i.animation.animateRotate||!this.chart.getDataVisibility(t)||null===s._parsed[t]||s.data[t].hidden?0:this.calculateCircumference(s._parsed[t]*n/At)}updateElements(t,e,i,s){const n="reset"===s,o=this.chart,a=o.chartArea,r=o.options.animation,l=(a.left+a.right)/2,h=(a.top+a.bottom)/2,c=n&&r.animateScale,d=c?0:this.innerRadius,u=c?0:this.outerRadius,f=this.resolveDataElementOptions(e,s),g=this.getSharedOptions(f),p=this.includeOptions(s,g);let m,b=this._getRotation();for(m=0;m<e;++m)b+=this._circumference(m,n);for(m=e;m<e+i;++m){const e=this._circumference(m,n),i=t[m],o={x:l+this.offsetX,y:h+this.offsetY,startAngle:b,endAngle:b+e,circumference:e,outerRadius:u,innerRadius:d};p&&(o.options=g||this.resolveDataElementOptions(m,i.active?"active":s)),b+=e,this.updateElement(i,m,o,s)}this.updateSharedOptions(g,s,f)}calculateTotal(){const t=this._cachedMeta,e=t.data;let i,s=0;for(i=0;i<e.length;i++){const n=t._parsed[i];null===n||isNaN(n)||!this.chart.getDataVisibility(i)||e[i].hidden||(s+=Math.abs(n))}return s}calculateCircumference(t){const e=this._cachedMeta.total;return e>0&&!isNaN(t)?At*(Math.abs(t)/e):0}getLabelAndValue(t){const e=this._cachedMeta,i=this.chart,s=i.data.labels||[],n=ni(e._parsed[t],i.options.locale);return{label:s[t]||"",value:n}}getMaxBorderWidth(t){let e=0;const i=this.chart;let s,n,o,a,r;if(!t)for(s=0,n=i.data.datasets.length;s<n;++s)if(i.isDatasetVisible(s)){o=i.getDatasetMeta(s),t=o.data,a=o.controller;break}if(!t)return 0;for(s=0,n=t.length;s<n;++s)r=a.resolveDataElementOptions(s),"inner"!==r.borderAlign&&(e=Math.max(e,r.borderWidth||0,r.hoverBorderWidth||0));return e}getMaxOffset(t){let e=0;for(let i=0,s=t.length;i<s;++i){const t=this.resolveDataElementOptions(i);e=Math.max(e,t.offset||0,t.hoverOffset||0)}return e}_getRingWeightOffset(t){let e=0;for(let i=0;i<t;++i)this.chart.isDatasetVisible(i)&&(e+=this._getRingWeight(i));return e}_getRingWeight(t){return Math.max(Z(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}On.id="doughnut",On.defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"},On.descriptors={_scriptable:t=>"spacing"!==t,_indexable:t=>"spacing"!==t},On.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:i}}=t.legend.options;return e.labels.map(((e,s)=>{const n=t.getDatasetMeta(0).controller.getStyle(s);return{text:e,fillStyle:n.backgroundColor,strokeStyle:n.borderColor,lineWidth:n.borderWidth,pointStyle:i,hidden:!t.getDataVisibility(s),index:s}}))}return[]}},onClick(t,e,i){i.chart.toggleDataVisibility(e.index),i.chart.update()}},tooltip:{callbacks:{title:()=>"",label(t){let e=t.label;const i=": "+t.formattedValue;return X(e)?(e=e.slice(),e[0]+=i):e+=i,e}}}}};class An extends Cs{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const e=this._cachedMeta,{dataset:i,data:s=[],_dataset:n}=e,o=this.chart._animationsDisabled;let{start:a,count:r}=function(t,e,i){const s=e.length;let n=0,o=s;if(t._sorted){const{iScale:a,_parsed:r}=t,l=a.axis,{min:h,max:c,minDefined:d,maxDefined:u}=a.getUserBounds();d&&(n=Qt(Math.min(wt(r,a.axis,h).lo,i?s:wt(e,l,a.getPixelForValue(h)).lo),0,s-1)),o=u?Qt(Math.max(wt(r,a.axis,c).hi+1,i?0:wt(e,l,a.getPixelForValue(c)).hi+1),n,s)-n:s-n}return{start:n,count:o}}(e,s,o);this._drawStart=a,this._drawCount=r,function(t){const{xScale:e,yScale:i,_scaleRanges:s}=t,n={xmin:e.min,xmax:e.max,ymin:i.min,ymax:i.max};if(!s)return t._scaleRanges=n,!0;const o=s.xmin!==e.min||s.xmax!==e.max||s.ymin!==i.min||s.ymax!==i.max;return Object.assign(s,n),o}(e)&&(a=0,r=s.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!n._decimated,i.points=s;const l=this.resolveDatasetElementOptions(t);this.options.showLine||(l.borderWidth=0),l.segment=this.options.segment,this.updateElement(i,void 0,{animated:!o,options:l},t),this.updateElements(s,a,r,t)}updateElements(t,e,i,s){const n="reset"===s,{iScale:o,vScale:a,_stacked:r,_dataset:l}=this._cachedMeta,h=this.resolveDataElementOptions(e,s),c=this.getSharedOptions(h),d=this.includeOptions(s,c),u=o.axis,f=a.axis,{spanGaps:g,segment:p}=this.options,m=Wt(g)?g:Number.POSITIVE_INFINITY,b=this.chart._animationsDisabled||n||"none"===s;let x=e>0&&this.getParsed(e-1);for(let h=e;h<e+i;++h){const e=t[h],i=this.getParsed(h),g=b?e:{},_=U(i[f]),y=g[u]=o.getPixelForValue(i[u],h),v=g[f]=n||_?a.getBasePixel():a.getPixelForValue(r?this.applyStack(a,i,r):i[f],h);g.skip=isNaN(y)||isNaN(v)||_,g.stop=h>0&&Math.abs(i[u]-x[u])>m,p&&(g.parsed=i,g.raw=l.data[h]),d&&(g.options=c||this.resolveDataElementOptions(h,e.active?"active":s)),b||this.updateElement(e,h,g,s),x=i}this.updateSharedOptions(c,s,h)}getMaxOverflow(){const t=this._cachedMeta,e=t.dataset,i=e.options&&e.options.borderWidth||0,s=t.data||[];if(!s.length)return i;const n=s[0].size(this.resolveDataElementOptions(0)),o=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(i,n,o)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}An.id="line",An.defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1},An.overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};class Tn extends Cs{constructor(t,e){super(t,e),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){const e=this._cachedMeta,i=this.chart,s=i.data.labels||[],n=ni(e._parsed[t].r,i.options.locale);return{label:s[t]||"",value:n}}parseObjectData(t,e,i,s){return He.bind(this)(t,e,i,s)}update(t){const e=this._cachedMeta.data;this._updateRadius(),this.updateElements(e,0,e.length,t)}getMinMax(){const t=this._cachedMeta,e={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return t.data.forEach(((t,i)=>{const s=this.getParsed(i).r;!isNaN(s)&&this.chart.getDataVisibility(i)&&(s<e.min&&(e.min=s),s>e.max&&(e.max=s))})),e}_updateRadius(){const t=this.chart,e=t.chartArea,i=t.options,s=Math.min(e.right-e.left,e.bottom-e.top),n=Math.max(s/2,0),o=(n-Math.max(i.cutoutPercentage?n/100*i.cutoutPercentage:1,0))/t.getVisibleDatasetCount();this.outerRadius=n-o*this.index,this.innerRadius=this.outerRadius-o}updateElements(t,e,i,s){const n="reset"===s,o=this.chart,a=o.options.animation,r=this._cachedMeta.rScale,l=r.xCenter,h=r.yCenter,c=r.getIndexAngle(0)-.5*Ot;let d,u=c;const f=360/this.countVisibleElements();for(d=0;d<e;++d)u+=this._computeAngle(d,s,f);for(d=e;d<e+i;d++){const e=t[d];let i=u,g=u+this._computeAngle(d,s,f),p=o.getDataVisibility(d)?r.getDistanceFromCenterForValue(this.getParsed(d).r):0;u=g,n&&(a.animateScale&&(p=0),a.animateRotate&&(i=g=c));const m={x:l,y:h,innerRadius:0,outerRadius:p,startAngle:i,endAngle:g,options:this.resolveDataElementOptions(d,e.active?"active":s)};this.updateElement(e,d,m,s)}}countVisibleElements(){const t=this._cachedMeta;let e=0;return t.data.forEach(((t,i)=>{!isNaN(this.getParsed(i).r)&&this.chart.getDataVisibility(i)&&e++})),e}_computeAngle(t,e,i){return this.chart.getDataVisibility(t)?Yt(this.resolveDataElementOptions(t,e).angle||i):0}}Tn.id="polarArea",Tn.defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0},Tn.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:i}}=t.legend.options;return e.labels.map(((e,s)=>{const n=t.getDatasetMeta(0).controller.getStyle(s);return{text:e,fillStyle:n.backgroundColor,strokeStyle:n.borderColor,lineWidth:n.borderWidth,pointStyle:i,hidden:!t.getDataVisibility(s),index:s}}))}return[]}},onClick(t,e,i){i.chart.toggleDataVisibility(e.index),i.chart.update()}},tooltip:{callbacks:{title:()=>"",label:t=>t.chart.data.labels[t.dataIndex]+": "+t.formattedValue}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};class Ln extends On{}Ln.id="pie",Ln.defaults={cutout:0,rotation:0,circumference:360,radius:"100%"};class Rn extends Cs{getLabelAndValue(t){const e=this._cachedMeta.vScale,i=this.getParsed(t);return{label:e.getLabels()[t],value:""+e.getLabelForValue(i[e.axis])}}parseObjectData(t,e,i,s){return He.bind(this)(t,e,i,s)}update(t){const e=this._cachedMeta,i=e.dataset,s=e.data||[],n=e.iScale.getLabels();if(i.points=s,"resize"!==t){const e=this.resolveDatasetElementOptions(t);this.options.showLine||(e.borderWidth=0);const o={_loop:!0,_fullLoop:n.length===s.length,options:e};this.updateElement(i,void 0,o,t)}this.updateElements(s,0,s.length,t)}updateElements(t,e,i,s){const n=this._cachedMeta.rScale,o="reset"===s;for(let a=e;a<e+i;a++){const e=t[a],i=this.resolveDataElementOptions(a,e.active?"active":s),r=n.getPointPositionForValue(a,this.getParsed(a).r),l=o?n.xCenter:r.x,h=o?n.yCenter:r.y,c={x:l,y:h,angle:r.angle,skip:isNaN(l)||isNaN(h),options:i};this.updateElement(e,a,c,s)}}}Rn.id="radar",Rn.defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}},Rn.overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};class En extends An{}En.id="scatter",En.defaults={showLine:!1,fill:!1},En.overrides={interaction:{mode:"point"},plugins:{tooltip:{callbacks:{title:()=>"",label:t=>"("+t.label+", "+t.formattedValue+")"}}},scales:{x:{type:"linear"},y:{type:"linear"}}};var In=Object.freeze({__proto__:null,BarController:Dn,BubbleController:Cn,DoughnutController:On,LineController:An,PolarAreaController:Tn,PieController:Ln,RadarController:Rn,ScatterController:En});function zn(t,e,i){const{startAngle:s,pixelMargin:n,x:o,y:a,outerRadius:r,innerRadius:l}=e;let h=n/r;t.beginPath(),t.arc(o,a,r,s-h,i+h),l>n?(h=n/l,t.arc(o,a,l,i+h,s-h,!0)):t.arc(o,a,n,i+Et,s-Et),t.closePath(),t.clip()}function Fn(t,e,i,s){const n=li(t.options.borderRadius,["outerStart","outerEnd","innerStart","innerEnd"]);const o=(i-e)/2,a=Math.min(o,s*e/2),r=t=>{const e=(i-Math.min(o,t))*s/2;return Qt(t,0,Math.min(o,e))};return{outerStart:r(n.outerStart),outerEnd:r(n.outerEnd),innerStart:Qt(n.innerStart,0,a),innerEnd:Qt(n.innerEnd,0,a)}}function Bn(t,e,i,s){return{x:i+t*Math.cos(e),y:s+t*Math.sin(e)}}function Vn(t,e,i,s,n){const{x:o,y:a,startAngle:r,pixelMargin:l,innerRadius:h}=e,c=Math.max(e.outerRadius+s+i-l,0),d=h>0?h+s+i+l:0;let u=0;const f=n-r;if(s){const t=((h>0?h-s:0)+(c>0?c-s:0))/2;u=(f-(0!==t?f*t/(t+s):f))/2}const g=(f-Math.max(.001,f*c-i/Ot)/c)/2,p=r+g+u,m=n-g-u,{outerStart:b,outerEnd:x,innerStart:_,innerEnd:y}=Fn(e,d,c,m-p),v=c-b,w=c-x,M=p+b/v,k=m-x/w,S=d+_,P=d+y,D=p+_/S,C=m-y/P;if(t.beginPath(),t.arc(o,a,c,M,k),x>0){const e=Bn(w,k,o,a);t.arc(e.x,e.y,x,k,m+Et)}const O=Bn(P,m,o,a);if(t.lineTo(O.x,O.y),y>0){const e=Bn(P,C,o,a);t.arc(e.x,e.y,y,m+Et,C+Math.PI)}if(t.arc(o,a,d,m-y/d,p+_/d,!0),_>0){const e=Bn(S,D,o,a);t.arc(e.x,e.y,_,D+Math.PI,p-Et)}const A=Bn(v,p,o,a);if(t.lineTo(A.x,A.y),b>0){const e=Bn(v,M,o,a);t.arc(e.x,e.y,b,p-Et,M)}t.closePath()}function Nn(t,e,i,s,n){const{options:o}=e,{borderWidth:a,borderJoinStyle:r}=o,l="inner"===o.borderAlign;a&&(l?(t.lineWidth=2*a,t.lineJoin=r||"round"):(t.lineWidth=a,t.lineJoin=r||"bevel"),e.fullCircles&&function(t,e,i){const{x:s,y:n,startAngle:o,pixelMargin:a,fullCircles:r}=e,l=Math.max(e.outerRadius-a,0),h=e.innerRadius+a;let c;for(i&&zn(t,e,o+At),t.beginPath(),t.arc(s,n,h,o+At,o,!0),c=0;c<r;++c)t.stroke();for(t.beginPath(),t.arc(s,n,l,o,o+At),c=0;c<r;++c)t.stroke()}(t,e,l),l&&zn(t,e,n),Vn(t,e,i,s,n),t.stroke())}class Wn extends Os{constructor(t){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,e,i){const s=this.getProps(["x","y"],i),{angle:n,distance:o}=qt(s,{x:t,y:e}),{startAngle:a,endAngle:r,innerRadius:l,outerRadius:h,circumference:c}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),d=this.options.spacing/2,u=Z(c,r-a)>=At||Jt(n,a,r),f=ee(o,l+d,h+d);return u&&f}getCenterPoint(t){const{x:e,y:i,startAngle:s,endAngle:n,innerRadius:o,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius","circumference"],t),{offset:r,spacing:l}=this.options,h=(s+n)/2,c=(o+a+l+r)/2;return{x:e+Math.cos(h)*c,y:i+Math.sin(h)*c}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:e,circumference:i}=this,s=(e.offset||0)/2,n=(e.spacing||0)/2;if(this.pixelMargin="inner"===e.borderAlign?.33:0,this.fullCircles=i>At?Math.floor(i/At):0,0===i||this.innerRadius<0||this.outerRadius<0)return;t.save();let o=0;if(s){o=s/2;const e=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(e)*o,Math.sin(e)*o),this.circumference>=Ot&&(o=s)}t.fillStyle=e.backgroundColor,t.strokeStyle=e.borderColor;const a=function(t,e,i,s){const{fullCircles:n,startAngle:o,circumference:a}=e;let r=e.endAngle;if(n){Vn(t,e,i,s,o+At);for(let e=0;e<n;++e)t.fill();isNaN(a)||(r=o+a%At,a%At==0&&(r+=At))}return Vn(t,e,i,s,r),t.fill(),r}(t,this,o,n);Nn(t,this,o,n,a),t.restore()}}function Hn(t,e,i=e){t.lineCap=Z(i.borderCapStyle,e.borderCapStyle),t.setLineDash(Z(i.borderDash,e.borderDash)),t.lineDashOffset=Z(i.borderDashOffset,e.borderDashOffset),t.lineJoin=Z(i.borderJoinStyle,e.borderJoinStyle),t.lineWidth=Z(i.borderWidth,e.borderWidth),t.strokeStyle=Z(i.borderColor,e.borderColor)}function jn(t,e,i){t.lineTo(i.x,i.y)}function $n(t,e,i={}){const s=t.length,{start:n=0,end:o=s-1}=i,{start:a,end:r}=e,l=Math.max(n,a),h=Math.min(o,r),c=n<a&&o<a||n>r&&o>r;return{count:s,start:l,loop:e.loop,ilen:h<l&&!c?s+h-l:h-l}}function Yn(t,e,i,s){const{points:n,options:o}=e,{count:a,start:r,loop:l,ilen:h}=$n(n,i,s),c=function(t){return t.stepped?ke:t.tension||"monotone"===t.cubicInterpolationMode?Se:jn}(o);let d,u,f,{move:g=!0,reverse:p}=s||{};for(d=0;d<=h;++d)u=n[(r+(p?h-d:d))%a],u.skip||(g?(t.moveTo(u.x,u.y),g=!1):c(t,f,u,p,o.stepped),f=u);return l&&(u=n[(r+(p?h:0))%a],c(t,f,u,p,o.stepped)),!!l}function Un(t,e,i,s){const n=e.points,{count:o,start:a,ilen:r}=$n(n,i,s),{move:l=!0,reverse:h}=s||{};let c,d,u,f,g,p,m=0,b=0;const x=t=>(a+(h?r-t:t))%o,_=()=>{f!==g&&(t.lineTo(m,g),t.lineTo(m,f),t.lineTo(m,p))};for(l&&(d=n[x(0)],t.moveTo(d.x,d.y)),c=0;c<=r;++c){if(d=n[x(c)],d.skip)continue;const e=d.x,i=d.y,s=0|e;s===u?(i<f?f=i:i>g&&(g=i),m=(b*m+e)/++b):(_(),t.lineTo(e,i),u=s,b=0,f=g=i),p=i}_()}function Xn(t){const e=t.options,i=e.borderDash&&e.borderDash.length;return!(t._decimated||t._loop||e.tension||"monotone"===e.cubicInterpolationMode||e.stepped||i)?Un:Yn}Wn.id="arc",Wn.defaults={borderAlign:"center",borderColor:"#fff",borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0},Wn.defaultRoutes={backgroundColor:"backgroundColor"};const qn="function"==typeof Path2D;function Kn(t,e,i,s){qn&&!e.options.segment?function(t,e,i,s){let n=e._path;n||(n=e._path=new Path2D,e.path(n,i,s)&&n.closePath()),Hn(t,e.options),t.stroke(n)}(t,e,i,s):function(t,e,i,s){const{segments:n,options:o}=e,a=Xn(e);for(const r of n)Hn(t,o,r.style),t.beginPath(),a(t,e,r,{start:i,end:i+s-1})&&t.closePath(),t.stroke()}(t,e,i,s)}class Gn extends Os{constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,e){const i=this.options;if((i.tension||"monotone"===i.cubicInterpolationMode)&&!i.stepped&&!this._pointsUpdated){const s=i.spanGaps?this._loop:this._fullLoop;Ke(this._points,i,t,s,e),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=Mi(this,this.options.segment))}first(){const t=this.segments,e=this.points;return t.length&&e[t[0].start]}last(){const t=this.segments,e=this.points,i=t.length;return i&&e[t[i-1].end]}interpolate(t,e){const i=this.options,s=t[e],n=this.points,o=wi(this,{property:e,start:s,end:s});if(!o.length)return;const a=[],r=function(t){return t.stepped?ei:t.tension||"monotone"===t.cubicInterpolationMode?ii:ti}(i);let l,h;for(l=0,h=o.length;l<h;++l){const{start:h,end:c}=o[l],d=n[h],u=n[c];if(d===u){a.push(d);continue}const f=r(d,u,Math.abs((s-d[e])/(u[e]-d[e])),i.stepped);f[e]=t[e],a.push(f)}return 1===a.length?a[0]:a}pathSegment(t,e,i){return Xn(this)(t,this,e,i)}path(t,e,i){const s=this.segments,n=Xn(this);let o=this._loop;e=e||0,i=i||this.points.length-e;for(const a of s)o&=n(t,this,a,{start:e,end:e+i-1});return!!o}draw(t,e,i,s){const n=this.options||{};(this.points||[]).length&&n.borderWidth&&(t.save(),Kn(t,this,i,s),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function Zn(t,e,i,s){const n=t.options,{[i]:o}=t.getProps([i],s);return Math.abs(e-o)<n.radius+n.hitRadius}Gn.id="line",Gn.defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0},Gn.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"},Gn.descriptors={_scriptable:!0,_indexable:t=>"borderDash"!==t&&"fill"!==t};class Jn extends Os{constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,e,i){const s=this.options,{x:n,y:o}=this.getProps(["x","y"],i);return Math.pow(t-n,2)+Math.pow(e-o,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(t,e){return Zn(this,t,"x",e)}inYRange(t,e){return Zn(this,t,"y",e)}getCenterPoint(t){const{x:e,y:i}=this.getProps(["x","y"],t);return{x:e,y:i}}size(t){let e=(t=t||this.options||{}).radius||0;e=Math.max(e,e&&t.hoverRadius||0);return 2*(e+(e&&t.borderWidth||0))}draw(t,e){const i=this.options;this.skip||i.radius<.1||!ve(this,e,this.size(i)/2)||(t.strokeStyle=i.borderColor,t.lineWidth=i.borderWidth,t.fillStyle=i.backgroundColor,ye(t,i,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}function Qn(t,e){const{x:i,y:s,base:n,width:o,height:a}=t.getProps(["x","y","base","width","height"],e);let r,l,h,c,d;return t.horizontal?(d=a/2,r=Math.min(i,n),l=Math.max(i,n),h=s-d,c=s+d):(d=o/2,r=i-d,l=i+d,h=Math.min(s,n),c=Math.max(s,n)),{left:r,top:h,right:l,bottom:c}}function to(t,e,i,s){return t?0:Qt(e,i,s)}function eo(t){const e=Qn(t),i=e.right-e.left,s=e.bottom-e.top,n=function(t,e,i){const s=t.options.borderWidth,n=t.borderSkipped,o=hi(s);return{t:to(n.top,o.top,0,i),r:to(n.right,o.right,0,e),b:to(n.bottom,o.bottom,0,i),l:to(n.left,o.left,0,e)}}(t,i/2,s/2),o=function(t,e,i){const{enableBorderRadius:s}=t.getProps(["enableBorderRadius"]),n=t.options.borderRadius,o=ci(n),a=Math.min(e,i),r=t.borderSkipped,l=s||q(n);return{topLeft:to(!l||r.top||r.left,o.topLeft,0,a),topRight:to(!l||r.top||r.right,o.topRight,0,a),bottomLeft:to(!l||r.bottom||r.left,o.bottomLeft,0,a),bottomRight:to(!l||r.bottom||r.right,o.bottomRight,0,a)}}(t,i/2,s/2);return{outer:{x:e.left,y:e.top,w:i,h:s,radius:o},inner:{x:e.left+n.l,y:e.top+n.t,w:i-n.l-n.r,h:s-n.t-n.b,radius:{topLeft:Math.max(0,o.topLeft-Math.max(n.t,n.l)),topRight:Math.max(0,o.topRight-Math.max(n.t,n.r)),bottomLeft:Math.max(0,o.bottomLeft-Math.max(n.b,n.l)),bottomRight:Math.max(0,o.bottomRight-Math.max(n.b,n.r))}}}}function io(t,e,i,s){const n=null===e,o=null===i,a=t&&!(n&&o)&&Qn(t,s);return a&&(n||ee(e,a.left,a.right))&&(o||ee(i,a.top,a.bottom))}function so(t,e){t.rect(e.x,e.y,e.w,e.h)}function no(t,e,i={}){const s=t.x!==i.x?-e:0,n=t.y!==i.y?-e:0,o=(t.x+t.w!==i.x+i.w?e:0)-s,a=(t.y+t.h!==i.y+i.h?e:0)-n;return{x:t.x+s,y:t.y+n,w:t.w+o,h:t.h+a,radius:t.radius}}Jn.id="point",Jn.defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0},Jn.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};class oo extends Os{constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:e,options:{borderColor:i,backgroundColor:s}}=this,{inner:n,outer:o}=eo(this),a=(r=o.radius).topLeft||r.topRight||r.bottomLeft||r.bottomRight?Ce:so;var r;t.save(),o.w===n.w&&o.h===n.h||(t.beginPath(),a(t,no(o,e,n)),t.clip(),a(t,no(n,-e,o)),t.fillStyle=i,t.fill("evenodd")),t.beginPath(),a(t,no(n,e)),t.fillStyle=s,t.fill(),t.restore()}inRange(t,e,i){return io(this,t,e,i)}inXRange(t,e){return io(this,t,null,e)}inYRange(t,e){return io(this,null,t,e)}getCenterPoint(t){const{x:e,y:i,base:s,horizontal:n}=this.getProps(["x","y","base","horizontal"],t);return{x:n?(e+s)/2:e,y:n?i:(i+s)/2}}getRange(t){return"x"===t?this.width/2:this.height/2}}oo.id="bar",oo.defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0},oo.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};var ao=Object.freeze({__proto__:null,ArcElement:Wn,LineElement:Gn,PointElement:Jn,BarElement:oo});function ro(t){if(t._decimated){const e=t._data;delete t._decimated,delete t._data,Object.defineProperty(t,"data",{value:e})}}function lo(t){t.data.datasets.forEach((t=>{ro(t)}))}var ho={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(t,e,i)=>{if(!i.enabled)return void lo(t);const s=t.width;t.data.datasets.forEach(((e,n)=>{const{_data:o,indexAxis:a}=e,r=t.getDatasetMeta(n),l=o||e.data;if("y"===fi([a,t.options.indexAxis]))return;if(!r.controller.supportsDecimation)return;const h=t.scales[r.xAxisID];if("linear"!==h.type&&"time"!==h.type)return;if(t.options.parsing)return;let{start:c,count:d}=function(t,e){const i=e.length;let s,n=0;const{iScale:o}=t,{min:a,max:r,minDefined:l,maxDefined:h}=o.getUserBounds();return l&&(n=Qt(wt(e,o.axis,a).lo,0,i-1)),s=h?Qt(wt(e,o.axis,r).hi+1,n,i)-n:i-n,{start:n,count:s}}(r,l);if(d<=(i.threshold||4*s))return void ro(e);let u;switch(U(o)&&(e._data=l,delete e.data,Object.defineProperty(e,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(t){this._data=t}})),i.algorithm){case"lttb":u=function(t,e,i,s,n){const o=n.samples||s;if(o>=i)return t.slice(e,e+i);const a=[],r=(i-2)/(o-2);let l=0;const h=e+i-1;let c,d,u,f,g,p=e;for(a[l++]=t[p],c=0;c<o-2;c++){let s,n=0,o=0;const h=Math.floor((c+1)*r)+1+e,m=Math.min(Math.floor((c+2)*r)+1,i)+e,b=m-h;for(s=h;s<m;s++)n+=t[s].x,o+=t[s].y;n/=b,o/=b;const x=Math.floor(c*r)+1+e,_=Math.min(Math.floor((c+1)*r)+1,i)+e,{x:y,y:v}=t[p];for(u=f=-1,s=x;s<_;s++)f=.5*Math.abs((y-n)*(t[s].y-v)-(y-t[s].x)*(o-v)),f>u&&(u=f,d=t[s],g=s);a[l++]=d,p=g}return a[l++]=t[h],a}(l,c,d,s,i);break;case"min-max":u=function(t,e,i,s){let n,o,a,r,l,h,c,d,u,f,g=0,p=0;const m=[],b=e+i-1,x=t[e].x,_=t[b].x-x;for(n=e;n<e+i;++n){o=t[n],a=(o.x-x)/_*s,r=o.y;const e=0|a;if(e===l)r<u?(u=r,h=n):r>f&&(f=r,c=n),g=(p*g+o.x)/++p;else{const i=n-1;if(!U(h)&&!U(c)){const e=Math.min(h,c),s=Math.max(h,c);e!==d&&e!==i&&m.push({...t[e],x:g}),s!==d&&s!==i&&m.push({...t[s],x:g})}n>0&&i!==d&&m.push(t[i]),m.push(o),l=e,p=0,u=f=r,h=c=d=n}}return m}(l,c,d,s);break;default:throw new Error(`Unsupported decimation algorithm'${i.algorithm}'`)}e._decimated=u}))},destroy(t){lo(t)}};function co(t,e,i,s){if(s)return;let n=e[t],o=i[t];return"angle"===t&&(n=Zt(n),o=Zt(o)),{property:t,start:n,end:o}}function uo(t,e,i){for(;e>t;e--){const t=i[e];if(!isNaN(t.x)&&!isNaN(t.y))break}return e}function fo(t,e,i,s){return t&&e?s(t[i],e[i]):t?t[i]:e?e[i]:0}function go(t,e){let i=[],s=!1;return X(t)?(s=!0,i=t):i=function(t,e){const{x:i=null,y:s=null}=t||{},n=e.points,o=[];return e.segments.forEach((({start:t,end:e})=>{e=uo(t,e,n);const a=n[t],r=n[e];null!==s?(o.push({x:a.x,y:s}),o.push({x:r.x,y:s})):null!==i&&(o.push({x:i,y:a.y}),o.push({x:i,y:r.y}))})),o}(t,e),i.length?new Gn({points:i,options:{tension:0},_loop:s,_fullLoop:s}):null}function po(t,e,i){let s=t[e].fill;const n=[e];let o;if(!i)return s;for(;!1!==s&&-1===n.indexOf(s);){if(!K(s))return s;if(o=t[s],!o)return!1;if(o.visible)return s;n.push(s),s=o.fill}return!1}function mo(t,e,i){const s=function(t){const e=t.options,i=e.fill;let s=Z(i&&i.target,i);void 0===s&&(s=!!e.backgroundColor);if(!1===s||null===s)return!1;if(!0===s)return"origin";return s}(t);if(q(s))return!isNaN(s.value)&&s;let n=parseFloat(s);return K(n)&&Math.floor(n)===n?function(t,e,i,s){"-"!==t&&"+"!==t||(i=e+i);if(i===e||i<0||i>=s)return!1;return i}(s[0],e,n,i):["origin","start","end","stack","shape"].indexOf(s)>=0&&s}function bo(t,e,i){const s=[];for(let n=0;n<i.length;n++){const o=i[n],{first:a,last:r,point:l}=xo(o,e,"x");if(!(!l||a&&r))if(a)s.unshift(l);else if(t.push(l),!r)break}t.push(...s)}function xo(t,e,i){const s=t.interpolate(e,i);if(!s)return{};const n=s[i],o=t.segments,a=t.points;let r=!1,l=!1;for(let t=0;t<o.length;t++){const e=o[t],s=a[e.start][i],h=a[e.end][i];if(ee(n,s,h)){r=n===s,l=n===h;break}}return{first:r,last:l,point:s}}class _o{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,e,i){const{x:s,y:n,radius:o}=this;return e=e||{start:0,end:At},t.arc(s,n,o,e.end,e.start,!0),!i.bounds}interpolate(t){const{x:e,y:i,radius:s}=this,n=t.angle;return{x:e+Math.cos(n)*s,y:i+Math.sin(n)*s,angle:n}}}function yo(t){const{chart:e,fill:i,line:s}=t;if(K(i))return function(t,e){const i=t.getDatasetMeta(e);return i&&t.isDatasetVisible(e)?i.dataset:null}(e,i);if("stack"===i)return function(t){const{scale:e,index:i,line:s}=t,n=[],o=s.segments,a=s.points,r=function(t,e){const i=[],s=t.getMatchingVisibleMetas("line");for(let t=0;t<s.length;t++){const n=s[t];if(n.index===e)break;n.hidden||i.unshift(n.dataset)}return i}(e,i);r.push(go({x:null,y:e.bottom},s));for(let t=0;t<o.length;t++){const e=o[t];for(let t=e.start;t<=e.end;t++)bo(n,a[t],r)}return new Gn({points:n,options:{}})}(t);if("shape"===i)return!0;const n=function(t){if((t.scale||{}).getPointPositionForValue)return function(t){const{scale:e,fill:i}=t,s=e.options,n=e.getLabels().length,o=s.reverse?e.max:e.min,a=function(t,e,i){let s;return s="start"===t?i:"end"===t?e.options.reverse?e.min:e.max:q(t)?t.value:e.getBaseValue(),s}(i,e,o),r=[];if(s.grid.circular){const t=e.getPointPositionForValue(0,o);return new _o({x:t.x,y:t.y,radius:e.getDistanceFromCenterForValue(a)})}for(let t=0;t<n;++t)r.push(e.getPointPositionForValue(t,a));return r}(t);return function(t){const{scale:e={},fill:i}=t,s=function(t,e){let i=null;return"start"===t?i=e.bottom:"end"===t?i=e.top:q(t)?i=e.getPixelForValue(t.value):e.getBasePixel&&(i=e.getBasePixel()),i}(i,e);if(K(s)){const t=e.isHorizontal();return{x:t?s:null,y:t?null:s}}return null}(t)}(t);return n instanceof _o?n:go(n,s)}function vo(t,e,i){const s=yo(e),{line:n,scale:o,axis:a}=e,r=n.options,l=r.fill,h=r.backgroundColor,{above:c=h,below:d=h}=l||{};s&&n.points.length&&(we(t,i),function(t,e){const{line:i,target:s,above:n,below:o,area:a,scale:r}=e,l=i._loop?"angle":e.axis;t.save(),"x"===l&&o!==n&&(wo(t,s,a.top),Mo(t,{line:i,target:s,color:n,scale:r,property:l}),t.restore(),t.save(),wo(t,s,a.bottom));Mo(t,{line:i,target:s,color:o,scale:r,property:l}),t.restore()}(t,{line:n,target:s,above:c,below:d,area:i,scale:o,axis:a}),Me(t))}function wo(t,e,i){const{segments:s,points:n}=e;let o=!0,a=!1;t.beginPath();for(const r of s){const{start:s,end:l}=r,h=n[s],c=n[uo(s,l,n)];o?(t.moveTo(h.x,h.y),o=!1):(t.lineTo(h.x,i),t.lineTo(h.x,h.y)),a=!!e.pathSegment(t,r,{move:a}),a?t.closePath():t.lineTo(c.x,i)}t.lineTo(e.first().x,i),t.closePath(),t.clip()}function Mo(t,e){const{line:i,target:s,property:n,color:o,scale:a}=e,r=function(t,e,i){const s=t.segments,n=t.points,o=e.points,a=[];for(const t of s){let{start:s,end:r}=t;r=uo(s,r,n);const l=co(i,n[s],n[r],t.loop);if(!e.segments){a.push({source:t,target:l,start:n[s],end:n[r]});continue}const h=wi(e,l);for(const e of h){const s=co(i,o[e.start],o[e.end],e.loop),r=vi(t,n,s);for(const t of r)a.push({source:t,target:e,start:{[i]:fo(l,s,"start",Math.max)},end:{[i]:fo(l,s,"end",Math.min)}})}}return a}(i,s,n);for(const{source:e,target:l,start:h,end:c}of r){const{style:{backgroundColor:r=o}={}}=e,d=!0!==s;t.save(),t.fillStyle=r,ko(t,a,d&&co(n,h,c)),t.beginPath();const u=!!i.pathSegment(t,e);let f;if(d){u?t.closePath():So(t,s,c,n);const e=!!s.pathSegment(t,l,{move:u,reverse:!0});f=u&&e,f||So(t,s,h,n)}t.closePath(),t.fill(f?"evenodd":"nonzero"),t.restore()}}function ko(t,e,i){const{top:s,bottom:n}=e.chart.chartArea,{property:o,start:a,end:r}=i||{};"x"===o&&(t.beginPath(),t.rect(a,s,r-a,n-s),t.clip())}function So(t,e,i,s){const n=e.interpolate(i,s);n&&t.lineTo(n.x,n.y)}var Po={id:"filler",afterDatasetsUpdate(t,e,i){const s=(t.data.datasets||[]).length,n=[];let o,a,r,l;for(a=0;a<s;++a)o=t.getDatasetMeta(a),r=o.dataset,l=null,r&&r.options&&r instanceof Gn&&(l={visible:t.isDatasetVisible(a),index:a,fill:mo(r,a,s),chart:t,axis:o.controller.options.indexAxis,scale:o.vScale,line:r}),o.$filler=l,n.push(l);for(a=0;a<s;++a)l=n[a],l&&!1!==l.fill&&(l.fill=po(n,a,i.propagate))},beforeDraw(t,e,i){const s="beforeDraw"===i.drawTime,n=t.getSortedVisibleDatasetMetas(),o=t.chartArea;for(let e=n.length-1;e>=0;--e){const i=n[e].$filler;i&&(i.line.updateControlPoints(o,i.axis),s&&vo(t.ctx,i,o))}},beforeDatasetsDraw(t,e,i){if("beforeDatasetsDraw"!==i.drawTime)return;const s=t.getSortedVisibleDatasetMetas();for(let e=s.length-1;e>=0;--e){const i=s[e].$filler;i&&vo(t.ctx,i,t.chartArea)}},beforeDatasetDraw(t,e,i){const s=e.meta.$filler;s&&!1!==s.fill&&"beforeDatasetDraw"===i.drawTime&&vo(t.ctx,s,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const Do=(t,e)=>{let{boxHeight:i=e,boxWidth:s=e}=t;return t.usePointStyle&&(i=Math.min(i,e),s=Math.min(s,e)),{boxWidth:s,boxHeight:i,itemHeight:Math.max(e,i)}};class Co extends Os{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,i){this.maxWidth=t,this.maxHeight=e,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let e=tt(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter((e=>t.filter(e,this.chart.data)))),t.sort&&(e=e.sort(((e,i)=>t.sort(e,i,this.chart.data)))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){const{options:t,ctx:e}=this;if(!t.display)return void(this.width=this.height=0);const i=t.labels,s=ui(i.font),n=s.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:r}=Do(i,n);let l,h;e.font=s.string,this.isHorizontal()?(l=this.maxWidth,h=this._fitRows(o,n,a,r)+10):(h=this.maxHeight,l=this._fitCols(o,n,a,r)+10),this.width=Math.min(l,t.maxWidth||this.maxWidth),this.height=Math.min(h,t.maxHeight||this.maxHeight)}_fitRows(t,e,i,s){const{ctx:n,maxWidth:o,options:{labels:{padding:a}}}=this,r=this.legendHitBoxes=[],l=this.lineWidths=[0],h=s+a;let c=t;n.textAlign="left",n.textBaseline="middle";let d=-1,u=-h;return this.legendItems.forEach(((t,f)=>{const g=i+e/2+n.measureText(t.text).width;(0===f||l[l.length-1]+g+2*a>o)&&(c+=h,l[l.length-(f>0?0:1)]=0,u+=h,d++),r[f]={left:0,top:u,row:d,width:g,height:s},l[l.length-1]+=g+a})),c}_fitCols(t,e,i,s){const{ctx:n,maxHeight:o,options:{labels:{padding:a}}}=this,r=this.legendHitBoxes=[],l=this.columnSizes=[],h=o-t;let c=a,d=0,u=0,f=0,g=0;return this.legendItems.forEach(((t,o)=>{const p=i+e/2+n.measureText(t.text).width;o>0&&u+s+2*a>h&&(c+=d+a,l.push({width:d,height:u}),f+=d+a,g++,d=u=0),r[o]={left:f,top:u,col:g,width:p,height:s},d=Math.max(d,p),u+=s+a})),c+=d,l.push({width:d,height:u}),c}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:i,labels:{padding:s},rtl:o}}=this,a=mi(o,this.left,this.width);if(this.isHorizontal()){let o=0,r=n(i,this.left+s,this.right-this.lineWidths[o]);for(const l of e)o!==l.row&&(o=l.row,r=n(i,this.left+s,this.right-this.lineWidths[o])),l.top+=this.top+t+s,l.left=a.leftForLtr(a.x(r),l.width),r+=l.width+s}else{let o=0,r=n(i,this.top+t+s,this.bottom-this.columnSizes[o].height);for(const l of e)l.col!==o&&(o=l.col,r=n(i,this.top+t+s,this.bottom-this.columnSizes[o].height)),l.top=r,l.left+=this.left+s,l.left=a.leftForLtr(a.x(l.left),l.width),r+=l.height+s}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const t=this.ctx;we(t,this),this._draw(),Me(t)}}_draw(){const{options:t,columnSizes:e,lineWidths:i,ctx:s}=this,{align:a,labels:r}=t,l=yt.color,h=mi(t.rtl,this.left,this.width),c=ui(r.font),{color:d,padding:u}=r,f=c.size,g=f/2;let p;this.drawTitle(),s.textAlign=h.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=c.string;const{boxWidth:m,boxHeight:b,itemHeight:x}=Do(r,f),_=this.isHorizontal(),y=this._computeTitleHeight();p=_?{x:n(a,this.left+u,this.right-i[0]),y:this.top+u+y,line:0}:{x:this.left+u,y:n(a,this.top+y+u,this.bottom-e[0].height),line:0},bi(this.ctx,t.textDirection);const v=x+u;this.legendItems.forEach(((w,M)=>{s.strokeStyle=w.fontColor||d,s.fillStyle=w.fontColor||d;const k=s.measureText(w.text).width,S=h.textAlign(w.textAlign||(w.textAlign=r.textAlign)),P=m+g+k;let D=p.x,C=p.y;h.setWidth(this.width),_?M>0&&D+P+u>this.right&&(C=p.y+=v,p.line++,D=p.x=n(a,this.left+u,this.right-i[p.line])):M>0&&C+v>this.bottom&&(D=p.x=D+e[p.line].width+u,p.line++,C=p.y=n(a,this.top+y+u,this.bottom-e[p.line].height));!function(t,e,i){if(isNaN(m)||m<=0||isNaN(b)||b<0)return;s.save();const n=Z(i.lineWidth,1);if(s.fillStyle=Z(i.fillStyle,l),s.lineCap=Z(i.lineCap,"butt"),s.lineDashOffset=Z(i.lineDashOffset,0),s.lineJoin=Z(i.lineJoin,"miter"),s.lineWidth=n,s.strokeStyle=Z(i.strokeStyle,l),s.setLineDash(Z(i.lineDash,[])),r.usePointStyle){const o={radius:m*Math.SQRT2/2,pointStyle:i.pointStyle,rotation:i.rotation,borderWidth:n},a=h.xPlus(t,m/2);ye(s,o,a,e+g)}else{const o=e+Math.max((f-b)/2,0),a=h.leftForLtr(t,m),r=ci(i.borderRadius);s.beginPath(),Object.values(r).some((t=>0!==t))?Ce(s,{x:a,y:o,w:m,h:b,radius:r}):s.rect(a,o,m,b),s.fill(),0!==n&&s.stroke()}s.restore()}(h.x(D),C,w),D=o(S,D+m+g,_?D+P:this.right,t.rtl),function(t,e,i){Pe(s,i.text,t,e+x/2,c,{strikethrough:i.hidden,textAlign:h.textAlign(i.textAlign)})}(h.x(D),C,w),_?p.x+=P+u:p.y+=v})),xi(this.ctx,t.textDirection)}drawTitle(){const t=this.options,e=t.title,i=ui(e.font),o=di(e.padding);if(!e.display)return;const a=mi(t.rtl,this.left,this.width),r=this.ctx,l=e.position,h=i.size/2,c=o.top+h;let d,u=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),d=this.top+c,u=n(t.align,u,this.right-f);else{const e=this.columnSizes.reduce(((t,e)=>Math.max(t,e.height)),0);d=c+n(t.align,this.top,this.bottom-e-t.labels.padding-this._computeTitleHeight())}const g=n(l,u,u+f);r.textAlign=a.textAlign(s(l)),r.textBaseline="middle",r.strokeStyle=e.color,r.fillStyle=e.color,r.font=i.string,Pe(r,e.text,g,d,i)}_computeTitleHeight(){const t=this.options.title,e=ui(t.font),i=di(t.padding);return t.display?e.lineHeight+i.height:0}_getLegendItemAt(t,e){let i,s,n;if(ee(t,this.left,this.right)&&ee(e,this.top,this.bottom))for(n=this.legendHitBoxes,i=0;i<n.length;++i)if(s=n[i],ee(t,s.left,s.left+s.width)&&ee(e,s.top,s.top+s.height))return this.legendItems[i];return null}handleEvent(t){const e=this.options;if(!function(t,e){if(("mousemove"===t||"mouseout"===t)&&(e.onHover||e.onLeave))return!0;if(e.onClick&&("click"===t||"mouseup"===t))return!0;return!1}(t.type,e))return;const i=this._getLegendItemAt(t.x,t.y);if("mousemove"===t.type||"mouseout"===t.type){const o=this._hoveredItem,a=(n=i,null!==(s=o)&&null!==n&&s.datasetIndex===n.datasetIndex&&s.index===n.index);o&&!a&&tt(e.onLeave,[t,o,this],this),this._hoveredItem=i,i&&!a&&tt(e.onHover,[t,i,this],this)}else i&&tt(e.onClick,[t,i,this],this);var s,n}}var Oo={id:"legend",_element:Co,start(t,e,i){const s=t.legend=new Co({ctx:t.ctx,options:i,chart:t});Xi.configure(t,s,i),Xi.addBox(t,s)},stop(t){Xi.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,i){const s=t.legend;Xi.configure(t,s,i),s.options=i},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,i){const s=e.datasetIndex,n=i.chart;n.isDatasetVisible(s)?(n.hide(s),e.hidden=!0):(n.show(s),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:i,pointStyle:s,textAlign:n,color:o}}=t.legend.options;return t._getSortedDatasetMetas().map((t=>{const a=t.controller.getStyle(i?0:void 0),r=di(a.borderWidth);return{text:e[t.index].label,fillStyle:a.backgroundColor,fontColor:o,hidden:!t.visible,lineCap:a.borderCapStyle,lineDash:a.borderDash,lineDashOffset:a.borderDashOffset,lineJoin:a.borderJoinStyle,lineWidth:(r.width+r.height)/4,strokeStyle:a.borderColor,pointStyle:s||a.pointStyle,rotation:a.rotation,textAlign:n||a.textAlign,borderRadius:0,datasetIndex:t.index}}),this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class Ao extends Os{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e){const i=this.options;if(this.left=0,this.top=0,!i.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=t,this.height=this.bottom=e;const s=X(i.text)?i.text.length:1;this._padding=di(i.padding);const n=s*ui(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=n:this.width=n}isHorizontal(){const t=this.options.position;return"top"===t||"bottom"===t}_drawArgs(t){const{top:e,left:i,bottom:s,right:o,options:a}=this,r=a.align;let l,h,c,d=0;return this.isHorizontal()?(h=n(r,i,o),c=e+t,l=o-i):("left"===a.position?(h=i+t,c=n(r,s,e),d=-.5*Ot):(h=o-t,c=n(r,e,s),d=.5*Ot),l=s-e),{titleX:h,titleY:c,maxWidth:l,rotation:d}}draw(){const t=this.ctx,e=this.options;if(!e.display)return;const i=ui(e.font),n=i.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:r,rotation:l}=this._drawArgs(n);Pe(t,e.text,0,0,i,{color:e.color,maxWidth:r,rotation:l,textAlign:s(e.align),textBaseline:"middle",translation:[o,a]})}}var To={id:"title",_element:Ao,start(t,e,i){!function(t,e){const i=new Ao({ctx:t.ctx,options:e,chart:t});Xi.configure(t,i,e),Xi.addBox(t,i),t.titleBlock=i}(t,i)},stop(t){const e=t.titleBlock;Xi.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,i){const s=t.titleBlock;Xi.configure(t,s,i),s.options=i},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Lo=new WeakMap;var Ro={id:"subtitle",start(t,e,i){const s=new Ao({ctx:t.ctx,options:i,chart:t});Xi.configure(t,s,i),Xi.addBox(t,s),Lo.set(t,s)},stop(t){Xi.removeBox(t,Lo.get(t)),Lo.delete(t)},beforeUpdate(t,e,i){const s=Lo.get(t);Xi.configure(t,s,i),s.options=i},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Eo={average(t){if(!t.length)return!1;let e,i,s=0,n=0,o=0;for(e=0,i=t.length;e<i;++e){const i=t[e].element;if(i&&i.hasValue()){const t=i.tooltipPosition();s+=t.x,n+=t.y,++o}}return{x:s/o,y:n/o}},nearest(t,e){if(!t.length)return!1;let i,s,n,o=e.x,a=e.y,r=Number.POSITIVE_INFINITY;for(i=0,s=t.length;i<s;++i){const s=t[i].element;if(s&&s.hasValue()){const t=Kt(e,s.getCenterPoint());t<r&&(r=t,n=s)}}if(n){const t=n.tooltipPosition();o=t.x,a=t.y}return{x:o,y:a}}};function Io(t,e){return e&&(X(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function zo(t){return("string"==typeof t||t instanceof String)&&t.indexOf("\n")>-1?t.split("\n"):t}function Fo(t,e){const{element:i,datasetIndex:s,index:n}=e,o=t.getDatasetMeta(s).controller,{label:a,value:r}=o.getLabelAndValue(n);return{chart:t,label:a,parsed:o.getParsed(n),raw:t.data.datasets[s].data[n],formattedValue:r,dataset:o.getDataset(),dataIndex:n,datasetIndex:s,element:i}}function Bo(t,e){const i=t.chart.ctx,{body:s,footer:n,title:o}=t,{boxWidth:a,boxHeight:r}=e,l=ui(e.bodyFont),h=ui(e.titleFont),c=ui(e.footerFont),d=o.length,u=n.length,f=s.length,g=di(e.padding);let p=g.height,m=0,b=s.reduce(((t,e)=>t+e.before.length+e.lines.length+e.after.length),0);if(b+=t.beforeBody.length+t.afterBody.length,d&&(p+=d*h.lineHeight+(d-1)*e.titleSpacing+e.titleMarginBottom),b){p+=f*(e.displayColors?Math.max(r,l.lineHeight):l.lineHeight)+(b-f)*l.lineHeight+(b-1)*e.bodySpacing}u&&(p+=e.footerMarginTop+u*c.lineHeight+(u-1)*e.footerSpacing);let x=0;const _=function(t){m=Math.max(m,i.measureText(t).width+x)};return i.save(),i.font=h.string,et(t.title,_),i.font=l.string,et(t.beforeBody.concat(t.afterBody),_),x=e.displayColors?a+2+e.boxPadding:0,et(s,(t=>{et(t.before,_),et(t.lines,_),et(t.after,_)})),x=0,i.font=c.string,et(t.footer,_),i.restore(),m+=g.width,{width:m,height:p}}function Vo(t,e,i,s){const{x:n,width:o}=i,{width:a,chartArea:{left:r,right:l}}=t;let h="center";return"center"===s?h=n<=(r+l)/2?"left":"right":n<=o/2?h="left":n>=a-o/2&&(h="right"),function(t,e,i,s){const{x:n,width:o}=s,a=i.caretSize+i.caretPadding;return"left"===t&&n+o+a>e.width||"right"===t&&n-o-a<0||void 0}(h,t,e,i)&&(h="center"),h}function No(t,e,i){const s=i.yAlign||e.yAlign||function(t,e){const{y:i,height:s}=e;return i<s/2?"top":i>t.height-s/2?"bottom":"center"}(t,i);return{xAlign:i.xAlign||e.xAlign||Vo(t,e,i,s),yAlign:s}}function Wo(t,e,i,s){const{caretSize:n,caretPadding:o,cornerRadius:a}=t,{xAlign:r,yAlign:l}=i,h=n+o,{topLeft:c,topRight:d,bottomLeft:u,bottomRight:f}=ci(a);let g=function(t,e){let{x:i,width:s}=t;return"right"===e?i-=s:"center"===e&&(i-=s/2),i}(e,r);const p=function(t,e,i){let{y:s,height:n}=t;return"top"===e?s+=i:s-="bottom"===e?n+i:n/2,s}(e,l,h);return"center"===l?"left"===r?g+=h:"right"===r&&(g-=h):"left"===r?g-=Math.max(c,u)+n:"right"===r&&(g+=Math.max(d,f)+n),{x:Qt(g,0,s.width-e.width),y:Qt(p,0,s.height-e.height)}}function Ho(t,e,i){const s=di(i.padding);return"center"===e?t.x+t.width/2:"right"===e?t.x+t.width-s.right:t.x+s.left}function jo(t){return Io([],zo(t))}function $o(t,e){const i=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return i?t.override(i):t}class Yo extends Os{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart||t._chart,this._chart=this.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const e=this.chart,i=this.options.setContext(this.getContext()),s=i.enabled&&e.options.animation&&i.animations,n=new ms(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(n)),n}getContext(){return this.$context||(this.$context=(t=this.chart.getContext(),e=this,i=this._tooltipItems,pi(t,{tooltip:e,tooltipItems:i,type:"tooltip"})));var t,e,i}getTitle(t,e){const{callbacks:i}=e,s=i.beforeTitle.apply(this,[t]),n=i.title.apply(this,[t]),o=i.afterTitle.apply(this,[t]);let a=[];return a=Io(a,zo(s)),a=Io(a,zo(n)),a=Io(a,zo(o)),a}getBeforeBody(t,e){return jo(e.callbacks.beforeBody.apply(this,[t]))}getBody(t,e){const{callbacks:i}=e,s=[];return et(t,(t=>{const e={before:[],lines:[],after:[]},n=$o(i,t);Io(e.before,zo(n.beforeLabel.call(this,t))),Io(e.lines,n.label.call(this,t)),Io(e.after,zo(n.afterLabel.call(this,t))),s.push(e)})),s}getAfterBody(t,e){return jo(e.callbacks.afterBody.apply(this,[t]))}getFooter(t,e){const{callbacks:i}=e,s=i.beforeFooter.apply(this,[t]),n=i.footer.apply(this,[t]),o=i.afterFooter.apply(this,[t]);let a=[];return a=Io(a,zo(s)),a=Io(a,zo(n)),a=Io(a,zo(o)),a}_createItems(t){const e=this._active,i=this.chart.data,s=[],n=[],o=[];let a,r,l=[];for(a=0,r=e.length;a<r;++a)l.push(Fo(this.chart,e[a]));return t.filter&&(l=l.filter(((e,s,n)=>t.filter(e,s,n,i)))),t.itemSort&&(l=l.sort(((e,s)=>t.itemSort(e,s,i)))),et(l,(e=>{const i=$o(t.callbacks,e);s.push(i.labelColor.call(this,e)),n.push(i.labelPointStyle.call(this,e)),o.push(i.labelTextColor.call(this,e))})),this.labelColors=s,this.labelPointStyles=n,this.labelTextColors=o,this.dataPoints=l,l}update(t,e){const i=this.options.setContext(this.getContext()),s=this._active;let n,o=[];if(s.length){const t=Eo[i.position].call(this,s,this._eventPosition);o=this._createItems(i),this.title=this.getTitle(o,i),this.beforeBody=this.getBeforeBody(o,i),this.body=this.getBody(o,i),this.afterBody=this.getAfterBody(o,i),this.footer=this.getFooter(o,i);const e=this._size=Bo(this,i),a=Object.assign({},t,e),r=No(this.chart,i,a),l=Wo(i,a,r,this.chart);this.xAlign=r.xAlign,this.yAlign=r.yAlign,n={opacity:1,x:l.x,y:l.y,width:e.width,height:e.height,caretX:t.x,caretY:t.y}}else 0!==this.opacity&&(n={opacity:0});this._tooltipItems=o,this.$context=void 0,n&&this._resolveAnimations().update(this,n),t&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:e})}drawCaret(t,e,i,s){const n=this.getCaretPosition(t,i,s);e.lineTo(n.x1,n.y1),e.lineTo(n.x2,n.y2),e.lineTo(n.x3,n.y3)}getCaretPosition(t,e,i){const{xAlign:s,yAlign:n}=this,{caretSize:o,cornerRadius:a}=i,{topLeft:r,topRight:l,bottomLeft:h,bottomRight:c}=ci(a),{x:d,y:u}=t,{width:f,height:g}=e;let p,m,b,x,_,y;return"center"===n?(_=u+g/2,"left"===s?(p=d,m=p-o,x=_+o,y=_-o):(p=d+f,m=p+o,x=_-o,y=_+o),b=p):(m="left"===s?d+Math.max(r,h)+o:"right"===s?d+f-Math.max(l,c)-o:this.caretX,"top"===n?(x=u,_=x-o,p=m-o,b=m+o):(x=u+g,_=x+o,p=m+o,b=m-o),y=x),{x1:p,x2:m,x3:b,y1:x,y2:_,y3:y}}drawTitle(t,e,i){const s=this.title,n=s.length;let o,a,r;if(n){const l=mi(i.rtl,this.x,this.width);for(t.x=Ho(this,i.titleAlign,i),e.textAlign=l.textAlign(i.titleAlign),e.textBaseline="middle",o=ui(i.titleFont),a=i.titleSpacing,e.fillStyle=i.titleColor,e.font=o.string,r=0;r<n;++r)e.fillText(s[r],l.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+a,r+1===n&&(t.y+=i.titleMarginBottom-a)}}_drawColorBox(t,e,i,s,n){const o=this.labelColors[i],a=this.labelPointStyles[i],{boxHeight:r,boxWidth:l,boxPadding:h}=n,c=ui(n.bodyFont),d=Ho(this,"left",n),u=s.x(d),f=r<c.lineHeight?(c.lineHeight-r)/2:0,g=e.y+f;if(n.usePointStyle){const e={radius:Math.min(l,r)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},i=s.leftForLtr(u,l)+l/2,h=g+r/2;t.strokeStyle=n.multiKeyBackground,t.fillStyle=n.multiKeyBackground,ye(t,e,i,h),t.strokeStyle=o.borderColor,t.fillStyle=o.backgroundColor,ye(t,e,i,h)}else{t.lineWidth=o.borderWidth||1,t.strokeStyle=o.borderColor,t.setLineDash(o.borderDash||[]),t.lineDashOffset=o.borderDashOffset||0;const e=s.leftForLtr(u,l-h),i=s.leftForLtr(s.xPlus(u,1),l-h-2),a=ci(o.borderRadius);Object.values(a).some((t=>0!==t))?(t.beginPath(),t.fillStyle=n.multiKeyBackground,Ce(t,{x:e,y:g,w:l,h:r,radius:a}),t.fill(),t.stroke(),t.fillStyle=o.backgroundColor,t.beginPath(),Ce(t,{x:i,y:g+1,w:l-2,h:r-2,radius:a}),t.fill()):(t.fillStyle=n.multiKeyBackground,t.fillRect(e,g,l,r),t.strokeRect(e,g,l,r),t.fillStyle=o.backgroundColor,t.fillRect(i,g+1,l-2,r-2))}t.fillStyle=this.labelTextColors[i]}drawBody(t,e,i){const{body:s}=this,{bodySpacing:n,bodyAlign:o,displayColors:a,boxHeight:r,boxWidth:l,boxPadding:h}=i,c=ui(i.bodyFont);let d=c.lineHeight,u=0;const f=mi(i.rtl,this.x,this.width),g=function(i){e.fillText(i,f.x(t.x+u),t.y+d/2),t.y+=d+n},p=f.textAlign(o);let m,b,x,_,y,v,w;for(e.textAlign=o,e.textBaseline="middle",e.font=c.string,t.x=Ho(this,p,i),e.fillStyle=i.bodyColor,et(this.beforeBody,g),u=a&&"right"!==p?"center"===o?l/2+h:l+2+h:0,_=0,v=s.length;_<v;++_){for(m=s[_],b=this.labelTextColors[_],e.fillStyle=b,et(m.before,g),x=m.lines,a&&x.length&&(this._drawColorBox(e,t,_,f,i),d=Math.max(c.lineHeight,r)),y=0,w=x.length;y<w;++y)g(x[y]),d=c.lineHeight;et(m.after,g)}u=0,d=c.lineHeight,et(this.afterBody,g),t.y-=n}drawFooter(t,e,i){const s=this.footer,n=s.length;let o,a;if(n){const r=mi(i.rtl,this.x,this.width);for(t.x=Ho(this,i.footerAlign,i),t.y+=i.footerMarginTop,e.textAlign=r.textAlign(i.footerAlign),e.textBaseline="middle",o=ui(i.footerFont),e.fillStyle=i.footerColor,e.font=o.string,a=0;a<n;++a)e.fillText(s[a],r.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+i.footerSpacing}}drawBackground(t,e,i,s){const{xAlign:n,yAlign:o}=this,{x:a,y:r}=t,{width:l,height:h}=i,{topLeft:c,topRight:d,bottomLeft:u,bottomRight:f}=ci(s.cornerRadius);e.fillStyle=s.backgroundColor,e.strokeStyle=s.borderColor,e.lineWidth=s.borderWidth,e.beginPath(),e.moveTo(a+c,r),"top"===o&&this.drawCaret(t,e,i,s),e.lineTo(a+l-d,r),e.quadraticCurveTo(a+l,r,a+l,r+d),"center"===o&&"right"===n&&this.drawCaret(t,e,i,s),e.lineTo(a+l,r+h-f),e.quadraticCurveTo(a+l,r+h,a+l-f,r+h),"bottom"===o&&this.drawCaret(t,e,i,s),e.lineTo(a+u,r+h),e.quadraticCurveTo(a,r+h,a,r+h-u),"center"===o&&"left"===n&&this.drawCaret(t,e,i,s),e.lineTo(a,r+c),e.quadraticCurveTo(a,r,a+c,r),e.closePath(),e.fill(),s.borderWidth>0&&e.stroke()}_updateAnimationTarget(t){const e=this.chart,i=this.$animations,s=i&&i.x,n=i&&i.y;if(s||n){const i=Eo[t.position].call(this,this._active,this._eventPosition);if(!i)return;const o=this._size=Bo(this,t),a=Object.assign({},i,this._size),r=No(e,t,a),l=Wo(t,a,r,e);s._to===l.x&&n._to===l.y||(this.xAlign=r.xAlign,this.yAlign=r.yAlign,this.width=o.width,this.height=o.height,this.caretX=i.x,this.caretY=i.y,this._resolveAnimations().update(this,l))}}_willRender(){return!!this.opacity}draw(t){const e=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(e);const s={width:this.width,height:this.height},n={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const o=di(e.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;e.enabled&&a&&(t.save(),t.globalAlpha=i,this.drawBackground(n,t,s,e),bi(t,e.textDirection),n.y+=o.top,this.drawTitle(n,t,e),this.drawBody(n,t,e),this.drawFooter(n,t,e),xi(t,e.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,e){const i=this._active,s=t.map((({datasetIndex:t,index:e})=>{const i=this.chart.getDatasetMeta(t);if(!i)throw new Error("Cannot find a dataset at index "+t);return{datasetIndex:t,element:i.data[e],index:e}})),n=!it(i,s),o=this._positionChanged(s,e);(n||o)&&(this._active=s,this._eventPosition=e,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,e,i=!0){if(e&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,n=this._active||[],o=this._getActiveElements(t,n,e,i),a=this._positionChanged(o,t),r=e||!it(o,n)||a;return r&&(this._active=o,(s.enabled||s.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,e))),r}_getActiveElements(t,e,i,s){const n=this.options;if("mouseout"===t.type)return[];if(!s)return e;const o=this.chart.getElementsAtEventForMode(t,n.mode,n,i);return n.reverse&&o.reverse(),o}_positionChanged(t,e){const{caretX:i,caretY:s,options:n}=this,o=Eo[n.position].call(this,t,e);return!1!==o&&(i!==o.x||s!==o.y)}}Yo.positioners=Eo;var Uo={id:"tooltip",_element:Yo,positioners:Eo,afterInit(t,e,i){i&&(t.tooltip=new Yo({chart:t,options:i}))},beforeUpdate(t,e,i){t.tooltip&&t.tooltip.initialize(i)},reset(t,e,i){t.tooltip&&t.tooltip.initialize(i)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const i={tooltip:e};if(!1===t.notifyPlugins("beforeTooltipDraw",i))return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",i)}},afterEvent(t,e){if(t.tooltip){const i=e.replay;t.tooltip.handleEvent(e.event,i,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:{beforeTitle:$,title(t){if(t.length>0){const e=t[0],i=e.chart.data.labels,s=i?i.length:0;if(this&&this.options&&"dataset"===this.options.mode)return e.dataset.label||"";if(e.label)return e.label;if(s>0&&e.dataIndex<s)return i[e.dataIndex]}return""},afterTitle:$,beforeBody:$,beforeLabel:$,label(t){if(this&&this.options&&"dataset"===this.options.mode)return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const i=t.formattedValue;return U(i)||(e+=i),e},labelColor(t){const e=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const e=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:$,afterBody:$,beforeFooter:$,footer:$,afterFooter:$}},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>"filter"!==t&&"itemSort"!==t&&"external"!==t,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},Xo=Object.freeze({__proto__:null,Decimation:ho,Filler:Po,Legend:Oo,SubTitle:Ro,Title:To,Tooltip:Uo});function qo(t,e,i,s){const n=t.indexOf(e);if(-1===n)return((t,e,i,s)=>("string"==typeof e?(i=t.push(e)-1,s.unshift({index:i,label:e})):isNaN(e)&&(i=null),i))(t,e,i,s);return n!==t.lastIndexOf(e)?i:n}class Ko extends Ns{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const e=this._addedLabels;if(e.length){const t=this.getLabels();for(const{index:i,label:s}of e)t[i]===s&&t.splice(i,1);this._addedLabels=[]}super.init(t)}parse(t,e){if(U(t))return null;const i=this.getLabels();return((t,e)=>null===t?null:Qt(Math.round(t),0,e))(e=isFinite(e)&&i[e]===t?e:qo(i,t,Z(e,t),this._addedLabels),i.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let{min:i,max:s}=this.getMinMax(!0);"ticks"===this.options.bounds&&(t||(i=0),e||(s=this.getLabels().length-1)),this.min=i,this.max=s}buildTicks(){const t=this.min,e=this.max,i=this.options.offset,s=[];let n=this.getLabels();n=0===t&&e===n.length-1?n:n.slice(t,e+1),this._valueRange=Math.max(n.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let i=t;i<=e;i++)s.push({value:i});return s}getLabelForValue(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return"number"!=typeof t&&(t=this.parse(t)),null===t?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}function Go(t,e,{horizontal:i,minRotation:s}){const n=Yt(s),o=(i?Math.sin(n):Math.cos(n))||.001,a=.75*e*(""+t).length;return Math.min(e/o,a)}Ko.id="category",Ko.defaults={ticks:{callback:Ko.prototype.getLabelForValue}};class Zo extends Ns{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return U(t)||("number"==typeof t||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:e,maxDefined:i}=this.getUserBounds();let{min:s,max:n}=this;const o=t=>s=e?s:t,a=t=>n=i?n:t;if(t){const t=Bt(s),e=Bt(n);t<0&&e<0?a(0):t>0&&e>0&&o(0)}if(s===n){let e=1;(n>=Number.MAX_SAFE_INTEGER||s<=Number.MIN_SAFE_INTEGER)&&(e=Math.abs(.05*n)),a(n+e),t||o(s-e)}this.min=s,this.max=n}getTickLimit(){const t=this.options.ticks;let e,{maxTicksLimit:i,stepSize:s}=t;return s?(e=Math.ceil(this.max/s)-Math.floor(this.min/s)+1,e>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize:${s}would result generating up to ${e}ticks.Limiting to 1000.`),e=1e3)):(e=this.computeTickLimit(),i=i||11),i&&(e=Math.min(i,e)),e}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,e=t.ticks;let i=this.getTickLimit();i=Math.max(2,i);const s=function(t,e){const i=[],{bounds:s,step:n,min:o,max:a,precision:r,count:l,maxTicks:h,maxDigits:c,includeBounds:d}=t,u=n||1,f=h-1,{min:g,max:p}=e,m=!U(o),b=!U(a),x=!U(l),_=(p-g)/(c+1);let y,v,w,M,k=Vt((p-g)/f/u)*u;if(k<1e-14&&!m&&!b)return[{value:g},{value:p}];M=Math.ceil(p/k)-Math.floor(g/k),M>f&&(k=Vt(M*k/f/u)*u),U(r)||(y=Math.pow(10,r),k=Math.ceil(k*y)/y),"ticks"===s?(v=Math.floor(g/k)*k,w=Math.ceil(p/k)*k):(v=g,w=p),m&&b&&n&&jt((a-o)/n,k/1e3)?(M=Math.round(Math.min((a-o)/k,h)),k=(a-o)/M,v=o,w=a):x?(v=m?o:v,w=b?a:w,M=l-1,k=(w-v)/M):(M=(w-v)/k,M=Ht(M,Math.round(M),k/1e3)?Math.round(M):Math.ceil(M));const S=Math.max(Xt(k),Xt(v));y=Math.pow(10,U(r)?S:r),v=Math.round(v*y)/y,w=Math.round(w*y)/y;let P=0;for(m&&(d&&v!==o?(i.push({value:o}),v<o&&P++,Ht(Math.round((v+P*k)*y)/y,o,Go(o,_,t))&&P++):v<o&&P++);P<M;++P)i.push({value:Math.round((v+P*k)*y)/y});return b&&d&&w!==a?i.length&&Ht(i[i.length-1].value,a,Go(a,_,t))?i[i.length-1].value=a:i.push({value:a}):b&&w!==a||i.push({value:w}),i}({maxTicks:i,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:!1!==e.includeBounds},this._range||this);return"ticks"===t.bounds&&$t(s,this,"value"),t.reverse?(s.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),s}configure(){const t=this.ticks;let e=this.min,i=this.max;if(super.configure(),this.options.offset&&t.length){const s=(i-e)/Math.max(t.length-1,1)/2;e-=s,i+=s}this._startValue=e,this._endValue=i,this._valueRange=i-e}getLabelForValue(t){return ni(t,this.chart.options.locale,this.options.ticks.format)}}class Jo extends Zo{determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=K(t)?t:0,this.max=K(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),e=t?this.width:this.height,i=Yt(this.options.ticks.minRotation),s=(t?Math.sin(i):Math.cos(i))||.001,n=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,n.lineHeight/s))}getPixelForValue(t){return null===t?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}function Qo(t){return 1===t/Math.pow(10,Math.floor(Ft(t)))}Jo.id="linear",Jo.defaults={ticks:{callback:Ts.formatters.numeric}};class ta extends Ns{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,e){const i=Zo.prototype.parse.apply(this,[t,e]);if(0!==i)return K(i)&&i>0?i:null;this._zero=!0}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=K(t)?Math.max(0,t):null,this.max=K(e)?Math.max(0,e):null,this.options.beginAtZero&&(this._zero=!0),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let i=this.min,s=this.max;const n=e=>i=t?i:e,o=t=>s=e?s:t,a=(t,e)=>Math.pow(10,Math.floor(Ft(t))+e);i===s&&(i<=0?(n(1),o(10)):(n(a(i,-1)),o(a(s,1)))),i<=0&&n(a(s,-1)),s<=0&&o(a(i,1)),this._zero&&this.min!==this._suggestedMin&&i===a(this.min,0)&&n(a(i,-1)),this.min=i,this.max=s}buildTicks(){const t=this.options,e=function(t,e){const i=Math.floor(Ft(e.max)),s=Math.ceil(e.max/Math.pow(10,i)),n=[];let o=G(t.min,Math.pow(10,Math.floor(Ft(e.min)))),a=Math.floor(Ft(o)),r=Math.floor(o/Math.pow(10,a)),l=a<0?Math.pow(10,Math.abs(a)):1;do{n.push({value:o,major:Qo(o)}),++r,10===r&&(r=1,++a,l=a>=0?1:l),o=Math.round(r*Math.pow(10,a)*l)/l}while(a<i||a===i&&r<s);const h=G(t.max,o);return n.push({value:h,major:Qo(o)}),n}({min:this._userMin,max:this._userMax},this);return"ticks"===t.bounds&&$t(e,this,"value"),t.reverse?(e.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),e}getLabelForValue(t){return void 0===t?"0":ni(t,this.chart.options.locale,this.options.ticks.format)}configure(){const t=this.min;super.configure(),this._startValue=Ft(t),this._valueRange=Ft(this.max)-Ft(t)}getPixelForValue(t){return void 0!==t&&0!==t||(t=this.min),null===t||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(Ft(t)-this._startValue)/this._valueRange)}getValueForPixel(t){const e=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+e*this._valueRange)}}function ea(t){const e=t.ticks;if(e.display&&t.display){const t=di(e.backdropPadding);return Z(e.font&&e.font.size,yt.font.size)+t.height}return 0}function ia(t,e,i,s,n){return t===s||t===n?{start:e-i/2,end:e+i/2}:t<s||t>n?{start:e-i,end:e}:{start:e,end:e+i}}function sa(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},i=Object.assign({},e),s=[],n=[],o=t._pointLabels.length,a=t.options.pointLabels,r=a.centerPointLabels?Ot/o:0;for(let d=0;d<o;d++){const o=a.setContext(t.getPointLabelContext(d));n[d]=o.padding;const u=t.getPointPosition(d,t.drawingArea+n[d],r),f=ui(o.font),g=(l=t.ctx,h=f,c=X(c=t._pointLabels[d])?c:[c],{w:be(l,h.string,c),h:c.length*h.lineHeight});s[d]=g;const p=Zt(t.getIndexAngle(d)+r),m=Math.round(Ut(p));na(i,e,p,ia(m,u.x,g.w,0,180),ia(m,u.y,g.h,90,270))}var l,h,c;t.setCenterPoint(e.l-i.l,i.r-e.r,e.t-i.t,i.b-e.b),t._pointLabelItems=function(t,e,i){const s=[],n=t._pointLabels.length,o=t.options,a=ea(o)/2,r=t.drawingArea,l=o.pointLabels.centerPointLabels?Ot/n:0;for(let o=0;o<n;o++){const n=t.getPointPosition(o,r+a+i[o],l),h=Math.round(Ut(Zt(n.angle+Et))),c=e[o],d=ra(n.y,c.h,h),u=oa(h),f=aa(n.x,c.w,u);s.push({x:n.x,y:d,textAlign:u,left:f,top:d,right:f+c.w,bottom:d+c.h})}return s}(t,s,n)}function na(t,e,i,s,n){const o=Math.abs(Math.sin(i)),a=Math.abs(Math.cos(i));let r=0,l=0;s.start<e.l?(r=(e.l-s.start)/o,t.l=Math.min(t.l,e.l-r)):s.end>e.r&&(r=(s.end-e.r)/o,t.r=Math.max(t.r,e.r+r)),n.start<e.t?(l=(e.t-n.start)/a,t.t=Math.min(t.t,e.t-l)):n.end>e.b&&(l=(n.end-e.b)/a,t.b=Math.max(t.b,e.b+l))}function oa(t){return 0===t||180===t?"center":t<180?"left":"right"}function aa(t,e,i){return"right"===i?t-=e:"center"===i&&(t-=e/2),t}function ra(t,e,i){return 90===i||270===i?t-=e/2:(i>270||i<90)&&(t-=e),t}function la(t,e,i,s){const{ctx:n}=t;if(i)n.arc(t.xCenter,t.yCenter,e,0,At);else{let i=t.getPointPosition(0,e);n.moveTo(i.x,i.y);for(let o=1;o<s;o++)i=t.getPointPosition(o,e),n.lineTo(i.x,i.y)}}ta.id="logarithmic",ta.defaults={ticks:{callback:Ts.formatters.logarithmic,major:{enabled:!0}}};class ha extends Zo{constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const t=this._padding=di(ea(this.options)/2),e=this.width=this.maxWidth-t.width,i=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+e/2+t.left),this.yCenter=Math.floor(this.top+i/2+t.top),this.drawingArea=Math.floor(Math.min(e,i)/2)}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!1);this.min=K(t)&&!isNaN(t)?t:0,this.max=K(e)&&!isNaN(e)?e:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/ea(this.options))}generateTickLabels(t){Zo.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map(((t,e)=>{const i=tt(this.options.pointLabels.callback,[t,e],this);return i||0===i?i:""})).filter(((t,e)=>this.chart.getDataVisibility(e)))}fit(){const t=this.options;t.display&&t.pointLabels.display?sa(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,e,i,s){this.xCenter+=Math.floor((t-e)/2),this.yCenter+=Math.floor((i-s)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,e,i,s))}getIndexAngle(t){return Zt(t*(At/(this._pointLabels.length||1))+Yt(this.options.startAngle||0))}getDistanceFromCenterForValue(t){if(U(t))return NaN;const e=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*e:(t-this.min)*e}getValueForDistanceFromCenter(t){if(U(t))return NaN;const e=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-e:this.min+e}getPointLabelContext(t){const e=this._pointLabels||[];if(t>=0&&t<e.length){const i=e[t];return function(t,e,i){return pi(t,{label:i,index:e,type:"pointLabel"})}(this.getContext(),t,i)}}getPointPosition(t,e,i=0){const s=this.getIndexAngle(t)-Et+i;return{x:Math.cos(s)*e+this.xCenter,y:Math.sin(s)*e+this.yCenter,angle:s}}getPointPositionForValue(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){const{left:e,top:i,right:s,bottom:n}=this._pointLabelItems[t];return{left:e,top:i,right:s,bottom:n}}drawBackground(){const{backgroundColor:t,grid:{circular:e}}=this.options;if(t){const i=this.ctx;i.save(),i.beginPath(),la(this,this.getDistanceFromCenterForValue(this._endValue),e,this._pointLabels.length),i.closePath(),i.fillStyle=t,i.fill(),i.restore()}}drawGrid(){const t=this.ctx,e=this.options,{angleLines:i,grid:s}=e,n=this._pointLabels.length;let o,a,r;if(e.pointLabels.display&&function(t,e){const{ctx:i,options:{pointLabels:s}}=t;for(let n=e-1;n>=0;n--){const e=s.setContext(t.getPointLabelContext(n)),o=ui(e.font),{x:a,y:r,textAlign:l,left:h,top:c,right:d,bottom:u}=t._pointLabelItems[n],{backdropColor:f}=e;if(!U(f)){const t=ci(e.borderRadius),s=di(e.backdropPadding);i.fillStyle=f;const n=h-s.left,o=c-s.top,a=d-h+s.width,r=u-c+s.height;Object.values(t).some((t=>0!==t))?(i.beginPath(),Ce(i,{x:n,y:o,w:a,h:r,radius:t}),i.fill()):i.fillRect(n,o,a,r)}Pe(i,t._pointLabels[n],a,r+o.lineHeight/2,o,{color:e.color,textAlign:l,textBaseline:"middle"})}}(this,n),s.display&&this.ticks.forEach(((t,e)=>{if(0!==e){a=this.getDistanceFromCenterForValue(t.value);!function(t,e,i,s){const n=t.ctx,o=e.circular,{color:a,lineWidth:r}=e;!o&&!s||!a||!r||i<0||(n.save(),n.strokeStyle=a,n.lineWidth=r,n.setLineDash(e.borderDash),n.lineDashOffset=e.borderDashOffset,n.beginPath(),la(t,i,o,s),n.closePath(),n.stroke(),n.restore())}(this,s.setContext(this.getContext(e-1)),a,n)}})),i.display){for(t.save(),o=n-1;o>=0;o--){const s=i.setContext(this.getPointLabelContext(o)),{color:n,lineWidth:l}=s;l&&n&&(t.lineWidth=l,t.strokeStyle=n,t.setLineDash(s.borderDash),t.lineDashOffset=s.borderDashOffset,a=this.getDistanceFromCenterForValue(e.ticks.reverse?this.min:this.max),r=this.getPointPosition(o,a),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(r.x,r.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){const t=this.ctx,e=this.options,i=e.ticks;if(!i.display)return;const s=this.getIndexAngle(0);let n,o;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(s),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach(((s,a)=>{if(0===a&&!e.reverse)return;const r=i.setContext(this.getContext(a)),l=ui(r.font);if(n=this.getDistanceFromCenterForValue(this.ticks[a].value),r.showLabelBackdrop){t.font=l.string,o=t.measureText(s.label).width,t.fillStyle=r.backdropColor;const e=di(r.backdropPadding);t.fillRect(-o/2-e.left,-n-l.size/2-e.top,o+e.width,l.size+e.height)}Pe(t,s.label,0,-n,l,{color:r.color})})),t.restore()}drawTitle(){}}ha.id="radialLinear",ha.defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Ts.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:t=>t,padding:5,centerPointLabels:!1}},ha.defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"},ha.descriptors={angleLines:{_fallback:"grid"}};const ca={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},da=Object.keys(ca);function ua(t,e){return t-e}function fa(t,e){if(U(e))return null;const i=t._adapter,{parser:s,round:n,isoWeekday:o}=t._parseOpts;let a=e;return"function"==typeof s&&(a=s(a)),K(a)||(a="string"==typeof s?i.parse(a,s):i.parse(a)),null===a?null:(n&&(a="week"!==n||!Wt(o)&&!0!==o?i.startOf(a,n):i.startOf(a,"isoWeek",o)),+a)}function ga(t,e,i,s){const n=da.length;for(let o=da.indexOf(t);o<n-1;++o){const t=ca[da[o]],n=t.steps?t.steps:Number.MAX_SAFE_INTEGER;if(t.common&&Math.ceil((i-e)/(n*t.size))<=s)return da[o]}return da[n-1]}function pa(t,e,i){if(i){if(i.length){const{lo:s,hi:n}=vt(i,e);t[i[s]>=e?i[s]:i[n]]=!0}}else t[e]=!0}function ma(t,e,i){const s=[],n={},o=e.length;let a,r;for(a=0;a<o;++a)r=e[a],n[r]=a,s.push({value:r,major:!1});return 0!==o&&i?function(t,e,i,s){const n=t._adapter,o=+n.startOf(e[0].value,s),a=e[e.length-1].value;let r,l;for(r=o;r<=a;r=+n.add(r,1,s))l=i[r],l>=0&&(e[l].major=!0);return e}(t,s,n,i):s}class ba extends Ns{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,e){const i=t.time||(t.time={}),s=this._adapter=new xn._date(t.adapters.date);rt(i.displayFormats,s.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(t),this._normalized=e.normalized}parse(t,e){return void 0===t?null:fa(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,e=this._adapter,i=t.time.unit||"day";let{min:s,max:n,minDefined:o,maxDefined:a}=this.getUserBounds();function r(t){o||isNaN(t.min)||(s=Math.min(s,t.min)),a||isNaN(t.max)||(n=Math.max(n,t.max))}o&&a||(r(this._getLabelBounds()),"ticks"===t.bounds&&"labels"===t.ticks.source||r(this.getMinMax(!1))),s=K(s)&&!isNaN(s)?s:+e.startOf(Date.now(),i),n=K(n)&&!isNaN(n)?n:+e.endOf(Date.now(),i)+1,this.min=Math.min(s,n-1),this.max=Math.max(s+1,n)}_getLabelBounds(){const t=this.getLabelTimestamps();let e=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return t.length&&(e=t[0],i=t[t.length-1]),{min:e,max:i}}buildTicks(){const t=this.options,e=t.time,i=t.ticks,s="labels"===i.source?this.getLabelTimestamps():this._generate();"ticks"===t.bounds&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const n=this.min,o=kt(s,n,this.max);return this._unit=e.unit||(i.autoSkip?ga(e.minUnit,this.min,this.max,this._getLabelCapacity(n)):function(t,e,i,s,n){for(let o=da.length-1;o>=da.indexOf(i);o--){const i=da[o];if(ca[i].common&&t._adapter.diff(n,s,i)>=e-1)return i}return da[i?da.indexOf(i):0]}(this,o.length,e.minUnit,this.min,this.max)),this._majorUnit=i.major.enabled&&"year"!==this._unit?function(t){for(let e=da.indexOf(t)+1,i=da.length;e<i;++e)if(ca[da[e]].common)return da[e]}(this._unit):void 0,this.initOffsets(s),t.reverse&&o.reverse(),ma(this,o,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map((t=>+t.value)))}initOffsets(t){let e,i,s=0,n=0;this.options.offset&&t.length&&(e=this.getDecimalForValue(t[0]),s=1===t.length?1-e:(this.getDecimalForValue(t[1])-e)/2,i=this.getDecimalForValue(t[t.length-1]),n=1===t.length?i:(i-this.getDecimalForValue(t[t.length-2]))/2);const o=t.length<3?.5:.25;s=Qt(s,0,o),n=Qt(n,0,o),this._offsets={start:s,end:n,factor:1/(s+1+n)}}_generate(){const t=this._adapter,e=this.min,i=this.max,s=this.options,n=s.time,o=n.unit||ga(n.minUnit,e,i,this._getLabelCapacity(e)),a=Z(n.stepSize,1),r="week"===o&&n.isoWeekday,l=Wt(r)||!0===r,h={};let c,d,u=e;if(l&&(u=+t.startOf(u,"isoWeek",r)),u=+t.startOf(u,l?"day":o),t.diff(i,e,o)>1e5*a)throw new Error(e+" and "+i+" are too far apart with stepSize of "+a+" "+o);const f="data"===s.ticks.source&&this.getDataTimestamps();for(c=u,d=0;c<i;c=+t.add(c,a,o),d++)pa(h,c,f);return c!==i&&"ticks"!==s.bounds&&1!==d||pa(h,c,f),Object.keys(h).sort(((t,e)=>t-e)).map((t=>+t))}getLabelForValue(t){const e=this._adapter,i=this.options.time;return i.tooltipFormat?e.format(t,i.tooltipFormat):e.format(t,i.displayFormats.datetime)}_tickFormatFunction(t,e,i,s){const n=this.options,o=n.time.displayFormats,a=this._unit,r=this._majorUnit,l=a&&o[a],h=r&&o[r],c=i[e],d=r&&h&&c&&c.major,u=this._adapter.format(t,s||(d?h:l)),f=n.ticks.callback;return f?tt(f,[u,e,i],this):u}generateTickLabels(t){let e,i,s;for(e=0,i=t.length;e<i;++e)s=t[e],s.label=this._tickFormatFunction(s.value,e,t)}getDecimalForValue(t){return null===t?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const e=this._offsets,i=this.getDecimalForValue(t);return this.getPixelForDecimal((e.start+i)*e.factor)}getValueForPixel(t){const e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return this.min+i*(this.max-this.min)}_getLabelSize(t){const e=this.options.ticks,i=this.ctx.measureText(t).width,s=Yt(this.isHorizontal()?e.maxRotation:e.minRotation),n=Math.cos(s),o=Math.sin(s),a=this._resolveTickFontOptions(0).size;return{w:i*n+a*o,h:i*o+a*n}}_getLabelCapacity(t){const e=this.options.time,i=e.displayFormats,s=i[e.unit]||i.millisecond,n=this._tickFormatFunction(t,0,ma(this,[t],this._majorUnit),s),o=this._getLabelSize(n),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let t,e,i=this._cache.data||[];if(i.length)return i;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(t=0,e=s.length;t<e;++t)i=i.concat(s[t].controller.getAllParsedValues(this));return this._cache.data=this.normalize(i)}getLabelTimestamps(){const t=this._cache.labels||[];let e,i;if(t.length)return t;const s=this.getLabels();for(e=0,i=s.length;e<i;++e)t.push(fa(this,s[e]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return Ct(t.sort(ua))}}function xa(t,e,i){let s,n,o,a,r=0,l=t.length-1;i?(e>=t[r].pos&&e<=t[l].pos&&({lo:r,hi:l}=wt(t,"pos",e)),({pos:s,time:o}=t[r]),({pos:n,time:a}=t[l])):(e>=t[r].time&&e<=t[l].time&&({lo:r,hi:l}=wt(t,"time",e)),({time:s,pos:o}=t[r]),({time:n,pos:a}=t[l]));const h=n-s;return h?o+(a-o)*(e-s)/h:o}ba.id="time",ba.defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",major:{enabled:!1}}};class _a extends ba{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=xa(e,this.min),this._tableRange=xa(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:e,max:i}=this,s=[],n=[];let o,a,r,l,h;for(o=0,a=t.length;o<a;++o)l=t[o],l>=e&&l<=i&&s.push(l);if(s.length<2)return[{time:e,pos:0},{time:i,pos:1}];for(o=0,a=s.length;o<a;++o)h=s[o+1],r=s[o-1],l=s[o],Math.round((h+r)/2)!==l&&n.push({time:l,pos:o/(a-1)});return n}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const e=this.getDataTimestamps(),i=this.getLabelTimestamps();return t=e.length&&i.length?this.normalize(e.concat(i)):e.length?e:i,t=this._cache.all=t,t}getDecimalForValue(t){return(xa(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return xa(this._table,i*this._tableRange+this._minPos,!0)}}_a.id="timeseries",_a.defaults=ba.defaults;var ya=Object.freeze({__proto__:null,CategoryScale:Ko,LinearScale:Jo,LogarithmicScale:ta,RadialLinearScale:ha,TimeScale:ba,TimeSeriesScale:_a});return fn.register(In,ya,ao,Xo),fn.helpers={...Di},fn._adapters=xn,fn.Animation=gs,fn.Animations=ms,fn.animator=a,fn.controllers=Hs.controllers.items,fn.DatasetController=Cs,fn.Element=Os,fn.elements=ao,fn.Interaction=Ei,fn.layouts=Xi,fn.platforms=ds,fn.Scale=Ns,fn.Ticks=Ts,Object.assign(fn,In,ya,ao,Xo,ds),fn.Chart=fn,"undefined"!=typeof window&&(window.Chart=fn),fn}));;function diagnosticsChart(place,display){const data={datasets:[{data:display,backgroundColor:['rgb(229,229,229)','rgb(30, 136, 229)',],borderWidth:0,}]};const config={type:'doughnut',data:data,options:{events:[],cutout:30,}};const myChart=new Chart(document.getElementById(place),config);};;(function(define){define(function(){var freeze,reduceArray,slice,undef;when.defer=defer;when.reject=reject;when.isPromise=isPromise;when.all=all;when.some=some;when.any=any;when.map=map;when.reduce=reduce;when.chain=chain;freeze=Object.freeze||function(o){return o;};function Promise(){}
Promise.prototype=freeze({always:function(alwaysback,progback){return this.then(alwaysback,alwaysback,progback);},otherwise:function(errback){return this.then(undef,errback);}});function resolved(value){var p=new Promise();p.then=function(callback){var nextValue;try{if(callback)nextValue=callback(value);return promise(nextValue===undef?value:nextValue);}catch(e){return rejected(e);}};return freeze(p);}
function rejected(reason){var p=new Promise();p.then=function(callback,errback){var nextValue;try{if(errback){nextValue=errback(reason);return promise(nextValue===undef?reason:nextValue)}
return rejected(reason);}catch(e){return rejected(e);}};return freeze(p);}
function reject(promiseOrValue){return when(promiseOrValue,function(value){return rejected(value);});}
function defer(){var deferred,promise,listeners,progressHandlers,_then,_progress,complete;listeners=[];progressHandlers=[];_then=function unresolvedThen(callback,errback,progback){var deferred=defer();listeners.push(function(promise){promise.then(callback,errback).then(deferred.resolve,deferred.reject,deferred.progress);});progback&&progressHandlers.push(progback);return deferred.promise;};function then(callback,errback,progback){return _then(callback,errback,progback);}
function resolve(val){complete(resolved(val));}
function reject(err){complete(rejected(err));}
_progress=function(update){var progress,i=0;while(progress=progressHandlers[i++])progress(update);};function progress(update){_progress(update);}
complete=function(completed){var listener,i=0;_then=completed.then;complete=_progress=function alreadyCompleted(){throw new Error("already completed");};progressHandlers=undef;while(listener=listeners[i++]){listener(completed);}
listeners=[];};deferred={};promise=new Promise();promise.then=deferred.then=then;deferred.promise=freeze(promise);deferred.resolver=freeze({resolve:(deferred.resolve=resolve),reject:(deferred.reject=reject),progress:(deferred.progress=progress)});return deferred;}
function isPromise(promiseOrValue){return promiseOrValue&&typeof promiseOrValue.then==='function';}
function when(promiseOrValue,callback,errback,progressHandler){var trustedPromise=promise(promiseOrValue);return trustedPromise.then(callback,errback,progressHandler);}
function promise(promiseOrValue){var promise,deferred;if(promiseOrValue instanceof Promise){promise=promiseOrValue;}else{deferred=defer();if(isPromise(promiseOrValue)){promiseOrValue.then(deferred.resolve,deferred.reject,deferred.progress);promise=deferred.promise;}else{deferred.resolve(promiseOrValue);promise=deferred.promise;}}
return promise;}
function some(promisesOrValues,howMany,callback,errback,progressHandler){checkCallbacks(2,arguments);return when(promisesOrValues,function(promisesOrValues){var toResolve,results,ret,deferred,resolver,rejecter,handleProgress,len,i;len=promisesOrValues.length>>>0;toResolve=Math.max(0,Math.min(howMany,len));results=[];deferred=defer();ret=when(deferred,callback,errback,progressHandler);function resolve(val){resolver(val);}
function reject(err){rejecter(err);}
function progress(update){handleProgress(update);}
function complete(){resolver=rejecter=handleProgress=noop;}
if(!toResolve){deferred.resolve(results);}else{resolver=function(val){results.push(val);if(!--toResolve){complete();deferred.resolve(results);}};rejecter=function(err){complete();deferred.reject(err);};handleProgress=deferred.progress;for(i=0;i<len;++i){if(i in promisesOrValues){when(promisesOrValues[i],resolve,reject,progress);}}}
return ret;});}
function all(promisesOrValues,callback,errback,progressHandler){checkCallbacks(1,arguments);return when(promisesOrValues,function(promisesOrValues){return _reduce(promisesOrValues,reduceIntoArray,[]);}).then(callback,errback,progressHandler);}
function reduceIntoArray(current,val,i){current[i]=val;return current;}
function any(promisesOrValues,callback,errback,progressHandler){function unwrapSingleResult(val){return callback?callback(val[0]):val[0];}
return some(promisesOrValues,1,unwrapSingleResult,errback,progressHandler);}
function map(promise,mapFunc){return when(promise,function(array){return _map(array,mapFunc);});}
function _map(promisesOrValues,mapFunc){var results,len,i;len=promisesOrValues.length>>>0;results=new Array(len);for(i=0;i<len;i++){if(i in promisesOrValues)
results[i]=when(promisesOrValues[i],mapFunc);}
return _reduce(results,reduceIntoArray,results);}
function reduce(promise,reduceFunc,initialValue){var args=slice.call(arguments,1);return when(promise,function(array){return _reduce.apply(undef,[array].concat(args));});}
function _reduce(promisesOrValues,reduceFunc,initialValue){var total,args;total=promisesOrValues.length;args=[function(current,val,i){return when(current,function(c){return when(val,function(value){return reduceFunc(c,value,i,total);});});}];if(arguments.length>2)args.push(initialValue);return reduceArray.apply(promisesOrValues,args);}
function chain(promiseOrValue,resolver,resolveValue){var useResolveValue=arguments.length>2;return when(promiseOrValue,function(val){if(useResolveValue)val=resolveValue;resolver.resolve(val);return val;},function(e){resolver.reject(e);return rejected(e);},resolver.progress);}
function checkCallbacks(start,arrayOfCallbacks){var arg,i=arrayOfCallbacks.length;while(i>start){arg=arrayOfCallbacks[--i];if(arg!=null&&typeof arg!='function')throw new Error('callback is not a function');}}
function noop(){}
slice=[].slice;reduceArray=[].reduce||function(reduceFunc){var arr,args,reduced,len,i;i=0;arr=Object(this);len=arr.length>>>0;args=arguments;if(args.length<=1){for(;;){if(i in arr){reduced=arr[i++];break;}
if(++i>=len){throw new TypeError();}}}else{reduced=args[1];}
for(;i<len;++i){if(i in arr)
reduced=reduceFunc(reduced,arr[i],i,arr);}
return reduced;};return when;});})(typeof define=='function'?define:function(factory){typeof module!='undefined'?(module.exports=factory()):(jQuery.mapster_when=factory());});(function($){$.fn.mapster=function(method){var m=$.mapster.impl;if($.isFunction(m[method])){return m[method].apply(this,Array.prototype.slice.call(arguments,1));}else if(typeof method==='object'||!method){return m.bind.apply(this,arguments);}else{$.error('Method '+method+' does not exist on jQuery.mapster');}};$.mapster={version:"1.2.8",render_defaults:{isSelectable:true,isDeselectable:true,fade:false,fadeDuration:150,fill:true,fillColor:'000000',fillColorMask:'FFFFFF',fillOpacity:0.7,highlight:true,stroke:false,strokeColor:'ff0000',strokeOpacity:1,strokeWidth:1,includeKeys:'',altImage:null,altImageId:null,altImages:{}},defaults:{clickNavigate:false,wrapClass:null,wrapCss:null,onGetList:null,sortList:false,listenToList:false,mapKey:'',mapValue:'',singleSelect:false,listKey:'value',listSelectedAttribute:'selected',listSelectedClass:null,onClick:null,onMouseover:null,onMouseout:null,mouseoutDelay:0,onStateChange:null,boundList:null,onConfigured:null,configTimeout:30000,noHrefIsMask:true,scaleMap:true,safeLoad:false,areas:[]},shared_defaults:{render_highlight:{fade:true},render_select:{fade:false},staticState:null,selected:null},area_defaults:{includeKeys:'',isMask:false},canvas_style:{position:'absolute',left:0,top:0,padding:0,border:0},hasCanvas:null,isTouch:null,windowLoaded:false,map_cache:[],hooks:{},addHook:function(name,callback){this.hooks[name]=(this.hooks[name]||[]).push(callback);},callHooks:function(name,context){$.each(this.hooks[name]||[],function(i,e){e.apply(context);});},utils:{when:$.mapster_when,defer:$.mapster_when.defer,subclass:function(BaseClass,constr){var Subclass=function(){var me=this,args=Array.prototype.slice.call(arguments,0);me.base=BaseClass.prototype;me.base.init=function(){BaseClass.prototype.constructor.apply(me,args);};constr.apply(me,args);};Subclass.prototype=new BaseClass();Subclass.prototype.constructor=Subclass;return Subclass;},asArray:function(obj){return obj.constructor===Array?obj:this.split(obj);},split:function(text,cb){var i,el,arr=text.split(',');for(i=0;i<arr.length;i++){el=$.trim(arr[i]);if(el===''){arr.splice(i,1);}else{arr[i]=cb?cb(el):el;}}
return arr;},updateProps:function(_target,_template){var onlyProps,target=_target||{},template=$.isEmptyObject(target)?_template:_target;onlyProps=[];$.each(template,function(prop){onlyProps.push(prop);});$.each(Array.prototype.slice.call(arguments,1),function(i,src){$.each(src||{},function(prop){if(!onlyProps||$.inArray(prop,onlyProps)>=0){var p=src[prop];if($.isPlainObject(p)){target[prop]=$.extend(target[prop]||{},p);}else if(p&&p.constructor===Array){target[prop]=p.slice(0);}else if(typeof p!=='undefined'){target[prop]=src[prop];}}});});return target;},isElement:function(o){return(typeof HTMLElement==="object"?o instanceof HTMLElement:o&&typeof o==="object"&&o.nodeType===1&&typeof o.nodeName==="string");},indexOfProp:function(obj,prop,val){var result=obj.constructor===Array?-1:null;$.each(obj,function(i,e){if(e&&(prop?e[prop]:e)===val){result=i;return false;}});return result;},boolOrDefault:function(obj,def){return this.isBool(obj)?obj:def||false;},isBool:function(obj){return typeof obj==="boolean";},isUndef:function(obj){return typeof obj==="undefined";},ifFunction:function(obj,that,args){if($.isFunction(obj)){obj.call(that,args);}},size:function(image,raw){var u=$.mapster.utils;return{width:raw?(image.width||image.naturalWidth):u.imgWidth(image,true),height:raw?(image.height||image.naturalHeight):u.imgHeight(image,true),complete:function(){return!!this.height&&!!this.width;}};},setOpacity:function(el,opacity){el.style.opacity=opacity;},fader:(function(){var elements={},lastKey=0,fade_func=function(el,op,endOp,duration){var index,cbIntervals=duration/15,obj,u=$.mapster.utils;if(typeof el==='number'){obj=elements[el];if(!obj){return;}}else{index=u.indexOfProp(elements,null,el);if(index){delete elements[index];}
elements[++lastKey]=obj=el;el=lastKey;}
endOp=endOp||1;op=(op+(endOp/cbIntervals)>endOp-0.01)?endOp:op+(endOp/cbIntervals);u.setOpacity(obj,op);if(op<endOp){setTimeout(function(){fade_func(el,op,endOp,duration);},15);}};return fade_func;}())},getBoundList:function(opts,key_list){if(!opts.boundList){return null;}
var index,key,result=$(),list=$.mapster.utils.split(key_list);opts.boundList.each(function(i,e){for(index=0;index<list.length;index++){key=list[index];if($(e).is('['+opts.listKey+'="'+key+'"]')){result=result.add(e);}}});return result;},setBoundListProperties:function(opts,target,selected){target.each(function(i,e){if(opts.listSelectedClass){if(selected){$(e).addClass(opts.listSelectedClass);}else{$(e).removeClass(opts.listSelectedClass);}}
if(opts.listSelectedAttribute){$(e).attr(opts.listSelectedAttribute,selected);}});},getMapDataIndex:function(obj){var img,id;switch(obj.tagName&&obj.tagName.toLowerCase()){case'area':id=$(obj).parent().attr('name');img=$("img[usemap='#"+id+"']")[0];break;case'img':img=obj;break;}
return img?this.utils.indexOfProp(this.map_cache,'image',img):-1;},getMapData:function(obj){var index=this.getMapDataIndex(obj.length?obj[0]:obj);if(index>=0){return index>=0?this.map_cache[index]:null;}},queueCommand:function(map_data,that,command,args){if(!map_data){return false;}
if(!map_data.complete||map_data.currentAction){map_data.commands.push({that:that,command:command,args:args});return true;}
return false;},unload:function(){this.impl.unload();this.utils=null;this.impl=null;$.fn.mapster=null;$.mapster=null;$('*').unbind();}};var m=$.mapster,u=m.utils,ap=Array.prototype;$.each(["width","height"],function(i,e){var capProp=e.substr(0,1).toUpperCase()+e.substr(1);u["img"+capProp]=function(img,jqwidth){return(jqwidth?$(img)[e]():0)||img[e]||img["natural"+capProp]||img["client"+capProp]||img["offset"+capProp];};});m.Method=function(that,func_map,func_area,opts){var me=this;me.name=opts.name;me.output=that;me.input=that;me.first=opts.first||false;me.args=opts.args?ap.slice.call(opts.args,0):[];me.key=opts.key;me.func_map=func_map;me.func_area=func_area;me.name=opts.name;me.allowAsync=opts.allowAsync||false;};m.Method.prototype.go=function(){var i,data,ar,len,result,src=this.input,area_list=[],me=this;len=src.length;for(i=0;i<len;i++){data=$.mapster.getMapData(src[i]);if(data){if(!me.allowAsync&&m.queueCommand(data,me.input,me.name,me.args)){if(this.first){result='';}
continue;}
ar=data.getData(src[i].nodeName==='AREA'?src[i]:this.key);if(ar){if($.inArray(ar,area_list)<0){area_list.push(ar);}}else{result=this.func_map.apply(data,me.args);}
if(this.first||typeof result!=='undefined'){break;}}}
$(area_list).each(function(i,e){result=me.func_area.apply(e,me.args);});if(typeof result!=='undefined'){return result;}else{return this.output;}};$.mapster.impl=(function(){var me={},removeMap,addMap;addMap=function(map_data){return m.map_cache.push(map_data)-1;};removeMap=function(map_data){m.map_cache.splice(map_data.index,1);for(var i=m.map_cache.length-1;i>=this.index;i--){m.map_cache[i].index--;}};function merge_areas(map_data,areas){var ar,index,map_areas=map_data.options.areas;if(areas){$.each(areas,function(i,e){if(!e||!e.key){return;}
index=u.indexOfProp(map_areas,"key",e.key);if(index>=0){$.extend(map_areas[index],e);}
else{map_areas.push(e);}
ar=map_data.getDataForKey(e.key);if(ar){$.extend(ar.options,e);}});}}
function merge_options(map_data,options){var temp_opts=u.updateProps({},options);delete temp_opts.areas;u.updateProps(map_data.options,temp_opts);merge_areas(map_data,options.areas);u.updateProps(map_data.area_options,map_data.options);}
me.get=function(key){var md=m.getMapData(this);if(!(md&&md.complete)){throw("Can't access data until binding complete.");}
return(new m.Method(this,function(){return this.getSelected();},function(){return this.isSelected();},{name:'get',args:arguments,key:key,first:true,allowAsync:true,defaultReturn:''})).go();};me.data=function(key){return(new m.Method(this,null,function(){return this;},{name:'data',args:arguments,key:key})).go();};me.highlight=function(key){return(new m.Method(this,function(){if(key===false){this.ensureNoHighlight();}else{var id=this.highlightId;return id>=0?this.data[id].key:null;}},function(){this.highlight();},{name:'highlight',args:arguments,key:key,first:true})).go();};me.keys=function(key,all){var keyList=[],md=m.getMapData(this);if(!(md&&md.complete)){throw("Can't access data until binding complete.");}
function addUniqueKeys(ad){var areas,keys=[];if(!all){keys.push(ad.key);}else{areas=ad.areas();$.each(areas,function(i,e){keys=keys.concat(e.keys);});}
$.each(keys,function(i,e){if($.inArray(e,keyList)<0){keyList.push(e);}});}
if(!(md&&md.complete)){return'';}
if(typeof key==='string'){if(all){addUniqueKeys(md.getDataForKey(key));}else{keyList=[md.getKeysForGroup(key)];}}else{all=key;this.each(function(i,e){if(e.nodeName==='AREA'){addUniqueKeys(md.getDataForArea(e));}});}
return keyList.join(',');};me.select=function(){me.set.call(this,true);};me.deselect=function(){me.set.call(this,false);};me.set=function(selected,key,options){var lastMap,map_data,opts=options,key_list,area_list;function setSelection(ar){if(ar){switch(selected){case true:ar.select(opts);break;case false:ar.deselect(true);break;default:ar.toggle(opts);break;}}}
function addArea(ar){if(ar&&$.inArray(ar,area_list)<0){area_list.push(ar);key_list+=(key_list===''?'':',')+ar.key;}}
function finishSetForMap(map_data){$.each(area_list,function(i,el){setSelection(el);});if(!selected){map_data.removeSelectionFinish();}
if(map_data.options.boundList){m.setBoundListProperties(map_data.options,m.getBoundList(map_data.options,key_list),selected);}}
this.filter('img,area').each(function(i,e){var keys;map_data=m.getMapData(e);if(map_data!==lastMap){if(lastMap){finishSetForMap(lastMap);}
area_list=[];key_list='';}
if(map_data){keys='';if(e.nodeName.toUpperCase()==='IMG'){if(!m.queueCommand(map_data,$(e),'set',[selected,key,opts])){if(key instanceof Array){if(key.length){keys=key.join(",");}}
else{keys=key;}
if(keys){$.each(u.split(keys),function(i,key){addArea(map_data.getDataForKey(key.toString()));lastMap=map_data;});}}}else{opts=key;if(!m.queueCommand(map_data,$(e),'set',[selected,opts])){addArea(map_data.getDataForArea(e));lastMap=map_data;}}}});if(map_data){finishSetForMap(map_data);}
return this;};me.unbind=function(preserveState){return(new m.Method(this,function(){this.clearEvents();this.clearMapData(preserveState);removeMap(this);},null,{name:'unbind',args:arguments})).go();};me.rebind=function(options){return(new m.Method(this,function(){var me=this;me.complete=false;me.configureOptions(options);me.bindImages().then(function(){me.buildDataset(true);me.complete=true;});},null,{name:'rebind',args:arguments})).go();};me.get_options=function(key,effective){var eff=u.isBool(key)?key:effective;return(new m.Method(this,function(){var opts=$.extend({},this.options);if(eff){opts.render_select=u.updateProps({},m.render_defaults,opts,opts.render_select);opts.render_highlight=u.updateProps({},m.render_defaults,opts,opts.render_highlight);}
return opts;},function(){return eff?this.effectiveOptions():this.options;},{name:'get_options',args:arguments,first:true,allowAsync:true,key:key})).go();};me.set_options=function(options){return(new m.Method(this,function(){merge_options(this,options);},null,{name:'set_options',args:arguments})).go();};me.unload=function(){var i;for(i=m.map_cache.length-1;i>=0;i--){if(m.map_cache[i]){me.unbind.call($(m.map_cache[i].image));}}
me.graphics=null;};me.snapshot=function(){return(new m.Method(this,function(){$.each(this.data,function(i,e){e.selected=false;});this.base_canvas=this.graphics.createVisibleCanvas(this);$(this.image).before(this.base_canvas);},null,{name:'snapshot'})).go();};me.state=function(){var md,result=null;$(this).each(function(i,e){if(e.nodeName==='IMG'){md=m.getMapData(e);if(md){result=md.state();}
return false;}});return result;};me.bind=function(options){return this.each(function(i,e){var img,map,usemap,md;img=$(e);md=m.getMapData(e);if(md){me.unbind.apply(img);if(!md.complete){img.bind();return true;}
md=null;}
usemap=this.getAttribute('usemap');map=usemap&&$('map[name="'+usemap.substr(1)+'"]');if(!(img.is('img')&&usemap&&map.size()>0)){return true;}
img.css('border',0);if(!md){md=new m.MapData(this,options);md.index=addMap(md);md.map=map;md.bindImages().then(function(){md.initialize();});}});};me.init=function(useCanvas){var style,shapes;m.hasCanvas=(document.namespaces&&document.namespaces.g_vml_)?false:$('<canvas></canvas>')[0].getContext?true:false;m.isTouch='ontouchstart'in document.documentElement;if(!(m.hasCanvas||document.namespaces)){$.fn.mapster=function(){return this;};return;}
$.extend(m.defaults,m.render_defaults,m.shared_defaults);$.extend(m.area_defaults,m.render_defaults,m.shared_defaults);if(u.isBool(useCanvas)){m.hasCanvas=useCanvas;}
if($.browser.msie&&!m.hasCanvas&&!document.namespaces.v){document.namespaces.add("v","urn:schemas-microsoft-com:vml");style=document.createStyleSheet();shapes=['shape','rect','oval','circ','fill','stroke','imagedata','group','textbox'];$.each(shapes,function(i,el){style.addRule('v\\:'+el,"behavior: url(#default#VML); antialias:true");});}};me.test=function(obj){return eval(obj);};return me;}());$.mapster.impl.init();}(jQuery));(function($){var p,m=$.mapster,u=m.utils;function addShapeGroupImpl(graphics,areaData,options){var me=graphics,md=me.map_data,isMask=options.isMask;$.each(areaData.areas(),function(i,e){options.isMask=isMask||(e.nohref&&md.options.noHrefIsMask);me.addShape(e,options);});options.isMask=isMask;}
m.Graphics=function(map_data){var me=this;me.active=false;me.canvas=null;me.width=0;me.height=0;me.shapes=[];me.masks=[];me.map_data=map_data;};p=m.Graphics.prototype={constructor:m.Graphics,begin:function(canvas,elementName){var c=$(canvas);this.elementName=elementName;this.canvas=canvas;this.width=c.width();this.height=c.height();this.shapes=[];this.masks=[];this.active=true;},addShape:function(mapArea,options){var addto=options.isMask?this.masks:this.shapes;addto.push({mapArea:mapArea,options:options});},createVisibleCanvas:function(mapData){return $(this.createCanvasFor(mapData)).addClass('mapster_el').css(m.canvas_style)[0];},addShapeGroup:function(areaData,mode,options){var me=this,list,name,canvas,map_data=this.map_data,opts=areaData.effectiveRenderOptions(mode);if(options){$.extend(opts,options);}
if(mode==='select'){name="static_"+areaData.areaId.toString();canvas=map_data.base_canvas;}else{canvas=map_data.overlay_canvas;}
me.begin(canvas,name);if(opts.includeKeys){list=u.split(opts.includeKeys);$.each(list,function(i,e){var areaData=map_data.getDataForKey(e.toString());addShapeGroupImpl(me,areaData,areaData.effectiveRenderOptions(mode));});}
addShapeGroupImpl(me,areaData,opts);me.render();if(opts.fade){u.fader(m.hasCanvas?canvas:$(canvas).find('._fill').not('.mapster_mask'),0,m.hasCanvas?1:opts.fillOpacity,opts.fadeDuration);}}};if(m.hasCanvas){p.hex_to_decimal=function(hex){return Math.max(0,Math.min(parseInt(hex,16),255));};p.css3color=function(color,opacity){return'rgba('+this.hex_to_decimal(color.substr(0,2))+','
+this.hex_to_decimal(color.substr(2,2))+','
+this.hex_to_decimal(color.substr(4,2))+','+opacity+')';};p.renderShape=function(context,mapArea,offset){var i,c=mapArea.coords(null,offset);switch(mapArea.shape){case'rect':context.rect(c[0],c[1],c[2]-c[0],c[3]-c[1]);break;case'poly':context.moveTo(c[0],c[1]);for(i=2;i<mapArea.length;i+=2){context.lineTo(c[i],c[i+1]);}
context.lineTo(c[0],c[1]);break;case'circ':case'circle':context.arc(c[0],c[1],c[2],0,Math.PI*2,false);break;}};p.addAltImage=function(context,image,mapArea,options){context.beginPath();this.renderShape(context,mapArea);context.closePath();context.clip();context.globalAlpha=options.altImageOpacity||options.fillOpacity;context.drawImage(image,0,0,mapArea.owner.scaleInfo.width,mapArea.owner.scaleInfo.height);};p.render=function(){var maskCanvas,maskContext,me=this,md=me.map_data,hasMasks=me.masks.length,shapeCanvas=me.createCanvasFor(md),shapeContext=shapeCanvas.getContext('2d'),context=me.canvas.getContext('2d');if(hasMasks){maskCanvas=me.createCanvasFor(md);maskContext=maskCanvas.getContext('2d');maskContext.clearRect(0,0,maskCanvas.width,maskCanvas.height);$.each(me.masks,function(i,e){maskContext.save();maskContext.beginPath();me.renderShape(maskContext,e.mapArea);maskContext.closePath();maskContext.clip();maskContext.lineWidth=0;maskContext.fillStyle='#000';maskContext.fill();maskContext.restore();});}
$.each(me.shapes,function(i,s){shapeContext.save();if(s.options.fill){if(s.options.altImageId){me.addAltImage(shapeContext,md.images[s.options.altImageId],s.mapArea,s.options);}else{shapeContext.beginPath();me.renderShape(shapeContext,s.mapArea);shapeContext.closePath();shapeContext.fillStyle=me.css3color(s.options.fillColor,s.options.fillOpacity);shapeContext.fill();}}
shapeContext.restore();});$.each(me.shapes.concat(me.masks),function(i,s){var offset=s.options.strokeWidth===1?0.5:0;if(s.options.stroke){shapeContext.save();shapeContext.strokeStyle=me.css3color(s.options.strokeColor,s.options.strokeOpacity);shapeContext.lineWidth=s.options.strokeWidth;shapeContext.beginPath();me.renderShape(shapeContext,s.mapArea,offset);shapeContext.closePath();shapeContext.stroke();shapeContext.restore();}});if(hasMasks){maskContext.globalCompositeOperation="source-out";maskContext.drawImage(shapeCanvas,0,0);context.drawImage(maskCanvas,0,0);}else{context.drawImage(shapeCanvas,0,0);}
me.active=false;return me.canvas;};p.createCanvasFor=function(md){return $('<canvas width="'+md.scaleInfo.width+'" height="'+md.scaleInfo.height+'"></canvas>')[0];};p.clearHighlight=function(){var c=this.map_data.overlay_canvas;c.getContext('2d').clearRect(0,0,c.width,c.height);};p.removeSelections=function(){};p.refreshSelections=function(){var canvas_temp,map_data=this.map_data;canvas_temp=map_data.base_canvas;map_data.base_canvas=this.createVisibleCanvas(map_data);$(map_data.base_canvas).hide();$(canvas_temp).before(map_data.base_canvas);map_data.redrawSelections();$(map_data.base_canvas).show();$(canvas_temp).remove();};}else{u.setOpacity=function(el,opacity){$(el).each(function(i,e){if(typeof e.opacity!=='undefined'){e.opacity=opacity;}else{$(e).css("opacity",opacity);}});};p.renderShape=function(mapArea,options,cssclass){var me=this,fill,stroke,e,t_fill,el_name,el_class,template,c=mapArea.coords();el_name=me.elementName?'name="'+me.elementName+'" ':'';el_class=cssclass?'class="'+cssclass+'" ':'';t_fill='<v:fill color="#'+options.fillColor+'" class="_fill" opacity="'+
(options.fill?options.fillOpacity:0)+'" /><v:stroke class="_fill" opacity="'+
options.strokeOpacity+'"/>';stroke=options.stroke?' strokeweight='+options.strokeWidth+' stroked="t" strokecolor="#'+
options.strokeColor+'"':' stroked="f"';fill=options.fill?' filled="t"':' filled="f"';switch(mapArea.shape){case'rect':template='<v:rect '+el_class+el_name+fill+stroke+' style="zoom:1;margin:0;padding:0;display:block;position:absolute;left:'+
c[0]+'px;top:'+c[1]+'px;width:'+(c[2]-c[0])+'px;height:'+(c[3]-c[1])+'px;">'+t_fill+'</v:rect>';break;case'poly':template='<v:shape '+el_class+el_name+fill+stroke+' coordorigin="0,0" coordsize="'+me.width+','+me.height
+'" path="m '+c[0]+','+c[1]+' l '+c.slice(2).join(',')
+' x e" style="zoom:1;margin:0;padding:0;display:block;position:absolute;top:0px;left:0px;width:'+me.width+'px;height:'+me.height+'px;">'+t_fill+'</v:shape>';break;case'circ':case'circle':template='<v:oval '+el_class+el_name+fill+stroke
+' style="zoom:1;margin:0;padding:0;display:block;position:absolute;left:'+(c[0]-c[2])+'px;top:'+(c[1]-c[2])
+'px;width:'+(c[2]*2)+'px;height:'+(c[2]*2)+'px;">'+t_fill+'</v:oval>';break;}
e=$(template);$(me.canvas).append(e);return e;};p.render=function(){var opts,me=this;$.each(this.shapes,function(i,e){me.renderShape(e.mapArea,e.options);});if(this.masks.length){$.each(this.masks,function(i,e){opts=u.updateProps({},e.options,{fillOpacity:1,fillColor:e.options.fillColorMask});me.renderShape(e.mapArea,opts,'mapster_mask');});}
this.active=false;return this.canvas;};p.createCanvasFor=function(md){var w=md.scaleInfo.width,h=md.scaleInfo.height;return $('<var width="'+w+'" height="'+h
+'" style="zoom:1;overflow:hidden;display:block;width:'
+w+'px;height:'+h+'px;"></var>')[0];};p.clearHighlight=function(){$(this.map_data.overlay_canvas).children().remove();};p.removeSelections=function(area_id){if(area_id>=0){$(this.map_data.base_canvas).find('[name="static_'+area_id.toString()+'"]').remove();}
else{$(this.map_data.base_canvas).children().remove();}};p.refreshSelections=function(){return null;};}}(jQuery));(function($){var m=$.mapster,u=m.utils,ap=[];m.MapImages=function(owner){this.owner=owner;this.clear();};m.MapImages.prototype={constructor:m.MapImages,slice:function(){return ap.slice.apply(this,arguments);},splice:function(){ap.slice.apply(this.status,arguments);var result=ap.slice.apply(this,arguments);return result;},complete:function(){return $.inArray(false,this.status)<0;},_add:function(image){var index=ap.push.call(this,image)-1;this.status[index]=false;return index;},indexOf:function(image){return $.inArray(image,this);},clear:function(){var me=this;if(me.ids&&me.ids.length>0){$.each(me.ids,function(i,e){delete me[e];});}
me.ids=[];me.length=0;me.status=[];me.splice(0);},add:function(image,id){var index,src,me=this;if(!image){return;}
if(typeof image==='string'){src=image;image=me[src];if(typeof image==='object'){return me.indexOf(image);}
image=$('<img />').addClass('mapster_el').hide();index=me._add(image[0]);image.bind('load',function(e){me.imageLoaded.call(me,e);}).bind('error',function(e){me.imageLoadError.call(me,e);});image.attr('src',src);}else{index=me._add($(image)[0]);}
if(id){if(this[id]){throw(id+" is already used or is not available as an altImage alias.");}
me.ids.push(id);me[id]=me[index];}
return index;},bind:function(retry){var me=this,promise,triesLeft=me.owner.options.configTimeout/200,check=function(){var i;i=me.length;while(i-->0){if(!me.isLoaded(i)){break;}}
if(me.complete()){me.resolve();}else{if(triesLeft-->0){me.imgTimeout=window.setTimeout(function(){check.call(me,true);},50);}else{me.imageLoadError.call(me);}}};promise=me.deferred=u.defer();check();return promise;},resolve:function(){var me=this,resolver=me.deferred;if(resolver){me.deferred=null;resolver.resolve();}},imageLoaded:function(e){var me=this,index=me.indexOf(e.target);if(index>=0){me.status[index]=true;if($.inArray(false,me.status)<0){me.resolve();}}},imageLoadError:function(e){clearTimeout(this.imgTimeout);this.triesLeft=0;var err=e?'The image '+e.target.src+' failed to load.':'The images never seemed to finish loading. You may just need to increase the configTimeout if images could take a long time to load.';throw err;},isLoaded:function(index){var img,me=this,status=me.status;if(status[index]){return true;}
img=me[index];if(typeof img.complete!=='undefined'){status[index]=img.complete;}else{status[index]=!!u.imgWidth(img);}
return status[index];}};}(jQuery));(function($){var m=$.mapster,u=m.utils;function initializeDefaults(me){$.extend(me,{complete:false,map:null,base_canvas:null,overlay_canvas:null,commands:[],data:[],mapAreas:[],_xref:{},highlightId:-1,currentAreaId:-1,_tooltip_events:[],scaleInfo:null,index:-1,activeAreaEvent:null});}
function getOptionImages(obj){return[obj,obj.render_highlight,obj.render_select];}
function configureAltImages(me)
{var opts=me.options,mi=me.images;if($.mapster.hasCanvas){$.each(opts.altImages||{},function(i,e){mi.add(e,i);});$.each([opts].concat(opts.areas),function(i,e){$.each(getOptionImages(e),function(i2,e2){if(e2&&e2.altImage){e2.altImageId=mi.add(e2.altImage);}});});}
me.area_options=u.updateProps({},m.area_defaults,opts);}
function queueMouseEvent(me,delay,area,deferred){deferred=deferred||u.when.defer();function cbFinal(areaId){if(me.currentAreaId!==areaId&&me.highlightId>=0){deferred.resolve();}}
if(me.activeAreaEvent){window.clearTimeout(me.activeAreaEvent);me.activeAreaEvent=0;}
if(delay<0){return;}
if(area.owner.currentAction||delay){me.activeAreaEvent=window.setTimeout((function(){return function(){queueMouseEvent(me,0,area,deferred);};}(area)),delay||100);}else{cbFinal(area.areaId);}
return deferred;}
function mousedown(e){if(!$.mapster.hasCanvas){this.blur();}
e.preventDefault();}
function mouseover(me,e){var arData=me.getAllDataForArea(this),ar=arData.length?arData[0]:null;if(!ar||ar.isNotRendered()||ar.owner.currentAction){return;}
if(me.currentAreaId===ar.areaId){return;}
if(me.highlightId!==ar.areaId){me.clearEffects();ar.highlight();if(me.options.showToolTip){$.each(arData,function(i,e){if(e.effectiveOptions().toolTip){e.showToolTip();}});}}
me.currentAreaId=ar.areaId;if($.isFunction(me.options.onMouseover)){me.options.onMouseover.call(this,{e:e,options:ar.effectiveOptions(),key:ar.key,selected:ar.isSelected()});}}
function mouseout(me,e){var newArea,ar=me.getDataForArea(this),opts=me.options;if(me.currentAreaId<0||!ar){return;}
newArea=me.getDataForArea(e.relatedTarget);if(newArea===ar){return;}
me.currentAreaId=-1;ar.area=null;queueMouseEvent(me,opts.mouseoutDelay,ar).then(me.clearEffects);if($.isFunction(opts.onMouseout)){opts.onMouseout.call(this,{e:e,options:opts,key:ar.key,selected:ar.isSelected()});}}
function clearEffects(me){var opts=me.options;me.ensureNoHighlight();if(opts.toolTipClose&&$.inArray('area-mouseout',opts.toolTipClose)>=0&&me.activeToolTip)
{me.clearToolTip();}}
function click(me,e){var selected,list,list_target,newSelectionState,canChangeState,cbResult,that=this,ar=me.getDataForArea(this),opts=me.options;function clickArea(ar){var areaOpts,target;canChangeState=(ar.isSelectable()&&(ar.isDeselectable()||!ar.isSelected()));if(canChangeState){newSelectionState=!ar.isSelected();}else{newSelectionState=ar.isSelected();}
list_target=m.getBoundList(opts,ar.key);if($.isFunction(opts.onClick))
{cbResult=opts.onClick.call(that,{e:e,listTarget:list_target,key:ar.key,selected:newSelectionState});if(u.isBool(cbResult)){if(!cbResult){return false;}
target=$(ar.area).attr('href');if(target!=='#'){window.location.href=target;return false;}}}
if(canChangeState){selected=ar.toggle();}
if(opts.boundList&&opts.boundList.length>0){m.setBoundListProperties(opts,list_target,ar.isSelected());}
areaOpts=ar.effectiveOptions();if(areaOpts.includeKeys){list=u.split(areaOpts.includeKeys);$.each(list,function(i,e){var ar=me.getDataForKey(e.toString());if(!ar.options.isMask){clickArea(ar);}});}}
mousedown.call(this,e);if(opts.clickNavigate&&ar.href){window.location.href=ar.href;return;}
if(ar&&!ar.owner.currentAction){opts=me.options;clickArea(ar);}}
m.MapData=function(image,options)
{var me=this;me.image=image;me.images=new m.MapImages(me);me.graphics=new m.Graphics(me);me.imgCssText=image.style.cssText||null;initializeDefaults(me);me.configureOptions(options);me.mouseover=function(e){mouseover.call(this,me,e);};me.mouseout=function(e){mouseout.call(this,me,e);};me.click=function(e){click.call(this,me,e);};me.clearEffects=function(e){clearEffects.call(this,me,e);};};m.MapData.prototype={constructor:m.MapData,configureOptions:function(options){this.options=u.updateProps({},m.defaults,options);},bindImages:function(){var me=this,mi=me.images;if(mi.length>2){mi.splice(2);}else if(mi.length===0){mi.add(me.image);mi.add(me.image.src);}
configureAltImages(me);return me.images.bind();},isActive:function(){return!this.complete||this.currentAction;},state:function(){return{complete:this.complete,resizing:this.currentAction==='resizing',zoomed:this.zoomed,zoomedArea:this.zoomedArea,scaleInfo:this.scaleInfo};},wrapId:function(){return'mapster_wrap_'+this.index;},_idFromKey:function(key){return typeof key==="string"&&this._xref.hasOwnProperty(key)?this._xref[key]:-1;},getSelected:function(){var result='';$.each(this.data,function(i,e){if(e.isSelected()){result+=(result?',':'')+this.key;}});return result;},getAllDataForArea:function(area,atMost){var i,ar,result,me=this,key=$(area).filter('area').attr(me.options.mapKey);if(key){result=[];key=u.split(key);for(i=0;i<(atMost||key.length);i++){ar=me.data[me._idFromKey(key[i])];ar.area=area.length?area[0]:area;result.push(ar);}}
return result;},getDataForArea:function(area){var ar=this.getAllDataForArea(area,1);return ar?ar[0]||null:null;},getDataForKey:function(key){return this.data[this._idFromKey(key)];},getKeysForGroup:function(key){var ar=this.getDataForKey(key);return!ar?'':ar.isPrimary?ar.key:this.getPrimaryKeysForMapAreas(ar.areas()).join(',');},getPrimaryKeysForMapAreas:function(areas)
{var keys=[];$.each(areas,function(i,e){if($.inArray(e.keys[0],keys)<0){keys.push(e.keys[0]);}});return keys;},getData:function(obj){if(typeof obj==='string'){return this.getDataForKey(obj);}else if(obj&&obj.mapster||u.isElement(obj)){return this.getDataForArea(obj);}else{return null;}},ensureNoHighlight:function(){var ar;if(this.highlightId>=0){this.graphics.clearHighlight();ar=this.data[this.highlightId];ar.changeState('highlight',false);this.setHighlightId(-1);}},setHighlightId:function(id){this.highlightId=id;},clearSelections:function(){$.each(this.data,function(i,e){if(e.selected){e.deselect(true);}});this.removeSelectionFinish();},setAreaOptions:function(areas){var i,area_options,ar;areas=areas||[];for(i=areas.length-1;i>=0;i--){area_options=areas[i];if(area_options){ar=this.getDataForKey(area_options.key);if(ar){u.updateProps(ar.options,area_options);if(u.isBool(area_options.selected)){ar.selected=area_options.selected;}}}}},drawSelections:function(keys){var i,key_arr=u.asArray(keys);for(i=key_arr.length-1;i>=0;i--){this.data[key_arr[i]].drawSelection();}},redrawSelections:function(){$.each(this.data,function(i,e){if(e.isSelectedOrStatic()){e.drawSelection();}});},initialize:function(){var imgCopy,base_canvas,overlay_canvas,wrap,parentId,css,i,size,img,sort_func,sorted_list,scale,me=this,opts=me.options;if(me.complete){return;}
img=$(me.image);parentId=img.parent().attr('id');if(parentId&&parentId.length>=12&&parentId.substring(0,12)==="mapster_wrap"){wrap=img.parent();wrap.attr('id',me.wrapId());}else{wrap=$('<div id="'+me.wrapId()+'"></div>');if(opts.wrapClass){if(opts.wrapClass===true){wrap.addClass(img[0].className);}
else{wrap.addClass(opts.wrapClass);}}}
me.wrapper=wrap;me.scaleInfo=scale=u.scaleMap(me.images[0],me.images[1],opts.scaleMap);me.base_canvas=base_canvas=me.graphics.createVisibleCanvas(me);me.overlay_canvas=overlay_canvas=me.graphics.createVisibleCanvas(me);imgCopy=$(me.images[1]).addClass('mapster_el '+me.images[0].className).attr({id:null,usemap:null});size=u.size(me.images[0]);if(size.complete){imgCopy.css({width:size.width,height:size.height});}
me.buildDataset();css={display:'block',position:'relative',padding:0,width:scale.width,height:scale.height};if(opts.wrapCss){$.extend(css,opts.wrapCss);}
if(img.parent()[0]!==me.wrapper[0]){img.before(me.wrapper);}
wrap.css(css);$(me.images.slice(2)).hide();for(i=1;i<me.images.length;i++){wrap.append(me.images[i]);}
wrap.append(base_canvas).append(overlay_canvas).append(img.css(m.canvas_style));u.setOpacity(me.images[0],0);$(me.images[1]).show();u.setOpacity(me.images[1],1);if(opts.isSelectable&&opts.onGetList){sorted_list=me.data.slice(0);if(opts.sortList){if(opts.sortList==="desc"){sort_func=function(a,b){return a===b?0:(a>b?-1:1);};}
else{sort_func=function(a,b){return a===b?0:(a<b?-1:1);};}
sorted_list.sort(function(a,b){a=a.value;b=b.value;return sort_func(a,b);});}
me.options.boundList=opts.onGetList.call(me.image,sorted_list);}
me.complete=true;me.processCommandQueue();if(opts.onConfigured&&typeof opts.onConfigured==='function'){opts.onConfigured.call(img,true);}},buildDataset:function(rebind){var sel,areas,j,area_id,$area,area,curKey,mapArea,key,keys,mapAreaId,group_value,dataItem,href,me=this,opts=me.options,default_group;function addAreaData(key,value){var dataItem=new m.AreaData(me,key,value);dataItem.areaId=me._xref[key]=me.data.push(dataItem)-1;return dataItem.areaId;}
me._xref={};me.data=[];if(!rebind){me.mapAreas=[];}
default_group=!opts.mapKey;if(default_group){opts.mapKey='data-mapster-key';}
sel=($.browser.msie&&$.browser.version<=7)?'area':(default_group?'area[coords]':'area['+opts.mapKey+']');areas=$(me.map).find(sel).unbind('.mapster');for(mapAreaId=0;mapAreaId<areas.length;mapAreaId++){area_id=0;area=areas[mapAreaId];$area=$(area);if(!area.coords){continue;}
if(default_group){curKey=String(mapAreaId);$area.attr('data-mapster-key',curKey);}else{curKey=area.getAttribute(opts.mapKey);}
if(rebind){mapArea=me.mapAreas[$area.data('mapster')-1];mapArea.configure(curKey);}else{mapArea=new m.MapArea(me,area,curKey);me.mapAreas.push(mapArea);}
keys=mapArea.keys;for(j=keys.length-1;j>=0;j--){key=keys[j];if(opts.mapValue){group_value=$area.attr(opts.mapValue);}
if(default_group){area_id=addAreaData(me.data.length,group_value);dataItem=me.data[area_id];dataItem.key=key=area_id.toString();}
else{area_id=me._xref[key];if(area_id>=0){dataItem=me.data[area_id];if(group_value&&!me.data[area_id].value){dataItem.value=group_value;}}
else{area_id=addAreaData(key,group_value);dataItem=me.data[area_id];dataItem.isPrimary=j===0;}}
mapArea.areaDataXref.push(area_id);dataItem.areasXref.push(mapAreaId);}
href=$area.attr('href');if(href&&href!=='#'&&!dataItem.href)
{dataItem.href=href;}
if(!mapArea.nohref){$area.bind('click.mapster',me.click);if(!m.isTouch){$area.bind('mouseover.mapster',me.mouseover).bind('mouseout.mapster',me.mouseout).bind('mousedown.mapster',me.mousedown);}}
$area.data("mapster",mapAreaId+1);}
me.setAreaOptions(opts.areas);me.redrawSelections();},processCommandQueue:function(){var cur,me=this;while(!me.currentAction&&me.commands.length){cur=me.commands[0];me.commands.splice(0,1);m.impl[cur.command].apply(cur.that,cur.args);}},clearEvents:function(){$(this.map).find('area').unbind('.mapster');$(this.images).unbind('.mapster');},_clearCanvases:function(preserveState){if(!preserveState){$(this.base_canvas).remove();}
$(this.overlay_canvas).remove();},clearMapData:function(preserveState){var me=this;this._clearCanvases(preserveState);$.each(this.data,function(i,e){e.reset();});this.data=null;if(!preserveState){this.image.style.cssText=this.imgCssText;$(this.wrapper).before(this.image).remove();}
me.images.clear();this.image=null;u.ifFunction(this.clearTooltip,this);},removeSelectionFinish:function(){var g=this.graphics;g.refreshSelections();g.clearHighlight();}};}(jQuery));(function($){var m=$.mapster,u=m.utils;function select(options){var me=this,o=me.owner;if(o.options.singleSelect){o.clearSelections();}
if(!me.isSelected()){if(options){me.optsCache=$.extend(me.effectiveRenderOptions('select'),options,{altImageId:o.images.add(options.altImage)});}
me.drawSelection();me.selected=true;me.changeState('select',true);}
if(o.options.singleSelect){o.graphics.refreshSelections();}}
function deselect(partial){var me=this;me.selected=false;me.changeState('select',false);me.optsCache=null;me.owner.graphics.removeSelections(me.areaId);if(!partial){me.owner.removeSelectionFinish();}}
function toggle(options){var me=this;if(!me.isSelected()){me.select(options);}
else{me.deselect();}
return me.isSelected();}
m.AreaData=function(owner,key,value){$.extend(this,{owner:owner,key:key||'',isPrimary:true,areaId:-1,href:'',value:value||'',options:{},selected:null,areasXref:[],area:null,optsCache:null});};m.AreaData.prototype={constuctor:m.AreaData,select:select,deselect:deselect,toggle:toggle,areas:function(){var i,result=[];for(i=0;i<this.areasXref.length;i++){result.push(this.owner.mapAreas[this.areasXref[i]]);}
return result;},coords:function(offset){var coords=[];$.each(this.areas(),function(i,el){coords=coords.concat(el.coords(offset));});return coords;},reset:function(){$.each(this.areas(),function(i,e){e.reset();});this.areasXref=[];this.options=null;},isSelectedOrStatic:function(){var o=this.effectiveOptions();return u.isBool(o.staticState)?o.staticState:this.isSelected();},isSelected:function(){return u.isBool(this.selected)?this.selected:u.isBool(this.owner.area_options.selected)?this.owner.area_options.selected:false;},isSelectable:function(){return u.isBool(this.effectiveOptions().staticState)?false:(u.isBool(this.owner.options.staticState)?false:u.boolOrDefault(this.effectiveOptions().isSelectable,true));},isDeselectable:function(){return u.isBool(this.effectiveOptions().staticState)?false:(u.isBool(this.owner.options.staticState)?false:u.boolOrDefault(this.effectiveOptions().isDeselectable,true));},isNotRendered:function(){var area=$(this.area);return area.attr('nohref')||!area.attr('href')||this.effectiveOptions().isMask;},effectiveOptions:function(options){var opts=u.updateProps({},this.owner.area_options,this.options,options||{},{id:this.areaId});opts.selected=this.isSelected();return opts;},effectiveRenderOptions:function(mode,options){var allOpts,opts=this.optsCache;if(!opts||mode==='highlight'){allOpts=this.effectiveOptions(options);opts=u.updateProps({},allOpts,allOpts["render_"+mode]);if(mode!=='highlight'){this.optsCache=opts;}}
return $.extend({},opts);},changeState:function(state_type,state){if($.isFunction(this.owner.options.onStateChange)){this.owner.options.onStateChange.call(this.owner.image,{key:this.key,state:state_type,selected:state});}},highlight:function(options){var o=this.owner;if(this.effectiveOptions().highlight){o.graphics.addShapeGroup(this,"highlight",options);}
o.setHighlightId(this.areaId);this.changeState('highlight',true);},drawSelection:function(){this.owner.graphics.addShapeGroup(this,"select");}};m.MapArea=function(owner,areaEl,keys){if(!owner){return;}
var me=this;me.owner=owner;me.area=areaEl;me.areaDataXref=[];me.originalCoords=[];$.each(u.split(areaEl.coords),function(i,el){me.originalCoords.push(parseFloat(el));});me.length=me.originalCoords.length;me.shape=areaEl.shape.toLowerCase();me.nohref=areaEl.nohref||!areaEl.href;me.configure(keys);};m.MapArea.prototype={constructor:m.MapArea,configure:function(keys){this.keys=u.split(keys);},reset:function(){this.area=null;},coords:function(offset){return $.map(this.originalCoords,function(e){return offset?e:e+offset;});}};}(jQuery));(function($){var u=$.mapster.utils;u.areaCorners=function(elements,image,container,width,height){var pos,found,minX,minY,maxX,maxY,bestMinX,bestMaxX,bestMinY,bestMaxY,curX,curY,nest,j,offsetx=0,offsety=0,rootx,rooty,iCoords,radius,angle,el,coords=[];elements=elements.length?elements:[elements];container=container?$(container):$(document.body);pos=container.offset();rootx=pos.left;rooty=pos.top;if(image){pos=$(image).offset();offsetx=pos.left;offsety=pos.top;}
for(j=0;j<elements.length;j++)
{el=elements[j];if(el.nodeName==='AREA'){iCoords=u.split(el.coords,parseInt);switch(el.shape){case'circle':curX=iCoords[0];curY=iCoords[1];radius=iCoords[2];coords=[];for(j=0;j<360;j+=20){angle=j*Math.PI/180;coords.push(curX+radius*Math.cos(angle),curY+radius*Math.sin(angle));}
break;case'rect':coords.push(iCoords[0],iCoords[1],iCoords[2],iCoords[1],iCoords[2],iCoords[3],iCoords[0],iCoords[3]);break;default:coords=coords.concat(iCoords);break;}
for(j=0;j<coords.length;j+=2)
{coords[j]=parseInt(coords[j],10)+offsetx;coords[j+1]=parseInt(coords[j+1],10)+offsety;}}else{el=$(el);pos=el.position();coords.push(pos.left,pos.top,pos.left+el.width(),pos.top,pos.left+el.width(),pos.top+el.height(),pos.left,pos.top+el.height());}}
minX=minY=bestMinX=bestMinY=999999;maxX=maxY=bestMaxX=bestMaxY=-1;for(j=coords.length-2;j>=0;j-=2){curX=coords[j];curY=coords[j+1];if(curX<minX){minX=curX;bestMaxY=curY;}
if(curX>maxX){maxX=curX;bestMinY=curY;}
if(curY<minY){minY=curY;bestMaxX=curX;}
if(curY>maxY){maxY=curY;bestMinX=curX;}}
if(width&&height){found=false;$.each([[bestMaxX-width,minY-height],[bestMinX,minY-height],[minX-width,bestMaxY-height],[minX-width,bestMinY],[maxX,bestMaxY-height],[maxX,bestMinY],[bestMaxX-width,maxY],[bestMinX,maxY]],function(i,e){if(!found&&(e[0]>rootx&&e[1]>rooty)){nest=e;found=true;return false;}});if(!found){nest=[maxX,maxY];}}
return nest;};}(jQuery));(function($){var m=$.mapster,u=m.utils,p=m.MapArea.prototype;m.utils.getScaleInfo=function(eff,actual){var pct;if(!actual){pct=1;actual=eff;}else{pct=eff.width/actual.width||eff.height/actual.height;if(pct>0.98&&pct<1.02){pct=1;}}
return{scale:(pct!==1),scalePct:pct,realWidth:actual.width,realHeight:actual.height,width:eff.width,height:eff.height,ratio:eff.width/eff.height};};m.utils.scaleMap=function(image,imageRaw,scale){var vis=u.size(image),raw=u.size(imageRaw,true);if(!raw.complete()){throw("Another script, such as an extension, appears to be interfering with image loading. Please let us know about this.");}
if(!vis.complete()){vis=raw;}
return this.getScaleInfo(vis,scale?raw:null);};m.MapData.prototype.resize=function(width,height,duration,callback){var p,promises,newsize,els,highlightId,ratio,me=this;callback=callback||duration;function sizeCanvas(canvas,w,h){if($.mapster.hasCanvas){canvas.width=w;canvas.height=h;}else{$(canvas).width(w);$(canvas).height(h);}}
function cleanupAndNotify(){me.currentAction='';if($.isFunction(callback)){callback();}
me.processCommandQueue();}
function finishResize(){sizeCanvas(me.overlay_canvas,width,height);if(highlightId>=0){var areaData=me.data[highlightId];areaData.tempOptions={fade:false};me.getDataForKey(areaData.key).highlight();areaData.tempOptions=null;}
sizeCanvas(me.base_canvas,width,height);me.redrawSelections();cleanupAndNotify();}
function resizeMapData(){$(me.image).css(newsize);me.scaleInfo=u.getScaleInfo({width:width,height:height},{width:me.scaleInfo.realWidth,height:me.scaleInfo.realHeight});$.each(me.data,function(i,e){$.each(e.areas(),function(i,e){e.resize();});});}
if(me.scaleInfo.width===width&&me.scaleInfo.height===height){return;}
highlightId=me.highlightId;if(!width){ratio=height/me.scaleInfo.realHeight;width=Math.round(me.scaleInfo.realWidth*ratio);}
if(!height){ratio=width/me.scaleInfo.realWidth;height=Math.round(me.scaleInfo.realHeight*ratio);}
newsize={'width':String(width)+'px','height':String(height)+'px'};if(!$.mapster.hasCanvas){$(me.base_canvas).children().remove();}
els=$(me.wrapper).find('.mapster_el').add(me.wrapper);if(duration){promises=[];me.currentAction='resizing';els.each(function(i,e){p=u.defer();promises.push(p);$(e).animate(newsize,{duration:duration,complete:p.resolve,easing:"linear"});});p=u.defer();promises.push(p);u.when.all(promises).then(finishResize);resizeMapData();p.resolve();}else{els.css(newsize);resizeMapData();finishResize();}};m.MapArea=u.subclass(m.MapArea,function(){this.base.init();if(this.owner.scaleInfo.scale){this.resize();}});p.coords=function(percent,coordOffset){var j,newCoords=[],pct=percent||this.owner.scaleInfo.scalePct,offset=coordOffset||0;if(pct===1&&coordOffset===0){return this.originalCoords;}
for(j=0;j<this.length;j++){newCoords.push(Math.round(this.originalCoords[j]*pct)+offset);}
return newCoords;};p.resize=function(){this.area.coords=this.coords().join(',');};p.reset=function(){this.area.coords=this.coords(1).join(',');};m.impl.resize=function(width,height,duration,callback){if(!width&&!height){return false;}
var x=(new m.Method(this,function(){this.resize(width,height,duration,callback);},null,{name:'resize',args:arguments})).go();return x;};}(jQuery));(function($){var m=$.mapster,u=m.utils;$.extend(m.defaults,{toolTipContainer:'<div style="border: 2px solid #c0c0c0; background: #eff2f7; width:160px; padding:4px; margin: 4px; -moz-box-shadow: 3px 3px 5px #535353; '+'-webkit-box-shadow: 3px 3px 5px #535353; box-shadow: 3px 3px 5px #535353; -moz-border-radius: 6px 6px 6px 6px; -webkit-border-radius: 6px; '+'border-radius: 6px 6px 6px 6px; opacity: 0.9;"></dteniv>',showToolTip:false,toolTipFade:true,toolTipClose:['area-mouseout','image-mouseout'],onShowToolTip:null,onHideToolTip:null});$.extend(m.area_defaults,{toolTip:null,toolTipClose:null});function createToolTip(html,template,css){var tooltip;if(template){tooltip=typeof template==='string'?$(template):$(template).clone();tooltip.append(html);}else{tooltip=$(html);}
tooltip.css($.extend((css||{}),{display:"block",position:"absolute"})).hide();$('body').append(tooltip);tooltip.attr("data-opacity",tooltip.css("opacity")).css("opacity",0);return tooltip.show();}
function showToolTipImpl(tooltip,options)
{var tooltipCss={"left":(options.left+40)+"px","top":(options.top+40)+"px"},actalOpacity=tooltip.attr("data-opacity")||0,zindex=tooltip.css("z-index");if(parseInt(zindex,10)===0||zindex==="auto"){tooltipCss["z-index"]=9999;}
tooltip.css(tooltipCss).addClass('mapster_tooltip');if(options.fadeDuration&&options.fadeDuration>0){u.fader(tooltip[0],0,actalOpacity,options.fadeDuration);}else{u.setOpacity(tooltip[0],actalOpacity);}}
m.MapData.prototype.clearToolTip=function(){if(this.activeToolTip){this.activeToolTip.stop().remove();this.activeToolTip=null;this.activeToolTipID=null;u.ifFunction(this.options.onHideToolTip,this);}};function bindToolTipClose(options,bindOption,event,target,beforeClose,onClose){var event_name=event+'.mapster-tooltip';if($.inArray(bindOption,options)>=0){target.unbind(event_name).bind(event_name,function(e){if(!beforeClose||beforeClose.call(this,e)){target.unbind('.mapster-tooltip');if(onClose){onClose.call(this);}}});return{object:target,event:event_name};}}
function showToolTip(tooltip,target,image,container,options){var corners,ttopts={};options=options||{};if(target){corners=u.areaCorners(target,image,container,tooltip.outerWidth(true),tooltip.outerHeight(true));ttopts.left=corners[0];ttopts.top=corners[1];}else{ttopts.left=options.left;ttopts.top=options.top;}
ttopts.left+=(options.offsetx||0);ttopts.top+=(options.offsety||0);ttopts.css=options.css;ttopts.fadeDuration=options.fadeDuration;showToolTipImpl(tooltip,ttopts);return tooltip;}
m.AreaData.prototype.showToolTip=function(content,options){var tooltip,closeOpts,target,tipClosed,template,ttopts={},ad=this,md=ad.owner,areaOpts=ad.effectiveOptions();options=options?$.extend({},options):{};content=content||areaOpts.toolTip;closeOpts=options.closeEvents||areaOpts.toolTipClose||md.options.toolTipClose||'tooltip-click';template=typeof options.template!=='undefined'?options.template:md.options.toolTipContainer;options.closeEvents=typeof closeOpts==='string'?closeOpts=u.split(closeOpts):closeOpts;options.fadeDuration=options.fadeDuration||(md.options.toolTipFade?(md.options.fadeDuration||areaOpts.fadeDuration):0);target=ad.area?ad.area:$.map(ad.areas(),function(e){return e.area;});if(md.activeToolTipID===ad.areaId){return;}
md.clearToolTip();md.activeToolTip=tooltip=createToolTip(content,template,options.css);md.activeToolTipID=ad.areaId;tipClosed=function(){md.clearToolTip();};bindToolTipClose(closeOpts,'area-click','click',$(md.map),null,tipClosed);bindToolTipClose(closeOpts,'tooltip-click','click',tooltip,null,tipClosed);bindToolTipClose(closeOpts,'image-mouseout','mouseout',$(md.image),function(e){return(e.relatedTarget&&e.relatedTarget.nodeName!=='AREA'&&e.relatedTarget!==ad.area);},tipClosed);showToolTip(tooltip,target,md.image,options.container,template,options);u.ifFunction(md.options.onShowToolTip,ad.area,{toolTip:tooltip,options:ttopts,areaOptions:areaOpts,key:ad.key,selected:ad.isSelected()});return tooltip;};function getHtmlFromOptions(options){return(options?((typeof options==='string'||options.jquery)?options:options.content):null);}
m.impl.tooltip=function(key,options){return(new m.Method(this,function mapData(){var tooltip,target,md=this;if(!key){md.clearToolTip();}else{target=$(key);if(md.activeToolTipID===target[0]){return;}
md.clearToolTip();md.activeToolTip=tooltip=createToolTip(getHtmlFromOptions(options),options.template||md.options.toolTipContainer,options.css);md.activeToolTipID=target[0];bindToolTipClose(['tooltip-click'],'tooltip-click','click',tooltip,null,function(){md.clearToolTip();});md.activeToolTip=tooltip=showToolTip(tooltip,target,md.image,options.container,options);}},function areaData(){if($.isPlainObject(key)&&!options){options=key;}
this.showToolTip(getHtmlFromOptions(options),options);},{name:'tooltip',args:arguments,key:key})).go();};}(jQuery));;function executeReportPopup(){var fakulteta=$('#export_fakulteta').val();var type=$('input[name=export_type]:checked').val();$('#fade').fadeTo('slow',1);$('#ul_exports_popup').show().load('ajax.php?t=evalvacija&a=execute_export_popup',{type:type,fakulteta:fakulteta});}
function closeReportPopup(){$('#ul_exports_popup').hide();$('#fade').fadeOut('slow');}
function executeReport(){var fakulteta=$('#export_fakulteta').val();var type=$('input[name=export_type]:checked').val();$('#ul_exports_popup').hide();$('#fade').fadeOut('slow');$('#ul_exports').load('ajax.php?t=evalvacija&a=execute_export',{type:type,fakulteta:fakulteta});}
function executeTestExport(){var fakulteta=$('#export_fakulteta').val();var type=$('input[name=export_type]:checked').val();$.post('ajax.php?t=evalvacija&a=execute_test_export',{type:type,fakulteta:fakulteta},function(response){if(response!=''){window.location.href=response;}});}
function executeUploadGCPopup(id,fakulteta,type,date){$('#fade').fadeTo('slow',1);$('#ul_exports_popup').show().load('ajax.php?t=evalvacija&a=execute_GC_popup',{id:id,type:type,fakulteta:fakulteta,date:date});}
function executeUploadGC(id){$('#ul_exports_popup').hide();$('#fade').fadeOut('slow');$('#ul_exports').load('ajax.php?t=evalvacija&a=execute_GC_upload',{id:id});}
function showImport(){var fakulteta=$('#import_fakulteta').val();var type=$('input[name=import_type]:checked').val();var test=$('input[name=import_test]:checked').val();$('#ul_imports').load('ajax.php?t=evalvacija&a=show_import',{type:type,fakulteta:fakulteta,test:test});}
function executeImportPopup(){var fakulteta=$('#import_fakulteta').val();var type=$('input[name=import_type]:checked').val();var test=$('input[name=import_test]:checked').val();$('#fade').fadeTo('slow',1);$('#ul_imports_popup').show().load('ajax.php?t=evalvacija&a=execute_import_popup',{type:type,fakulteta:fakulteta,test:test});}
function closeImportPopup(){$('#ul_imports_popup').hide();$('#fade').fadeOut('slow');}
function executeImportDeletePopup(){var fakulteta=$('#import_fakulteta').val();var type=$('input[name=import_type]:checked').val();var test=$('input[name=import_test]:checked').val();$('#fade').fadeTo('slow',1);$('#ul_imports_popup').show().load('ajax.php?t=evalvacija&a=execute_import_delete_popup',{type:type,fakulteta:fakulteta,test:test});}
function executeImportDelete(){var fakulteta=$('#import_fakulteta').val();var type=$('input[name=import_type]:checked').val();var test=$('input[name=import_test]:checked').val();$('#ul_imports_popup').hide();$('#fade').fadeOut('slow');$('#ul_imports').load('ajax.php?t=evalvacija&a=execute_import_delete',{type:type,fakulteta:fakulteta,test:test});}
function clearPdf(){$('#ul_exports').load('ajax.php?t=evalvacija&a=clear_pdf',{anketa:srv_meta_anketa_id});}
function showEmailingData(){var type=$('input[name=type]:checked').val();$('#ul_emailing').load('ajax.php?t=evalvacija&a=show_emailing_data',{type:type});}
function deleteEmailingData(){var type=$('input[name=type]:checked').val();$('#ul_emailing').load('ajax.php?t=evalvacija&a=delete_emailing_data',{type:type});};Calendar=function(firstDayOfWeek,dateStr,onSelected,onClose){this.activeDiv=null;this.currentDateEl=null;this.getDateStatus=null;this.getDateToolTip=null;this.getDateText=null;this.timeout=null;this.onSelected=onSelected||null;this.onClose=onClose||null;this.dragging=false;this.hidden=false;this.minYear=1583;this.maxYear=2099;this.dateFormat=Calendar._TT["DEF_DATE_FORMAT"];this.ttDateFormat=Calendar._TT["TT_DATE_FORMAT"];this.isPopup=true;this.weekNumbers=true;this.firstDayOfWeek=typeof firstDayOfWeek=="number"?firstDayOfWeek:Calendar._FD;this.showsOtherMonths=false;this.dateStr=dateStr;this.ar_days=null;this.showsTime=false;this.time24=true;this.yearStep=2;this.hiliteToday=true;this.multiple=null;this.table=null;this.element=null;this.tbody=null;this.firstdayname=null;this.monthsCombo=null;this.yearsCombo=null;this.hilitedMonth=null;this.activeMonth=null;this.hilitedYear=null;this.activeYear=null;this.dateClicked=false;if(typeof Calendar._SDN=="undefined"){if(typeof Calendar._SDN_len=="undefined")
Calendar._SDN_len=3;var ar=new Array();for(var i=8;i>0;){ar[--i]=Calendar._DN[i].substr(0,Calendar._SDN_len);}
Calendar._SDN=ar;if(typeof Calendar._SMN_len=="undefined")
Calendar._SMN_len=3;ar=new Array();for(var i=12;i>0;){ar[--i]=Calendar._MN[i].substr(0,Calendar._SMN_len);}
Calendar._SMN=ar;}};Calendar._C=null;Calendar.is_ie=(/msie/i.test(navigator.userAgent)&&!/opera/i.test(navigator.userAgent));Calendar.is_ie5=(Calendar.is_ie&&/msie 5\.0/i.test(navigator.userAgent));Calendar.is_ie7=(Calendar.is_ie&&/msie 7\.0/i.test(navigator.userAgent));Calendar.is_opera=/opera/i.test(navigator.userAgent);Calendar.is_khtml=/Konqueror|Safari|KHTML/i.test(navigator.userAgent);Calendar.getAbsolutePos=function(el){var SL=0,ST=0;var is_div=/^div$/i.test(el.tagName);if(is_div&&el.scrollLeft)
SL=el.scrollLeft;if(is_div&&el.scrollTop)
ST=el.scrollTop;var r={x:el.offsetLeft-SL,y:el.offsetTop-ST};if(el.offsetParent){var tmp=this.getAbsolutePos(el.offsetParent);r.x+=tmp.x;r.y+=tmp.y;}
return r;};Calendar.isRelated=function(el,evt){var related=evt.relatedTarget;if(!related){var type=evt.type;if(type=="mouseover"){related=evt.fromElement;}else if(type=="mouseout"){related=evt.toElement;}}
while(related){if(related==el){return true;}
related=related.parentNode;}
return false;};Calendar.removeClass=function(el,className){if(!(el&&el.className)){return;}
var cls=el.className.split(" ");var ar=new Array();for(var i=cls.length;i>0;){if(cls[--i]!=className){ar[ar.length]=cls[i];}}
el.className=ar.join(" ");};Calendar.addClass=function(el,className){Calendar.removeClass(el,className);el.className+=" "+className;};Calendar.getElement=function(ev){var f=Calendar.is_ie?window.event.srcElement:ev.currentTarget;while(f.nodeType!=1||/^div$/i.test(f.tagName))
f=f.parentNode;return f;};Calendar.getTargetElement=function(ev){var f=Calendar.is_ie?window.event.srcElement:ev.target;while(f.nodeType!=1)
f=f.parentNode;return f;};Calendar.stopEvent=function(ev){ev||(ev=window.event);if(Calendar.is_ie){ev.cancelBubble=true;ev.returnValue=false;}else{ev.preventDefault();ev.stopPropagation();}
return false;};Calendar.addEvent=function(el,evname,func){if(el.attachEvent){el.attachEvent("on"+evname,func);}else if(el.addEventListener){el.addEventListener(evname,func,true);}else{el["on"+evname]=func;}};Calendar.removeEvent=function(el,evname,func){if(el.detachEvent){el.detachEvent("on"+evname,func);}else if(el.removeEventListener){el.removeEventListener(evname,func,true);}else{el["on"+evname]=null;}};Calendar.createElement=function(type,parent){var el=null;if(document.createElementNS){el=document.createElementNS("http://www.w3.org/1999/xhtml",type);}else{el=document.createElement(type);}
if(typeof parent!="undefined"){parent.appendChild(el);}
return el;};Calendar._add_evs=function(el){with(Calendar){addEvent(el,"mouseover",dayMouseOver);addEvent(el,"mousedown",dayMouseDown);addEvent(el,"mouseout",dayMouseOut);if(is_ie){addEvent(el,"dblclick",dayMouseDblClick);el.setAttribute("unselectable",true);}}};Calendar.findMonth=function(el){if(typeof el.month!="undefined"){return el;}else if(typeof el.parentNode.month!="undefined"){return el.parentNode;}
return null;};Calendar.findYear=function(el){if(typeof el.year!="undefined"){return el;}else if(typeof el.parentNode.year!="undefined"){return el.parentNode;}
return null;};Calendar.showMonthsCombo=function(){var cal=Calendar._C;if(!cal){return false;}
var cal=cal;var cd=cal.activeDiv;var mc=cal.monthsCombo;if(cal.hilitedMonth){Calendar.removeClass(cal.hilitedMonth,"hilite");}
if(cal.activeMonth){Calendar.removeClass(cal.activeMonth,"active");}
var mon=cal.monthsCombo.getElementsByTagName("div")[cal.date.getMonth()];Calendar.addClass(mon,"active");cal.activeMonth=mon;var s=mc.style;s.display="block";if(cd.navtype<0)
s.left=cd.offsetLeft+"px";else{var mcw=mc.offsetWidth;if(typeof mcw=="undefined")
mcw=50;s.left=(cd.offsetLeft+cd.offsetWidth-mcw)+"px";}
s.top=(cd.offsetTop+cd.offsetHeight)+"px";};Calendar.showYearsCombo=function(fwd){var cal=Calendar._C;if(!cal){return false;}
var cal=cal;var cd=cal.activeDiv;var yc=cal.yearsCombo;if(cal.hilitedYear){Calendar.removeClass(cal.hilitedYear,"hilite");}
if(cal.activeYear){Calendar.removeClass(cal.activeYear,"active");}
cal.activeYear=null;var Y=cal.date.getFullYear()+(fwd?1:-1);var yr=yc.firstChild;var show=false;for(var i=12;i>0;--i){if(Y>=cal.minYear&&Y<=cal.maxYear){yr.innerHTML=Y;yr.year=Y;yr.style.display="block";show=true;}else{yr.style.display="none";}
yr=yr.nextSibling;Y+=fwd?cal.yearStep:-cal.yearStep;}
if(show){var s=yc.style;s.display="block";if(cd.navtype<0)
s.left=cd.offsetLeft+"px";else{var ycw=yc.offsetWidth;if(typeof ycw=="undefined")
ycw=50;s.left=(cd.offsetLeft+cd.offsetWidth-ycw)+"px";}
s.top=(cd.offsetTop+cd.offsetHeight)+"px";}};Calendar.tableMouseUp=function(ev){var cal=Calendar._C;if(!cal){return false;}
if(cal.timeout){clearTimeout(cal.timeout);}
var el=cal.activeDiv;if(!el){return false;}
var target=Calendar.getTargetElement(ev);ev||(ev=window.event);Calendar.removeClass(el,"active");if(target==el||target.parentNode==el){Calendar.cellClick(el,ev);}
var mon=Calendar.findMonth(target);var date=null;if(mon){date=new Date(cal.date);if(mon.month!=date.getMonth()){date.setMonth(mon.month);cal.setDate(date);cal.dateClicked=false;cal.callHandler();}}else{var year=Calendar.findYear(target);if(year){date=new Date(cal.date);if(year.year!=date.getFullYear()){date.setFullYear(year.year);cal.setDate(date);cal.dateClicked=false;cal.callHandler();}}}
with(Calendar){removeEvent(document,"mouseup",tableMouseUp);removeEvent(document,"mouseover",tableMouseOver);removeEvent(document,"mousemove",tableMouseOver);cal._hideCombos();_C=null;return stopEvent(ev);}};Calendar.tableMouseOver=function(ev){var cal=Calendar._C;if(!cal){return;}
var el=cal.activeDiv;var target=Calendar.getTargetElement(ev);if(target==el||target.parentNode==el){Calendar.addClass(el,"hilite active");Calendar.addClass(el.parentNode,"rowhilite");}else{if(typeof el.navtype=="undefined"||(el.navtype!=50&&(el.navtype==0||Math.abs(el.navtype)>2)))
Calendar.removeClass(el,"active");Calendar.removeClass(el,"hilite");Calendar.removeClass(el.parentNode,"rowhilite");}
ev||(ev=window.event);if(el.navtype==50&&target!=el){var pos=Calendar.getAbsolutePos(el);var w=el.offsetWidth;var x=ev.clientX;var dx;var decrease=true;if(x>pos.x+w){dx=x-pos.x-w;decrease=false;}else
dx=pos.x-x;if(dx<0)dx=0;var range=el._range;var current=el._current;var count=Math.floor(dx/10)%range.length;for(var i=range.length;--i>=0;)
if(range[i]==current)
break;while(count-->0)
if(decrease){if(--i<0)
i=range.length-1;}else if(++i>=range.length)
i=0;var newval=range[i];el.innerHTML=newval;cal.onUpdateTime();}
var mon=Calendar.findMonth(target);if(mon){if(mon.month!=cal.date.getMonth()){if(cal.hilitedMonth){Calendar.removeClass(cal.hilitedMonth,"hilite");}
Calendar.addClass(mon,"hilite");cal.hilitedMonth=mon;}else if(cal.hilitedMonth){Calendar.removeClass(cal.hilitedMonth,"hilite");}}else{if(cal.hilitedMonth){Calendar.removeClass(cal.hilitedMonth,"hilite");}
var year=Calendar.findYear(target);if(year){if(year.year!=cal.date.getFullYear()){if(cal.hilitedYear){Calendar.removeClass(cal.hilitedYear,"hilite");}
Calendar.addClass(year,"hilite");cal.hilitedYear=year;}else if(cal.hilitedYear){Calendar.removeClass(cal.hilitedYear,"hilite");}}else if(cal.hilitedYear){Calendar.removeClass(cal.hilitedYear,"hilite");}}
return Calendar.stopEvent(ev);};Calendar.tableMouseDown=function(ev){if(Calendar.getTargetElement(ev)==Calendar.getElement(ev)){return Calendar.stopEvent(ev);}};Calendar.calDragIt=function(ev){var cal=Calendar._C;if(!(cal&&cal.dragging)){return false;}
var posX;var posY;if(Calendar.is_ie){posY=window.event.clientY+document.body.scrollTop;posX=window.event.clientX+document.body.scrollLeft;}else{posX=ev.pageX;posY=ev.pageY;}
cal.hideShowCovered();var st=cal.element.style;st.left=(posX-cal.xOffs)+"px";st.top=(posY-cal.yOffs)+"px";return Calendar.stopEvent(ev);};Calendar.calDragEnd=function(ev){var cal=Calendar._C;if(!cal){return false;}
cal.dragging=false;with(Calendar){removeEvent(document,"mousemove",calDragIt);removeEvent(document,"mouseup",calDragEnd);tableMouseUp(ev);}
cal.hideShowCovered();};Calendar.dayMouseDown=function(ev){var el=Calendar.getElement(ev);if(el.disabled){return false;}
var cal=el.calendar;cal.activeDiv=el;Calendar._C=cal;if(el.navtype!=300)with(Calendar){if(el.navtype==50){el._current=el.innerHTML;addEvent(document,"mousemove",tableMouseOver);}else
addEvent(document,Calendar.is_ie5?"mousemove":"mouseover",tableMouseOver);addClass(el,"hilite active");addEvent(document,"mouseup",tableMouseUp);}else if(cal.isPopup){cal._dragStart(ev);}
if(el.navtype==-1||el.navtype==1){if(cal.timeout)clearTimeout(cal.timeout);cal.timeout=setTimeout("Calendar.showMonthsCombo()",250);}else if(el.navtype==-2||el.navtype==2){if(cal.timeout)clearTimeout(cal.timeout);cal.timeout=setTimeout((el.navtype>0)?"Calendar.showYearsCombo(true)":"Calendar.showYearsCombo(false)",250);}else{cal.timeout=null;}
return Calendar.stopEvent(ev);};Calendar.dayMouseDblClick=function(ev){Calendar.cellClick(Calendar.getElement(ev),ev||window.event);if(Calendar.is_ie){document.selection.empty();}};Calendar.dayMouseOver=function(ev){var el=Calendar.getElement(ev);if(Calendar.isRelated(el,ev)||Calendar._C||el.disabled){return false;}
if(el.ttip){if(el.ttip.substr(0,1)=="_"){el.ttip=el.caldate.print(el.calendar.ttDateFormat)+el.ttip.substr(1);}
el.calendar.tooltips.innerHTML=el.ttip;}
if(el.navtype!=300){Calendar.addClass(el,"hilite");if(el.caldate){Calendar.addClass(el.parentNode,"rowhilite");}}
return Calendar.stopEvent(ev);};Calendar.dayMouseOut=function(ev){with(Calendar){var el=getElement(ev);if(isRelated(el,ev)||_C||el.disabled)
return false;removeClass(el,"hilite");if(el.caldate)
removeClass(el.parentNode,"rowhilite");if(el.calendar)
el.calendar.tooltips.innerHTML=_TT["SEL_DATE"];return stopEvent(ev);}};Calendar.cellClick=function(el,ev){var cal=el.calendar;var closing=false;var newdate=false;var date=null;if(typeof el.navtype=="undefined"){if(cal.currentDateEl){Calendar.removeClass(cal.currentDateEl,"selected");Calendar.addClass(el,"selected");closing=(cal.currentDateEl==el);if(!closing){cal.currentDateEl=el;}}
cal.date.setDateOnly(el.caldate);date=cal.date;var other_month=!(cal.dateClicked=!el.otherMonth);if(!other_month&&!cal.currentDateEl)
cal._toggleMultipleDate(new Date(date));else
newdate=!el.disabled;if(other_month)
cal._init(cal.firstDayOfWeek,date);}else{if(el.navtype==200){Calendar.removeClass(el,"hilite");cal.callCloseHandler();return;}
date=new Date(cal.date);if(el.navtype==0)
date.setDateOnly(new Date());cal.dateClicked=false;var year=date.getFullYear();var mon=date.getMonth();function setMonth(m){var day=date.getDate();var max=date.getMonthDays(m);if(day>max){date.setDate(max);}
date.setMonth(m);};switch(el.navtype){case 400:Calendar.removeClass(el,"hilite");var text=Calendar._TT["ABOUT"];if(typeof text!="undefined"){text+=cal.showsTime?Calendar._TT["ABOUT_TIME"]:"";}else{text="Help and about box text is not translated into this language.\n"+"If you know this language and you feel generous please update\n"+"the corresponding file in \"lang\" subdir to match calendar-en.js\n"+"and send it back to <mihai_bazon@yahoo.com> to get it into the distribution  ;-)\n\n"+"Thank you!\n"+"http://dynarch.com/mishoo/calendar.epl\n";}
genericAlertPopup('alert_parameter_text');return;case-2:if(year>cal.minYear){date.setFullYear(year-1);}
break;case-1:if(mon>0){setMonth(mon-1);}else if(year-->cal.minYear){date.setFullYear(year);setMonth(11);}
break;case 1:if(mon<11){setMonth(mon+1);}else if(year<cal.maxYear){date.setFullYear(year+1);setMonth(0);}
break;case 2:if(year<cal.maxYear){date.setFullYear(year+1);}
break;case 100:cal.setFirstDayOfWeek(el.fdow);return;case 50:var range=el._range;var current=el.innerHTML;for(var i=range.length;--i>=0;)
if(range[i]==current)
break;if(ev&&ev.shiftKey){if(--i<0)
i=range.length-1;}else if(++i>=range.length)
i=0;var newval=range[i];el.innerHTML=newval;cal.onUpdateTime();return;case 0:if((typeof cal.getDateStatus=="function")&&cal.getDateStatus(date,date.getFullYear(),date.getMonth(),date.getDate())){return false;}
break;}
if(!date.equalsTo(cal.date)){cal.setDate(date);newdate=true;}else if(el.navtype==0)
newdate=closing=true;}
if(newdate){ev&&cal.callHandler();}
if(closing){Calendar.removeClass(el,"hilite");ev&&cal.callCloseHandler();}};Calendar.prototype.create=function(_par){var parent=null;if(!_par){parent=document.getElementsByTagName("body")[0];this.isPopup=true;}else{parent=_par;this.isPopup=false;}
this.date=this.dateStr?new Date(this.dateStr):new Date();var table=Calendar.createElement("table");this.table=table;table.cellSpacing=0;table.cellPadding=0;table.calendar=this;Calendar.addEvent(table,"mousedown",Calendar.tableMouseDown);var div=Calendar.createElement("div");this.element=div;div.className="calendar";if(this.isPopup){div.style.position="absolute";div.style.display="none";}
div.appendChild(table);var thead=Calendar.createElement("thead",table);var cell=null;var row=null;var cal=this;var hh=function(text,cs,navtype){cell=Calendar.createElement("td",row);cell.colSpan=cs;cell.className="button";if(navtype!=0&&Math.abs(navtype)<=2)
cell.className+=" nav";Calendar._add_evs(cell);cell.calendar=cal;cell.navtype=navtype;cell.innerHTML="<div unselectable='on'>"+text+"</div>";return cell;};row=Calendar.createElement("tr",thead);var title_length=6;(this.isPopup)&&--title_length;(this.weekNumbers)&&++title_length;hh("?",1,400).ttip=Calendar._TT["INFO"];this.title=hh("",title_length,300);this.title.className="title";if(this.isPopup){this.title.ttip=Calendar._TT["DRAG_TO_MOVE"];this.title.style.cursor="move";hh("&#x00d7;",1,200).ttip=Calendar._TT["CLOSE"];}
row=Calendar.createElement("tr",thead);row.className="headrow";this._nav_py=hh("&#x00ab;",1,-2);this._nav_py.ttip=Calendar._TT["PREV_YEAR"];this._nav_pm=hh("&#x2039;",1,-1);this._nav_pm.ttip=Calendar._TT["PREV_MONTH"];this._nav_now=hh(Calendar._TT["TODAY"],this.weekNumbers?4:3,0);this._nav_now.ttip=Calendar._TT["GO_TODAY"];this._nav_nm=hh("&#x203a;",1,1);this._nav_nm.ttip=Calendar._TT["NEXT_MONTH"];this._nav_ny=hh("&#x00bb;",1,2);this._nav_ny.ttip=Calendar._TT["NEXT_YEAR"];row=Calendar.createElement("tr",thead);row.className="daynames";if(this.weekNumbers){cell=Calendar.createElement("td",row);cell.className="name wn";cell.innerHTML=Calendar._TT["WK"];}
for(var i=7;i>0;--i){cell=Calendar.createElement("td",row);if(!i){cell.navtype=100;cell.calendar=this;Calendar._add_evs(cell);}}
this.firstdayname=(this.weekNumbers)?row.firstChild.nextSibling:row.firstChild;this._displayWeekdays();var tbody=Calendar.createElement("tbody",table);this.tbody=tbody;for(i=6;i>0;--i){row=Calendar.createElement("tr",tbody);if(this.weekNumbers){cell=Calendar.createElement("td",row);}
for(var j=7;j>0;--j){cell=Calendar.createElement("td",row);cell.calendar=this;Calendar._add_evs(cell);}}
if(this.showsTime){row=Calendar.createElement("tr",tbody);row.className="time";cell=Calendar.createElement("td",row);cell.className="time";cell.colSpan=2;cell.innerHTML=Calendar._TT["TIME"]||"&nbsp;";cell=Calendar.createElement("td",row);cell.className="time";cell.colSpan=this.weekNumbers?4:3;(function(){function makeTimePart(className,init,range_start,range_end){var part=Calendar.createElement("span",cell);part.className=className;part.innerHTML=init;part.calendar=cal;part.ttip=Calendar._TT["TIME_PART"];part.navtype=50;part._range=[];if(typeof range_start!="number")
part._range=range_start;else{for(var i=range_start;i<=range_end;++i){var txt;if(i<10&&range_end>=10)txt='0'+i;else txt=''+i;part._range[part._range.length]=txt;}}
Calendar._add_evs(part);return part;};var hrs=cal.date.getHours();var mins=cal.date.getMinutes();var t12=!cal.time24;var pm=(hrs>12);if(t12&&pm)hrs-=12;var H=makeTimePart("hour",hrs,t12?1:0,t12?12:23);var span=Calendar.createElement("span",cell);span.innerHTML=":";span.className="colon";var M=makeTimePart("minute",mins,0,59);var AP=null;cell=Calendar.createElement("td",row);cell.className="time";cell.colSpan=2;if(t12)
AP=makeTimePart("ampm",pm?"pm":"am",["am","pm"]);else
cell.innerHTML="&nbsp;";cal.onSetTime=function(){var pm,hrs=this.date.getHours(),mins=this.date.getMinutes();if(t12){pm=(hrs>=12);if(pm)hrs-=12;if(hrs==0)hrs=12;AP.innerHTML=pm?"pm":"am";}
H.innerHTML=(hrs<10)?("0"+hrs):hrs;M.innerHTML=(mins<10)?("0"+mins):mins;};cal.onUpdateTime=function(){var date=this.date;var h=parseInt(H.innerHTML,10);if(t12){if(/pm/i.test(AP.innerHTML)&&h<12)
h+=12;else if(/am/i.test(AP.innerHTML)&&h==12)
h=0;}
var d=date.getDate();var m=date.getMonth();var y=date.getFullYear();date.setHours(h);date.setMinutes(parseInt(M.innerHTML,10));date.setFullYear(y);date.setMonth(m);date.setDate(d);this.dateClicked=false;this.callHandler();};})();}else{this.onSetTime=this.onUpdateTime=function(){};}
var tfoot=Calendar.createElement("tfoot",table);row=Calendar.createElement("tr",tfoot);row.className="footrow";cell=hh(Calendar._TT["SEL_DATE"],this.weekNumbers?8:7,300);cell.className="ttip";if(this.isPopup){cell.ttip=Calendar._TT["DRAG_TO_MOVE"];cell.style.cursor="move";}
this.tooltips=cell;div=Calendar.createElement("div",this.element);this.monthsCombo=div;div.className="combo";for(i=0;i<Calendar._MN.length;++i){var mn=Calendar.createElement("div");mn.className=Calendar.is_ie?"label-IEfix":"label";mn.month=i;mn.innerHTML=Calendar._SMN[i];div.appendChild(mn);}
div=Calendar.createElement("div",this.element);this.yearsCombo=div;div.className="combo";for(i=12;i>0;--i){var yr=Calendar.createElement("div");yr.className=Calendar.is_ie?"label-IEfix":"label";div.appendChild(yr);}
this._init(this.firstDayOfWeek,this.date);parent.appendChild(this.element);};Calendar._keyEvent=function(ev){var cal=window._dynarch_popupCalendar;if(!cal||cal.multiple)
return false;(Calendar.is_ie)&&(ev=window.event);var act=(Calendar.is_ie||ev.type=="keypress"),K=ev.keyCode;if(ev.ctrlKey){switch(K){case 37:act&&Calendar.cellClick(cal._nav_pm);break;case 38:act&&Calendar.cellClick(cal._nav_py);break;case 39:act&&Calendar.cellClick(cal._nav_nm);break;case 40:act&&Calendar.cellClick(cal._nav_ny);break;default:return false;}}else switch(K){case 32:Calendar.cellClick(cal._nav_now);break;case 27:act&&cal.callCloseHandler();break;case 37:case 38:case 39:case 40:if(act){var prev,x,y,ne,el,step;prev=K==37||K==38;step=(K==37||K==39)?1:7;function setVars(){el=cal.currentDateEl;var p=el.pos;x=p&15;y=p>>4;ne=cal.ar_days[y][x];};setVars();function prevMonth(){var date=new Date(cal.date);date.setDate(date.getDate()-step);cal.setDate(date);};function nextMonth(){var date=new Date(cal.date);date.setDate(date.getDate()+step);cal.setDate(date);};while(1){switch(K){case 37:if(--x>=0)
ne=cal.ar_days[y][x];else{x=6;K=38;continue;}
break;case 38:if(--y>=0)
ne=cal.ar_days[y][x];else{prevMonth();setVars();}
break;case 39:if(++x<7)
ne=cal.ar_days[y][x];else{x=0;K=40;continue;}
break;case 40:if(++y<cal.ar_days.length)
ne=cal.ar_days[y][x];else{nextMonth();setVars();}
break;}
break;}
if(ne){if(!ne.disabled)
Calendar.cellClick(ne);else if(prev)
prevMonth();else
nextMonth();}}
break;case 13:if(act)
Calendar.cellClick(cal.currentDateEl,ev);break;default:return false;}
return Calendar.stopEvent(ev);};Calendar.prototype._init=function(firstDayOfWeek,date){var today=new Date(),TY=today.getFullYear(),TM=today.getMonth(),TD=today.getDate();this.table.style.visibility="hidden";var year=date.getFullYear();if(year<this.minYear){year=this.minYear;date.setFullYear(year);}else if(year>this.maxYear){year=this.maxYear;date.setFullYear(year);}
this.firstDayOfWeek=firstDayOfWeek;this.date=new Date(date);var month=date.getMonth();var mday=date.getDate();var no_days=date.getMonthDays();date.setDate(1);var day1=(date.getDay()-this.firstDayOfWeek)%7;if(day1<0)
day1+=7;date.setDate(-day1);date.setDate(date.getDate()+1);var row=this.tbody.firstChild;var MN=Calendar._SMN[month];var ar_days=this.ar_days=new Array();var weekend=Calendar._TT["WEEKEND"];var dates=this.multiple?(this.datesCells={}):null;for(var i=0;i<6;++i,row=row.nextSibling){var cell=row.firstChild;if(this.weekNumbers){cell.className="day wn";cell.innerHTML=date.getWeekNumber();cell=cell.nextSibling;}
row.className="daysrow";var hasdays=false,iday,dpos=ar_days[i]=[];for(var j=0;j<7;++j,cell=cell.nextSibling,date.setDate(iday+1)){iday=date.getDate();var wday=date.getDay();cell.className="day";cell.pos=i<<4|j;dpos[j]=cell;var current_month=(date.getMonth()==month);if(!current_month){if(this.showsOtherMonths){cell.className+=" othermonth";cell.otherMonth=true;}else{cell.className="emptycell";cell.innerHTML="&nbsp;";cell.disabled=true;continue;}}else{cell.otherMonth=false;hasdays=true;}
cell.disabled=false;cell.innerHTML=this.getDateText?this.getDateText(date,iday):iday;if(dates)
dates[date.print("%Y%m%d")]=cell;if(this.getDateStatus){var status=this.getDateStatus(date,year,month,iday);if(this.getDateToolTip){var toolTip=this.getDateToolTip(date,year,month,iday);if(toolTip)
cell.title=toolTip;}
if(status===true){cell.className+=" disabled";cell.disabled=true;}else{if(/disabled/i.test(status))
cell.disabled=true;cell.className+=" "+status;}}
if(!cell.disabled){cell.caldate=new Date(date);cell.ttip="_";if(!this.multiple&&current_month&&iday==mday&&this.hiliteToday){cell.className+=" selected";this.currentDateEl=cell;}
if(date.getFullYear()==TY&&date.getMonth()==TM&&iday==TD){cell.className+=" today";cell.ttip+=Calendar._TT["PART_TODAY"];}
if(weekend.indexOf(wday.toString())!=-1)
cell.className+=cell.otherMonth?" oweekend":" weekend";}}
if(!(hasdays||this.showsOtherMonths))
row.className="emptyrow";}
this.title.innerHTML=Calendar._MN[month]+", "+year;this.onSetTime();this.table.style.visibility="visible";this._initMultipleDates();};Calendar.prototype._initMultipleDates=function(){if(this.multiple){for(var i in this.multiple){var cell=this.datesCells[i];var d=this.multiple[i];if(!d)
continue;if(cell)
cell.className+=" selected";}}};Calendar.prototype._toggleMultipleDate=function(date){if(this.multiple){var ds=date.print("%Y%m%d");var cell=this.datesCells[ds];if(cell){var d=this.multiple[ds];if(!d){Calendar.addClass(cell,"selected");this.multiple[ds]=date;}else{Calendar.removeClass(cell,"selected");delete this.multiple[ds];}}}};Calendar.prototype.setDateToolTipHandler=function(unaryFunction){this.getDateToolTip=unaryFunction;};Calendar.prototype.setDate=function(date){if(!date.equalsTo(this.date)){this._init(this.firstDayOfWeek,date);}};Calendar.prototype.refresh=function(){this._init(this.firstDayOfWeek,this.date);};Calendar.prototype.setFirstDayOfWeek=function(firstDayOfWeek){this._init(firstDayOfWeek,this.date);this._displayWeekdays();};Calendar.prototype.setDateStatusHandler=Calendar.prototype.setDisabledHandler=function(unaryFunction){this.getDateStatus=unaryFunction;};Calendar.prototype.setRange=function(a,z){this.minYear=a;this.maxYear=z;};Calendar.prototype.callHandler=function(){if(this.onSelected){this.onSelected(this,this.date.print(this.dateFormat));}};Calendar.prototype.callCloseHandler=function(){if(this.onClose){this.onClose(this);}
this.hideShowCovered();};Calendar.prototype.destroy=function(){var el=this.element.parentNode;el.removeChild(this.element);Calendar._C=null;window._dynarch_popupCalendar=null;};Calendar.prototype.reparent=function(new_parent){var el=this.element;el.parentNode.removeChild(el);new_parent.appendChild(el);};Calendar._checkCalendar=function(ev){var calendar=window._dynarch_popupCalendar;if(!calendar){return false;}
var el=Calendar.is_ie?Calendar.getElement(ev):Calendar.getTargetElement(ev);for(;el!=null&&el!=calendar.element;el=el.parentNode);if(el==null){window._dynarch_popupCalendar.callCloseHandler();return Calendar.stopEvent(ev);}};Calendar.prototype.show=function(){var rows=this.table.getElementsByTagName("tr");for(var i=rows.length;i>0;){var row=rows[--i];Calendar.removeClass(row,"rowhilite");var cells=row.getElementsByTagName("td");for(var j=cells.length;j>0;){var cell=cells[--j];Calendar.removeClass(cell,"hilite");Calendar.removeClass(cell,"active");}}
this.element.style.display="block";this.hidden=false;if(this.isPopup){window._dynarch_popupCalendar=this;Calendar.addEvent(document,"keydown",Calendar._keyEvent);Calendar.addEvent(document,"keypress",Calendar._keyEvent);Calendar.addEvent(document,"mousedown",Calendar._checkCalendar);}
this.hideShowCovered();};Calendar.prototype.hide=function(){if(this.isPopup){Calendar.removeEvent(document,"keydown",Calendar._keyEvent);Calendar.removeEvent(document,"keypress",Calendar._keyEvent);Calendar.removeEvent(document,"mousedown",Calendar._checkCalendar);}
this.element.style.display="none";this.hidden=true;this.hideShowCovered();};Calendar.prototype.showAt=function(x,y){var s=this.element.style;s.left=x+"px";s.top=y+"px";this.show();};Calendar.prototype.showAtElement=function(el,opts){var self=this;var p=Calendar.getAbsolutePos(el);if(!opts||typeof opts!="string"){this.showAt(p.x,p.y+el.offsetHeight);return true;}
function fixPosition(box){if(box.x<0)
box.x=0;if(box.y<0)
box.y=0;var cp=document.createElement("div");var s=cp.style;s.position="absolute";s.right=s.bottom=s.width=s.height="0px";document.body.appendChild(cp);var br=Calendar.getAbsolutePos(cp);document.body.removeChild(cp);br.y+=window.scrollY;br.x+=window.scrollX;var tmp=box.x+box.width-br.x;if(tmp>0)box.x-=tmp;tmp=box.y+box.height-br.y;if(tmp>0)box.y-=tmp;};this.element.style.display="block";Calendar.continuation_for_the_fucking_khtml_browser=function(){var w=self.element.offsetWidth;var h=self.element.offsetHeight;self.element.style.display="none";var valign=opts.substr(0,1);var halign="l";if(opts.length>1){halign=opts.substr(1,1);}
switch(valign){case"T":p.y-=h;break;case"B":p.y+=el.offsetHeight;break;case"C":p.y+=(el.offsetHeight-h)/2;break;case"t":p.y+=el.offsetHeight-h;break;case"b":break;}
switch(halign){case"L":p.x-=w;break;case"R":p.x+=el.offsetWidth;break;case"C":p.x+=(el.offsetWidth-w)/2;break;case"l":p.x+=el.offsetWidth-w;break;case"r":break;}
p.width=w;p.height=h+40;self.monthsCombo.style.display="none";fixPosition(p);self.showAt(p.x,p.y);};if(Calendar.is_khtml)
setTimeout("Calendar.continuation_for_the_fucking_khtml_browser()",10);else
Calendar.continuation_for_the_fucking_khtml_browser();};Calendar.prototype.setDateFormat=function(str){this.dateFormat=str;};Calendar.prototype.setTtDateFormat=function(str){this.ttDateFormat=str;};Calendar.prototype.parseDate=function(str,fmt){if(!fmt)
fmt=this.dateFormat;this.setDate(Date.parseDate(str,fmt));};Calendar.prototype.hideShowCovered=function(){if(!Calendar.is_ie&&!Calendar.is_opera)
return;function getVisib(obj){var value=obj.style.visibility;if(!value){if(document.defaultView&&typeof(document.defaultView.getComputedStyle)=="function"){if(!Calendar.is_khtml)
value=document.defaultView.getComputedStyle(obj,"").getPropertyValue("visibility");else
value='';}else if(obj.currentStyle){value=obj.currentStyle.visibility;}else
value='';}
return value;};var tags=new Array("applet","iframe","select");var el=this.element;var p=Calendar.getAbsolutePos(el);var EX1=p.x;var EX2=el.offsetWidth+EX1;var EY1=p.y;var EY2=el.offsetHeight+EY1;for(var k=tags.length;k>0;){var ar=document.getElementsByTagName(tags[--k]);var cc=null;for(var i=ar.length;i>0;){cc=ar[--i];p=Calendar.getAbsolutePos(cc);var CX1=p.x;var CX2=cc.offsetWidth+CX1;var CY1=p.y;var CY2=cc.offsetHeight+CY1;if(this.hidden||(CX1>EX2)||(CX2<EX1)||(CY1>EY2)||(CY2<EY1)){if(!cc.__msh_save_visibility){cc.__msh_save_visibility=getVisib(cc);}
cc.style.visibility=cc.__msh_save_visibility;}else{if(!cc.__msh_save_visibility){cc.__msh_save_visibility=getVisib(cc);}
cc.style.visibility="hidden";}}}};Calendar.prototype._displayWeekdays=function(){var fdow=this.firstDayOfWeek;var cell=this.firstdayname;var weekend=Calendar._TT["WEEKEND"];for(var i=0;i<7;++i){cell.className="day name";var realday=(i+fdow)%7;if(i){cell.ttip=Calendar._TT["DAY_FIRST"].replace("%s",Calendar._DN[realday]);cell.navtype=100;cell.calendar=this;cell.fdow=realday;Calendar._add_evs(cell);}
if(weekend.indexOf(realday.toString())!=-1){Calendar.addClass(cell,"weekend");}
cell.innerHTML=Calendar._SDN[(i+fdow)%7];cell=cell.nextSibling;}};Calendar.prototype._hideCombos=function(){this.monthsCombo.style.display="none";this.yearsCombo.style.display="none";};Calendar.prototype._dragStart=function(ev){if(this.dragging){return;}
this.dragging=true;var posX;var posY;if(Calendar.is_ie){posY=window.event.clientY+document.body.scrollTop;posX=window.event.clientX+document.body.scrollLeft;}else{posY=ev.clientY+window.scrollY;posX=ev.clientX+window.scrollX;}
var st=this.element.style;this.xOffs=posX-parseInt(st.left);this.yOffs=posY-parseInt(st.top);with(Calendar){addEvent(document,"mousemove",calDragIt);addEvent(document,"mouseup",calDragEnd);}};Date._MD=new Array(31,28,31,30,31,30,31,31,30,31,30,31);Date.SECOND=1000;Date.MINUTE=60*Date.SECOND;Date.HOUR=60*Date.MINUTE;Date.DAY=24*Date.HOUR;Date.WEEK=7*Date.DAY;Date.parseDate=function(str,fmt){var today=new Date();var y=0;var m=-1;var d=0;var a=str.split(/\W+/);var b=fmt.match(/%./g);var i=0,j=0;var hr=0;var min=0;for(i=0;i<a.length;++i){if(!a[i])
continue;switch(b[i]){case"%d":case"%e":d=parseInt(a[i],10);break;case"%m":m=parseInt(a[i],10)-1;break;case"%Y":case"%y":y=parseInt(a[i],10);(y<100)&&(y+=(y>29)?1900:2000);break;case"%b":case"%B":for(j=0;j<12;++j){if(Calendar._MN[j].substr(0,a[i].length).toLowerCase()==a[i].toLowerCase()){m=j;break;}}
break;case"%H":case"%I":case"%k":case"%l":hr=parseInt(a[i],10);break;case"%P":case"%p":if(/pm/i.test(a[i])&&hr<12)
hr+=12;else if(/am/i.test(a[i])&&hr>=12)
hr-=12;break;case"%M":min=parseInt(a[i],10);break;}}
if(isNaN(y))y=today.getFullYear();if(isNaN(m))m=today.getMonth();if(isNaN(d))d=today.getDate();if(isNaN(hr))hr=today.getHours();if(isNaN(min))min=today.getMinutes();if(y!=0&&m!=-1&&d!=0)
return new Date(y,m,d,hr,min,0);y=0;m=-1;d=0;for(i=0;i<a.length;++i){if(a[i].search(/[a-zA-Z]+/)!=-1){var t=-1;for(j=0;j<12;++j){if(Calendar._MN[j].substr(0,a[i].length).toLowerCase()==a[i].toLowerCase()){t=j;break;}}
if(t!=-1){if(m!=-1){d=m+1;}
m=t;}}else if(parseInt(a[i],10)<=12&&m==-1){m=a[i]-1;}else if(parseInt(a[i],10)>31&&y==0){y=parseInt(a[i],10);(y<100)&&(y+=(y>29)?1900:2000);}else if(d==0){d=a[i];}}
if(y==0)
y=today.getFullYear();if(m!=-1&&d!=0)
return new Date(y,m,d,hr,min,0);return today;};Date.prototype.getMonthDays=function(month){var year=this.getFullYear();if(typeof month=="undefined"){month=this.getMonth();}
if(((0==(year%4))&&((0!=(year%100))||(0==(year%400))))&&month==1){return 29;}else{return Date._MD[month];}};Date.prototype.getDayOfYear=function(){var now=new Date(this.getFullYear(),this.getMonth(),this.getDate(),0,0,0);var then=new Date(this.getFullYear(),0,0,0,0,0);var time=now-then;return Math.floor(time/Date.DAY);};Date.prototype.getWeekNumber=function(){var d=new Date(this.getFullYear(),this.getMonth(),this.getDate(),0,0,0);var DoW=d.getDay();d.setDate(d.getDate()-(DoW+6)%7+3);var ms=d.valueOf();d.setMonth(0);d.setDate(4);return Math.round((ms-d.valueOf())/(7*864e5))+1;};Date.prototype.equalsTo=function(date){return((this.getFullYear()==date.getFullYear())&&(this.getMonth()==date.getMonth())&&(this.getDate()==date.getDate())&&(this.getHours()==date.getHours())&&(this.getMinutes()==date.getMinutes()));};Date.prototype.setDateOnly=function(date){var tmp=new Date(date);this.setDate(1);this.setFullYear(tmp.getFullYear());this.setMonth(tmp.getMonth());this.setDate(tmp.getDate());};Date.prototype.print=function(str){var m=this.getMonth();var d=this.getDate();var y=this.getFullYear();var wn=this.getWeekNumber();var w=this.getDay();var s={};var hr=this.getHours();var pm=(hr>=12);var ir=(pm)?(hr-12):hr;var dy=this.getDayOfYear();if(ir==0)
ir=12;var min=this.getMinutes();var sec=this.getSeconds();s["%a"]=Calendar._SDN[w];s["%A"]=Calendar._DN[w];s["%b"]=Calendar._SMN[m];s["%B"]=Calendar._MN[m];s["%C"]=1+Math.floor(y/100);s["%d"]=(d<10)?("0"+d):d;s["%e"]=d;s["%H"]=(hr<10)?("0"+hr):hr;s["%I"]=(ir<10)?("0"+ir):ir;s["%j"]=(dy<100)?((dy<10)?("00"+dy):("0"+dy)):dy;s["%k"]=hr;s["%l"]=ir;s["%m"]=(m<9)?("0"+(1+m)):(1+m);s["%M"]=(min<10)?("0"+min):min;s["%n"]="\n";s["%p"]=pm?"PM":"AM";s["%P"]=pm?"pm":"am";s["%s"]=Math.floor(this.getTime()/1000);s["%S"]=(sec<10)?("0"+sec):sec;s["%t"]="\t";s["%U"]=s["%W"]=s["%V"]=(wn<10)?("0"+wn):wn;s["%u"]=w+1;s["%w"]=w;s["%y"]=(''+y).substr(2,2);s["%Y"]=y;s["%%"]="%";var re=/%./g;if(!Calendar.is_ie5&&!Calendar.is_khtml)
return str.replace(re,function(par){return s[par]||par;});var a=str.match(re);for(var i=0;i<a.length;i++){var tmp=s[a[i]];if(tmp){re=new RegExp(a[i],'g');str=str.replace(re,tmp);}}
return str;};Date.prototype.__msh_oldSetFullYear=Date.prototype.setFullYear;Date.prototype.setFullYear=function(y){var d=new Date(this);d.__msh_oldSetFullYear(y);if(d.getMonth()!=this.getMonth())
this.setDate(28);this.__msh_oldSetFullYear(y);};window._dynarch_popupCalendar=null;;Calendar._DN=new Array
("Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday");Calendar._SDN=new Array
("Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun");Calendar._FD=0;Calendar._MN=new Array
("January","February","March","April","May","June","July","August","September","October","November","December");Calendar._SMN=new Array
("Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec");Calendar._TT={};Calendar._TT["INFO"]="About the calendar";Calendar._TT["ABOUT"]="DHTML Date/Time Selector\n"+"(c) dynarch.com 2002-2005 / Author: Mihai Bazon\n"+"For latest version visit: http://www.dynarch.com/projects/calendar/\n"+"Distributed under GNU LGPL.  See http://gnu.org/licenses/lgpl.html for details."+"\n\n"+"Date selection:\n"+"- Use the \xab, \xbb buttons to select year\n"+"- Use the "+String.fromCharCode(0x2039)+", "+String.fromCharCode(0x203a)+" buttons to select month\n"+"- Hold mouse button on any of the above buttons for faster selection.";Calendar._TT["ABOUT_TIME"]="\n\n"+"Time selection:\n"+"- Click on any of the time parts to increase it\n"+"- or Shift-click to decrease it\n"+"- or click and drag for faster selection.";Calendar._TT["PREV_YEAR"]="Prev. year (hold for menu)";Calendar._TT["PREV_MONTH"]="Prev. month (hold for menu)";Calendar._TT["GO_TODAY"]="Go Today";Calendar._TT["NEXT_MONTH"]="Next month (hold for menu)";Calendar._TT["NEXT_YEAR"]="Next year (hold for menu)";Calendar._TT["SEL_DATE"]="Select date";Calendar._TT["DRAG_TO_MOVE"]="Drag to move";Calendar._TT["PART_TODAY"]=" (today)";Calendar._TT["DAY_FIRST"]="Display %s first";Calendar._TT["WEEKEND"]="0,6";Calendar._TT["CLOSE"]="Close";Calendar._TT["TODAY"]="Today";Calendar._TT["TIME_PART"]="(Shift-)Click or drag to change value";Calendar._TT["DEF_DATE_FORMAT"]="%Y-%m-%d";Calendar._TT["TT_DATE_FORMAT"]="%a, %b %e";Calendar._TT["WK"]="wk";Calendar._TT["TIME"]="Time:";;Calendar.setup=function(params){function param_default(pname,def){if(typeof params[pname]=="undefined"){params[pname]=def;}};param_default("inputField",null);param_default("displayArea",null);param_default("button",null);param_default("eventName","click");param_default("ifFormat","%Y/%m/%d");param_default("daFormat","%Y/%m/%d");param_default("singleClick",true);param_default("disableFunc",null);param_default("dateStatusFunc",params["disableFunc"]);param_default("dateText",null);param_default("firstDay",null);param_default("align","br");param_default("range",[1900,2099]);param_default("weekNumbers",true);param_default("flat",null);param_default("flatCallback",null);param_default("onSelect",null);param_default("onClose",null);param_default("onUpdate",null);param_default("date",null);param_default("showsTime",true);param_default("timeFormat","24");param_default("electric",true);param_default("step",1);param_default("position",null);param_default("cache",false);param_default("showOthers",false);param_default("multiple",null);var tmp=["inputField","displayArea","button"];for(var i in tmp){if(typeof params[tmp[i]]=="string"){params[tmp[i]]=document.getElementById(params[tmp[i]]);}}
if(!(params.flat||params.multiple||params.inputField||params.displayArea||params.button)){alert("Calendar.setup:\n  Nothing to setup (no fields found).  Please check your code");return false;}
function onSelect(cal){var p=cal.params;var update=(cal.dateClicked||p.electric);if(update&&p.inputField){p.inputField.value=cal.date.print(p.ifFormat);if(typeof p.inputField.onchange=="function")
p.inputField.onchange();}
if(update&&p.displayArea)
p.displayArea.innerHTML=cal.date.print(p.daFormat);if(update&&typeof p.onUpdate=="function")
p.onUpdate(cal);if(update&&p.flat){if(typeof p.flatCallback=="function")
p.flatCallback(cal);}
if(update&&p.singleClick&&cal.dateClicked)
cal.callCloseHandler();};if(params.flat!=null){if(typeof params.flat=="string")
params.flat=document.getElementById(params.flat);if(!params.flat){alert("Calendar.setup:\n  Flat specified but can't find parent.");return false;}
var cal=new Calendar(params.firstDay,params.date,params.onSelect||onSelect);cal.showsOtherMonths=params.showOthers;cal.showsTime=params.showsTime;cal.time24=(params.timeFormat=="24");cal.params=params;cal.weekNumbers=params.weekNumbers;cal.setRange(params.range[0],params.range[1]);cal.setDateStatusHandler(params.dateStatusFunc);cal.getDateText=params.dateText;if(params.ifFormat){cal.setDateFormat(params.ifFormat);}
if(params.inputField&&typeof params.inputField.value=="string"){cal.parseDate(params.inputField.value);}
cal.create(params.flat);cal.show();return false;}
var triggerEl=params.button||params.displayArea||params.inputField;triggerEl["on"+params.eventName]=function(){var dateEl=params.inputField||params.displayArea;var dateFmt=params.inputField?params.ifFormat:params.daFormat;var mustCreate=false;var cal=window.calendar;if(dateEl)
params.date=Date.parseDate(dateEl.value||dateEl.innerHTML,dateFmt);if(!(cal&&params.cache)){window.calendar=cal=new Calendar(params.firstDay,params.date,params.onSelect||onSelect,params.onClose||function(cal){cal.hide();});cal.showsTime=params.showsTime;cal.time24=(params.timeFormat=="24");cal.weekNumbers=params.weekNumbers;mustCreate=true;}else{if(params.date)
cal.setDate(params.date);cal.hide();}
if(params.multiple){cal.multiple={};for(var i=params.multiple.length;--i>=0;){var d=params.multiple[i];var ds=d.print("%Y%m%d");cal.multiple[ds]=d;}}
cal.showsOtherMonths=params.showOthers;cal.yearStep=params.step;cal.setRange(params.range[0],params.range[1]);cal.params=params;cal.setDateStatusHandler(params.dateStatusFunc);cal.getDateText=params.dateText;cal.setDateFormat(dateFmt);if(mustCreate)
cal.create();cal.refresh();if(!params.position)
cal.showAtElement(params.button||params.displayArea||params.inputField,params.align);else
cal.showAt(params.position[0],params.position[1]);return false;};return cal;};;function slider_init(mobile,spremenljivka,min,max,def,handle,slider_handle_step,vmesne_labels,vmesne_Crtice,slider_MinMaxNumLabelNew,slider_window_number,vmesne_descr_labele,tip_vmesne_descr_labele,def_value,nakazi_odgovore,slider_VmesneDescrLabel,slider_CustomDescriptiveLabels,custom){$("input[name^='vrednost_"+spremenljivka+"']").css('display','none');var val=$("label[for^=spremenljivka_"+spremenljivka+"_vrednost_] input").val()||null;var minmaxlabela="label";var rest=false;var vmesne_opisne_labele=false;if(handle==1){$('#slider_'+spremenljivka).slider().removeClass("classic_slider");$('#slider_'+spremenljivka).slider().addClass("special_slider");$('#slider_'+spremenljivka+' .ui-slider-handle').css('visibility','hidden');}
else if(handle==0){$('#slider_'+spremenljivka).slider().addClass("classic_slider");$('#slider_'+spremenljivka).slider().removeClass("special_slider");$('#slider_'+spremenljivka+' .ui-slider-handle').css('visibility','');}
if(nakazi_odgovore==1&&handle==1){$('#slider_'+spremenljivka).slider().removeClass("classic_slider");$('#slider_'+spremenljivka).slider().addClass("circle_slider");}
else if(nakazi_odgovore==0&&handle==0){$('#slider_'+spremenljivka).slider().addClass("classic_slider");$('#slider_'+spremenljivka).slider().removeClass("circle_slider");}
else if(nakazi_odgovore==1&&handle==0){$('#slider_'+spremenljivka).slider().addClass("elipse_slider");}
if(nakazi_odgovore==1){vmesne_Crtice=1;}
if(slider_MinMaxNumLabelNew==1){minmaxlabela="pip";}
else{minmaxlabela="label";}
if(vmesne_Crtice==1){rest="pip";}
else if(vmesne_Crtice==0){rest=false;}
if(vmesne_labels==1||tip_vmesne_descr_labele!=0){rest="label";}
if(slider_VmesneDescrLabel){if(tip_vmesne_descr_labele!=0&&custom==''){vmesne_opisne_labele=vmesne_descr_labele.split(";");max=vmesne_opisne_labele.length-1;}else{vmesne_opisne_labele=slider_CustomDescriptiveLabels.split(";");max=vmesne_opisne_labele.length;}}
$('#slider_'+spremenljivka).slider({step:slider_handle_step,value:def,min:min,max:max,slide:function(event,ui){$("input[name^='vrednost_"+spremenljivka+"']").attr('value',ui.value);if(slider_window_number==0){$("#sliderText_"+spremenljivka).html(ui.value);var delay=function(){$("#sliderText_"+spremenljivka).position({of:ui.handle,offset:"0, -37"});};setTimeout(delay,5);}},start:function(event,ui){if(slider_window_number==0){$("#sliderText_"+spremenljivka).position({of:ui.handle,offset:"0, -37"});$("#sliderText_"+spremenljivka).css('visibility','visible');}
$("input[name^='vrednost_"+spremenljivka+"']").attr('value',def);$('#slider_'+spremenljivka+' .ui-slider-handle').css('visibility','');},stop:function(event,ui){$("input[name^='vrednost_"+spremenljivka+"']").attr('value',ui.value);},create:function(event,ui){var percent_def=(def-min)/(max-min)*100;if(percent_def<0||percent_def>100){percent_def=50;}
$('#slider_'+spremenljivka+' .ui-slider-handle').css('left',percent_def+'%');if(slider_window_number==0){$("#sliderText_"+spremenljivka).position({of:$('#slider_'+spremenljivka+' .ui-slider-handle'),offset:"0, -37"});}},change:function(event,ui){if(def_value!=def){$('#slider_'+spremenljivka+' .ui-slider-handle').css('visibility','');$("#sliderText_"+spremenljivka).position({of:$('#slider_'+spremenljivka+' .ui-slider-handle'),offset:"0, -37"});if(slider_window_number==0){$("#sliderText_"+spremenljivka).css('visibility','visible');}}}}).slider("pips",{rest:rest,first:minmaxlabela,last:minmaxlabela,labels:vmesne_opisne_labele,});$('#slider_'+spremenljivka).slider("option","value",def);if(mobile==1){$('#slider_'+spremenljivka+' span.ui-slider-label').toggleClass('ui-slider-label-mobile');$('#slider_'+spremenljivka+' span.ui-slider-pip-first span.ui-slider-label-mobile').toggleClass('ui-slider-label-mobile-first');$('#slider_'+spremenljivka+' span.ui-slider-pip-last span.ui-slider-label-mobile').toggleClass('ui-slider-label-mobile-last');}}
function slider_grid_init(mobile,spremenljivka,vrednost,min,max,def,handle,slider_handle_step,vmesne_labels,vmesne_Crtice,slider_MinMaxNumLabelNew,slider_window_number,vmesne_descr_labele,tip_vmesne_descr_labele,def_value,nakazi_odgovore,slider_VmesneDescrLabel,slider_CustomDescriptiveLabels,custom){$("input[name^=vrednost_"+vrednost+"_grid_]").css('display','none');$("#vrednost_"+vrednost+"_grid_1").css('display','none');var val=$("input[name^=vrednost_"+vrednost+"_grid_]").val()||null;var minmaxlabela="label";var rest=false;var vmesne_opisne_labele=false;if(handle==1){$('#slider_'+spremenljivka+'_'+vrednost).slider().removeClass("classic_slider");$('#slider_'+spremenljivka+'_'+vrednost).slider().addClass("special_slider");$('#slider_'+spremenljivka+'_'+vrednost+' .ui-slider-handle').css('visibility','hidden');}
else if(handle==0){$('#slider_'+spremenljivka+'_'+vrednost).slider().removeClass("special_slider");$('#slider_'+spremenljivka+'_'+vrednost).slider().addClass("classic_slider");}
if(nakazi_odgovore==1&&handle==1){$('#slider_'+spremenljivka+'_'+vrednost).slider().removeClass("classic_slider");$('#slider_'+spremenljivka+'_'+vrednost).slider().addClass("circle_slider");}
else if(nakazi_odgovore==0&&handle==0){$('#slider_'+spremenljivka+'_'+vrednost).slider().addClass("classic_slider");$('#slider_'+spremenljivka+'_'+vrednost).slider().removeClass("circle_slider");}
else if(nakazi_odgovore==1&&handle==0){$('#slider_'+spremenljivka+'_'+vrednost).slider().addClass("elipse_slider");}
if(nakazi_odgovore==1){vmesne_Crtice=1;}
if(slider_MinMaxNumLabelNew==1){minmaxlabela="pip";}
else{minmaxlabela="label";}
if(vmesne_Crtice==1){rest="pip";}
else if(vmesne_Crtice==0){rest=false;}
if(vmesne_labels==1||tip_vmesne_descr_labele!=0){rest="label";}
if(slider_VmesneDescrLabel){if(tip_vmesne_descr_labele!=0&&custom==''){vmesne_opisne_labele=vmesne_descr_labele.split(";");max=vmesne_opisne_labele.length-1;}else{vmesne_opisne_labele=slider_CustomDescriptiveLabels.split(";");max=vmesne_opisne_labele.length;}}
$('#slider_'+spremenljivka+'_'+vrednost).slider({step:slider_handle_step,value:def,min:min,max:max,slide:function(event,ui){$("input[name^='vrednost_"+vrednost+"_grid_']").attr('value',ui.value);if(slider_window_number==0){$("#sliderText_"+spremenljivka+"_"+vrednost).html(ui.value);var delay=function(){$("#sliderText_"+spremenljivka+"_"+vrednost).position({of:ui.handle,offset:"0, -37"});};setTimeout(delay,5);}},start:function(event,ui){if(slider_window_number==0){$("#sliderText_"+spremenljivka+"_"+vrednost).position({of:ui.handle,offset:"0, -37"});$("#sliderText_"+spremenljivka+"_"+vrednost).css('visibility','visible');}
$("input[name^='vrednost_"+vrednost+"_grid_']").attr('value',def);$('#slider_'+spremenljivka+'_'+vrednost+' .ui-slider-handle').css('visibility','');},stop:function(event,ui){$("input[name^='vrednost_"+vrednost+"_grid_']").attr('value',ui.value);},create:function(event,ui){var width=$("input[name^=vrednost_"+vrednost+"_grid_]").parent().width();width=width-80;$("#slider_"+spremenljivka+"_"+vrednost).width(width);var percent_def=(def-min)/(max-min)*100;if(percent_def<0||percent_def>100){percent_def=50;}
$('#slider_'+spremenljivka+'_'+vrednost+' .ui-slider-handle').css('left',percent_def+'%');if(slider_window_number==0){$("#sliderText_"+spremenljivka+"_"+vrednost).position({of:$('#slider_'+spremenljivka+'_'+vrednost+' .ui-slider-handle'),offset:"0, -37"});}},change:function(event,ui){if(def_value!=def){$('#slider_'+spremenljivka+'_'+vrednost+' .ui-slider-handle').css('visibility','');$("#sliderText_"+spremenljivka+"_"+vrednost).position({of:$('#slider_'+spremenljivka+'_'+vrednost+' .ui-slider-handle'),offset:"0, -37"});if(slider_window_number==0){$("#sliderText_"+spremenljivka+"_"+vrednost).css('visibility','visible');}}}}).slider("pips",{rest:rest,first:minmaxlabela,last:minmaxlabela,labels:vmesne_opisne_labele,});$('#slider_'+spremenljivka+'_'+vrednost).slider("option","value",def);if(mobile==1){$('#slider_'+spremenljivka+"_"+vrednost+' span.ui-slider-label').toggleClass('ui-slider-label-mobile');$('#slider_'+spremenljivka+"_"+vrednost+' span.ui-slider-pip-first span.ui-slider-label-mobile').toggleClass('ui-slider-label-mobile-first');$('#slider_'+spremenljivka+"_"+vrednost+' span.ui-slider-pip-last span.ui-slider-label-mobile').toggleClass('ui-slider-label-mobile-last');}};function init_colorPicker(id){var colorPicker='#picker';var f=$.farbtastic(colorPicker);var p=$(colorPicker).hide();var selected;$('.colorwell').each(function(){f.linkTo(this);$(this).css('opacity',0.75);}).focus(function(){if(selected){$(selected).css('opacity',0.75).removeClass('colorwell-selected');}
f.linkTo(this);p.show();$(selected=this).css('opacity',1).addClass('colorwell-selected');});$('.auto-save').change(function(){}).blur(function(){$(colorPicker).hide();vprasanje_save(true);});$('.farbtastic').mouseup(function(){vprasanje_save(true);});}
function hotspot_region_visibility_option_checkbox_prop(spremenljivka)
{if($('#hotspot_region_visibility_options_'+spremenljivka).is(":checked")){$('#hotspot_region_visibility_option_'+spremenljivka).prop('disabled',true);$('#hotspot_region_visibility_'+spremenljivka).css('display','');}
else{$('#hotspot_region_visibility_option_'+spremenljivka).prop('disabled',false);$('#hotspot_region_visibility_'+spremenljivka).css('display','none');}}
function hotspot_comment_option_checkbox_prop(spremenljivka)
{if($('#hotspot_comment_options_'+spremenljivka).is(":checked")){$('#hotspot_comment_option_'+spremenljivka).prop('disabled',true);$('#hotspot_comment_'+spremenljivka).css('display','');}
else{$('#hotspot_comment_option_'+spremenljivka).prop('disabled',false);$('#hotspot_comment_'+spremenljivka).css('display','none');}}
function hotspot_edit_regions(spr_id,vre_id){if(vre_id==0){var region_name="";var next_vrednost=function(){$.ajaxSetup({async:false});var tmp=null;$.post('ajax.php?t=vprasanje&a=get_next_hotspot_vrednost',{spr_id:spr_id,},function(data){tmp=data;});return tmp;}();if(next_vrednost!=""){var vrednost=next_vrednost;}else{var vrednost=function(){$.ajaxSetup({async:false});var tmp=null;$.post('ajax.php?t=vprasanje&a=hotspot_vrednost_new',{spremenljivka:spr_id,anketa:srv_meta_anketa_id},function(data){tmp=data;});return tmp;}();}}else{var vrednost=vre_id;var region_name=function(){$.ajaxSetup({async:false});var tmp=null;$.post('ajax.php?t=vprasanje&a=hotspot_get_region_name',{spr_id:spr_id,vrednost:vrednost,anketa:srv_meta_anketa_id},function(data){tmp=data;});return tmp;}();}
var src_image=$('#spremenljivka_contentdiv'+spr_id).find('img').attr('src');var hotspot_image_height=$('#hotspot_image_'+spr_id+'_hidden').find('img').css('height');var hotspot_image_width=$('#hotspot_image_'+spr_id+'_hidden').find('img').css('width');hotspot_image_height=parseInt(hotspot_image_height.replace('px',''));hotspot_image_width=parseInt(hotspot_image_width.replace('px',''));$('#fade').fadeTo('slow',1);$('#vrednost_edit').html('').fadeIn('slow').load('ajax.php?t=vprasanje&a=hotspot_edit_regions',{spr_id:spr_id,hotspot_image_height:hotspot_image_height,hotspot_image_width:hotspot_image_width,src_image:src_image,vrednost:vrednost,anketa:srv_meta_anketa_id,lang_id:srv_meta_lang_id,region_name:region_name},function(){});}
function hotspot_image_save(spr_id){var hotspot_image=$('#hotspot_image').val();get_editor_close('hotspot_image');$('#fade').fadeOut('slow');$('#vrednost_edit').fadeOut('slow');var paramArr=$("form[name=hotspot_image_edit]").serialize();var query_string=paramArr;if(decodeURIComponent(query_string).indexOf("style=")==-1){hotspot_image=decodeURIComponent(paramArr);var src_start=hotspot_image.indexOf('src');var src_end=hotspot_image.indexOf('"',(src_start+5));var src=hotspot_image.substring((src_start+5),src_end);var img=new Image();img.src=src;var width=img.width;var height=img.height;query_string=query_string+"&width="+width+"&height="+height;hotspot_append_hidden_image(spr_id,width,height,1);}
else{hotspot_append_hidden_image(spr_id,0,0,0);}
$.post('ajax.php?t=vprasanje&a=hotspot_image_save',query_string,function(data){$('#hotspot_image_'+spr_id).html(data);$('#hotspot_image_edit').html('');});}
function create_hotspot_input(vre_id,spr_id){}
function hotspot_region_cancel(spr_id,vre_id){$.post('ajax.php?t=vprasanje&a=hotspot_region_cancel',{spr_id:spr_id,vre_id:vre_id});$('#fade').fadeOut('slow');$('#vrednost_edit').fadeOut('slow');}
function hotspot_save_regions(spr_id,last_hotspot_region_index,vre_id,hotspot_region_index){var hotspot_region_name=$('input[name=hotspot_region_name]').val();var hotspot_region_coords=$('#hotspot_region_coords_'+spr_id).val();last_hotspot_region_index=last_hotspot_region_index+1;if(hotspot_region_index==-2){$('#hot_spot_fieldset_'+spr_id).prepend('<div id="hotspot_region_'+last_hotspot_region_index+'" class="hotspot_region"><div id="hotspot_region_name_'+last_hotspot_region_index+'" vre_id="'+vre_id+'" region_index = "'+last_hotspot_region_index+'" class="hotspot_vrednost_inline" contenteditable="true">'+hotspot_region_name+'</div><span class="sprites edit2 inline_hotspot_edit_region"></span><span class="faicon delete_circle icon-orange_link inline_hotspot_delete_region"></span></br></div>');}else{$('#hotspot_region_name_'+hotspot_region_index).text(hotspot_region_name);}
var new_hotspot_vrednost_needed=$('#vre_id_'+vre_id).attr('vre_id');if(new_hotspot_vrednost_needed==undefined){$('#hotspot_regions_hidden_menu_'+spr_id).prepend('<div id="variabla_'+vre_id+'" class="variabla" style="display:none;"><div id="vre_id_'+vre_id+'" class="vrednost_inline" vre_id="'+vre_id+'"></div>'+hotspot_region_name+'</div>');}else{$('#vre_id_'+vre_id).text(hotspot_region_name);}
$.post('ajax.php?t=vprasanje&a=hotspot_save_regions',{spr_id:spr_id,vre_id:vre_id,hotspot_region_name:hotspot_region_name,hotspot_region_coords:hotspot_region_coords,last_hotspot_region_index:last_hotspot_region_index,hotspot_region_index:hotspot_region_index});$('#fade').fadeOut('slow');$('#vrednost_edit').fadeOut('slow');}
function hotspot_append_hidden_image(spr_id,width,height,no_dimensions){var hotspot_image=$('#hotspot_image').val();var hotspot_image_hidden_height=$('#hotspot_image_'+spr_id+'_hidden').find('img').css('height');if(hotspot_image_hidden_height==undefined){$('#hotspot_image_'+spr_id+'_hidden').append(hotspot_image);}
else if(hotspot_image==''){$('#hotspot_image_'+spr_id+'_hidden').find('img').remove();}
else{$('#hotspot_image_'+spr_id+'_hidden').find('img').remove();$('#hotspot_image_'+spr_id+'_hidden').append(hotspot_image);}
if(no_dimensions==1){$('#hotspot_image_'+spr_id+'_hidden').find('img').css('height',height);$('#hotspot_image_'+spr_id+'_hidden').find('img').css('width',width);}}
function show_hot_spot_settings_from_editor(spremenljivka,enota,tip){var hotspot_image=$('#hotspot_image').val();if((tip==6&&enota==10)||(tip==1&&enota==10)||(tip==2&&enota==10)||tip==27||(tip==17&&enota==3)){$('#hot_spot_fieldset_'+spremenljivka).css('display','');if((tip==1)||(tip==2)||(tip==17&&enota==3)){$('#kategorije_odgovorov_'+spremenljivka).css('display','none');}
if((hotspot_image=='')||(hotspot_image.substring(0,4)!='<img')){$('#hot_spot_regions_add_button').css('display','none');$('#hotspot_message').css('display','');}else if(hotspot_image.substring(0,4)=='<img'){$('#hot_spot_regions_add_button').css('display','');$('#hotspot_message').css('display','none');}}else{$('#hot_spot_fieldset_'+spremenljivka).css('display','none');$('#kategorije_odgovorov_'+spremenljivka).css('display','');}}
function show_hot_spot_settings(spremenljivka,enota,tip){if((tip==6&&enota==10)||(tip==1&&enota==10)||(tip==2&&enota==10)||(tip==17&&enota==3)){$('#hot_spot_fieldset_'+spremenljivka).css('display','');if((tip==1)||(tip==2)||(tip==17&&enota==3)){$('#kategorije_odgovorov_'+spremenljivka).css('display','none');}
var hotspot_image=function(){$.ajaxSetup({async:false});var tmp=null;$.post('ajax.php?t=vprasanje&a=get_hotspot_image',{spremenljivka:spremenljivka},function(data){tmp=data;});return tmp;}();if((hotspot_image=='')||(hotspot_image.substring(0,4)!='<img')){$('#hot_spot_regions_add_button').css('display','none');$('#hotspot_message').css('display','');}else if(hotspot_image.substring(0,4)=='<img'){$('#hot_spot_regions_add_button').css('display','');$('#hotspot_message').css('display','none');}
var enako_stevilo_vnosov_za_hotspot=function(){$.ajaxSetup({async:false});var tmp=null;$.post('ajax.php?t=vprasanje&a=get_hotspot_stevilo_vnosov',{spremenljivka:spremenljivka},function(data){tmp=data;});return tmp;}();}else{$('#hot_spot_fieldset_'+spremenljivka).css('display','none');$('#kategorije_odgovorov_'+spremenljivka).css('display','');}};function change_custom_column_label_option(size,spremenljivka,value){if(value==2){var g_last='g_'+size;if(size%2==0){var colspan_calc_1=colspan_calc_2=size/2;}else if(size%2!=0){var colspan_calc_1=(size/2)+0.5;var colspan_calc_2=(size/2)-0.5;}
$('.grid_naslovi_'+spremenljivka+' > td').each(function(){var grd=$(this).attr('grd');if(String(grd)!='g_1'&&String(grd)!=g_last){if(grd!==undefined){$(this).children().text("");$(this).remove();}}
if(String(grd)=='g_1'){$(this).attr('colspan',colspan_calc_1);$(this).attr('style','text-align: left');}
if(String(grd)==g_last){$(this).attr('colspan',colspan_calc_2);$(this).attr('style','text-align: right');}});}else if(value==3){var g_last='g_'+size;if(size%3==0){var colspan_calc_1=colspan_calc_2=colspan_calc_3=size/3;var g_middle='g_'+(1+size/3);}
else if(size%3==1){var colspan_calc_1=colspan_calc_2=parseInt(size/3);var colspan_calc_3=parseInt(size/3)+1;var g_middle='g_'+(1+Math.ceil(size/3));}
else if(size%3==2){var colspan_calc_1=colspan_calc_2=1+parseInt(size/3);var colspan_calc_3=parseInt(size/3);var g_middle='g_'+(2+parseInt(size/3));}
$('.grid_naslovi_'+spremenljivka+' > td').each(function(){var grd=$(this).attr('grd');if(String(grd)!='g_1'&&String(grd)!=g_last&&String(grd)!=g_middle){if(grd!==undefined){$(this).children().text("");$(this).remove();}}
if(String(grd)=='g_1'){$(this).attr('colspan',colspan_calc_1);$(this).attr('style','text-align: left');}
if(String(grd)==g_last){$(this).attr('colspan',colspan_calc_2);$(this).attr('style','text-align: right');}
if(String(grd)==g_middle){$(this).attr('colspan',colspan_calc_3);$(this).attr('style','text-align: center');}});}
else if(value==4){}}
function custom_column_label_option_visibility(enota,tip){if((tip==6||tip==16)&&(enota==1||enota==0)){$('.drop_custom_column_labels').css('display','');}else{$('.drop_custom_column_labels').css('display','none');}};function UrediOkvir(vre_id){custom_image_view(vre_id);$('#vre_id_'+vre_id).mousemove(function(){custom_image_view(vre_id);}).keyup(function(){custom_image_view(vre_id);})}
function custom_image_view(vre_id){var default_cat_height=15;var final_height=0;var content=$('#vre_id_'+vre_id).html();content=content.replace(/<img[^>]*>/gi,"");var cat_text_length=content.length;var num_of_br=$('#vre_id_'+vre_id+' br').length;var num_imgs=$('#vre_id_'+vre_id+' img').length;var max_cat_text_length=30;var oneLineHeight=20;if((cat_text_length>max_cat_text_length)){var kvocient=Math.ceil(cat_text_length/max_cat_text_length);final_height=final_height+kvocient*oneLineHeight;}
if(num_imgs!=0){var img_height=0;var max_width=$('.ranking').width();var img=$('#vre_id_'+vre_id+' img');var img_width=img.width();var img_height=img.height();if(img_width>max_width){img_height=(img_height/img_width)*max_width;$('#vre_id_'+vre_id).children('img').css({width:max_width});$('#vre_id_'+vre_id).children('img').css({height:img_height});}
if(img_height>25){final_height=final_height+img_height;}}
if(num_of_br!=0){var br_height=num_of_br*oneLineHeight;final_height=final_height+br_height;}
if(final_height!=0){$('#vre_id_'+vre_id).css({'height':final_height});}}
function ranking_image_resize_admin(vre_id){var max_width=$('.ranking').width();var img=$('#vre_id_'+vre_id+' img');var num_imgs=img.length;if(num_imgs!=0){var width=img.width();var height=img.height();if(width>max_width){height=(height/width)*max_width;$('#vre_id_'+vre_id).children('img').css({width:max_width});$('#vre_id_'+vre_id).children('img').css({height:height});return height;}}}
function customizeImageView4Respondent(tip,spremenljivka,vre_id,ajax,anketa,site_url,usr_id,other,mobile,quick_view,preview_spremenljivka){var top_cat=-1;var left_cat=-1;if(mobile==0||mobile==2){top_cat=-6;left_cat=-6;}
if(quick_view||preview_spremenljivka){$('#spremenljivka_'+spremenljivka+'_vrednost_'+vre_id).draggable("option","disabled",true);}
var default_cat_height=30;var final_height=0;var cat_text_length=$('#spremenljivka_'+spremenljivka+'_vrednost_'+vre_id).html().length;var num_of_br=$('#spremenljivka_'+spremenljivka+'_vrednost_'+vre_id+' br').length;var num_imgs=$('#spremenljivka_'+spremenljivka+'_vrednost_'+vre_id+' img').length;var max_cat_text_length=30;if((cat_text_length>max_cat_text_length)&&(num_of_br==0)&&(num_imgs==0)){var txt=$('#spremenljivka_'+spremenljivka+'_vrednost_'+vre_id).html();var txt_alt=txt.slice(0,max_cat_text_length)+"<br>"+txt.slice(max_cat_text_length);$('#spremenljivka_'+spremenljivka+'_vrednost_'+vre_id).html(txt_alt);final_height=final_height+default_cat_height+25;}
if(num_imgs!=0){var img_height=0;var max_width=230;var img=$('#spremenljivka_'+spremenljivka+'_vrednost_'+vre_id+' img');var img_width=img.width();var img_height=img.height();if(img_width>max_width){img_height=(img_height/img_width)*max_width;img.css({width:max_width});img.css({height:img_height});}
if(img_height>25){final_height=final_height+img_height;}}
if(num_of_br!=0){var br_height=num_of_br*25;if(num_imgs==0){final_height=final_height+default_cat_height+br_height;}
else{final_height=final_height+br_height;}
if((img_height<25)&&(img_height!=0)){final_height=final_height+img_height;}}
if(final_height!=0){$('#spremenljivka_'+spremenljivka+'_vrednost_'+vre_id).css({'height':final_height});}}
function question_height_ranking(spremenljivka){var final_height_kategorije_left=final_height_kategorije_right=final_height=tmp_height_kategorije_left=tmp_height_kategorije_right=naslov_height=0;var i=1;var j=1;var default_var_height_now=$('#spremenljivka_'+spremenljivka).height();$('#half_'+spremenljivka).children('div').each(function(){tmp_height_kategorije_left=$(this).height();i++;final_height_kategorije_left=final_height_kategorije_left+tmp_height_kategorije_left;});$('#half2_'+spremenljivka).children('div').each(function(){tmp_height_kategorije_right=$(this).height();j++;final_height_kategorije_right=final_height_kategorije_right+tmp_height_kategorije_right;});if(final_height_kategorije_left>final_height_kategorije_right){final_height_kategorije=final_height_kategorije_left;}else{final_height_kategorije=final_height_kategorije_right;}
naslov_height=$('#spremenljivka_'+spremenljivka+' .naslov').height();final_height=naslov_height+final_height_kategorije+120;if(final_height>default_var_height_now){$('#spremenljivka_'+spremenljivka).height(final_height);$('#spremenljivka_'+spremenljivka+' div.variable_holder.clr').height(final_height+25);}}
function frame_height_ranking(ui,spremenljivka){var trenutna_visina_prenesenega=ui.item.height();console.log(trenutna_visina_prenesenega);var trenutni_okvir=$('#half2_'+spremenljivka);var stevilo_prisotnih=trenutni_okvir.children('div').length;console.log(stevilo_prisotnih);var i=0;trenutni_okvir.siblings().children('li').children('div').each(function(){i=i+1;if(stevilo_prisotnih==i){$(this).height(trenutna_visina_prenesenega);}});}
function frame_height_ranking_premikanje_dyn(ui,spremenljivka){var trenutna_visina_prenesenega=ui.item.height();var trenutni_okvir=$('#sortzone_'+spremenljivka);var stevilo_prisotnih=trenutni_okvir.children('div').length;var iscem='vrednost_';var tmp=ui.item.attr('id');var vre_id=tmp.slice(tmp.search(iscem));vre_id=vre_id.replace(iscem,'');var sortedID=trenutni_okvir.sortable("toArray");var i=0;trenutni_okvir.siblings().children('li').children('div').each(function(){var visina=$('#'+sortedID[i]).height();$(this).height(visina);i=i+1;});}
function frame_height_ranking_premikanje(spremenljivka,vre_id,vrstni_red){var trenutna_visina_prenesenega=$('#spremenljivka_'+spremenljivka+'_vrednost_'+vre_id).height();var i=0;$('#sortzone_'+spremenljivka).siblings().children('li').children('div').each(function(){i=i+1;if(vrstni_red==i){$(this).height(trenutna_visina_prenesenega);}});}
function ranking_image_resize(spremenljivka,vre_id){var max_width=$('.ranking').width();var img=$('#spremenljivka_'+spremenljivka+'_vrednost_'+vre_id+' img');var num_imgs=img.length;if(num_imgs!=0){var width=img.width();var height=img.height();if(width>max_width){height=(height/width)*max_width;img.css({width:max_width});img.css({height:height});$('#spremenljivka_'+spremenljivka+'_vrednost_'+vre_id).css({height:height});}}}
;/*!
 * jQuery UI Touch Punch 0.2.3
 *
 * Copyright 2011–2014, Dave Furfero
 * Dual licensed under the MIT or GPL Version 2 licenses.
 *
 * Depends:
 *  jquery.ui.widget.js
 *  jquery.ui.mouse.js
 */
!function(a){function f(a,b){if(!(a.originalEvent.touches.length>1)){a.preventDefault();var c=a.originalEvent.changedTouches[0],d=document.createEvent("MouseEvents");d.initMouseEvent(b,!0,!0,window,1,c.screenX,c.screenY,c.clientX,c.clientY,!1,!1,!1,!1,0,null),a.target.dispatchEvent(d)}}if(a.support.touch="ontouchend"in document,a.support.touch){var e,b=a.ui.mouse.prototype,c=b._mouseInit,d=b._mouseDestroy;b._touchStart=function(a){var b=this;!e&&b._mouseCapture(a.originalEvent.changedTouches[0])&&(e=!0,b._touchMoved=!1,f(a,"mouseover"),f(a,"mousemove"),f(a,"mousedown"))},b._touchMove=function(a){e&&(this._touchMoved=!0,f(a,"mousemove"))},b._touchEnd=function(a){e&&(f(a,"mouseup"),f(a,"mouseout"),this._touchMoved||f(a,"click"),e=!1)},b._mouseInit=function(){var b=this;b.element.bind({touchstart:a.proxy(b,"_touchStart"),touchmove:a.proxy(b,"_touchMove"),touchend:a.proxy(b,"_touchEnd")}),c.call(b)},b._mouseDestroy=function(){var b=this;b.element.unbind({touchstart:a.proxy(b,"_touchStart"),touchmove:a.proxy(b,"_touchMove"),touchend:a.proxy(b,"_touchEnd")}),d.call(b)}}}(jQuery);
;/*!
 Colorbox 1.6.4
 license: MIT
 http://www.jacklmoore.com/colorbox
*/
(function($,document,window){var
defaults={html:false,photo:false,iframe:false,inline:false,transition:"elastic",speed:300,fadeOut:300,width:false,initialWidth:"600",innerWidth:false,maxWidth:false,height:false,initialHeight:"450",innerHeight:false,maxHeight:false,scalePhotos:true,scrolling:true,opacity:0.9,preloading:true,className:false,overlayClose:true,escKey:true,arrowKey:true,top:false,bottom:false,left:false,right:false,fixed:false,data:undefined,closeButton:true,fastIframe:true,open:false,reposition:true,loop:true,slideshow:false,slideshowAuto:true,slideshowSpeed:2500,slideshowStart:"start slideshow",slideshowStop:"stop slideshow",photoRegex:/\.(gif|png|jp(e|g|eg)|bmp|ico|webp|jxr|svg)((#|\?).*)?$/i,retinaImage:false,retinaUrl:false,retinaSuffix:'@2x.$1',current:"image {current} of {total}",previous:"previous",next:"next",close:'<img src="script/jquery/colorbox/images/close_map.png" alt="Close" style="width:2em;height:2em;"></img>',xhrError:"This content failed to load.",imgError:"This image failed to load.",returnFocus:true,trapFocus:true,onOpen:false,onLoad:false,onComplete:false,onCleanup:false,onClosed:false,rel:function(){return this.rel;},href:function(){return $(this).attr('href');},title:function(){return this.title;},createImg:function(){var img=new Image();var attrs=$(this).data('cbox-img-attrs');if(typeof attrs==='object'){$.each(attrs,function(key,val){img[key]=val;});}
return img;},createIframe:function(){var iframe=document.createElement('iframe');var attrs=$(this).data('cbox-iframe-attrs');if(typeof attrs==='object'){$.each(attrs,function(key,val){iframe[key]=val;});}
if('frameBorder'in iframe){iframe.frameBorder=0;}
if('allowTransparency'in iframe){iframe.allowTransparency="true";}
iframe.name=(new Date()).getTime();iframe.allowFullscreen=true;return iframe;}},colorbox='colorbox',prefix='cbox',boxElement=prefix+'Element',event_open=prefix+'_open',event_load=prefix+'_load',event_complete=prefix+'_complete',event_cleanup=prefix+'_cleanup',event_closed=prefix+'_closed',event_purge=prefix+'_purge',$overlay,$box,$wrap,$content,$topBorder,$leftBorder,$rightBorder,$bottomBorder,$related,$window,$loaded,$loadingBay,$loadingOverlay,$title,$current,$slideshow,$next,$prev,$close,$groupControls,$events=$('<a/>'),settings,interfaceHeight,interfaceWidth,loadedHeight,loadedWidth,index,photo,open,active,closing,loadingTimer,publicMethod,div="div",requests=0,previousCSS={},init;function $tag(tag,id,css){var element=document.createElement(tag);if(id){element.id=prefix+id;}
if(css){element.style.cssText=css;}
return $(element);}
function winheight(){return window.innerHeight?window.innerHeight:$(window).height();}
function Settings(element,options){if(options!==Object(options)){options={};}
this.cache={};this.el=element;this.value=function(key){var dataAttr;if(this.cache[key]===undefined){dataAttr=$(this.el).attr('data-cbox-'+key);if(dataAttr!==undefined){this.cache[key]=dataAttr;}else if(options[key]!==undefined){this.cache[key]=options[key];}else if(defaults[key]!==undefined){this.cache[key]=defaults[key];}}
return this.cache[key];};this.get=function(key){var value=this.value(key);return $.isFunction(value)?value.call(this.el,this):value;};}
function getIndex(increment){var
max=$related.length,newIndex=(index+increment)%max;return(newIndex<0)?max+newIndex:newIndex;}
function setSize(size,dimension){return Math.round((/%/.test(size)?((dimension==='x'?$window.width():winheight())/100):1)*parseInt(size,10));}
function isImage(settings,url){return settings.get('photo')||settings.get('photoRegex').test(url);}
function retinaUrl(settings,url){return settings.get('retinaUrl')&&window.devicePixelRatio>1?url.replace(settings.get('photoRegex'),settings.get('retinaSuffix')):url;}
function trapFocus(e){if('contains'in $box[0]&&!$box[0].contains(e.target)&&e.target!==$overlay[0]){e.stopPropagation();$box.focus();}}
function setClass(str){if(setClass.str!==str){$box.add($overlay).removeClass(setClass.str).addClass(str);setClass.str=str;}}
function getRelated(rel){index=0;if(rel&&rel!==false&&rel!=='nofollow'){$related=$('.'+boxElement).filter(function(){var options=$.data(this,colorbox);var settings=new Settings(this,options);return(settings.get('rel')===rel);});index=$related.index(settings.el);if(index===-1){$related=$related.add(settings.el);index=$related.length-1;}}else{$related=$(settings.el);}}
function trigger(event){$(document).trigger(event);$events.triggerHandler(event);}
var slideshow=(function(){var active,className=prefix+"Slideshow_",click="click."+prefix,timeOut;function clear(){clearTimeout(timeOut);}
function set(){if(settings.get('loop')||$related[index+1]){clear();timeOut=setTimeout(publicMethod.next,settings.get('slideshowSpeed'));}}
function start(){$slideshow.html(settings.get('slideshowStop')).unbind(click).one(click,stop);$events.bind(event_complete,set).bind(event_load,clear);$box.removeClass(className+"off").addClass(className+"on");}
function stop(){clear();$events.unbind(event_complete,set).unbind(event_load,clear);$slideshow.html(settings.get('slideshowStart')).unbind(click).one(click,function(){publicMethod.next();start();});$box.removeClass(className+"on").addClass(className+"off");}
function reset(){active=false;$slideshow.hide();clear();$events.unbind(event_complete,set).unbind(event_load,clear);$box.removeClass(className+"off "+className+"on");}
return function(){if(active){if(!settings.get('slideshow')){$events.unbind(event_cleanup,reset);reset();}}else{if(settings.get('slideshow')&&$related[1]){active=true;$events.one(event_cleanup,reset);if(settings.get('slideshowAuto')){start();}else{stop();}
$slideshow.show();}}};}());function launch(element){var options;if(!closing){options=$(element).data(colorbox);settings=new Settings(element,options);getRelated(settings.get('rel'));if(!open){open=active=true;setClass(settings.get('className'));$box.css({visibility:'hidden',display:'block',opacity:''});$loaded=$tag(div,'LoadedContent','width:0; height:0; overflow:hidden; visibility:hidden');$content.css({width:'',height:''}).append($loaded);interfaceHeight=$topBorder.height()+$bottomBorder.height()+$content.outerHeight(true)-$content.height();interfaceWidth=$leftBorder.width()+$rightBorder.width()+$content.outerWidth(true)-$content.width();loadedHeight=$loaded.outerHeight(true);loadedWidth=$loaded.outerWidth(true);var initialWidth=setSize(settings.get('initialWidth'),'x');var initialHeight=setSize(settings.get('initialHeight'),'y');var maxWidth=settings.get('maxWidth');var maxHeight=settings.get('maxHeight');settings.w=Math.max((maxWidth!==false?Math.min(initialWidth,setSize(maxWidth,'x')):initialWidth)-loadedWidth-interfaceWidth,0);settings.h=Math.max((maxHeight!==false?Math.min(initialHeight,setSize(maxHeight,'y')):initialHeight)-loadedHeight-interfaceHeight,0);$loaded.css({width:'',height:settings.h});publicMethod.position();trigger(event_open);settings.get('onOpen');$groupControls.add($title).hide();$box.focus();if(settings.get('trapFocus')){if(document.addEventListener){document.addEventListener('focus',trapFocus,true);$events.one(event_closed,function(){document.removeEventListener('focus',trapFocus,true);});}}
if(settings.get('returnFocus')){$events.one(event_closed,function(){$(settings.el).focus();});}}
var opacity=parseFloat(settings.get('opacity'));$overlay.css({opacity:opacity===opacity?opacity:'',cursor:settings.get('overlayClose')?'pointer':'',visibility:'visible'}).show();if(settings.get('closeButton')){$close.html(settings.get('close')).appendTo($content);}else{$close.appendTo('<div/>');}
load();}}
function appendHTML(){if(!$box){init=false;$window=$(window);$box=$tag(div).attr({id:colorbox,'class':$.support.opacity===false?prefix+'IE':'',role:'dialog',tabindex:'-1'}).hide();$overlay=$tag(div,"Overlay").hide();$loadingOverlay=$([$tag(div,"LoadingOverlay")[0],$tag(div,"LoadingGraphic")[0]]);$wrap=$tag(div,"Wrapper");$content=$tag(div,"Content").append($title=$tag(div,"Title"),$current=$tag(div,"Current"),$prev=$('<button type="button"/>').attr({id:prefix+'Previous'}),$next=$('<button type="button"/>').attr({id:prefix+'Next'}),$slideshow=$('<button type="button"/>').attr({id:prefix+'Slideshow'}),$loadingOverlay);$close=$('<button type="button"/>').attr({id:prefix+'Close'});$wrap.append($tag(div).append($tag(div,"TopLeft"),$topBorder=$tag(div,"TopCenter"),$tag(div,"TopRight")),$tag(div,false,'clear:left').append($leftBorder=$tag(div,"MiddleLeft"),$content,$rightBorder=$tag(div,"MiddleRight")),$tag(div,false,'clear:left').append($tag(div,"BottomLeft"),$bottomBorder=$tag(div,"BottomCenter"),$tag(div,"BottomRight"))).find('div div').css({'float':'left'});$loadingBay=$tag(div,false,'position:absolute; width:9999px; visibility:hidden; display:none; max-width:none;');$groupControls=$next.add($prev).add($current).add($slideshow);}
if(document.body&&!$box.parent().length){$(document.body).append($overlay,$box.append($wrap,$loadingBay));}}
function addBindings(){function clickHandler(e){if(!(e.which>1||e.shiftKey||e.altKey||e.metaKey||e.ctrlKey)){e.preventDefault();launch(this);}}
if($box){if(!init){init=true;$next.click(function(){publicMethod.next();});$prev.click(function(){publicMethod.prev();});$close.click(function(){publicMethod.close();});$overlay.click(function(){if(settings.get('overlayClose')){publicMethod.close();}});$(document).bind('keydown.'+prefix,function(e){var key=e.keyCode;if(open&&settings.get('escKey')&&key===27){e.preventDefault();publicMethod.close();}
if(open&&settings.get('arrowKey')&&$related[1]&&!e.altKey){if(key===37){e.preventDefault();$prev.click();}else if(key===39){e.preventDefault();$next.click();}}});if($.isFunction($.fn.on)){$(document).on('click.'+prefix,'.'+boxElement,clickHandler);}else{$('.'+boxElement).live('click.'+prefix,clickHandler);}}
return true;}
return false;}
if($[colorbox]){return;}
$(appendHTML);publicMethod=$.fn[colorbox]=$[colorbox]=function(options,callback){var settings;var $obj=this;options=options||{};if($.isFunction($obj)){$obj=$('<a/>');options.open=true;}
if(!$obj[0]){return $obj;}
appendHTML();if(addBindings()){if(callback){options.onComplete=callback;}
$obj.each(function(){var old=$.data(this,colorbox)||{};$.data(this,colorbox,$.extend(old,options));}).addClass(boxElement);settings=new Settings($obj[0],options);if(settings.get('open')){launch($obj[0]);}}
return $obj;};publicMethod.position=function(speed,loadedCallback){var
css,top=0,left=0,offset=$box.offset(),scrollTop,scrollLeft;$window.unbind('resize.'+prefix);$box.css({top:-9e4,left:-9e4});scrollTop=$window.scrollTop();scrollLeft=$window.scrollLeft();if(settings.get('fixed')){offset.top-=scrollTop;offset.left-=scrollLeft;$box.css({position:'fixed'});}else{top=scrollTop;left=scrollLeft;$box.css({position:'absolute'});}
if(settings.get('right')!==false){left+=Math.max($window.width()-settings.w-loadedWidth-interfaceWidth-setSize(settings.get('right'),'x'),0);}else if(settings.get('left')!==false){left+=setSize(settings.get('left'),'x');}else{left+=Math.round(Math.max($window.width()-settings.w-loadedWidth-interfaceWidth,0)/2);}
if(settings.get('bottom')!==false){top+=Math.max(winheight()-settings.h-loadedHeight-interfaceHeight-setSize(settings.get('bottom'),'y'),0);}else if(settings.get('top')!==false){top+=setSize(settings.get('top'),'y');}else{top+=Math.round(Math.max(winheight()-settings.h-loadedHeight-interfaceHeight,0)/2);}
$box.css({top:offset.top,left:offset.left,visibility:'visible'});$wrap[0].style.width=$wrap[0].style.height="9999px";function modalDimensions(){$topBorder[0].style.width=$bottomBorder[0].style.width=$content[0].style.width=(parseInt($box[0].style.width,10)-interfaceWidth)+'px';$content[0].style.height=$leftBorder[0].style.height=$rightBorder[0].style.height=(parseInt($box[0].style.height,10)-interfaceHeight)+'px';}
css={width:settings.w+loadedWidth+interfaceWidth,height:settings.h+loadedHeight+interfaceHeight,top:top,left:left};if(speed){var tempSpeed=0;$.each(css,function(i){if(css[i]!==previousCSS[i]){tempSpeed=speed;return;}});speed=tempSpeed;}
previousCSS=css;if(!speed){$box.css(css);}
$box.dequeue().animate(css,{duration:speed||0,complete:function(){modalDimensions();active=false;$wrap[0].style.width=(settings.w+loadedWidth+interfaceWidth)+"px";$wrap[0].style.height=(settings.h+loadedHeight+interfaceHeight)+"px";if(settings.get('reposition')){setTimeout(function(){$window.bind('resize.'+prefix,publicMethod.position);},1);}
if($.isFunction(loadedCallback)){loadedCallback();}},step:modalDimensions});};publicMethod.resize=function(options){var scrolltop;if(open){options=options||{};if(options.width){settings.w=setSize(options.width,'x')-loadedWidth-interfaceWidth;}
if(options.innerWidth){settings.w=setSize(options.innerWidth,'x');}
$loaded.css({width:settings.w});if(options.height){settings.h=setSize(options.height,'y')-loadedHeight-interfaceHeight;}
if(options.innerHeight){settings.h=setSize(options.innerHeight,'y');}
if(!options.innerHeight&&!options.height){scrolltop=$loaded.scrollTop();$loaded.css({height:"auto"});settings.h=$loaded.height();}
$loaded.css({height:settings.h});if(scrolltop){$loaded.scrollTop(scrolltop);}
publicMethod.position(settings.get('transition')==="none"?0:settings.get('speed'));}};publicMethod.prep=function(object){if(!open){return;}
var callback,speed=settings.get('transition')==="none"?0:settings.get('speed');$loaded.remove();$loaded=$tag(div,'LoadedContent').append(object);function getWidth(){settings.w=settings.w||$loaded.width();settings.w=settings.mw&&settings.mw<settings.w?settings.mw:settings.w;return settings.w;}
function getHeight(){settings.h=settings.h||$loaded.height();settings.h=settings.mh&&settings.mh<settings.h?settings.mh:settings.h;return settings.h;}
$loaded.hide().appendTo($loadingBay.show()).css({width:getWidth(),overflow:settings.get('scrolling')?'auto':'hidden'}).css({height:getHeight()}).prependTo($content);$loadingBay.hide();$(photo).css({'float':'none'});setClass(settings.get('className'));callback=function(){var total=$related.length,iframe,complete;if(!open){return;}
function removeFilter(){if($.support.opacity===false){$box[0].style.removeAttribute('filter');}}
complete=function(){clearTimeout(loadingTimer);$loadingOverlay.hide();trigger(event_complete);settings.get('onComplete');};$title.html(settings.get('title')).show();$loaded.show();if(total>1){if(typeof settings.get('current')==="string"){$current.html(settings.get('current').replace('{current}',index+1).replace('{total}',total)).show();}
$next[(settings.get('loop')||index<total-1)?"show":"hide"]().html(settings.get('next'));$prev[(settings.get('loop')||index)?"show":"hide"]().html(settings.get('previous'));slideshow();if(settings.get('preloading')){$.each([getIndex(-1),getIndex(1)],function(){var img,i=$related[this],settings=new Settings(i,$.data(i,colorbox)),src=settings.get('href');if(src&&isImage(settings,src)){src=retinaUrl(settings,src);img=document.createElement('img');img.src=src;}});}}else{$groupControls.hide();}
if(settings.get('iframe')){iframe=settings.get('createIframe');if(!settings.get('scrolling')){iframe.scrolling="no";}
$(iframe).attr({src:settings.get('href'),'class':prefix+'Iframe'}).one('load',complete).appendTo($loaded);$events.one(event_purge,function(){iframe.src="//about:blank";});if(settings.get('fastIframe')){$(iframe).trigger('load');}}else{complete();}
if(settings.get('transition')==='fade'){$box.fadeTo(speed,1,removeFilter);}else{removeFilter();}};if(settings.get('transition')==='fade'){$box.fadeTo(speed,0,function(){publicMethod.position(0,callback);});}else{publicMethod.position(speed,callback);}};function load(){var href,setResize,prep=publicMethod.prep,$inline,request=++requests;active=true;photo=false;trigger(event_purge);trigger(event_load);settings.get('onLoad');settings.h=settings.get('height')?setSize(settings.get('height'),'y')-loadedHeight-interfaceHeight:settings.get('innerHeight')&&setSize(settings.get('innerHeight'),'y');settings.w=settings.get('width')?setSize(settings.get('width'),'x')-loadedWidth-interfaceWidth:settings.get('innerWidth')&&setSize(settings.get('innerWidth'),'x');settings.mw=settings.w;settings.mh=settings.h;if(settings.get('maxWidth')){settings.mw=setSize(settings.get('maxWidth'),'x')-loadedWidth-interfaceWidth;settings.mw=settings.w&&settings.w<settings.mw?settings.w:settings.mw;}
if(settings.get('maxHeight')){settings.mh=setSize(settings.get('maxHeight'),'y')-loadedHeight-interfaceHeight;settings.mh=settings.h&&settings.h<settings.mh?settings.h:settings.mh;}
href=settings.get('href');loadingTimer=setTimeout(function(){$loadingOverlay.show();},100);if(settings.get('inline')){var $target=$(href).eq(0);$inline=$('<div>').hide().insertBefore($target);$events.one(event_purge,function(){$inline.replaceWith($target);});prep($target);}else if(settings.get('iframe')){prep(" ");}else if(settings.get('html')){prep(settings.get('html'));}else if(isImage(settings,href)){href=retinaUrl(settings,href);photo=settings.get('createImg');$(photo).addClass(prefix+'Photo').bind('error.'+prefix,function(){prep($tag(div,'Error').html(settings.get('imgError')));}).one('load',function(){if(request!==requests){return;}
setTimeout(function(){var percent;if(settings.get('retinaImage')&&window.devicePixelRatio>1){photo.height=photo.height/window.devicePixelRatio;photo.width=photo.width/window.devicePixelRatio;}
if(settings.get('scalePhotos')){setResize=function(){photo.height-=photo.height*percent;photo.width-=photo.width*percent;};if(settings.mw&&photo.width>settings.mw){percent=(photo.width-settings.mw)/photo.width;setResize();}
if(settings.mh&&photo.height>settings.mh){percent=(photo.height-settings.mh)/photo.height;setResize();}}
if(settings.h){photo.style.marginTop=Math.max(settings.mh-photo.height,0)/2+'px';}
if($related[1]&&(settings.get('loop')||$related[index+1])){photo.style.cursor='pointer';$(photo).bind('click.'+prefix,function(){publicMethod.next();});}
photo.style.width=photo.width+'px';photo.style.height=photo.height+'px';prep(photo);},1);});photo.src=href;}else if(href){$loadingBay.load(href,settings.get('data'),function(data,status){if(request===requests){prep(status==='error'?$tag(div,'Error').html(settings.get('xhrError')):$(this).contents());}});}}
publicMethod.next=function(){if(!active&&$related[1]&&(settings.get('loop')||$related[index+1])){index=getIndex(1);launch($related[index]);}};publicMethod.prev=function(){if(!active&&$related[1]&&(settings.get('loop')||index)){index=getIndex(-1);launch($related[index]);}};publicMethod.close=function(){if(open&&!closing){closing=true;open=false;trigger(event_cleanup);settings.get('onCleanup');$window.unbind('.'+prefix);$overlay.fadeTo(settings.get('fadeOut')||0,0);$box.stop().fadeTo(settings.get('fadeOut')||0,0,function(){$box.hide();$overlay.hide();trigger(event_purge);$loaded.remove();setTimeout(function(){closing=false;trigger(event_closed);settings.get('onClosed');},1);});}};publicMethod.remove=function(){if(!$box){return;}
$box.stop();$[colorbox].close();$box.stop(false,true).remove();$overlay.remove();closing=false;$box=null;$('.'+boxElement).removeData(colorbox).removeClass(boxElement);$(document).unbind('click.'+prefix).unbind('keydown.'+prefix);};publicMethod.element=function(){return $(settings.el);};publicMethod.settings=defaults;}(jQuery,document,window));;var map_data_holder={};var spremenljivka_box=0;function googleMapsAPIProcedura(after){if((typeof google==='object'&&typeof google.maps==='object')){after();}
else{mapsAPIseNi(after);}}
$(document).ready(function(){$(".fMap").colorbox({scrolling:false,width:"80%",height:"80%",title:"",html:'<div id="map_canvas_all" style="width:100%;height:100%"></div>',onComplete:function(){if(!$(".fMap").hasClass("rawData")){$('#colorbox').addClass("divPopUp");getMapDataAjax();}
else{googleMapsAPIProcedura(initializeMapGeneralForIPs);}}});});function passMapData(sprid,usrid,loopid,ankid,ajaxCall){if(!ajaxCall)
ajaxCall="mapData";map_data_holder={spr_id:sprid,usr_id:usrid,loop_id:loopid,ank_id:ankid,ajaxCall:ajaxCall};spremenljivka_box=sprid;}
function passMapDataRaw(rawData){map_data_holder=rawData;spremenljivka_box='IPloc';}
function initializeMapGeneral(){var mapOptions={mapTypeId:google.maps.MapTypeId.ROADMAP};viewMode=true;infowindow=new google.maps.InfoWindow();var mapdiv=document.getElementById("map_canvas_all");var map=new google.maps.Map(mapdiv,mapOptions);mapdiv.gMap=map;bounds[spremenljivka_box]=new google.maps.LatLngBounds();bounds['all']=new google.maps.LatLngBounds();var input_type=map_data_holder.input_type;delete map_data_holder.input_type;var enota=map_data_holder.enota;delete map_data_holder.enota;podvprasanje[spremenljivka_box]=map_data_holder.podvprasanje;delete map_data_holder.podvprasanje;podvprasanje_naslov[spremenljivka_box]=map_data_holder.podvprasanje_naslov;delete map_data_holder.podvprasanje_naslov;max_mark[spremenljivka_box]=map_data_holder.length;ml_sprem[spremenljivka_box]=false;st_markerjev[spremenljivka_box]=0;allMarkers[spremenljivka_box]=[];if(enota==3){map_data_fill(spremenljivka_box,map_data_holder.data,enota);map_data_fill_info_shapes(spremenljivka_box,map_data_holder.info_shapes);}
else{if(input_type=='marker'){map_data_fill(spremenljivka_box,map_data_holder);var markerCluster=new MarkerClusterer(map,allMarkers[spremenljivka_box],{imagePath:srv_site_url+'admin/survey/img_0/markerclusterer/m',maxZoom:15});}
else if(input_type=='polyline')
map_data_fill_shape(spremenljivka_box,map_data_holder.data,input_type);else if(input_type=='polygon')
map_data_fill_shape(spremenljivka_box,map_data_holder.data,input_type);}
$("#cboxLoadingOverlay").hide();};function initializeMapGeneralForIPs(){var mapOptions={mapTypeId:google.maps.MapTypeId.ROADMAP,streetViewControl:false};infowindow=new google.maps.InfoWindow();var mapdiv=document.getElementById("map_canvas_all");if(!mapdiv)
mapdiv=document.getElementById("map_ip");var map=new google.maps.Map(mapdiv,mapOptions);mapdiv.gMap=map;bounds[spremenljivka_box]=new google.maps.LatLngBounds();max_mark[spremenljivka_box]=map_data_holder.length;ml_sprem[spremenljivka_box]=false;st_markerjev[spremenljivka_box]=0;allMarkers[spremenljivka_box]=[];google.maps.event.addListener(map,'zoom_changed',function(){infowindow.close();});Object.keys(map_data_holder).forEach(function(key){for(var i=0;i<map_data_holder[key].cnt;i++)
if(key!=='')
createMarkerForIps(key,map_data_holder[key].lat,map_data_holder[key].lng);else{delete map_data_holder['']['cnt'];Object.keys(map_data_holder['']).forEach(function(key){for(var i=0;i<map_data_holder[''][key].cnt;i++)
createMarkerForIps('N/A',map_data_holder[''][key].lat,map_data_holder[''][key].lng);});}});var markerCluster=new MarkerClusterer(map,allMarkers[spremenljivka_box],{imagePath:srv_site_url+'admin/survey/img_0/markerclusterer/m',maxZoom:30,zoomOnClick:false});google.maps.event.addListener(markerCluster,'clusterclick',function(cluster){var markers=cluster.getMarkers();var array=[];for(var i=0;i<markers.length;i++){if(array[markers[i].getTitle()])
array[markers[i].getTitle()]++;else
array[markers[i].getTitle()]=1;}
var text='';Object.keys(array).forEach(function(key){text+='<b>'+array[key]+'</b> '+key+'<br>';});if(map.getZoom()<=markerCluster.getMaxZoom()){infowindow.setContent(text);infowindow.setPosition(cluster.getCenter());infowindow.open(map);}});$("#cboxLoadingOverlay").hide();};function createMarkerForIps(key,lat,lng){var map=document.getElementById("map_canvas_all");if(!map)
map=document.getElementById("map_ip").gMap;else
map=document.getElementById("map_canvas_all").gMap;var bigIcon=1;var icon={url:srv_site_url+'admin/survey/img_0/markerclusterer/m'+bigIcon+'.png',fillOpacity:1,strokeWeight:1};var marker=new google.maps.Marker({position:new google.maps.LatLng(lat,lng),title:key,map:map,icon:icon,label:{text:'1'}});allMarkers[spremenljivka_box].push(marker);var container=document.createElement("div");var label=document.createElement("label");label.innerHTML='<b>'+1+'</b> '+key;container.appendChild(label);google.maps.event.addListener(marker,'click',function(){infowindow.setContent(container);infowindow.open(map,marker);});infowindow.setContent(container);bounds[spremenljivka_box].extend(marker.position);if(st_markerjev[spremenljivka_box]==0){map.setCenter(marker.position);map.setZoom(17);}else if(st_markerjev[spremenljivka_box]>0){map.fitBounds(bounds[spremenljivka_box]);if(max_mark[spremenljivka_box]==st_markerjev[spremenljivka_box]+1){google.maps.event.addListenerOnce(map,"bounds_changed",function(){map.setZoom(map.getZoom()-1);});}}
st_markerjev[spremenljivka_box]++;}
function getMapDataAjax(){$("#cboxLoadingOverlay").show();$.ajax({cache:false,crossDomain:true,type:'post',dataType:"json",url:'ajax.php?t='+map_data_holder.ajaxCall,data:{map_data:map_data_holder},error:function(response){console.log("Error in Ajax connection! Please try later!");},success:function(response){map_data_holder=response;googleMapsAPIProcedura(initializeMapGeneral);}});}
function geoip_map_navigation_toggle(el,data){var elid=$(el).attr('id');if(!$(el).hasClass("active")){if(elid==='geoip_countries')
document.getElementById("geoip_cities").classList.remove("active");else
document.getElementById("geoip_countries").classList.remove("active");$(el).addClass('active');passMapDataRaw(data);googleMapsAPIProcedura(initializeMapGeneralForIPs);}};function MarkerClusterer(map,opt_markers,opt_options){this.extend(MarkerClusterer,google.maps.OverlayView);this.map_=map;this.markers_=[];this.clusters_=[];this.sizes=[53,56,66,78,90];this.styles_=[];this.ready_=false;var options=opt_options||{};this.gridSize_=options['gridSize']||60;this.minClusterSize_=options['minimumClusterSize']||2;this.maxZoom_=options['maxZoom']||null;this.styles_=options['styles']||[];this.imagePath_=options['imagePath']||this.MARKER_CLUSTER_IMAGE_PATH_;this.imageExtension_=options['imageExtension']||this.MARKER_CLUSTER_IMAGE_EXTENSION_;this.zoomOnClick_=true;if(options['zoomOnClick']!=undefined){this.zoomOnClick_=options['zoomOnClick'];}
this.averageCenter_=false;if(options['averageCenter']!=undefined){this.averageCenter_=options['averageCenter'];}
this.setupStyles_();this.setMap(map);this.prevZoom_=this.map_.getZoom();var that=this;google.maps.event.addListener(this.map_,'zoom_changed',function(){var zoom=that.map_.getZoom();var minZoom=that.map_.minZoom||0;var maxZoom=Math.min(that.map_.maxZoom||100,that.map_.mapTypes[that.map_.getMapTypeId()].maxZoom);zoom=Math.min(Math.max(zoom,minZoom),maxZoom);if(that.prevZoom_!=zoom){that.prevZoom_=zoom;that.resetViewport();}});google.maps.event.addListener(this.map_,'idle',function(){that.redraw();});if(opt_markers&&(opt_markers.length||Object.keys(opt_markers).length)){this.addMarkers(opt_markers,false);}}
MarkerClusterer.prototype.MARKER_CLUSTER_IMAGE_PATH_='../images/m';MarkerClusterer.prototype.MARKER_CLUSTER_IMAGE_EXTENSION_='png';MarkerClusterer.prototype.extend=function(obj1,obj2){return(function(object){for(var property in object.prototype){this.prototype[property]=object.prototype[property];}
return this;}).apply(obj1,[obj2]);};MarkerClusterer.prototype.onAdd=function(){this.setReady_(true);};MarkerClusterer.prototype.draw=function(){};MarkerClusterer.prototype.setupStyles_=function(){if(this.styles_.length){return;}
for(var i=0,size;size=this.sizes[i];i++){this.styles_.push({url:this.imagePath_+(i+1)+'.'+this.imageExtension_,height:size,width:size});}};MarkerClusterer.prototype.fitMapToMarkers=function(){var markers=this.getMarkers();var bounds=new google.maps.LatLngBounds();for(var i=0,marker;marker=markers[i];i++){bounds.extend(marker.getPosition());}
this.map_.fitBounds(bounds);};MarkerClusterer.prototype.setStyles=function(styles){this.styles_=styles;};MarkerClusterer.prototype.getStyles=function(){return this.styles_;};MarkerClusterer.prototype.isZoomOnClick=function(){return this.zoomOnClick_;};MarkerClusterer.prototype.isAverageCenter=function(){return this.averageCenter_;};MarkerClusterer.prototype.getMarkers=function(){return this.markers_;};MarkerClusterer.prototype.getTotalMarkers=function(){return this.markers_.length;};MarkerClusterer.prototype.setMaxZoom=function(maxZoom){this.maxZoom_=maxZoom;};MarkerClusterer.prototype.getMaxZoom=function(){return this.maxZoom_;};MarkerClusterer.prototype.calculator_=function(markers,numStyles){var index=0;var count=markers.length;var dv=count;while(dv!==0){dv=parseInt(dv/10,10);index++;}
index=Math.min(index,numStyles);return{text:count,index:index};};MarkerClusterer.prototype.setCalculator=function(calculator){this.calculator_=calculator;};MarkerClusterer.prototype.getCalculator=function(){return this.calculator_;};MarkerClusterer.prototype.addMarkers=function(markers,opt_nodraw){if(markers.length){for(var i=0,marker;marker=markers[i];i++){this.pushMarkerTo_(marker);}}else if(Object.keys(markers).length){for(var marker in markers){this.pushMarkerTo_(markers[marker]);}}
if(!opt_nodraw){this.redraw();}};MarkerClusterer.prototype.pushMarkerTo_=function(marker){marker.isAdded=false;if(marker['draggable']){var that=this;google.maps.event.addListener(marker,'dragend',function(){marker.isAdded=false;that.repaint();});}
this.markers_.push(marker);};MarkerClusterer.prototype.addMarker=function(marker,opt_nodraw){this.pushMarkerTo_(marker);if(!opt_nodraw){this.redraw();}};MarkerClusterer.prototype.removeMarker_=function(marker){var index=-1;if(this.markers_.indexOf){index=this.markers_.indexOf(marker);}else{for(var i=0,m;m=this.markers_[i];i++){if(m==marker){index=i;break;}}}
if(index==-1){return false;}
marker.setMap(null);this.markers_.splice(index,1);return true;};MarkerClusterer.prototype.removeMarker=function(marker,opt_nodraw){var removed=this.removeMarker_(marker);if(!opt_nodraw&&removed){this.resetViewport();this.redraw();return true;}else{return false;}};MarkerClusterer.prototype.removeMarkers=function(markers,opt_nodraw){var markersCopy=markers===this.getMarkers()?markers.slice():markers;var removed=false;for(var i=0,marker;marker=markersCopy[i];i++){var r=this.removeMarker_(marker);removed=removed||r;}
if(!opt_nodraw&&removed){this.resetViewport();this.redraw();return true;}};MarkerClusterer.prototype.setReady_=function(ready){if(!this.ready_){this.ready_=ready;this.createClusters_();}};MarkerClusterer.prototype.getTotalClusters=function(){return this.clusters_.length;};MarkerClusterer.prototype.getMap=function(){return this.map_;};MarkerClusterer.prototype.setMap=function(map){this.map_=map;};MarkerClusterer.prototype.getGridSize=function(){return this.gridSize_;};MarkerClusterer.prototype.setGridSize=function(size){this.gridSize_=size;};MarkerClusterer.prototype.getMinClusterSize=function(){return this.minClusterSize_;};MarkerClusterer.prototype.setMinClusterSize=function(size){this.minClusterSize_=size;};MarkerClusterer.prototype.getExtendedBounds=function(bounds){var projection=this.getProjection();var tr=new google.maps.LatLng(bounds.getNorthEast().lat(),bounds.getNorthEast().lng());var bl=new google.maps.LatLng(bounds.getSouthWest().lat(),bounds.getSouthWest().lng());var trPix=projection.fromLatLngToDivPixel(tr);trPix.x+=this.gridSize_;trPix.y-=this.gridSize_;var blPix=projection.fromLatLngToDivPixel(bl);blPix.x-=this.gridSize_;blPix.y+=this.gridSize_;var ne=projection.fromDivPixelToLatLng(trPix);var sw=projection.fromDivPixelToLatLng(blPix);bounds.extend(ne);bounds.extend(sw);return bounds;};MarkerClusterer.prototype.isMarkerInBounds_=function(marker,bounds){return bounds.contains(marker.getPosition());};MarkerClusterer.prototype.clearMarkers=function(){this.resetViewport(true);this.markers_=[];};MarkerClusterer.prototype.resetViewport=function(opt_hide){for(var i=0,cluster;cluster=this.clusters_[i];i++){cluster.remove();}
for(var i=0,marker;marker=this.markers_[i];i++){marker.isAdded=false;if(opt_hide){marker.setMap(null);}}
this.clusters_=[];};MarkerClusterer.prototype.repaint=function(){var oldClusters=this.clusters_.slice();this.clusters_.length=0;this.resetViewport();this.redraw();window.setTimeout(function(){for(var i=0,cluster;cluster=oldClusters[i];i++){cluster.remove();}},0);};MarkerClusterer.prototype.redraw=function(){this.createClusters_();};MarkerClusterer.prototype.distanceBetweenPoints_=function(p1,p2){if(!p1||!p2){return 0;}
var R=6371;var dLat=(p2.lat()-p1.lat())*Math.PI/180;var dLon=(p2.lng()-p1.lng())*Math.PI/180;var a=Math.sin(dLat/2)*Math.sin(dLat/2)+
Math.cos(p1.lat()*Math.PI/180)*Math.cos(p2.lat()*Math.PI/180)*Math.sin(dLon/2)*Math.sin(dLon/2);var c=2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a));var d=R*c;return d;};MarkerClusterer.prototype.addToClosestCluster_=function(marker){var distance=40000;var clusterToAddTo=null;var pos=marker.getPosition();for(var i=0,cluster;cluster=this.clusters_[i];i++){var center=cluster.getCenter();if(center){var d=this.distanceBetweenPoints_(center,marker.getPosition());if(d<distance){distance=d;clusterToAddTo=cluster;}}}
if(clusterToAddTo&&clusterToAddTo.isMarkerInClusterBounds(marker)){clusterToAddTo.addMarker(marker);}else{var cluster=new Cluster(this);cluster.addMarker(marker);this.clusters_.push(cluster);}};MarkerClusterer.prototype.createClusters_=function(){if(!this.ready_){return;}
var mapBounds=new google.maps.LatLngBounds(this.map_.getBounds().getSouthWest(),this.map_.getBounds().getNorthEast());var bounds=this.getExtendedBounds(mapBounds);for(var i=0,marker;marker=this.markers_[i];i++){if(!marker.isAdded&&this.isMarkerInBounds_(marker,bounds)){this.addToClosestCluster_(marker);}}};function Cluster(markerClusterer){this.markerClusterer_=markerClusterer;this.map_=markerClusterer.getMap();this.gridSize_=markerClusterer.getGridSize();this.minClusterSize_=markerClusterer.getMinClusterSize();this.averageCenter_=markerClusterer.isAverageCenter();this.center_=null;this.markers_=[];this.bounds_=null;this.clusterIcon_=new ClusterIcon(this,markerClusterer.getStyles(),markerClusterer.getGridSize());}
Cluster.prototype.isMarkerAlreadyAdded=function(marker){if(this.markers_.indexOf){return this.markers_.indexOf(marker)!=-1;}else{for(var i=0,m;m=this.markers_[i];i++){if(m==marker){return true;}}}
return false;};Cluster.prototype.addMarker=function(marker){if(this.isMarkerAlreadyAdded(marker)){return false;}
if(!this.center_){this.center_=marker.getPosition();this.calculateBounds_();}else{if(this.averageCenter_){var l=this.markers_.length+1;var lat=(this.center_.lat()*(l-1)+marker.getPosition().lat())/l;var lng=(this.center_.lng()*(l-1)+marker.getPosition().lng())/l;this.center_=new google.maps.LatLng(lat,lng);this.calculateBounds_();}}
marker.isAdded=true;this.markers_.push(marker);var len=this.markers_.length;if(len<this.minClusterSize_&&marker.getMap()!=this.map_){marker.setMap(this.map_);}
if(len==this.minClusterSize_){for(var i=0;i<len;i++){this.markers_[i].setMap(null);}}
if(len>=this.minClusterSize_){marker.setMap(null);}
this.updateIcon();return true;};Cluster.prototype.getMarkerClusterer=function(){return this.markerClusterer_;};Cluster.prototype.getBounds=function(){var bounds=new google.maps.LatLngBounds(this.center_,this.center_);var markers=this.getMarkers();for(var i=0,marker;marker=markers[i];i++){bounds.extend(marker.getPosition());}
return bounds;};Cluster.prototype.remove=function(){this.clusterIcon_.remove();this.markers_.length=0;delete this.markers_;};Cluster.prototype.getSize=function(){return this.markers_.length;};Cluster.prototype.getMarkers=function(){return this.markers_;};Cluster.prototype.getCenter=function(){return this.center_;};Cluster.prototype.calculateBounds_=function(){var bounds=new google.maps.LatLngBounds(this.center_,this.center_);this.bounds_=this.markerClusterer_.getExtendedBounds(bounds);};Cluster.prototype.isMarkerInClusterBounds=function(marker){return this.bounds_.contains(marker.getPosition());};Cluster.prototype.getMap=function(){return this.map_;};Cluster.prototype.updateIcon=function(){var zoom=this.map_.getZoom();var mz=this.markerClusterer_.getMaxZoom();if(mz&&zoom>mz){for(var i=0,marker;marker=this.markers_[i];i++){marker.setMap(this.map_);}
return;}
if(this.markers_.length<this.minClusterSize_){this.clusterIcon_.hide();return;}
var numStyles=this.markerClusterer_.getStyles().length;var sums=this.markerClusterer_.getCalculator()(this.markers_,numStyles);this.clusterIcon_.setCenter(this.center_);this.clusterIcon_.setSums(sums);this.clusterIcon_.show();};function ClusterIcon(cluster,styles,opt_padding){cluster.getMarkerClusterer().extend(ClusterIcon,google.maps.OverlayView);this.styles_=styles;this.padding_=opt_padding||0;this.cluster_=cluster;this.center_=null;this.map_=cluster.getMap();this.div_=null;this.sums_=null;this.visible_=false;this.setMap(this.map_);}
ClusterIcon.prototype.triggerClusterClick=function(){var markerClusterer=this.cluster_.getMarkerClusterer();google.maps.event.trigger(markerClusterer,'clusterclick',this.cluster_);if(markerClusterer.isZoomOnClick()){this.map_.fitBounds(this.cluster_.getBounds());}};ClusterIcon.prototype.onAdd=function(){this.div_=document.createElement('DIV');if(this.visible_){var pos=this.getPosFromLatLng_(this.center_);this.div_.style.cssText=this.createCss(pos);this.div_.innerHTML=this.sums_.text;}
var panes=this.getPanes();panes.overlayMouseTarget.appendChild(this.div_);var that=this;google.maps.event.addDomListener(this.div_,'click',function(){that.triggerClusterClick();});};ClusterIcon.prototype.getPosFromLatLng_=function(latlng){var pos=this.getProjection().fromLatLngToDivPixel(latlng);pos.x-=parseInt(this.width_/2,10);pos.y-=parseInt(this.height_/2,10);return pos;};ClusterIcon.prototype.draw=function(){if(this.visible_){var pos=this.getPosFromLatLng_(this.center_);this.div_.style.top=pos.y+'px';this.div_.style.left=pos.x+'px';}};ClusterIcon.prototype.hide=function(){if(this.div_){this.div_.style.display='none';}
this.visible_=false;};ClusterIcon.prototype.show=function(){if(this.div_){var pos=this.getPosFromLatLng_(this.center_);this.div_.style.cssText=this.createCss(pos);this.div_.style.display='';}
this.visible_=true;};ClusterIcon.prototype.remove=function(){this.setMap(null);};ClusterIcon.prototype.onRemove=function(){if(this.div_&&this.div_.parentNode){this.hide();this.div_.parentNode.removeChild(this.div_);this.div_=null;}};ClusterIcon.prototype.setSums=function(sums){this.sums_=sums;this.text_=sums.text;this.index_=sums.index;if(this.div_){this.div_.innerHTML=sums.text;}
this.useStyle();};ClusterIcon.prototype.useStyle=function(){var index=Math.max(0,this.sums_.index-1);index=Math.min(this.styles_.length-1,index);var style=this.styles_[index];this.url_=style['url'];this.height_=style['height'];this.width_=style['width'];this.textColor_=style['textColor'];this.anchor_=style['anchor'];this.textSize_=style['textSize'];this.backgroundPosition_=style['backgroundPosition'];};ClusterIcon.prototype.setCenter=function(center){this.center_=center;};ClusterIcon.prototype.createCss=function(pos){var style=[];style.push('background-image:url('+this.url_+');');var backgroundPosition=this.backgroundPosition_?this.backgroundPosition_:'0 0';style.push('background-position:'+backgroundPosition+';');if(typeof this.anchor_==='object'){if(typeof this.anchor_[0]==='number'&&this.anchor_[0]>0&&this.anchor_[0]<this.height_){style.push('height:'+(this.height_-this.anchor_[0])+'px; padding-top:'+this.anchor_[0]+'px;');}else{style.push('height:'+this.height_+'px; line-height:'+this.height_+'px;');}
if(typeof this.anchor_[1]==='number'&&this.anchor_[1]>0&&this.anchor_[1]<this.width_){style.push('width:'+(this.width_-this.anchor_[1])+'px; padding-left:'+this.anchor_[1]+'px;');}else{style.push('width:'+this.width_+'px; text-align:center;');}}else{style.push('height:'+this.height_+'px; line-height:'+
this.height_+'px; width:'+this.width_+'px; text-align:center;');}
var txtColor=this.textColor_?this.textColor_:'black';var txtSize=this.textSize_?this.textSize_:11;style.push('cursor:pointer; top:'+pos.y+'px; left:'+
pos.x+'px; color:'+txtColor+'; position:absolute; font-size:'+
txtSize+'px; font-family:Arial,sans-serif; font-weight:bold');return style.join('');};window['MarkerClusterer']=MarkerClusterer;MarkerClusterer.prototype['addMarker']=MarkerClusterer.prototype.addMarker;MarkerClusterer.prototype['addMarkers']=MarkerClusterer.prototype.addMarkers;MarkerClusterer.prototype['clearMarkers']=MarkerClusterer.prototype.clearMarkers;MarkerClusterer.prototype['fitMapToMarkers']=MarkerClusterer.prototype.fitMapToMarkers;MarkerClusterer.prototype['getCalculator']=MarkerClusterer.prototype.getCalculator;MarkerClusterer.prototype['getGridSize']=MarkerClusterer.prototype.getGridSize;MarkerClusterer.prototype['getExtendedBounds']=MarkerClusterer.prototype.getExtendedBounds;MarkerClusterer.prototype['getMap']=MarkerClusterer.prototype.getMap;MarkerClusterer.prototype['getMarkers']=MarkerClusterer.prototype.getMarkers;MarkerClusterer.prototype['getMaxZoom']=MarkerClusterer.prototype.getMaxZoom;MarkerClusterer.prototype['getStyles']=MarkerClusterer.prototype.getStyles;MarkerClusterer.prototype['getTotalClusters']=MarkerClusterer.prototype.getTotalClusters;MarkerClusterer.prototype['getTotalMarkers']=MarkerClusterer.prototype.getTotalMarkers;MarkerClusterer.prototype['redraw']=MarkerClusterer.prototype.redraw;MarkerClusterer.prototype['removeMarker']=MarkerClusterer.prototype.removeMarker;MarkerClusterer.prototype['removeMarkers']=MarkerClusterer.prototype.removeMarkers;MarkerClusterer.prototype['resetViewport']=MarkerClusterer.prototype.resetViewport;MarkerClusterer.prototype['repaint']=MarkerClusterer.prototype.repaint;MarkerClusterer.prototype['setCalculator']=MarkerClusterer.prototype.setCalculator;MarkerClusterer.prototype['setGridSize']=MarkerClusterer.prototype.setGridSize;MarkerClusterer.prototype['setMaxZoom']=MarkerClusterer.prototype.setMaxZoom;MarkerClusterer.prototype['onAdd']=MarkerClusterer.prototype.onAdd;MarkerClusterer.prototype['draw']=MarkerClusterer.prototype.draw;Cluster.prototype['getCenter']=Cluster.prototype.getCenter;Cluster.prototype['getSize']=Cluster.prototype.getSize;Cluster.prototype['getMarkers']=Cluster.prototype.getMarkers;ClusterIcon.prototype['onAdd']=ClusterIcon.prototype.onAdd;ClusterIcon.prototype['draw']=ClusterIcon.prototype.draw;ClusterIcon.prototype['onRemove']=ClusterIcon.prototype.onRemove;Object.keys=Object.keys||function(o){var result=[];for(var name in o){if(o.hasOwnProperty(name))
result.push(name);}
return result;};;var bounds={},st_markerjev={},st_shapes={},infowindow,ml_sprem=[],usrLoc_sprem=[],geocoder,viewMode=false,podvprasanje={},podvprasanje_naslov={},max_mark={},allMarkers={},mlmarker={},mapShapeColors=['c0504d','4f81bd','9bbb59','8064a2','4bacc6','f79646','92a9cf','8c0000','f00800','ff8a82','f2c4c8','0b0387','0400fc','9794f2'],deleteMenu;function mapsAPIseNi(MapDeclaration){var google_api=document.getElementById("google_api");if(google_api){var addFunctionOnLoad=function(callback){if(google_api.addEventListener){google_api.addEventListener('load',callback,false);}else{google_api.attachEvent('onload',callback);}};addFunctionOnLoad(MapDeclaration);}
else
loadGoogleMapsScript(function(){MapDeclaration();initializeDeleteMenu();});}
function loadGoogleMapsScript(callback)
{var head=document.getElementsByTagName('head')[0];var script=document.createElement('script');script.type='text/javascript';script.id='google_api';script.src="https://maps.googleapis.com/maps/api/js?key="+google_maps_API_key+"&libraries=places,drawing";script.onreadystatechange=callback;script.onload=callback;head.appendChild(script);}
function drawingControl(controlDiv){controlDiv.style.padding='10px';var controlUI=document.createElement('div');controlUI.style.backgroundColor='#fff';controlUI.style.border='2px solid #fff';controlUI.style.borderRadius='3px';controlUI.style.boxShadow='0 2px 6px rgba(0,0,0,.3)';controlUI.style.cursor='pointer';controlUI.style.marginBottom='22px';controlUI.style.textAlign='center';controlUI.style.display='inline-block';controlUI.title=lang['srv_vprasanje_button_map_clear'];controlDiv.appendChild(controlUI);var controlText=document.createElement('div');controlText.style.color='rgb(25,25,25)';controlText.style.fontFamily='Roboto,Arial,sans-serif';controlText.style.fontSize='16px';controlText.style.lineHeight='28px';controlText.style.paddingLeft='5px';controlText.style.paddingRight='5px';controlText.innerHTML=lang['srv_vprasanje_button_map_clear'];controlUI.appendChild(controlText);return controlUI;}
function createBoundsFromPath(path,spremenljivka){var pathArray=path.getArray();for(var i=0,n=pathArray.length;i<n;i++){var latLng=pathArray[i];bounds[spremenljivka].extend(latLng);}}
function getMarkerUniqueId(lat,lng,spr){var zdot=spr+'_'+lat+'_'+lng;return zdot.split('.').join("-");}
function findMarkerFromAddress(add,spr){for(var i=0;i<allMarkers[spr].length;i++){if(allMarkers[spr][i].address===add)
return allMarkers[spr][i];}
return null;}
function initializeDeleteMenu(){function DeleteMenu(){this.div_=document.createElement('div');this.div_.className='maps-delete-menu';this.div_.innerHTML=lang['srv_vprasanje_delete_point_map'];var menu=this;google.maps.event.addDomListener(this.div_,'click',function(e){e.cancelBubble=true;if(e.stopPropagation)e.stopPropagation();if(menu.get('shape')&&menu.get('vertex')==undefined&&menu.get('marker')==undefined)
menu.removeShape();else
menu.removeVertex();});}
DeleteMenu.prototype=new google.maps.OverlayView();DeleteMenu.prototype.onAdd=function(){var deleteMenu=this;var map=this.getMap();this.getPanes().floatPane.appendChild(this.div_);this.divListener_=google.maps.event.addDomListener(map.getDiv(),'mousedown',function(e){if(e.target!=deleteMenu.div_){deleteMenu.close();}},true);};DeleteMenu.prototype.onRemove=function(){google.maps.event.removeListener(this.divListener_);this.div_.parentNode.removeChild(this.div_);this.set('position');this.set('shape');this.set('vertex');this.set('spremenljivka');this.set('DrawingControl');this.set('drawingManager');this.set('marker');this.set('markerId');};DeleteMenu.prototype.close=function(){this.setMap(null);};DeleteMenu.prototype.draw=function(){var position=this.get('position');var projection=this.getProjection();if(!position||!projection){return;}
var point=projection.fromLatLngToDivPixel(position);this.div_.style.top=point.y+'px';this.div_.style.left=point.x+'px';};DeleteMenu.prototype.open=function(map,shape,vertex,spremenljivka,DrawingControl,drawingManager,marker,markerId){if(shape)
this.set('position',shape.getPath().getAt(vertex));else if(marker)
this.set('position',marker.getPosition());this.set('shape',shape);this.set('vertex',vertex);this.set('spremenljivka',spremenljivka);this.set('DrawingControl',DrawingControl);this.set('drawingManager',drawingManager);this.set('marker',marker);this.set('markerId',markerId);this.setMap(map);this.draw();};DeleteMenu.prototype.open_shape=function(map,shape,position,spremenljivka){this.set('position',position);this.set('shape',shape);this.set('spremenljivka',spremenljivka);this.setMap(map);this.draw();};DeleteMenu.prototype.removeVertex=function(){var spremenljivka=this.get('spremenljivka');var shape=this.get('shape');var vertex=this.get('vertex');var DrawingControl=this.get('DrawingControl');var drawingManager=this.get('drawingManager');var marker=this.get('marker');var markerId=this.get('markerId');if((!shape||vertex==undefined)&&!marker){this.close();return;}
if(marker){if(markerId)
removeMarker(spremenljivka,marker,markerId);else
removeMarkerVM(spremenljivka,marker);}
else if(shape){shape.getPath().removeAt(vertex);if(shape.getPath().length<2){if(DrawingControl!=null&&drawingManager!=null)
clearAndMakeDrawableAgain(spremenljivka,shape,DrawingControl,drawingManager);else
deleteLineInDB(spremenljivka,shape);}}
this.close();};DeleteMenu.prototype.removeShape=function(){var shape=this.get('shape');if(shape){maza_delete_geofence(shape);}
this.close();};deleteMenu=new DeleteMenu();};function map_data_fill(spremenljivka,map_data,podtip){for(var row in map_data){var row_object=map_data[row];var pos={lat:row_object.lat,lng:row_object.lng};createMarker(spremenljivka,row_object.address,pos,false,row_object.text,podtip,row_object.naslov,row_object.vre_id);}}
function createMarker(spremenljivka,add,pos,fromSearchBox,text,podtip,naslov,vre_id){var marker=fromSearchBox?findMarkerFromAddress(add,spremenljivka):null;if(!marker){var map;if(document.getElementById("map_"+spremenljivka))
map=document.getElementById("map_"+spremenljivka).gMap;else
map=document.getElementById("map_canvas_all").gMap;var markerId=((podtip==3)&&vre_id)?vre_id:getMarkerUniqueId(pos.lat,pos.lng,spremenljivka);if($('#'+markerId).length==0){var path_img_dir=srv_site_url+'admin/survey/img_0/';var icon={fillColor:'#FF5555',url:path_img_dir+(podvprasanje[spremenljivka]?'marker_text_off.png':'marker_default.svg'),fillOpacity:1,strokeWeight:1}
var namapo=null;if(!viewMode)
namapo=map;else if(podtip==3){namapo=map;}
var marker=new google.maps.Marker({position:new google.maps.LatLng(pos.lat,pos.lng),id:'marker_'+markerId,map:namapo,icon:icon,address:add});allMarkers[spremenljivka].push(marker);if(ml_sprem.indexOf(spremenljivka)>-1){if(mlmarker[''+spremenljivka]){removeMarker(spremenljivka,mlmarker[''+spremenljivka],markerId);deleteAllMarkerInputs(spremenljivka);}
mlmarker[''+spremenljivka]=marker;}
if(!viewMode){createMarkerInput(spremenljivka,marker,markerId,text);if(podtip!=3)
bindMarkerEvents(spremenljivka,marker,markerId,map);}
var container=document.createElement("div");if(podtip==3){if(naslov){var title=document.createElement("label");title.innerHTML='<b>'+naslov+'</b><br>';container.appendChild(title);}
var label=document.createElement("label");label.innerHTML='<i>'+add+'</i><br>'+(podvprasanje_naslov[spremenljivka]?'<br>':'');label.style.cssText='font-size:0.85em';container.appendChild(label);}else{var label=document.createElement("label");label.innerHTML=viewMode?'<b>'+add+'</b><br>':add+'<br>';container.appendChild(label);}
if(podvprasanje[spremenljivka]){if(podvprasanje_naslov[spremenljivka]){var podvprasanje_title=document.createElement("label");podvprasanje_title.innerHTML=viewMode?podvprasanje_naslov[spremenljivka]+'<br>':'<b>'+podvprasanje_naslov[spremenljivka]+'</b><br>';container.appendChild(podvprasanje_title);}
if(!viewMode){var textBox=document.createElement("textarea");textBox.setAttribute("id",markerId+"_textarea");textBox.style.width="100%";textBox.id=markerId+"_textarea_id";textBox.className="boxsizingBorder";textBox.style.height="50px";}else{var textBox=document.createElement("label");}
if(text&&(text!='-2'&&text!='-4'&&text!='-1')){textBox.innerHTML=viewMode?'<i>'+text+'</i>':text;marker.setIcon({url:path_img_dir+'marker_text_on.png'});}
container.appendChild(textBox);if(!viewMode){google.maps.event.addDomListener(textBox,"input",function(){document.getElementById(markerId+'_text').value=textBox.value;if(textBox.value)
marker.setIcon({url:path_img_dir+'marker_text_on.png'});else
marker.setIcon({url:path_img_dir+'marker_text_off.png'});});}}
var infowin=(podtip==3&&viewMode)?new google.maps.InfoWindow():infowindow;google.maps.event.addListener(marker,'click',function(){infowin.setContent(container);infowin.open(map,marker);$("#"+markerId+"_textarea_id").focus();});infowin.setContent(container);infowin.open(map,marker);if(ml_sprem.indexOf(spremenljivka)==-1)
bounds[spremenljivka].extend(marker.position);if(ml_sprem.indexOf(spremenljivka)>-1||(st_markerjev[spremenljivka]==0)&&viewMode){map.setCenter(marker.position);map.setZoom(17);}else if(st_markerjev[spremenljivka]>0){map.fitBounds(bounds[spremenljivka]);if(viewMode&&max_mark[spremenljivka]==st_markerjev[spremenljivka]+1){google.maps.event.addListenerOnce(map,"bounds_changed",function(){map.setZoom(map.getZoom()-1);});}}
st_markerjev[spremenljivka]++;if(ml_sprem.indexOf(spremenljivka)==-1&&!viewMode&&max_mark[spremenljivka]==st_markerjev[spremenljivka])
$('#max_marker_'+spremenljivka).show();$("#"+markerId+"_textarea_id").focus();}}else{google.maps.event.trigger(marker,'click');}}
function bindMarkerEvents(spremenljivka,marker,markerId,map){google.maps.event.addListener(marker,"rightclick",function(){deleteMenu.open(map,null,null,spremenljivka,null,null,marker,markerId);$('#max_marker_'+spremenljivka).hide();});google.maps.event.addListener(marker,"dblclick",function(){deleteMenu.open(map,null,null,spremenljivka,null,null,marker,markerId);$('#max_marker_'+spremenljivka).hide();});}
function removeMarker(spremenljivka,marker,markerId){marker.setMap(null);var index=allMarkers[spremenljivka].indexOf(marker);if(index>-1)
allMarkers[spremenljivka].splice(index,1);st_markerjev[spremenljivka]--;deleteMarkerInput(markerId);}
function createMarkerInput(spremenljivka,marker,markerId,text){var $variable_holder=$("#spremenljivka_"+spremenljivka+"_variabla");var $markerInput=$("<input>",{id:markerId,name:"vrednost_"+spremenljivka+"[]",type:"hidden",class:"marker_input",value:markerId+"|"+marker.getPosition().lat()+"|"+
marker.getPosition().lng()+"|"+marker.address});$variable_holder.append($markerInput);if(podvprasanje[spremenljivka]){var $textareaInput=$("<input>",{id:markerId+'_text',name:markerId+'_text',type:"hidden",value:text,class:"marker_input"});$variable_holder.append($textareaInput);}}
function deleteMarkerInput(markerId){$('#'+markerId).remove();$('#'+markerId+'_text').remove();}
function deleteAllMarkerInputs(spremenljivka){$('#spremenljivka_'+spremenljivka+'_variabla').find('input.marker_input').remove();};function klikNaMapo(spremenljivka){var map=document.getElementById("map_"+spremenljivka).gMap;google.maps.event.addListener(map,'click',function(event){var pos={lat:event.latLng.lat(),lng:event.latLng.lng()};if(ml_sprem.indexOf(spremenljivka)>-1||max_mark[spremenljivka]!=st_markerjev[spremenljivka]){GeocodingF(pos,function(data){if(data!=null){createMarker(spremenljivka,data.formatted_address,pos,false);}else{alert(lang['srv_resevanje_alert_location_not_found_map']);}});}
return pos;});};function GeocodingF(pos,callback){geocoder.geocode({'location':pos},function(results,status){if(status===google.maps.GeocoderStatus.OK){if(results[0]){callback(results[0]);}else{console.log('No results found');callback(null);}}
else{console.log('Geocoder failed due to: '+status);if(status=='ZERO_RESULTS'){var obj={formatted_address:""}
callback(obj);}
else
callback(null);}});}
function centrirajMap(centerInMap,map){geocoderFromAddress(centerInMap,function(place){if(place){map.setCenter(place.geometry.location);map.fitBounds(place.geometry.viewport);}});}
function geocoderFromAddress(address,callback){var delay=100;var stej_poizvedbe=0;geocoder.geocode({'address':address},function(results,status){if(status===google.maps.GeocoderStatus.OK){callback(results[0]);}
else if(status===google.maps.GeocoderStatus.OVER_QUERY_LIMIT){if(stej_poizvedbe<10){setTimeout(geocoderFromAddress(address,callback),delay);stej_poizvedbe++;delay+=100;}
else
console.log('Geocoder error: OVER_QUERY_LIMIT; repeated: '+stej_poizvedbe);}
else if(status===google.maps.GeocoderStatus.ZERO_RESULTS){alert(lang['srv_branching_no_results_geo_map']+': '+address);}
else
console.log('Geocoder error: '+status);return null;});};function userLocation(spremenljivka){if(navigator.geolocation){var options={enableHighAccuracy:true,timeout:0,maximumAge:Infinity};navigator.geolocation.getCurrentPosition(function(position){var pos={lat:position.coords.latitude,lng:position.coords.longitude};userLocationProceduraF(pos,spremenljivka);},function(error){var warning=$('#warning_geo_'+spremenljivka);if(error){switch(error.code){case error.PERMISSION_DENIED:warning.html(lang['srv_resevanje_user_denied_geo_map']);break;case error.POSITION_UNAVAILABLE:warning.html(lang['srv_resevanje_position_unavailable_geo_map']);break;case error.TIMEOUT:warning.html(lang['srv_resevanje_timeout_geo_map']);break;case error.UNKNOWN_ERROR:warning.html(lang['srv_resevanje_unknown_error_geo_map']);break;}}
else
warning.html(lang['srv_resevanje_browser_not_support_geo_map']);warning.show();});}else{handleLocationError(false);}}
function userLocationProceduraF(pos,spremenljivka){if(ml_sprem.indexOf(spremenljivka)>-1||max_mark[spremenljivka]-st_markerjev[spremenljivka]!=0){GeocodingF(pos,function(data){if(data!=null){for(key in usrLoc_sprem){createMarker(usrLoc_sprem[key],data.formatted_address,pos,true);}}else{alert(lang['srv_resevanje_alert_location_not_found_map']);}});}};function searchBox(spremenljivka,doOnPlacesChanged){var map;if(document.getElementById("map_"+spremenljivka))
map=document.getElementById("map_"+spremenljivka).gMap;else if(document.getElementById("br_map_"+spremenljivka)){map=document.getElementById("br_map_"+spremenljivka).gMap;}
else{map=document.getElementById("maza_map_geofencing").gMap;}
var input=document.getElementById('pac-input_'+spremenljivka);input.style.display='inline-block';var searchBox=new google.maps.places.SearchBox(input);map.controls[google.maps.ControlPosition.TOP_LEFT].push(input);map.addListener('bounds_changed',function(){searchBox.setBounds(map.getBounds());});searchBox.addListener('places_changed',function(){var places=searchBox.getPlaces();if(places.length==0)
return;if(places[0].geometry){var pos={lat:places[0].geometry.location.lat(),lng:places[0].geometry.location.lng()};doOnPlacesChanged(pos,places[0].formatted_address);}
else{findPlace(places[0].name,function(pos,formatted_address){doOnPlacesChanged(pos,formatted_address);});}});}
function findPlace(address,doAfterPlaceFound){geocoderFromAddress(address,function(place){if(place){var pos={lat:place.geometry.location.lat(),lng:place.geometry.location.lng()};doAfterPlaceFound(pos,place.formatted_address);}});};function drawShape(spremenljivka,shape,shape_type){var map=document.getElementById("map_"+spremenljivka).gMap;var drawingMode=(shape_type==='polyline')?google.maps.drawing.OverlayType.POLYLINE:google.maps.drawing.OverlayType.POLYGON;var startDrawingMode=shape!==null?null:drawingMode;var shapeOptions=(shape_type==='polyline')?polylineOptions():polygonOptions();var drawingManager=new google.maps.drawing.DrawingManager({drawingMode:startDrawingMode,drawingControl:shape===null,drawingControlOptions:{position:google.maps.ControlPosition.TOP_RIGHT,drawingModes:[shape_type]},polylineOptions:shapeOptions,polygonOptions:shapeOptions});var drawingControlDiv=document.createElement('div');var DrawingControl=new drawingControl(drawingControlDiv,map,spremenljivka);drawingControlDiv.index=1;map.controls[google.maps.ControlPosition.TOP_RIGHT].push(drawingControlDiv);DrawingControl.style.display=(shape!==null&&!viewMode)?'inline-block':'none';if(shape!==null){shape.type=shape_type;createBoundsFromPath(shape.getPath(),spremenljivka);map.fitBounds(bounds[spremenljivka]);afterShapeCompleteSettings(drawingManager,DrawingControl,shape,spremenljivka,map);}
google.maps.event.addListener(drawingManager,shape_type+'complete',function(shape){shape.type=shape_type;afterShapeCompleteSettings(drawingManager,DrawingControl,shape,spremenljivka,map);});drawingManager.setMap(map);}
function afterShapeCompleteSettings(drawingManager,DrawingControl,shape,spremenljivka,map){drawingManager.setOptions({drawingControl:false});drawingManager.setDrawingMode(null);DrawingControl.style.display='inline-block';DrawingControl.addEventListener('click',function(){clearAndMakeDrawableAgain(spremenljivka,shape,DrawingControl,drawingManager);});shapeInputHandler(shape,spremenljivka);var end_info_warning=document.getElementById("end_shape_info_"+spremenljivka);end_info_warning.style.display="none";google.maps.event.addListener(shape.getPath(),'set_at',function(index,obj){shapeInputHandler(shape,spremenljivka);});google.maps.event.addListener(shape.getPath(),'insert_at',function(index,obj){shapeInputHandler(shape,spremenljivka);});google.maps.event.addListener(shape.getPath(),'remove_at',function(index,obj){shapeInputHandler(shape,spremenljivka);});setDeleteMenu(shape,map,spremenljivka,DrawingControl,drawingManager)}
function setDeleteMenu(shape,map,spremenljivka,DrawingControl,drawingManager){google.maps.event.addListener(shape,'rightclick',function(e){if(e.vertex==undefined){return;}
deleteMenu.open(map,shape,e.vertex,spremenljivka,DrawingControl,drawingManager);});google.maps.event.addListener(shape,'dblclick',function(e){if(e.vertex==undefined){return;}
deleteMenu.open(map,shape,e.vertex,spremenljivka,DrawingControl,drawingManager);});}
function map_data_fill_info_shapes(spremenljivka,map_data){var fillMode=(document.getElementById("map_"+spremenljivka)!==null);var map;if(fillMode)
map=document.getElementById("map_"+spremenljivka).gMap;else
map=document.getElementById("map_canvas_all").gMap;var shapeOption=polylineOptions(map);for(var i=0;i<map_data.length;i++)
{var color=mapShapeColors[i%mapShapeColors.length];shapeOption.path=map_data[i].path;shapeOption.strokeColor='#'+color;shapeOption.strokeColorOrg='#'+color;shapeOption.editable=false;var shape=new google.maps.Polyline(shapeOption);var container=document.createElement("div");container.style.cssText='margin-right:1px';var Title=document.createElement("label");Title.style.cssText="font-size:1em;";Title.innerHTML='<b>'+map_data[i].address+'</b>';container.appendChild(Title);shape.ifnowin=container;shape.address=map_data[i].address;var infow=new google.maps.InfoWindow();google.maps.event.addListener(shape,'mouseover',function(ev){this.setOptions({strokeWeight:6,zIndex:2});if(this.address){infow.setContent(this.ifnowin);infow.setPosition(ev.latLng);infow.open(map);}});google.maps.event.addListener(shape,'mouseout',function(){this.setOptions({strokeWeight:4,zIndex:1});infow.close();});}}
function clearAndMakeDrawableAgain(spremenljivka,shape,DrawingControl,drawingManager){shape.setMap(null);deleteAllShapeInputs(spremenljivka);DrawingControl.style.display='none';drawingManager.setOptions({drawingControl:true});drawingManager.setDrawingMode(shape.type);var end_info_warning=document.getElementById("end_shape_info_"+spremenljivka);end_info_warning.style.display="inline-block";}
function shapeInputHandler(shape,spremenljivka){deleteAllShapeInputs(spremenljivka);createAllShapeInputs(shape.getPath(),spremenljivka);}
function createAllShapeInputs(path,spremenljivka){var pathArray=path.getArray();for(var i=0,n=pathArray.length;i<n;i++){var latLng=pathArray[i];createShapeInput(spremenljivka,{lat:latLng.lat(),lng:latLng.lng()},i+1);}}
function createShapeInput(spremenljivka,vertices,index){var $variable_holder=$("#spremenljivka_"+spremenljivka+"_variabla");var $shapeInput=$("<input>",{name:"vrednost_"+spremenljivka+"[]",type:"hidden",class:"shape_input",value:index+"|"+vertices.lat+"|"+vertices.lng});$variable_holder.append($shapeInput);}
function deleteAllShapeInputs(spremenljivka){$('#spremenljivka_'+spremenljivka+'_variabla').find('input.shape_input').remove();}
function map_data_fill_shape(spremenljivka,map_data,shape_type){var fillMode=(document.getElementById("map_"+spremenljivka)!==null);var map;if(fillMode)
map=document.getElementById("map_"+spremenljivka).gMap;else
map=document.getElementById("map_canvas_all").gMap;var shapeOption=shape_type==='polyline'?polylineOptions(map):polygonOptions(map);if(fillMode){shapeOption.path=map_data;var shape=shape_type==='polyline'?new google.maps.Polyline(shapeOption):new google.maps.Polygon(shapeOption);if(!viewMode){createAllShapeInputs(shape.getPath(),spremenljivka);drawShape(spremenljivka,shape,shape_type);}
else{createBoundsFromPath(shape.getPath(),spremenljivka);map.fitBounds(bounds[spremenljivka]);}}
else{var keys=Object.keys(map_data);for(var i=0;i<keys.length;i++)
{var color=mapShapeColors[i%mapShapeColors.length];shapeOption.path=map_data[keys[i]];shapeOption.strokeColor='#'+color;shapeOption.strokeColorOrg='#'+color;var shape=shape_type==='polyline'?new google.maps.Polyline(shapeOption):new google.maps.Polygon(shapeOption);google.maps.event.addListener(shape,'mouseover',function(){this.setOptions({strokeWeight:6,strokeColor:'black',zIndex:2});});google.maps.event.addListener(shape,'mouseout',function(){this.setOptions({strokeWeight:4,strokeColor:this.strokeColorOrg,zIndex:1});});createBoundsFromPath(shape.getPath(),'all');map.fitBounds(bounds['all']);}}}
function polylineOptions(map){return{strokeColor:'black',strokeColorOrg:'black',strokeWeight:4,clickable:true,editable:!viewMode,zIndex:1,map:map};}
function polygonOptions(map){return{strokeColor:'black',strokeColorOrg:'black',strokeWeight:4,clickable:true,editable:!viewMode,zIndex:1,map:map};};function centerControl(controlDiv,map,spremenljivka){var controlUI=document.createElement('div');controlUI.style.backgroundColor='#fff';controlUI.style.border='2px solid #fff';controlUI.style.borderRadius='3px';controlUI.style.boxShadow='0 2px 6px rgba(0,0,0,.3)';controlUI.style.cursor='pointer';controlUI.style.marginBottom='22px';controlUI.style.textAlign='center';controlUI.style.display='inline-block';controlUI.title=lang['srv_vprasanje_fokus_button_map_set_title'];controlDiv.appendChild(controlUI);var controlText=document.createElement('div');controlText.style.color='rgb(25,25,25)';controlText.style.fontFamily='Roboto,Arial,sans-serif';controlText.style.fontSize='16px';controlText.style.lineHeight='28px';controlText.style.paddingLeft='5px';controlText.style.paddingRight='5px';controlText.innerHTML=lang['srv_vprasanje_fokus_button_map_set'];controlUI.appendChild(controlText);var controlUI1=document.createElement('div');controlUI1.style.backgroundColor='#fff';controlUI1.style.border='2px solid #fff';controlUI1.style.borderRadius='3px';controlUI1.style.boxShadow='0 2px 6px rgba(0,0,0,.3)';controlUI1.style.cursor='pointer';controlUI1.style.marginBottom='22px';controlUI1.style.textAlign='center';controlUI1.style.display='none';controlUI1.style.marginLeft='5px';controlUI1.title=lang['srv_vprasanje_fokus_button_map_cancel_title'];controlDiv.appendChild(controlUI1);var controlText1=document.createElement('div');controlText1.style.color='rgb(25,25,25)';controlText1.style.fontFamily='Roboto,Arial,sans-serif';controlText1.style.fontSize='16px';controlText1.style.lineHeight='28px';controlText1.style.paddingLeft='5px';controlText1.style.paddingRight='5px';controlText1.innerHTML=lang['srv_vprasanje_fokus_button_map_cancel'];controlUI1.appendChild(controlText1);controlUI.addEventListener('click',function(){if(controlText.innerHTML===lang['srv_vprasanje_fokus_button_map_set']){controlText.innerHTML=lang['srv_vprasanje_fokus_button_map_save'];controlUI.title=lang['srv_vprasanje_fokus_button_map_save_title'];setMapMovable(map);controlUI1.style.display='inline-block';}
else{set_fokus_koordiante_map(spremenljivka,map.getCenter().lat(),map.getCenter().lng(),map.getZoom(),'');set_fokus_string_map(spremenljivka,'')
var fokus_mape_settings=document.getElementById("fokus_mape_"+spremenljivka);if(fokus_mape_settings)
document.getElementById("fokus_mape_"+spremenljivka).value="";setMapNoFocus(map);}});controlUI1.addEventListener('click',function(){setMapNoFocus(map);vprasanje_fullscreen(spremenljivka);});function setMapNoFocus(map){setMapFixed(map);controlUI1.style.display='none';controlText.innerHTML=lang['srv_vprasanje_fokus_button_map_set'];controlUI.title=lang['srv_vprasanje_fokus_button_map_set_title'];}}
function set_fokus_koordiante_map(spremenljivka,lat,lng,zoom,fokus){var fokusJSON={koordinate:{center:{lat:null,lng:null},zoom:null,fokus:fokus},spr_id:spremenljivka,anketa:srv_meta_anketa_id};fokusJSON.koordinate.center.lat=lat;fokusJSON.koordinate.center.lng=lng;fokusJSON.koordinate.zoom=zoom;$.post('ajax.php?t=branching&a=fokus_koordiante_map',fokusJSON);}
function set_fokus_string_map(spremenljivka,fokus){var fokusJSON2={fokus:fokus,spr_id:spremenljivka,anketa:srv_meta_anketa_id};$.post('ajax.php?t=branching&a=fokus_string_map',fokusJSON2);}
function setMapMovable(map){map.set('zoomControl',true);map.set('disableDoubleClickZoom',false);map.set('scrollwheel',true);map.set('navigationControl',true);map.set('draggable',true);map.set('mapTypeControl',true);}
function setMapFixed(map){map.set('zoomControl',false);map.set('disableDoubleClickZoom',true);map.set('scrollwheel',false);map.set('navigationControl',false);map.set('draggable',false);map.set('mapTypeControl',false);};var active_shape;function map_data_fill_vnaprej_mrkerji(spremenljivka,map_data,locked){for(var row in map_data){var row_object=map_data[row];var pos={lat:row_object.lat,lng:row_object.lng};createMarkerVnaprej(spremenljivka,row_object.address,row_object.naslov,ustvari_basic_marker(spremenljivka,pos,false),row_object.id,true,locked);}}
function map_data_fill_vnaprej_shapes(spremenljivka,map_data,locked){var map=document.getElementById("br_map_"+spremenljivka).gMap;var shapeOption=polylineOptions(map);var last_id=0;for(var i=0;i<map_data.length;i++)
{last_id=map_data[i].overlay_id;var color=mapShapeColors[map_data[i].overlay_id-1%mapShapeColors.length];shapeOption.path=map_data[i].path;shapeOption.strokeColor='#'+color;shapeOption.strokeColorOrg='#'+color;shapeOption.editable=false;var shape=new google.maps.Polyline(shapeOption);shape.overlay_id=map_data[i].overlay_id;shape.address=map_data[i].address;shape.infowin=makeShapeInfoWindow(spremenljivka,shape,locked);setListenersShapeVM(spremenljivka,shape,map,locked);}
return last_id;}
function ustvari_basic_marker(spremenljivka,pos,addressFromSearchBox){var marker=addressFromSearchBox?findMarkerFromAddress(addressFromSearchBox,spremenljivka):null;if(!marker){var map=document.getElementById("br_map_"+spremenljivka).gMap;var marker=new google.maps.Marker({position:new google.maps.LatLng(pos.lat,pos.lng),map:map,identifier:getMarkerUniqueId(pos.lat,pos.lng,spremenljivka),icon:{url:"img_0/marker_text_off.png"}});var no_value_warning=document.getElementById("variabla_no_value_"+spremenljivka);no_value_warning.style.display="none";allMarkers[spremenljivka].push(marker);return marker;}else{google.maps.event.trigger(marker,'click');return null}}
function shraniMarker(spremenljivka,add,text,marker){if(marker!=null){$.post('ajax.php?t=branching&a=save_marker',{spr_id:spremenljivka,address:add,lat:marker.getPosition().lat(),lng:marker.getPosition().lng(),anketa:srv_meta_anketa_id},function(id){createMarkerVnaprej(spremenljivka,add,text,marker,id,false);});}}
function createMarkerVnaprej(spremenljivka,add,naslov,marker,id,fromLoad,locked){if(marker!=null){var map=document.getElementById("br_map_"+spremenljivka).gMap;marker.address=add;marker.id=id;bounds[spremenljivka].extend(marker.position);if(!locked)
bindMarkerEventsVM(spremenljivka,marker,map);var container=document.createElement("div");container.style.cssText='margin-right:1px';var textBoxTitle=document.createElement("input");textBoxTitle.style.cssText="font-weight:bold; font-size:1em";textBoxTitle.type="text";textBoxTitle.value=naslov;textBoxTitle.id="input_map_vre_"+id;textBoxTitle.className="input_title";container.appendChild(textBoxTitle);container.appendChild(document.createElement("br"));if(locked)
textBoxTitle.disabled="disabled";google.maps.event.addDomListener(textBoxTitle,"change",function(){$.post('ajax.php?t=vprasanjeinline&a=inline_vrednost_naslov_save',{spremenljivka:spremenljivka,vrednost:id,naslov:textBoxTitle.value,anketa:srv_meta_anketa_id,lang_id:srv_meta_lang_id});});var address=document.createElement("label");address.innerHTML='<i>'+add+'</i>';address.style.cssText='font-size:0.85em;';container.appendChild(address);container.appendChild(document.createElement("br"));if(podvprasanje_naslov[spremenljivka]){container.appendChild(document.createElement("br"));var podvprasanje=document.createElement("label");podvprasanje.innerHTML='<b>'+podvprasanje_naslov[spremenljivka]+'</b>';podvprasanje.style.cssText='font-size:0.95em';container.appendChild(podvprasanje);container.appendChild(document.createElement("br"));}
var textBox=document.createElement("textarea");textBox.style.width="100%";textBox.className="boxsizingBorder";textBox.disabled="disabled";textBox.style.height="50px";textBox.style.resize="none";container.appendChild(textBox);google.maps.event.addListener(marker,'click',function(){blurTitleInfowindow(false);infowindow.setContent(container);infowindow.open(map,marker);$("#input_map_vre_"+id).focus();});if(!fromLoad){blurTitleInfowindow(true);infowindow.setContent(container);infowindow.open(map,marker);$("#input_map_vre_"+id).focus();}else{map.fitBounds(bounds[spremenljivka]);}
st_markerjev[spremenljivka]++;}}
function bindMarkerEventsVM(spremenljivka,marker,map){google.maps.event.addListener(marker,"rightclick",function(){deleteMenu.open(map,null,null,spremenljivka,null,null,marker);});google.maps.event.addListener(marker,"dblclick",function(){deleteMenu.open(map,null,null,spremenljivka,null,null,marker);});}
function removeMarkerVM(spremenljivka,marker){function callback(){marker.setMap(null);var index=allMarkers[spremenljivka].indexOf(marker);if(index>-1)
allMarkers[spremenljivka].splice(index,1);st_markerjev[spremenljivka]--;if(st_markerjev[spremenljivka]<1){var no_value_warning=document.getElementById("variabla_no_value_"+spremenljivka);no_value_warning.style.display="inline-block";}}
inline_vrednost_delete(spremenljivka,marker.id,0,callback);}
function drawMarkers(spremenljivka){var map=document.getElementById("br_map_"+spremenljivka).gMap;var startDrawingMode=google.maps.drawing.OverlayType.MARKER;var icon={url:"img_0/marker_text_off.png"};var drawingManager=new google.maps.drawing.DrawingManager({drawingMode:startDrawingMode,drawingControl:true,drawingControlOptions:{position:google.maps.ControlPosition.TOP_RIGHT,drawingModes:['marker','polyline']},markerOptions:{icon:icon},polylineOptions:polylineOptions(map)});google.maps.event.addListener(drawingManager,'markercomplete',function(marker){var no_value_warning=document.getElementById("variabla_no_value_"+spremenljivka);no_value_warning.style.display="none";var pos={lat:marker.getPosition().lat(),lng:marker.getPosition().lng()};marker.indentifier=getMarkerUniqueId(pos.lat,pos.lng,spremenljivka);allMarkers[spremenljivka].push(marker);GeocodingF(pos,function(data){if(data!=null){shraniMarker(spremenljivka,data.formatted_address,'',marker);}else{marker.setMap(null);genericAlertPopup('srv_resevanje_alert_location_not_found_map');}});});google.maps.event.addListener(drawingManager,'polylinecomplete',function(line){afterShapeCompleteSettingsVM(line,spremenljivka,map);});drawingManager.setMap(map);google.maps.event.addListener(map,'click',function(){changeFocusLine(null);});}
function changeFocusLine(shape){if(active_shape!=shape){if(active_shape)
active_shape.setOptions({editable:false});active_shape=shape;}
blurTitleInfowindow(true);}
function blurTitleInfowindow(closeInfowindow){if(infowindow.getMap()){infowindow.content.getElementsByClassName("input_title")[0].blur();if(closeInfowindow)
infowindow.close();}}
function polylineOptionsVM(map){return{strokeColor:'black',strokeColorOrg:'black',strokeWeight:4,clickable:true,editable:!viewMode,zIndex:1,map:map};}
function afterShapeCompleteSettingsVM(shape,spremenljivka,map){st_shapes[spremenljivka]['last_id']++;shape.overlay_id=st_shapes[spremenljivka]['last_id'];shape.address='';shape.infowin=makeShapeInfoWindow(spremenljivka,shape);saveNewLineInDB(spremenljivka,shape.getPath().getArray(),st_shapes[spremenljivka]['last_id']);var color=mapShapeColors[shape.overlay_id-1%mapShapeColors.length];st_shapes[spremenljivka]['count']++;shape.setOptions({strokeColor:'#'+color});changeFocusLine(shape);infowindow.setContent(shape.infowin);var pathArr=shape.getPath().getArray();infowindow.setPosition(pathArr[Math.round((pathArr.length-1)/2)]);infowindow.open(map);setListenersShapeVM(spremenljivka,shape,map);$("#map_input_overlay_id_"+spremenljivka+"_"+shape.overlay_id).focus();}
function makeShapeInfoWindow(spremenljivka,shape,locked){var container=document.createElement("div");container.style.cssText='margin-right:1px';var textBoxTitle=document.createElement("input");textBoxTitle.style.cssText="font-weight:bold; font-size:1em !important; display: block; float: left;";textBoxTitle.type="text";textBoxTitle.value=shape.address;textBoxTitle.className="input_title";textBoxTitle.id="map_input_overlay_id_"+spremenljivka+"_"+shape.overlay_id;container.appendChild(textBoxTitle);if(locked)
textBoxTitle.disabled="disabled";if(!locked){var deleteImg=document.createElement("span");deleteImg.className="faicon delete icon-grey_dark_link";deleteImg.title=lang['srv_vprasanje_delete_line_map'];deleteImg.style.cssText="height:1.65em; display: block; float: left; margin-left:7px; cursor: pointer;";container.appendChild(deleteImg);google.maps.event.addDomListener(deleteImg,"click",function(){if(confirm(lang['srv_vprasanje_delete_line_confirm_map']))
deleteLineInDB(spremenljivka,shape);});google.maps.event.addDomListener(textBoxTitle,"change",function(){var lineData={anketa:srv_meta_anketa_id,spr_id:spremenljivka,overlay_id:shape.overlay_id,address:textBoxTitle.value};$.post('ajax.php?t=branching&a=edit_naslov_polyline',lineData);});}
return container;}
function setListenersShapeVM(spremenljivka,shape,map,locked){google.maps.event.addListener(shape,'click',function(ev){if(!locked)
this.setOptions({editable:true});changeFocusLine(this);infowindow.setContent(this.infowin);infowindow.setPosition(ev.latLng);infowindow.open(map);$("#map_input_overlay_id_"+spremenljivka+"_"+shape.overlay_id).focus();});if(!locked){google.maps.event.addListener(shape.getPath(),'set_at',function(index,obj){saveEditedLineInDB(spremenljivka,shape.getPath().getArray(),shape.overlay_id);});google.maps.event.addListener(shape.getPath(),'insert_at',function(index,obj){saveEditedLineInDB(spremenljivka,shape.getPath().getArray(),shape.overlay_id);});google.maps.event.addListener(shape.getPath(),'remove_at',function(index,obj){saveEditedLineInDB(spremenljivka,shape.getPath().getArray(),shape.overlay_id);});setDeleteMenu(shape,map,spremenljivka)}}
function setDeleteMenu(shape,map,spremenljivka){google.maps.event.addListener(shape,'rightclick',function(e){if(e.vertex==undefined){return;}
deleteMenu.open(map,shape,e.vertex,spremenljivka,null,null);});google.maps.event.addListener(shape,'dblclick',function(e){if(e.vertex==undefined){return;}
deleteMenu.open(map,shape,e.vertex,spremenljivka,null,null);});}
function createLineData(spremenljivka,pathArray,overlay_id){var lineData={anketa:srv_meta_anketa_id,spr_id:spremenljivka,overlay_id:overlay_id,path:[]};for(var i=0,n=pathArray.length;i<n;i++){var latLng=pathArray[i];var vrstni_red=i+1;lineData.path[i]={lat:latLng.lat(),lng:latLng.lng(),vrstni_red:i+1};}
return lineData;}
function saveNewLineInDB(spremenljivka,pathArray,overlay_id){var lineData=createLineData(spremenljivka,pathArray,overlay_id);$.post('ajax.php?t=branching&a=save_polyline',lineData);}
function saveEditedLineInDB(spremenljivka,pathArray,overlay_id){var lineData=createLineData(spremenljivka,pathArray,overlay_id);$.post('ajax.php?t=branching&a=edit_polyline',lineData);}
function deleteLineInDB(spremenljivka,shape){shape.setMap(null);st_shapes[spremenljivka]['count']--;blurTitleInfowindow(true);var lineData={anketa:srv_meta_anketa_id,spr_id:spremenljivka,overlay_id:shape.overlay_id};$.post('ajax.php?t=branching&a=delete_polyline',lineData);};var videos=[];(function(window){var _userMedia;function FlashError(){var temp=Error.apply(this,arguments);temp.name=this.name="FlashError";this.stack=temp.stack;this.message=temp.message;}
function WebcamError(){var temp=Error.apply(this,arguments);temp.name=this.name="WebcamError";this.stack=temp.stack;this.message=temp.message;}
IntermediateInheritor=function(){};IntermediateInheritor.prototype=Error.prototype;FlashError.prototype=new IntermediateInheritor();WebcamError.prototype=new IntermediateInheritor();var Webcam={version:'1.0.10',protocol:location.protocol.match(/https/i)?'https':'http',loaded:false,live:false,userMedia:true,params:{width:0,height:0,dest_width:0,dest_height:0,image_format:'jpeg',jpeg_quality:90,force_flash:false,flip_horiz:false,fps:30,upload_name:'webcam',constraints:null,swfURL:'',flashNotDetectedText:'ERROR: No Adobe Flash Player detected.  Webcam.js relies on Flash for browsers that do not support getUserMedia (like yours).',unfreeze_snap:true},errors:{FlashError:FlashError,WebcamError:WebcamError},hooks:{},init:function(){var self=this;this.mediaDevices=(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia)?navigator.mediaDevices:((navigator.mozGetUserMedia||navigator.webkitGetUserMedia)?{getUserMedia:function(c){return new Promise(function(y,n){(navigator.mozGetUserMedia||navigator.webkitGetUserMedia).call(navigator,c,y,n);});}}:null);window.URL=window.URL||window.webkitURL||window.mozURL||window.msURL;this.userMedia=this.userMedia&&!!this.mediaDevices&&!!window.URL;if(navigator.userAgent.match(/Firefox\D+(\d+)/)){if(parseInt(RegExp.$1,10)<21)this.userMedia=null;}
if(this.userMedia){window.addEventListener('beforeunload',function(event){self.reset();});}},attach:function(inpid){var parent_element=document.getElementById('fotoparent_'+inpid);parent_element.style.display='';if(typeof(inpid)=='string'){elem=document.getElementById('#my_camera_'+inpid)||document.querySelector('#my_camera_'+inpid);}
if(!elem){return this.dispatch('error',new WebcamError("Could not locate DOM element to attach to."));fotoShowNormalFileUploadInput();}
this.container=elem;elem.innerHTML='';var peg=document.createElement('div');elem.appendChild(peg);this.peg=peg;if(!this.params.width)this.params.width=elem.offsetWidth;if(!this.params.height)this.params.height=elem.offsetHeight;if(!this.params.width||!this.params.height){return this.dispatch('error',new WebcamError("No width and/or height for webcam.  Please call set() first, or attach to a visible element."));fotoShowNormalFileUploadInput();}
if(!this.params.dest_width)this.params.dest_width=this.params.width;if(!this.params.dest_height)this.params.dest_height=this.params.height;this.userMedia=_userMedia===undefined?this.userMedia:_userMedia;if(this.params.force_flash){_userMedia=this.userMedia;this.userMedia=null}
if(typeof this.params.fps!=="number")this.params.fps=30;var scaleX=this.params.width/this.params.dest_width;var scaleY=this.params.height/this.params.dest_height;if(this.userMedia){var video=document.createElement('video');video.setAttribute('autoplay','autoplay');video.setAttribute('id','video_'+inpid);video.style.width=''+this.params.dest_width+'px';video.style.height=''+this.params.dest_height+'px';if((scaleX!=1.0)||(scaleY!=1.0)){elem.style.overflow='hidden';video.style.webkitTransformOrigin='0px 0px';video.style.mozTransformOrigin='0px 0px';video.style.msTransformOrigin='0px 0px';video.style.oTransformOrigin='0px 0px';video.style.transformOrigin='0px 0px';video.style.webkitTransform='scaleX('+scaleX+') scaleY('+scaleY+')';video.style.mozTransform='scaleX('+scaleX+') scaleY('+scaleY+')';video.style.msTransform='scaleX('+scaleX+') scaleY('+scaleY+')';video.style.oTransform='scaleX('+scaleX+') scaleY('+scaleY+')';video.style.transform='scaleX('+scaleX+') scaleY('+scaleY+')';}
elem.appendChild(video);this.video=video;videos.push(video);parent_element.style.display='none';var self=this;this.mediaDevices.getUserMedia({"audio":false,"video":this.params.constraints||{mandatory:{minWidth:this.params.dest_width,minHeight:this.params.dest_height}}}).then(function(stream){var stejcam=0;for(i=0;i<videos.length;i++){var video1=videos[i];video1.onloadedmetadata=function(e){self.stream=stream;self.loaded=true;self.live=true;self.dispatch('load');self.dispatch('live');self.flip();document.getElementById(vse_kamere_ids[stejcam]).style.display='none';parent_element=document.getElementById('fotoparent_'+vse_kamere_ids[stejcam]);stejcam++;parent_element.style.display='';parent_element.style.visibility='visible';};if("srcObject"in video1){video1.srcObject=stream;}
else{video1.src=window.URL.createObjectURL(stream);}}}).catch(function(err){parent_element.style.display='none';return self.dispatch('error',err);fotoShowNormalFileUploadInput();});}
else{document.getElementById(inpid).style.display='none';parent_element.style.display='';parent_element.style.visibility='visible';window.Webcam=Webcam;var div=document.createElement('div');div.innerHTML=this.getSWFHTML();elem.appendChild(div);}
if(this.params.crop_width&&this.params.crop_height){var scaled_crop_width=Math.floor(this.params.crop_width*scaleX);var scaled_crop_height=Math.floor(this.params.crop_height*scaleY);elem.style.width=''+scaled_crop_width+'px';elem.style.height=''+scaled_crop_height+'px';elem.style.overflow='hidden';elem.scrollLeft=Math.floor((this.params.width/2)-(scaled_crop_width/2));elem.scrollTop=Math.floor((this.params.height/2)-(scaled_crop_height/2));}
else{elem.style.width=''+this.params.width+'px';elem.style.height=''+this.params.height+'px';}},reset:function(){if(this.preview_active)this.unfreeze();this.unflip();if(this.userMedia){if(this.stream){if(this.stream.getVideoTracks){var tracks=this.stream.getVideoTracks();if(tracks&&tracks[0]&&tracks[0].stop)tracks[0].stop();}
else if(this.stream.stop){this.stream.stop();}}
delete this.stream;delete this.video;}
if(this.userMedia!==true){this.getMovie()._releaseCamera();}
if(this.container){this.container.innerHTML='';delete this.container;}
this.loaded=false;this.live=false;},set:function(){if(arguments.length==1){for(var key in arguments[0]){this.params[key]=arguments[0][key];}}
else{this.params[arguments[0]]=arguments[1];}},on:function(name,callback){name=name.replace(/^on/i,'').toLowerCase();if(!this.hooks[name])this.hooks[name]=[];this.hooks[name].push(callback);},off:function(name,callback){name=name.replace(/^on/i,'').toLowerCase();if(this.hooks[name]){if(callback){var idx=this.hooks[name].indexOf(callback);if(idx>-1)this.hooks[name].splice(idx,1);}
else{this.hooks[name]=[];}}},dispatch:function(){var name=arguments[0].replace(/^on/i,'').toLowerCase();var args=Array.prototype.slice.call(arguments,1);if(this.hooks[name]&&this.hooks[name].length){for(var idx=0,len=this.hooks[name].length;idx<len;idx++){var hook=this.hooks[name][idx];if(typeof(hook)=='function'){hook.apply(this,args);}
else if((typeof(hook)=='object')&&(hook.length==2)){hook[0][hook[1]].apply(hook[0],args);}
else if(window[hook]){window[hook].apply(window,args);}}
return true;}
else if(name=='error'){if(args[0]instanceof FlashError){message=args[0].message;if(message==='Access to camera denied'){}}
else if(args[0]instanceof WebcamError){message=args[0].message;}else{message="Could not access webcam: "+args[0].name+": "+
args[0].message+" "+args[0].toString();}
console.log("Webcam.js Error: "+message);fotoShowNormalFileUploadInput();}
return false;},setSWFLocation:function(value){this.set('swfURL',value);},detectFlash:function(){var SHOCKWAVE_FLASH="Shockwave Flash",SHOCKWAVE_FLASH_AX="ShockwaveFlash.ShockwaveFlash",FLASH_MIME_TYPE="application/x-shockwave-flash",win=window,nav=navigator,hasFlash=false;if(typeof nav.plugins!=="undefined"&&typeof nav.plugins[SHOCKWAVE_FLASH]==="object"){var desc=nav.plugins[SHOCKWAVE_FLASH].description;if(desc&&(typeof nav.mimeTypes!=="undefined"&&nav.mimeTypes[FLASH_MIME_TYPE]&&nav.mimeTypes[FLASH_MIME_TYPE].enabledPlugin)){hasFlash=true;}}
else if(typeof win.ActiveXObject!=="undefined"){try{var ax=new ActiveXObject(SHOCKWAVE_FLASH_AX);if(ax){var ver=ax.GetVariable("$version");if(ver)hasFlash=true;}}
catch(e){;}}
return hasFlash;},getSWFHTML:function(){var html='',swfURL=this.params.swfURL;if(location.protocol.match(/file/)){this.dispatch('error',new FlashError("Flash does not work from local disk.  Please run from a web server."));fotoShowNormalFileUploadInput();}
if(!this.detectFlash()){this.dispatch('error',new FlashError("Adobe Flash Player not found.  Please install from get.adobe.com/flashplayer and try again."));fotoShowNormalFileUploadInput();}
if(!swfURL){var base_url='';var scpts=document.getElementsByTagName('script');for(var idx=0,len=scpts.length;idx<len;idx++){var src=scpts[idx].getAttribute('src');if(src&&src.match(/\/webcam(\.min)?\.js/)){base_url=src.replace(/\/webcam(\.min)?\.js.*$/,'');idx=len;}}
if(base_url)swfURL=base_url+'/webcam.swf';else swfURL='webcam.swf';}
if(window.localStorage&&!localStorage.getItem('visited')){this.params.new_user=1;localStorage.setItem('visited',1);}
var flashvars='';for(var key in this.params){if(flashvars)flashvars+='&';flashvars+=key+'='+escape(this.params[key]);}
html+='<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" type="application/x-shockwave-flash" codebase="'+this.protocol+'://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0" width="'+this.params.width+'" height="'+this.params.height+'" id="webcam_movie_obj" align="middle"><param name="wmode" value="opaque" /><param name="allowScriptAccess" value="always" /><param name="allowFullScreen" value="false" /><param name="movie" value="'+swfURL+'" /><param name="loop" value="false" /><param name="menu" value="false" /><param name="quality" value="best" /><param name="bgcolor" value="#ffffff" /><param name="flashvars" value="'+flashvars+'"/><embed id="webcam_movie_embed" src="'+swfURL+'" wmode="opaque" loop="false" menu="false" quality="best" bgcolor="#ffffff" width="'+this.params.width+'" height="'+this.params.height+'" name="webcam_movie_embed" align="middle" allowScriptAccess="always" allowFullScreen="false" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" flashvars="'+flashvars+'"></embed></object>';return html;},getMovie:function(){if(!this.loaded)return this.dispatch('error',new FlashError("Flash Movie is not loaded yet"));var movie=document.getElementById('webcam_movie_obj');if(!movie||!movie._snap)movie=document.getElementById('webcam_movie_embed');if(!movie)this.dispatch('error',new FlashError("Cannot locate Flash movie in DOM"));return movie;},freeze:function(){var self=this;var params=this.params;if(this.preview_active)this.unfreeze();var scaleX=this.params.width/this.params.dest_width;var scaleY=this.params.height/this.params.dest_height;this.unflip();var final_width=params.crop_width||params.dest_width;var final_height=params.crop_height||params.dest_height;var preview_canvas=document.createElement('canvas');preview_canvas.width=final_width;preview_canvas.height=final_height;var preview_context=preview_canvas.getContext('2d');this.preview_canvas=preview_canvas;this.preview_context=preview_context;if((scaleX!=1.0)||(scaleY!=1.0)){preview_canvas.style.webkitTransformOrigin='0px 0px';preview_canvas.style.mozTransformOrigin='0px 0px';preview_canvas.style.msTransformOrigin='0px 0px';preview_canvas.style.oTransformOrigin='0px 0px';preview_canvas.style.transformOrigin='0px 0px';preview_canvas.style.webkitTransform='scaleX('+scaleX+') scaleY('+scaleY+')';preview_canvas.style.mozTransform='scaleX('+scaleX+') scaleY('+scaleY+')';preview_canvas.style.msTransform='scaleX('+scaleX+') scaleY('+scaleY+')';preview_canvas.style.oTransform='scaleX('+scaleX+') scaleY('+scaleY+')';preview_canvas.style.transform='scaleX('+scaleX+') scaleY('+scaleY+')';}
this.snap(function(){preview_canvas.style.position='relative';preview_canvas.style.left=''+self.container.scrollLeft+'px';preview_canvas.style.top=''+self.container.scrollTop+'px';self.container.insertBefore(preview_canvas,self.peg);self.container.style.overflow='hidden';self.preview_active=true;},preview_canvas);},unfreeze:function(){if(this.preview_active){this.container.removeChild(this.preview_canvas);delete this.preview_context;delete this.preview_canvas;this.preview_active=false;this.flip();}},flip:function(){if(this.params.flip_horiz){var sty=this.container.style;sty.webkitTransform='scaleX(-1)';sty.mozTransform='scaleX(-1)';sty.msTransform='scaleX(-1)';sty.oTransform='scaleX(-1)';sty.transform='scaleX(-1)';sty.filter='FlipH';sty.msFilter='FlipH';}},unflip:function(){if(this.params.flip_horiz){var sty=this.container.style;sty.webkitTransform='scaleX(1)';sty.mozTransform='scaleX(1)';sty.msTransform='scaleX(1)';sty.oTransform='scaleX(1)';sty.transform='scaleX(1)';sty.filter='';sty.msFilter='';}},savePreview:function(user_callback,user_canvas){var params=this.params;var canvas=this.preview_canvas;var context=this.preview_context;if(user_canvas){var user_context=user_canvas.getContext('2d');user_context.drawImage(canvas,0,0);}
user_callback(user_canvas?null:canvas.toDataURL('image/'+params.image_format,params.jpeg_quality/100),canvas,context);if(this.params.unfreeze_snap)this.unfreeze();},snap:function(user_callback,user_canvas){var self=this;var params=this.params;if(!this.loaded)return this.dispatch('error',new WebcamError("Webcam is not loaded yet"));if(!user_callback)return this.dispatch('error',new WebcamError("Please provide a callback function or canvas to snap()"));if(this.preview_active){this.savePreview(user_callback,user_canvas);return null;}
var canvas=document.createElement('canvas');canvas.width=this.params.dest_width;canvas.height=this.params.dest_height;var context=canvas.getContext('2d');if(this.params.flip_horiz){context.translate(params.dest_width,0);context.scale(-1,1);}
var func=function(){if(this.src&&this.width&&this.height){context.drawImage(this,0,0,params.dest_width,params.dest_height);}
if(params.crop_width&&params.crop_height){var crop_canvas=document.createElement('canvas');crop_canvas.width=params.crop_width;crop_canvas.height=params.crop_height;var crop_context=crop_canvas.getContext('2d');crop_context.drawImage(canvas,Math.floor((params.dest_width/2)-(params.crop_width/2)),Math.floor((params.dest_height/2)-(params.crop_height/2)),params.crop_width,params.crop_height,0,0,params.crop_width,params.crop_height);context=crop_context;canvas=crop_canvas;}
if(user_canvas){var user_context=user_canvas.getContext('2d');user_context.drawImage(canvas,0,0);}
user_callback(user_canvas?null:canvas.toDataURL('image/'+params.image_format,params.jpeg_quality/100),canvas,context);};if(this.userMedia){context.drawImage(this.video,0,0,this.params.dest_width,this.params.dest_height);func();}
else{var raw_data=this.getMovie()._snap();var img=new Image();img.onload=func;img.src='data:image/'+this.params.image_format+';base64,'+raw_data;}
return null;},configure:function(panel){if(!panel)panel="camera";this.getMovie()._configure(panel);},flashNotify:function(type,msg){switch(type){case'flashLoadComplete':this.loaded=true;this.dispatch('load');break;case'cameraLive':this.live=true;this.dispatch('live');break;case'error':this.dispatch('error',new FlashError(msg));break;default:console.log("webcam flash_notify: "+type+": "+msg);break;}},b64ToUint6:function(nChr){return nChr>64&&nChr<91?nChr-65:nChr>96&&nChr<123?nChr-71:nChr>47&&nChr<58?nChr+4:nChr===43?62:nChr===47?63:0;},base64DecToArr:function(sBase64,nBlocksSize){var sB64Enc=sBase64.replace(/[^A-Za-z0-9\+\/]/g,""),nInLen=sB64Enc.length,nOutLen=nBlocksSize?Math.ceil((nInLen*3+1>>2)/nBlocksSize)*nBlocksSize:nInLen*3+1>>2,taBytes=new Uint8Array(nOutLen);for(var nMod3,nMod4,nUint24=0,nOutIdx=0,nInIdx=0;nInIdx<nInLen;nInIdx++){nMod4=nInIdx&3;nUint24|=this.b64ToUint6(sB64Enc.charCodeAt(nInIdx))<<18-6*nMod4;if(nMod4===3||nInLen-nInIdx===1){for(nMod3=0;nMod3<3&&nOutIdx<nOutLen;nMod3++,nOutIdx++){taBytes[nOutIdx]=nUint24>>>(16>>>nMod3&24)&255;}
nUint24=0;}}
return taBytes;},upload:function(image_data_uri,target_url,callback){var form_elem_name=this.params.upload_name||'webcam';var image_fmt='';if(image_data_uri.match(/^data\:image\/(\w+)/))
image_fmt=RegExp.$1;else
throw"Cannot locate image format in Data URI";var raw_image_data=image_data_uri.replace(/^data\:image\/\w+\;base64\,/,'');var http=new XMLHttpRequest();http.open("POST",target_url,true);if(http.upload&&http.upload.addEventListener){http.upload.addEventListener('progress',function(e){if(e.lengthComputable){var progress=e.loaded/e.total;Webcam.dispatch('uploadProgress',progress,e);}},false);}
var self=this;http.onload=function(){if(callback)callback.apply(self,[http.status,http.responseText,http.statusText]);Webcam.dispatch('uploadComplete',http.status,http.responseText,http.statusText);};var blob=new Blob([this.base64DecToArr(raw_image_data)],{type:'image/'+image_fmt});var form=new FormData();form.append(form_elem_name,blob,form_elem_name+"."+image_fmt.replace(/e/,''));http.send(form);}};Webcam.init();if(typeof define==='function'&&define.amd){define(function(){return Webcam;});}
else if(typeof module==='object'&&module.exports){module.exports=Webcam;}
else{window.Webcam=Webcam;}}(window));function fotoShowNormalFileUploadInput(){$('.upload_foto_file').css('display','');$('.fotoparent').css('display','none');};var vse_kamere_ids=[];function FotoDeclaration(inpid,site_url){vse_kamere_ids.push(inpid);navigator.getMedia=(navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia);Webcam.set({width:320,height:240,image_format:'jpeg',jpeg_quality:90,swfURL:site_url+'main/survey/js/Fotografiranje/webcam.swf'});Webcam.attach(inpid);}
function take_snapshot(inpid){Webcam.snap(function(data_uri){$('#fotoresults_'+inpid).html('<img src="'+data_uri+'"/>');var raw_image_data=data_uri.replace(/^data\:image\/\w+\;base64\,/,'');$('#foto_'+inpid).val(raw_image_data);$('#fotoresults_delete_'+inpid).show();});}
function delete_snapshot(inpid){$('#fotoresults_'+inpid).html('<p>'+lang['srv_resevanje_foto_pre_result']+'</p>');$('#foto_'+inpid).val('');$('#fotoresults_delete_'+inpid).hide();}
function delete_upload_foto(inpid){$('#'+inpid).val(null);$('#upload_foto_result_'+inpid).css("display","none");$('#upload_foto_result_'+inpid).attr('src',"#");$('#upload_fotoresults_delete_'+inpid).hide();};((function(){var a;a=function(){function a(){this.options_index=0,this.parsed=[]}return a.prototype.add_node=function(a){return a.nodeName==="OPTGROUP"?this.add_group(a):this.add_option(a)},a.prototype.add_group=function(a){var b,c,d,e,f,g;b=this.parsed.length,this.parsed.push({array_index:b,group:!0,label:a.label,children:0,disabled:a.disabled}),f=a.childNodes,g=[];for(d=0,e=f.length;d<e;d++)c=f[d],g.push(this.add_option(c,b,a.disabled));return g},a.prototype.add_option=function(a,b,c){if(a.nodeName==="OPTION")return a.text!==""?(b!=null&&(this.parsed[b].children+=1),this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,value:a.value,text:a.text,html:a.innerHTML,selected:a.selected,disabled:c===!0?c:a.disabled,group_array_index:b,classes:a.className,style:a.style.cssText})):this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,empty:!0}),this.options_index+=1},a}(),a.select_to_array=function(b){var c,d,e,f,g;d=new a,g=b.childNodes;for(e=0,f=g.length;e<f;e++)c=g[e],d.add_node(c);return d.parsed},this.SelectParser=a})).call(this),function(){var a,b;b=this,a=function(){function a(a,b){this.form_field=a,this.options=b!=null?b:{},this.set_default_values(),this.is_multiple=this.form_field.multiple,this.set_default_text(),this.setup(),this.set_up_html(),this.register_observers(),this.finish_setup()}return a.prototype.set_default_values=function(){var a=this;return this.click_test_action=function(b){return a.test_active_click(b)},this.activate_action=function(b){return a.activate_field(b)},this.active_field=!1,this.mouse_on_container=!1,this.results_showing=!1,this.result_highlighted=null,this.result_single_selected=null,this.allow_single_deselect=this.options.allow_single_deselect!=null&&this.form_field.options[0]!=null&&this.form_field.options[0].text===""?this.options.allow_single_deselect:!1,this.disable_search_threshold=this.options.disable_search_threshold||0,this.search_contains=this.options.search_contains||!1,this.choices=0,this.single_backstroke_delete=this.options.single_backstroke_delete||!1,this.max_selected_options=this.options.max_selected_options||Infinity},a.prototype.set_default_text=function(){return this.form_field.getAttribute("data-placeholder")?this.default_text=this.form_field.getAttribute("data-placeholder"):this.is_multiple?this.default_text=this.options.placeholder_text_multiple||this.options.placeholder_text||"Select Some Options":this.default_text=this.options.placeholder_text_single||this.options.placeholder_text||"",this.results_none_found=this.form_field.getAttribute("data-no_results_text")||this.options.no_results_text||"No results match"},a.prototype.mouse_enter=function(){return this.mouse_on_container=!0},a.prototype.mouse_leave=function(){return this.mouse_on_container=!1},a.prototype.input_focus=function(a){var b=this;if(!this.active_field)return setTimeout(function(){return b.container_mousedown()},50)},a.prototype.input_blur=function(a){var b=this;if(!this.mouse_on_container)return this.active_field=!1,setTimeout(function(){return b.blur_test()},100)},a.prototype.result_add_option=function(a){var b,c;return a.disabled?"":(a.dom_id=this.container_id+"_o_"+a.array_index,b=a.selected&&this.is_multiple?[]:["active-result"],a.selected&&b.push("result-selected"),a.group_array_index!=null&&b.push("group-option"),a.classes!==""&&b.push(a.classes),c=a.style.cssText!==""?' style="'+a.style+'"':"",'<li id="'+a.dom_id+'" class="'+b.join(" ")+'"'+c+">"+a.html+"</li>")},a.prototype.results_update_field=function(){return this.is_multiple||this.results_reset_cleanup(),this.result_clear_highlight(),this.result_single_selected=null,this.results_build()},a.prototype.results_toggle=function(){return this.results_showing?this.results_hide():this.results_show()},a.prototype.results_search=function(a){return this.results_showing?this.winnow_results():this.results_show()},a.prototype.keyup_checker=function(a){var b,c;b=(c=a.which)!=null?c:a.keyCode,this.search_field_scale();switch(b){case 8:if(this.is_multiple&&this.backstroke_length<1&&this.choices>0)return this.keydown_backstroke();if(!this.pending_backstroke)return this.result_clear_highlight(),this.results_search();break;case 13:a.preventDefault();if(this.results_showing)return this.result_select(a);break;case 27:return this.results_showing&&this.results_hide(),!0;case 9:case 38:case 40:case 16:case 91:case 17:break;default:return this.results_search()}},a.prototype.generate_field_id=function(){var a;return a=this.generate_random_id(),this.form_field.id=a,a},a.prototype.generate_random_char=function(){var a,b,c;return a="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ",c=Math.floor(Math.random()*a.length),b=a.substring(c,c+1)},a}(),b.AbstractChosen=a}.call(this),function(){var a,b,c,d,e=Object.prototype.hasOwnProperty,f=function(a,b){function d(){this.constructor=a}for(var c in b)e.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};d=this,a=jQuery,a.fn.extend({chosen:function(c){return!a.browser.msie||a.browser.version!=="6.0"&&a.browser.version!=="7.0"?this.each(function(d){var e;e=a(this);if(!e.hasClass("chzn-done"))return e.data("chosen",new b(this,c))}):this}}),b=function(b){function e(){e.__super__.constructor.apply(this,arguments)}return f(e,b),e.prototype.setup=function(){return this.form_field_jq=a(this.form_field),this.current_value=this.form_field_jq.val(),this.is_rtl=this.form_field_jq.hasClass("chzn-rtl")},e.prototype.finish_setup=function(){return this.form_field_jq.addClass("chzn-done")},e.prototype.set_up_html=function(){var b,d,e,f;return this.container_id=this.form_field.id.length?this.form_field.id.replace(/[^\w]/g,"_"):this.generate_field_id(),this.container_id+="_chzn",this.f_width=this.form_field_jq.outerWidth()+20,b=a("<div />",{id:this.container_id,"class":"chzn-container"+(this.is_rtl?" chzn-rtl":""),style:"width: "+this.f_width+"px;"}),this.is_multiple?b.html('<ul class="chzn-choices"><li class="search-field"><input type="text" value="'+this.default_text+'" class="default" autocomplete="off" style="width:25px;" /></li></ul><div class="chzn-drop" style="left:-9000px;"><ul class="chzn-results"></ul></div>'):b.html('<a href="javascript:void(0)" class="chzn-single chzn-default"><span>'+this.default_text+'</span><div><b></b></div></a><div class="chzn-drop" style="left:-9000px;"><div class="chzn-search"><input type="text" autocomplete="off" /></div><ul class="chzn-results"></ul></div>'),this.form_field_jq.hide().after(b),this.container=a("#"+this.container_id),this.container.addClass("chzn-container-"+(this.is_multiple?"multi":"single")),this.dropdown=this.container.find("div.chzn-drop").first(),d=this.container.height(),e=this.f_width-c(this.dropdown),this.dropdown.css({width:e+"px",top:d+"px"}),this.search_field=this.container.find("input").first(),this.search_results=this.container.find("ul.chzn-results").first(),this.search_field_scale(),this.search_no_results=this.container.find("li.no-results").first(),this.is_multiple?(this.search_choices=this.container.find("ul.chzn-choices").first(),this.search_container=this.container.find("li.search-field").first()):(this.search_container=this.container.find("div.chzn-search").first(),this.selected_item=this.container.find(".chzn-single").first(),f=e-c(this.search_container)-c(this.search_field),this.search_field.css({width:f+"px"})),this.results_build(),this.set_tab_index(),this.form_field_jq.trigger("liszt:ready",{chosen:this})},e.prototype.register_observers=function(){var a=this;return this.container.mousedown(function(b){return a.container_mousedown(b)}),this.container.mouseup(function(b){return a.container_mouseup(b)}),this.container.mouseenter(function(b){return a.mouse_enter(b)}),this.container.mouseleave(function(b){return a.mouse_leave(b)}),this.search_results.mouseup(function(b){return a.search_results_mouseup(b)}),this.search_results.mouseover(function(b){return a.search_results_mouseover(b)}),this.search_results.mouseout(function(b){return a.search_results_mouseout(b)}),this.form_field_jq.bind("liszt:updated",function(b){return a.results_update_field(b)}),this.search_field.blur(function(b){return a.input_blur(b)}),this.search_field.keyup(function(b){return a.keyup_checker(b)}),this.search_field.keydown(function(b){return a.keydown_checker(b)}),this.is_multiple?(this.search_choices.click(function(b){return a.choices_click(b)}),this.search_field.focus(function(b){return a.input_focus(b)})):this.container.click(function(a){return a.preventDefault()})},e.prototype.search_field_disabled=function(){this.is_disabled=this.form_field_jq[0].disabled;if(this.is_disabled)return this.container.addClass("chzn-disabled"),this.search_field[0].disabled=!0,this.is_multiple||this.selected_item.unbind("focus",this.activate_action),this.close_field();this.container.removeClass("chzn-disabled"),this.search_field[0].disabled=!1;if(!this.is_multiple)return this.selected_item.bind("focus",this.activate_action)},e.prototype.container_mousedown=function(b){var c;if(!this.is_disabled)return c=b!=null?a(b.target).hasClass("search-choice-close"):!1,b&&b.type==="mousedown"&&!this.results_showing&&b.stopPropagation(),!this.pending_destroy_click&&!c?(this.active_field?!this.is_multiple&&b&&(a(b.target)[0]===this.selected_item[0]||a(b.target).parents("a.chzn-single").length)&&(b.preventDefault(),this.results_toggle()):(this.is_multiple&&this.search_field.val(""),a(document).click(this.click_test_action),this.results_show()),this.activate_field()):this.pending_destroy_click=!1},e.prototype.container_mouseup=function(a){if(a.target.nodeName==="ABBR"&&!this.is_disabled)return this.results_reset(a)},e.prototype.blur_test=function(a){if(!this.active_field&&this.container.hasClass("chzn-container-active"))return this.close_field()},e.prototype.close_field=function(){return a(document).unbind("click",this.click_test_action),this.is_multiple||(this.selected_item.attr("tabindex",this.search_field.attr("tabindex")),this.search_field.attr("tabindex",-1)),this.active_field=!1,this.results_hide(),this.container.removeClass("chzn-container-active"),this.winnow_results_clear(),this.clear_backstroke(),this.show_search_field_default(),this.search_field_scale()},e.prototype.activate_field=function(){return!this.is_multiple&&!this.active_field&&(this.search_field.attr("tabindex",this.selected_item.attr("tabindex")),this.selected_item.attr("tabindex",-1)),this.container.addClass("chzn-container-active"),this.active_field=!0,this.search_field.val(this.search_field.val()),this.search_field.focus()},e.prototype.test_active_click=function(b){return a(b.target).parents("#"+this.container_id).length?this.active_field=!0:this.close_field()},e.prototype.results_build=function(){var a,b,c,e,f;this.parsing=!0,this.results_data=d.SelectParser.select_to_array(this.form_field),this.is_multiple&&this.choices>0?(this.search_choices.find("li.search-choice").remove(),this.choices=0):this.is_multiple||(this.selected_item.addClass("chzn-default").find("span").text(this.default_text),this.form_field.options.length<=this.disable_search_threshold?this.container.addClass("chzn-container-single-nosearch"):this.container.removeClass("chzn-container-single-nosearch")),a="",f=this.results_data;for(c=0,e=f.length;c<e;c++)b=f[c],b.group?a+=this.result_add_group(b):b.empty||(a+=this.result_add_option(b),b.selected&&this.is_multiple?this.choice_build(b):b.selected&&!this.is_multiple&&(this.selected_item.removeClass("chzn-default").find("span").text(b.text),this.allow_single_deselect&&this.single_deselect_control_build()));return this.search_field_disabled(),this.show_search_field_default(),this.search_field_scale(),this.search_results.html(a),this.parsing=!1},e.prototype.result_add_group=function(b){return b.disabled?"":(b.dom_id=this.container_id+"_g_"+b.array_index,'<li id="'+b.dom_id+'" class="group-result">'+a("<div />").text(b.label).html()+"</li>")},e.prototype.result_do_highlight=function(a){var b,c,d,e,f;if(a.length){this.result_clear_highlight(),this.result_highlight=a,this.result_highlight.addClass("highlighted"),d=parseInt(this.search_results.css("maxHeight"),10),f=this.search_results.scrollTop(),e=d+f,c=this.result_highlight.position().top+this.search_results.scrollTop(),b=c+this.result_highlight.outerHeight();if(b>=e)return this.search_results.scrollTop(b-d>0?b-d:0);if(c<f)return this.search_results.scrollTop(c)}},e.prototype.result_clear_highlight=function(){return this.result_highlight&&this.result_highlight.removeClass("highlighted"),this.result_highlight=null},e.prototype.results_show=function(){var a;if(!this.is_multiple)this.selected_item.addClass("chzn-single-with-drop"),this.result_single_selected&&this.result_do_highlight(this.result_single_selected);else if(this.max_selected_options<=this.choices)return this.form_field_jq.trigger("liszt:maxselected",{chosen:this}),!1;return a=this.is_multiple?this.container.height():this.container.height()-1,this.form_field_jq.trigger("liszt:showing_dropdown",{chosen:this}),this.dropdown.css({top:a+"px",left:0}),this.results_showing=!0,this.search_field.focus(),this.search_field.val(this.search_field.val()),this.winnow_results()},e.prototype.results_hide=function(){return this.is_multiple||this.selected_item.removeClass("chzn-single-with-drop"),this.result_clear_highlight(),this.form_field_jq.trigger("liszt:hiding_dropdown",{chosen:this}),this.dropdown.css({left:"-9000px"}),this.results_showing=!1},e.prototype.set_tab_index=function(a){var b;if(this.form_field_jq.attr("tabindex"))return b=this.form_field_jq.attr("tabindex"),this.form_field_jq.attr("tabindex",-1),this.is_multiple?this.search_field.attr("tabindex",b):(this.selected_item.attr("tabindex",b),this.search_field.attr("tabindex",-1))},e.prototype.show_search_field_default=function(){return this.is_multiple&&this.choices<1&&!this.active_field?(this.search_field.val(this.default_text),this.search_field.addClass("default")):(this.search_field.val(""),this.search_field.removeClass("default"))},e.prototype.search_results_mouseup=function(b){var c;c=a(b.target).hasClass("active-result")?a(b.target):a(b.target).parents(".active-result").first();if(c.length)return this.result_highlight=c,this.result_select(b)},e.prototype.search_results_mouseover=function(b){var c;c=a(b.target).hasClass("active-result")?a(b.target):a(b.target).parents(".active-result").first();if(c)return this.result_do_highlight(c)},e.prototype.search_results_mouseout=function(b){if(a(b.target).hasClass("active-result"))return this.result_clear_highlight()},e.prototype.choices_click=function(b){b.preventDefault();if(this.active_field&&!a(b.target).hasClass("search-choice")&&!this.results_showing)return this.results_show()},e.prototype.choice_build=function(b){var c,d,e=this;return this.is_multiple&&this.max_selected_options<=this.choices?(this.form_field_jq.trigger("liszt:maxselected",{chosen:this}),!1):(c=this.container_id+"_c_"+b.array_index,this.choices+=1,this.search_container.before('<li class="search-choice" id="'+c+'"><span>'+b.html+'</span><a href="javascript:void(0)" class="search-choice-close" rel="'+b.array_index+'"></a></li>'),d=a("#"+c).find("a").first(),d.click(function(a){return e.choice_destroy_link_click(a)}))},e.prototype.choice_destroy_link_click=function(b){return b.preventDefault(),this.is_disabled?b.stopPropagation:(this.pending_destroy_click=!0,this.choice_destroy(a(b.target)))},e.prototype.choice_destroy=function(a){return this.choices-=1,this.show_search_field_default(),this.is_multiple&&this.choices>0&&this.search_field.val().length<1&&this.results_hide(),this.result_deselect(a.attr("rel")),a.parents("li").first().remove()},e.prototype.results_reset=function(){this.form_field.options[0].selected=!0,this.selected_item.find("span").text(this.default_text),this.is_multiple||this.selected_item.addClass("chzn-default"),this.show_search_field_default(),this.results_reset_cleanup(),this.form_field_jq.trigger("change");if(this.active_field)return this.results_hide()},e.prototype.results_reset_cleanup=function(){return this.selected_item.find("abbr").remove()},e.prototype.result_select=function(a){var b,c,d,e;if(this.result_highlight)return b=this.result_highlight,c=b.attr("id"),this.result_clear_highlight(),this.is_multiple?this.result_deactivate(b):(this.search_results.find(".result-selected").removeClass("result-selected"),this.result_single_selected=b,this.selected_item.removeClass("chzn-default")),b.addClass("result-selected"),e=c.substr(c.lastIndexOf("_")+1),d=this.results_data[e],d.selected=!0,this.form_field.options[d.options_index].selected=!0,this.is_multiple?this.choice_build(d):(this.selected_item.find("span").first().text(d.text),this.allow_single_deselect&&this.single_deselect_control_build()),(!a.metaKey||!this.is_multiple)&&this.results_hide(),this.search_field.val(""),(this.is_multiple||this.form_field_jq.val()!==this.current_value)&&this.form_field_jq.trigger("change",{selected:this.form_field.options[d.options_index].value}),this.current_value=this.form_field_jq.val(),this.search_field_scale()},e.prototype.result_activate=function(a){return a.addClass("active-result")},e.prototype.result_deactivate=function(a){return a.removeClass("active-result")},e.prototype.result_deselect=function(b){var c,d;return d=this.results_data[b],d.selected=!1,this.form_field.options[d.options_index].selected=!1,c=a("#"+this.container_id+"_o_"+b),c.removeClass("result-selected").addClass("active-result").show(),this.result_clear_highlight(),this.winnow_results(),this.form_field_jq.trigger("change",{deselected:this.form_field.options[d.options_index].value}),this.search_field_scale()},e.prototype.single_deselect_control_build=function(){if(this.allow_single_deselect&&this.selected_item.find("abbr").length<1)return this.selected_item.find("span").first().after('<abbr class="search-choice-close"></abbr>')},e.prototype.winnow_results=function(){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s;this.no_results_clear(),j=0,k=this.search_field.val()===this.default_text?"":a("<div/>").text(a.trim(this.search_field.val())).html(),g=this.search_contains?"":"^",f=new RegExp(g+k.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"i"),n=new RegExp(k.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"i"),s=this.results_data;for(o=0,q=s.length;o<q;o++){c=s[o];if(!c.disabled&&!c.empty)if(c.group)a("#"+c.dom_id).css("display","none");else if(!this.is_multiple||!c.selected){b=!1,i=c.dom_id,h=a("#"+i);if(f.test(c.html))b=!0,j+=1;else if(c.html.indexOf(" ")>=0||c.html.indexOf("[")===0){e=c.html.replace(/\[|\]/g,"").split(" ");if(e.length)for(p=0,r=e.length;p<r;p++)d=e[p],f.test(d)&&(b=!0,j+=1)}b?(k.length?(l=c.html.search(n),m=c.html.substr(0,l+k.length)+"</em>"+c.html.substr(l+k.length),m=m.substr(0,l)+"<em>"+m.substr(l)):m=c.html,h.html(m),this.result_activate(h),c.group_array_index!=null&&a("#"+this.results_data[c.group_array_index].dom_id).css("display","list-item")):(this.result_highlight&&i===this.result_highlight.attr("id")&&this.result_clear_highlight(),this.result_deactivate(h))}}return j<1&&k.length?this.no_results(k):this.winnow_results_set_highlight()},e.prototype.winnow_results_clear=function(){var b,c,d,e,f;this.search_field.val(""),c=this.search_results.find("li"),f=[];for(d=0,e=c.length;d<e;d++)b=c[d],b=a(b),b.hasClass("group-result")?f.push(b.css("display","auto")):!this.is_multiple||!b.hasClass("result-selected")?f.push(this.result_activate(b)):f.push(void 0);return f},e.prototype.winnow_results_set_highlight=function(){var a,b;if(!this.result_highlight){b=this.is_multiple?[]:this.search_results.find(".result-selected.active-result"),a=b.length?b.first():this.search_results.find(".active-result").first();if(a!=null)return this.result_do_highlight(a)}},e.prototype.no_results=function(b){var c;return c=a('<li class="no-results">'+this.results_none_found+' "<span></span>"</li>'),c.find("span").first().html(b),this.search_results.append(c)},e.prototype.no_results_clear=function(){return this.search_results.find(".no-results").remove()},e.prototype.keydown_arrow=function(){var b,c;this.result_highlight?this.results_showing&&(c=this.result_highlight.nextAll("li.active-result").first(),c&&this.result_do_highlight(c)):(b=this.search_results.find("li.active-result").first(),b&&this.result_do_highlight(a(b)));if(!this.results_showing)return this.results_show()},e.prototype.keyup_arrow=function(){var a;if(!this.results_showing&&!this.is_multiple)return this.results_show();if(this.result_highlight)return a=this.result_highlight.prevAll("li.active-result"),a.length?this.result_do_highlight(a.first()):(this.choices>0&&this.results_hide(),this.result_clear_highlight())},e.prototype.keydown_backstroke=function(){return this.pending_backstroke?(this.choice_destroy(this.pending_backstroke.find("a").first()),this.clear_backstroke()):(this.pending_backstroke=this.search_container.siblings("li.search-choice").last(),this.single_backstroke_delete?this.keydown_backstroke():this.pending_backstroke.addClass("search-choice-focus"))},e.prototype.clear_backstroke=function(){return this.pending_backstroke&&this.pending_backstroke.removeClass("search-choice-focus"),this.pending_backstroke=null},e.prototype.keydown_checker=function(a){var b,c;b=(c=a.which)!=null?c:a.keyCode,this.search_field_scale(),b!==8&&this.pending_backstroke&&this.clear_backstroke();switch(b){case 8:this.backstroke_length=this.search_field.val().length;break;case 9:this.results_showing&&!this.is_multiple&&this.result_select(a),this.mouse_on_container=!1;break;case 13:a.preventDefault();break;case 38:a.preventDefault(),this.keyup_arrow();break;case 40:this.keydown_arrow()}},e.prototype.search_field_scale=function(){var b,c,d,e,f,g,h,i,j;if(this.is_multiple){d=0,h=0,f="position:absolute; left: -1000px; top: -1000px; display:none;",g=["font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing"];for(i=0,j=g.length;i<j;i++)e=g[i],f+=e+":"+this.search_field.css(e)+";";return c=a("<div />",{style:f}),c.text(this.search_field.val()),a("body").append(c),h=c.width()+25,c.remove(),h>this.f_width-10&&(h=this.f_width-10),this.search_field.css({width:h+"px"}),b=this.container.height(),this.dropdown.css({top:b+"px"})}},e.prototype.generate_random_id=function(){var b;b="sel"+this.generate_random_char()+this.generate_random_char()+this.generate_random_char();while(a("#"+b).length>0)b+=this.generate_random_char();return b},e}(AbstractChosen),c=function(a){var b;return b=a.outerWidth()-a.width()},d.get_side_border_padding=c}.call(this);;function means_init(){}
function posodobil_filter_analiz(){var filter_vrednosti={};$('.filter-analize').each(function(){if($(this).val())
filter_vrednosti[$(this).attr('name')]=$(this).val();});if(jQuery.isEmptyObject(filter_vrednosti))
filter_vrednosti=0;$.post("ajax.php?t=hierarhy-means&a=change",{anketa:srv_meta_anketa_id,filter_vrednosti:filter_vrednosti,},function(){change_hierarhy_means();});}
function posodobiPrikazHierarhije(vrsta){var vrsta=vrsta||'filtri';if(vrsta=='ucitelji'){$('#ucitelji').show();$('.filtri-ucitelji').show();$('.hierarhija-filtri-levi').hide();$('#filter-po-ucitelju').chosen();}
if(vrsta=='filtri'){$('#ucitelji').hide();$('.filtri-ucitelji').hide();$('#predmeti-in-ucitelji').hide();$('#hierarhija-specificni-ucitelj h2').html('').hide();$('.hierarhija-filtri-levi').show();}
$.post("ajax.php?t=hierarhy-means&a=pobrisi-filter",{anketa:srv_meta_anketa_id,vrsta:vrsta},function(){setTimeout(function(){change_hierarhy_means();},200)});}
function posodobiPrikazFiltraPoUciteljih(vrednost){var vrednost=vrednost||'agregirano';if(vrednost=='predmeti'){$('#ucitelji').hide();$('#predmeti-in-ucitelji').show();$('#hierarhija-specificni-ucitelj h2').html('').show();$('#filter-po-ucitelju-in-predmetu').chosen();}else{$('#predmeti-in-ucitelji').hide();$('#ucitelji').show();$('#hierarhija-specificni-ucitelj h2').html('').hide();$('#filter-po-ucitelju').chosen();}
$.post("ajax.php?t=hierarhy-means&a=posodobi-seznam-za-ucitelje",{anketa:srv_meta_anketa_id,vrsta:vrednost},function(){setTimeout(function(){change_hierarhy_means();},200)});}
function tooglePrikazVprasanja(prikazi){var prikazi=prikazi||0;if(prikazi==1){$('#meansRightDropdowns').animate('slow').show();$('.prikazi').hide();$('.skrij').show();}else{$('#meansRightDropdowns').animate('slow').hide();$('.skrij').hide();$('.prikazi').show();}}
function posodobi_izbranega_ucitelja(){var id=$('#filter-po-ucitelju').val();$.post("ajax.php?t=hierarhy-means&a=posodobi-ucitelja",{anketa:srv_meta_anketa_id,user_id:id},function(response){change_hierarhy_means();});}
function posodobi_izbran_predmet(){var id=$('#filter-po-ucitelju-in-predmetu').val();$.post("ajax.php?t=hierarhy-means&a=posodobi-izbran-predmet",{anketa:srv_meta_anketa_id,strukutra_id:id},function(response){$('#hierarhija-specificni-ucitelj h2').html(response);change_hierarhy_means();});}
function change_hierarhy_means(action){$("#div_means_dropdowns").fadeTo(100,0.2);$("#div_means_data").fadeTo(100,0.2);var sequence1=new Array();var spr1=new Array();var grid1=new Array();var sequence2=new Array();var spr2=new Array();var grid2=new Array();var filter_vrednosti={};$('.filter-analize').each(function(){if($(this).val())
filter_vrednosti[$(this).attr('name')]=$(this).val();});if(action=='rotate'){$('select[name=means_variable_2]').each(function(index,el){sequence1.push($(el).val());});$('select[name=means_variable_1]').each(function(index,el){sequence2.push($(el).val());});$('select[name=means_variable_2] option:selected').each(function(index,el){spr1.push($(el).attr("spr_id"));grid1.push($(el).attr("grd_id"));});$('select[name=means_variable_1] option:selected').each(function(index,el){spr2.push($(el).attr("spr_id"));grid2.push($(el).attr("grd_id"));});}else{$('select[name=means_variable_1]').each(function(index,el){sequence1.push($(el).val());});$('select[name=means_variable_2]').each(function(index,el){sequence2.push($(el).val());});$('select[name=means_variable_1] option:selected').each(function(index,el){spr1.push($(el).attr("spr_id"));grid1.push($(el).attr("grd_id"));});$('select[name=means_variable_2] option:selected').each(function(index,el){spr2.push($(el).attr("spr_id"));grid2.push($(el).attr("grd_id"));});}
var strukturaId=$('#id-strukture').val()||null;$("#div_means_dropdowns").load("ajax.php?t=hierarhy-means&a=changeDropdown",{anketa:srv_meta_anketa_id,sequence1:sequence1,sequence2:sequence2,spr1:spr1,spr2:spr2,grid1:grid1,grid2:grid2,strukturaId:strukturaId},function(){if(spr1&&spr2){$("#div_means_data").load("ajax.php?t=hierarhy-means&a=change",{anketa:srv_meta_anketa_id,sequence1:sequence1,sequence2:sequence2,spr1:spr1,spr2:spr2,grid1:grid1,grid2:grid2,strukturaId:strukturaId},function(){$("#div_means_dropdowns").fadeTo(100,1);$("#div_means_data").fadeTo(100,1);});}});}
function hierarhy_means_add_new_variable(which){var sequence=new Array();var spr=new Array();var grid=new Array();if(which=='2'){}else{}
$('select[name=means_variable_'+which+']').each(function(index,el){sequence.push($(el).val());});$('select[name=means_variable_'+which+'] option:selected').each(function(index,el){spr.push($(el).attr("spr_id"));grid.push($(el).attr("grd_id"));});$.post("ajax.php?t=hierarhy-means&a=add_new_variable",{anketa:srv_meta_anketa_id,which:which,sequence:sequence,spr:spr,grid:grid},function(response){if(which=='2'){$(response).appendTo('#meansRightDropdowns');}else{$(response).appendTo('#meansLeftDropdowns');}});}
function hierarhy_means_remove_variable(what){$(what).parent().remove();if($(what).parent().find('select').val()>0){change_hierarhy_means();}}
function changeHierarhyMeansSubSetting(){var chkMeansSeperate=$("#chkMeansSeperate").is(':checked')?1:0;var chkMeansJoinPercentage=$("#chkMeansJoinPercentage").is(':checked')?1:0;if(chkMeansSeperate==1){$("#spanMeansJoinPercentage").removeClass('displayNone');}else{$("#spanMeansJoinPercentage").removeClass('displayNone');}
$.post("ajax.php?t=hierarhy-means&a=changeMeansSubSetting",{anketa:srv_meta_anketa_id,chkMeansSeperate:chkMeansSeperate,chkMeansJoinPercentage:chkMeansJoinPercentage},function(response){change_hierarhy_means();});}
function doArchiveMeans(){if($("#div_means_data").html().length>0){$("#fullscreen").load('ajax.php?a=doArchiveAnaliza',{anketa:srv_meta_anketa_id,podstran:srv_meta_podstran},function(){$('#fade').fadeTo('slow',1);$('#fullscreen').show();});}else{genericAlertPopup('alert_no_archive_tables');}}
function submitArchiveMeans(){if($("#div_means_data").html().length>0){var content=$("#div_means_data").html();var name=$("#newAnalysisArchiveName").val();var note=$("#newAnalysisArchiveNote").val();var access=$("[name=newAnalysisArchiveAccess]:checked").val();var duration=$("#newAnalysisArchiveDuration").val();var durationType=$("[name=newAADurationType]:checked").val();$("#fullscreen").load('ajax.php?a=submitArchiveAnaliza',{anketa:srv_meta_anketa_id,podstran:srv_meta_podstran,name:name,note:note,access:access,duration:duration,durationType:durationType,content:content},function(){$("#fullscreen").show();});}else{genericAlertPopup('alert_no_archive_tables');}}
function createArchiveMeansBeforeEmail(){if($("#div_means_data").html().length>0){var content=$("#div_means_data").html();$.post('ajax.php?a=createArchiveBeforeEmail',{anketa:srv_meta_anketa_id,podstran:srv_meta_podstran,content:content},function(response){if(parseInt(response)>0){var aid=parseInt(response);$("#fullscreen").load('ajax.php?a=emailArchiveAnaliza',{anketa:srv_meta_anketa_id,podstran:srv_meta_podstran,aid:aid},function(){$('#fullscreen').show();});}else{if(parseInt(response)==-1){genericAlertPopup('alert_no_archive_response',response);}else{genericAlertPopup('alert_archive_error_response',response);}
$('#fullscreen').hide();$('#fade').fadeOut('slow');}});}else{genericAlertPopup('alert_no_archive_tables');}};;var maza_default_radius=50;var maza_start_day_repeater=-1;var maza_end_day_repeater=1;var geofencing_on=false;function maza_on_off(){$.post('ajax.php?t=MAZA&a=maza_on_off',{on_off:$('#advanced_module_maza').is(':checked'),anketa:srv_meta_anketa_id});}
function doMAZAInactiveUsersExportCSV(){$.post('ajax.php?t=MAZA&a=InactiveUsersExportCSV',{anketa:srv_meta_anketa_id});}
function onAlarmsFormsLoad(){var maza_submit_repeater=$('#maza_submit_repeater');var maza_submit_alarms=$('#maza_submit_alarms');var maza_everywhichday_range=[2,6];$('input[name="maza_title"]').bind('input',function(){maza_toggle_submit_alarms();});$('input[name="maza_message"]').bind('input',function(){maza_toggle_submit_alarms();});$('input[name="maza_alarm_intervalby"]').bind('change',function(){$('#maza_alarm_div_weekly').toggle(($(this).val()==='weekly'));$('#maza_alarm_div_daily').toggle(($(this).val()==='daily'));maza_toggle_submit_alarms();$.post('ajax.php?t=MAZA&a=changeRepeatBy',{anketa:srv_meta_anketa_id,maza_repeatby:$(this).val(),maza_table:"alarms"});});$('input[name="maza_alarm_timeinday[]"]').bind('change',function(){var times=[];$('input:checkbox[name="maza_alarm_timeinday[]"]:checked').each(function(){times.push($(this).val());});maza_toggle_submit_alarms();$.post('ajax.php?t=MAZA&a=changeTimeInDay',{anketa:srv_meta_anketa_id,maza_time_in_day:times,maza_table:"alarms"});});$('input[name="maza_alarm_dayinweek[]"]').bind('change',function(){var times=[];$('input:checkbox[name="maza_alarm_dayinweek[]"]:checked').each(function(){times.push($(this).val());});maza_toggle_submit_alarms();$.post('ajax.php?t=MAZA&a=changeDayInWeek',{anketa:srv_meta_anketa_id,maza_day_in_week:times,maza_table:"alarms"});});$('input[name="maza_alarm_everywhichday"]').bind('input',function(){if($(this).val()>=maza_everywhichday_range[0]&&$(this).val()<=maza_everywhichday_range[1])
$.post('ajax.php?t=MAZA&a=changeEveryWhichDay',{anketa:srv_meta_anketa_id,maza_every_which_day:$(this).val(),maza_table:"alarms"});maza_toggle_submit_alarms();});$('input[name="maza_repeater_intervalby"]').bind('change',function(){$('#maza_repeater_div_weekly').toggle(($(this).val()==='weekly'));$('#maza_repeater_div_daily').toggle(($(this).val()==='daily'));maza_toggle_submit_repeater();});$('input[name="maza_repeater_timeinday[]"]').bind('change',function(){maza_toggle_submit_repeater();});$('input[name="maza_repeater_dayinweek[]"]').bind('change',function(){maza_toggle_submit_repeater();});$('input[name="maza_repeater_everywhichday"]').bind('input',function(){maza_toggle_submit_repeater();});$('input[name="maza_repeater_date_start"]').bind('change',function(){var pickedDateSplit=this.value.split(".");var pickedDate=new Date(pickedDateSplit[2],pickedDateSplit[1]-1,pickedDateSplit[0]);var pickedDateFormated=$.datepicker.formatDate('dd.mm.yy',pickedDate);this.value=pickedDateFormated;var pickedDateTimestamp=pickedDate.getTime();var nowDate=new Date();var todayDateTimestamp=(new Date(nowDate.getFullYear(),nowDate.getMonth(),nowDate.getDate())).getTime();if(!pickedDateTimestamp||pickedDateTimestamp<todayDateTimestamp+(maza_start_day_repeater*86400000)){this.value="";$("#maza_repeater_start_date_warning").hide();}
maza_toggle_submit_repeater();});$('input[name="maza_repeater_date_end"]').bind('change',function(){var pickedDateSplit=this.value.split(".");var pickedDate=new Date(pickedDateSplit[2],pickedDateSplit[1]-1,pickedDateSplit[0]);var pickedDateFormated=$.datepicker.formatDate('dd.mm.yy',pickedDate);this.value=pickedDateFormated;var pickedDateTimestamp=pickedDate.getTime();var nowDate=new Date();var todayDateTimestamp=(new Date(nowDate.getFullYear(),nowDate.getMonth(),nowDate.getDate())).getTime();if(!pickedDateTimestamp||pickedDateTimestamp<todayDateTimestamp+(maza_end_day_repeater*86400000)){this.value="";}
maza_toggle_submit_repeater();});function maza_toggle_submit_alarms(){if(!$('input[name="maza_message"]').val().length>0)
maza_submit_alarms.hide();else{if($('input:checkbox[name="maza_alarm_timeinday[]"]:checked').length===0)
maza_submit_alarms.hide();else if($('input[name="maza_alarm_intervalby"]:checked').val()==="everyday")
maza_submit_alarms.show();else if($('input[name="maza_alarm_intervalby"]:checked').val()==="daily"){var everywhichday=$('input[name="maza_alarm_everywhichday"]').val();if(everywhichday>=maza_everywhichday_range[0]&&everywhichday<=maza_everywhichday_range[1])
maza_submit_alarms.show();else
maza_submit_alarms.hide();}else if($('input[name="maza_alarm_intervalby"]:checked').val()==="weekly"){if($('input:checkbox[name="maza_alarm_dayinweek[]"]:checked').length===0)
maza_submit_alarms.hide();else
maza_submit_alarms.show();}}}
function maza_toggle_submit_repeater(){var startVal=$('#maza_repeater_date_start').val();var endVal=$('#maza_repeater_date_end').val();var datesValid=true;if(startVal&&endVal){var startDateSplit=startVal.split(".");var startDate=new Date(startDateSplit[2],startDateSplit[1]-1,startDateSplit[0]);var endDateSplit=endVal.split(".");var endDate=new Date(endDateSplit[2],endDateSplit[1]-1,endDateSplit[0]);datesValid=startVal<endVal;}
if(!startVal||(startVal&&!datesValid))
maza_submit_repeater.hide();else if($('input:checkbox[name="maza_repeater_timeinday[]"]:checked').length===0)
maza_submit_repeater.hide();else if($('input[name="maza_repeater_intervalby"]:checked').val()==="everyday")
maza_submit_repeater.show();else if($('input[name="maza_repeater_intervalby"]:checked').val()==="daily"){var everywhichday=$('input[name="maza_repeater_everywhichday"]').val();if(everywhichday>=maza_everywhichday_range[0]&&everywhichday<=maza_everywhichday_range[1])
maza_submit_repeater.show();else
maza_submit_repeater.hide();}else if($('input[name="maza_repeater_intervalby"]:checked').val()==="weekly"){if($('input:checkbox[name="maza_repeater_dayinweek[]"]:checked').length===0)
maza_submit_repeater.hide();else
maza_submit_repeater.show();}}
maza_toggle_submit_alarms();maza_toggle_submit_repeater();mazaChooseDate(maza_start_day_repeater,$("#maza_repeater_date_start"));mazaChooseDate(maza_end_day_repeater,$("#maza_repeater_date_end"));}
function mazaChooseDate(maza_start_day_repeater,element){element.datepicker({minDate:maza_start_day_repeater,dateFormat:"dd.mm.yy",showAnim:"slideDown",onSelect:function(dateText,inst){element.trigger('change');return false;}});}
function onGeofencingFormsLoad(ank_id,geo_on){geofencing_on=geo_on;if((typeof google==='object'&&typeof google.maps==='object')){mazaMaps(ank_id);}
else{mapsAPIseNi(function(){mazaMaps(ank_id);});}
$('#maza_geofence_trigger_survey').bind('change',function(){if(this.checked){$("#maza_title").prop('disabled',true);$("#maza_message").prop('disabled',true);}
else{$("#maza_title").prop('disabled',false);$("#maza_message").prop('disabled',false);}});}
function toggleARInterval(checkbox){if(checkbox.checked)
$('#maza_ar_interval_div').show();else
$('#maza_ar_interval_div').hide();}
function mazaMaps(ank_id){var mapType=google.maps.MapTypeId.ROADMAP;var mapOptions={disableDoubleClickZoom:true,mapTypeId:mapType};mapOptions.center={lat:46.151241,lng:14.995463};mapOptions.zoom=7;var mapdiv=document.getElementById("maza_map_geofencing");var map=new google.maps.Map(mapdiv,mapOptions);mapdiv.gMap=map;bounds['maza_map_geofencing']=new google.maps.LatLngBounds();if(!geocoder)
geocoder=new google.maps.Geocoder();if(!infowindow)
infowindow=new google.maps.InfoWindow();allMarkers['maza_map_geofencing']=[];if(!geofencing_on){searchBox('maza_map_geofencing',function doAfterPlaceFromSearchBox(pos,address){bounds['maza_map_geofencing']=new google.maps.LatLngBounds();maza_saveGeofence(address,maza_create_basic_circle(pos,address,maza_default_radius,true));});maza_klikNaMapo();}
$.post('ajax.php?t=MAZA&a=get_all_geofences',{anketa:ank_id},function(data){if(data.length>0)
map_data_fill_vnaprej_geofences(JSON.parse(data));});}
function map_data_fill_vnaprej_geofences(map_data){for(var row in map_data){var row_object=map_data[row];var pos={lat:row_object.lat,lng:row_object.lng};maza_createCircleVnaprej(row_object.address,maza_create_basic_circle(pos,row_object.address,row_object.radius,false),row_object.id,row_object.name);}}
function maza_create_basic_circle(pos,address,radius,fromSearchBox){var circle=null;if(fromSearchBox===undefined){fromSearchBox=false;}
var map=document.getElementById("maza_map_geofencing").gMap;if(fromSearchBox)
circle=address?findMarkerFromAddress(address,"maza_map_geofencing"):null;if(!circle){circle=new google.maps.Circle({center:new google.maps.LatLng(pos.lat,pos.lng),map:map,radius:parseFloat(radius),editable:!geofencing_on,fillColor:'red'});allMarkers["maza_map_geofencing"].push(circle);return circle;}else{bounds['maza_map_geofencing']=new google.maps.LatLngBounds();bounds["maza_map_geofencing"].union(circle.getBounds());map.fitBounds(bounds["maza_map_geofencing"]);return null}}
function maza_saveGeofence(address,circle){if(circle!=null){$.post('ajax.php?t=MAZA&a=insert_geofence',{address:address,lat:circle.getCenter().lat(),lng:circle.getCenter().lng(),radius:maza_default_radius,anketa:srv_meta_anketa_id},function(id){maza_createCircleVnaprej(address,circle,id,null);});}}
function maza_klikNaMapo(){var map=document.getElementById("maza_map_geofencing").gMap;google.maps.event.addListener(map,'click',function(event){var pos={lat:event.latLng.lat(),lng:event.latLng.lng()};GeocodingF(pos,function(data){if(data!=null){bounds['maza_map_geofencing']=new google.maps.LatLngBounds();maza_saveGeofence(data.formatted_address,maza_create_basic_circle(pos,data.formatted_address,maza_default_radius,false));}else{genericAlertPopup('srv_resevanje_alert_location_not_found_map');}});return pos;});}
function maza_createCircleVnaprej(address,circle,id,name){if(circle!=null){var map=document.getElementById("maza_map_geofencing").gMap;circle.address=address;circle.id=id;if(name)
circle.name=name;circle.infowin=makeGeofenceInfoWindow(circle);setListenersGeofence(circle,map);google.maps.event.addListener(circle,'radius_changed',function(){$.post('ajax.php?t=MAZA&a=update_geofence',{id:circle.id,radius:circle.getRadius(),anketa:srv_meta_anketa_id});circle.radius=circle.getRadius();circle.infowin=makeGeofenceInfoWindow(circle);infowindow.close();});google.maps.event.addListener(circle,'center_changed',function(){var pos={lat:circle.getCenter().lat(),lng:circle.getCenter().lng()};GeocodingF(pos,function(data){if(data!=null){$.post('ajax.php?t=MAZA&a=update_geofence',{id:circle.id,lat:circle.getCenter().lat(),lng:circle.getCenter().lng(),address:data.formatted_address,anketa:srv_meta_anketa_id});circle.address=data.formatted_address;}else{$.post('ajax.php?t=MAZA&a=update_geofence',{id:circle.id,lat:circle.getCenter().lat(),lng:circle.getCenter().lng(),address:'',anketa:srv_meta_anketa_id});circle.address='Unknown address';}
circle.infowin=makeGeofenceInfoWindow(circle);infowindow.close();});});bounds["maza_map_geofencing"].union(circle.getBounds());map.fitBounds(bounds["maza_map_geofencing"]);}}
function makeGeofenceInfoWindow(shape){var container=document.createElement("div");container.style.cssText='margin-right:1px';var textBoxTitle=document.createElement("input");textBoxTitle.style.cssText="font-weight:bold; font-size:1em !important; display: block; float: left;";textBoxTitle.type="text";textBoxTitle.placeholder=lang['srv_maza_geofence_infowin_name'];if(shape.name)
textBoxTitle.value=shape.name;textBoxTitle.className="input_title";textBoxTitle.maxLength="20";textBoxTitle.id="map_input_overlay_id_"+shape.id;if(geofencing_on)
textBoxTitle.disabled=true;container.appendChild(textBoxTitle);google.maps.event.addDomListener(textBoxTitle,"change",function(){$.post('ajax.php?t=MAZA&a=update_geofence_name',{id:shape.id,name:textBoxTitle.value,anketa:srv_meta_anketa_id,lang_id:srv_meta_lang_id});});if(!geofencing_on){var deleteImg=document.createElement("span");deleteImg.className="faicon delete icon-grey_dark_link";deleteImg.title=lang['srv_vprasanje_delete_line_map'];deleteImg.style.cssText="height:1.65em; display: block; float: right; margin-left:7px; cursor: pointer;";container.appendChild(deleteImg);google.maps.event.addDomListener(deleteImg,"click",function(){if(confirm(lang['srv_maza_geofence_delete_confirm_map']))
maza_delete_geofence(shape);});}
container.appendChild(document.createElement("br"));var address=document.createElement("label");address.innerHTML='<i>'+shape.address+'</i>';address.style.cssText='font-size:0.85em; cursor: default;';container.appendChild(address);container.appendChild(document.createElement("br"));var radius=document.createElement("label");radius.innerHTML=lang['srv_maza_geofence_infowin_radius']+Math.round(shape.radius)+lang['srv_maza_geofence_infowin_radius_unit'];radius.style.cssText='font-size:0.85em;cursor: default;';container.appendChild(radius);container.appendChild(document.createElement("br"));return container;}
function setListenersGeofence(shape,map){google.maps.event.addListener(shape,'click',function(ev){infowindow.setContent(this.infowin);infowindow.setPosition(ev.latLng);infowindow.open(map);$("#map_input_overlay_id_"+shape.id).focus();});}
function maza_delete_geofence(circle){$.post('ajax.php?t=MAZA&a=delete_geofence',{id:circle.id,anketa:srv_meta_anketa_id},function(data){if(data='OK')
circle.setMap(null);infowindow.close();});}
function maza_setDeleteMenu(shape,map,spremenljivka){google.maps.event.addListener(shape,'rightclick',function(e){deleteMenu.open_shape(map,shape,e.latLng,spremenljivka);});google.maps.event.addListener(shape,'dblclick',function(e){deleteMenu.open_shape(map,shape,e.latLng,spremenljivka);});}
function maza_repeater_submit_button_click(){var inputVal=$("#maza_repeater_date_start").val();var pickedDateSplit=inputVal.split(".");var pickedDate=new Date(pickedDateSplit[2],pickedDateSplit[1]-1,pickedDateSplit[0]);var pickedDateTimestamp=pickedDate.getTime();var nowDate=new Date();var todayDateTimestamp=(new Date(nowDate.getFullYear(),nowDate.getMonth(),nowDate.getDate())).getTime();if(pickedDateTimestamp<=todayDateTimestamp){var result=confirm(lang['srv_maza_repeater_edit_warning_alert']);if(result)
$('#maza_save_repeater_form').submit();}
else
$('#maza_save_repeater_form').submit();}
function maza_repeater_cancel_click(){var result=confirm(lang['srv_maza_repeater_finish_warning_alert']);if(result)
$('#maza_cancel_repeater_form').submit();}